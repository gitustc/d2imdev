cscope 15 $HOME/Desktop/flare-0.18/src               0001131380
	@AStarNode.cpp

20 
	~"ASrNode.h
"

22 
	gASrNode
::
	$ASrNode
()

23 : 
	`x
(0)

24 , 
	`y
(0)

25 , 
	`g
(0)

26 , 
	`h
(0)

27 , 
	$·»Á
()

28 {
	}
}

30 
	gASrNode
::
	$ASrNode
(cÚ¡ 
a
, cÚ¡ 
b
)

31 : 
	`x
(
a
)

32 , 
	`y
(
b
)

33 , 
	`g
(0)

34 , 
	`h
(0)

35 , 
	$·»Á
()

36 {
	}
}

38 
	gASrNode
::
	$ASrNode
(cÚ¡ 
Pošt
 &
p
)

39 : 
	`x
(
p
.
x
)

40 , 
	`y
(
p
.
y
)

41 , 
	`g
(0)

42 , 
	`h
(0)

43 , 
	`·»Á
(
	$Pošt
())

44 {
	}
}

46 
	gASrNode
::
	$ASrNode
(cÚ¡ 
ASrNode
& 
cİy
)

47 : 
	`x
(
cİy
.
x
)

48 , 
	`y
(
cİy
.
y
)

49 , 
	`g
(
cİy
.
g
)

50 , 
	`h
(
cİy
.
h
)

51 , 
	$·»Á
(
cİy
.
·»Á
)

52 {
	}
}

54 
	gASrNode
::
	$g‘X
() const

56  
x
;

57 
	}
}

59 
	gASrNode
::
	$g‘Y
() const

61  
y
;

62 
	}
}

64 
Pošt
 
	gASrNode
::
	$g‘P¬’t
() const

66  
·»Á
;

67 
	}
}

69 
	gASrNode
::
	$£tP¬’t
(cÚ¡ 
Pošt
& 
p
)

71 
this
->
·»Á
 = 
p
;

72 
	}
}

74 
	g¡d
::
li¡
<
Pošt
> 
ASrNode
::
	$g‘Neighbours
(
lim™X
, 
lim™Y
) const

76 
Pošt
 
toAdd
;

77 
¡d
::
li¡
<
Pošt
> 
»s
;

78 ià(
x
>
node_¡ride
 && 
y
>node_stride)

80 
toAdd
.
x
 = x-
node_¡ride
;

81 
toAdd
.
y
 = y-
node_¡ride
;

82 
»s
.
	`push_back
(
toAdd
);

84 ià(
x
>
node_¡ride
 && (
lim™Y
==0 || 
y
<limitY-node_stride))

86 
toAdd
.
x
 = x-
node_¡ride
;

87 
toAdd
.
y
 = y+
node_¡ride
;

88 
»s
.
	`push_back
(
toAdd
);

90 ià(
y
>
node_¡ride
 && (
lim™X
==0 || 
x
<limitX-node_stride))

92 
toAdd
.
x
 = x+
node_¡ride
;

93 
toAdd
.
y
 = y-
node_¡ride
;

94 
»s
.
	`push_back
(
toAdd
);

96 ià((
lim™X
==0 || 
x
<lim™X-
node_¡ride
è&& (
lim™Y
==0 || 
y
<limitY-node_stride))

98 
toAdd
.
x
 = x+
node_¡ride
;

99 
toAdd
.
y
 = y+
node_¡ride
;

100 
»s
.
	`push_back
(
toAdd
);

102 ià(
x
>
node_¡ride
)

104 
toAdd
.
x
 = x-
node_¡ride
;

105 
toAdd
.
y
 = y;

106 
»s
.
	`push_back
(
toAdd
);

108 ià(
y
>
node_¡ride
)

110 
toAdd
.
x
 = x;

111 
toAdd
.
y
 = y-
node_¡ride
;

112 
»s
.
	`push_back
(
toAdd
);

114 ià(
lim™X
==0 || 
x
<lim™X-
node_¡ride
)

116 
toAdd
.
x
 = x+
node_¡ride
;

117 
toAdd
.
y
 = y;

118 
»s
.
	`push_back
(
toAdd
);

120 ià(
lim™Y
==0 || 
y
<lim™Y-
node_¡ride
)

122 
toAdd
.
x
 = x;

123 
toAdd
.
y
 = y+
node_¡ride
;

124 
»s
.
	`push_back
(
toAdd
);

127  
»s
;

128 
	}
}

131 
	gASrNode
::
	$g‘Aùu®Co¡
() const

133  
g
;

134 
	}
}

136 
	gASrNode
::
	$£tAùu®Co¡
(cÚ¡ 
G
)

138 
g
 = 
G
;

139 
	}
}

141 
	gASrNode
::
	$£tE¡im©edCo¡
(cÚ¡ 
H
)

143 
h
 = 
H
;

144 
	}
}

146 
	gASrNode
::
	$g‘Fš®Co¡
() const

148  
g
+
h
*2.f;

149 
	}
}

151 
boŞ
 
	gASrNode
::
İ”©Ü
<(cÚ¡ 
ASrNode
& 
n
) const

153  
g‘Fš®Co¡
(è< 
n
.getFinalCost();

156 
boŞ
 
	gASrNode
::
İ”©Ü
==(cÚ¡ 
ASrNode
& 
n
) const

158  
x
 =ğ
n
.x && 
y
 ==‚.y;

161 
boŞ
 
	gASrNode
::
İ”©Ü
==(cÚ¡ 
Pošt
& 
p
) const

163  
x
 =ğ
p
.x && 
y
 ==….y;

166 
boŞ
 
	gASrNode
::
İ”©Ü
!=(cÚ¡ 
Pošt
& 
p
) const

168  
x
 !ğ
p
.x || 
y
 !=….y;

	@AStarNode.h

26 #´agm¨
Úû


27 #iâdeà
ASTARNODE_H


28 
	#ASTARNODE_H


	)

30 
	~<li¡
>

31 
	~"Uts.h
"

33 cÚ¡ 
	gnode_¡ride
 = 1;

35 şas 
	cASrNode


37 
	m´Ùeùed
:

39 
x
;

40 
	my
;

43 
	mg
;

45 
	mh
;

47 
Pošt
 
	m·»Á
;

49 
	mpublic
:

50 
ASrNode
();

51 
ASrNode
(cÚ¡ 
a
, cÚ¡ 
b
);

52 
ASrNode
(cÚ¡ 
Pošt
 &
p
);

53 
ASrNode
(cÚ¡ ASrNode& 
cİy
);

55 
	$g‘X
() const;

56 
	$g‘Y
() const;

58 
Pošt
 
	$g‘P¬’t
() const;

59 
	`£tP¬’t
(cÚ¡ 
Pošt
& 
p
);

62 
¡d
::
li¡
<
Pošt
> 
	$g‘Neighbours
(
lim™X
=0, 
lim™Y
=0) const;

64 
	$g‘Aùu®Co¡
() const;

65 
	`£tAùu®Co¡
(cÚ¡ 
G
);

67 
	`£tE¡im©edCo¡
(cÚ¡ 
H
);

69 
	$g‘Fš®Co¡
() const;

71 
boŞ
 
İ”©Ü
<(cÚ¡ 
ASrNode
& 
n
) const;

72 
boŞ
 
İ”©Ü
==(cÚ¡ 
ASrNode
& 
n
) const;

73 
boŞ
 
İ”©Ü
==(cÚ¡ 
Pošt
& 
p
) const;

74 
boŞ
 
İ”©Ü
!=(cÚ¡ 
Pošt
& 
p
) const;

	@Animation.cpp

29 
	~"Anim©iÚ.h
"

31 
	~<io¡»am
>

32 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gAnim©iÚ
::
Anim©iÚ
(cÚ¡ 
¡d
::
¡ršg
 &
_Çme
, cÚ¡ std::¡ršg &
_ty³
, 
SDL_Surçû
 *
_¥r™e
)

35 : 
Çme
(
_Çme
)

36 , 
ty³
Ğ
_ty³
 =ğ"¶ay_Úû" ? 
PLAY_ONCE
 :

37 
_ty³
 =ğ"back_fÜth" ? 
BACK_FORTH
 :

38 
_ty³
 =ğ"loİed" ? 
LOOPED
 :

39 
NONE
)

40 , 
¥r™e
(
_¥r™e
)

41 , 
numb”_äames
(0)

42 , 
cur_äame
(0)

43 , 
cur_äame_šdex
(0)

44 , 
cur_äame_du¿tiÚ
(0)

45 , 
max_kšds
(0)

46 , 
add™iÚ®_d©a
(0)

47 , 
times_¶ayed
(0)

48 , 
gfx
()

49 , 
»nd”_off£t
()

50 , 
du¿tiÚ
()

51 , 
	$aùive_äames
()

53 ià(
ty³
 =ğ
NONE
)

54 
cout
 << "W¬nšg:‡nim©iÚy³ " << 
_ty³
 << " i unknown" << 
’dl
;

55 
	}
}

57 
	gAnim©iÚ
::
	$Anim©iÚ
(cÚ¡ 
Anim©iÚ
& 
a
)

58 : 
	`Çme
(
a
.
Çme
)

59 , 
	`ty³
(
a
.
ty³
)

60 , 
	`¥r™e
(
a
.
¥r™e
)

61 , 
	`numb”_äames
(
a
.
numb”_äames
)

62 , 
	`cur_äame
(0)

63 , 
	`cur_äame_šdex
(
a
.
cur_äame_šdex
)

64 , 
	`cur_äame_du¿tiÚ
(
a
.
cur_äame_du¿tiÚ
)

65 , 
	`max_kšds
(
a
.
max_kšds
)

66 , 
	`add™iÚ®_d©a
(
a
.
add™iÚ®_d©a
)

67 , 
	`times_¶ayed
(0)

68 , 
	`gfx
(
¡d
::
veùÜ
<
SDL_Reù
>(
a
.
gfx
))

69 , 
	`»nd”_off£t
(
¡d
::
veùÜ
<
Pošt
>(
a
.
»nd”_off£t
))

70 , 
	`du¿tiÚ
(
¡d
::
veùÜ
<>(
a
.
du¿tiÚ
))

71 , 
	`aùive_äames
(
¡d
::
veùÜ
<>(
a
.
aùive_äames
))

72 {
	}
}

74 
Anim©iÚ
::
	$£tupUncom´es£d
(
Pošt
 
_»nd”_size
, Pošˆ
_»nd”_off£t
, 
_pos™iÚ
, 
_äames
, 
_du¿tiÚ
, 
_maxkšds
) {

75 
	`£tup
(
_äames
, 
_du¿tiÚ
, 
_maxkšds
);

77 
i
 = 0 ; i < 
_äames
; i++) {

78 
ba£_šdex
 = 
max_kšds
*
i
;

79 
kšd
 = 0 ; kšd < 
max_kšds
; kind++) {

80 
gfx
[
ba£_šdex
 + 
kšd
].
x
 = 
_»nd”_size
.x * (
_pos™iÚ
 + 
i
);

81 
gfx
[
ba£_šdex
 + 
kšd
].
y
 = 
_»nd”_size
.y * kind;

82 
gfx
[
ba£_šdex
 + 
kšd
].
w
 = 
_»nd”_size
.
x
;

83 
gfx
[
ba£_šdex
 + 
kšd
].
h
 = 
_»nd”_size
.
y
;

84 
»nd”_off£t
[
ba£_šdex
 + 
kšd
].
x
 = 
_»nd”_off£t
.x;

85 
»nd”_off£t
[
ba£_šdex
 + 
kšd
].
y
 = 
_»nd”_off£t
.y;

88 
	}
}

90 
	gAnim©iÚ
::
	$£tup
(
_äames
, 
_du¿tiÚ
, 
_maxkšds
) {

91 ià(
ty³
 =ğ
PLAY_ONCE
) {

92 
numb”_äames
 = 
_äames
 * 
_du¿tiÚ
;

93 
add™iÚ®_d©a
 = 0;

94 } ià(
ty³
 =ğ
LOOPED
) {

95 
numb”_äames
 = 
_äames
 * 
_du¿tiÚ
;

96 
add™iÚ®_d©a
 = 0;

97 } ià(
ty³
 =ğ
BACK_FORTH
) {

98 
numb”_äames
 = 2 * 
_äames
 * 
_du¿tiÚ
;

99 
add™iÚ®_d©a
 = 1;

101 
cur_äame
 = 0;

102 
cur_äame_šdex
 = 0;

103 
cur_äame_du¿tiÚ
 = 0;

104 
max_kšds
 = 
_maxkšds
;

105 
times_¶ayed
 = 0;

107 
aùive_äames
.
	`push_back
(
numb”_äames
/2);

109 
gfx
.
	`»size
(
max_kšds
*
_äames
);

110 
»nd”_off£t
.
	`»size
(
max_kšds
*
_äames
);

111 
du¿tiÚ
.
	`»size
(
max_kšds
*
_äames
);

112 
i
 = 0; i < 
du¿tiÚ
.
	`size
(); i++)

113 
du¿tiÚ
[
i
] = 
_du¿tiÚ
;

114 
	}
}

116 
	gAnim©iÚ
::
	$addF¿me
Ğ
šdex
,

117 
kšd
,

118 
SDL_Reù
 
sdl_»ù
,

119 
Pošt
 
_»nd”_off£t
) {

121 ià(
šdex
 > 
gfx
.
	`size
()/
max_kšds
) {

122 
	`årštf
(
¡d”r
, "WARNING: Animation(%s)‡dding„ect(%d, %d, %d, %d)o frame index(%u) out of bounds. must be in [0, %d]\n",

123 
Çme
.
	`c_¡r
(), 
sdl_»ù
.
x
, sdl_»ù.
y
, sdl_»ù.
w
, sdl_»ù.
h
, 
šdex
, ()
gfx
.
	`size
()/
max_kšds
);

126 ià(
kšd
 > 
max_kšds
-1) {

127 
	`årštf
(
¡d”r
, "WARNING: Animation(%s)‡dding„ect(%d, %d, %d, %d)o frame(%u) kind(%u) out of bounds. must be in [0, %d]\n",

128 
Çme
.
	`c_¡r
(), 
sdl_»ù
.
x
, sdl_»ù.
y
, sdl_»ù.
w
, sdl_»ù.
h
, 
šdex
, 
kšd
, 
max_kšds
-1);

131 
gfx
[
max_kšds
*
šdex
+
kšd
] = 
sdl_»ù
;

132 
»nd”_off£t
[
max_kšds
*
šdex
+
kšd
] = 
_»nd”_off£t
;

133 
	}
}

135 
	gAnim©iÚ
::
	$advªûF¿me
() {

137 ià(!
this
)

140 
cur_äame_du¿tiÚ
++;

144 ià(
cur_äame
 < 
numb”_äames
-1) cur_frame++;

146 ià(
cur_äame_du¿tiÚ
 >ğ
du¿tiÚ
[
cur_äame_šdex
]) {

147 
cur_äame_du¿tiÚ
 = 0;

148 
Ï¡_ba£_šdex
 = (
gfx
.
	`size
()/
max_kšds
)-1;

149 
ty³
) {

150 
PLAY_ONCE
:

152 ià(
cur_äame_šdex
 < 
Ï¡_ba£_šdex
)

153 
cur_äame_šdex
++;

155 
times_¶ayed
 = 1;

158 
LOOPED
:

159 ià(
cur_äame_šdex
 < 
Ï¡_ba£_šdex
) {

160 
cur_äame_šdex
++;

163 
cur_äame_šdex
 = 0;

164 
cur_äame
 = 0;

165 
times_¶ayed
++;

169 
BACK_FORTH
:

171 ià(
add™iÚ®_d©a
 == 1) {

172 ià(
cur_äame_šdex
 < 
Ï¡_ba£_šdex
)

173 
cur_äame_šdex
++;

175 
add™iÚ®_d©a
 = -1;

177 ià(
add™iÚ®_d©a
 == -1) {

178 ià(
cur_äame_šdex
 > 0)

179 
cur_äame_šdex
--;

181 
add™iÚ®_d©a
 = 1;

182 
cur_äame
 = 0;

183 
times_¶ayed
++;

188 
NONE
:

192 
	}
}

194 
R’d”abË
 
	gAnim©iÚ
::
	$g‘Cu¼’tF¿me
(
kšd
) {

195 
R’d”abË
 
r
;

196 ià(
this
) {

197 cÚ¡ 
šdex
 = (
max_kšds
*
cur_äame_šdex
è+ 
kšd
;

198 
r
.
¤c
.
x
 = 
gfx
[
šdex
].x;

199 
r
.
¤c
.
y
 = 
gfx
[
šdex
].y;

200 
r
.
¤c
.
w
 = 
gfx
[
šdex
].w;

201 
r
.
¤c
.
h
 = 
gfx
[
šdex
].h;

202 
r
.
off£t
.
x
 = 
»nd”_off£t
[
šdex
].x;

203 
r
.
off£t
.
y
 = 
»nd”_off£t
[
šdex
].y;

204 
r
.
¥r™e
 = sprite;

207 
	`mem£t
(&
r
, 0, (
R’d”abË
));

209  
r
;

210 
	}
}

212 
	gAnim©iÚ
::
	$»£t
() {

213 
cur_äame
 = 0;

214 
cur_äame_du¿tiÚ
 = 0;

215 
cur_äame_šdex
 = 0;

216 
times_¶ayed
 = 0;

217 
add™iÚ®_d©a
 = 1;

218 
	}
}

220 
	gAnim©iÚ
::
	$syncTo
(cÚ¡ 
Anim©iÚ
 *
Ùh”
) {

221 
cur_äame
 = 
Ùh”
->cur_frame;

222 
cur_äame_du¿tiÚ
 = 
Ùh”
->cur_frame_duration;

223 
cur_äame_šdex
 = 
Ùh”
->cur_frame_index;

224 
times_¶ayed
 = 
Ùh”
->times_played;

225 
add™iÚ®_d©a
 = 
Ùh”
->additional_data;

226 
	}
}

228 
	gAnim©iÚ
::
£tAùiveF¿mes
(cÚ¡ 
¡d
::
veùÜ
<> &
_aùive_äames
) {

229 ià(
_aùive_äames
.
size
() == 1 && _active_frames[0] == -1)

230 
i
=0; 
	gi
 < 
	gnumb”_äames
; ++i)

231 
	gaùive_äames
.
push_back
(
i
);

233 
	gaùive_äames
 = 
¡d
::
veùÜ
<>(
_aùive_äames
);

	@Animation.h

29 #´agm¨
Úû


30 #iâdeà
ANIMATION_H


31 
	#ANIMATION_H


	)

33 
	~"Uts.h
"

35 
	~<SDL_image.h
>

37 
	~<®gÜ™hm
>

38 
	~<¡ršg
>

39 
	~<veùÜ
>

40 
	~<io¡»am
>

42 
	eªim©iÚ_ty³
 {

43 
	mNONE
 = 0,

44 
	mPLAY_ONCE
 = 1,

45 
	mLOOPED
 = 2,

46 
	mBACK_FORTH
 = 3

49 şas 
	cAnim©iÚ
 {

50 
	m´Ùeùed
:

51 cÚ¡ 
¡d
::
¡ršg
 
Çme
;

52 cÚ¡ 
ªim©iÚ_ty³
 
	mty³
;

53 
SDL_Surçû
 *
	m¥r™e
;

55 
	mnumb”_äames
;

56 
	mcur_äame
;

58 
	mcur_äame_šdex
;

59 
	mcur_äame_du¿tiÚ
;

61 
	mmax_kšds
;

63 
	madd™iÚ®_d©a
;

68 
	mtimes_¶ayed
;

72 
	m¡d
::
veùÜ
<
SDL_Reù
> 
gfx
;

73 
	m¡d
::
veùÜ
<
Pošt
> 
»nd”_off£t
;

74 
	m¡d
::
veùÜ
<> 
du¿tiÚ
;

76 
	m¡d
::
veùÜ
<> 
aùive_äames
;

80 
	mpublic
:

81 
Anim©iÚ
(cÚ¡ 
¡d
::
¡ršg
 &
_Çme
, cÚ¡ std::¡ršg &
_ty³
, 
SDL_Surçû
 *
_¥r™e
);

84 
Anim©iÚ
(const Animation&);

94 
£tupUncom´es£d
(
Pošt
 
»nd”_size
, Pošˆ
»nd”_off£t
, 
_pos™iÚ
, 
_äames
, 
_du¿tiÚ
, 
_maxkšds
 = 8);

96 
£tup
(
_äames
, 
_du¿tiÚ
, 
_maxkšds
 = 8);

99 
addF¿me
(
šdex
, 
kšd
, 
SDL_Reù
 
sdl_»ù
, 
Pošt
 
_»nd”_off£t
);

102 
advªûF¿me
();

105 
syncTo
(cÚ¡ 
Anim©iÚ
 *
Ùh”
);

107 
boŞ
 
isHov”edBy
(cÚ¡ 
Pošt
 &);

110 
R’d”abË
 
g‘Cu¼’tF¿me
(
dœeùiÚ
);

112 
boŞ
 
	$isFœ¡F¿me
(è{  
cur_äame
 == 0; }

113 
boŞ
 
	$isLa¡F¿me
(è{  
cur_äame
 =ğ
numb”_äames
 - 1; 
	}
}

114 
boŞ
 
	$isSecÚdLa¡F¿me
(è{  
cur_äame
 =ğ
numb”_äames
 - 2; 
	}
}

116 
boŞ
 
	$isAùiveF¿me
(è{  (
¡d
::
	`fšd
(
aùive_äames
.
	`begš
(),‡ùive_äames.
	`’d
(), 
cur_äame
)!÷ùive_äames.’d()); 
	}
}

120 
	$g‘TimesPÏyed
(è{  
times_¶ayed
; 
	}
}

123 
»£t
();

125 
	g¡d
::
¡ršg
 
	$g‘Name
(è{  
Çme
; 
	}
}

129 
£tAùiveF¿mes
(cÚ¡ 
¡d
::
veùÜ
<> &
_aùive_äames
);

131 
boŞ
 
	$isCom¶‘ed
() {

132 ià(
ty³
 =ğ
PLAY_ONCE
 && 
times_¶ayed
 > 0è 
Œue
;

133  
çl£
;

134 
	}
}

	@AnimationManager.cpp

18 
	~"Sh¬edResourûs.h
"

20 
	~<®gÜ™hm
>

21 
	~<ÿs£¹
>

22 
	~<¡ršg
>

24 
usšg
 
Çme¥aû
 
	g¡d
;

26 
Anim©iÚS‘
 *
	gAnim©iÚMªag”
::
	$g‘Anim©iÚS‘
(cÚ¡ 
¡ršg
& 
f’ame
) {

27 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
	`fšd
(
Çmes
.
	`begš
(),‚ames.
	`’d
(), 
f’ame
);

28 ià(
found
 !ğ
Çmes
.
	`’d
()) {

29 
šdex
 = 
	`di¡ªû
(
Çmes
.
	`begš
(), 
found
);

30 ià(
£ts
[
šdex
] == 0) {

31 
£ts
[
šdex
] = 
Ãw
 
	`Anim©iÚS‘
(
f’ame
);

33  
£ts
[
šdex
];

35 
	`årštf
(
¡d”r
, "Anim©iÚMªag”::g‘Anim©iÚS‘: % nÙ found\n", 
f’ame
.
	`c_¡r
());

36 
	`SDL_Qu™
();

37 
	`ex™
(1);

40 
	}
}

42 
	gAnim©iÚMªag”
::
	$Anim©iÚMªag”
()

43 {
	}
}

45 
Anim©iÚMªag”
::~
	$Anim©iÚMªag”
()

47 
	`ş—nUp
();

49 #iâdeà
NDEBUG


50 ià(!
Çmes
.
	`em±y
()) {

51 
cout
 << "Anim©iÚMªag” stÈhŞdšghe£‡nim©iÚs:" << 
’dl
;

52 
i
 = 0; i < 
Çmes
.
	`size
(); i++)

53 
	`årštf
(
¡d”r
, "% %d\n", 
Çmes
[
i
].
	`c_¡r
(), 
couÁs
[i]);

55 
	`as£¹
(
Çmes
.
	`size
() == 0);

57 
	}
}

59 
	gAnim©iÚMªag”
::
šü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

60 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
fšd
(
Çmes
.
begš
(),‚ames.
’d
(), 
Çme
);

61 ià(
	gfound
 !ğ
Çmes
.
’d
()) {

62 
šdex
 = 
di¡ªû
(
Çmes
.
begš
(), 
found
);

63 
	gcouÁs
[
šdex
]++;

65 
	g£ts
.
push_back
(0);

66 
	gÇmes
.
push_back
(
Çme
);

67 
	gcouÁs
.
push_back
(1);

71 
	gAnim©iÚMªag”
::
deü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

73 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
fšd
(
Çmes
.
begš
(),‚ames.
’d
(), 
Çme
);

74 ià(
	gfound
 !ğ
Çmes
.
’d
()) {

75 
šdex
 = 
di¡ªû
(
Çmes
.
begš
(), 
found
);

76 
	gcouÁs
[
šdex
]--;

78 
årštf
(
¡d”r
, "Anim©iÚMªag”::deü—£CouÁ: % nÙ found\n", 
Çme
.
c_¡r
());

79 
SDL_Qu™
();

80 
ex™
(1);

84 
	gAnim©iÚMªag”
::
	$ş—nUp
() {

85 
i
 = 
£ts
.
	`size
() - 1;

86 
i
 >= 0) {

87 ià(
couÁs
[
i
] <= 0) {

88 
d–‘e
 
£ts
[
i
];

89 
couÁs
.
	`”a£
(couÁs.
	`begš
()+
i
);

90 
£ts
.
	`”a£
(£ts.
	`begš
()+
i
);

91 
Çmes
.
	`”a£
Òames.
	`begš
()+
i
);

93 --
i
;

95 
imag
->
	`ş—nUp
();

96 
	}
}

	@AnimationManager.h

18 #´agm¨
Úû


19 #iâdeà
__ANIMATION_MANAGER__


20 
	#__ANIMATION_MANAGER__


	)

22 
	~<¡ršg
>

23 
	~<veùÜ
>

25 
	~"Anim©iÚ.h
"

26 
	~"Anim©iÚS‘.h
"

28 şas 
	cAnim©iÚMªag”
 {

29 
	m´iv©e
:

30 
¡d
::
veùÜ
<
Anim©iÚS‘
*> 
£ts
;

31 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Çmes
;

32 
	m¡d
::
veùÜ
<> 
couÁs
;

34 
	mpublic
:

35 
Anim©iÚMªag”
();

36 ~
Anim©iÚMªag”
();

41 
Anim©iÚS‘
 *
g‘Anim©iÚS‘
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

43 
deü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

44 
šü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

45 
ş—nUp
();

	@AnimationSet.cpp

19 
	~"Anim©iÚ.h
"

20 
	~"Anim©iÚS‘.h
"

21 
	~"Anim©iÚMªag”.h
"

23 
	~"ImageMªag”.h
"

24 
	~"FeP¬£r.h
"

25 
	~"Sh¬edResourûs.h
"

26 
	~"S‘tšgs.h
"

27 
	~"UtsP¬sšg.h
"

29 
	~<®gÜ™hm
>

30 
	~<ÿs£¹
>

31 
	~<¡ršg
>

33 
usšg
 
Çme¥aû
 
	g¡d
;

35 
Anim©iÚ
 *
	gAnim©iÚS‘
::
g‘Anim©iÚ
(cÚ¡ 
¡d
::
¡ršg
 &
_Çme
)

37 ià(!
lßded
)

38 
lßd
();

39 
size_t
 
	gi
 = 0; i < 
	gªim©iÚs
.
size
(); i++)

40 ià(
	gªim©iÚs
[
i
]->
g‘Name
(è=ğ
_Çme
)

41  
Ãw
 
Anim©iÚ
(*
ªim©iÚs
[
i
]);

42  
Ãw
 
Anim©iÚ
(*
deçuÉAnim©iÚ
);

45 
Anim©iÚ
 *
	gAnim©iÚS‘
::
	$g‘Anim©iÚ
()

47 ià(!
lßded
)

48 
	`lßd
();

49  
Ãw
 
	`Anim©iÚ
(*
deçuÉAnim©iÚ
);

50 
	}
}

52 
	gAnim©iÚS‘
::
Anim©iÚS‘
(cÚ¡ 
¡d
::
¡ršg
 &
ªim©iÚÇme
)

53 : 
Çme
(
ªim©iÚÇme
)

54 , 
lßded
(
çl£
)

55 , 
ªim©iÚs
()

56 , 
	$¥r™e
(
NULL
)

58 
deçuÉAnim©iÚ
 = 
Ãw
 
	`Anim©iÚ
("deçuÉ", "¶ay_Úû", 
NULL
);

59 
deçuÉAnim©iÚ
->
	`£tupUncom´es£d
(
	`Pošt
(), Point(), 0, 1, 0);

60 
	}
}

62 
	gAnim©iÚS‘
::
	$lßd
() {

63 
	`as£¹
(!
lßded
);

64 
lßded
 = 
Œue
;

66 
FeP¬£r
 
·r£r
;

67 cÚ¡ 
¡ršg
 
f’ame
 = 
mods
->
	`loÿ‹
(
Çme
);

69 ià(!
·r£r
.
	`İ’
(
f’ame
.
	`c_¡r
())) {

70 
cout
 << "E¼Ü†ßdšg‡nim©iÚ defš™iÚ fe: " << 
Çme
 << 
’dl
;

74 
¡ršg
 
_Çme
 = "";

75 
pos™iÚ
 = 0;

76 
äames
 = 0;

77 
du¿tiÚ
 = 0;

78 
Pošt
 
»nd”_size
;

79 
Pošt
 
»nd”_off£t
;

80 
¡ršg
 
ty³
 = "";

81 
¡ršg
 
¡¬tšg_ªim©iÚ
 = "";

82 
boŞ
 
fœ¡_£ùiÚ
=
Œue
;

83 
boŞ
 
com´es£d_lßdšg
=
çl£
;

84 
Anim©iÚ
 *
Ãwªim
 = 
NULL
;

85 
veùÜ
<> 
aùive_äames
;

88 
·r£r
.
	`Ãxt
();

92 ià(
·r£r
.
Ãw_£ùiÚ
) {

93 ià(!
fœ¡_£ùiÚ
 && !
com´es£d_lßdšg
) {

94 
Anim©iÚ
 *
a
 = 
Ãw
 
	`Anim©iÚ
(
_Çme
, 
ty³
, 
¥r™e
);

95 
a
->
	`£tupUncom´es£d
(
»nd”_size
, 
»nd”_off£t
, 
pos™iÚ
, 
äames
, 
du¿tiÚ
);

96 ià(!
aùive_äames
.
	`em±y
())

97 
a
->
	`£tAùiveF¿mes
(
aùive_äames
);

98 
aùive_äames
.
	`ş—r
();

99 
ªim©iÚs
.
	`push_back
(
a
);

101 
fœ¡_£ùiÚ
 = 
çl£
;

102 
com´es£d_lßdšg
 = 
çl£
;

104 ià(
·r£r
.
key
 == "image") {

105 ià(
¥r™e
) {

106 
	`´štf
("muÉË image ¥ecif›d iÀ%s, d¿gÚ bh”e!\n", 
Çme
.
	`c_¡r
());

107 
	`SDL_Qu™
();

108 
	`ex™
(128);

110 
imagefe
 = 
·r£r
.
v®
;

111 
imag
->
	`šü—£CouÁ
(
imagefe
);

112 
¥r™e
 = 
imag
->
	`g‘Surçû
(
imagefe
);

114 ià(
·r£r
.
key
 == "position") {

115 
pos™iÚ
 = 
	`toIÁ
(
·r£r
.
v®
);

117 ià(
·r£r
.
key
 == "frames") {

118 
äames
 = 
	`toIÁ
(
·r£r
.
v®
);

120 ià(
·r£r
.
key
 == "duration") {

121 
du¿tiÚ
 = 
	`toIÁ
(
·r£r
.
v®
);

124 ià(
du¿tiÚ
 < 1) duration=1;

126 ià(
·r£r
.
key
 == "type")

127 
ty³
 = 
·r£r
.
v®
;

128 ià(
·r£r
.
key
 == "render_size") {

129 
»nd”_size
.
x
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

130 
»nd”_size
.
y
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

132 ià(
·r£r
.
key
 == "render_offset") {

133 
»nd”_off£t
.
x
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

134 
»nd”_off£t
.
y
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

136 ià(
·r£r
.
key
 == "active_frame") {

137 
aùive_äames
.
	`ş—r
();

138 
¡ršg
 
nv
 = 
·r£r
.
	`ÃxtV®ue
();

139 ià(
nv
 == "all") {

140 
aùive_äames
.
	`push_back
(-1);

143 
nv
 != "") {

144 
aùive_äames
.
	`push_back
(
	`toIÁ
(
nv
));

145 
nv
 = 
·r£r
.
	`ÃxtV®ue
();

147 
	`sÜt
(
aùive_äames
.
	`begš
(),‡ùive_äames.
	`’d
());

148 
aùive_äames
.
	`”a£
(
	`unique
×ùive_äames.
	`begš
(),‡ùive_äames.
	`’d
()),‡ctive_frames.end());

151 ià(
·r£r
.
key
 == "frame") {

152 ià(
com´es£d_lßdšg
 =ğ
çl£
) {

153 
Ãwªim
 = 
Ãw
 
	`Anim©iÚ
(
_Çme
, 
ty³
, 
¥r™e
);

154 
Ãwªim
->
	`£tup
(
äames
, 
du¿tiÚ
);

155 ià(!
aùive_äames
.
	`em±y
())

156 
Ãwªim
->
	`£tAùiveF¿mes
(
aùive_äames
);

157 
aùive_äames
.
	`ş—r
();

158 
ªim©iÚs
.
	`push_back
(
Ãwªim
);

159 
com´es£d_lßdšg
 = 
Œue
;

162 
SDL_Reù
 
r
;

163 
Pošt
 
off£t
;

164 cÚ¡ 
šdex
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

165 cÚ¡ 
dœeùiÚ
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

166 
r
.
x
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

167 
r
.
y
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

168 
r
.
w
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

169 
r
.
h
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

170 
off£t
.
x
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

171 
off£t
.
y
 = 
	`toIÁ
(
·r£r
.
	`ÃxtV®ue
());

172 
Ãwªim
->
	`addF¿me
(
šdex
, 
dœeùiÚ
, 
r
, 
off£t
);

175 
	`årštf
(
¡d”r
, "ªim©iÚ defš™iÚ (%s): Key % nÙ suµÜ‹d!\n", 
f’ame
.
	`c_¡r
(), 
·r£r
.
key
.c_str());

178 ià(
_Çme
 == "") {

180 
¡¬tšg_ªim©iÚ
 = 
·r£r
.
£ùiÚ
;

182 
_Çme
 = 
·r£r
.
£ùiÚ
;

184 
·r£r
.
	`Ãxt
());

186 ià(!
com´es£d_lßdšg
) {

188 
Anim©iÚ
 *
a
 = 
Ãw
 
	`Anim©iÚ
(
_Çme
, 
ty³
, 
¥r™e
);

189 
a
->
	`£tupUncom´es£d
(
»nd”_size
, 
»nd”_off£t
, 
pos™iÚ
, 
äames
, 
du¿tiÚ
);

190 ià(!
aùive_äames
.
	`em±y
())

191 
a
->
	`£tAùiveF¿mes
(
aùive_äames
);

192 
aùive_äames
.
	`ş—r
();

193 
ªim©iÚs
.
	`push_back
(
a
);

196 ià(
¡¬tšg_ªim©iÚ
 != "") {

197 
Anim©iÚ
 *
a
 = 
	`g‘Anim©iÚ
(
¡¬tšg_ªim©iÚ
);

198 
d–‘e
 
deçuÉAnim©iÚ
;

199 
deçuÉAnim©iÚ
 = 
a
;

201 
	}
}

203 
	gAnim©iÚS‘
::~
	$Anim©iÚS‘
() {

204 ià(
imagefe
 !ğ""è
imag
->
	`deü—£CouÁ
(imagefile);

205 
i
 = 0; i < 
ªim©iÚs
.
	`size
(); ++i)

206 
d–‘e
 
ªim©iÚs
[
i
];

207 
d–‘e
 
deçuÉAnim©iÚ
;

208 
	}
}

	@AnimationSet.h

18 #´agm¨
Úû


19 #iâdeà
__ANIMATION_SET__


20 
	#__ANIMATION_SET__


	)

22 
	~<¡ršg
>

23 
	~<veùÜ
>

25 
şass
 
	gAnim©iÚ
;

33 şas 
	cAnim©iÚS‘
 {

34 
	m´iv©e
:

35 cÚ¡ 
¡d
::
¡ršg
 
Çme
;

36 
	m¡d
::
¡ršg
 
imagefe
;

37 
Anim©iÚ
 *
	mdeçuÉAnim©iÚ
;

38 
boŞ
 
	mlßded
;

40 
lßd
();

42 
	mpublic
:

44 
¡d
::
veùÜ
<
Anim©iÚ
*> 
ªim©iÚs
;

46 
SDL_Surçû
 *
	m¥r™e
;

48 
Anim©iÚS‘
(cÚ¡ 
¡d
::
¡ršg
 &
ªim©iÚÇme
);

49 
Anim©iÚS‘
(cÚ¡ Anim©iÚS‘ &
a
);

50 ~
Anim©iÚS‘
();

57 
Anim©iÚ
 *
g‘Anim©iÚ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

64 
Anim©iÚ
 *
g‘Anim©iÚ
();

66 cÚ¡ 
	m¡d
::
¡ršg
 &
	$g‘Name
(è{  
Çme
; }

67 
	}
};

	@Avatar.cpp

28 
	~"SDL_gfxBl™Func.h
"

29 
	~"Anim©iÚ.h
"

30 
	~"Anim©iÚMªag”.h
"

31 
	~"Anim©iÚS‘.h
"

32 
	~"Av©¬.h
"

33 
	~"FeP¬£r.h
"

34 
	~"Haz¬d.h
"

35 
	~"M­R’d””.h
"

36 
	~"Pow”Mªag”.h
"

37 
	~"Sh¬edResourûs.h
"

38 
	~"UtsP¬sšg.h
"

39 
	~"UtsM©h.h
"

41 
	~<s¡»am
>

43 
usšg
 
Çme¥aû
 
	g¡d
;

45 
	gAv©¬
::
	$Av©¬
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
)

46 : 
	`EÁ™y
(
_m­
)

47 , 
	`lockSwšg
(
çl£
)

48 , 
	`lockCa¡
(
çl£
)

49 , 
	`lockShoÙ
(
çl£
)

50 , 
	`ªimFwd
(
çl£
)

51 , 
	`pow”s
(
_pow”s
)

52 , 
	`h”o_¡©s
(
NULL
)

53 , 
	`ch¬med_¡©s
(
NULL
)

54 , 
	`aù_rg‘
()

55 , 
	`©ckšg
 (
çl£
)

56 , 
	`d¿g_w®kšg
(
çl£
)

57 , 
	`»¥awn
(
çl£
)

58 , 
	$şo£_m’us
(
çl£
)

61 
	`š™
();

64 
¡©s
.
coŞdown
 = 4;

67 
ªim
->
	`šü—£CouÁ
("animations/hero.txt");

68 
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
("animations/hero.txt");

69 
aùiveAnim©iÚ
 = 
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

71 
	`lßdLay”Defš™iÚs
();

72 
	}
}

74 
	gAv©¬
::
	$š™
() {

76 
¡©s
.
h”o_coŞdown
.
	`»size
(
POWER_COUNT
);

81 
¥r™es
 = 0;

82 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

83 
¡©s
.
pos
.
x
 = 
m­
->
¥awn
.x;

84 
¡©s
.
pos
.
y
 = 
m­
->
¥awn
.y;

85 
¡©s
.
dœeùiÚ
 = 
m­
->
¥awn_dœ
;

86 
cu¼’t_pow”
 = 0;

87 
ÃwLev–NÙifiÿtiÚ
 = 
çl£
;

89 
lockSwšg
 = 
çl£
;

90 
lockCa¡
 = 
çl£
;

91 
lockShoÙ
 = 
çl£
;

93 
¡©s
.
h”o
 = 
Œue
;

94 
¡©s
.
humªoid
 = 
Œue
;

95 
¡©s
.
Ëv–
 = 1;

96 
¡©s
.
xp
 = 0;

97 
¡©s
.
physiÿl_ch¬aù”
 = 1;

98 
¡©s
.
m’l_ch¬aù”
 = 1;

99 
¡©s
.
ofãn£_ch¬aù”
 = 1;

100 
¡©s
.
deãn£_ch¬aù”
 = 1;

101 
¡©s
.
physiÿl_add™iÚ®
 = 0;

102 
¡©s
.
m’l_add™iÚ®
 = 0;

103 
¡©s
.
ofãn£_add™iÚ®
 = 0;

104 
¡©s
.
deãn£_add™iÚ®
 = 0;

105 
¡©s
.
¥“d
 = 14;

106 
¡©s
.
d¥“d
 = 10;

107 
¡©s
.
	`»ÿlc
();

109 
log_msg
 = "";

110 
»¥awn
 = 
çl£
;

112 
¡©s
.
coŞdown_ticks
 = 0;

114 
haz
 = 
NULL
;

116 
body
 = -1;

118 
ŒªsfÜm_Œigg”ed
 = 
çl£
;

119 
£tPow”s
 = 
çl£
;

120 
»v”tPow”s
 = 
çl£
;

121 
Ï¡_ŒªsfÜm
 = "";

122 
uÁ¿nsfÜm_pow”
 = 
	`g‘UÁ¿nsfÜmPow”
();

124 
¡©s
.
h”o_coŞdown
 = 
veùÜ
<>(
POWER_COUNT
, 0);

126 
i
=0; i<4; i++) {

127 
sound_¡•s
[
i
] = 0;

130 
sound_m–“
 = 0;

131 
sound_m’l
 = 0;

132 
sound_h™
 = 0;

133 
sound_d›
 = 0;

134 
sound_block
 = 0;

135 
Ëv–_up
 = 0;

136 
	}
}

141 
	gAv©¬
::
	$lßdLay”Defš™iÚs
() {

142 
Ïy”_def
 = 
veùÜ
<vector<> >(8, vector<>());

143 
Ïy”_»ã»nû_Üd”
 = 
veùÜ
<
¡ršg
>();

145 
FeP¬£r
 
šfe
;

146 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/hero_options.txt"))) {

147 
šfe
.
	`Ãxt
()) {

148 
šfe
.
v®
 = infile.val + ',';

150 ià(
šfe
.
key
 == "layer") {

151 
dœ
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

152 ià(
dœ
>7) {

153 
	`årštf
(
¡d”r
, "direction must be in„ange [0,7]\n");

154 
	`SDL_Qu™
();

155 
	`ex™
(1);

157 
¡ršg
 
Ïy”
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

158 
Ïy”
 != "") {

160 
»f_pos
;

161 
»f_pos
 = 0;„ef_po < 
Ïy”_»ã»nû_Üd”
.
	`size
(); ++ref_pos)

162 ià(
Ïy”
 =ğ
Ïy”_»ã»nû_Üd”
[
»f_pos
])

164 ià(
»f_pos
 =ğ
Ïy”_»ã»nû_Üd”
.
	`size
())

165 
Ïy”_»ã»nû_Üd”
.
	`push_back
(
Ïy”
);

166 
Ïy”_def
[
dœ
].
	`push_back
(
»f_pos
);

168 
Ïy”
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

172 
šfe
.
	`şo£
();

173 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/hero_options.txt!\n");

179 
	}
}

181 
	gAv©¬
::
lßdG¿phics
(
¡d
::
veùÜ
<
Lay”_gfx
> 
_img_gfx
) {

183 
i
=0; 
	gi
<
	gªim£ts
.
size
(); i++) {

184 ià(
	gªim£ts
[
i
])

185 
	gªim
->
deü—£CouÁ
(
ªim£ts
[
i
]->
g‘Name
());

186 
d–‘e
 
	gªims
[
i
];

188 
	gªim£ts
.
ş—r
();

189 
	gªims
.
ş—r
();

191 
	gi
=0; i<
	g_img_gfx
.
size
(); i++) {

192 ià(
	g_img_gfx
[
i
].
	ggfx
 != "") {

193 
¡ršg
 
Çme
 = "ªim©iÚs/av©¬/"+
¡©s
.
ba£
+"/"+
_img_gfx
[
i
].
gfx
+".txt";

194 
	gªim
->
šü—£CouÁ
(
Çme
);

195 
	gªim£ts
.
push_back
(
ªim
->
g‘Anim©iÚS‘
(
Çme
));

196 
	gªims
.
push_back
(
ªim£ts
.
back
()->
g‘Anim©iÚ
(
aùiveAnim©iÚ
->
g‘Name
()));

197 
	gªims
.
back
()->
syncTo
(
aùiveAnim©iÚ
);

199 
	gªim£ts
.
push_back
(
NULL
);

200 
	gªims
.
push_back
(
NULL
);

203 
	gªim
->
ş—nUp
();

206 
	gAv©¬
::
	$lßdSounds
(cÚ¡ 
¡ršg
& 
ty³_id
) {

208 
¢d
->
	`uÆßd
(
sound_m–“
);

209 
¢d
->
	`uÆßd
(
sound_m’l
);

210 
¢d
->
	`uÆßd
(
sound_h™
);

211 
¢d
->
	`uÆßd
(
sound_d›
);

213 ià(
ty³_id
 != "none") {

214 
sound_m–“
 = 
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_phys.ogg", "Avatar melee‡ttack");

215 
sound_m’l
 = 
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_ment.ogg", "Avatar mental‡ttack");

216 
sound_h™
 = 
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_hit.ogg", "Avatar was hit");

217 
sound_d›
 = 
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_die.ogg", "Avatar death");

219 
sound_m–“
 = 
¢d
->
	`lßd
("soundfx/melee_attack.ogg", "Avatar melee‡ttack");

220 
sound_m’l
 = 0;

221 
sound_h™
 = 
¢d
->
	`lßd
("soundfx/" + 
¡©s
.
ba£
 + "_hit.ogg", "Avatar was hit");

222 
sound_d›
 = 
¢d
->
	`lßd
("soundfx/" + 
¡©s
.
ba£
 + "_die.ogg", "Avatar death");

225 
sound_block
 = 
¢d
->
	`lßd
("soundfx/powers/block.ogg", "Avatar blocking");

226 
Ëv–_up
 = 
¢d
->
	`lßd
("soundfx/level_up.ogg", "Avatar†eveling up");

227 
	}
}

232 
	gAv©¬
::
	$lßdS‹pFX
(cÚ¡ 
¡ršg
& 
¡•Çme
) {

234 
¡ršg
 
f’ame
 = 
¡©s
.
sfx_¡•
;

235 ià(
¡•Çme
 != "") {

236 
f’ame
 = 
¡•Çme
;

240 
i
=0; i<4; i++) {

241 
¢d
->
	`uÆßd
(
sound_¡•s
[
i
]);

246 ià(
¡•Çme
 == "NULL") ;

249 
sound_¡•s
[0] = 
¢d
->
	`lßd
("soundfx/¡•s/¡•_" + 
f’ame
 + "1.ogg", "Avatar†oading foot steps");

250 
sound_¡•s
[1] = 
¢d
->
	`lßd
("soundfx/¡•s/¡•_" + 
f’ame
 + "2.ogg", "Avatar†oading foot steps");

251 
sound_¡•s
[2] = 
¢d
->
	`lßd
("soundfx/¡•s/¡•_" + 
f’ame
 + "3.ogg", "Avatar†oading foot steps");

252 
sound_¡•s
[3] = 
¢d
->
	`lßd
("soundfx/¡•s/¡•_" + 
f’ame
 + "4.ogg", "Avatar†oading foot steps");

253 
	}
}

256 
boŞ
 
	gAv©¬
::
	$´essšg_move
() {

257 ià(
š±
->
mou£_emuÏtiÚ
è 
çl£
;

258 ià(
MOUSE_MOVE
) {

259  
š±
->
´essšg
[
MAIN1
];

261  
š±
->
´essšg
[
UP
] || iÅt->´essšg[
DOWN
] || iÅt->´essšg[
LEFT
] || iÅt->´essšg[
RIGHT
];

263 
	}
}

265 
	gAv©¬
::
	$£t_dœeùiÚ
() {

267 ià(
š±
->
mou£_emuÏtiÚ
) ;

268 ià(
MOUSE_MOVE
) {

269 
Pošt
 
rg‘
 = 
	`sü“n_to_m­
(
š±
->
mou£
.
x
, iÅt->mou£.
y
, 
¡©s
.
pos
.x, stats.pos.y);

271 ià(!
m­
->
cŞlid”
.
	`lše_of_movem’t
(
¡©s
.
pos
.
x
, sts.pos.
y
, 
rg‘
.x,¬g‘.y, sts.
movem’t_ty³
)) {

272 
veùÜ
<
Pošt
> 
·th
;

275 iàĞ
m­
->
cŞlid”
.
	`compu‹_·th
(
¡©s
.
pos
, 
rg‘
, 
·th
, 1000, sts.
movem’t_ty³
)) {

276 
rg‘
 = 
·th
.
	`back
();

279 
¡©s
.
dœeùiÚ
 = 
	`çû
(
rg‘
.
x
,¬g‘.
y
);

281 ià(
š±
->
´essšg
[
UP
] && iÅt->´essšg[
LEFT
]è
¡©s
.
dœeùiÚ
 = 1;

282 ià(
š±
->
´essšg
[
UP
] && iÅt->´essšg[
RIGHT
]è
¡©s
.
dœeùiÚ
 = 3;

283 ià(
š±
->
´essšg
[
DOWN
] && iÅt->´essšg[
RIGHT
]è
¡©s
.
dœeùiÚ
 = 5;

284 ià(
š±
->
´essšg
[
DOWN
] && iÅt->´essšg[
LEFT
]è
¡©s
.
dœeùiÚ
 = 7;

285 ià(
š±
->
´essšg
[
LEFT
]è
¡©s
.
dœeùiÚ
 = 0;

286 ià(
š±
->
´essšg
[
UP
]è
¡©s
.
dœeùiÚ
 = 2;

287 ià(
š±
->
´essšg
[
RIGHT
]è
¡©s
.
dœeùiÚ
 = 4;

288 ià(
š±
->
´essšg
[
DOWN
]è
¡©s
.
dœeùiÚ
 = 6;

290 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ORTHOGONAL
 &&

291 (
š±
->
´essšg
[
UP
] || iÅt->´essšg[
DOWN
] ||

292 
š±
->
´essšg
[
LEFT
] || iÅt->´essšg[
RIGHT
]))

293 
¡©s
.
dœeùiÚ
 = stats.direction == 7 ? 0 : stats.direction + 1;

295 
	}
}

297 
	gAv©¬
::
	$hªdËPow”
(
aùiÚb¬_pow”
) {

298 ià(
aùiÚb¬_pow”
 !ğ0 && 
¡©s
.
coŞdown_ticks
 == 0) {

299 cÚ¡ 
Pow”
 &
pow”
 = 
pow”s
->
	`g‘Pow”
(
aùiÚb¬_pow”
);

300 
Pošt
 
rg‘
;

301 ià(
MOUSE_AIM
) {

302 ià(
pow”
.
aim_assi¡
)

303 
rg‘
 = 
	`sü“n_to_m­
(
š±
->
mou£
.
x
, iÅt->mou£.
y
 + 
AIM_ASSIST
, 
¡©s
.
pos
.x, stats.pos.y);

305 
rg‘
 = 
	`sü“n_to_m­
(
š±
->
mou£
.
x
, iÅt->mou£.
y
, 
¡©s
.
pos
.x, stats.pos.y);

307 
FPošt
 
á¬g‘
 = 
	`ÿlcVeùÜ
(
¡©s
.
pos
, sts.
dœeùiÚ
, sts.
m–“_¿nge
);

308 
rg‘
.
x
 = 
¡©ic_ÿ¡
<>(
á¬g‘
.x);

309 
rg‘
.
y
 = 
¡©ic_ÿ¡
<>(
á¬g‘
.y);

313 ià(!
¡©s
.
	`ÿnU£Pow”
(
pow”
, 
aùiÚb¬_pow”
))

315 ià(
pow”
.
»quœes_los
 && !
m­
->
cŞlid”
.
	`lše_of_sight
(
¡©s
.
pos
.
x
, sts.pos.
y
, 
rg‘
.x,arget.y))

317 ià(
pow”
.
»quœes_em±y_rg‘
 && !
m­
->
cŞlid”
.
	`is_em±y
(
rg‘
.
x
,¬g‘.
y
))

319 ià(
¡©s
.
h”o_coŞdown
[
aùiÚb¬_pow”
] > 0)

321 ià(!
pow”s
->
	`hasV®idT¬g‘
(
aùiÚb¬_pow”
,&
¡©s
,
rg‘
))

324 
¡©s
.
h”o_coŞdown
[
aùiÚb¬_pow”
] = 
pow”
.
coŞdown
;

325 
cu¼’t_pow”
 = 
aùiÚb¬_pow”
;

326 
aù_rg‘
 = 
rg‘
;

329 ià(
pow”
.
çû
) {

330 
¡©s
.
dœeùiÚ
 = 
	`çû
(
rg‘
.
x
,¬g‘.
y
);

333 
pow”
.
Ãw_¡©e
) {

334 
POWSTATE_SWING
:

335 
¡©s
.
cur_¡©e
 = 
AVATAR_MELEE
;

338 
POWSTATE_SHOOT
:

339 
¡©s
.
cur_¡©e
 = 
AVATAR_SHOOT
;

342 
POWSTATE_CAST
:

343 
¡©s
.
cur_¡©e
 = 
AVATAR_CAST
;

346 
POWSTATE_BLOCK
:

347 
¡©s
.
cur_¡©e
 = 
AVATAR_BLOCK
;

348 
¡©s
.
efãùs
.
Œigg”ed_block
 = 
Œue
;

351 
POWSTATE_INSTANT
:

352 
pow”s
->
	`aùiv©e
(
cu¼’t_pow”
, &
¡©s
, 
rg‘
);

356 
	}
}

368 
	gAv©¬
::
	$logic
(
aùiÚb¬_pow”
, 
boŞ
 
»¡riùPow”U£
) {

371 
m­
->
cŞlid”
.
	`unblock
(
¡©s
.
pos
.
x
, sts.pos.
y
);

374 ià((
¡©s
.
hp
 > 0 || sts.
efãùs
.
Œigg”ed_d—th
è&& !
»¥awn
 && !
ŒªsfÜm_Œigg”ed
è
pow”s
->
	`aùiv©ePassives
(&stats);

375 ià(
ŒªsfÜm_Œigg”ed
èŒªsfÜm_Œigg”ed = 
çl£
;

377 
¡•fx
;

378 
¡©s
.
	`logic
();

379 ià(
¡©s
.
efãùs
.
fÜûd_move
) {

380 
	`move
();

384 
m­
->
ÿm
.
x
 = 
¡©s
.
pos
.x;

385 
m­
->
ÿm
.
y
 = 
¡©s
.
pos
.y;

386 
m­
->
h”o_te
.
x
 = 
¡©s
.
pos
.x / 32;

387 
m­
->
h”o_te
.
y
 = 
¡©s
.
pos
.y / 32;

389 
m­
->
cŞlid”
.
	`block
(
¡©s
.
pos
.
x
, sts.pos.
y
);

392 ià(
¡©s
.
efãùs
.
¡un
) {

394 
m­
->
cŞlid”
.
	`block
(
¡©s
.
pos
.
x
, sts.pos.
y
);

399 
boŞ
 
®lowed_to_move
;

400 
boŞ
 
®lowed_to_u£_pow”
;

403 ià(
¡©s
.
hp
 <ğ0 && sts.
efãùs
.
»vive
) {

404 
¡©s
.
hp
 = sts.
maxhp
;

405 
¡©s
.
®ive
 = 
Œue
;

406 
¡©s
.
cÜp£
 = 
çl£
;

407 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

411 ià(
¡©s
.
xp
 >ğ¡©s.
xp_bË
[¡©s.
Ëv–
] && sts.Ëv– < 
MAX_CHARACTER_LEVEL
) {

412 
¡©s
.
Ëv–_up
 = 
Œue
;

413 
¡©s
.
Ëv–
++;

414 
¡ršg¡»am
 
ss
;

415 
ss
 << 
msg
->
	`g‘
("CÚg¿tuÏtiÚs, you hav»ached†ev– %d!", 
¡©s
.
Ëv–
);

416 ià(
¡©s
.
Ëv–
 < sts.
max_¥’dabË_¡©_pošts
) {

417 
ss
 << " " << 
msg
->
	`g‘
("You may increase one‡ttributehroughhe Character Menu.");

418 
ÃwLev–NÙifiÿtiÚ
 = 
Œue
;

420 
log_msg
 = 
ss
.
	`¡r
();

421 
¡©s
.
	`»ÿlc
();

422 
¢d
->
	`¶ay
(
Ëv–_up
);

425 ià(
¡©s
.
cur_¡©e
 =ğ
AVATAR_DEAD
) {

426 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

431 ià(
¡©s
.
efãùs
.
damage
 > 0 && sts.
hp
 > 0) {

432 
comb
->
	`addMes§ge
(
¡©s
.
efãùs
.
damage
, sts.
pos
, 
COMBAT_MESSAGE_TAKEDMG
);

436 ià(
¡©s
.
hp
 =ğ0 && !(¡©s.
cur_¡©e
 =ğ
AVATAR_DEAD
)) {

437 
¡©s
.
efãùs
.
Œigg”ed_d—th
 = 
Œue
;

438 
¡©s
.
cur_¡©e
 = 
AVATAR_DEAD
;

442 ià(!
š±
->
´essšg
[
MAIN1
]) {

443 
d¿g_w®kšg
 = 
çl£
;

444 
©ckšg
 = 
çl£
;

446 if(!
š±
->
lock
[
MAIN1
]) {

447 
©ckšg
 = 
Œue
;

452 
aùiveAnim©iÚ
->
	`advªûF¿me
();

453 
i
=0; i < 
ªims
.
	`size
(); i++)

454 ià(
ªims
[
i
] !ğ
NULL
)

455 
ªims
[
i
]->
	`advªûF¿me
();

458 ià(
¡©s
.
ŒªsfÜm_ty³
 !ğ"" && sts.ŒªsfÜm_ty³ !ğ"uÁ¿nsfÜm" && sts.
ŒªsfÜmed
 =ğ
çl£
è
	`ŒªsfÜm
();

459 ià(
¡©s
.
ŒªsfÜm_ty³
 !ğ"" && sts.
ŒªsfÜm_du¿tiÚ
 =ğ0è
	`uÁ¿nsfÜm
();

461 
¡©s
.
cur_¡©e
) {

462 
AVATAR_STANCE
:

464 
	`£tAnim©iÚ
("stance");

467 ià(
MOUSE_MOVE
) {

468 
®lowed_to_move
 = 
»¡riùPow”U£
 && (!
š±
->
lock
[
MAIN1
] || 
d¿g_w®kšg
è&& !
lockSwšg
 && !
lockShoÙ
 && !
lockCa¡
;

469 
®lowed_to_u£_pow”
 = !
®lowed_to_move
;

472 
®lowed_to_move
 = 
Œue
;

473 
®lowed_to_u£_pow”
 = 
Œue
;

477 ià(
®lowed_to_move
)

478 
	`£t_dœeùiÚ
();

480 ià(
	`´essšg_move
(è&& 
®lowed_to_move
) {

481 ià(
MOUSE_MOVE
 && 
š±
->
´essšg
[
MAIN1
]) {

482 
š±
->
lock
[
MAIN1
] = 
Œue
;

483 
d¿g_w®kšg
 = 
Œue
;

486 ià(
	`move
()) {

487 
¡©s
.
cur_¡©e
 = 
AVATAR_RUN
;

492 ià(
MOUSE_MOVE
 && !
š±
->
´essšg
[
MAIN1
]) {

493 
š±
->
lock
[
MAIN1
] = 
çl£
;

494 
lockSwšg
 = 
çl£
;

495 
lockShoÙ
 = 
çl£
;

496 
lockCa¡
 = 
çl£
;

500 ià(
®lowed_to_u£_pow”
)

501 
	`hªdËPow”
(
aùiÚb¬_pow”
);

504 
AVATAR_RUN
:

506 
	`£tAnim©iÚ
("run");

508 
¡•fx
 = 
	`¿nd
() % 4;

510 ià(
aùiveAnim©iÚ
->
	`isFœ¡F¿me
(è||‡ùiveAnim©iÚ->
	`isAùiveF¿me
())

511 
¢d
->
	`¶ay
(
sound_¡•s
[
¡•fx
]);

514 ià(
MOUSE_MOVE
) {

515 
®lowed_to_u£_pow”
 = !(
»¡riùPow”U£
 && !
š±
->
lock
[
MAIN1
]);

518 
®lowed_to_u£_pow”
 = 
Œue
;

522 
	`£t_dœeùiÚ
();

525 ià(!
	`´essšg_move
()) {

526 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

529 ià(!
	`move
()) {

530 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

535 ià(
®lowed_to_u£_pow”
)

536 
	`hªdËPow”
(
aùiÚb¬_pow”
);

539 
AVATAR_MELEE
:

541 
	`£tAnim©iÚ
("melee");

543 ià(
MOUSE_MOVE
è
lockSwšg
 = 
Œue
;

545 ià(
aùiveAnim©iÚ
->
	`isFœ¡F¿me
())

546 
¢d
->
	`¶ay
(
sound_m–“
);

549 ià(
aùiveAnim©iÚ
->
	`isAùiveF¿me
()) {

550 
pow”s
->
	`aùiv©e
(
cu¼’t_pow”
, &
¡©s
, 
aù_rg‘
);

553 ià(
aùiveAnim©iÚ
->
	`g‘TimesPÏyed
() >= 1) {

554 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

555 
¡©s
.
coŞdown_ticks
 +ğ¡©s.
coŞdown
;

559 
AVATAR_CAST
:

561 
	`£tAnim©iÚ
("ment");

563 ià(
MOUSE_MOVE
è
lockCa¡
 = 
Œue
;

565 ià(
aùiveAnim©iÚ
->
	`isFœ¡F¿me
())

566 
¢d
->
	`¶ay
(
sound_m’l
);

569 ià(
aùiveAnim©iÚ
->
	`isAùiveF¿me
()) {

570 
pow”s
->
	`aùiv©e
(
cu¼’t_pow”
, &
¡©s
, 
aù_rg‘
);

573 ià(
aùiveAnim©iÚ
->
	`g‘TimesPÏyed
() >= 1) {

574 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

575 
¡©s
.
coŞdown_ticks
 +ğ¡©s.
coŞdown
;

580 
AVATAR_SHOOT
:

582 
	`£tAnim©iÚ
("ranged");

584 ià(
MOUSE_MOVE
è
lockShoÙ
 = 
Œue
;

587 ià(
aùiveAnim©iÚ
->
	`isAùiveF¿me
()) {

588 
pow”s
->
	`aùiv©e
(
cu¼’t_pow”
, &
¡©s
, 
aù_rg‘
);

591 ià(
aùiveAnim©iÚ
->
	`g‘TimesPÏyed
() >= 1) {

592 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

593 
¡©s
.
coŞdown_ticks
 +ğ¡©s.
coŞdown
;

597 
AVATAR_BLOCK
:

599 
	`£tAnim©iÚ
("block");

601 ià(
pow”s
->pow”s[
aùiÚb¬_pow”
].
Ãw_¡©e
 !ğ
POWSTATE_BLOCK
) {

602 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

603 
¡©s
.
efãùs
.
Œigg”ed_block
 = 
çl£
;

604 
¡©s
.
efãùs
.
	`ş—rTrigg”Efãùs
(
TRIGGER_BLOCK
);

608 
AVATAR_HIT
:

610 
	`£tAnim©iÚ
("hit");

612 ià(
aùiveAnim©iÚ
->
	`isFœ¡F¿me
()) {

613 
¡©s
.
efãùs
.
Œigg”ed_h™
 = 
Œue
;

616 ià(
aùiveAnim©iÚ
->
	`g‘TimesPÏyed
() >= 1) {

617 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

622 
AVATAR_DEAD
:

623 ià(
¡©s
.
efãùs
.
Œigg”ed_d—th
) ;

625 ià(
¡©s
.
ŒªsfÜmed
) {

626 
¡©s
.
ŒªsfÜm_du¿tiÚ
 = 0;

627 
	`uÁ¿nsfÜm
();

630 
	`£tAnim©iÚ
("die");

632 ià(
aùiveAnim©iÚ
->
	`isFœ¡F¿me
(è&&‡ùiveAnim©iÚ->
	`g‘TimesPÏyed
() < 1) {

633 
¡©s
.
efãùs
.
	`ş—rEfãùs
();

636 
¡©s
.
d—th_³ÇÉy
 = 
Œue
;

639 
şo£_m’us
 = 
Œue
;

641 
¢d
->
	`¶ay
(
sound_d›
);

643 ià(
¡©s
.
³rmad—th
) {

644 
log_msg
 = 
msg
->
	`g‘
("You‡re defeated. Game over! Press Enteroƒxito Title.");

647 
log_msg
 = 
msg
->
	`g‘
("You‡» deã©ed. You†o£ h®àyou¸%s. P»s EÁ”ØcÚtšue.", 
CURRENCY
);

651 ià(
aùiveAnim©iÚ
->
	`g‘TimesPÏyed
() >= 1) {

652 
¡©s
.
cÜp£
 = 
Œue
;

656 ià(
š±
->
´essšg
[
ACCEPT
]) {

657 
š±
->
lock
[
ACCEPT
] = 
Œue
;

658 
m­
->
‹ËpÜtiÚ
 = 
Œue
;

659 
m­
->
‹ËpÜt_m­Çme
 = m­->
»¥awn_m­
;

660 ià(
¡©s
.
³rmad—th
) {

662 
m­
->
‹ËpÜt_de¡š©iÚ
.
x
 = 
¡©s
.
pos
.x;

663 
m­
->
‹ËpÜt_de¡š©iÚ
.
y
 = 
¡©s
.
pos
.y;

666 
»¥awn
 = 
Œue
;

669 
m­
->
‹ËpÜt_de¡š©iÚ
.
x
 = m­->
»¥awn_pošt
.x;

670 
m­
->
‹ËpÜt_de¡š©iÚ
.
y
 = m­->
»¥awn_pošt
.y;

682 
m­
->
ÿm
.
x
 = 
¡©s
.
pos
.x;

683 
m­
->
ÿm
.
y
 = 
¡©s
.
pos
.y;

684 
m­
->
h”o_te
.
x
 = 
¡©s
.
pos
.x / 32;

685 
m­
->
h”o_te
.
y
 = 
¡©s
.
pos
.y / 32;

688 
m­
->
	`checkEv’ts
(
¡©s
.
pos
);

691 
i
 = 0; i < 
POWER_COUNT
; i++){

692 
¡©s
.
h”o_coŞdown
[
i
]--;

693 ià(
¡©s
.
h”o_coŞdown
[
i
] < 0) stats.hero_cooldown[i] = 0;

697 
m­
->
cŞlid”
.
	`block
(
¡©s
.
pos
.
x
, sts.pos.
y
);

698 
	}
}

704 
boŞ
 
	gAv©¬
::
	$keH™
(cÚ¡ 
Haz¬d
 &
h
) {

706 ià(
¡©s
.
cur_¡©e
 !ğ
AVATAR_DEAD
) {

707 
Comb©Text
 *
comb©_‹xt
 = 
comb
;

709 
avoidªû
 = 
¡©s
.avoidance;

710 ià(
¡©s
.
efãùs
.
Œigg”ed_block
è
avoidªû
 *= 2;

711 
	`şampCe
(
avoidªû
, 
MAX_AVOIDANCE
);

712 ià(
	`³rûÁChªû
(
avoidªû
 - 
h
.
accu¿cy
 - 25)) {

713 
comb©_‹xt
->
	`addMes§ge
(
msg
->
	`g‘
("miss"), 
¡©s
.
pos
, 
COMBAT_MESSAGE_MISS
);

714  
çl£
;

717 
dmg
 = 
	`¿ndB‘w“n
(
h
.
dmg_mš
, h.
dmg_max
);

721 ià(
h
.
Œa™_–em’l
 >ğ0 && (h.Œa™_–em’lè< 
¡©s
.
vuÊ”abË
.
	`size
()) {

722 
i
 = 
h
.
Œa™_–em’l
;

723 
vuÊ”abË
 = 
¡©s
.vuÊ”abË[
i
];

724 ià(
¡©s
.
vuÊ”abË
[
i
] > 
MAX_RESIST
 && stats.vulnerable[i] < 100)

725 
vuÊ”abË
 = 
MAX_RESIST
;

726 
dmg
 = (dmg * 
vuÊ”abË
) / 100;

729 ià(!
h
.
Œa™_¬mÜ_³ÃŒ©iÚ
) {

731 
absÜ±iÚ
 = 
	`¿ndB‘w“n
(
¡©s
.
absÜb_mš
, sts.
absÜb_max
);

733 ià(
¡©s
.
efãùs
.
Œigg”ed_block
) {

734 
absÜ±iÚ
 +ğabsÜ±iÚ + 
¡©s
.
absÜb_max
;

737 ià(
absÜ±iÚ
 > 0 && 
dmg
 != 0) {

738 ià((
absÜ±iÚ
*100)/
dmg
 > 
MAX_BLOCK
)

739 
absÜ±iÚ
 = (
dmg
 * 
MAX_BLOCK
) /100;

740 ià((
absÜ±iÚ
*100)/
dmg
 > 
MAX_ABSORB
 && !
¡©s
.
efãùs
.
Œigg”ed_block
)

741 
absÜ±iÚ
 = (
dmg
 * 
MAX_ABSORB
) /100;

746 ià(
absÜ±iÚ
 == 0)‡bsorption = 1;

749 
dmg
 = dmg - 
absÜ±iÚ
;

750 ià(
dmg
 <= 0) {

751 
dmg
 = 0;

752 ià(
h
.
Œa™_–em’l
 < 0) {

753 ià(
¡©s
.
efãùs
.
Œigg”ed_block
 && 
MAX_BLOCK
 < 100è
dmg
 = 1;

754 ià(!
¡©s
.
efãùs
.
Œigg”ed_block
 && 
MAX_ABSORB
 < 100è
dmg
 = 1;

756 ià(
MAX_RESIST
 < 100è
dmg
 = 1;

758 
¢d
->
	`¶ay
(
sound_block
);

759 
aùiveAnim©iÚ
->
	`»£t
();

760 
i
=0; i < 
ªim£ts
.
	`size
(); i++)

761 ià(
ªims
[
i
])

762 
ªims
[
i
]->
	`»£t
();

767 
´ev_hp
 = 
¡©s
.
hp
;

768 
comb©_‹xt
->
	`addMes§ge
(
dmg
, 
¡©s
.
pos
, 
COMBAT_MESSAGE_TAKEDMG
);

769 
¡©s
.
	`keDamage
(
dmg
);

772 ià(
¡©s
.
hp
 > 0 && 
dmg
 > 0) {

774 ià(
h
.
mod_pow”
 > 0è
pow”s
->
	`efãù
(&
¡©s
, h.mod_power);

775 
pow”s
->
	`efãù
(&
¡©s
, 
h
.
pow”_šdex
);

777 ià(!
¡©s
.
efãùs
.
immun™y
) {

778 ià(
¡©s
.
efãùs
.
fÜûd_move
) {

779 
th‘a
 = 
pow”s
->
	`ÿlcTh‘a
(
h
.
¤c_¡©s
->
pos
.
x
, h.¤c_¡©s->pos.
y
, 
¡©s
.pos.x, stats.pos.y);

780 
¡©s
.
fÜûd_¥“d
.
x
 = 
¡©ic_ÿ¡
<>(
	`û
(¡©s.
efãùs
.fÜûd_¥“d * 
	`cos
(
th‘a
)));

781 
¡©s
.
fÜûd_¥“d
.
y
 = 
¡©ic_ÿ¡
<>(
	`û
(¡©s.
efãùs
.fÜûd_¥“d * 
	`sš
(
th‘a
)));

783 ià(
h
.
hp_¡—l
 != 0) {

784 
¡—l_amt
 = (
dmg
 * 
h
.
hp_¡—l
) / 100;

785 ià(
¡—l_amt
 =ğ0 && 
dmg
 > 0) steal_amt = 1;

786 
comb©_‹xt
->
	`addMes§ge
(
msg
->
	`g‘
("+%d HP",
¡—l_amt
), 
h
.
¤c_¡©s
->
pos
, 
COMBAT_MESSAGE_BUFF
);

787 
h
.
¤c_¡©s
->
hp
 = 
	`mš
(h.¤c_¡©s->h°+ 
¡—l_amt
, h.¤c_¡©s->
maxhp
);

794 ià(
h
.
po¡_pow”
 > 0 && 
dmg
 > 0) {

795 
pow”s
->
	`aùiv©e
(
h
.
po¡_pow”
, h.
¤c_¡©s
, 
¡©s
.
pos
);

798 ià(
¡©s
.
hp
 <= 0) {

799 
¡©s
.
efãùs
.
Œigg”ed_d—th
 = 
Œue
;

800 
¡©s
.
cur_¡©e
 = 
AVATAR_DEAD
;

802 ià(
´ev_hp
 > 
¡©s
.
hp
) {

803 
¢d
->
	`¶ay
(
sound_h™
);

804 ià(!
	`³rûÁChªû
(
¡©s
.
poi£
è&& sts.
coŞdown_h™_ticks
 == 0) {

805 
¡©s
.
cur_¡©e
 = 
AVATAR_HIT
;

806 
¡©s
.
coŞdown_h™_ticks
 = sts.
coŞdown_h™
;

810  
Œue
;

812  
çl£
;

813 
	}
}

816 
	gAv©¬
::
	$ŒªsfÜm
() {

818 
š±
->
	`uÆockAùiÚB¬
();

820 
ŒªsfÜm_Œigg”ed
 = 
Œue
;

821 
¡©s
.
ŒªsfÜmed
 = 
Œue
;

822 
£tPow”s
 = 
Œue
;

824 
d–‘e
 
ch¬med_¡©s
;

825 
ch¬med_¡©s
 = 
Ãw
 
	`StBlock
();

826 
ch¬med_¡©s
->
	`lßd
("’em›s/" + 
¡©s
.
ŒªsfÜm_ty³
 + ".txt");

829 
d–‘e
 
h”o_¡©s
;

831 
h”o_¡©s
 = 
Ãw
 
	`StBlock
();

832 *
h”o_¡©s
 = 
¡©s
;

835 
¡©s
.
¥“d
 = 
ch¬med_¡©s
->speed;

836 
¡©s
.
d¥“d
 = 
ch¬med_¡©s
->dspeed;

837 
¡©s
.
æyšg
 = 
ch¬med_¡©s
->flying;

838 
¡©s
.
humªoid
 = 
ch¬med_¡©s
->humanoid;

839 
¡©s
.
ªim©iÚs
 = 
ch¬med_¡©s
->animations;

840 
¡©s
.
pow”s_li¡
 = 
ch¬med_¡©s
->powers_list;

841 
¡©s
.
pow”s_·ssive
 = 
ch¬med_¡©s
->powers_passive;

842 
¡©s
.
efãùs
.
	`ş—rEfãùs
();

844 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/’em›s/"+
ch¬med_¡©s
->
ªim©iÚs
 + ".txt";

845 
ªim
->
	`deü—£CouÁ
("animations/hero.txt");

846 
ªim
->
	`šü—£CouÁ
(
ªim©iÚÇme
);

847 
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
(
ªim©iÚÇme
);

848 
d–‘e
 
aùiveAnim©iÚ
;

849 
aùiveAnim©iÚ
 = 
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

850 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

853 
	`şampFloÜ
(
¡©s
.
dmg_m–“_mš
, 
ch¬med_¡©s
->dmg_melee_min);

854 
	`şampFloÜ
(
¡©s
.
dmg_m–“_max
, 
ch¬med_¡©s
->dmg_melee_max);

856 
	`şampFloÜ
(
¡©s
.
dmg_m’t_mš
, 
ch¬med_¡©s
->dmg_ment_min);

857 
	`şampFloÜ
(
¡©s
.
dmg_m’t_max
, 
ch¬med_¡©s
->dmg_ment_max);

859 
	`şampFloÜ
(
¡©s
.
dmg_¿nged_mš
, 
ch¬med_¡©s
->dmg_ranged_min);

860 
	`şampFloÜ
(
¡©s
.
dmg_¿nged_max
, 
ch¬med_¡©s
->dmg_ranged_max);

863 
	`şampFloÜ
(
¡©s
.
absÜb_mš
, 
ch¬med_¡©s
->absorb_min);

864 
	`şampFloÜ
(
¡©s
.
absÜb_max
, 
ch¬med_¡©s
->absorb_max);

866 
	`şampFloÜ
(
¡©s
.
avoidªû
, 
ch¬med_¡©s
->avoidance);

868 
	`şampFloÜ
(
¡©s
.
accu¿cy
, 
ch¬med_¡©s
->accuracy);

870 
	`şampFloÜ
(
¡©s
.
ü™
, 
ch¬med_¡©s
->crit);

873 
i
=0; i<
¡©s
.
vuÊ”abË
.
	`size
(); i++)

874 
	`şampCe
(
¡©s
.
vuÊ”abË
[
i
], 
ch¬med_¡©s
->vulnerable[i]);

876 
	`lßdSounds
(
ch¬med_¡©s
->
sfx_´efix
);

877 
	`lßdS‹pFX
("NULL");

878 
	}
}

880 
	gAv©¬
::
	$uÁ¿nsfÜm
() {

882 
š±
->
	`uÆockAùiÚB¬
();

885 ià(!
m­
->
cŞlid”
.
	`is_v®id_pos™iÚ
(
¡©s
.
pos
.
x
,¡©s.pos.
y
,
MOVEMENT_NORMAL
)) ;

887 
¡©s
.
ŒªsfÜmed
 = 
çl£
;

888 
ŒªsfÜm_Œigg”ed
 = 
Œue
;

889 
¡©s
.
ŒªsfÜm_ty³
 = "";

890 
»v”tPow”s
 = 
Œue
;

891 
¡©s
.
efãùs
.
	`ş—rEfãùs
();

894 
¡©s
.
¥“d
 = 
h”o_¡©s
->speed;

895 
¡©s
.
d¥“d
 = 
h”o_¡©s
->dspeed;

896 
¡©s
.
æyšg
 = 
h”o_¡©s
->flying;

897 
¡©s
.
humªoid
 = 
h”o_¡©s
->humanoid;

898 
¡©s
.
ªim©iÚs
 = 
h”o_¡©s
->animations;

899 
¡©s
.
efãùs
 = 
h”o_¡©s
->effects;

900 
¡©s
.
pow”s_li¡
 = 
h”o_¡©s
->powers_list;

901 
¡©s
.
pow”s_·ssive
 = 
h”o_¡©s
->powers_passive;

903 
ªim
->
	`šü—£CouÁ
("animations/hero.txt");

904 
ªim
->
	`deü—£CouÁ
("ªim©iÚs/’em›s/"+
ch¬med_¡©s
->
ªim©iÚs
 + ".txt");

905 
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
("animations/hero.txt");

906 
d–‘e
 
aùiveAnim©iÚ
;

907 
aùiveAnim©iÚ
 = 
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

908 
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

912 
	`£tAnim©iÚ
("run");

914 
¡©s
.
dmg_m–“_mš
 = 
h”o_¡©s
->dmg_melee_min;

915 
¡©s
.
dmg_m–“_max
 = 
h”o_¡©s
->dmg_melee_max;

916 
¡©s
.
dmg_m’t_mš
 = 
h”o_¡©s
->dmg_ment_min;

917 
¡©s
.
dmg_m’t_max
 = 
h”o_¡©s
->dmg_ment_max;

918 
¡©s
.
dmg_¿nged_mš
 = 
h”o_¡©s
->dmg_ranged_min;

919 
¡©s
.
dmg_¿nged_max
 = 
h”o_¡©s
->dmg_ranged_max;

921 
¡©s
.
absÜb_mš
 = 
h”o_¡©s
->absorb_min;

922 
¡©s
.
absÜb_max
 = 
h”o_¡©s
->absorb_max;

923 
¡©s
.
avoidªû
 = 
h”o_¡©s
->avoidance;

924 
¡©s
.
accu¿cy
 = 
h”o_¡©s
->accuracy;

925 
¡©s
.
ü™
 = 
h”o_¡©s
->crit;

927 
i
=0; i<
¡©s
.
vuÊ”abË
.
	`size
(); i++) {

928 
¡©s
.
vuÊ”abË
[
i
] = 
h”o_¡©s
->vulnerable[i];

931 
	`lßdSounds
();

932 
	`lßdS‹pFX
(
¡©s
.
sfx_¡•
);

934 
d–‘e
 
ch¬med_¡©s
;

935 
d–‘e
 
h”o_¡©s
;

936 
ch¬med_¡©s
 = 
NULL
;

937 
h”o_¡©s
 = 
NULL
;

938 
	}
}

940 
	gAv©¬
::
£tAnim©iÚ
(
¡d
::
¡ršg
 
Çme
) {

941 ià(
Çme
 =ğ
aùiveAnim©iÚ
->
g‘Name
())

944 
	gEÁ™y
::
£tAnim©iÚ
(
Çme
);

945 
	gi
=0; i < 
	gªim£ts
.
size
(); i++) {

946 
d–‘e
 
	gªims
[
i
];

947 ià(
	gªim£ts
[
i
])

948 
	gªims
[
i
] = 
ªim£ts
[i]->
g‘Anim©iÚ
(
Çme
);

950 
	gªims
[
i
] = 0;

957 
	gAv©¬
::
	$g‘UÁ¿nsfÜmPow”
() {

958 
id
=0; id<
pow”s
->pow”s.
	`size
(); id++) {

959 ià(
pow”s
->pow”s[
id
].
¥awn_ty³
 =ğ"uÁ¿nsfÜm" &&…ow”s->pow”s[id].
»quœes_™em
 == -1)

960  
id
;

963 
	}
}

965 
	gAv©¬
::
addR’d”s
(
veùÜ
<
R’d”abË
> &
r
) {

966 ià(!
¡©s
.
ŒªsfÜmed
) {

967 
i
 = 0; 
	gi
 < 
	gÏy”_def
[
¡©s
.
dœeùiÚ
].
size
(); ++i) {

968 
	gšdex
 = 
Ïy”_def
[
¡©s
.
dœeùiÚ
][
i
];

969 ià(
	gªims
[
šdex
]) {

970 
R’d”abË
 
	g»n
 = 
ªims
[
šdex
]->
g‘Cu¼’tF¿me
(
¡©s
.
dœeùiÚ
);

971 
	g»n
.
	gm­_pos
 = 
¡©s
.
pos
;

972 
	g»n
.
	g´io
 = 
i
+1;

973 
	gr
.
push_back
(
»n
);

977 
R’d”abË
 
	g»n
 = 
aùiveAnim©iÚ
->
g‘Cu¼’tF¿me
(
¡©s
.
dœeùiÚ
);

978 
	g»n
.
	gm­_pos
 = 
¡©s
.
pos
;

979 
	gr
.
push_back
(
»n
);

982 
	gi
 = 0; i < 
	g¡©s
.
	gefãùs
.
	gefãù_li¡
.
size
(); ++i) {

983 ià(
	g¡©s
.
	gefãùs
.
	gefãù_li¡
[
i
].
	gªim©iÚ
 && !¡©s.efãùs.efãù_li¡[i].ªim©iÚ->
isCom¶‘ed
()) {

984 
R’d”abË
 
	g»n
 = 
¡©s
.
efãùs
.
efãù_li¡
[
i
].
ªim©iÚ
->
g‘Cu¼’tF¿me
(0);

985 
	g»n
.
	gm­_pos
 = 
¡©s
.
pos
;

986 ià(
	g¡©s
.
	gefãùs
.
	gefãù_li¡
[
i
].
	g»nd”_above
è
	g»n
.
	g´io
 = 
Ïy”_def
[
¡©s
.
dœeùiÚ
].
size
()+1;

987 
	g»n
.
	g´io
 = 0;

988 
	gr
.
push_back
(
»n
);

993 
	gAv©¬
::~
	$Av©¬
() {

995 ià(
¡©s
.
ŒªsfÜmed
 && 
ch¬med_¡©s
 && ch¬med_¡©s->
ªim©iÚs
 != "") {

996 
ªim
->
	`deü—£CouÁ
("ªim©iÚs/’em›s/"+
ch¬med_¡©s
->
ªim©iÚs
 + ".txt");

998 
ªim
->
	`deü—£CouÁ
("animations/hero.txt");

1001 
i
=0; i<
ªim£ts
.
	`size
(); i++) {

1002 ià(
ªim£ts
[
i
])

1003 
ªim
->
	`deü—£CouÁ
(
ªim£ts
[
i
]->
	`g‘Name
());

1004 
d–‘e
 
ªims
[
i
];

1006 
ªim
->
	`ş—nUp
();

1008 
d–‘e
 
ch¬med_¡©s
;

1009 
d–‘e
 
h”o_¡©s
;

1011 
¢d
->
	`uÆßd
(
sound_m–“
);

1012 
¢d
->
	`uÆßd
(
sound_m’l
);

1013 
¢d
->
	`uÆßd
(
sound_h™
);

1014 
¢d
->
	`uÆßd
(
sound_d›
);

1015 
¢d
->
	`uÆßd
(
sound_block
);

1017 
i
 = 0;i < 4; i++)

1018 
¢d
->
	`uÆßd
(
sound_¡•s
[
i
]);

1020 
¢d
->
	`uÆßd
(
Ëv–_up
);

1022 
d–‘e
 
haz
;

1023 
	}
}

	@Avatar.h

26 #´agm¨
Úû


27 #iâdeà
AVATAR_H


28 
	#AVATAR_H


	)

31 
	~"EÁ™y.h
"

32 
	~"Sh¬edResourûs.h
"

33 
	~"SoundMªag”.h
"

34 
	~"Uts.h
"

36 
	~<SDL.h
>

37 
	~<SDL_image.h
>

38 
	~<SDL_mix”.h
>

40 
	~<m©h.h
>

41 
	~<¡ršg
>

43 
şass
 
	gEÁ™y
;

44 
şass
 
	gHaz¬d
;

45 
şass
 
	gPow”Mªag”
;

46 
şass
 
	gStBlock
;

51 
	eAv©¬S‹
 {

52 
	mAVATAR_STANCE
 = 0,

53 
	mAVATAR_RUN
 = 1,

54 
	mAVATAR_MELEE
 = 2,

55 
	mAVATAR_BLOCK
 = 3,

56 
	mAVATAR_HIT
 = 4,

57 
	mAVATAR_DEAD
 = 5,

58 
	mAVATAR_CAST
 = 6,

59 
	mAVATAR_SHOOT
 = 7

62 şas 
	cLay”_gfx
 {

63 
	mpublic
:

64 
¡d
::
¡ršg
 
gfx
;

65 
	m¡d
::
¡ršg
 
ty³
;

66 
	$Lay”_gfx
()

67 : 
	`gfx
("")

68 , 
	`ty³
("")

70 
	}
};

72 şas 
	cAv©¬
 : 
public
 
EÁ™y
 {

73 
´iv©e
:

74 
boŞ
 
lockSwšg
;

75 
boŞ
 
	mlockCa¡
;

76 
boŞ
 
	mlockShoÙ
;

77 
boŞ
 
	mªimFwd
;

79 
	mSoundMªag”
::
SoundID
 
sound_m–“
;

80 
	mSoundMªag”
::
SoundID
 
sound_m’l
;

81 
	mSoundMªag”
::
SoundID
 
sound_h™
;

82 
	mSoundMªag”
::
SoundID
 
sound_d›
;

83 
	mSoundMªag”
::
SoundID
 
sound_block
;

84 
	mSoundMªag”
::
SoundID
 
sound_¡•s
[4];

85 
	mSoundMªag”
::
SoundID
 
Ëv–_up
;

87 
£tAnim©iÚ
(
¡d
::
¡ršg
 
Çme
);

88 
	m¡d
::
veùÜ
<
Anim©iÚS‘
*> 
ªim£ts
;

89 
	m¡d
::
veùÜ
<
Anim©iÚ
*> 
ªims
;

91 
	mbody
;

93 
boŞ
 
	mŒªsfÜm_Œigg”ed
;

94 
	m¡d
::
¡ršg
 
Ï¡_ŒªsfÜm
;

95 
g‘UÁ¿nsfÜmPow”
();

97 
	mpublic
:

98 
Av©¬
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
);

99 ~
Av©¬
();

101 
Pow”Mªag”
 *
	mpow”s
;

103 
š™
();

104 
lßdLay”Defš™iÚs
();

105 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Ïy”_»ã»nû_Üd”
;

106 
	m¡d
::
veùÜ
<
¡d
::veùÜ<> > 
Ïy”_def
;

107 
lßdG¿phics
(
¡d
::
veùÜ
<
Lay”_gfx
> 
_img_gfx
);

108 
lßdSounds
(cÚ¡ 
¡d
::
¡ršg
& 
ty³_id
 = "none");

109 
lßdS‹pFX
(cÚ¡ 
¡d
::
¡ršg
& 
¡•Çme
);

111 
logic
(
aùiÚb¬_pow”
, 
boŞ
 
»¡riùPow”U£
);

112 
boŞ
 
´essšg_move
();

113 
£t_dœeùiÚ
();

114 
boŞ
 
keH™
(cÚ¡ 
Haz¬d
 &
h
);

115 
	m¡d
::
¡ršg
 
log_msg
;

118 
ŒªsfÜm
();

119 
uÁ¿nsfÜm
();

120 
boŞ
 
	m£tPow”s
;

121 
boŞ
 
	m»v”tPow”s
;

122 
	muÁ¿nsfÜm_pow”
;

123 
StBlock
 *
	mh”o_¡©s
;

124 
StBlock
 *
	mch¬med_¡©s
;

126 
vœtu®
 
R’d”abË
 
	$g‘R’d”
(è{  
	`R’d”abË
(); }

127 
	`addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

130 
Haz¬d
 *
haz
;

131 
cu¼’t_pow”
;

132 
Pošt
 
aù_rg‘
;

133 
boŞ
 
©ckšg
;

134 
boŞ
 
d¿g_w®kšg
;

135 
boŞ
 
ÃwLev–NÙifiÿtiÚ
;

136 
boŞ
 
»¥awn
;

137 
boŞ
 
şo£_m’us
;

139 
´iv©e
:

140 
	`hªdËPow”
(
aùiÚb¬_pow”
);

141 
	}
};

	@BehaviorStandard.cpp

19 
	~<veùÜ
>

20 
	~"Anim©iÚ.h
"

21 
	~"BehaviÜSnd¬d.h
"

22 
	~"EÃmy.h
"

23 
	~"M­R’d””.h
"

24 
	~"Pow”Mªag”.h
"

25 
	~"StBlock.h
"

26 
	~"UtsM©h.h
"

28 
	gBehaviÜSnd¬d
::
	$BehaviÜSnd¬d
(
EÃmy
 *
_e
è: 
	$EÃmyBehaviÜ
(
_e
) {

29 
los
 = 
çl£
;

30 
di¡
 = 0;

31 
pursue_pos
.
x
 =…ursue_pos.
y
 = -1;

32 
	}
}

37 
	gBehaviÜSnd¬d
::
	$logic
() {

40 ià(
e
->
¡©s
.
cÜp£
) {

41 ià(
e
->
¡©s
.
cÜp£_ticks
 > 0)

42 
e
->
¡©s
.
cÜp£_ticks
--;

45 
	`doUpk“p
();

46 
	`fšdT¬g‘
();

47 
	`checkPow”
();

48 
	`checkMove
();

49 
	`upd©eS‹
();

51 
	}
}

57 
	gBehaviÜSnd¬d
::
	$doUpk“p
() {

59 ià(
e
->
¡©s
.
hp
 > 0 ||ƒ->¡©s.
efãùs
.
Œigg”ed_d—th
èe->
pow”s
->
	`aùiv©ePassives
(&e->stats);

61 
e
->
¡©s
.
	`logic
();

64 ià(!
e
->
¡©s
.
š_comb©
) {

65 ià(
e
->
¡©s
.
®ive
 &&ƒ->¡©s.
h”o_®ive
) {

66 
e
->
¡©s
.
hp
++;

67 ià(
e
->
¡©s
.
hp
 >ƒ->¡©s.
maxhp
)ƒ->stats.hp =ƒ->stats.maxhp;

71 ià(
e
->
¡©s
.
efãùs
.
fÜûd_move
) {

72 
e
->
	`move
();

75 ià(
e
->
¡©s
.
waypošt_·u£_ticks
 > 0)

76 
e
->
¡©s
.
waypošt_·u£_ticks
--;

78 ià(
e
->
¡©s
.
wªd”_ticks
 > 0)

79 
e
->
¡©s
.
wªd”_ticks
--;

81 ià(
e
->
¡©s
.
wªd”_·u£_ticks
 > 0)

82 
e
->
¡©s
.
wªd”_·u£_ticks
--;

85 ià(
e
->
¡©s
.
hp
 <ğ0 &&ƒ->¡©s.
efãùs
.
»vive
) {

86 
e
->
¡©s
.
hp
 =ƒ->¡©s.
maxhp
;

87 
e
->
¡©s
.
®ive
 = 
Œue
;

88 
e
->
¡©s
.
cÜp£
 = 
çl£
;

89 
e
->
¡©s
.
cur_¡©e
 = 
ENEMY_STANCE
;

93 ià(
e
->
¡©s
.
hp
 <ğ0 && !Ó->¡©s.
cur_¡©e
 =ğ
ENEMY_DEAD
 ||ƒ->¡©s.cur_¡©=ğ
ENEMY_CRITDEAD
)) {

94 
e
->
	`doRew¬ds
();

95 
e
->
¡©s
.
efãùs
.
Œigg”ed_d—th
 = 
Œue
;

96 
e
->
¡©s
.
cur_¡©e
 = 
ENEMY_DEAD
;

97 
e
->
m­
->
cŞlid”
.
	`unblock
Ó->
¡©s
.
pos
.
x
,e->¡©s.pos.
y
);

101 ià(
e
->
¡©s
.
efãùs
.
damage
 > 0 &&ƒ->¡©s.
hp
 > 0) {

102 
comb
->
	`addMes§ge
(
e
->
¡©s
.
efãùs
.
damage
,ƒ->¡©s.
pos
, 
COMBAT_MESSAGE_TAKEDMG
);

106 ià(
e
->
¡©s
.
‹ËpÜtiÚ
) {

108 
e
->
m­
->
cŞlid”
.
	`unblock
Ó->
¡©s
.
pos
.
x
,e->¡©s.pos.
y
);

110 
e
->
¡©s
.
pos
.
x
 =ƒ->¡©s.
‹ËpÜt_de¡š©iÚ
.x;

111 
e
->
¡©s
.
pos
.
y
 =ƒ->¡©s.
‹ËpÜt_de¡š©iÚ
.y;

113 
e
->
m­
->
cŞlid”
.
	`block
Ó->
¡©s
.
pos
.
x
,e->¡©s.pos.
y
);

115 
e
->
¡©s
.
‹ËpÜtiÚ
 = 
çl£
;

117 
	}
}

122 
	gBehaviÜSnd¬d
::
	$fšdT¬g‘
() {

123 
¡—Éh_th»©_¿nge
 = (
e
->
¡©s
.
th»©_¿nge
 * (100 -ƒ->¡©s.
h”o_¡—Éh
)) / 100;

126 ià(
e
->
¡©s
.
efãùs
.
¡un
) ;

129 ià(
e
->
¡©s
.
h”o_®ive
)

130 
di¡
 = 
e
->
	`g‘Di¡ªû
Ó->
¡©s
.
h”o_pos
);

132 
di¡
 = 0;

135 ià(
di¡
 < 
e
->
¡©s
.
th»©_¿nge
 &&ƒ->¡©s.
h”o_®ive
)

136 
los
 = 
e
->
m­
->
cŞlid”
.
	`lše_of_sight
Ó->
¡©s
.
pos
.
x
,ƒ->¡©s.pos.
y
,ƒ->¡©s.
h”o_pos
.x,ƒ->stats.hero_pos.y);

138 
los
 = 
çl£
;

141 ià(
e
->
¡©s
.
još_comb©
) {

142 ià(
di¡
 <ğ(
¡—Éh_th»©_¿nge
 *2)) {

143 
e
->
¡©s
.
još_comb©
 = 
çl£
;

146 
e
->
¡©s
.
š_comb©
 = 
Œue
;

147 
e
->
pow”s
->
	`aùiv©e
Ó->
¡©s
.
pow”_šdex
[
BEACON
], &e->¡©s,ƒ->¡©s.
pos
);

152 ià(!
e
->
¡©s
.
š_comb©
 && 
los
 && 
di¡
 < 
¡—Éh_th»©_¿nge
) {

154 ià(
e
->
¡©s
.
š_comb©
èe->¡©s.
još_comb©
 = 
Œue
;

155 
e
->
¡©s
.
š_comb©
 = 
Œue
;

156 
e
->
pow”s
->
	`aùiv©e
Ó->
¡©s
.
pow”_šdex
[
BEACON
], &e->¡©s,ƒ->¡©s.
pos
);

160 ià(
e
->
¡©s
.
š_comb©
 && 
di¡
 > (e->¡©s.
th»©_¿nge
 *2è&& !e->¡©s.
još_comb©
) {

161 
e
->
¡©s
.
š_comb©
 = 
çl£
;

165 ià(!
e
->
¡©s
.
®ive
 || !e->¡©s.
h”o_®ive
) {

166 
e
->
¡©s
.
š_comb©
 = 
çl£
;

170 ià(
e
->
¡©s
.
wªd”
 && !e->¡©s.
š_comb©
 &&ƒ->¡©s.
wªd”_¬—
.
w
 > 0 &&ƒ->¡©s.wªd”_¬—.
h
 > 0) {

171 ià(
e
->
¡©s
.
wªd”_ticks
 == 0) {

172 
pursue_pos
.
x
 = 
e
->
¡©s
.
wªd”_¬—
.x + (
	`¿nd
(è% (e->¡©s.wªd”_¬—.
w
));

173 
pursue_pos
.
y
 = 
e
->
¡©s
.
wªd”_¬—
.y + (
	`¿nd
(è% (e->¡©s.wªd”_¬—.
h
));

174 
e
->
¡©s
.
wªd”_ticks
 = (
	`¿nd
() % 150) + 150;

178 
pursue_pos
.
x
 = 
e
->
¡©s
.
h”o_pos
.x;

179 
pursue_pos
.
y
 = 
e
->
¡©s
.
h”o_pos
.y;

181 ià(!(
e
->
¡©s
.
š_comb©
 ||ƒ->¡©s.
waypošts
.
	`em±y
())) {

182 
Pošt
 
waypošt
 = 
e
->
¡©s
.
waypošts
.
	`äÚt
();

183 
pursue_pos
.
x
 = 
waypošt
.x;

184 
pursue_pos
.
y
 = 
waypošt
.y;

187 
	}
}

194 
	gBehaviÜSnd¬d
::
	$checkPow”
() {

197 ià(
e
->
¡©s
.
efãùs
.
¡un
) ;

200 ià(!
e
->
¡©s
.
š_comb©
) ;

203 ià(
e
->
¡©s
.
coŞdown_ticks
 > 0) ;

212 ià(
los
 && (
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_STANCE
 ||ƒ->¡©s.cur_¡©=ğ
ENEMY_MOVE
)) {

215 ià(!
e
->
¡©s
.
Ú_h®f_d—d_ÿ¡ed
 &&ƒ->¡©s.
hp
 <ğe->¡©s.
maxhp
/2) {

216 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
ON_HALF_DEAD
])) {

217 
e
->
	`ÃwS‹
(
ENEMY_POWER
);

218 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 = 
ON_HALF_DEAD
;

224 ià(
di¡
 > 
e
->
¡©s
.
m–“_¿nge
) {

226 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
RANGED_PHYS
]è&&ƒ->¡©s.
pow”_ticks
[RANGED_PHYS] == 0) {

227 
e
->
	`ÃwS‹
(
ENEMY_POWER
);

228 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 = 
RANGED_PHYS
;

231 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
RANGED_MENT
]è&&ƒ->¡©s.
pow”_ticks
[RANGED_MENT] == 0) {

232 
e
->
	`ÃwS‹
(
ENEMY_POWER
);

233 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 = 
RANGED_MENT
;

240 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
MELEE_PHYS
]è&&ƒ->¡©s.
pow”_ticks
[MELEE_PHYS] == 0) {

241 
e
->
	`ÃwS‹
(
ENEMY_POWER
);

242 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 = 
MELEE_PHYS
;

245 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
MELEE_MENT
]è&&ƒ->¡©s.
pow”_ticks
[MELEE_MENT] == 0) {

246 
e
->
	`ÃwS‹
(
ENEMY_POWER
);

247 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 = 
MELEE_MENT
;

256 ià(
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_POWER
) {

260 ià(
e
->
aùiveAnim©iÚ
->
	`isAùiveF¿me
(è||ƒ->
š¡ªt_pow”
) {

261 
e
->
š¡ªt_pow”
 = 
çl£
;

263 
pow”_¦Ù
 = 
e
->
¡©s
.
aùiv©ed_pow”¦Ù
;

264 
pow”_id
 = 
e
->
¡©s
.
pow”_šdex
[e->¡©s.
aùiv©ed_pow”¦Ù
];

266 
e
->
pow”s
->
	`aùiv©e
(
pow”_id
, &e->
¡©s
, 
pursue_pos
);

267 
e
->
¡©s
.
pow”_ticks
[
pow”_¦Ù
] =ƒ->¡©s.
pow”_coŞdown
[power_slot];

268 
e
->
¡©s
.
coŞdown_ticks
 =ƒ->¡©s.
coŞdown
;

270 ià(
e
->
¡©s
.
aùiv©ed_pow”¦Ù
 =ğ
ON_HALF_DEAD
) {

271 
e
->
¡©s
.
Ú_h®f_d—d_ÿ¡ed
 = 
Œue
;

276 
	}
}

281 
	gBehaviÜSnd¬d
::
	$checkMove
() {

284 ià(
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_DEAD
 ||ƒ->¡©s.cur_¡©=ğ
ENEMY_CRITDEAD
) ;

287 ià(
e
->
¡©s
.
efãùs
.
¡un
) ;

290 ià(!
e
->
¡©s
.
š_comb©
 && (e->¡©s.
waypošts
.
	`em±y
(è||ƒ->¡©s.
waypošt_·u£_ticks
 > 0è&& (!e->¡©s.
wªd”
 ||ƒ->¡©s.
wªd”_·u£_ticks
 > 0)) {

292 ià(
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_MOVE
) {

293 
e
->
	`ÃwS‹
(
ENEMY_STANCE
);

301 
e
->
m­
->
cŞlid”
.
	`unblock
Ó->
¡©s
.
pos
.
x
,ƒ->¡©s.pos.
y
);

304 ià(
e
->
¡©s
.
çcšg
) {

305 ià(++
e
->
¡©s
.
tuº_ticks
 >ƒ->¡©s.
tuº_d–ay
) {

308 ià(!
e
->
m­
->
cŞlid”
.
	`lše_of_movem’t
Ó->
¡©s
.
pos
.
x
,ƒ->¡©s.pos.
y
,ƒ->¡©s.
h”o_pos
.x,ƒ->¡©s.h”o_pos.y,ƒ->¡©s.
movem’t_ty³
)) {

311 
¡d
::
veùÜ
<
Pošt
> 
·th
;

313 iàĞ
e
->
m­
->
cŞlid”
.
	`compu‹_·th
Ó->
¡©s
.
pos
, 
pursue_pos
, 
·th
,ƒ->¡©s.
movem’t_ty³
) ) {

314 
pursue_pos
 = 
·th
.
	`back
();

318 
e
->
¡©s
.
dœeùiÚ
 =ƒ->
	`çû
(
pursue_pos
.
x
,…ursue_pos.
y
);

319 
e
->
¡©s
.
tuº_ticks
 = 0;

322 
´ev_dœeùiÚ
 = 
e
->
¡©s
.
dœeùiÚ
;

325 ià(
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_STANCE
) {

327 ià(
di¡
 < 
e
->
¡©s
.
m–“_¿nge
) {

330 ià(
	`³rûÁChªû
(
e
->
¡©s
.
chªû_pursue
)) {

332 ià(
e
->
	`move
()) {

333 
e
->
	`ÃwS‹
(
ENEMY_MOVE
);

338 
e
->
¡©s
.
dœeùiÚ
 =ƒ->
	`çûNextBe¡
(
pursue_pos
.
x
,…ursue_pos.
y
);

339 ià(
e
->
	`move
()) {

340 
e
->
	`ÃwS‹
(
ENEMY_MOVE
);

342 
e
->
¡©s
.
dœeùiÚ
 = 
´ev_dœeùiÚ
;

348 ià(
e
->
¡©s
.
cur_¡©e
 =ğ
ENEMY_MOVE
) {

351 ià(
di¡
 < 
e
->
¡©s
.
m–“_¿nge
) {

352 
e
->
	`ÃwS‹
(
ENEMY_STANCE
);

356 ià(!
e
->
	`move
()) {

359 
e
->
¡©s
.
dœeùiÚ
 =ƒ->
	`çûNextBe¡
(
pursue_pos
.
x
,…ursue_pos.
y
);

360 ià(!
e
->
	`move
()) {

361 
e
->
	`ÃwS‹
(
ENEMY_STANCE
);

362 
e
->
¡©s
.
dœeùiÚ
 = 
´ev_dœeùiÚ
;

368 ià(!
e
->
¡©s
.
waypošts
.
	`em±y
()) {

369 
Pošt
 
waypošt
 = 
e
->
¡©s
.
waypošts
.
	`äÚt
();

370 
Pošt
 
pos
 = 
e
->
¡©s
.pos;

372 ià(
	`abs
(
waypošt
.
x
 - 
pos
.xè< 
UNITS_PER_TILE
/2 &&‡bs(waypošt.
y
 -…os.y) < UNITS_PER_TILE/2) {

373 
e
->
¡©s
.
waypošts
.
	`pİ
();

374 
e
->
¡©s
.
waypošts
.
	`push
(
waypošt
);

375 
e
->
¡©s
.
waypošt_·u£_ticks
 =ƒ->¡©s.
waypošt_·u£
;

380 ià(
e
->
¡©s
.
wªd”
) {

381 
Pošt
 
pos
 = 
e
->
¡©s
.pos;

382 ià(
	`abs
(
pursue_pos
.
x
 - 
pos
.xè< 
UNITS_PER_TILE
/2 &&‡bsÕursue_pos.
y
 -…os.y) < UNITS_PER_TILE/2) {

383 
e
->
¡©s
.
wªd”_ticks
 = 0;

385 ià(
e
->
¡©s
.
wªd”_ticks
 =ğ0 &&ƒ->¡©s.
wªd”_·u£_ticks
 == 0) {

386 
e
->
¡©s
.
wªd”_·u£_ticks
 = 
	`¿nd
() % 60;

391 
e
->
m­
->
cŞlid”
.
	`block
Ó->
¡©s
.
pos
.
x
,ƒ->¡©s.pos.
y
);

393 
	}
}

400 
	gBehaviÜSnd¬d
::
	$upd©eS‹
() {

403 ià(
e
->
¡©s
.
efãùs
.
¡un
) ;

405 
pow”_id
;

406 
pow”_¡©e
;

409 
e
->
aùiveAnim©iÚ
->
	`advªûF¿me
();

411 
e
->
¡©s
.
cur_¡©e
) {

413 
ENEMY_STANCE
:

415 
e
->
	`£tAnim©iÚ
("stance");

418 
ENEMY_MOVE
:

420 
e
->
	`£tAnim©iÚ
("run");

423 
ENEMY_POWER
:

425 
pow”_id
 = 
e
->
¡©s
.
pow”_šdex
[e->¡©s.
aùiv©ed_pow”¦Ù
];

426 
pow”_¡©e
 = 
e
->
pow”s
->pow”s[
pow”_id
].
Ãw_¡©e
;

429 ià(
pow”_¡©e
 =ğ
POWSTATE_SWING
è
e
->
	`£tAnim©iÚ
("melee");

430 ià(
pow”_¡©e
 =ğ
POWSTATE_SHOOT
è
e
->
	`£tAnim©iÚ
("ranged");

431 ià(
pow”_¡©e
 =ğ
POWSTATE_CAST
è
e
->
	`£tAnim©iÚ
("ment");

432 ià(
pow”_¡©e
 =ğ
POWSTATE_INSTANT
è
e
->
š¡ªt_pow”
 = 
Œue
;

435 ià(
e
->
aùiveAnim©iÚ
->
	`isFœ¡F¿me
()) {

436 ià(
pow”_¡©e
 =ğ
POWSTATE_SWING
è
e
->
sfx_phys
 = 
Œue
;

437 ià(
pow”_¡©e
 =ğ
POWSTATE_SHOOT
è
e
->
sfx_phys
 = 
Œue
;

438 ià(
pow”_¡©e
 =ğ
POWSTATE_CAST
è
e
->
sfx_m’t
 = 
Œue
;

441 ià(
e
->
aùiveAnim©iÚ
->
	`isLa¡F¿me
()èe->
	`ÃwS‹
(
ENEMY_STANCE
);

444 
ENEMY_SPAWN
:

446 
e
->
	`£tAnim©iÚ
("spawn");

447 ià(
e
->
aùiveAnim©iÚ
->
	`isLa¡F¿me
()èe->
	`ÃwS‹
(
ENEMY_STANCE
);

450 
ENEMY_BLOCK
:

452 
e
->
	`£tAnim©iÚ
("block");

455 
ENEMY_HIT
:

457 
e
->
	`£tAnim©iÚ
("hit");

458 ià(
e
->
aùiveAnim©iÚ
->
	`isFœ¡F¿me
()) {

459 
e
->
¡©s
.
efãùs
.
Œigg”ed_h™
 = 
Œue
;

461 ià(
e
->
aùiveAnim©iÚ
->
	`isLa¡F¿me
()èe->
	`ÃwS‹
(
ENEMY_STANCE
);

464 
ENEMY_DEAD
:

465 ià(
e
->
¡©s
.
efãùs
.
Œigg”ed_d—th
) ;

467 
e
->
	`£tAnim©iÚ
("die");

468 ià(
e
->
aùiveAnim©iÚ
->
	`isFœ¡F¿me
()) {

469 
e
->
sfx_d›
 = 
Œue
;

470 
e
->
¡©s
.
cÜp£_ticks
 = 
CORPSE_TIMEOUT
;

471 
e
->
¡©s
.
efãùs
.
	`ş—rEfãùs
();

473 ià(
e
->
aùiveAnim©iÚ
->
	`isSecÚdLa¡F¿me
()) {

474 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
ON_DEATH
]))

475 
e
->
pow”s
->
	`aùiv©e
Ó->
¡©s
.
pow”_šdex
[
ON_DEATH
], &e->¡©s,ƒ->¡©s.
pos
);

477 ià(
e
->
aùiveAnim©iÚ
->
	`isLa¡F¿me
()èe->
¡©s
.
cÜp£
 = 
Œue
;

481 
ENEMY_CRITDEAD
:

483 
e
->
	`£tAnim©iÚ
("critdie");

484 ià(
e
->
aùiveAnim©iÚ
->
	`isFœ¡F¿me
()) {

485 
e
->
sfx_ü™d›
 = 
Œue
;

486 
e
->
¡©s
.
cÜp£_ticks
 = 
CORPSE_TIMEOUT
;

487 
e
->
¡©s
.
efãùs
.
	`ş—rEfãùs
();

489 ià(
e
->
aùiveAnim©iÚ
->
	`isSecÚdLa¡F¿me
()) {

490 ià(
	`³rûÁChªû
(
e
->
¡©s
.
pow”_chªû
[
ON_DEATH
]))

491 
e
->
pow”s
->
	`aùiv©e
Ó->
¡©s
.
pow”_šdex
[
ON_DEATH
], &e->¡©s,ƒ->¡©s.
pos
);

493 ià(
e
->
aùiveAnim©iÚ
->
	`isLa¡F¿me
()èe->
¡©s
.
cÜp£
 = 
Œue
;

500 
	}
}

	@BehaviorStandard.h

19 #´agm¨
Úû


20 #iâdeà
BEHAVIOR_STANDARD_H


21 
	#BEHAVIOR_STANDARD_H


	)

23 
	~"EÃmyBehaviÜ.h
"

26 
şass
 
	gEÃmy
;

27 
şass
 
	gPošt
;

29 şas 
	cBehaviÜSnd¬d
 : 
public
 
EÃmyBehaviÜ
 {

30 
´iv©e
:

33 
doUpk“p
();

34 
fšdT¬g‘
();

35 
checkPow”
();

36 
checkMove
();

37 
upd©eS‹
();

40 
boŞ
 
	mlos
;

41 
	mdi¡
;

42 
Pošt
 
	mpursue_pos
;

44 
	mpublic
:

45 
BehaviÜSnd¬d
(
EÃmy
 *
_e
);

46 
logic
();

	@CampaignManager.cpp

26 
	~"Cam·ignMªag”.h
"

27 
	~"M’uI‹mStÜage.h
"

28 
	~"S‘tšgs.h
"

29 
	~"StBlock.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"UtsP¬sšg.h
"

32 
	~"LoÙMªag”.h
"

34 
	~<s¡»am
>

36 
usšg
 
Çme¥aû
 
	g¡d
;

38 
	gCam·ignMªag”
::
	$Cam·ignMªag”
()

39 : 
	`¡©us
()

40 , 
	`log_msg
("")

41 , 
	`drİ_¡ack
()

42 , 
	`™ems
(
NULL
)

43 , 
	`ÿ¼›d_™ems
(
NULL
)

44 , 
	`cu¼’cy
(
NULL
)

45 , 
	`h”o
(
NULL
)

46 , 
	$que¡_upd©e
(
Œue
)

47 {
	}
}

49 
	gCam·ignMªag”
::
	$ş—rAÎ
() {

51 
¡©us
.
	`ş—r
();

52 
	}
}

57 
	gCam·ignMªag”
::
£tAÎ
(
¡d
::
¡ršg
 
s
) {

58 
¡ršg
 
¡r
 = 
s
 + ',';

59 
¡ršg
 
	gtok’
;

60 
	g¡r
 != "") {

61 
tok’
 = 
—tFœ¡SŒšg
(
¡r
, ',');

62 ià(
	gtok’
 !ğ""è
this
->
£tStus
(
tok’
);

64 
	gque¡_upd©e
 = 
Œue
;

70 
	g¡d
::
¡ršg
 
Cam·ignMªag”
::
	$g‘AÎ
() {

71 
¡ršg¡»am
 
ss
;

72 
ss
.
	`¡r
("");

73 
i
=0; i < 
¡©us
.
	`size
(); i++) {

74 
ss
 << 
¡©us
[
i
];

75 ià(
i
 < 
¡©us
.
	`size
()-1è
ss
 << ',';

77  
ss
.
	`¡r
();

78 
	}
}

80 
boŞ
 
	gCam·ignMªag”
::
checkStus
(
¡d
::
¡ršg
 
s
) {

83 ià(
s
 =ğ""è 
çl£
;

85 
	gi
=0; i < 
	g¡©us
.
size
(); i++) {

86 ià(
	g¡©us
[
i
] =ğ
s
è 
Œue
;

88  
	gçl£
;

91 
	gCam·ignMªag”
::
£tStus
(
¡d
::
¡ršg
 
s
) {

94 ià(
s
 == "") ;

97 ià(
checkStus
(
s
)) ;

99 
	g¡©us
.
push_back
(
s
);

100 
	gque¡_upd©e
 = 
Œue
;

101 
	gh”o
->
	gcheck_t™Ë
 = 
Œue
;

104 
	gCam·ignMªag”
::
un£tStus
(
¡d
::
¡ršg
 
s
) {

107 ià(
s
 == "") ;

109 
	gveùÜ
<
	g¡ršg
>::
™”©Ü
 
™
;

111 
	g™
 = 
¡©us
.
’d
(); iˆ!ğ¡©us.
begš
();) {

112 --
	g™
;

113 ià((*
	g™
è=ğ
s
) {

114 
™
 = 
¡©us
.
”a£
(it);

115 
	gque¡_upd©e
 = 
Œue
;

118 
	gh”o
->
	gcheck_t™Ë
 = 
Œue
;

122 
boŞ
 
	gCam·ignMªag”
::
	$checkI‹m
(
™em_id
) {

123  
ÿ¼›d_™ems
->
	`cÚš
(
™em_id
);

124 
	}
}

126 
	gCam·ignMªag”
::
	$»moveI‹m
(
™em_id
) {

127 
ÿ¼›d_™ems
->
	`»move
(
™em_id
);

128 
	}
}

130 
	gCam·ignMªag”
::
	$»w¬dI‹m
(
I‹mSck
 
i¡ack
) {

132 ià(
ÿ¼›d_™ems
->
	`fuÎ
(
i¡ack
.
™em
)) {

133 
drİ_¡ack
.
™em
 = 
i¡ack
.item;

134 
drİ_¡ack
.
quªt™y
 = 
i¡ack
.quantity;

137 
ÿ¼›d_™ems
->
	`add
(
i¡ack
);

139 ià(
i¡ack
.
quªt™y
 <= 1)

140 
	`addMsg
(
msg
->
	`g‘
("You„eûiv%s.", 
™ems
->™ems[
i¡ack
.
™em
].
Çme
));

141 ià(
i¡ack
.
quªt™y
 > 1)

142 
	`addMsg
(
msg
->
	`g‘
("You„eûiv% x%d.", 
i¡ack
.
quªt™y
, 
™ems
->™ems[i¡ack.
™em
].
Çme
));

144 
™ems
->
	`¶aySound
(
i¡ack
.
™em
);

146 
	}
}

148 
	gCam·ignMªag”
::
	$»w¬dCu¼’cy
(
amouÁ
) {

149 *
cu¼’cy
 +ğ
amouÁ
;

150 
	`addMsg
(
msg
->
	`g‘
("You„eûiv%d %s.", 
amouÁ
, 
CURRENCY
));

151 
LoÙMªag”
::
	`g‘In¡ªû
()->
	`¶ayCu¼’cySound
();

152 
	}
}

154 
	gCam·ignMªag”
::
	$»w¬dXP
(
amouÁ
, 
boŞ
 
show_mes§ge
) {

155 
h”o
->
xp
 +ğ(
amouÁ
 * (100 + h”o->
efãùs
.
bÚus_xp
)) / 100;

156 
h”o
->
»äesh_¡©s
 = 
Œue
;

157 ià(
show_mes§ge
è
	`addMsg
(
msg
->
	`g‘
("You„eûiv%d XP.", 
amouÁ
));

158 
	}
}

160 
	gCam·ignMªag”
::
»¡ÜeHPMP
(
¡d
::
¡ršg
 
s
) {

161 ià(
s
 == "hp") {

162 
h”o
->
hp
 = h”o->
maxhp
;

163 
addMsg
(
msg
->
g‘
("HP„estored."));

165 ià(
	gs
 == "mp") {

166 
h”o
->
mp
 = h”o->
maxmp
;

167 
addMsg
(
msg
->
g‘
("MP„estored."));

169 ià(
	gs
 == "hpmp") {

170 
h”o
->
hp
 = h”o->
maxhp
;

171 
	gh”o
->
	gmp
 = 
h”o
->
maxmp
;

172 
addMsg
(
msg
->
g‘
("HP‡nd MP„estored."));

174 ià(
	gs
 == "status") {

175 
h”o
->
efãùs
.
ş—rNeg©iveEfãùs
();

176 
addMsg
(
msg
->
g‘
("Negativeƒffects„emoved."));

178 ià(
	gs
 == "all") {

179 
h”o
->
hp
 = h”o->
maxhp
;

180 
	gh”o
->
	gmp
 = 
h”o
->
maxmp
;

181 
	gh”o
->
	gefãùs
.
ş—rNeg©iveEfãùs
();

182 
addMsg
(
msg
->
g‘
("HP‡nd MP„estored,‚egativeƒffects„emoved"));

186 
	gCam·ignMªag”
::
	$addMsg
(cÚ¡ 
¡ršg
& 
Ãw_msg
) {

187 ià(
log_msg
 != "")†og_msg += " ";

188 
log_msg
 +ğ
Ãw_msg
;

189 
	}
}

191 
	gCam·ignMªag”
::~
	$Cam·ignMªag”
() {

192 
	}
}

	@CampaignManager.h

25 #´agm¨
Úû


26 #iâdeà
CAMPAIGN_MANAGER_H


27 
	#CAMPAIGN_MANAGER_H


	)

29 
	~"I‹mMªag”.h
"

31 
	~<¡ršg
>

33 
şass
 
	gStBlock
;

34 
şass
 
	gM’uI‹mStÜage
;

36 şas 
	cCam·ignMªag”
 {

37 
	mpublic
:

38 
Cam·ignMªag”
();

39 ~
Cam·ignMªag”
();

41 
ş—rAÎ
();

42 
£tAÎ
(
¡d
::
¡ršg
 
s
);

43 
	m¡d
::
¡ršg
 
g‘AÎ
();

44 
boŞ
 
checkStus
(
¡d
::
¡ršg
 
s
);

45 
£tStus
(
¡d
::
¡ršg
 
s
);

46 
un£tStus
(
¡d
::
¡ršg
 
s
);

47 
boŞ
 
checkI‹m
(
™em_id
);

48 
»moveI‹m
(
™em_id
);

49 
»w¬dI‹m
(
I‹mSck
 
i¡ack
);

50 
»w¬dCu¼’cy
(
amouÁ
);

51 
»w¬dXP
(
amouÁ
, 
boŞ
 
show_mes§ge
);

52 
»¡ÜeHPMP
(
¡d
::
¡ršg
 
s
);

53 
addMsg
(cÚ¡ 
¡d
::
¡ršg
& 
msg
);

55 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¡©us
;

56 
	m¡d
::
¡ršg
 
log_msg
;

57 
I‹mSck
 
	mdrİ_¡ack
;

60 
I‹mMªag”
 *
	m™ems
;

61 
M’uI‹mStÜage
 *
	mÿ¼›d_™ems
;

62 *
	mcu¼’cy
;

63 
StBlock
 *
	mh”o
;

65 
boŞ
 
	mque¡_upd©e
;

	@CombatText.cpp

28 
	~"Comb©Text.h
"

29 
	~"FeP¬£r.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"S‘tšgs.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~<io¡»am
>

34 
	~<s¡»am
>

36 
	gComb©Text
::
	$Comb©Text
() {

37 
msg_cŞÜ
[
COMBAT_MESSAGE_GIVEDMG
] = 
fÚt
->
	`g‘CŞÜ
("combat_givedmg");

38 
msg_cŞÜ
[
COMBAT_MESSAGE_TAKEDMG
] = 
fÚt
->
	`g‘CŞÜ
("combat_takedmg");

39 
msg_cŞÜ
[
COMBAT_MESSAGE_CRIT
] = 
fÚt
->
	`g‘CŞÜ
("combat_crit");

40 
msg_cŞÜ
[
COMBAT_MESSAGE_BUFF
] = 
fÚt
->
	`g‘CŞÜ
("combat_buff");

41 
msg_cŞÜ
[
COMBAT_MESSAGE_MISS
] = 
fÚt
->
	`g‘CŞÜ
("combat_miss");

43 
du¿tiÚ
 = 30;

44 
¥“d
 = 1;

47 
FeP¬£r
 
šfe
;

48 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/combat_text.txt"))) {

49 
šfe
.
	`Ãxt
()) {

50 if(
šfe
.
key
 == "duration") {

51 
du¿tiÚ
 = 
	`toIÁ
(
šfe
.
v®
);

52 } if(
šfe
.
key
 == "speed") {

53 
¥“d
 = 
	`toIÁ
(
šfe
.
v®
);

56 
šfe
.
	`şo£
();

57 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/combat_text.txt!\n");

58 
	}
}

60 
	gComb©Text
::
	$£tCam
(
Pošt
 
loÿtiÚ
) {

61 
ÿm
 = 
loÿtiÚ
;

62 
	}
}

64 
	gComb©Text
::
addMes§ge
(
¡d
::
¡ršg
 
mes§ge
, 
Pošt
 
loÿtiÚ
, 
di¥Ïyty³
) {

65 ià(
	gCOMBAT_TEXT
) {

66 
Comb©_Text_I‹m
 *
	gc
 = 
Ãw
 Combat_Text_Item();

67 
Widg‘Lab–
 *
	gÏb–
 = 
Ãw
 WidgetLabel();

68 
	gc
->
	gpos
.
	gx
 = 
loÿtiÚ
.
x
;

69 
	gc
->
	gpos
.
	gy
 = 
loÿtiÚ
.
y
;

70 
	gc
->
	gæßtšg_off£t
 = 
COMBAT_TEXT_STARTING_OFFSET
;

71 
	gc
->
	gÏb–
 = 
Ïb–
;

72 
	gc
->
	g‹xt
 = 
mes§ge
;

73 
	gc
->
	gliã¥ª
 = 
du¿tiÚ
;

74 
	gc
->
	gdi¥Ïyty³
 = 
di¥Ïyty³
;

75 
	gcomb©_‹xt
.
push_back
(*
c
);

76 
d–‘e
 
	gc
;

80 
	gComb©Text
::
	$addMes§ge
(
num
, 
Pošt
 
loÿtiÚ
, 
di¥Ïyty³
) {

81 ià(
COMBAT_TEXT
) {

82 
¡d
::
¡ršg¡»am
 
ss
;

83 
ss
 << 
num
;

84 
	`addMes§ge
(
ss
.
	`¡r
(), 
loÿtiÚ
, 
di¥Ïyty³
);

86 
	}
}

88 
	gComb©Text
::
	$»nd”
() {

89 
¡d
::
veùÜ
<
Comb©_Text_I‹m
>::
™”©Ü
 
™
 = 
comb©_‹xt
.
	`begš
(); iˆ!ğcomb©_‹xt.
	`’d
(); ++it) {

91 
™
->
liã¥ª
--;

92 
™
->
æßtšg_off£t
 +ğ
¥“d
;

94 
Pošt
 
sü_pos
;

95 
sü_pos
 = 
	`m­_to_sü“n
(
™
->
pos
.
x
, it->pos.
y
, 
ÿm
.x, cam.y);

96 
sü_pos
.
y
 -ğ
™
->
æßtšg_off£t
;

98 
™
->
Ïb–
->
	`£t
(
sü_pos
.
x
, sü_pos.
y
, 
JUSTIFY_CENTER
, 
VALIGN_BOTTOM
, it->
‹xt
, 
msg_cŞÜ
[™->
di¥Ïyty³
]);

100 ià(
™
->
liã¥ª
 > 0)

101 
™
->
Ïb–
->
	`»nd”
();

105 
comb©_‹xt
.
	`size
(è&& comb©_‹xt.
	`begš
()->
liã¥ª
 <= 0) {

106 
d–‘e
 
comb©_‹xt
.
	`begš
()->
Ïb–
;

107 
comb©_‹xt
.
	`”a£
(comb©_‹xt.
	`begš
());

109 
	}
}

	@CombatText.h

28 #´agm¨
Úû


29 #iâdeà
COMBAT_TEXT_H


30 
	#COMBAT_TEXT_H


	)

32 
	~"Uts.h
"

33 
	~"Widg‘Lab–.h
"

35 
	~<veùÜ
>

36 
	~<¡ršg
>

38 
	#COMBAT_MESSAGE_GIVEDMG
 0

	)

39 
	#COMBAT_MESSAGE_TAKEDMG
 1

	)

40 
	#COMBAT_MESSAGE_CRIT
 2

	)

41 
	#COMBAT_MESSAGE_MISS
 3

	)

42 
	#COMBAT_MESSAGE_BUFF
 4

	)

47 
	#COMBAT_TEXT_STARTING_OFFSET
 48;

	)

49 
şass
 
	gWidg‘Lab–
;

51 şas 
	cComb©_Text_I‹m
 {

52 
	mpublic
:

53 
Widg‘Lab–
 *
Ïb–
;

54 
	mliã¥ª
;

55 
Pošt
 
	mpos
;

56 
	mæßtšg_off£t
;

57 
	m¡d
::
¡ršg
 
‹xt
;

58 
	mdi¥Ïyty³
;

61 şas 
	cComb©Text
 {

62 
	mpublic
:

63 
Comb©Text
();

65 
»nd”
();

66 
addMes§ge
(
¡d
::
¡ršg
 
mes§ge
, 
Pošt
 
loÿtiÚ
, 
di¥Ïyty³
);

67 
addMes§ge
(
num
, 
Pošt
 
loÿtiÚ
, 
di¥Ïyty³
);

68 
£tCam
(
Pošt
 
loÿtiÚ
);

70 
	m´iv©e
:

71 
Pošt
 
ÿm
;

72 
	m¡d
::
veùÜ
<
Comb©_Text_I‹m
> 
comb©_‹xt
;

74 
SDL_CŞÜ
 
	mmsg_cŞÜ
[5];

75 
	mdu¿tiÚ
;

76 
	m¥“d
;

	@EffectManager.cpp

22 
	~"Anim©iÚ.h
"

23 
	~"Anim©iÚS‘.h
"

24 
	~"EfãùMªag”.h
"

25 
	~"S‘tšgs.h
"

27 
	gEfãùMªag”
::
	$EfãùMªag”
()

28 : 
	`bÚus_»si¡
(
¡d
::
veùÜ
<>(
ELEMENTS
.
	`size
(), 0))

29 , 
	`Œigg”ed_Ùh”s
(
çl£
)

30 , 
	`Œigg”ed_block
(
çl£
)

31 , 
	`Œigg”ed_h™
(
çl£
)

32 , 
	`Œigg”ed_h®fd—th
(
çl£
)

33 , 
	`Œigg”ed_jošcomb©
(
çl£
)

34 , 
	$Œigg”ed_d—th
(
çl£
)

36 
	`ş—rStus
();

37 
	}
}

39 
	gEfãùMªag”
::~
	$EfãùMªag”
() {

40 
i
=0; i<
efãù_li¡
.
	`size
(); i++) {

41 
	`»moveAnim©iÚ
(
i
);

43 
	}
}

45 
	gEfãùMªag”
& EfãùMªag”::
İ”©Ü
ğ(cÚ¡ 
EfãùMªag”
 &
emSourû
) {

46 
efãù_li¡
.
»size
(
emSourû
.efãù_li¡.
size
());

48 
	gi
=0; i<
	gefãù_li¡
.
size
(); i++) {

49 
	gefãù_li¡
[
i
].
	gid
 = 
emSourû
.
efãù_li¡
[i].
id
;

50 
	gefãù_li¡
[
i
].
	gicÚ
 = 
emSourû
.
efãù_li¡
[i].
icÚ
;

51 
	gefãù_li¡
[
i
].
	gticks
 = 
emSourû
.
efãù_li¡
[i].
ticks
;

52 
	gefãù_li¡
[
i
].
	gdu¿tiÚ
 = 
emSourû
.
efãù_li¡
[i].
du¿tiÚ
;

53 
	gefãù_li¡
[
i
].
	gty³
 = 
emSourû
.
efãù_li¡
[i].
ty³
;

54 
	gefãù_li¡
[
i
].
	gmagn™ude
 = 
emSourû
.
efãù_li¡
[i].
magn™ude
;

55 
	gefãù_li¡
[
i
].
	gmagn™ude_max
 = 
emSourû
.
efãù_li¡
[i].
magn™ude_max
;

56 
	gefãù_li¡
[
i
].
	g™em
 = 
emSourû
.
efãù_li¡
[i].
™em
;

57 
	gefãù_li¡
[
i
].
	gŒigg”
 = 
emSourû
.
efãù_li¡
[i].
Œigg”
;

58 
	gefãù_li¡
[
i
].
	g»nd”_above
 = 
emSourû
.
efãù_li¡
[i].
»nd”_above
;

59 
	gefãù_li¡
[
i
].
	g·ssive_id
 = 
emSourû
.
efãù_li¡
[i].
·ssive_id
;

61 ià(
	gemSourû
.
	gefãù_li¡
[
i
].
	gªim©iÚ_Çme
 != "") {

62 
efãù_li¡
[
i
].
ªim©iÚ_Çme
 = 
emSourû
.effect_list[i].animation_name;

63 
	gªim
->
šü—£CouÁ
(
efãù_li¡
[
i
].
ªim©iÚ_Çme
);

64 
	gefãù_li¡
[
i
].
	gªim©iÚ
 = 
lßdAnim©iÚ
(
efãù_li¡
[i].
ªim©iÚ_Çme
);

67 
	gdamage
 = 
emSourû
.
damage
;

68 
	ghpÙ
 = 
emSourû
.
hpÙ
;

69 
	gmpÙ
 = 
emSourû
.
mpÙ
;

70 
	g¥“d
 = 
emSourû
.
¥“d
;

71 
	gimmun™y
 = 
emSourû
.
immun™y
;

72 
	g¡un
 = 
emSourû
.
¡un
;

73 
	gfÜûd_¥“d
 = 
emSourû
.
fÜûd_¥“d
;

74 
	gfÜûd_move
 = 
emSourû
.
fÜûd_move
;

75 
	g»vive
 = 
emSourû
.
»vive
;

76 
	gbÚus_hp
 = 
emSourû
.
bÚus_hp
;

77 
	gbÚus_hp_»g’
 = 
emSourû
.
bÚus_hp_»g’
;

78 
	gbÚus_hp_³rûÁ
 = 
emSourû
.
bÚus_hp_³rûÁ
;

79 
	gbÚus_mp
 = 
emSourû
.
bÚus_mp
;

80 
	gbÚus_mp_»g’
 = 
emSourû
.
bÚus_mp_»g’
;

81 
	gbÚus_mp_³rûÁ
 = 
emSourû
.
bÚus_mp_³rûÁ
;

82 
	gbÚus_accu¿cy
 = 
emSourû
.
bÚus_accu¿cy
;

83 
	gbÚus_avoidªû
 = 
emSourû
.
bÚus_avoidªû
;

84 
	gbÚus_ü™
 = 
emSourû
.
bÚus_ü™
;

85 
	gbÚus_ofãn£
 = 
emSourû
.
bÚus_ofãn£
;

86 
	gbÚus_deãn£
 = 
emSourû
.
bÚus_deãn£
;

87 
	gbÚus_physiÿl
 = 
emSourû
.
bÚus_physiÿl
;

88 
	gbÚus_m’l
 = 
emSourû
.
bÚus_m’l
;

89 
	gbÚus_xp
 = 
emSourû
.
bÚus_xp
;

90 
	gbÚus_cu¼’cy
 = 
emSourû
.
bÚus_cu¼’cy
;

91 
	gbÚus_™em_fšd
 = 
emSourû
.
bÚus_™em_fšd
;

92 
	gbÚus_¡—Éh
 = 
emSourû
.
bÚus_¡—Éh
;

93 
	gbÚus_poi£
 = 
emSourû
.
bÚus_poi£
;

94 
	gŒigg”ed_Ùh”s
 = 
emSourû
.
Œigg”ed_Ùh”s
;

95 
	gŒigg”ed_block
 = 
emSourû
.
Œigg”ed_block
;

96 
	gŒigg”ed_h™
 = 
emSourû
.
Œigg”ed_h™
;

97 
	gŒigg”ed_h®fd—th
 = 
emSourû
.
Œigg”ed_h®fd—th
;

98 
	gŒigg”ed_jošcomb©
 = 
emSourû
.
Œigg”ed_jošcomb©
;

99 
	gŒigg”ed_d—th
 = 
emSourû
.
Œigg”ed_d—th
;

101  *
	gthis
;

104 
	gEfãùMªag”
::
	$ş—rStus
() {

105 
damage
 = 0;

106 
hpÙ
 = 0;

107 
mpÙ
 = 0;

108 
¥“d
 = 100;

109 
immun™y
 = 
çl£
;

110 
¡un
 = 
çl£
;

111 
fÜûd_¥“d
 = 0;

112 
fÜûd_move
 = 
çl£
;

113 
»vive
 = 
çl£
;

115 
bÚus_hp
 = 0;

116 
bÚus_hp_»g’
 = 0;

117 
bÚus_hp_³rûÁ
 = 0;

118 
bÚus_mp
 = 0;

119 
bÚus_mp_»g’
 = 0;

120 
bÚus_mp_³rûÁ
 = 0;

121 
bÚus_accu¿cy
 = 0;

122 
bÚus_avoidªû
 = 0;

123 
bÚus_ü™
 = 0;

124 
bÚus_ofãn£
 = 0;

125 
bÚus_deãn£
 = 0;

126 
bÚus_physiÿl
 = 0;

127 
bÚus_m’l
 = 0;

129 
bÚus_xp
 = 0;

130 
bÚus_cu¼’cy
 = 0;

131 
bÚus_™em_fšd
 = 0;

132 
bÚus_¡—Éh
 = 0;

133 
bÚus_poi£
 = 0;

135 
i
=0; i<
bÚus_»si¡
.
	`size
(); i++) {

136 
bÚus_»si¡
[
i
] = 0;

138 
	}
}

140 
	gEfãùMªag”
::
	$logic
() {

141 
	`ş—rStus
();

143 
i
=0; i<
efãù_li¡
.
	`size
(); i++) {

145 ià(
efãù_li¡
[
i
].
du¿tiÚ
 >= 0) {

146 ià(
efãù_li¡
[
i
].
ty³
 =ğ"damage" &&ƒfãù_li¡[i].
ticks
 % 
MAX_FRAMES_PER_SEC
 =ğ1è
damage
 +ğefãù_li¡[i].
magn™ude
;

147 ià(
efãù_li¡
[
i
].
ty³
 =ğ"hpÙ" &&ƒfãù_li¡[i].
ticks
 % 
MAX_FRAMES_PER_SEC
 =ğ1è
hpÙ
 +ğefãù_li¡[i].
magn™ude
;

148 ià(
efãù_li¡
[
i
].
ty³
 =ğ"mpÙ" &&ƒfãù_li¡[i].
ticks
 % 
MAX_FRAMES_PER_SEC
 =ğ1è
mpÙ
 +ğefãù_li¡[i].
magn™ude
;

149 ià(
efãù_li¡
[
i
].
ty³
 =ğ"¥“d"è
¥“d
 = (efãù_li¡[i].
magn™ude
 * speed) / 100;

150 ià(
efãù_li¡
[
i
].
ty³
 =ğ"immun™y"è
immun™y
 = 
Œue
;

151 ià(
efãù_li¡
[
i
].
ty³
 =ğ"¡un"è
¡un
 = 
Œue
;

152 ià(
efãù_li¡
[
i
].
ty³
 == "forced_move") {

153 
fÜûd_move
 = 
Œue
;

154 
fÜûd_¥“d
 = 
efãù_li¡
[
i
].
magn™ude
;

156 ià(
efãù_li¡
[
i
].
ty³
 =ğ"»vive"è
»vive
 = 
Œue
;

157 ià(
efãù_li¡
[
i
].
ty³
 =ğ"hp"è
bÚus_hp
 +ğefãù_li¡[i].
magn™ude
;

158 ià(
efãù_li¡
[
i
].
ty³
 =ğ"hp_»g’"è
bÚus_hp_»g’
 +ğefãù_li¡[i].
magn™ude
;

159 ià(
efãù_li¡
[
i
].
ty³
 =ğ"hp_³rûÁ"è
bÚus_hp_³rûÁ
 +ğefãù_li¡[i].
magn™ude
;

160 ià(
efãù_li¡
[
i
].
ty³
 =ğ"mp"è
bÚus_mp
 +ğefãù_li¡[i].
magn™ude
;

161 ià(
efãù_li¡
[
i
].
ty³
 =ğ"mp_»g’"è
bÚus_mp_»g’
 +ğefãù_li¡[i].
magn™ude
;

162 ià(
efãù_li¡
[
i
].
ty³
 =ğ"mp_³rûÁ"è
bÚus_mp_³rûÁ
 +ğefãù_li¡[i].
magn™ude
;

163 ià(
efãù_li¡
[
i
].
ty³
 =ğ"accu¿cy"è
bÚus_accu¿cy
 +ğefãù_li¡[i].
magn™ude
;

164 ià(
efãù_li¡
[
i
].
ty³
 =ğ"avoidªû"è
bÚus_avoidªû
 +ğefãù_li¡[i].
magn™ude
;

165 ià(
efãù_li¡
[
i
].
ty³
 =ğ"ü™"è
bÚus_ü™
 +ğefãù_li¡[i].
magn™ude
;

166 ià(
efãù_li¡
[
i
].
ty³
 =ğ"ofãn£"è
bÚus_ofãn£
 +ğefãù_li¡[i].
magn™ude
;

167 ià(
efãù_li¡
[
i
].
ty³
 =ğ"deãn£"è
bÚus_deãn£
 +ğefãù_li¡[i].
magn™ude
;

168 ià(
efãù_li¡
[
i
].
ty³
 =ğ"physiÿl"è
bÚus_physiÿl
 +ğefãù_li¡[i].
magn™ude
;

169 ià(
efãù_li¡
[
i
].
ty³
 =ğ"m’l"è
bÚus_m’l
 +ğefãù_li¡[i].
magn™ude
;

170 ià(
efãù_li¡
[
i
].
ty³
 =ğ"xp"è
bÚus_xp
 +ğefãù_li¡[i].
magn™ude
;

171 ià(
efãù_li¡
[
i
].
ty³
 =ğ"cu¼’cy"è
bÚus_cu¼’cy
 +ğefãù_li¡[i].
magn™ude
;

172 ià(
efãù_li¡
[
i
].
ty³
 =ğ"™em_fšd"è
bÚus_™em_fšd
 +ğefãù_li¡[i].
magn™ude
;

173 ià(
efãù_li¡
[
i
].
ty³
 =ğ"¡—Éh"è
bÚus_¡—Éh
 +ğefãù_li¡[i].
magn™ude
;

174 ià(
efãù_li¡
[
i
].
ty³
 =ğ"poi£"è
bÚus_poi£
 +ğefãù_li¡[i].
magn™ude
;

176 
j
=0; j<
bÚus_»si¡
.
	`size
(); j++) {

177 ià(
efãù_li¡
[
i
].
ty³
 =ğ
ELEMENTS
[
j
].
Çme
 + "_resist")

178 
bÚus_»si¡
[
j
] +ğ
efãù_li¡
[
i
].
magn™ude
;

182 ià(
efãù_li¡
[
i
].
du¿tiÚ
 > 0) {

183 ià(
efãù_li¡
[
i
].
ticks
 > 0)ƒffect_list[i].ticks--;

184 ià(
efãù_li¡
[
i
].
ticks
 == 0) {

185 
	`»moveEfãù
(
i
);

186 
i
--;

192 ià(
efãù_li¡
[
i
].
magn™ude_max
 > 0 &&ƒfãù_li¡[i].
magn™ude
 == 0) {

193 ià(
efãù_li¡
[
i
].
ty³
 == "shield") {

194 
	`»moveEfãù
(
i
);

195 
i
--;

200 ià((
efãù_li¡
[
i
].
ªim©iÚ
 &&ƒfãù_li¡[i].ªim©iÚ->
	`isLa¡F¿me
()) || !effect_list[i].animation) {

201 ià(
efãù_li¡
[
i
].
ty³
 == "heal") {

202 
	`»moveEfãù
(
i
);

203 
i
--;

209 ià(
efãù_li¡
[
i
].
ªim©iÚ
) {

210 ià(!
efãù_li¡
[
i
].
ªim©iÚ
->
	`isCom¶‘ed
())

211 
efãù_li¡
[
i
].
ªim©iÚ
->
	`advªûF¿me
();

214 
	}
}

216 
	gEfãùMªag”
::
addEfãù
(
id
, 
icÚ
, 
du¿tiÚ
, 
magn™ude
, 
¡d
::
¡ršg
 
ty³
, std::¡ršg 
ªim©iÚ
, 
boŞ
 
add™ive
, boŞ 
™em
, 
Œigg”
, boŞ 
»nd”_above
, 
·ssive_id
) {

218 ià(
	gimmun™y
) {

219 ià(
	gty³
 == "damage") ;

220 ià(
	gty³
 =ğ"¥“d" && 
magn™ude
 < 100) ;

221 ià(
	gty³
 == "stun") ;

226 ià(
	gfÜûd_move
) {

227 ià(
	gty³
 == "forced_move") ;

230 
	gi
=0; i<
	gefãù_li¡
.
size
(); i++) {

231 ià(
	gefãù_li¡
[
i
].
	gid
 =ğ
id
) {

232 ià(
Œigg”
 > -1 && 
efãù_li¡
[
i
].trigger ==rigger) ;

233 ià(
	gefãù_li¡
[
i
].
	gdu¿tiÚ
 <ğ
du¿tiÚ
) {

234 
efãù_li¡
[
i
].
ticks
 =ƒfãù_li¡[i].
du¿tiÚ
 = duration;

235 ià(
	gefãù_li¡
[
i
].
	gªim©iÚ
èefãù_li¡[i].ªim©iÚ->
»£t
();

237 ià(
	gadd™ive
) ;

238 ià(
	gefãù_li¡
[
i
].
	gmagn™ude_max
 <ğ
magn™ude
) {

239 
efãù_li¡
[
i
].
magn™ude
 =ƒfãù_li¡[i].
magn™ude_max
 = magnitude;

240 ià(
	gefãù_li¡
[
i
].
	gªim©iÚ
èefãù_li¡[i].ªim©iÚ->
»£t
();

245 ià(
	gty³
 == "immunity") {

246 
ş—rNeg©iveEfãùs
();

250 
Efãù
 
	ge
;

252 
	ge
.
	gid
 = 
id
;

253 
	ge
.
	gicÚ
 = 
icÚ
;

254 
	ge
.
	gticks
 = 
e
.
du¿tiÚ
 = duration;

255 
	ge
.
	gmagn™ude
 = 
e
.
magn™ude_max
 = 
magn™ude
;

256 
	ge
.
	gty³
 = 
ty³
;

257 
	ge
.
	g™em
 = 
™em
;

258 
	ge
.
	gŒigg”
 = 
Œigg”
;

259 
	ge
.
	g»nd”_above
 = 
»nd”_above
;

260 
	ge
.
	g·ssive_id
 = 
·ssive_id
;

262 ià(
	gªim©iÚ
 != "") {

263 
ªim
->
šü—£CouÁ
(
ªim©iÚ
);

264 
	ge
.
	gªim©iÚ
 = 
lßdAnim©iÚ
(
ªim©iÚ
);

265 
	ge
.
	gªim©iÚ_Çme
 = 
ªim©iÚ
;

268 
	gefãù_li¡
.
push_back
(
e
);

271 
	gEfãùMªag”
::
	$»moveEfãù
(
id
) {

272 
	`»moveAnim©iÚ
(
id
);

273 
efãù_li¡
.
	`”a£
Ófãù_li¡.
	`begš
()+
id
);

274 
	}
}

276 
	gEfãùMªag”
::
	$»moveAnim©iÚ
(
id
) {

277 ià(
efãù_li¡
[
id
].
ªim©iÚ
 &&ƒfãù_li¡[id].
ªim©iÚ_Çme
 != "") {

278 
ªim
->
	`deü—£CouÁ
(
efãù_li¡
[
id
].
ªim©iÚ_Çme
);

279 
d–‘e
 
efãù_li¡
[
id
].
ªim©iÚ
;

280 
efãù_li¡
[
id
].
ªim©iÚ
 = 
NULL
;

281 
efãù_li¡
[
id
].
ªim©iÚ_Çme
 = "";

283 
	}
}

285 
	gEfãùMªag”
::
»moveEfãùTy³
(
¡d
::
¡ršg
 
ty³
) {

286 
i
=
efãù_li¡
.
size
(); 
	gi
 > 0; i--) {

287 ià(
	gefãù_li¡
[
i
-1].
	gty³
 =ğ
ty³
è
»moveEfãù
(i-1);

291 
	gEfãùMªag”
::
	$»moveEfãùPassive
(
id
) {

292 
i
=
efãù_li¡
.
	`size
(); i > 0; i--) {

293 ià(
efãù_li¡
[
i
-1].
·ssive_id
 =ğ
id
è
	`»moveEfãù
(i-1);

295 
	}
}

297 
	gEfãùMªag”
::
	$ş—rEfãùs
() {

298 
i
=
efãù_li¡
.
	`size
(); i > 0; i--) {

299 
	`»moveEfãù
(
i
-1);

303 
Œigg”ed_Ùh”s
 = 
Œigg”ed_block
 = 
Œigg”ed_h™
 = 
Œigg”ed_h®fd—th
 = 
Œigg”ed_jošcomb©
 = 
Œigg”ed_d—th
 = 
çl£
;

304 
	}
}

306 
	gEfãùMªag”
::
	$ş—rNeg©iveEfãùs
() {

307 
i
=
efãù_li¡
.
	`size
(); i > 0; i--) {

308 ià(
efãù_li¡
[
i
-1].
ty³
 =ğ"damage"è
	`»moveEfãù
(i-1);

309 ià(
efãù_li¡
[
i
-1].
ty³
 =ğ"¥“d" &&ƒfãù_li¡[i-1].
magn™ude_max
 < 100è
	`»moveEfãù
(i-1);

310 ià(
efãù_li¡
[
i
-1].
ty³
 =ğ"¡un"è
	`»moveEfãù
(i-1);

312 
	}
}

314 
	gEfãùMªag”
::
	$ş—rI‹mEfãùs
() {

315 
i
=
efãù_li¡
.
	`size
(); i > 0; i--) {

316 ià(
efãù_li¡
[
i
-1].
™em
è
	`»moveEfãù
(i-1);

318 
	}
}

320 
	gEfãùMªag”
::
	$ş—rTrigg”Efãùs
(
Œigg”
) {

321 
i
=
efãù_li¡
.
	`size
(); i > 0; i--) {

322 ià(
efãù_li¡
[
i
-1].
Œigg”
 > -1 &&ƒfãù_li¡[i-1].Œigg” =ğŒigg”è
	`»moveEfãù
(i-1);

324 
	}
}

326 
	gEfãùMªag”
::
	$damageSh›lds
(
dmg
) {

327 
ov”_dmg
 = 
dmg
;

329 
i
=0; i<
efãù_li¡
.
	`size
(); i++) {

330 ià(
efãù_li¡
[
i
].
magn™ude_max
 > 0 &&ƒfãù_li¡[i].
ty³
 == "shield") {

331 
efãù_li¡
[
i
].
magn™ude
 -ğ
dmg
;

332 ià(
efãù_li¡
[
i
].
magn™ude
 < 0) {

333 ià(
	`abs
(
efãù_li¡
[
i
].
magn™ude
è< 
ov”_dmg
) over_dmg =‡bs(effect_list[i].magnitude);

334 
efãù_li¡
[
i
].
magn™ude
 = 0;

336 
ov”_dmg
 = 0;

341  
ov”_dmg
;

342 
	}
}

344 
Anim©iÚ
* 
	gEfãùMªag”
::
lßdAnim©iÚ
(
¡d
::
¡ršg
 &
s
) {

345 ià(
s
 != "") {

346 
Anim©iÚS‘
 *
ªim©iÚS‘
 = 
ªim
->
g‘Anim©iÚS‘
(
s
);

347  
	gªim©iÚS‘
->
g‘Anim©iÚ
();

349  
	gNULL
;

	@EffectManager.h

25 #´agm¨
Úû


26 #iâdeà
EFFECT_MANAGER_H


27 
	#EFFECT_MANAGER_H


	)

29 
	~"Anim©iÚ.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"Uts.h
"

33 
	~<¡ršg
>

34 
	~<veùÜ
>

36 
şass
 
	gAv©¬
;

37 
şass
 
	gEÃmyMªag”
;

38 
şass
 
	gHaz¬d
;

39 
şass
 
	gM­CŞlisiÚ
;

40 
şass
 
	gPow”Mªag”
;

42 şas 
	cEfãù
{

43 
	mpublic
:

44 
id
;

45 
	micÚ
;

46 
	mticks
;

47 
	mdu¿tiÚ
;

48 
	m¡d
::
¡ršg
 
ty³
;

49 
	mmagn™ude
;

50 
	mmagn™ude_max
;

51 
	m¡d
::
¡ršg
 
ªim©iÚ_Çme
;

52 
Anim©iÚ
* 
	mªim©iÚ
;

53 
boŞ
 
	m™em
;

54 
	mŒigg”
;

55 
boŞ
 
	m»nd”_above
;

56 
	m·ssive_id
;

58 
	$Efãù
()

59 : 
	`id
(0)

60 , 
	`icÚ
(-1)

61 , 
	`ticks
(0)

62 , 
	`du¿tiÚ
(-1)

63 , 
	`ty³
("")

64 , 
	`magn™ude
(0)

65 , 
	`magn™ude_max
(0)

66 , 
	`ªim©iÚ_Çme
("")

67 , 
	`ªim©iÚ
(
NULL
)

68 , 
	`™em
(
çl£
)

69 , 
	`Œigg”
(-1)

70 , 
	`»nd”_above
(
çl£
)

71 , 
	$·ssive_id
(0)

74 ~
	$Efãù
() {

75 
	}
}

79 şas 
	cEfãùMªag”
 {

80 
	m´iv©e
:

81 
Anim©iÚ
* 
lßdAnim©iÚ
(
¡d
::
¡ršg
 &
s
);

82 
»moveEfãù
(
id
);

83 
»moveAnim©iÚ
(
id
);

85 
	mpublic
:

86 
EfãùMªag”
();

87 ~
EfãùMªag”
();

88 
	mEfãùMªag”
& 
	mİ”©Ü
ğ(cÚ¡ 
EfãùMªag”
 &
emSourû
);

89 
ş—rStus
();

90 
logic
();

91 
addEfãù
(
id
, 
icÚ
, 
du¿tiÚ
, 
magn™ude
, 
¡d
::
¡ršg
 
ty³
, std::¡ršg 
ªim©iÚ
, 
boŞ
 
add™ive
, boŞ 
™em
, 
Œigg”
, boŞ 
»nd”_above
, 
·ssive_id
);

92 
»moveEfãùTy³
(
¡d
::
¡ršg
 
ty³
);

93 
»moveEfãùPassive
(
id
);

94 
ş—rEfãùs
();

95 
ş—rNeg©iveEfãùs
();

96 
ş—rI‹mEfãùs
();

97 
ş—rTrigg”Efãùs
(
Œigg”
);

98 
damageSh›lds
(
dmg
);

100 
	m¡d
::
veùÜ
<
Efãù
> 
efãù_li¡
;

102 
	mdamage
;

103 
	mhpÙ
;

104 
	mmpÙ
;

105 
	m¥“d
;

106 
boŞ
 
	mimmun™y
;

107 
boŞ
 
	m¡un
;

108 
	mfÜûd_¥“d
;

109 
boŞ
 
	mfÜûd_move
;

110 
boŞ
 
	m»vive
;

112 
	mbÚus_hp
;

113 
	mbÚus_hp_»g’
;

114 
	mbÚus_hp_³rûÁ
;

115 
	mbÚus_mp
;

116 
	mbÚus_mp_»g’
;

117 
	mbÚus_mp_³rûÁ
;

118 
	mbÚus_accu¿cy
;

119 
	mbÚus_avoidªû
;

120 
	mbÚus_ü™
;

121 
	mbÚus_ofãn£
;

122 
	mbÚus_deãn£
;

123 
	mbÚus_physiÿl
;

124 
	mbÚus_m’l
;

125 
	mbÚus_xp
;

126 
	mbÚus_cu¼’cy
;

127 
	mbÚus_™em_fšd
;

128 
	mbÚus_¡—Éh
;

129 
	mbÚus_poi£
;

130 
	m¡d
::
veùÜ
<> 
bÚus_»si¡
;

132 
boŞ
 
	mŒigg”ed_Ùh”s
;

133 
boŞ
 
	mŒigg”ed_block
;

134 
boŞ
 
	mŒigg”ed_h™
;

135 
boŞ
 
	mŒigg”ed_h®fd—th
;

136 
boŞ
 
	mŒigg”ed_jošcomb©
;

137 
boŞ
 
	mŒigg”ed_d—th
;

	@Enemy.cpp

23 
	~"Anim©iÚ.h
"

24 
	~"BehaviÜSnd¬d.h
"

25 
	~"Cam·ignMªag”.h
"

26 
	~"EÃmyBehaviÜ.h
"

27 
	~"EÃmy.h
"

28 
	~"Haz¬d.h
"

29 
	~"LoÙMªag”.h
"

30 
	~"M­R’d””.h
"

31 
	~"Pow”Mªag”.h
"

32 
	~"Sh¬edResourûs.h
"

33 
	~"UtsM©h.h
"

35 
	~<s¡»am
>

37 
usšg
 
Çme¥aû
 
	g¡d
;

40 
	gEÃmy
::
	$EÃmy
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
è: 
	$EÁ™y
(
_m­
) {

41 
pow”s
 = 
_pow”s
;

43 
¡©s
.
cur_¡©e
 = 
ENEMY_STANCE
;

44 
¡©s
.
tuº_ticks
 = 
MAX_FRAMES_PER_SEC
;

46 
¡©s
.
coŞdown
 = 0;

47 
¡©s
.
Ï¡_£’
.
x
 = -1;

48 
¡©s
.
Ï¡_£’
.
y
 = -1;

49 
¡©s
.
š_comb©
 = 
çl£
;

50 
¡©s
.
još_comb©
 = 
çl£
;

52 
haz
 = 
NULL
;

54 
sfx_phys
 = 
çl£
;

55 
sfx_m’t
 = 
çl£
;

56 
sfx_h™
 = 
çl£
;

57 
sfx_d›
 = 
çl£
;

58 
sfx_ü™d›
 = 
çl£
;

59 
»w¬d_xp
 = 
çl£
;

60 
š¡ªt_pow”
 = 
çl£
;

62 
eb
 = 
NULL
;

63 
	}
}

65 
	gEÃmy
::
	$EÃmy
(cÚ¡ 
EÃmy
& 
e
)

66 : 
	`EÁ™y
(
e
)

67 , 
	`ty³
(
e
.
ty³
)

68 , 
	`haz
(
NULL
)

69 , 
	`eb
(
Ãw
 
	`BehaviÜSnd¬d
(
this
))

70 , 
	`pow”s
(
e
.
pow”s
)

71 , 
	`sfx_phys
(
e
.
sfx_phys
)

72 , 
	`sfx_m’t
(
e
.
sfx_m’t
)

73 , 
	`sfx_h™
(
e
.
sfx_h™
)

74 , 
	`sfx_d›
(
e
.
sfx_d›
)

75 , 
	`sfx_ü™d›
(
e
.
sfx_ü™d›
)

76 , 
	`»w¬d_xp
(
e
.
»w¬d_xp
)

77 , 
	$š¡ªt_pow”
(
e
.
š¡ªt_pow”
)

79 
	`as£¹
(
e
.
haz
 =ğ
NULL
);

80 
	}
}

85 
	gEÃmy
::
	$çûNextBe¡
(
m­x
, 
m­y
) {

86 
dx
 = 
	`abs
(
m­x
 - 
¡©s
.
pos
.
x
);

87 
dy
 = 
	`abs
(
m­y
 - 
¡©s
.
pos
.
y
);

88 
¡©s
.
dœeùiÚ
) {

90 ià(
dy
 > 
dx
)  7;

93 ià(
m­y
 > 
¡©s
.
pos
.
y
)  0;

96 ià(
dx
 > 
dy
)  1;

99 ià(
m­x
 < 
¡©s
.
pos
.
x
)  2;

102 ià(
dy
 > 
dx
)  3;

105 ià(
m­y
 < 
¡©s
.
pos
.
y
)  4;

108 ià(
dx
 > 
dy
)  5;

111 ià(
m­x
 > 
¡©s
.
pos
.
x
)  6;

115 
	}
}

120 
	gEÃmy
::
	$g‘Di¡ªû
(
Pošt
 
de¡
) {

121 
dx
 = 
de¡
.
x
 - 
¡©s
.
pos
.x;

122 
dy
 = 
de¡
.
y
 - 
¡©s
.
pos
.y;

123 
¡•1
 = ()
dx
 * ()dx + ()
dy
 * ()dy;

124 
¡•2
 = 
	`sq¹
(
¡•1
);

125  (
¡•2
);

126 
	}
}

128 
	gEÃmy
::
	$ÃwS‹
(
¡©e
) {

130 
¡©s
.
cur_¡©e
 = 
¡©e
;

131 
	}
}

139 
	gEÃmy
::
	$logic
() {

141 
eb
->
	`logic
();

143 
	}
}

151 
boŞ
 
	gEÃmy
::
	$keH™
(cÚ¡ 
Haz¬d
 &
h
) {

152 ià(
¡©s
.
cur_¡©e
 !ğ
ENEMY_DEAD
 && sts.cur_¡©!ğ
ENEMY_CRITDEAD
)

154 ià(!
¡©s
.
š_comb©
) {

155 
¡©s
.
još_comb©
 = 
Œue
;

156 
¡©s
.
š_comb©
 = 
Œue
;

157 
¡©s
.
Ï¡_£’
.
x
 = sts.
h”o_pos
.x;

158 
¡©s
.
Ï¡_£’
.
y
 = sts.
h”o_pos
.y;

159 
pow”s
->
	`aùiv©e
(
¡©s
.
pow”_šdex
[
BEACON
], &¡©s, sts.
pos
);

163 ià(
pow”s
->pow”s[
h
.
pow”_šdex
].
b—cÚ
è 
çl£
;

166 
Comb©Text
 *
comb©_‹xt
 = 
comb
;

169 
avoidªû
 = 
¡©s
.avoidance;

170 
	`şampCe
(
avoidªû
, 
MAX_AVOIDANCE
);

171 ià(
	`³rûÁChªû
(
avoidªû
 - 
h
.
accu¿cy
 - 25)) {

172 
comb©_‹xt
->
	`addMes§ge
(
msg
->
	`g‘
("miss"), 
¡©s
.
pos
, 
COMBAT_MESSAGE_MISS
);

173  
çl£
;

177 
dmg
 = 
	`¿ndB‘w“n
(
h
.
dmg_mš
, h.
dmg_max
);

181 ià(
h
.
Œa™_–em’l
 >ğ0 && (h.Œa™_–em’lè< 
¡©s
.
vuÊ”abË
.
	`size
()) {

182 
i
 = 
h
.
Œa™_–em’l
;

183 
vuÊ”abË
 = 
¡©s
.vuÊ”abË[
i
];

184 ià(
¡©s
.
vuÊ”abË
[
i
] > 
MAX_RESIST
 && stats.vulnerable[i] < 100)

185 
vuÊ”abË
 = 
MAX_RESIST
;

186 
dmg
 = (dmg * 
vuÊ”abË
) / 100;

189 ià(!
h
.
Œa™_¬mÜ_³ÃŒ©iÚ
) {

191 
absÜ±iÚ
 = 
	`¿ndB‘w“n
(
¡©s
.
absÜb_mš
, sts.
absÜb_max
);

193 ià(
absÜ±iÚ
 > 0 && 
dmg
 > 0) {

195 ià((
absÜ±iÚ
*100)/
dmg
 > 
MAX_ABSORB
 && !
¡©s
.
efãùs
.
Œigg”ed_block
)

196 
absÜ±iÚ
 = (
dmg
 * 
MAX_ABSORB
) /100;

198 ià(
absÜ±iÚ
 == 0)‡bsorption = 1;

201 
dmg
 = dmg - 
absÜ±iÚ
;

202 ià(
dmg
 <= 0) {

203 
dmg
 = 0;

204 ià(
h
.
Œa™_–em’l
 < 0) {

205 ià(
MAX_ABSORB
 < 100è
dmg
 = 1;

207 ià(
MAX_RESIST
 < 100è
dmg
 = 1;

213 
Œue_ü™_chªû
 = 
h
.
ü™_chªû
;

214 ià(
¡©s
.
efãùs
.
¡un
 || sts.efãùs.
¥“d
 < 100)

215 
Œue_ü™_chªû
 +ğ
h
.
Œa™_ü™s_im·œed
;

217 
boŞ
 
ü™
 = 
	`³rûÁChªû
(
Œue_ü™_chªû
);

218 ià(
ü™
) {

219 
dmg
 = dmg + 
h
.
dmg_max
;

220 
m­
->
shaky_ÿm_ticks
 = 
MAX_FRAMES_PER_SEC
/2;

223 
comb©_‹xt
->
	`addMes§ge
(
dmg
, 
¡©s
.
pos
, 
COMBAT_MESSAGE_CRIT
);

227 
comb©_‹xt
->
	`addMes§ge
(
dmg
, 
¡©s
.
pos
, 
COMBAT_MESSAGE_GIVEDMG
);

231 
¡©s
.
	`keDamage
(
dmg
);

234 ià(
dmg
 > 0è
¡©s
.
efãùs
.
	`»moveEfãùTy³
("stun");

237 ià(
¡©s
.
hp
 > 0) {

239 ià(
h
.
mod_pow”
 > 0è
pow”s
->
	`efãù
(&
¡©s
, h.mod_power);

240 
pow”s
->
	`efãù
(&
¡©s
, 
h
.
pow”_šdex
);

242 ià(
¡©s
.
efãùs
.
fÜûd_move
) {

243 
th‘a
 = 
pow”s
->
	`ÿlcTh‘a
(
¡©s
.
h”o_pos
.
x
, sts.h”o_pos.
y
, sts.
pos
.x, stats.pos.y);

244 
¡©s
.
fÜûd_¥“d
.
x
 = 
¡©ic_ÿ¡
<>(
	`û
(¡©s.
efãùs
.fÜûd_¥“d * 
	`cos
(
th‘a
)));

245 
¡©s
.
fÜûd_¥“d
.
y
 = 
¡©ic_ÿ¡
<>(
	`û
(¡©s.
efãùs
.fÜûd_¥“d * 
	`sš
(
th‘a
)));

249 ià(
h
.
hp_¡—l
 != 0) {

250 
h—l_amt
 = (
dmg
 * 
h
.
hp_¡—l
) / 100;

251 ià(
h—l_amt
 =ğ0 && 
dmg
 > 0) heal_amt = 1;

252 
comb©_‹xt
->
	`addMes§ge
(
msg
->
	`g‘
("+%d HP",
h—l_amt
), 
h
.
¤c_¡©s
->
pos
, 
COMBAT_MESSAGE_BUFF
);

253 
h
.
¤c_¡©s
->
hp
 +ğ
h—l_amt
;

254 
	`şampCe
(
h
.
¤c_¡©s
->
hp
, h.¤c_¡©s->
maxhp
);

256 ià(
h
.
mp_¡—l
 != 0) {

257 
h—l_amt
 = (
dmg
 * 
h
.
mp_¡—l
) / 100;

258 ià(
h—l_amt
 =ğ0 && 
dmg
 > 0) heal_amt = 1;

259 
comb©_‹xt
->
	`addMes§ge
(
msg
->
	`g‘
("+%d MP",
h—l_amt
), 
h
.
¤c_¡©s
->
pos
, 
COMBAT_MESSAGE_BUFF
);

260 
h
.
¤c_¡©s
->
mp
 +ğ
h—l_amt
;

261 
	`şampCe
(
h
.
¤c_¡©s
->
mp
, h.¤c_¡©s->
maxmp
);

265 ià(
h
.
po¡_pow”
 > 0 && 
dmg
 > 0) {

266 
pow”s
->
	`aùiv©e
(
h
.
po¡_pow”
, h.
¤c_¡©s
, 
¡©s
.
pos
);

270 ià(
dmg
 > 0) {

272 ià(
¡©s
.
hp
 <ğ0 && 
ü™
) {

273 
	`doRew¬ds
();

274 
¡©s
.
efãùs
.
Œigg”ed_d—th
 = 
Œue
;

275 
¡©s
.
cur_¡©e
 = 
ENEMY_CRITDEAD
;

276 
m­
->
cŞlid”
.
	`unblock
(
¡©s
.
pos
.
x
,¡©s.pos.
y
);

279 ià(
¡©s
.
hp
 <= 0) {

280 
	`doRew¬ds
();

281 
¡©s
.
efãùs
.
Œigg”ed_d—th
 = 
Œue
;

282 
¡©s
.
cur_¡©e
 = 
ENEMY_DEAD
;

283 
m­
->
cŞlid”
.
	`unblock
(
¡©s
.
pos
.
x
,¡©s.pos.
y
);

287 ià(!
¡©s
.
efãùs
.
¡un
 && !
	`³rûÁChªû
(¡©s.
poi£
)) {

288 
sfx_h™
 = 
Œue
;

290 if(
¡©s
.
coŞdown_h™_ticks
 == 0) {

291 
¡©s
.
cur_¡©e
 = 
ENEMY_HIT
;

292 
¡©s
.
coŞdown_h™_ticks
 = sts.
coŞdown_h™
;

295 ià(
	`³rûÁChªû
(
¡©s
.
pow”_chªû
[
ON_HIT
])) {

296 
pow”s
->
	`aùiv©e
(
¡©s
.
pow”_šdex
[
ON_HIT
], &¡©s, sts.
pos
);

301 
sfx_h™
 = 
Œue
;

306  
Œue
;

308  
çl£
;

309 
	}
}

314 
	gEÃmy
::
	$doRew¬ds
() {

315 
»w¬d_xp
 = 
Œue
;

318 ià(
¡©s
.
que¡_loÙ_»quœes
 != "") {

322 ià(!(
m­
->
ÿmp
->
	`checkStus
(
¡©s
.
que¡_loÙ_»quœes
è&& !m­->ÿmp->checkStus(¡©s.
que¡_loÙ_nÙ
))) {

323 
¡©s
.
que¡_loÙ_id
 = 0;

329 ià(
¡©s
.
fœ¡_deã©_loÙ
 > 0) {

330 ià(!
m­
->
ÿmp
->
	`checkStus
(
¡©s
.
deã©_¡©us
)) {

331 
¡©s
.
que¡_loÙ_id
 = sts.
fœ¡_deã©_loÙ
;

336 ià(
¡©s
.
deã©_¡©us
 != "") {

337 
m­
->
ÿmp
->
	`£tStus
(
¡©s
.
deã©_¡©us
);

340 
LoÙMªag”
::
	`g‘In¡ªû
()->
	`addEÃmyLoÙ
(
this
);

341 
	}
}

348 
R’d”abË
 
	gEÃmy
::
	$g‘R’d”
() {

349 
R’d”abË
 
r
 = 
aùiveAnim©iÚ
->
	`g‘Cu¼’tF¿me
(
¡©s
.
dœeùiÚ
);

350 
r
.
m­_pos
.
x
 = 
¡©s
.
pos
.x;

351 
r
.
m­_pos
.
y
 = 
¡©s
.
pos
.y;

352  
r
;

353 
	}
}

355 
	gEÃmy
::~
	$EÃmy
() {

356 
d–‘e
 
haz
;

357 
d–‘e
 
eb
;

358 
	}
}

	@Enemy.h

24 #´agm¨
Úû


25 #iâdeà
ENEMY_H


26 
	#ENEMY_H


	)

29 
	~<m©h.h
>

30 
	~<¡ršg
>

31 
	~<queue
>

32 
	~<SDL.h
>

33 
	~<SDL_image.h
>

34 
	~<SDL_mix”.h
>

36 
	~"EÁ™y.h
"

37 
	~"Uts.h
"

39 
şass
 
	gEÃmyBehaviÜ
;

40 
şass
 
	gHaz¬d
;

41 
şass
 
	gPow”Mªag”
;

42 
şass
 
	gM­R’d””
;

44 şas 
	cEÃmy
 : 
public
 
EÁ™y
 {

46 
public
:

47 
EÃmy
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
);

48 
EÃmy
(cÚ¡ EÃmy& 
e
);

49 ~
EÃmy
();

50 
boŞ
 
lšeOfSight
();

51 
logic
();

52 
çûNextBe¡
(
m­x
, 
m­y
);

53 
ÃwS‹
(
¡©e
);

54 
g‘Di¡ªû
(
Pošt
 
de¡
);

55 
boŞ
 
keH™
(cÚ¡ 
Haz¬d
 &
h
);

56 
doRew¬ds
();

58 
	m¡d
::
¡ršg
 
ty³
;

60 
vœtu®
 
R’d”abË
 
g‘R’d”
();

62 
Haz¬d
 *
	mhaz
;

63 
EÃmyBehaviÜ
 *
	meb
;

64 
Pow”Mªag”
 *
	mpow”s
;

67 
boŞ
 
	msfx_phys
;

68 
boŞ
 
	msfx_m’t
;

70 
boŞ
 
	msfx_h™
;

71 
boŞ
 
	msfx_d›
;

72 
boŞ
 
	msfx_ü™d›
;

75 
boŞ
 
	m»w¬d_xp
;

76 
boŞ
 
	mš¡ªt_pow”
;

	@EnemyBehavior.cpp

26 
	~"EÃmyBehaviÜ.h
"

28 
	gEÃmyBehaviÜ
::
	$EÃmyBehaviÜ
(
EÃmy
 *
_e
) {

29 
e
 = 
_e
;

30 
	}
}

32 
	gEÃmyBehaviÜ
::
	$logic
() {

34 
	}
}

36 
EÃmyBehaviÜ
::~
	$EÃmyBehaviÜ
() {

38 
	}
}

	@EnemyBehavior.h

27 #´agm¨
Úû


28 #iâdeà
ENEMY_BEHAVIOR_H


29 
	#ENEMY_BEHAVIOR_H


	)

32 
şass
 
	gEÃmy
;

34 şas 
	cEÃmyBehaviÜ
 {

35 
	m´Ùeùed
:

36 
EÃmy
 *
e
;

37 
	mpublic
:

38 
EÃmyBehaviÜ
(
EÃmy
 *
_e
);

39 
	mvœtu®
 ~
EÃmyBehaviÜ
();

40 
vœtu®
 
logic
();

	@EnemyGroupManager.cpp

19 
	~"EÃmyGroupMªag”.h
"

20 
	~"FeP¬£r.h
"

21 
	~"S‘tšgs.h
"

22 
	~"Sh¬edResourûs.h
"

23 
	~"UtsFeSy¡em.h
"

25 
usšg
 
Çme¥aû
 
	g¡d
;

28 
EÃmyGroupMªag”
* 
	gEÃmyGroupMªag”
::
_š¡ªû
 = 0;

31 
	gEÃmyGroupMªag”
::
	$EÃmyGroupMªag”
() {

32 
	`g’”©e
();

33 
	}
}

35 
	gEÃmyGroupMªag”
::~
	$EÃmyGroupMªag”
() {

36 
	}
}

38 
EÃmyGroupMªag”
& EÃmyGroupMªag”::
	$š¡ªû
() {

39 ià(
_š¡ªû
 == 0) {

40 
_š¡ªû
 = 
Ãw
 
EÃmyGroupMªag”
;

42  *(
_š¡ªû
);

43 
	}
}

45 
	gEÃmyGroupMªag”
::
	$g’”©e
() {

48 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

50 
¡ršg
 
dœ
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/enemies";

52 
veùÜ
<
¡ršg
> 
fes
;

53 
	`g‘FeLi¡
(
dœ
, ".txt", 
fes
);

54 
size_t
 
j
 = 0; j < 
fes
.
	`size
(); ++j) {

55 
	`·r£EÃmyFeAndStÜe
(
fes
[
j
]);

58 
	}
}

60 
	gEÃmyGroupMªag”
::
	$·r£EÃmyFeAndStÜe
(cÚ¡ 
¡ršg
& 
f’ame
) {

61 
FeP¬£r
 
šfe
;

62 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’em›s/" + 
f’ame
))) {

63 
EÃmy_Lev–
 
Ãw_’emy
;

64 
Ãw_’emy
.
ty³
 = 
f’ame
.
	`sub¡r
(0, f’ame.
	`Ëngth
()-4);

65 
šfe
.
	`Ãxt
()) {

66 ià(
šfe
.
key
 == "level") {

67 
Ãw_’emy
.
Ëv–
 = 
	`©oi
(
šfe
.
v®
.
	`c_¡r
());

69 ià(
šfe
.
key
 == "rarity") {

70 
Ãw_’emy
.
¿r™y
 = 
šfe
.
v®
.
	`c_¡r
();

72 ià(
šfe
.
key
 == "categories") {

73 
¡ršg
 
ÿt
;

74  (
ÿt
 = 
šfe
.
	`ÃxtV®ue
()) != "") {

75 
_ÿ‹gÜ›s
[
ÿt
].
	`push_back
(
Ãw_’emy
);

79 
šfe
.
	`şo£
();

80 } 
	`årštf
(
¡d”r
, "UÇbËØİ’ƒÃm›s/%s!\n", 
f’ame
.
	`c_¡r
());

81 
	}
}

83 
EÃmy_Lev–
 
	gEÃmyGroupMªag”
::
g‘RªdomEÃmy
(cÚ¡ 
¡d
::
¡ršg
& 
ÿ‹gÜy
, 
mšËv–
, 
maxËv–
) const {

84 
	gveùÜ
<
	gEÃmy_Lev–
> 
	g’emyC©egÜy
;

85 
	gm­
<
	g¡ršg
, 
	gveùÜ
<
	gEÃmy_Lev–
> >::
cÚ¡_™”©Ü
 
™
 = 
_ÿ‹gÜ›s
.
fšd
(
ÿ‹gÜy
);

86 ià(
	g™
 !ğ
_ÿ‹gÜ›s
.
’d
()) {

87 
’emyC©egÜy
 = 
™
->
£cÚd
;

89  
EÃmy_Lev–
();

93 
	gveùÜ
<
	gEÃmy_Lev–
> 
	g’emyCªdid©es
;

94 
size_t
 
	gi
 = 0; i < 
	g’emyC©egÜy
.
size
(); ++i) {

95 
EÃmy_Lev–
 
	gÃw_’emy
 = 
’emyC©egÜy
[
i
];

96 ià((
	gÃw_’emy
.
	gËv–
 >ğ
mšËv–
è&& (
Ãw_’emy
.
Ëv–
 <ğ
maxËv–
)) {

99 
add_times
 = 0;

100 ià(
	gÃw_’emy
.
	g¿r™y
 == "common") {

101 
add_times
 = 6;

102 } ià(
	gÃw_’emy
.
	g¿r™y
 == "uncommon") {

103 
add_times
 = 3;

104 } ià(
	gÃw_’emy
.
	g¿r™y
 == "rare") {

105 
add_times
 = 1;

107 
årštf
(
¡d”r
,

109 
Ãw_’emy
.
ty³
.
c_¡r
(),‚ew_’emy.
¿r™y
.c_str());

113 
	gj
 = 0; j < 
	gadd_times
; ++j) {

114 
	g’emyCªdid©es
.
push_back
(
Ãw_’emy
);

119 ià(
	g’emyCªdid©es
.
em±y
()) {

120  
EÃmy_Lev–
();

122  
	g’emyCªdid©es
[
¿nd
(è% 
’emyCªdid©es
.
size
()];

	@EnemyGroupManager.h

19 #´agm¨
Úû


20 #iâdeà
ENEMYGROUPMANAGER_H


21 
	#ENEMYGROUPMANAGER_H


	)

23 
	~<f¡»am
>

24 
	~<¡ršg
>

25 
	~<m­
>

26 
	~<veùÜ
>

27 
	~<io¡»am
>

30 şas 
	cEÃmy_Lev–
 {

31 
	mpublic
:

32 
¡d
::
¡ršg
 
ty³
;

33 
	mËv–
;

34 
	m¡d
::
¡ršg
 
¿r™y
;

36 
	$EÃmy_Lev–
(è: 
	`Ëv–
(0), 
	`¿r™y
("common") {}

37 
	}
};

46 şas 
	cEÃmyGroupMªag”
 {

47 
	mpublic
:

49 
EÃmyGroupMªag”
& 
š¡ªû
();

59 
EÃmy_Lev–
 
g‘RªdomEÃmy
(cÚ¡ 
¡d
::
¡ršg
& 
ÿ‹gÜy
, 
mšËv–
, 
maxËv–
) const;

61 
	m´iv©e
:

63 
EÃmyGroupMªag”
* 
_š¡ªû
;

67 
	m¡d
::
m­
 <
¡d
::
¡ršg
, std::
veùÜ
<
EÃmy_Lev–
> > 
_ÿ‹gÜ›s
;

71 
EÃmyGroupMªag”
();

73 ~
EÃmyGroupMªag”
();

77 
g’”©e
();

80 
·r£EÃmyFeAndStÜe
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

	@EnemyManager.cpp

20 
	~"EÃmyMªag”.h
"

22 
	~"Anim©iÚMªag”.h
"

23 
	~"Anim©iÚS‘.h
"

24 
	~"Anim©iÚ.h
"

25 
	~"Sh¬edResourûs.h
"

26 
	~"EÃmyBehaviÜ.h
"

27 
	~"BehaviÜSnd¬d.h
"

29 
	~<io¡»am
>

30 
	~<®gÜ™hm
>

32 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gEÃmyMªag”
::
	$EÃmyMªag”
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
)

35 : 
	`m­
(
_m­
)

36 , 
	`pow”s
(
_pow”s
)

37 , 
	`’em›s
()

38 , 
	`h”o_®ive
(
Œue
)

39 , 
	$h”o_¡—Éh
(0)

41 
h”o_pos
.
x
 = h”o_pos.
y
 = -1;

42 
	`hªdËNewM­
();

43 
	}
}

45 
	gEÃmyMªag”
::
	$lßdSounds
(cÚ¡ 
¡ršg
& 
ty³_id
) {

48 ià(
	`fšd
(
sfx_´efixes
.
	`begš
(), sfx_´efixes.
	`’d
(), 
ty³_id
) != sfx_prefixes.end())

51 ià(
ty³_id
 != "none") {

52 
sound_phys
.
	`push_back
(
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_phys.ogg", "EnemyManager…hysical‡ttack sound"));

53 
sound_m’t
.
	`push_back
(
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_ment.ogg", "EnemyManager mental‡ttack sound"));

54 
sound_h™
.
	`push_back
(
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_hit.ogg", "EnemyManager…hysical hit sound"));

55 
sound_d›
.
	`push_back
(
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_die.ogg", "EnemyManager die sound"));

56 
sound_ü™d›
.
	`push_back
(
¢d
->
	`lßd
("soundfx/’em›s/" + 
ty³_id
 + "_critdie.ogg", "EnemyManager critdeath sound"));

58 
sound_phys
.
	`push_back
(0);

59 
sound_m’t
.
	`push_back
(0);

60 
sound_h™
.
	`push_back
(0);

61 
sound_d›
.
	`push_back
(0);

62 
sound_ü™d›
.
	`push_back
(0);

65 
sfx_´efixes
.
	`push_back
(
ty³_id
);

66 
	}
}

68 
	gEÃmyMªag”
::
	$lßdAnim©iÚs
(
EÃmy
 *
e
) {

69 
¡ršg
 
ªim©iÚ¢ame
 = "ªim©iÚs/’em›s/"+
e
->
¡©s
.
ªim©iÚs
 + ".txt";

70 
ªim
->
	`šü—£CouÁ
(
ªim©iÚ¢ame
);

71 
e
->
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
(
ªim©iÚ¢ame
);

72 
e
->
aùiveAnim©iÚ
 =ƒ->
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

73 
	}
}

75 
EÃmy
 *
	gEÃmyMªag”
::
	$g‘EÃmyPrÙÙy³
(cÚ¡ 
¡ršg
& 
ty³_id
) {

76 
size_t
 
i
 = 0; i < 
´ÙÙy³s
.
	`size
(); i++)

77 ià(
´ÙÙy³s
[
i
].
ty³
 =ğ
ty³_id
) {

78 
¡ršg
 
ªim©iÚ¢ame
 = "ªim©iÚs/’em›s/"+
´ÙÙy³s
[
i
].
¡©s
.
ªim©iÚs
 + ".txt";

79 
ªim
->
	`šü—£CouÁ
(
ªim©iÚ¢ame
);

80  
Ãw
 
	`EÃmy
(
´ÙÙy³s
[
i
]);

83 
EÃmy
 
e
 = 
	`EÃmy
(
pow”s
, 
m­
);

85 
e
.
eb
 = 
Ãw
 
	`BehaviÜSnd¬d
(&e);

86 
e
.
¡©s
.
	`lßd
("’em›s/" + 
ty³_id
 + ".txt");

87 
e
.
ty³
 = 
ty³_id
;

89 ià(
e
.
¡©s
.
ªim©iÚs
 == "")

90 
û¼
 << "W¬nšg:‚Øªim©iÚ f¥ecif›d fÜƒÁ™y: " << 
ty³_id
 << 
’dl
;

91 ià(
e
.
¡©s
.
sfx_´efix
 == "")

92 
û¼
 << "W¬nšg:‚Øsfx_´efix s³cif›d fÜƒÁ™y: " << 
ty³_id
 << 
’dl
;

94 
	`lßdAnim©iÚs
(&
e
);

95 
	`lßdSounds
(
e
.
¡©s
.
sfx_´efix
);

97 
´ÙÙy³s
.
	`push_back
(
e
);

99  
Ãw
 
	`EÃmy
(
´ÙÙy³s
.
	`back
());

100 
	}
}

106 
	gEÃmyMªag”
::
	$hªdËNewM­
 () {

108 
M­_EÃmy
 
me
;

111 
i
=0; i < 
’em›s
.
	`size
(); i++) {

112 
ªim
->
	`deü—£CouÁ
(
’em›s
[
i
]->
ªim©iÚS‘
->
	`g‘Name
());

113 
d–‘e
 
’em›s
[
i
];

115 
’em›s
.
	`ş—r
();

117 
j
=0; j<
sound_phys
.
	`size
(); j++) {

118 
¢d
->
	`uÆßd
(
sound_phys
[
j
]);

119 
¢d
->
	`uÆßd
(
sound_m’t
[
j
]);

120 
¢d
->
	`uÆßd
(
sound_h™
[
j
]);

121 
¢d
->
	`uÆßd
(
sound_d›
[
j
]);

122 
¢d
->
	`uÆßd
(
sound_ü™d›
[
j
]);

124 
sfx_´efixes
.
	`ş—r
();

125 
sound_phys
.
	`ş—r
();

126 
sound_m’t
.
	`ş—r
();

127 
sound_h™
.
	`ş—r
();

128 
sound_d›
.
	`ş—r
();

129 
sound_ü™d›
.
	`ş—r
();

131 
´ÙÙy³s
.
	`ş—r
();

134 !
m­
->
’em›s
.
	`em±y
()) {

135 
me
 = 
m­
->
’em›s
.
	`äÚt
();

136 
m­
->
’em›s
.
	`pİ
();

138 
EÃmy
 *
e
 = 
	`g‘EÃmyPrÙÙy³
(
me
.
ty³
);

140 
e
->
¡©s
.
waypošts
 = 
me
.waypoints;

141 
e
->
¡©s
.
pos
.
x
 = 
me
.pos.x;

142 
e
->
¡©s
.
pos
.
y
 = 
me
.pos.y;

143 
e
->
¡©s
.
dœeùiÚ
 = 
me
.direction;

144 
e
->
¡©s
.
wªd”
 = 
me
.wander;

145 
e
->
¡©s
.
wªd”_¬—
 = 
me
.wander_area;

147 
’em›s
.
	`push_back
(
e
);

149 
m­
->
cŞlid”
.
	`block
(
me
.
pos
.
x
, me.pos.
y
);

151 
ªim
->
	`ş—nUp
();

152 
	}
}

158 
	gEÃmyMªag”
::
	$hªdËS·wn
() {

160 
M­_EÃmy
 
e¥awn
;

162 !
pow”s
->
’em›s
.
	`em±y
()) {

163 
e¥awn
 = 
pow”s
->
’em›s
.
	`äÚt
();

164 
pow”s
->
’em›s
.
	`pİ
();

166 
EÃmy
 *
e
 = 
Ãw
 
	`EÃmy
(
pow”s
, 
m­
);

168 
e
->
eb
 = 
Ãw
 
	`BehaviÜSnd¬d
(e);

170 
e
->
¡©s
.
pos
.
x
 = 
e¥awn
.pos.x;

171 
e
->
¡©s
.
pos
.
y
 = 
e¥awn
.pos.y;

172 
e
->
¡©s
.
dœeùiÚ
 = 
e¥awn
.direction;

173 
e
->
¡©s
.
	`lßd
("’em›s/" + 
e¥awn
.
ty³
 + ".txt");

174 ià(
e
->
¡©s
.
ªim©iÚs
 != "") {

176 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/’em›s/"+
e
->
¡©s
.
ªim©iÚs
 + ".txt";

177 
ªim
->
	`šü—£CouÁ
(
ªim©iÚÇme
);

178 
e
->
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
(
ªim©iÚÇme
);

179 ià(
e
->
ªim©iÚS‘
)

180 
e
->
aùiveAnim©iÚ
 =ƒ->
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

182 
cout
 << "W¬nšg:‡nim©iÚ fcould‚Ù blßded fÜ " << 
e¥awn
.
ty³
 << 
’dl
;

185 
cout
 << "W¬nšg:‚Øªim©iÚ f¥ecif›d fÜƒÁ™y: " << 
e¥awn
.
ty³
 << 
’dl
;

187 
	`lßdSounds
(
e
->
¡©s
.
sfx_´efix
);

190 
e
->
¡©s
.
cur_¡©e
 = 
ENEMY_SPAWN
;

191 
’em›s
.
	`push_back
(
e
);

193 
m­
->
cŞlid”
.
	`block
(
e¥awn
.
pos
.
x
,ƒ¥awn.pos.
y
);

195 
	}
}

200 
	gEÃmyMªag”
::
	$logic
() {

202 
	`hªdËS·wn
();

204 
i
=0; i < 
’em›s
.
	`size
(); i++) {

209 ià(
AUDIO
) {

210 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
	`fšd
 (
sfx_´efixes
.
	`begš
(), sfx_´efixes.
	`’d
(), 
’em›s
[
i
]->
¡©s
.
sfx_´efix
);

211 
´ef_id
 = 
	`di¡ªû
(
sfx_´efixes
.
	`begš
(), 
found
);

213 ià(
´ef_id
 >ğ
sfx_´efixes
.
	`size
()) {

214 
û¼
 << "ERROR:ƒnemy sfx_prefix doesn't match„egistered…refixes (enemy: '"

215 << 
’em›s
[
i
]->
¡©s
.
Çme
 << "', sfx_prefix: '"

216 << 
’em›s
[
i
]->
¡©s
.
sfx_´efix
 << "')" << 
’dl
;

218 ià(
’em›s
[
i
]->
sfx_phys
)

219 
¢d
->
	`¶ay
(
sound_phys
[
´ef_id
], 
GLOBAL_VIRTUAL_CHANNEL
, 
’em›s
[
i
]->
¡©s
.
pos
, 
çl£
);

220 ià(
’em›s
[
i
]->
sfx_m’t
)

221 
¢d
->
	`¶ay
(
sound_m’t
[
´ef_id
], 
GLOBAL_VIRTUAL_CHANNEL
, 
’em›s
[
i
]->
¡©s
.
pos
, 
çl£
);

222 ià(
’em›s
[
i
]->
sfx_h™
)

223 
¢d
->
	`¶ay
(
sound_h™
[
´ef_id
], 
GLOBAL_VIRTUAL_CHANNEL
, 
’em›s
[
i
]->
¡©s
.
pos
, 
çl£
);

224 ià(
’em›s
[
i
]->
sfx_d›
)

225 
¢d
->
	`¶ay
(
sound_d›
[
´ef_id
], 
GLOBAL_VIRTUAL_CHANNEL
, 
’em›s
[
i
]->
¡©s
.
pos
, 
çl£
);

226 ià(
’em›s
[
i
]->
sfx_ü™d›
)

227 
¢d
->
	`¶ay
(
sound_ü™d›
[
´ef_id
], 
GLOBAL_VIRTUAL_CHANNEL
, 
’em›s
[
i
]->
¡©s
.
pos
, 
çl£
);

231 
’em›s
[
i
]->
sfx_h™
 = 
çl£
;

232 
’em›s
[
i
]->
sfx_phys
 = 
çl£
;

233 
’em›s
[
i
]->
sfx_m’t
 = 
çl£
;

234 
’em›s
[
i
]->
sfx_d›
 = 
çl£
;

235 
’em›s
[
i
]->
sfx_ü™d›
 = 
çl£
;

239 
’em›s
[
i
]->
¡©s
.
h”o_pos
 = hero_pos;

240 
’em›s
[
i
]->
¡©s
.
h”o_®ive
 = hero_alive;

241 
’em›s
[
i
]->
¡©s
.
h”o_¡—Éh
 = hero_stealth;

242 
’em›s
[
i
]->
	`logic
();

245 
	}
}

247 
EÃmy
* 
	gEÃmyMªag”
::
	$’emyFocus
(
Pošt
 
mou£
, Pošˆ
ÿm
, 
boŞ
 
®ive_Úly
) {

248 
Pošt
 
p
;

249 
SDL_Reù
 
r
;

250 
i
 = 0; i < 
’em›s
.
	`size
(); i++) {

251 if(
®ive_Úly
 && (
’em›s
[
i
]->
¡©s
.
cur_¡©e
 =ğ
ENEMY_DEAD
 ||ƒÃm›s[i]->¡©s.cur_¡©=ğ
ENEMY_CRITDEAD
)) {

254 
p
 = 
	`m­_to_sü“n
(
’em›s
[
i
]->
¡©s
.
pos
.
x
,ƒÃm›s[i]->¡©s.pos.
y
, 
ÿm
.x, cam.y);

256 
r
.
w
 = 
’em›s
[
i
]->
	`g‘R’d”
().
¤c
.w;

257 
r
.
h
 = 
’em›s
[
i
]->
	`g‘R’d”
().
¤c
.h;

258 
r
.
x
 = 
p
.x - 
’em›s
[
i
]->
	`g‘R’d”
().
off£t
.x;

259 
r
.
y
 = 
p
.y - 
’em›s
[
i
]->
	`g‘R’d”
().
off£t
.y;

261 ià(
	`isW™hš
(
r
, 
mou£
)) {

262 
EÃmy
 *
’emy
 = 
’em›s
[
i
];

263  
’emy
;

266  
NULL
;

267 
	}
}

272 
	gEÃmyMªag”
::
	$checkEÃm›sfÜXP
(
Cam·ignMªag”
 *
ÿmp
) {

273 
i
=0; i < 
’em›s
.
	`size
(); i++) {

274 ià(
’em›s
[
i
]->
»w¬d_xp
) {

275 
ÿmp
->
	`»w¬dXP
(
’em›s
[
i
]->
¡©s
.
xp
, 
çl£
);

276 
’em›s
[
i
]->
»w¬d_xp
 = 
çl£
;

279 
	}
}

281 
boŞ
 
	gEÃmyMªag”
::
	$isCË¬ed
() {

282 ià(
’em›s
.
	`em±y
()è 
Œue
;

284 
i
=0; i < 
’em›s
.
	`size
(); i++) {

285 ià(
’em›s
[
i
]->
¡©s
.
®ive
è 
çl£
;

288  
Œue
;

289 
	}
}

296 
	gEÃmyMªag”
::
addR’d”s
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
) {

297 
	gveùÜ
<
	gEÃmy
*>::
™”©Ü
 
™
;

298 
	g™
 = 
’em›s
.
begš
(); iˆ!ğ’em›s.
’d
(); ++it) {

299 
boŞ
 
	gd—d
 = (*
™
)->
¡©s
.
cÜp£
;

300 ià(!
	gd—d
 || (d—d && (*
	g™
)->
	g¡©s
.
	gcÜp£_ticks
 > 0)) {

301 
R’d”abË
 
	g»
 = (*
™
)->
g‘R’d”
();

302 
	g»
.
	g´io
 = 1;

305 (
	gd—d
 ? 
	gr_d—d
 : 
r
).
push_back
(
»
);

308 
	gi
 = 0; i < (*
	g™
)->
	g¡©s
.
	gefãùs
.
	gefãù_li¡
.
size
(); ++i) {

309 ià((*
	g™
)->
	g¡©s
.
	gefãùs
.
	gefãù_li¡
[
i
].
	gªim©iÚ
) {

310 
R’d”abË
 
	g»n
 = (*
™
)->
¡©s
.
efãùs
.
efãù_li¡
[
i
].
ªim©iÚ
->
g‘Cu¼’tF¿me
(0);

311 
	g»n
.
	gm­_pos
 = (*
™
)->
¡©s
.
pos
;

312 ià((*
	g™
)->
	g¡©s
.
	gefãùs
.
	gefãù_li¡
[
i
].
	g»nd”_above
è
	g»n
.
	g´io
 = 2;

313 
	g»n
.
	g´io
 = 0;

314 
	gr
.
push_back
(
»n
);

321 
	gEÃmyMªag”
::~
	$EÃmyMªag”
() {

322 
i
=0; i < 
’em›s
.
	`size
(); i++) {

323 
ªim
->
	`deü—£CouÁ
(
’em›s
[
i
]->
ªim©iÚS‘
->
	`g‘Name
());

324 
d–‘e
 
’em›s
[
i
];

327 
i
=0; i<
sound_phys
.
	`size
(); i++) {

328 
¢d
->
	`uÆßd
(
sound_phys
[
i
]);

329 
¢d
->
	`uÆßd
(
sound_m’t
[
i
]);

330 
¢d
->
	`uÆßd
(
sound_h™
[
i
]);

331 
¢d
->
	`uÆßd
(
sound_d›
[
i
]);

332 
¢d
->
	`uÆßd
(
sound_ü™d›
[
i
]);

334 
	}
}

	@EnemyManager.h

25 #´agm¨
Úû


26 #iâdeà
ENEMY_MANAGER_H


27 
	#ENEMY_MANAGER_H


	)

29 
	~"S‘tšgs.h
"

30 
	~"M­R’d””.h
"

31 
	~"EÃmy.h
"

32 
	~"Uts.h
"

33 
	~"Pow”Mªag”.h
"

34 
	~"Cam·ignMªag”.h
"

36 şas 
	cEÃmyMªag”
 {

37 
	m´iv©e
:

39 
M­R’d””
 *
m­
;

40 
Pow”Mªag”
 *
	mpow”s
;

42 
lßdSounds
(cÚ¡ 
¡d
::
¡ršg
& 
ty³_id
);

43 
lßdAnim©iÚs
(
EÃmy
 *
e
);

45 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
sfx_´efixes
;

46 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sound_phys
;

47 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sound_m’t
;

48 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sound_h™
;

49 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sound_d›
;

50 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sound_ü™d›
;

52 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
ªim_´efixes
;

53 
	m¡d
::
veùÜ
<
¡d
::veùÜ<
Anim©iÚ
*> > 
ªim_’t™›s
;

58 
EÃmy
 *
g‘EÃmyPrÙÙy³
(cÚ¡ 
¡d
::
¡ršg
& 
ty³_id
);

60 
	m¡d
::
veùÜ
<
EÃmy
> 
´ÙÙy³s
;

62 
	mpublic
:

63 
EÃmyMªag”
(
Pow”Mªag”
 *
_pow”s
, 
M­R’d””
 *
_m­
);

64 ~
EÃmyMªag”
();

65 
hªdËNewM­
();

66 
hªdËS·wn
();

67 
logic
();

68 
addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

69 
checkEÃm›sfÜXP
(
Cam·ignMªag”
 *
ÿmp
);

70 
boŞ
 
isCË¬ed
();

71 
EÃmy
 *
’emyFocus
(
Pošt
 
mou£
, Pošˆ
ÿm
, 
boŞ
 
®ive_Úly
);

74 
	m¡d
::
veùÜ
<
EÃmy
*> 
’em›s
;

75 
Pošt
 
	mh”o_pos
;

76 
boŞ
 
	mh”o_®ive
;

77 
	mh”o_¡—Éh
;

	@Entity.cpp

26 
	~"Anim©iÚ.h
"

27 
	~"Anim©iÚMªag”.h
"

28 
	~"Anim©iÚS‘.h
"

29 
	~"EÁ™y.h
"

30 
	~"M­R’d””.h
"

31 
	~"Sh¬edResourûs.h
"

33 
	~<io¡»am
>

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 
	gEÁ™y
::
	$EÁ™y
(
M­R’d””
* 
_m­
)

38 : 
	`¥r™es
(
NULL
)

39 , 
	`aùiveAnim©iÚ
(
NULL
)

40 , 
	`ªim©iÚS‘
(
NULL
)

41 , 
	$m­
(
_m­
)

43 
	}
}

45 
	gEÁ™y
::
	$EÁ™y
(cÚ¡ 
EÁ™y
 &
e
)

46 : 
	`¥r™es
(
e
.
¥r™es
)

47 , 
	`aùiveAnim©iÚ
(
Ãw
 
	`Anim©iÚ
(*
e
.
aùiveAnim©iÚ
))

48 , 
	`ªim©iÚS‘
(
e
.
ªim©iÚS‘
)

49 , 
	`m­
(
e
.
m­
)

50 , 
	`¡©s
(
	$StBlock
(
e
.
¡©s
))

52 
	}
}

60 
boŞ
 
	gEÁ™y
::
	$move
() {

62 ià(
¡©s
.
efãùs
.
fÜûd_move
) {

63  
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, sts.
fÜûd_¥“d
.x, sts.fÜûd_¥“d.y, 1, sts.
movem’t_ty³
);

66 ià(
¡©s
.
efãùs
.
¥“d
 =ğ0è 
çl£
;

68 
¥“d_dŸgÚ®
 = 
¡©s
.
d¥“d
;

69 
¥“d_¡¿ight
 = 
¡©s
.
¥“d
;

71 
¥“d_dŸgÚ®
 = (¥“d_dŸgÚ® * 
¡©s
.
efãùs
.
¥“d
) / 100;

72 
¥“d_¡¿ight
 = (¥“d_¡¿ighˆ* 
¡©s
.
efãùs
.
¥“d
) / 100;

74 
boŞ
 
fuÎ_move
 = 
çl£
;

76 
¡©s
.
dœeùiÚ
) {

78 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, -1, 1, 
¥“d_dŸgÚ®
, sts.
movem’t_ty³
);

81 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, -1, 0, 
¥“d_¡¿ight
, sts.
movem’t_ty³
);

84 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, -1, -1, 
¥“d_dŸgÚ®
, sts.
movem’t_ty³
);

87 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, 0, -1, 
¥“d_¡¿ight
, sts.
movem’t_ty³
);

90 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, 1, -1, 
¥“d_dŸgÚ®
, sts.
movem’t_ty³
);

93 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, 1, 0, 
¥“d_¡¿ight
, sts.
movem’t_ty³
);

96 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, 1, 1, 
¥“d_dŸgÚ®
, sts.
movem’t_ty³
);

99 
fuÎ_move
 = 
m­
->
cŞlid”
.
	`move
(
¡©s
.
pos
.
x
, sts.pos.
y
, 0, 1, 
¥“d_¡¿ight
, sts.
movem’t_ty³
);

103  
fuÎ_move
;

104 
	}
}

109 
	gEÁ™y
::
	$çû
(
m­x
, 
m­y
) {

111 
dx
 = 
m­x
 - 
¡©s
.
pos
.
x
;

112 
dy
 = 
¡©s
.
pos
.
y
 - 
m­y
;

115 ià(
dx
 == 0) {

116 ià(
dy
 > 0)  3;

120 
¦İe
 = (()
dy
)/(()
dx
);

121 ià(0.5 <ğ
¦İe
 && slope <= 2.0) {

122 ià(
dy
 > 0)  4;

125 ià(-0.5 <ğ
¦İe
 && slope <= 0.5) {

126 ià(
dx
 > 0)  5;

129 ià(-2.0 <ğ
¦İe
 && slope <= -0.5) {

130 ià(
dx
 > 0)  6;

133 ià(2.0 <ğ
¦İe
 || -2.0 >= slope) {

134 ià(
dy
 > 0)  3;

137  
¡©s
.
dœeùiÚ
;

138 
	}
}

143 
boŞ
 
	gEÁ™y
::
	$£tAnim©iÚ
(cÚ¡ 
¡ršg
& 
ªim©iÚName
) {

146 ià(
aùiveAnim©iÚ
 !ğ
NULL
 &&‡ùiveAnim©iÚ->
	`g‘Name
(è=ğ
ªim©iÚName
)

147  
Œue
;

149 
d–‘e
 
aùiveAnim©iÚ
;

150 
aùiveAnim©iÚ
 = 
ªim©iÚS‘
->
	`g‘Anim©iÚ
(
ªim©iÚName
);

152 ià(
aùiveAnim©iÚ
 =ğ
NULL
)

153 
	`årštf
(
¡d”r
, "EÁ™y::£tAnim©iÚ(%s):‚Ù found\n", 
ªim©iÚName
.
	`c_¡r
());

155  
aùiveAnim©iÚ
 =ğ
NULL
;

156 
	}
}

158 
	gEÁ™y
::~
	$EÁ™y
 () {

160 
d–‘e
 
aùiveAnim©iÚ
;

161 
	}
}

	@Entity.h

26 #´agm¨
Úû


27 #iâdeà
ENTITY_H


28 
	#ENTITY_H


	)

30 
	~"StBlock.h
"

31 
	~<veùÜ
>

33 
şass
 
	gAnim©iÚ
;

34 
şass
 
	gAnim©iÚS‘
;

35 
şass
 
	gM­R’d””
;

37 şas 
	cEÁ™y
 {

38 
	m´Ùeùed
:

39 
SDL_Surçû
 *
¥r™es
;

41 
	mpublic
:

42 
EÁ™y
(
M­R’d””
*);

43 
EÁ™y
(const Entity&);

44 
	mvœtu®
 ~
EÁ™y
();

46 
boŞ
 
move
();

47 
çû
(, );

50 
vœtu®
 
R’d”abË
 
g‘R’d”
() = 0;

52 
boŞ
 
£tAnim©iÚ
(cÚ¡ 
¡d
::
¡ršg
& 
ªim©iÚ
);

53 
Anim©iÚ
 *
	maùiveAnim©iÚ
;

54 
Anim©iÚS‘
 *
	mªim©iÚS‘
;

56 
M­R’d””
* 
	mm­
;

57 
StBlock
 
	m¡©s
;

	@FileParser.cpp

18 
	~"FeP¬£r.h
"

19 
	~"UtsP¬sšg.h
"

22 
usšg
 
Çme¥aû
 
	g¡d
;

23 
boŞ
 
	gÃw_£ùiÚ
;

24 
	g¡d
::
¡ršg
 
£ùiÚ
;

25 
	g¡d
::
¡ršg
 
key
;

26 
	g¡d
::
¡ršg
 
v®
;

28 
	gFeP¬£r
::
	$FeP¬£r
()

29 : 
	`lše
("")

30 , 
	`Ãw_£ùiÚ
(
çl£
)

31 , 
	`£ùiÚ
("")

32 , 
	`key
("")

33 , 
	`v®
("")

34 {
	}
}

36 
boŞ
 
	gFeP¬£r
::
	$İ’
(cÚ¡ 
¡ršg
& 
f’ame
) {

37 
šfe
.
	`İ’
(
f’ame
.
	`c_¡r
(), 
ios
::
š
);

38  
šfe
.
	`is_İ’
();

39 
	}
}

41 
	gFeP¬£r
::
	$şo£
() {

42 ià(
šfe
.
	`is_İ’
())

43 
šfe
.
	`şo£
();

44 
	}
}

52 
boŞ
 
	gFeP¬£r
::
	$Ãxt
() {

54 
¡ršg
 
¡¬ts_w™h
;

55 
Ãw_£ùiÚ
 = 
çl£
;

57 
šfe
.
	`good
()) {

59 
lše
 = 
	`g‘Lše
(
šfe
);

62 ià(
lše
.
	`Ëngth
() == 0) ;

64 
¡¬ts_w™h
 = 
lše
.
	`©
(0);

67 ià(
¡¬ts_w™h
 == "#") ;

70 ià(
¡¬ts_w™h
 == "[") {

71 
Ãw_£ùiÚ
 = 
Œue
;

72 
£ùiÚ
 = 
	`·r£_£ùiÚ_t™Ë
(
lše
);

79 
	`·r£_key_·œ
(
lše
, 
key
, 
v®
);

80  
Œue
;

85  
çl£
;

86 
	}
}

91 
¡ršg
 
	gFeP¬£r
::
	$g‘RawLše
() {

92 
lše
 = "";

94 ià(
šfe
.
	`good
()) {

95 
lše
 = 
	`g‘Lše
(
šfe
);

97  
lše
;

98 
	}
}

100 
¡ršg
 
	gFeP¬£r
::
	$ÃxtV®ue
() {

101 ià(
v®
 == "") {

104 
¡ršg
 
s
;

105 
size_t
 
£µos
 = 
v®
.
	`fšd_fœ¡_of
(',');

106 
size_t
 
®t_£µos
 = 
v®
.
	`fšd_fœ¡_of
(';');

107 ià(
®t_£µos
 !ğ
¡ršg
::
Åos
 &&‡É_£µo < 
£µos
)

108 
£µos
 = 
®t_£µos
;

110 ià(
£µos
 =ğ
¡ršg
::
Åos
) {

111 
s
 = 
v®
;

112 
v®
 = "";

115 
s
 = 
v®
.
	`sub¡r
(0, 
£µos
);

116 
v®
 = v®.
	`sub¡r
(
£µos
+1);

118  
s
;

119 
	}
}

121 
	gFeP¬£r
::~
	$FeP¬£r
() {

122 
	`şo£
();

123 
	}
}

	@FileParser.h

25 #´agm¨
Úû


26 #iâdeà
FILE_PARSER_H


27 
	#FILE_PARSER_H


	)

29 
	~<f¡»am
>

30 
	~<¡ršg
>

32 şas 
	cFeP¬£r
 {

33 
	m´iv©e
:

34 
¡d
::
if¡»am
 
šfe
;

35 
	m¡d
::
¡ršg
 
lše
;

37 
	mpublic
:

38 
FeP¬£r
();

39 ~
FeP¬£r
();

41 
boŞ
 
İ’
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

42 
şo£
();

43 
boŞ
 
Ãxt
();

44 
	m¡d
::
¡ršg
 
ÃxtV®ue
();

45 
	m¡d
::
¡ršg
 
g‘RawLše
();

47 
boŞ
 
	mÃw_£ùiÚ
;

48 
	m¡d
::
¡ršg
 
£ùiÚ
;

49 
	m¡d
::
¡ršg
 
key
;

50 
	m¡d
::
¡ršg
 
v®
;

	@FontEngine.cpp

22 
	~"SDL_gfxBl™Func.h
"

23 
	~"FÚtEngše.h
"

24 
	~"FeP¬£r.h
"

25 
	~"Sh¬edResourûs.h
"

26 
	~"S‘tšgs.h
"

27 
	~"UtsP¬sšg.h
"

28 
	~<io¡»am
>

29 
	~<s¡»am
>

31 
usšg
 
Çme¥aû
 
	g¡d
;

33 
	gFÚtStyË
::
	$FÚtStyË
(è: 
	`Çme
(""), 
	`·th
(""), 
	`±size
(0), 
	`bËnd
(
Œue
), 
	`‰fÚt
(
NULL
), 
	`lše_height
(0), 
	$fÚt_height
(0) {

34 
	}
}

36 
	gFÚtEngše
::
	$FÚtEngše
()

37 : 
	`‰f
(
NULL
)

38 , 
	`aùive_fÚt
(
NULL
)

39 , 
	$cursÜ_y
(0)

42 if(!
	`TTF_WasIn™
(è&& 
	`TTF_In™
()==-1) {

43 
	`´štf
("TTF_In™: %s\n", 
	`TTF_G‘E¼Ü
());

44 
	`ex™
(2);

48 
FeP¬£r
 
šfe
;

49 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/font_settings.txt"))) {

50 
šfe
.
	`Ãxt
()) {

51 
šfe
.
v®
 = infile.val + ',';

53 ià(
šfe
.
Ãw_£ùiÚ
) {

54 
FÚtStyË
 
f
;

55 
f
.
Çme
 = 
šfe
.
£ùiÚ
;

56 
fÚt_¡yËs
.
	`push_back
(
f
);

59 ià(
fÚt_¡yËs
.
	`em±y
()) ;

61 
FÚtStyË
 *
¡yË
 = &(
fÚt_¡yËs
.
	`back
());

62 ià((
šfe
.
key
 =ğ"deçuÉ" && 
¡yË
->
·th
 =ğ""è|| infe.key =ğ
LANGUAGE
) {

63 
¡yË
->
·th
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

64 
¡yË
->
±size
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

65 
bËnd
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

66 ià(
bËnd
 == 1)

67 
¡yË
->
bËnd
 = 
Œue
;

69 
¡yË
->
bËnd
 = 
çl£
;

70 
¡yË
->
‰fÚt
 = 
	`TTF_O³nFÚt
(
mods
->
	`loÿ‹
("fÚts/" + styË->
·th
).
	`c_¡r
(), styË->
±size
);

71 if(
¡yË
->
‰fÚt
 =ğ
NULL
) {

72 
	`´štf
("TTF_O³nFÚt: %s\n", 
	`TTF_G‘E¼Ü
());

74 
¡yË
->
lše_height
 = 
	`TTF_FÚtLšeSk
(¡yË->
‰fÚt
);

75 
¡yË
->
fÚt_height
 = 
	`TTF_FÚtLšeSk
(¡yË->
‰fÚt
);

79 
šfe
.
	`şo£
();

80 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/font_settings.txt!\n");

85 
SDL_CŞÜ
 
cŞÜ
;

86 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/font_colors.txt"))) {

87 
šfe
.
	`Ãxt
()) {

88 
šfe
.
v®
 = infile.val + ',';

89 
cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

90 
cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

91 
cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

92 
cŞÜ_m­
[
šfe
.
key
] = 
cŞÜ
;

94 
šfe
.
	`şo£
();

95 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/font_colors.txt!\n");

98 
	`£tFÚt
("font_regular");

99 ià(!
aùive_fÚt
) {

100 
	`årštf
(
¡d”r
, "Unableo determine default font!\n");

101 
	`SDL_Qu™
();

102 
	`ex™
(1);

104 
	}
}

106 
SDL_CŞÜ
 
	gFÚtEngše
::
	$g‘CŞÜ
(
¡ršg
 
_cŞÜ
) {

107 
m­
<
¡ršg
,
SDL_CŞÜ
>::
™”©Ü
 
™
,
’d
;

108 
™
=
cŞÜ_m­
.
	`begš
(), 
’d
=cŞÜ_m­.
	`’d
(); it!=end; ++it) {

109 ià(
_cŞÜ
.
	`com·»
(
™
->
fœ¡
è=ğ0è it->
£cÚd
;

112  
FONT_WHITE
;

113 
	}
}

115 
	gFÚtEngše
::
	$£tFÚt
(
¡ršg
 
_fÚt
) {

116 
i
=0; i<
fÚt_¡yËs
.
	`size
(); i++) {

117 ià(
fÚt_¡yËs
[
i
].
Çme
 =ğ
_fÚt
) {

118 
aùive_fÚt
 = &(
fÚt_¡yËs
[
i
]);

122 
	}
}

127 
	gFÚtEngše
::
ÿlc_width
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
) {

128 
w
, 
	gh
;

129 
TTF_SizeUTF8
(
aùive_fÚt
->
‰fÚt
, 
‹xt
.
c_¡r
(), &
w
, &
h
);

130  
	gw
;

136 
Pošt
 
	gFÚtEngše
::
ÿlc_size
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt_w™h_Ãwlšes
, 
width
) {

137 
	gÃwlše
 = 10;

139 
¡ršg
 
	g‹xt
 = 
‹xt_w™h_Ãwlšes
;

142 
size_t
 
	gcheck_Ãwlše
 = 
‹xt
.
fšd_fœ¡_of
(
Ãwlše
);

143 ià(
	gcheck_Ãwlše
 !ğ
¡ršg
::
Åos
) {

144 
Pošt
 
p1
 = 
ÿlc_size
(
‹xt
.
sub¡r
(0, 
check_Ãwlše
), 
width
);

145 
Pošt
 
	gp2
 = 
ÿlc_size
(
‹xt
.
sub¡r
(
check_Ãwlše
+1,ext.
Ëngth
()), 
width
);

146 
Pošt
 
	gp3
;

148 ià(
	gp1
.
	gx
 > 
	gp2
.xè
	gp3
.x = 
p1
.
x
;

149 
	gp3
.
	gx
 = 
p2
.
x
;

151 
	gp3
.
	gy
 = 
p1
.
y
 + 
p2
.y;

152  
	gp3
;

155 
	gheight
 = 0;

156 
	gmax_width
 = 0;

158 
¡ršg
 
	gÃxt_wÜd
;

159 
¡ršg¡»am
 
	gbud”
;

160 
¡ršg¡»am
 
	gbud”_´ev
;

161 
	g¥aû
 = 32;

162 
size_t
 
	gcursÜ
 = 0;

163 
¡ršg
 
	gfuÎ‹xt
 = 
‹xt
 + " ";

165 
	gbud”
.
¡r
("");

166 
	gbud”_´ev
.
¡r
("");

168 
	gÃxt_wÜd
 = 
g‘NextTok’
(
fuÎ‹xt
, 
cursÜ
, 
¥aû
);

170 
	gcursÜ
 !ğ
¡ršg
::
Åos
) {

171 
bud”
 << 
Ãxt_wÜd
;

173 ià(
ÿlc_width
(
bud”
.
¡r
()è> 
	gwidth
) {

176 
	gheight
 = 
height
 + 
g‘LšeHeight
();

177 ià(
ÿlc_width
(
bud”_´ev
.
¡r
()è> 
	gmax_width
) {

178 
	gmax_width
 = 
ÿlc_width
(
bud”_´ev
.
¡r
());

181 
	gbud”_´ev
.
¡r
("");

182 
	gbud”
.
¡r
("");

184 
	gbud”
 << 
	gÃxt_wÜd
 << " ";

187 
	gbud”
 << " ";

188 
	gbud”_´ev
.
¡r
(
bud”
.str());

191 
	gÃxt_wÜd
 = 
g‘NextTok’
(
fuÎ‹xt
, 
cursÜ
, 
¥aû
);

194 
	gheight
 = 
height
 + 
g‘LšeHeight
();

195 
	gbud”
.
¡r
(
Œim
(
bud”
.str(), ' '));

196 ià(
ÿlc_width
(
bud”
.
¡r
()è> 
	gmax_width
) max_width = calc_width(builder.str());

198 
Pošt
 
	gsize
;

199 
	gsize
.
	gx
 = 
max_width
;

200 
	gsize
.
	gy
 = 
height
;

201  
	gsize
;

209 
	gFÚtEngše
::
»nd”
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
SDL_CŞÜ
 
cŞÜ
) {

210 
SDL_Reù
 
	gde¡_»ù
;

213 ià(
	gju¡ify
 =ğ
JUSTIFY_LEFT
) {

214 
de¡_»ù
.
x
 = x;

215 
	gde¡_»ù
.
	gy
 = 
y
;

217 ià(
	gju¡ify
 =ğ
JUSTIFY_RIGHT
) {

218 
de¡_»ù
.
x
 = x - 
ÿlc_width
(
‹xt
);

219 
	gde¡_»ù
.
	gy
 = 
y
;

221 ià(
	gju¡ify
 =ğ
JUSTIFY_CENTER
) {

222 
de¡_»ù
.
x
 = x - 
ÿlc_width
(
‹xt
)/2;

223 
	gde¡_»ù
.
	gy
 = 
y
;

226 
´štf
("ERROR: FÚtEngše::»nd”(ègiv’ unhªdËd 'ju¡ify=%d',‡ssumšg†eá\n",
ju¡ify
);

227 
	gde¡_»ù
.
	gx
 = 
x
;

228 
	gde¡_»ù
.
	gy
 = 
y
;

232 ià(
	gaùive_fÚt
->
	gbËnd
 && 
	grg‘
 !ğ
sü“n
) {

233 
‰f
 = 
TTF_R’d”UTF8_BËnded
(
aùive_fÚt
->
‰fÚt
, 
‹xt
.
c_¡r
(), 
cŞÜ
);

236 ià(
	g‰f
 !ğ
NULL
è
SDL_gfxBl™RGBA
(
‰f
, NULL, 
rg‘
, &
de¡_»ù
);

239 
	g‰f
 = 
TTF_R’d”UTF8_SŞid
(
aùive_fÚt
->
‰fÚt
, 
‹xt
.
c_¡r
(), 
cŞÜ
);

240 ià(
	g‰f
 !ğ
NULL
è
SDL_Bl™Surçû
(
‰f
, NULL, 
rg‘
, &
de¡_»ù
);

243 
SDL_F»eSurçû
(
‰f
);

244 
	g‰f
 = 
NULL
;

250 
	gFÚtEngše
::
»nd”
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
width
, 
SDL_CŞÜ
 
cŞÜ
) {

252 
¡ršg
 
	gfuÎ‹xt
 = 
‹xt
 + " ";

253 
	gcursÜ_y
 = 
y
;

254 
¡ršg
 
	gÃxt_wÜd
;

255 
¡ršg¡»am
 
	gbud”
;

256 
¡ršg¡»am
 
	gbud”_´ev
;

257 
	g¥aû
 = 32;

258 
size_t
 
	gcursÜ
 = 0;

260 
	gbud”
.
¡r
("");

261 
	gbud”_´ev
.
¡r
("");

263 
	gÃxt_wÜd
 = 
g‘NextTok’
(
fuÎ‹xt
, 
cursÜ
, 
¥aû
);

265 
	gcursÜ
 !ğ
¡ršg
::
Åos
) {

267 
bud”
 << 
Ãxt_wÜd
;

269 ià(
ÿlc_width
(
bud”
.
¡r
()è> 
	gwidth
) {

270 
»nd”
(
bud”_´ev
.
¡r
(), 
x
, 
cursÜ_y
, 
ju¡ify
, 
rg‘
, 
cŞÜ
);

271 
	gcursÜ_y
 +ğ
g‘LšeHeight
();

272 
	gbud”_´ev
.
¡r
("");

273 
	gbud”
.
¡r
("");

275 
	gbud”
 << 
	gÃxt_wÜd
 << " ";

278 
	gbud”
 << " ";

279 
	gbud”_´ev
.
¡r
(
bud”
.str());

282 
	gÃxt_wÜd
 = 
g‘NextTok’
(
fuÎ‹xt
, 
cursÜ
, 
¥aû
);

285 
»nd”
(
bud”
.
¡r
(), 
x
, 
cursÜ_y
, 
ju¡ify
, 
rg‘
, 
cŞÜ
);

286 
	gcursÜ_y
 +ğ
g‘LšeHeight
();

290 
	gFÚtEngše
::
»nd”Shadowed
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
SDL_CŞÜ
 
cŞÜ
) {

291 
»nd”
(
‹xt
, 
x
+1, 
y
+1, 
ju¡ify
, 
rg‘
, 
FONT_BLACK
);

292 
»nd”
(
‹xt
, 
x
, 
y
, 
ju¡ify
, 
rg‘
, 
cŞÜ
);

295 
	gFÚtEngše
::
»nd”Shadowed
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
width
, 
SDL_CŞÜ
 
cŞÜ
) {

296 
»nd”
(
‹xt
, 
x
+1, 
y
+1, 
ju¡ify
, 
rg‘
, 
width
, 
FONT_BLACK
);

297 
»nd”
(
‹xt
, 
x
, 
y
, 
ju¡ify
, 
rg‘
, 
width
, 
cŞÜ
);

300 
	gFÚtEngše
::~
	$FÚtEngše
() {

301 
	`SDL_F»eSurçû
(
‰f
);

302 
i
=0; i<
fÚt_¡yËs
.
	`size
(); ++iè
	`TTF_Clo£FÚt
(fÚt_¡yËs[i].
‰fÚt
);

303 
	`TTF_Qu™
();

304 
	}
}

	@FontEngine.h

19 #´agm¨
Úû


20 #iâdeà
FONT_ENGINE_H


21 
	#FONT_ENGINE_H


	)

23 
	~"Uts.h
"

25 
	~<SDL.h
>

26 
	~<SDL_image.h
>

27 
	~<SDL_‰f.h
>

29 
	~<f¡»am
>

30 
	~<¡ršg
>

31 
	~<m­
>

32 
	~<veùÜ
>

35 cÚ¡ 
	gJUSTIFY_LEFT
 = 0;

36 cÚ¡ 
	gJUSTIFY_RIGHT
 = 1;

37 cÚ¡ 
	gJUSTIFY_CENTER
 = 2;

39 cÚ¡ 
SDL_CŞÜ
 
	gFONT_WHITE
 = {255,255,255,0};

40 cÚ¡ 
SDL_CŞÜ
 
	gFONT_BLACK
 = {0,0,0,0};

42 şas 
	cFÚtStyË
 {

43 
	mpublic
:

44 
¡d
::
¡ršg
 
Çme
;

45 
	m¡d
::
¡ršg
 
·th
;

46 
	m±size
;

47 
boŞ
 
	mbËnd
;

48 
TTF_FÚt
 *
	m‰fÚt
;

49 
	mlše_height
;

50 
	mfÚt_height
;

52 
FÚtStyË
();

61 şas 
	cFÚtEngše
 {

62 
	m´iv©e
:

63 
SDL_Reù
 
¤c
;

64 
SDL_Reù
 
	mde¡
;

65 
SDL_Surçû
 *
	m‰f
;

66 
	m¡d
::
m­
<
¡d
::
¡ršg
,
	mSDL_CŞÜ
> 
	mcŞÜ_m­
;

67 
	m¡d
::
veùÜ
<
FÚtStyË
> 
fÚt_¡yËs
;

68 
FÚtStyË
 *
	maùive_fÚt
;

70 
	mpublic
:

71 
FÚtEngše
();

72 ~
FÚtEngše
();

74 
	$g‘LšeHeight
(è{  
aùive_fÚt
->
lše_height
; }

75 
	$g‘FÚtHeight
(è{  
aùive_fÚt
->
fÚt_height
; 
	}
}

77 
SDL_CŞÜ
 
g‘CŞÜ
(
¡d
::
¡ršg
 
_cŞÜ
);

78 
£tFÚt
(
¡d
::
¡ršg
 
_fÚt
);

80 
ÿlc_width
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
);

81 
Pošt
 
ÿlc_size
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt_w™h_Ãwlšes
, 
width
);

83 
»nd”
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
SDL_CŞÜ
 
cŞÜ
);

84 
»nd”
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
width
, 
SDL_CŞÜ
 
cŞÜ
);

85 
»nd”Shadowed
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
SDL_CŞÜ
 
cŞÜ
);

86 
»nd”Shadowed
(cÚ¡ 
¡d
::
¡ršg
& 
‹xt
, 
x
, 
y
, 
ju¡ify
, 
SDL_Surçû
 *
rg‘
, 
width
, 
SDL_CŞÜ
 
cŞÜ
);

88 
	gcursÜ_y
;

	@GameState.cpp

18 
	~"GameS‹.h
"

20 
	gGameS‹
::
	$GameS‹
() {

22 
»que¡edGameS‹
 = 
NULL
;

24 
ex™Reque¡ed
 = 
çl£
;

25 
hasMusic
 = 
çl£
;

26 
»lßd_music
 = 
çl£
;

27 
	}
}

29 
GameS‹
* 
	gGameS‹
::
	$g‘Reque¡edGameS‹
() {

30  
»que¡edGameS‹
;

31 
	}
}

33 
	gGameS‹
::
	$logic
() {

34 
	}
}

36 
GameS‹
::
	$»nd”
() {

37 
	}
}

39 
GameS‹
::~
	$GameS‹
() {

40 
	}
}

	@GameState.h

19 #´agm¨
Úû


20 #iâdeà
GAMESTATE_H


21 
	#GAMESTATE_H


	)

23 
	~<SDL.h
>

24 
	~<SDL_image.h
>

25 
	~<SDL_mix”.h
>

27 şas 
	cGameS‹
 {

28 
	mpublic
:

29 
GameS‹
();

30 
	mvœtu®
 ~
GameS‹
();

32 
vœtu®
 
logic
();

33 
vœtu®
 
»nd”
();

35 
GameS‹
* 
g‘Reque¡edGameS‹
();

36 
boŞ
 
	$isEx™Reque¡ed
(è{  
ex™Reque¡ed
; }

37 
boŞ
 
hasMusic
;

38 
boŞ
 
»lßd_music
;

40 
´Ùeùed
:

42 
GameS‹
* 
»que¡edGameS‹
;

44 
boŞ
 
ex™Reque¡ed
;

45 
	}
};

	@GameStateConfig.cpp

27 
	~"FeP¬£r.h
"

28 
	~"GameS‹CÚfig.h
"

29 
	~"GameS‹T™Ë.h
"

30 
	~"M’uCÚfœm.h
"

31 
	~"S‘tšgs.h
"

32 
	~"Sh¬edResourûs.h
"

33 
	~"UtsP¬sšg.h
"

34 
	~"UtsFeSy¡em.h
"

35 
	~"Widg‘Bu‰Ú.h
"

36 
	~"Widg‘CheckBox.h
"

37 
	~"Widg‘Li¡Box.h
"

38 
	~"Widg‘SüŞlBox.h
"

39 
	~"Widg‘Slid”.h
"

40 
	~"Widg‘TabCÚŒŞ.h
"

42 
	~<s¡»am
>

44 
usšg
 
Çme¥aû
 
	g¡d
;

46 
	gGameS‹CÚfig
::
	$GameS‹CÚfig
 ()

47 : 
	`GameS‹
()

48 , 
	`video_modes
(
NULL
)

49 , 
	`chd_widg‘
()

50 , 
	`ok_bu‰Ú
(
NULL
)

51 , 
	`deçuÉs_bu‰Ú
(
NULL
)

52 , 
	`ÿnûl_bu‰Ú
(
NULL
)

53 , 
	`imgFeName
(
mods
->
	`loÿ‹
("images/menus/config.png"))

54 , 
	`t_buf
()

55 , 
	`šput_key
(0)

56 , 
	$check_»sŞutiÚ
(
Œue
)

59 
SDL_Surçû
 * 
tmp
 = 
	`IMG_Lßd
(
imgFeName
.
	`c_¡r
());

60 ià(!
tmp
) {

61 
	`årštf
(
¡d”r
, "Could‚Ù†ßd imag\"%s\"\n", 
imgFeName
.
	`c_¡r
());

63 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(
tmp
);

64 
	`SDL_F»eSurçû
(
tmp
);

67 
	`š™
();

68 
	`upd©e
();

69 
	}
}

71 
	gGameS‹CÚfig
::
	$š™
() {

73 
t
 = 
Ãw
 
	`Widg‘ToŞt
();

75 
ok_bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

76 
deçuÉs_bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

77 
ÿnûl_bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

79 
ok_bu‰Ú
->
Ïb–
 = 
msg
->
	`g‘
("OK");

80 
ok_bu‰Ú
->
pos
.
x
 = 
VIEW_W_HALF
 - ok_bu‰Ú->pos.
w
/2;

81 
ok_bu‰Ú
->
pos
.
y
 = 
VIEW_H
 - (
ÿnûl_bu‰Ú
->pos.
h
*3);

82 
ok_bu‰Ú
->
	`»äesh
();

84 
deçuÉs_bu‰Ú
->
Ïb–
 = 
msg
->
	`g‘
("Defaults");

85 
deçuÉs_bu‰Ú
->
pos
.
x
 = 
VIEW_W_HALF
 - deçuÉs_bu‰Ú->pos.
w
/2;

86 
deçuÉs_bu‰Ú
->
pos
.
y
 = 
VIEW_H
 - (
ÿnûl_bu‰Ú
->pos.
h
*2);

87 
deçuÉs_bu‰Ú
->
	`»äesh
();

89 
ÿnûl_bu‰Ú
->
Ïb–
 = 
msg
->
	`g‘
("Cancel");

90 
ÿnûl_bu‰Ú
->
pos
.
x
 = 
VIEW_W_HALF
 - cªûl_bu‰Ú->pos.
w
/2;

91 
ÿnûl_bu‰Ú
->
pos
.
y
 = 
VIEW_H
 - (ÿnûl_bu‰Ú->pos.
h
);

92 
ÿnûl_bu‰Ú
->
	`»äesh
();

94 
veùÜ
<
¡ršg
> 
mod_dœs
;

95 
	`g‘DœLi¡
(
PATH_DATA
 + "mods", 
mod_dœs
);

96 
mods_tÙ®
 = 
mod_dœs
.
	`size
();

98 
i
 = 0; i<
mods
->
mod_li¡
.
	`size
(); i++) {

99 
j
 = 0; j<
mod_dœs
.
	`size
(); j++) {

100 ià(
mods
->
mod_li¡
[
i
] =ğ
mod_dœs
[
j
] || 
FALLBACK_MOD
 =ğmod_dœs[j]èmod_dœs[j].
	`”a£
();

104 
fuÎsü“n_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

105 
fuÎsü“n_lb
 = 
Ãw
 
	`Widg‘Lab–
();

106 
mou£_move_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

107 
mou£_move_lb
 = 
Ãw
 
	`Widg‘Lab–
();

108 
comb©_‹xt_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

109 
comb©_‹xt_lb
 = 
Ãw
 
	`Widg‘Lab–
();

110 
hwsurçû_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

111 
hwsurçû_lb
 = 
Ãw
 
	`Widg‘Lab–
();

112 
doubËbuf_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

113 
doubËbuf_lb
 = 
Ãw
 
	`Widg‘Lab–
();

114 
’abË_joy¡ick_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

115 
’abË_joy¡ick_lb
 = 
Ãw
 
	`Widg‘Lab–
();

116 
‹xtu»_qu®™y_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

117 
‹xtu»_qu®™y_lb
 = 
Ãw
 
	`Widg‘Lab–
();

118 
chªge_gamma_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

119 
chªge_gamma_lb
 = 
Ãw
 
	`Widg‘Lab–
();

120 
ªim©ed_tes_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

121 
ªim©ed_tes_lb
 = 
Ãw
 
	`Widg‘Lab–
();

122 
mou£_aim_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

123 
mou£_aim_lb
 = 
Ãw
 
	`Widg‘Lab–
();

124 
show_ås_cb
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

125 
show_ås_lb
 = 
Ãw
 
	`Widg‘Lab–
();

126 
music_vŞume_¦
 = 
Ãw
 
	`Widg‘Slid”
(
mods
->
	`loÿ‹
("images/menus/buttons/slider_default.png"));

127 
music_vŞume_lb
 = 
Ãw
 
	`Widg‘Lab–
();

128 
sound_vŞume_¦
 = 
Ãw
 
	`Widg‘Slid”
(
mods
->
	`loÿ‹
("images/menus/buttons/slider_default.png"));

129 
sound_vŞume_lb
 = 
Ãw
 
	`Widg‘Lab–
();

130 
gamma_¦
 = 
Ãw
 
	`Widg‘Slid”
(
mods
->
	`loÿ‹
("images/menus/buttons/slider_default.png"));

131 
gamma_lb
 = 
Ãw
 
	`Widg‘Lab–
();

132 
»sŞutiÚ_lb
 = 
Ãw
 
	`Widg‘Lab–
();

133 
aùivemods_l¡b
 = 
Ãw
 
	`Widg‘Li¡Box
(
mods_tÙ®
, 10, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

134 
aùivemods_lb
 = 
Ãw
 
	`Widg‘Lab–
();

135 
šaùivemods_l¡b
 = 
Ãw
 
	`Widg‘Li¡Box
(
mods_tÙ®
, 10, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

136 
šaùivemods_lb
 = 
Ãw
 
	`Widg‘Lab–
();

137 
joy¡ick_deviû_l¡b
 = 
Ãw
 
	`Widg‘Li¡Box
(
	`SDL_NumJoy¡icks
(), 10, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

138 
joy¡ick_deviû_lb
 = 
Ãw
 
	`Widg‘Lab–
();

139 
Ïnguage_lb
 = 
Ãw
 
	`Widg‘Lab–
();

140 
hws_nÙe_lb
 = 
Ãw
 
	`Widg‘Lab–
();

141 
dbuf_nÙe_lb
 = 
Ãw
 
	`Widg‘Lab–
();

142 
ªim_tes_nÙe_lb
 = 
Ãw
 
	`Widg‘Lab–
();

143 
‹¡_nÙe_lb
 = 
Ãw
 
	`Widg‘Lab–
();

144 
aùivemods_shiáup_bŠ
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/up.png"));

145 
aùivemods_shiádown_bŠ
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/down.png"));

146 
aùivemods_d—ùiv©e_bŠ
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

147 
šaùivemods_aùiv©e_bŠ
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

149 
bCÚŒŞ
 = 
Ãw
 
	`Widg‘TabCÚŒŞ
(6);

150 
bCÚŒŞ
->
	`£tMašA»a
(((
VIEW_W
 - 
FRAME_W
)/2)+3, (
VIEW_H
 - 
FRAME_H
)/2, FRAME_W, FRAME_H);

151 
äame
 = 
bCÚŒŞ
->
	`g‘CÚ‹ÁA»a
();

154 
bCÚŒŞ
->
	`£tTabT™Ë
(0, 
msg
->
	`g‘
("Video"));

155 
bCÚŒŞ
->
	`£tTabT™Ë
(1, 
msg
->
	`g‘
("Audio"));

156 
bCÚŒŞ
->
	`£tTabT™Ë
(2, 
msg
->
	`g‘
("Interface"));

157 
bCÚŒŞ
->
	`£tTabT™Ë
(3, 
msg
->
	`g‘
("Input"));

158 
bCÚŒŞ
->
	`£tTabT™Ë
(4, 
msg
->
	`g‘
("Keybindings"));

159 
bCÚŒŞ
->
	`£tTabT™Ë
(5, 
msg
->
	`g‘
("Mods"));

160 
bCÚŒŞ
->
	`upd©eH—d”
();

162 
šput_cÚfœm
 = 
Ãw
 
	`M’uCÚfœm
("",
msg
->
	`g‘
("Assign: "));

163 
deçuÉs_cÚfœm
 = 
Ãw
 
	`M’uCÚfœm
(
msg
->
	`g‘
("Defaults"),msg->get("Reset ALL settings?"));

164 
»sŞutiÚ_cÚfœm
 = 
Ãw
 
	`M’uCÚfœm
(
msg
->
	`g‘
("OK"),msg->get("Usehis„esolution?"));

167 
i
 = 0; i < 25; i++) {

168 
£‰šgs_lb
[
i
] = 
Ãw
 
	`Widg‘Lab–
();

169 
£‰šgs_lb
[
i
]->
	`£t
(
š±
->
bšdšg_Çme
[i]);

170 
£‰šgs_lb
[
i
]->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

172 
i
 = 0; i < 50; i++) {

173 
£‰šgs_key
[
i
] = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

177 
»sŞutiÚs
 = 
	`g‘VideoModes
();

178 ià(
»sŞutiÚs
 < 1è
	`årštf
(
¡d”r
, "Unableo get„esolutions†ist!\n");

179 
»sŞutiÚ_l¡b
 = 
Ãw
 
	`Widg‘Li¡Box
(
»sŞutiÚs
, 10, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

180 
»sŞutiÚ_l¡b
->
ÿn_de£Ëù
 = 
çl£
;

183 
ÏngCouÁ
 = 
	`g‘LªguagesNumb”
();

184 
Ïnguage_ISO
 = 
¡d
::
veùÜ
<¡d::
¡ršg
>();

185 
Ïnguage_fuÎ
 = 
¡d
::
veùÜ
<¡d::
¡ršg
>();

186 
Ïnguage_ISO
.
	`»size
(
ÏngCouÁ
);

187 
Ïnguage_fuÎ
.
	`»size
(
ÏngCouÁ
);

188 
Ïnguage_l¡b
 = 
Ãw
 
	`Widg‘Li¡Box
(
ÏngCouÁ
, 10, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

189 
Ïnguage_l¡b
->
ÿn_de£Ëù
 = 
çl£
;

191 
	`»adCÚfig
();

194 
aùivemods_l¡b
->
muÉi_£Ëù
 = 
Œue
;

195 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
() ; i++) {

196 ià(
mods
->
mod_li¡
[
i
] !ğ
FALLBACK_MOD
)

197 
aùivemods_l¡b
->
	`­³nd
(
mods
->
mod_li¡
[
i
],"");

199 
chd_widg‘
.
	`push_back
(
aùivemods_l¡b
);

200 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

202 
šaùivemods_l¡b
->
muÉi_£Ëù
 = 
Œue
;

203 
i
 = 0; i < 
mod_dœs
.
	`size
(); i++) {

204 
šaùivemods_l¡b
->
	`­³nd
(
mod_dœs
[
i
],"");

206 
chd_widg‘
.
	`push_back
(
šaùivemods_l¡b
);

207 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

210 
Şd_v›w_w
 = 
VIEW_W
;

211 
Şd_v›w_h
 = 
VIEW_H
;

213 
»sŞutiÚ_cÚfœm_ticks
 = 0;

214 
	}
}

216 
	gGameS‹CÚfig
::
	$»adCÚfig
 () {

218 
x1
 = 0;

219 
y1
 = 0;

220 
x2
 = 0;

221 
y2
 = 0;

222 
£‰šg_num
 = 0;

223 
off£t_x
 = 0;

224 
off£t_y
 = 0;

226 
FeP¬£r
 
šfe
;

227 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/config.txt"))) {

228 
šfe
.
	`Ãxt
()) {

230 
šfe
.
v®
 = infile.val + ',';

231 
x1
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

232 
y1
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

233 
x2
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

234 
y2
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

236 
£‰šg_num
 = -1;

238 ià(
šfe
.
key
 == "listbox_scrollbar_offset") {

239 
aùivemods_l¡b
->
süŞlb¬_off£t
 = 
x1
;

240 
šaùivemods_l¡b
->
süŞlb¬_off£t
 = 
x1
;

241 
joy¡ick_deviû_l¡b
->
süŞlb¬_off£t
 = 
x1
;

242 
»sŞutiÚ_l¡b
->
süŞlb¬_off£t
 = 
x1
;

243 
Ïnguage_l¡b
->
süŞlb¬_off£t
 = 
x1
;

246 ià(
šfe
.
key
 == "fullscreen") {

247 
fuÎsü“n_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

248 
fuÎsü“n_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

249 
chd_widg‘
.
	`push_back
(
fuÎsü“n_cb
);

250 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

252 
fuÎsü“n_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

253 
fuÎsü“n_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

254 
fuÎsü“n_lb
->
	`£t
(
msg
->
	`g‘
("Full Screen Mode"));

255 
fuÎsü“n_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

256 
chd_widg‘
.
	`push_back
(
fuÎsü“n_lb
);

257 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

259 ià(
šfe
.
key
 == "mouse_move") {

260 
mou£_move_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

261 
mou£_move_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

262 
chd_widg‘
.
	`push_back
(
mou£_move_cb
);

263 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

265 
mou£_move_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

266 
mou£_move_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

267 
mou£_move_lb
->
	`£t
(
msg
->
	`g‘
("Move hero using mouse"));

268 
mou£_move_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

269 
chd_widg‘
.
	`push_back
(
mou£_move_lb
);

270 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

272 ià(
šfe
.
key
 == "combat_text") {

273 
comb©_‹xt_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

274 
comb©_‹xt_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

275 
chd_widg‘
.
	`push_back
(
comb©_‹xt_cb
);

276 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

278 
comb©_‹xt_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

279 
comb©_‹xt_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

280 
comb©_‹xt_lb
->
	`£t
(
msg
->
	`g‘
("Show combatext"));

281 
comb©_‹xt_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

282 
chd_widg‘
.
	`push_back
(
comb©_‹xt_lb
);

283 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

286 ià(
šfe
.
key
 == "hwsurface") {

287 
hwsurçû_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

288 
hwsurçû_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

289 
chd_widg‘
.
	`push_back
(
hwsurçû_cb
);

290 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

292 
hwsurçû_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

293 
hwsurçû_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

294 
hwsurçû_lb
->
	`£t
(
msg
->
	`g‘
("Hardware surfaces"));

295 
hwsurçû_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

296 
chd_widg‘
.
	`push_back
(
hwsurçû_lb
);

297 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

299 ià(
šfe
.
key
 == "doublebuf") {

300 
doubËbuf_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

301 
doubËbuf_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

302 
chd_widg‘
.
	`push_back
(
doubËbuf_cb
);

303 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

305 
doubËbuf_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

306 
doubËbuf_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

307 
doubËbuf_lb
->
	`£t
(
msg
->
	`g‘
("Double buffering"));

308 
doubËbuf_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

309 
chd_widg‘
.
	`push_back
(
doubËbuf_lb
);

310 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

313 ià(
šfe
.
key
 == "enable_joystick") {

314 
’abË_joy¡ick_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

315 
’abË_joy¡ick_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

316 
chd_widg‘
.
	`push_back
(
’abË_joy¡ick_cb
);

317 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

319 
’abË_joy¡ick_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

320 
’abË_joy¡ick_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

321 
’abË_joy¡ick_lb
->
	`£t
(
msg
->
	`g‘
("Use joystick"));

322 
’abË_joy¡ick_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

323 
chd_widg‘
.
	`push_back
(
’abË_joy¡ick_lb
);

324 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

326 ià(
šfe
.
key
 == "texture_quality") {

327 
‹xtu»_qu®™y_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

328 
‹xtu»_qu®™y_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

329 
chd_widg‘
.
	`push_back
(
‹xtu»_qu®™y_cb
);

330 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

332 
‹xtu»_qu®™y_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

333 
‹xtu»_qu®™y_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

334 
‹xtu»_qu®™y_lb
->
	`£t
(
msg
->
	`g‘
("High Quality Textures"));

335 
‹xtu»_qu®™y_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

336 
chd_widg‘
.
	`push_back
(
‹xtu»_qu®™y_lb
);

337 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

339 ià(
šfe
.
key
 == "change_gamma") {

340 
chªge_gamma_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

341 
chªge_gamma_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

342 
chd_widg‘
.
	`push_back
(
chªge_gamma_cb
);

343 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

345 
chªge_gamma_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

346 
chªge_gamma_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

347 
chªge_gamma_lb
->
	`£t
(
msg
->
	`g‘
("Allow changing gamma"));

348 
chªge_gamma_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

349 
chd_widg‘
.
	`push_back
(
chªge_gamma_lb
);

350 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

352 ià(
šfe
.
key
 == "animated_tiles") {

353 
ªim©ed_tes_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

354 
ªim©ed_tes_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

355 
chd_widg‘
.
	`push_back
(
ªim©ed_tes_cb
);

356 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

358 
ªim©ed_tes_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

359 
ªim©ed_tes_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

360 
ªim©ed_tes_lb
->
	`£t
(
msg
->
	`g‘
("Animatediles"));

361 
ªim©ed_tes_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

362 
chd_widg‘
.
	`push_back
(
ªim©ed_tes_lb
);

363 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

365 ià(
šfe
.
key
 == "mouse_aim") {

366 
mou£_aim_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

367 
mou£_aim_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

368 
chd_widg‘
.
	`push_back
(
mou£_aim_cb
);

369 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

371 
mou£_aim_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

372 
mou£_aim_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

373 
mou£_aim_lb
->
	`£t
(
msg
->
	`g‘
("Mouse‡im"));

374 
mou£_aim_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

375 
chd_widg‘
.
	`push_back
(
mou£_aim_lb
);

376 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

378 ià(
šfe
.
key
 == "show_fps") {

379 
show_ås_cb
->
pos
.
x
 = 
äame
.x + 
x2
;

380 
show_ås_cb
->
pos
.
y
 = 
äame
.y + 
y2
;

381 
chd_widg‘
.
	`push_back
(
show_ås_cb
);

382 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

384 
show_ås_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

385 
show_ås_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

386 
show_ås_lb
->
	`£t
(
msg
->
	`g‘
("Show FPS"));

387 
show_ås_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

388 
chd_widg‘
.
	`push_back
(
show_ås_lb
);

389 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

392 ià(
šfe
.
key
 == "music_volume") {

393 
music_vŞume_¦
->
pos
.
x
 = 
äame
.x + 
x2
;

394 
music_vŞume_¦
->
pos
.
y
 = 
äame
.y + 
y2
;

395 
chd_widg‘
.
	`push_back
(
music_vŞume_¦
);

396 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 1;

398 
music_vŞume_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

399 
music_vŞume_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

400 
music_vŞume_lb
->
	`£t
(
msg
->
	`g‘
("Music Volume"));

401 
music_vŞume_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

402 
chd_widg‘
.
	`push_back
(
music_vŞume_lb
);

403 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 1;

405 ià(
šfe
.
key
 == "sound_volume") {

406 
sound_vŞume_¦
->
pos
.
x
 = 
äame
.x + 
x2
;

407 
sound_vŞume_¦
->
pos
.
y
 = 
äame
.y + 
y2
;

408 
chd_widg‘
.
	`push_back
(
sound_vŞume_¦
);

409 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 1;

411 
sound_vŞume_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

412 
sound_vŞume_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

413 
sound_vŞume_lb
->
	`£t
(
msg
->
	`g‘
("Sound Volume"));

414 
sound_vŞume_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

415 
chd_widg‘
.
	`push_back
(
sound_vŞume_lb
);

416 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 1;

418 ià(
šfe
.
key
 == "gamma") {

419 
gamma_¦
->
pos
.
x
 = 
äame
.x + 
x2
;

420 
gamma_¦
->
pos
.
y
 = 
äame
.y + 
y2
;

421 
chd_widg‘
.
	`push_back
(
gamma_¦
);

422 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

424 
gamma_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

425 
gamma_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

426 
gamma_lb
->
	`£t
(
msg
->
	`g‘
("Gamma"));

427 
gamma_lb
->
	`£tJu¡ify
(
JUSTIFY_RIGHT
);

428 
chd_widg‘
.
	`push_back
(
gamma_lb
);

429 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

432 ià(
šfe
.
key
 == "resolution") {

433 
»sŞutiÚ_l¡b
->
pos
.
x
 = 
äame
.x + 
x2
;

434 
»sŞutiÚ_l¡b
->
pos
.
y
 = 
äame
.y + 
y2
;

435 
chd_widg‘
.
	`push_back
(
»sŞutiÚ_l¡b
);

436 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

438 
»sŞutiÚ_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

439 
»sŞutiÚ_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

440 
»sŞutiÚ_lb
->
	`£t
(
msg
->
	`g‘
("Resolution"));

441 
chd_widg‘
.
	`push_back
(
»sŞutiÚ_lb
);

442 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

445 ià(
šfe
.
key
 == "activemods") {

446 
aùivemods_l¡b
->
pos
.
x
 = 
äame
.x + 
x2
;

447 
aùivemods_l¡b
->
pos
.
y
 = 
äame
.y + 
y2
;

449 
aùivemods_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

450 
aùivemods_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

451 
aùivemods_lb
->
	`£t
(
msg
->
	`g‘
("Active Mods"));

452 
chd_widg‘
.
	`push_back
(
aùivemods_lb
);

453 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

455 ià(
šfe
.
key
 == "inactivemods") {

456 
šaùivemods_l¡b
->
pos
.
x
 = 
äame
.x + 
x2
;

457 
šaùivemods_l¡b
->
pos
.
y
 = 
äame
.y + 
y2
;

459 
šaùivemods_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

460 
šaùivemods_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

461 
šaùivemods_lb
->
	`£t
(
msg
->
	`g‘
("Available Mods"));

462 
chd_widg‘
.
	`push_back
(
šaùivemods_lb
);

463 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

465 ià(
šfe
.
key
 == "joystick_device") {

466 
joy¡ick_deviû_l¡b
->
pos
.
x
 = 
äame
.x + 
x2
;

467 
joy¡ick_deviû_l¡b
->
pos
.
y
 = 
äame
.y + 
y2
;

468 
i
 = 0; i < 
	`SDL_NumJoy¡icks
(); i++) {

469 ià(
	`SDL_Joy¡ickName
(
i
è!ğ
NULL
)

470 
joy¡ick_deviû_l¡b
->
	`­³nd
(
	`SDL_Joy¡ickName
(
i
),SDL_JoystickName(i));

472 
chd_widg‘
.
	`push_back
(
joy¡ick_deviû_l¡b
);

473 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

475 
joy¡ick_deviû_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

476 
joy¡ick_deviû_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

477 
joy¡ick_deviû_lb
->
	`£t
(
msg
->
	`g‘
("Joystick"));

478 
chd_widg‘
.
	`push_back
(
joy¡ick_deviû_lb
);

479 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 3;

481 ià(
šfe
.
key
 == "language") {

482 
Ïnguage_l¡b
->
pos
.
x
 = 
äame
.x + 
x2
;

483 
Ïnguage_l¡b
->
pos
.
y
 = 
äame
.y + 
y2
;

484 
chd_widg‘
.
	`push_back
(
Ïnguage_l¡b
);

485 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

487 
Ïnguage_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

488 
Ïnguage_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

489 
Ïnguage_lb
->
	`£t
(
msg
->
	`g‘
("Language"));

490 
chd_widg‘
.
	`push_back
(
Ïnguage_lb
);

491 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 2;

494 ià(
šfe
.
key
 =ğ"ÿnûl"è
£‰šg_num
 = 
CANCEL
;

495 ià(
šfe
.
key
 =ğ"acû±"è
£‰šg_num
 = 
ACCEPT
;

496 ià(
šfe
.
key
 =ğ"up"è
£‰šg_num
 = 
UP
;

497 ià(
šfe
.
key
 =ğ"down"è
£‰šg_num
 = 
DOWN
;

498 ià(
šfe
.
key
 =ğ"Ëá"è
£‰šg_num
 = 
LEFT
;

499 ià(
šfe
.
key
 =ğ"right"è
£‰šg_num
 = 
RIGHT
;

500 ià(
šfe
.
key
 =ğ"b¬1"è
£‰šg_num
 = 
BAR_1
;

501 ià(
šfe
.
key
 =ğ"b¬2"è
£‰šg_num
 = 
BAR_2
;

502 ià(
šfe
.
key
 =ğ"b¬3"è
£‰šg_num
 = 
BAR_3
;

503 ià(
šfe
.
key
 =ğ"b¬4"è
£‰šg_num
 = 
BAR_4
;

504 ià(
šfe
.
key
 =ğ"b¬5"è
£‰šg_num
 = 
BAR_5
;

505 ià(
šfe
.
key
 =ğ"b¬6"è
£‰šg_num
 = 
BAR_6
;

506 ià(
šfe
.
key
 =ğ"b¬7"è
£‰šg_num
 = 
BAR_7
;

507 ià(
šfe
.
key
 =ğ"b¬8"è
£‰šg_num
 = 
BAR_8
;

508 ià(
šfe
.
key
 =ğ"b¬9"è
£‰šg_num
 = 
BAR_9
;

509 ià(
šfe
.
key
 =ğ"b¬0"è
£‰šg_num
 = 
BAR_0
;

510 ià(
šfe
.
key
 =ğ"maš1"è
£‰šg_num
 = 
MAIN1
;

511 ià(
šfe
.
key
 =ğ"maš2"è
£‰šg_num
 = 
MAIN2
;

512 ià(
šfe
.
key
 =ğ"ch¬aù”"è
£‰šg_num
 = 
CHARACTER
;

513 ià(
šfe
.
key
 =ğ"šv’tÜy"è
£‰šg_num
 = 
INVENTORY
;

514 ià(
šfe
.
key
 =ğ"pow”s"è
£‰šg_num
 = 
POWERS
;

515 ià(
šfe
.
key
 =ğ"log"è
£‰šg_num
 = 
LOG
;

516 ià(
šfe
.
key
 =ğ"ù¾"è
£‰šg_num
 = 
CTRL
;

517 ià(
šfe
.
key
 =ğ"shiá"è
£‰šg_num
 = 
SHIFT
;

518 ià(
šfe
.
key
 =ğ"d–‘e"è
£‰šg_num
 = 
DEL
;

521 ià(
šfe
.
key
 == "hws_note") {

522 
hws_nÙe_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

523 
hws_nÙe_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

524 
hws_nÙe_lb
->
	`£t
(
msg
->
	`g‘
("Disable for…erformance"));

525 
chd_widg‘
.
	`push_back
(
hws_nÙe_lb
);

526 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

528 ià(
šfe
.
key
 == "dbuf_note") {

529 
dbuf_nÙe_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

530 
dbuf_nÙe_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

531 
dbuf_nÙe_lb
->
	`£t
(
msg
->
	`g‘
("Disable for…erformance"));

532 
chd_widg‘
.
	`push_back
(
dbuf_nÙe_lb
);

533 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

535 ià(
šfe
.
key
 == "anim_tiles_note") {

536 
ªim_tes_nÙe_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

537 
ªim_tes_nÙe_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

538 
ªim_tes_nÙe_lb
->
	`£t
(
msg
->
	`g‘
("Disable for…erformance"));

539 
chd_widg‘
.
	`push_back
(
ªim_tes_nÙe_lb
);

540 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

542 ià(
šfe
.
key
 == "test_note") {

543 
‹¡_nÙe_lb
->
	`£tX
(
äame
.
x
 + 
x1
);

544 
‹¡_nÙe_lb
->
	`£tY
(
äame
.
y
 + 
y1
);

545 
‹¡_nÙe_lb
->
	`£t
(
msg
->
	`g‘
("Experimental"));

546 
chd_widg‘
.
	`push_back
(
‹¡_nÙe_lb
);

547 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 0;

550 ià(
šfe
.
key
 == "activemods_shiftup") {

551 
aùivemods_shiáup_bŠ
->
pos
.
x
 = 
äame
.x + 
x1
;

552 
aùivemods_shiáup_bŠ
->
pos
.
y
 = 
äame
.y + 
y1
;

553 
aùivemods_shiáup_bŠ
->
	`»äesh
();

554 
chd_widg‘
.
	`push_back
(
aùivemods_shiáup_bŠ
);

555 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

557 ià(
šfe
.
key
 == "activemods_shiftdown") {

558 
aùivemods_shiádown_bŠ
->
pos
.
x
 = 
äame
.x + 
x1
;

559 
aùivemods_shiádown_bŠ
->
pos
.
y
 = 
äame
.y + 
y1
;

560 
aùivemods_shiádown_bŠ
->
	`»äesh
();

561 
chd_widg‘
.
	`push_back
(
aùivemods_shiádown_bŠ
);

562 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

564 ià(
šfe
.
key
 == "activemods_deactivate") {

565 
aùivemods_d—ùiv©e_bŠ
->
Ïb–
 = 
msg
->
	`g‘
("<< Disable");

566 
aùivemods_d—ùiv©e_bŠ
->
pos
.
x
 = 
äame
.x + 
x1
;

567 
aùivemods_d—ùiv©e_bŠ
->
pos
.
y
 = 
äame
.y + 
y1
;

568 
aùivemods_d—ùiv©e_bŠ
->
	`»äesh
();

569 
chd_widg‘
.
	`push_back
(
aùivemods_d—ùiv©e_bŠ
);

570 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

572 ià(
šfe
.
key
 == "inactivemods_activate") {

573 
šaùivemods_aùiv©e_bŠ
->
Ïb–
 = 
msg
->
	`g‘
("Enable >>");

574 
šaùivemods_aùiv©e_bŠ
->
pos
.
x
 = 
äame
.x + 
x1
;

575 
šaùivemods_aùiv©e_bŠ
->
pos
.
y
 = 
äame
.y + 
y1
;

576 
šaùivemods_aùiv©e_bŠ
->
	`»äesh
();

577 
chd_widg‘
.
	`push_back
(
šaùivemods_aùiv©e_bŠ
);

578 
İtiÚb
[
chd_widg‘
.
	`size
()-1] = 5;

580 ià(
šfe
.
key
 == "secondary_offset") {

581 
off£t_x
 = 
x1
;

582 
off£t_y
 = 
y1
;

584 ià(
šfe
.
key
 == "keybinds_bg_color") {

586 
süŞÍªe_cŞÜ
.
r
 = 
x1
;

587 
süŞÍªe_cŞÜ
.
g
 = 
y1
;

588 
süŞÍªe_cŞÜ
.
b
 = 
x2
;

590 ià(
šfe
.
key
 == "scrollpane") {

591 
süŞÍªe
.
x
 = 
x1
;

592 
süŞÍªe
.
y
 = 
y1
;

593 
süŞÍªe
.
w
 = 
x2
;

594 
süŞÍªe
.
h
 = 
y2
;

596 ià(
šfe
.
key
 == "scrollpane_contents") {

597 
süŞÍªe_cÚ‹Ás
 = 
x1
;

600 ià(
£‰šg_num
 > -1 && setting_num < 25) {

602 
£‰šgs_lb
[
£‰šg_num
]->
	`£tX
(
x1
);

603 
£‰šgs_lb
[
£‰šg_num
]->
	`£tY
(
y1
);

604 
£‰šgs_key
[
£‰šg_num
]->
pos
.
x
 = 
x2
;

605 
£‰šgs_key
[
£‰šg_num
]->
pos
.
y
 = 
y2
;

609 
šfe
.
	`şo£
();

610 } 
	`årštf
(
¡d”r
, "Unableo open menus/config.txt!\n");

613 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/menus.txt"))) {

614 
m’u_šdex
 = -1;

615 
šfe
.
	`Ãxt
()) {

616 ià(
šfe
.
key
 == "id") {

617 ià(
šfe
.
v®
 =ğ"cÚfœm"è
m’u_šdex
 = 0;

618 
m’u_šdex
 = -1;

621 ià(
m’u_šdex
 == -1)

624 ià(
šfe
.
key
 == "layout") {

625 
šfe
.
v®
 = infile.val + ',';

626 
m’uCÚfœm_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

627 
m’uCÚfœm_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

628 
m’uCÚfœm_¬—
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

629 
m’uCÚfœm_¬—
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

632 ià(
šfe
.
key
 == "align") {

633 
m’uCÚfœm_®ign
 = 
šfe
.
v®
;

636 
šfe
.
	`şo£
();

637 } 
	`årštf
(
¡d”r
, "Unableo open menus/menus.txt!\n");

639 
deçuÉs_cÚfœm
->
wšdow_¬—
 = 
m’uCÚfœm_¬—
;

640 
deçuÉs_cÚfœm
->
®ignm’t
 = 
m’uCÚfœm_®ign
;

641 
deçuÉs_cÚfœm
->
	`®ign
();

642 
deçuÉs_cÚfœm
->
	`upd©e
();

644 
»sŞutiÚ_cÚfœm
->
wšdow_¬—
 = 
m’uCÚfœm_¬—
;

645 
»sŞutiÚ_cÚfœm
->
®ignm’t
 = 
m’uCÚfœm_®ign
;

646 
»sŞutiÚ_cÚfœm
->
	`®ign
();

647 
»sŞutiÚ_cÚfœm
->
	`upd©e
();

650 
šput_süŞlbox
 = 
Ãw
 
	`Widg‘SüŞlBox
(
süŞÍªe
.
w
, süŞÍªe.
h
);

651 
šput_süŞlbox
->
pos
.
x
 = 
süŞÍªe
.x + 
äame
.x;

652 
šput_süŞlbox
->
pos
.
y
 = 
süŞÍªe
.y + 
äame
.y;

653 
šput_süŞlbox
->
	`»size
(
süŞÍªe_cÚ‹Ás
);

654 
šput_süŞlbox
->
bg
.
r
 = 
süŞÍªe_cŞÜ
.r;

655 
šput_süŞlbox
->
bg
.
g
 = 
süŞÍªe_cŞÜ
.g;

656 
šput_süŞlbox
->
bg
.
b
 = 
süŞÍªe_cŞÜ
.b;

659 
i
 = 25; i < 50; i++) {

660 
£‰šgs_key
[
i
]->
pos
.
x
 = s‘tšgs_key[i-25]->pos.x + 
off£t_x
;

661 
£‰šgs_key
[
i
]->
pos
.
y
 = s‘tšgs_key[i-25]->pos.y + 
off£t_y
;

663 
	}
}

665 
	gGameS‹CÚfig
::
	$upd©e
 () {

666 ià(
FULLSCREEN
è
fuÎsü“n_cb
->
	`Check
();

667 
fuÎsü“n_cb
->
	`unCheck
();

668 ià(
AUDIO
) {

669 
music_vŞume_¦
->
	`£t
(0,128,
MUSIC_VOLUME
);

670 
	`Mix_VŞumeMusic
(
MUSIC_VOLUME
);

671 
sound_vŞume_¦
->
	`£t
(0,128,
SOUND_VOLUME
);

672 
	`Mix_VŞume
(-1, 
SOUND_VOLUME
);

674 
music_vŞume_¦
->
	`£t
(0,128,0);

675 
sound_vŞume_¦
->
	`£t
(0,128,0);

677 ià(
MOUSE_MOVE
è
mou£_move_cb
->
	`Check
();

678 
mou£_move_cb
->
	`unCheck
();

679 ià(
COMBAT_TEXT
è
comb©_‹xt_cb
->
	`Check
();

680 
comb©_‹xt_cb
->
	`unCheck
();

681 ià(
HWSURFACE
è
hwsurçû_cb
->
	`Check
();

682 
hwsurçû_cb
->
	`unCheck
();

683 ià(
DOUBLEBUF
è
doubËbuf_cb
->
	`Check
();

684 
doubËbuf_cb
->
	`unCheck
();

685 ià(
ENABLE_JOYSTICK
è
’abË_joy¡ick_cb
->
	`Check
();

686 
’abË_joy¡ick_cb
->
	`unCheck
();

687 ià(
TEXTURE_QUALITY
è
‹xtu»_qu®™y_cb
->
	`Check
();

688 
‹xtu»_qu®™y_cb
->
	`unCheck
();

689 ià(
CHANGE_GAMMA
è
chªge_gamma_cb
->
	`Check
();

691 
chªge_gamma_cb
->
	`unCheck
();

692 
GAMMA
 = 1.0;

694 
gamma_¦
->
	`£t
(5,20,()(
GAMMA
*10.0));

695 
	`SDL_S‘Gamma
(
GAMMA
,GAMMA,GAMMA);

697 ià(
ANIMATED_TILES
è
ªim©ed_tes_cb
->
	`Check
();

698 
ªim©ed_tes_cb
->
	`unCheck
();

699 ià(
MOUSE_AIM
è
mou£_aim_cb
->
	`Check
();

700 
mou£_aim_cb
->
	`unCheck
();

701 ià(
SHOW_FPS
è
show_ås_cb
->
	`Check
();

702 
show_ås_cb
->
	`unCheck
();

704 
¡d
::
¡ršg¡»am
 
li¡_mode
;

705 
»sŞutiÚs
 = 
	`g‘VideoModes
();

706 
i
=0; i<
»sŞutiÚs
; ++i) {

707 
li¡_mode
 << 
video_modes
[
i
].
w
 << "x" << video_modes[i].
h
;

708 
»sŞutiÚ_l¡b
->
	`­³nd
(
li¡_mode
.
	`¡r
(),"");

709 ià(
video_modes
[
i
].
w
 =ğ
VIEW_W
 && video_modes[i].
h
 =ğ
VIEW_H
è
»sŞutiÚ_l¡b
->
£Ëùed
[i] = 
Œue
;

710 
»sŞutiÚ_l¡b
->
£Ëùed
[
i
] = 
çl£
;

711 
li¡_mode
.
	`¡r
("");

713 
»sŞutiÚ_l¡b
->
	`»äesh
();

715 
	`SDL_In™
(
SDL_INIT_JOYSTICK
);

716 ià(
ENABLE_JOYSTICK
 && 
	`SDL_NumJoy¡icks
() > 0) {

717 
	`SDL_Joy¡ickClo£
(
joy
);

718 
joy
 = 
	`SDL_Joy¡ickO³n
(
JOYSTICK_DEVICE
);

719 
joy¡ick_deviû_l¡b
->
£Ëùed
[
JOYSTICK_DEVICE
] = 
Œue
;

721 
joy¡ick_deviû_l¡b
->
	`»äesh
();

723 ià(!
	`g‘LªguagesLi¡
()è
	`årštf
(
¡d”r
, "Unableo get†anguages†ist!\n");

724 
i
=0; i < 
	`g‘LªguagesNumb”
(); i++) {

725 
Ïnguage_l¡b
->
	`­³nd
(
Ïnguage_fuÎ
[
i
],"");

726 ià(
Ïnguage_ISO
[
i
] =ğ
LANGUAGE
è
Ïnguage_l¡b
->
£Ëùed
[i] = 
Œue
;

728 
Ïnguage_l¡b
->
	`»äesh
();

730 
aùivemods_l¡b
->
	`»äesh
();

731 
šaùivemods_l¡b
->
	`»äesh
();

733 
i
 = 0; i < 25; i++) {

734 ià(
š±
->
bšdšg
[
i
] < 8) {

735 
£‰šgs_key
[
i
]->
Ïb–
 = 
š±
->
mou£_bu‰Ú
[š±->
bšdšg
[i]-1];

737 
£‰šgs_key
[
i
]->
Ïb–
 = 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
bšdšg
[i]);

739 
£‰šgs_key
[
i
]->
	`»äesh
();

741 
i
 = 25; i < 50; i++) {

742 ià(
š±
->
bšdšg_®t
[
i
-25] < 8) {

743 
£‰šgs_key
[
i
]->
Ïb–
 = 
š±
->
mou£_bu‰Ú
[š±->
bšdšg_®t
[i-25]-1];

745 
£‰šgs_key
[
i
]->
Ïb–
 = 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
bšdšg_®t
[i-25]);

747 
£‰šgs_key
[
i
]->
	`»äesh
();

749 
šput_süŞlbox
->
	`»äesh
();

750 
	}
}

752 
	gGameS‹CÚfig
::
	$logic
 ()

754 
check_»sŞutiÚ
 = 
Œue
;

756 
¡d
::
¡ršg
 
»sŞutiÚ_v®ue
;

757 
»sŞutiÚ_v®ue
 = 
»sŞutiÚ_l¡b
->
	`g‘V®ue
() + 'x';

758 
width
 = 
	`—tFœ¡IÁ
(
»sŞutiÚ_v®ue
, 'x');

759 
height
 = 
	`—tFœ¡IÁ
(
»sŞutiÚ_v®ue
, 'x');

763 ià(
width
 =ğ0 || 
height
 == 0) {

764 
width
 = 
VIEW_W
;

765 
height
 = 
VIEW_H
;

768 ià(
deçuÉs_cÚfœm
->
visibË
) {

769 
deçuÉs_cÚfœm
->
	`logic
();

770 ià(
deçuÉs_cÚfœm
->
cÚfœmClicked
) {

771 
check_»sŞutiÚ
 = 
çl£
;

772 
FULLSCREEN
 = 0;

773 
	`lßdDeçuÉs
();

774 
	`lßdMiscS‘tšgs
();

775 
š±
->
	`deçuÉQw”tyKeyBšdšgs
();

776 
d–‘e
 
msg
;

777 
msg
 = 
Ãw
 
	`Mes§geEngše
();

778 
	`upd©e
();

779 
deçuÉs_cÚfœm
->
visibË
 = 
çl£
;

780 
deçuÉs_cÚfœm
->
cÚfœmClicked
 = 
çl£
;

784 ià(
»sŞutiÚ_cÚfœm
->
visibË
 ||„esŞutiÚ_cÚfœm->
ÿnûlClicked
) {

785 
»sŞutiÚ_cÚfœm
->
	`logic
();

786 
»sŞutiÚ_cÚfœm_ticks
--;

787 ià(
»sŞutiÚ_cÚfœm
->
cÚfœmClicked
) {

788 
	`§veS‘tšgs
();

789 
d–‘e
 
»que¡edGameS‹
;

790 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

791 } ià(
»sŞutiÚ_cÚfœm
->
ÿnûlClicked
 || 
»sŞutiÚ_cÚfœm_ticks
 == 0) {

792 
	`­¶yVideoS‘tšgs
(
sü“n
, 
Şd_v›w_w
, 
Şd_v›w_h
);

793 
	`§veS‘tšgs
();

794 
d–‘e
 
»que¡edGameS‹
;

795 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹CÚfig
();

799 ià(!
šput_cÚfœm
->
visibË
 && !
deçuÉs_cÚfœm
->visibË && !
»sŞutiÚ_cÚfœm
->visible) {

800 
bCÚŒŞ
->
	`logic
();

803 ià(
ok_bu‰Ú
->
	`checkClick
()) {

804 
š±
->
	`§veKeyBšdšgs
();

805 
š±
->
	`£tKeybšdNames
();

806 ià(
	`£tMods
()) {

807 
»lßd_music
 = 
Œue
;

808 
d–‘e
 
mods
;

809 
mods
 = 
Ãw
 
	`ModMªag”
();

810 
	`lßdTe£tS‘tšgs
();

812 
	`lßdMiscS‘tšgs
();

813 
	`»äeshFÚt
();

814 ià((
ENABLE_JOYSTICK
è&& (
	`SDL_NumJoy¡icks
() > 0)) {

815 
	`SDL_Joy¡ickClo£
(
joy
);

816 
joy
 = 
	`SDL_Joy¡ickO³n
(
JOYSTICK_DEVICE
);

818 
	`­¶yVideoS‘tšgs
(
sü“n
, 
width
, 
height
);

819 ià(
width
 !ğ
Şd_v›w_w
 || 
height
 !ğ
Şd_v›w_h
) {

820 
»sŞutiÚ_cÚfœm
->
wšdow_¬—
 = 
m’uCÚfœm_¬—
;

821 
»sŞutiÚ_cÚfœm
->
	`®ign
();

822 
»sŞutiÚ_cÚfœm
->
	`upd©e
();

823 
»sŞutiÚ_cÚfœm_ticks
 = 
MAX_FRAMES_PER_SEC
 * 10;

825 
	`§veS‘tšgs
();

826 
d–‘e
 
»que¡edGameS‹
;

827 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

829 } ià(
deçuÉs_bu‰Ú
->
	`checkClick
()) {

830 
deçuÉs_cÚfœm
->
visibË
 = 
Œue
;

831 } ià(
ÿnûl_bu‰Ú
->
	`checkClick
()) {

832 
check_»sŞutiÚ
 = 
çl£
;

833 
	`lßdS‘tšgs
();

834 
	`lßdMiscS‘tšgs
();

835 
š±
->
	`lßdKeyBšdšgs
();

836 
d–‘e
 
msg
;

837 
msg
 = 
Ãw
 
	`Mes§geEngše
();

838 
	`upd©e
();

839 
d–‘e
 
»que¡edGameS‹
;

840 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

844 
aùive_b
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

847 ià(
aùive_b
 =ğ0 && !
deçuÉs_cÚfœm
->
visibË
) {

848 ià(
fuÎsü“n_cb
->
	`checkClick
()) {

849 ià(
fuÎsü“n_cb
->
	`isChecked
()è
FULLSCREEN
=
Œue
;

850 
FULLSCREEN
=
çl£
;

851 } ià(
hwsurçû_cb
->
	`checkClick
()) {

852 ià(
hwsurçû_cb
->
	`isChecked
()è
HWSURFACE
=
Œue
;

853 
HWSURFACE
=
çl£
;

854 } ià(
doubËbuf_cb
->
	`checkClick
()) {

855 ià(
doubËbuf_cb
->
	`isChecked
()è
DOUBLEBUF
=
Œue
;

856 
DOUBLEBUF
=
çl£
;

857 } ià(
‹xtu»_qu®™y_cb
->
	`checkClick
()) {

858 ià(
‹xtu»_qu®™y_cb
->
	`isChecked
()è
TEXTURE_QUALITY
=
Œue
;

859 
TEXTURE_QUALITY
=
çl£
;

860 } ià(
chªge_gamma_cb
->
	`checkClick
()) {

861 ià(
chªge_gamma_cb
->
	`isChecked
()è
CHANGE_GAMMA
=
Œue
;

863 
CHANGE_GAMMA
=
çl£
;

864 
GAMMA
 = 1.0;

865 
gamma_¦
->
	`£t
(5,20,()(
GAMMA
*10.0));

866 
	`SDL_S‘Gamma
(
GAMMA
,GAMMA,GAMMA);

868 } ià(
ªim©ed_tes_cb
->
	`checkClick
()) {

869 ià(
ªim©ed_tes_cb
->
	`isChecked
()è
ANIMATED_TILES
=
Œue
;

870 
ANIMATED_TILES
=
çl£
;

871 } ià(
»sŞutiÚ_l¡b
->
	`checkClick
()) {

873 } ià(
CHANGE_GAMMA
) {

874 ià(
gamma_¦
->
	`checkClick
()) {

875 
GAMMA
=(
gamma_¦
->
	`g‘V®ue
())*0.1f;

876 
	`SDL_S‘Gamma
(
GAMMA
,GAMMA,GAMMA);

881 ià(
aùive_b
 =ğ1 && !
deçuÉs_cÚfœm
->
visibË
) {

882 ià(
AUDIO
) {

883 ià(
music_vŞume_¦
->
	`checkClick
()) {

884 ià(
MUSIC_VOLUME
 == 0)

885 
»lßd_music
 = 
Œue
;

886 
MUSIC_VOLUME
=
music_vŞume_¦
->
	`g‘V®ue
();

887 
	`Mix_VŞumeMusic
(
MUSIC_VOLUME
);

888 } ià(
sound_vŞume_¦
->
	`checkClick
()) {

889 
SOUND_VOLUME
=
sound_vŞume_¦
->
	`g‘V®ue
();

890 
	`Mix_VŞume
(-1, 
SOUND_VOLUME
);

895 ià(
aùive_b
 =ğ2 && !
deçuÉs_cÚfœm
->
visibË
) {

896 ià(
comb©_‹xt_cb
->
	`checkClick
()) {

897 ià(
comb©_‹xt_cb
->
	`isChecked
()è
COMBAT_TEXT
=
Œue
;

898 
COMBAT_TEXT
=
çl£
;

899 } ià(
Ïnguage_l¡b
->
	`checkClick
()) {

900 
LANGUAGE
 = 
Ïnguage_ISO
[
Ïnguage_l¡b
->
	`g‘S–eùed
()];

901 
d–‘e
 
msg
;

902 
msg
 = 
Ãw
 
	`Mes§geEngše
();

903 } ià(
show_ås_cb
->
	`checkClick
()) {

904 ià(
show_ås_cb
->
	`isChecked
()è
SHOW_FPS
=
Œue
;

905 
SHOW_FPS
=
çl£
;

909 ià(
aùive_b
 =ğ3 && !
deçuÉs_cÚfœm
->
visibË
) {

910 ià(
mou£_move_cb
->
	`checkClick
()) {

911 ià(
mou£_move_cb
->
	`isChecked
()è
MOUSE_MOVE
=
Œue
;

912 
MOUSE_MOVE
=
çl£
;

913 } ià(
mou£_aim_cb
->
	`checkClick
()) {

914 ià(
mou£_aim_cb
->
	`isChecked
()è
MOUSE_AIM
=
Œue
;

915 
MOUSE_AIM
=
çl£
;

916 } ià(
’abË_joy¡ick_cb
->
	`checkClick
()) {

917 ià(
’abË_joy¡ick_cb
->
	`isChecked
()) {

918 
ENABLE_JOYSTICK
=
Œue
;

919 
š±
->
mou£_emuÏtiÚ
 = 
Œue
;

920 ià(
	`SDL_NumJoy¡icks
() > 0) {

921 
JOYSTICK_DEVICE
 = 0;

922 
	`SDL_Joy¡ickClo£
(
joy
);

923 
joy
 = 
	`SDL_Joy¡ickO³n
(
JOYSTICK_DEVICE
);

924 
joy¡ick_deviû_l¡b
->
£Ëùed
[
JOYSTICK_DEVICE
] = 
Œue
;

927 
ENABLE_JOYSTICK
=
çl£
;

928 
š±
->
mou£_emuÏtiÚ
 = 
çl£
;

929 
i
=0; i<
joy¡ick_deviû_l¡b
->
	`g‘Size
(); i++)

930 
joy¡ick_deviû_l¡b
->
£Ëùed
[
i
] = 
çl£
;

932 ià(
	`SDL_NumJoy¡icks
(è> 0è
joy¡ick_deviû_l¡b
->
	`»äesh
();

933 } ià(
joy¡ick_deviû_l¡b
->
	`checkClick
()) {

934 
JOYSTICK_DEVICE
 = 
joy¡ick_deviû_l¡b
->
	`g‘S–eùed
();

935 ià(
JOYSTICK_DEVICE
 != -1) {

936 
’abË_joy¡ick_cb
->
	`Check
();

937 
ENABLE_JOYSTICK
=
Œue
;

938 
š±
->
mou£_emuÏtiÚ
 = 
Œue
;

939 ià(
	`SDL_NumJoy¡icks
() > 0) {

940 
	`SDL_Joy¡ickClo£
(
joy
);

941 
joy
 = 
	`SDL_Joy¡ickO³n
(
JOYSTICK_DEVICE
);

944 
’abË_joy¡ick_cb
->
	`unCheck
();

945 
ENABLE_JOYSTICK
 = 
çl£
;

946 
š±
->
mou£_emuÏtiÚ
 = 
çl£
;

951 ià(
aùive_b
 =ğ4 && !
deçuÉs_cÚfœm
->
visibË
) {

952 ià(
šput_cÚfœm
->
visibË
) {

953 
šput_cÚfœm
->
	`logic
();

954 
	`sÿnKey
(
šput_key
);

956 
šput_süŞlbox
->
	`logic
();

957 ià(
	`isW™hš
(
šput_süŞlbox
->
pos
,
š±
->
mou£
)) {

958 
i
 = 0; i < 50; i++) {

959 ià(
£‰šgs_key
[
i
]->
´es£d
 || s‘tšgs_key[i]->
hov”
è
šput_süŞlbox
->
upd©e
 = 
Œue
;

960 
Pošt
 
mou£
 = 
šput_süŞlbox
->
	`šput_assi¡
(
š±
->mouse);

961 ià(
£‰šgs_key
[
i
]->
	`checkClick
(
mou£
.
x
,mou£.
y
)) {

962 
¡d
::
¡ršg
 
cÚfœm_msg
;

963 ià(
i
 < 25)

964 
cÚfœm_msg
 = 
msg
->
	`g‘
("Assign: "è+ 
š±
->
bšdšg_Çme
[
i
];

966 
cÚfœm_msg
 = 
msg
->
	`g‘
("Assign: "è+ 
š±
->
bšdšg_Çme
[
i
-25];

967 
d–‘e
 
šput_cÚfœm
;

968 
šput_cÚfœm
 = 
Ãw
 
	`M’uCÚfœm
("",
cÚfœm_msg
);

969 
šput_cÚfœm
->
wšdow_¬—
 = 
m’uCÚfœm_¬—
;

970 
šput_cÚfœm
->
®ignm’t
 = 
m’uCÚfœm_®ign
;

971 
šput_cÚfœm
->
	`®ign
();

972 
šput_cÚfœm
->
	`upd©e
();

973 
šput_cÚfœm
->
visibË
 = 
Œue
;

974 
šput_key
 = 
i
;

975 
š±
->
Ï¡_bu‰Ú
 = -1;

976 
š±
->
Ï¡_key
 = -1;

983 ià(
aùive_b
 =ğ5 && !
deçuÉs_cÚfœm
->
visibË
) {

984 ià(
aùivemods_l¡b
->
	`checkClick
()) {

986 } ià(
šaùivemods_l¡b
->
	`checkClick
()) {

988 } ià(
aùivemods_shiáup_bŠ
->
	`checkClick
()) {

989 
aùivemods_l¡b
->
	`shiáUp
();

990 } ià(
aùivemods_shiádown_bŠ
->
	`checkClick
()) {

991 
aùivemods_l¡b
->
	`shiáDown
();

992 } ià(
aùivemods_d—ùiv©e_bŠ
->
	`checkClick
()) {

993 
	`di§bËMods
();

994 } ià(
šaùivemods_aùiv©e_bŠ
->
	`checkClick
()) {

995 
	`’abËMods
();

998 
	}
}

1000 
	gGameS‹CÚfig
::
	$»nd”
 ()

1002 ià(
»sŞutiÚ_cÚfœm
->
visibË
) {

1003 
»sŞutiÚ_cÚfœm
->
	`»nd”
();

1007 
bheight
 = 
bCÚŒŞ
->
	`g‘TabHeight
();

1008 
SDL_Reù
 
pos
;

1009 
pos
.
x
 = (
VIEW_W
-
FRAME_W
)/2;

1010 
pos
.
y
 = (
VIEW_H
-
FRAME_H
)/2 + 
bheight
 -abheight/16;

1012 
	`SDL_Bl™Surçû
(
background
,
NULL
,
sü“n
,&
pos
);

1014 
bCÚŒŞ
->
	`»nd”
();

1017 
ok_bu‰Ú
->
	`»nd”
();

1018 
ÿnûl_bu‰Ú
->
	`»nd”
();

1019 
deçuÉs_bu‰Ú
->
	`»nd”
();

1021 
aùive_b
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

1024 ià(
aùive_b
 == 4) {

1025 ià(
šput_süŞlbox
->
upd©e
èšput_süŞlbox->
	`»äesh
();

1026 
i
 = 0; i < 25; i++) {

1027 ià(
šput_süŞlbox
->
upd©e
è
£‰šgs_lb
[
i
]->
	`»nd”
(šput_süŞlbox->
cÚ‹Ás
);

1029 
i
 = 0; i < 50; i++) {

1030 ià(
šput_süŞlbox
->
upd©e
è
£‰šgs_key
[
i
]->
	`»nd”
(šput_süŞlbox->
cÚ‹Ás
);

1032 
šput_süŞlbox
->
	`»nd”
();

1035 
i
 = 0; i < 
chd_widg‘
.
	`size
(); i++) {

1036 ià(
İtiÚb
[
i
] =ğ
aùive_b
è
chd_widg‘
[i]->
	`»nd”
();

1039 ià(
šput_cÚfœm
->
visibË
èšput_cÚfœm->
	`»nd”
();

1040 ià(
deçuÉs_cÚfœm
->
visibË
èdeçuÉs_cÚfœm->
	`»nd”
();

1045 
ToŞtD©a
 
t_Ãw
;

1046 ià(
aùive_b
 =ğ0 && 
t_Ãw
.
	`isEm±y
()èt_Ãw = 
»sŞutiÚ_l¡b
->
	`checkToŞt
(
š±
->
mou£
);

1047 ià(
aùive_b
 =ğ2 && 
t_Ãw
.
	`isEm±y
()èt_Ãw = 
Ïnguage_l¡b
->
	`checkToŞt
(
š±
->
mou£
);

1048 ià(
aùive_b
 =ğ3 && 
t_Ãw
.
	`isEm±y
()èt_Ãw = 
joy¡ick_deviû_l¡b
->
	`checkToŞt
(
š±
->
mou£
);

1049 ià(
aùive_b
 =ğ5 && 
t_Ãw
.
	`isEm±y
()èt_Ãw = 
aùivemods_l¡b
->
	`checkToŞt
(
š±
->
mou£
);

1050 ià(
aùive_b
 =ğ5 && 
t_Ãw
.
	`isEm±y
()èt_Ãw = 
šaùivemods_l¡b
->
	`checkToŞt
(
š±
->
mou£
);

1052 ià(!
t_Ãw
.
	`isEm±y
()) {

1053 ià(!
t_Ãw
.
	`com·»
(&
t_buf
)) {

1054 
t_buf
.
	`ş—r
();

1055 
t_buf
 = 
t_Ãw
;

1057 
t
->
	`»nd”
(
t_buf
, 
š±
->
mou£
, 
STYLE_FLOAT
);

1060 
	}
}

1062 
	gGameS‹CÚfig
::
	$g‘VideoModes
()

1064 
w
,
h
;

1065 ià(
MIN_VIEW_W
 !ğ-1è
w
 = MIN_VIEW_W;

1066 
w
 = 640;

1067 ià(
MIN_VIEW_H
 !ğ-1è
h
 = MIN_VIEW_H;

1068 
h
 = 480;

1071 cÚ¡ 
cm_couÁ
 = 4;

1072 
SDL_Reù
 
commÚ_modes
[
cm_couÁ
];

1073 
commÚ_modes
[0].
w
 = 640;

1074 
commÚ_modes
[0].
h
 = 480;

1075 
commÚ_modes
[1].
w
 = 800;

1076 
commÚ_modes
[1].
h
 = 600;

1077 
commÚ_modes
[2].
w
 = 1024;

1078 
commÚ_modes
[2].
h
 = 768;

1079 
commÚ_modes
[3].
w
 = w;

1080 
commÚ_modes
[3].
h
 = h;

1082 
modes
 = 0;

1085 
SDL_Reù
** 
d‘eù_modes
 = 
	`SDL_Li¡Modes
(
NULL
, 
SDL_FULLSCREEN
|
SDL_HWSURFACE
);

1088 ià(
d‘eù_modes
 =ğ(
SDL_Reù
**)0) {

1089 
	`årštf
(
¡d”r
, "No modes‡vailable!\n");

1094 ià(
d‘eù_modes
 =ğ(
SDL_Reù
**)-1) {

1095 
	`årštf
(
¡d”r
, "All„esolutions‡vailable.\n");

1099 
i
=0; 
d‘eù_modes
[i]; ++i) {

1100 ià(
d‘eù_modes
[
i
]->
w
 >ğw && d‘eù_modes[i]->
h
 >= h) {

1101 
modes
++;

1104 
j
=0; j<
cm_couÁ
; ++j) {

1105 
i
=0; 
d‘eù_modes
[i]; i++) {

1106 if(
commÚ_modes
[
j
].
w
 != 0) {

1107 ià(
d‘eù_modes
[
i
]->
w
 >ğw && d‘eù_modes[i]->
h
 >= h) {

1108 ià((
commÚ_modes
[
j
].
w
 =ğ
d‘eù_modes
[
i
]->w && commÚ_modes[j].
h
 == detect_modes[i]->h) || (common_modes[j].w*common_modes[j].h < w*h)) {

1109 
commÚ_modes
[
j
].
w
 = 0;

1115 ià(
commÚ_modes
[
j
].
w
 != 0) {

1116 
modes
++;

1120 ià(
video_modes
)

1121 
	`ä“
(
video_modes
);

1123 
video_modes
 = (
SDL_Reù
*)
	`ÿÎoc
(
modes
,(SDL_Rect));

1124 
k
 = 0;

1126 
i
=0; 
d‘eù_modes
[i]; ++i) {

1127 ià(
d‘eù_modes
[
i
]->
w
 >ğw && d‘eù_modes[i]->
h
 >= h) {

1128 
video_modes
[
k
].
w
 = 
d‘eù_modes
[
i
]->w;

1129 
video_modes
[
k
].
h
 = 
d‘eù_modes
[
i
]->h;

1130 
k
++;

1133 
j
=0; j<
cm_couÁ
; ++j) {

1134 
i
=0; 
d‘eù_modes
[i]; i++) {

1135 if(
commÚ_modes
[
j
].
w
 != 0) {

1136 ià(
d‘eù_modes
[
i
]->
w
 >ğw && d‘eù_modes[i]->
h
 >= h) {

1137 ià((
commÚ_modes
[
j
].
w
 =ğ
d‘eù_modes
[
i
]->w && commÚ_modes[j].
h
 == detect_modes[i]->h) || (common_modes[j].w*common_modes[j].h < w*h)) {

1138 
commÚ_modes
[
j
].
w
 = 0;

1144 ià(
commÚ_modes
[
j
].
w
 != 0) {

1145 
video_modes
[
k
].
w
 = 
commÚ_modes
[
j
].w;

1146 
video_modes
[
k
].
h
 = 
commÚ_modes
[
j
].h;

1147 
k
++;

1152 
x
=0; x<
modes
; x++) {

1153 
šdex_of_mš
 = 
x
;

1154 
y
=
x
; y<
modes
; y++) {

1155 ià(
video_modes
[
šdex_of_mš
].
w
*video_modes[šdex_of_mš].
h
 < video_modes[
y
].w*video_modes[y].h) {

1156 
šdex_of_mš
 = 
y
;

1159 
SDL_Reù
 
‹mp
 = 
video_modes
[
x
];

1160 
video_modes
[
x
] = video_modes[
šdex_of_mš
];

1161 
video_modes
[
šdex_of_mš
] = 
‹mp
;

1164  
modes
;

1165 
	}
}

1167 
boŞ
 
	gGameS‹CÚfig
::
	$g‘LªguagesLi¡
()

1169 
FeP¬£r
 
šfe
;

1170 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/languages.txt"))) {

1171 
i
=0;

1172 
šfe
.
	`Ãxt
()) {

1173 
Ïnguage_ISO
[
i
] = 
šfe
.
key
;

1174 
Ïnguage_fuÎ
[
i
] = 
šfe
.
	`ÃxtV®ue
();

1175 
i
 += 1;

1177 
šfe
.
	`şo£
();

1178 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/languages.txt!\n");

1180  
Œue
;

1181 
	}
}

1183 
	gGameS‹CÚfig
::
	$g‘LªguagesNumb”
()

1185 
Ïnguages_num
 = 0;

1186 
FeP¬£r
 
šfe
;

1187 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/languages.txt"))) {

1188 
šfe
.
	`Ãxt
()) {

1189 
Ïnguages_num
 += 1;

1191 
šfe
.
	`şo£
();

1192 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/languages.txt!\n");

1194  
Ïnguages_num
;

1195 
	}
}

1197 
	gGameS‹CÚfig
::
	$»äeshFÚt
() {

1198 
d–‘e
 
fÚt
;

1199 
fÚt
 = 
Ãw
 
	`FÚtEngše
();

1200 
	}
}

1205 
boŞ
 
	gGameS‹CÚfig
::
	$­¶yVideoS‘tšgs
(
SDL_Surçû
 *
¤c
, 
width
, 
height
) {

1206 ià(
MIN_VIEW_W
 > 
width
 && 
MIN_VIEW_H
 > 
height
) {

1207 
	`årštf
 (
¡d”r
, "A mod i »quœšg‡ mšimum„esŞutiÚ oà%dx%d\n", 
MIN_VIEW_W
, 
MIN_VIEW_H
);

1208 ià(
width
 < 
MIN_VIEW_W
) width = MIN_VIEW_W;

1209 ià(
height
 < 
MIN_VIEW_H
) height = MIN_VIEW_H;

1213 
tmp_fs
 = 
FULLSCREEN
;

1214 
tmp_w
 = 
VIEW_W
;

1215 
tmp_h
 = 
VIEW_H
;

1218 
Ušt32
 
æags
 = 0;

1219 ià(
FULLSCREEN
è
æags
 = fÏg | 
SDL_FULLSCREEN
;

1220 ià(
DOUBLEBUF
è
æags
 = fÏg | 
SDL_DOUBLEBUF
;

1221 ià(
HWSURFACE
)

1222 
æags
 = fÏg | 
SDL_HWSURFACE
 | 
SDL_HWACCEL
;

1224 
æags
 = fÏg | 
SDL_SWSURFACE
;

1226 
¤c
 = 
	`SDL_S‘VideoMode
 (
width
, 
height
, 0, 
æags
);

1229 ià(
¤c
 =ğ
NULL
) {

1230 
	`årštf
 (
¡d”r
, "E¼Ü duršg SDL_S‘VideoMode: %s\n", 
	`SDL_G‘E¼Ü
());

1232 
æags
 = 0;

1233 ià(
tmp_fs
è
æags
 = fÏg | 
SDL_FULLSCREEN
;

1234 ià(
DOUBLEBUF
è
æags
 = fÏg | 
SDL_DOUBLEBUF
;

1235 ià(
HWSURFACE
)

1236 
æags
 = fÏg | 
SDL_HWSURFACE
 | 
SDL_HWACCEL
;

1238 
æags
 = fÏg | 
SDL_SWSURFACE
;

1240 
	`SDL_S‘VideoMode
 (
tmp_w
, 
tmp_h
, 0, 
æags
);

1242  
çl£
;

1246 
VIEW_W
 = 
width
;

1247 
VIEW_W_HALF
 = 
width
/2;

1248 
VIEW_H
 = 
height
;

1249 
VIEW_H_HALF
 = 
height
/2;

1251 
»sŞutiÚ_cÚfœm
->
visibË
 = 
Œue
;

1253  
Œue
;

1255 
	}
}

1260 
	gGameS‹CÚfig
::
	$’abËMods
() {

1261 
i
=0; i<
šaùivemods_l¡b
->
	`g‘Size
(); i++) {

1262 ià(
šaùivemods_l¡b
->
£Ëùed
[
i
]) {

1263 
aùivemods_l¡b
->
	`­³nd
(
šaùivemods_l¡b
->
	`g‘V®ue
(
i
),šaùivemods_l¡b->
	`g‘ToŞt
(i));

1264 
šaùivemods_l¡b
->
	`»move
(
i
);

1265 
i
--;

1268 
	}
}

1273 
	gGameS‹CÚfig
::
	$di§bËMods
() {

1274 
i
=0; i<
aùivemods_l¡b
->
	`g‘Size
(); i++) {

1275 ià(
aùivemods_l¡b
->
£Ëùed
[
i
] &&‡ùivemods_l¡b->
	`g‘V®ue
(iè!ğ
FALLBACK_MOD
) {

1276 
šaùivemods_l¡b
->
	`­³nd
(
aùivemods_l¡b
->
	`g‘V®ue
(
i
),aùivemods_l¡b->
	`g‘ToŞt
(i));

1277 
aùivemods_l¡b
->
	`»move
(
i
);

1278 
i
--;

1281 
	}
}

1286 
boŞ
 
	gGameS‹CÚfig
::
	$£tMods
() {

1287 
veùÜ
<
¡ršg
> 
‹mp_li¡
 = 
mods
->
mod_li¡
;

1288 
mods
->
mod_li¡
.
	`ş—r
();

1289 
i
=0; i<
aùivemods_l¡b
->
	`g‘Size
(); i++) {

1290 ià(
aùivemods_l¡b
->
	`g‘V®ue
(
i
è!ğ""è
mods
->
mod_li¡
.
	`push_back
(activemods_lstb->getValue(i));

1292 
of¡»am
 
outfe
;

1293 
outfe
.
	`İ’
((
PATH_CONF
 + "mods.txt").
	`c_¡r
(), 
ios
::
out
);

1295 ià(
outfe
.
	`is_İ’
()) {

1297 
outfe
<<"# Mods†ower onhe†ist will overwrite data inheƒntries higher onhe†ist"<<"\n";

1298 
outfe
<<"\n";

1300 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

1301 
outfe
<<
mods
->
mod_li¡
[
i
]<<"\n";

1304 ià(
outfe
.
	`bad
()è
	`årštf
(
¡d”r
, "Unableo save mod†ist into file. No write‡ccess or disk is full!\n");

1305 
outfe
.
	`şo£
();

1306 
outfe
.
	`ş—r
();

1307 ià(
mods
->
mod_li¡
 !ğ
‹mp_li¡
è 
Œue
;

1308  
çl£
;

1309 
	}
}

1314 
	gGameS‹CÚfig
::
	$sÿnKey
(
bu‰Ú
) {

1315 ià(
šput_cÚfœm
->
visibË
) {

1316 ià(
š±
->
Ï¡_bu‰Ú
 != -1 && inpt->last_button < 8) {

1317 ià(
bu‰Ú
 < 25è
š±
->
bšdšg
[bu‰Ú] = iÅt->
Ï¡_bu‰Ú
;

1318 
š±
->
bšdšg_®t
[
bu‰Ú
-25] = iÅt->
Ï¡_bu‰Ú
;

1320 
£‰šgs_key
[
bu‰Ú
]->
Ïb–
 = 
š±
->
mou£_bu‰Ú
[š±->
Ï¡_bu‰Ú
-1];

1321 
šput_cÚfœm
->
visibË
 = 
çl£
;

1322 
£‰šgs_key
[
bu‰Ú
]->
	`»äesh
();

1325 ià(
š±
->
Ï¡_key
 != -1) {

1326 ià(
bu‰Ú
 < 25è
š±
->
bšdšg
[bu‰Ú] = iÅt->
Ï¡_key
;

1327 
š±
->
bšdšg_®t
[
bu‰Ú
-25] = iÅt->
Ï¡_key
;

1329 
£‰šgs_key
[
bu‰Ú
]->
Ïb–
 = 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
Ï¡_key
);

1330 
šput_cÚfœm
->
visibË
 = 
çl£
;

1331 
£‰šgs_key
[
bu‰Ú
]->
	`»äesh
();

1335 
	}
}

1337 
	gGameS‹CÚfig
::~
	$GameS‹CÚfig
()

1339 
t_buf
.
	`ş—r
();

1340 
d–‘e
 
t
;

1341 
d–‘e
 
bCÚŒŞ
;

1342 
d–‘e
 
ok_bu‰Ú
;

1343 
d–‘e
 
deçuÉs_bu‰Ú
;

1344 
d–‘e
 
ÿnûl_bu‰Ú
;

1345 
d–‘e
 
šput_süŞlbox
;

1346 
d–‘e
 
šput_cÚfœm
;

1347 
d–‘e
 
deçuÉs_cÚfœm
;

1348 
d–‘e
 
»sŞutiÚ_cÚfœm
;

1350 
	`SDL_F»eSurçû
(
background
);

1352 
¡d
::
veùÜ
<
Widg‘
*>::
™”©Ü
 
™”
 = 
chd_widg‘
.
	`begš
(); i‹¸!ğchd_widg‘.
	`’d
(); ++iter)

1354 
	`d–‘e
 (*
™”
);

1356 
chd_widg‘
.
	`ş—r
();

1358 
i
 = 0; i < 25; i++) {

1359 
d–‘e
 
£‰šgs_lb
[
i
];

1361 
i
 = 0; i < 50; i++) {

1362 
d–‘e
 
£‰šgs_key
[
i
];

1365 
Ïnguage_ISO
.
	`ş—r
();

1366 
Ïnguage_fuÎ
.
	`ş—r
();

1368 ià(
video_modes
)

1369 
	`ä“
(
video_modes
);

1370 
	}
}

	@GameStateConfig.h

27 #´agm¨
Úû


28 #iâdeà
GAMESTATECONFIG_H


29 
	#GAMESTATECONFIG_H


	)

31 
	~<veùÜ
>

32 
	~"GameS‹.h
"

33 
	~"Widg‘ToŞt.h
"

34 
	~<¡ršg
>

36 
şass
 
	gM’uCÚfœm
;

37 
şass
 
	gWidg‘
;

38 
şass
 
	gWidg‘Bu‰Ú
;

39 
şass
 
	gWidg‘CheckBox
;

40 
şass
 
	gWidg‘IÅut
;

41 
şass
 
	gWidg‘Lab–
;

42 
şass
 
	gWidg‘Li¡Box
;

43 
şass
 
	gWidg‘SüŞlBox
;

44 
şass
 
	gWidg‘Slid”
;

45 
şass
 
	gWidg‘TabCÚŒŞ
;

46 
şass
 
	gWidg‘ToŞt
;

48 şas 
	cGameS‹CÚfig
 : 
public
 
GameS‹
 {

49 
public
:

50 
GameS‹CÚfig
 ();

51 ~
GameS‹CÚfig
 ();

53 
logic
 ();

54 
»nd”
 ();

56 
	m´iv©e
:

57 
İtiÚb
[124];

58 
SDL_Reù
 
	mäame
;

59 
SDL_Reù
* 
	mvideo_modes
;

61 
SDL_Reù
 
	mm’uCÚfœm_¬—
;

62 
	m¡d
::
¡ršg
 
m’uCÚfœm_®ign
;

64 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Ïnguage_ISO
;

65 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Ïnguage_fuÎ
;

67 
g‘VideoModes
();

68 
boŞ
 
g‘LªguagesLi¡
();

69 
g‘LªguagesNumb”
();

70 
š™
();

71 
»adCÚfig
();

72 
upd©e
();

73 
£tDeçuÉResŞutiÚ
();

74 
»äeshFÚt
();

75 
boŞ
 
­¶yVideoS‘tšgs
(
SDL_Surçû
 *
¤c
, 
width
, 
height
);

76 
’abËMods
();

77 
di§bËMods
();

78 
boŞ
 
£tMods
();

79 
sÿnKey
(
bu‰Ú
);

81 
	m¡d
::
veùÜ
<
Widg‘
*> 
chd_widg‘
;

82 
Widg‘TabCÚŒŞ
 * 
	mbCÚŒŞ
;

83 
Widg‘Bu‰Ú
 * 
	mok_bu‰Ú
;

84 
Widg‘Bu‰Ú
 * 
	mdeçuÉs_bu‰Ú
;

85 
Widg‘Bu‰Ú
 * 
	mÿnûl_bu‰Ú
;

86 
SDL_Surçû
 * 
	mbackground
;

87 
	m¡d
::
¡ršg
 
imgFeName
;

89 
Widg‘CheckBox
 * 
	mfuÎsü“n_cb
;

90 
Widg‘Lab–
 * 
	mfuÎsü“n_lb
;

91 
Widg‘CheckBox
 * 
	mmou£_move_cb
;

92 
Widg‘Lab–
 * 
	mmou£_move_lb
;

93 
Widg‘CheckBox
 * 
	mcomb©_‹xt_cb
;

94 
Widg‘Lab–
 * 
	mcomb©_‹xt_lb
;

95 
Widg‘CheckBox
 * 
	mhwsurçû_cb
;

96 
Widg‘Lab–
 * 
	mhwsurçû_lb
;

97 
Widg‘CheckBox
 * 
	mdoubËbuf_cb
;

98 
Widg‘Lab–
 * 
	mdoubËbuf_lb
;

99 
Widg‘CheckBox
 * 
	m’abË_joy¡ick_cb
;

100 
Widg‘Lab–
 * 
	m’abË_joy¡ick_lb
;

101 
Widg‘CheckBox
 * 
	m‹xtu»_qu®™y_cb
;

102 
Widg‘Lab–
 * 
	m‹xtu»_qu®™y_lb
;

103 
Widg‘CheckBox
 * 
	mchªge_gamma_cb
;

104 
Widg‘Lab–
 * 
	mchªge_gamma_lb
;

105 
Widg‘CheckBox
 * 
	mªim©ed_tes_cb
;

106 
Widg‘Lab–
 * 
	mªim©ed_tes_lb
;

107 
Widg‘CheckBox
 * 
	mmou£_aim_cb
;

108 
Widg‘Lab–
 * 
	mmou£_aim_lb
;

109 
Widg‘CheckBox
 * 
	mshow_ås_cb
;

110 
Widg‘Lab–
 * 
	mshow_ås_lb
;

111 
Widg‘Slid”
 * 
	mmusic_vŞume_¦
;

112 
Widg‘Lab–
 * 
	mmusic_vŞume_lb
;

113 
Widg‘Slid”
 * 
	msound_vŞume_¦
;

114 
Widg‘Lab–
 * 
	msound_vŞume_lb
;

115 
Widg‘Slid”
 * 
	mgamma_¦
;

116 
Widg‘Lab–
 * 
	mgamma_lb
;

117 
Widg‘Li¡Box
 * 
	m»sŞutiÚ_l¡b
;

118 
Widg‘Lab–
 * 
	m»sŞutiÚ_lb
;

119 
Widg‘Li¡Box
 * 
	maùivemods_l¡b
;

120 
Widg‘Lab–
 * 
	maùivemods_lb
;

121 
Widg‘Li¡Box
 * 
	mšaùivemods_l¡b
;

122 
Widg‘Lab–
 * 
	mšaùivemods_lb
;

123 
Widg‘Li¡Box
 * 
	mjoy¡ick_deviû_l¡b
;

124 
Widg‘Lab–
 * 
	mjoy¡ick_deviû_lb
;

125 
Widg‘Li¡Box
 * 
	mÏnguage_l¡b
;

126 
Widg‘Lab–
 * 
	mÏnguage_lb
;

127 
Widg‘Lab–
 * 
	mhws_nÙe_lb
;

128 
Widg‘Lab–
 * 
	mdbuf_nÙe_lb
;

129 
Widg‘Lab–
 * 
	mªim_tes_nÙe_lb
;

130 
Widg‘Lab–
 * 
	m‹¡_nÙe_lb
;

131 
Widg‘Bu‰Ú
 * 
	maùivemods_shiáup_bŠ
;

132 
Widg‘Bu‰Ú
 * 
	maùivemods_shiádown_bŠ
;

133 
Widg‘Bu‰Ú
 * 
	maùivemods_d—ùiv©e_bŠ
;

134 
Widg‘Bu‰Ú
 * 
	mšaùivemods_aùiv©e_bŠ
;

136 
Widg‘Lab–
 * 
	m£‰šgs_lb
[25];

137 
Widg‘Bu‰Ú
 * 
	m£‰šgs_key
[50];

139 
Widg‘SüŞlBox
 * 
	mšput_süŞlbox
;

140 
M’uCÚfœm
 * 
	mšput_cÚfœm
;

141 
M’uCÚfœm
 * 
	mdeçuÉs_cÚfœm
;

142 
M’uCÚfœm
 * 
	m»sŞutiÚ_cÚfœm
;

144 
Widg‘ToŞt
 * 
	mt
;

145 
ToŞtD©a
 
	mt_buf
;

147 
	mšput_key
;

148 
	mmods_tÙ®
;

149 
boŞ
 
	mcheck_»sŞutiÚ
;

150 
SDL_Reù
 
	msüŞÍªe
;

151 
SDL_CŞÜ
 
	msüŞÍªe_cŞÜ
;

152 
	msüŞÍªe_cÚ‹Ás
;

153 
	mŞd_v›w_w
;

154 
	mŞd_v›w_h
;

155 
	m»sŞutiÚ_cÚfœm_ticks
;

	@GameStateLoad.cpp

22 
	~"Av©¬.h
"

23 
	~"SDL_gfxBl™Func.h
"

24 
	~"FeP¬£r.h
"

25 
	~"GameS‹Lßd.h
"

26 
	~"GameS‹T™Ë.h
"

27 
	~"GameS‹PÏy.h
"

28 
	~"GameS‹New.h
"

29 
	~"I‹mMªag”.h
"

30 
	~"M’uCÚfœm.h
"

31 
	~"Sh¬edResourûs.h
"

32 
	~"S‘tšgs.h
"

33 
	~"UtsFeSy¡em.h
"

34 
	~"UtsP¬sšg.h
"

36 
	~<®gÜ™hm
>

38 
usšg
 
Çme¥aû
 
	g¡d
;

41 
	gGameS‹Lßd
::
	$GameS‹Lßd
(è: 
	$GameS‹
() {

42 
™ems
 = 
Ãw
 
	`I‹mMªag”
();

43 
pÜŒa™
 = 
NULL
;

44 
lßdšg_»que¡ed
 = 
çl£
;

45 
lßdšg
 = 
çl£
;

46 
lßded
 = 
çl£
;

48 
Ïb–_lßdšg
 = 
Ãw
 
	`Widg‘Lab–
();

50 
i
 = 0; i < 
GAME_SLOT_MAX
; i++) {

51 
Ïb–_Çme
[
i
] = 
Ãw
 
	`Widg‘Lab–
();

52 
Ïb–_Ëv–
[
i
] = 
Ãw
 
	`Widg‘Lab–
();

53 
Ïb–_m­
[
i
] = 
Ãw
 
	`Widg‘Lab–
();

57 
cÚfœm
 = 
Ãw
 
	`M’uCÚfœm
(
msg
->
	`g‘
("Delete Save"), msg->get("Deletehis save?"));

58 
bu‰Ú_ex™
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

59 
bu‰Ú_ex™
->
Ïb–
 = 
msg
->
	`g‘
("Exito Title");

60 
bu‰Ú_ex™
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰Ú_ex™->pos.
w
/2;

61 
bu‰Ú_ex™
->
pos
.
y
 = 
VIEW_H
 - bu‰Ú_ex™->pos.
h
;

62 
bu‰Ú_ex™
->
	`»äesh
();

64 
bu‰Ú_aùiÚ
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

65 
bu‰Ú_aùiÚ
->
Ïb–
 = 
msg
->
	`g‘
("Choose‡ Slot");

66 
bu‰Ú_aùiÚ
->
’abËd
 = 
çl£
;

68 
bu‰Ú_®‹º©e
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

69 
bu‰Ú_®‹º©e
->
Ïb–
 = 
msg
->
	`g‘
("Delete Save");

70 
bu‰Ú_®‹º©e
->
’abËd
 = 
çl£
;

73 
FeP¬£r
 
šfe
;

75 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/gameload.txt"))) {

76 
šfe
.
	`Ãxt
()) {

77 
šfe
.
v®
 = infile.val + ',';

79 ià(
šfe
.
key
 == "action_button") {

80 
bu‰Ú_aùiÚ
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

81 
bu‰Ú_aùiÚ
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

82 } ià(
šfe
.
key
 == "atlernate_button") {

83 
bu‰Ú_®‹º©e
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

84 
bu‰Ú_®‹º©e
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

85 } ià(
šfe
.
key
 == "portrait") {

86 
pÜŒa™_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

87 
pÜŒa™_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

88 
pÜŒa™_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

89 
pÜŒa™_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

90 } ià(
šfe
.
key
 == "gameslot") {

91 
game¦Ù_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

92 
game¦Ù_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

93 
game¦Ù_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

94 
game¦Ù_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

95 } ià(
šfe
.
key
 == "preview") {

96 
´ev›w_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

97 
´ev›w_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

98 
´ev›w_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

99 
´ev›w_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

101 } ià(
šfe
.
key
 == "name") {

102 
Çme_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

103 } ià(
šfe
.
key
 == "level") {

104 
Ëv–_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

105 } ià(
šfe
.
key
 == "map") {

106 
m­_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

107 } ià(
šfe
.
key
 == "loading_label") {

108 
lßdšg_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

110 } ià(
šfe
.
key
 == "sprite") {

111 
¥r™es_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

112 
¥r™es_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

115 
šfe
.
	`şo£
();

116 } 
	`årštf
(
¡d”r
, "Unableo open menus/gameload.txt!\n");

119 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/menus.txt"))) {

120 
m’u_šdex
 = -1;

121 
šfe
.
	`Ãxt
()) {

122 ià(
šfe
.
key
 == "id") {

123 ià(
šfe
.
v®
 =ğ"cÚfœm"è
m’u_šdex
 = 0;

124 
m’u_šdex
 = -1;

127 ià(
m’u_šdex
 == -1)

130 ià(
šfe
.
key
 == "layout") {

131 
šfe
.
v®
 = infile.val + ',';

132 
cÚfœm
->
wšdow_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

133 
cÚfœm
->
wšdow_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

134 
cÚfœm
->
wšdow_¬—
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

135 
cÚfœm
->
wšdow_¬—
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

138 ià(
šfe
.
key
 == "align") {

139 
cÚfœm
->
®ignm’t
 = 
šfe
.
v®
;

142 
šfe
.
	`şo£
();

143 } 
	`årštf
(
¡d”r
, "Unableo open menus/menus.txt!\n");

145 
cÚfœm
->
	`®ign
();

146 
cÚfœm
->
	`upd©e
();

149 
boŞ
 
found_Ïy”
 = 
çl£
;

150 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/hero_options.txt"))) {

151 
šfe
.
	`Ãxt
()) {

152 
šfe
.
v®
 = infile.val + ',';

154 ià(
šfe
.
key
 == "layer") {

155 
dœ
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

156 ià(
dœ
 != 6) ;

157 
found_Ïy”
 = 
Œue
;

159 
¡ršg
 
Ïy”
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

160 
Ïy”
 != "") {

161 
´ev›w_Ïy”
.
	`push_back
(
Ïy”
);

162 
Ïy”
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

166 
šfe
.
	`şo£
();

167 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/hero_options.txt!\n");

168 ià(!
found_Ïy”
è
	`årštf
(
¡d”r
, "Warning: Could‚ot find†ayers for direction 6\n");

170 
bu‰Ú_aùiÚ
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

171 
bu‰Ú_aùiÚ
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

172 
bu‰Ú_aùiÚ
->
	`»äesh
();

174 
bu‰Ú_®‹º©e
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

175 
bu‰Ú_®‹º©e
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

176 
bu‰Ú_®‹º©e
->
	`»äesh
();

178 
lßd_game
 = 
çl£
;

180 
i
=0; i<
GAME_SLOT_MAX
; i++) {

181 
cu¼’t_m­
[
i
] = "";

184 
	`lßdG¿phics
();

185 
	`»adGameSlÙs
();

187 
i
=0; i<
GAME_SLOT_MAX
; i++) {

188 
¦Ù_pos
[
i
].
x
 = 
game¦Ù_pos
.x + (
VIEW_W
 - 
FRAME_W
)/2;

189 
¦Ù_pos
[
i
].
h
 = 
game¦Ù_pos
.h;

190 
¦Ù_pos
[
i
].
y
 = 
game¦Ù_pos
.y + (
VIEW_H
 - 
FRAME_H
)/2 + (˜* game¦Ù_pos.
h
);

191 
¦Ù_pos
[
i
].
w
 = 
game¦Ù_pos
.w;

194 
£Ëùed_¦Ù
 = -1;

197 
cu¼’t_äame
 = 0;

198 
äame_tick”
 = 0;

200 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

201 
	}
}

203 
	gGameS‹Lßd
::
	$lßdG¿phics
() {

204 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/game_¦Ùs.²g").
	`c_¡r
());

205 
£ËùiÚ
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/game_¦Ù_£Ëù.²g").
	`c_¡r
());

206 
pÜŒa™_bÜd”
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/pÜŒa™_bÜd”.²g").
	`c_¡r
());

207 ià(!
background
 || !
£ËùiÚ
 || !
pÜŒa™_bÜd”
) {

208 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

212 
SDL_Surçû
 *
ş—nup
;

214 ià(
background
) {

215 
ş—nup
 = 
background
;

216 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

217 
	`SDL_F»eSurçû
(
ş—nup
);

220 ià(
£ËùiÚ
) {

221 
	`SDL_S‘CŞÜKey
Ğ
£ËùiÚ
, 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
(£ËùiÚ->
fÜm©
, 255, 0, 255));

222 
ş—nup
 = 
£ËùiÚ
;

223 
£ËùiÚ
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(selection);

224 
	`SDL_F»eSurçû
(
ş—nup
);

227 ià(
pÜŒa™_bÜd”
) {

228 
	`SDL_S‘CŞÜKey
Ğ
pÜŒa™_bÜd”
, 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
ÕÜŒa™_bÜd”->
fÜm©
, 255, 0, 255));

229 
ş—nup
 = 
pÜŒa™_bÜd”
;

230 
pÜŒa™_bÜd”
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait_border);

231 
	`SDL_F»eSurçû
(
ş—nup
);

233 
	}
}

235 
	gGameS‹Lßd
::
	$lßdPÜŒa™
(
¦Ù
) {

236 
	`SDL_F»eSurçû
(
pÜŒa™
);

237 
pÜŒa™
 = 
NULL
;

239 ià(
¦Ù
 < 0) ;

241 ià(
¡©s
[
¦Ù
].
Çme
 == "") ;

243 
pÜŒa™
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/pÜŒa™s/" + 
¡©s
[
¦Ù
].pÜŒa™ + ".²g").
	`c_¡r
());

244 ià(!
pÜŒa™
) ;

247 
SDL_Surçû
 *
ş—nup
 = 
pÜŒa™
;

248 
pÜŒa™
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait);

249 
	`SDL_F»eSurçû
(
ş—nup
);

250 
	}
}

252 
	gGameS‹Lßd
::
	$»adGameSlÙs
() {

253 
i
=0; i<
GAME_SLOT_MAX
; i++) {

254 
	`»adGameSlÙ
(
i
);

256 
	}
}

258 
¡ršg
 
	gGameS‹Lßd
::
	$g‘M­Name
(cÚ¡ 
¡ršg
& 
m­_f’ame
) {

259 
FeP¬£r
 
šfe
;

260 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("m­s/" + 
m­_f’ame
)))  "";

261 
¡ršg
 
m­_Çme
 = "";

263 
m­_Çme
 =ğ"" && 
šfe
.
	`Ãxt
()) {

264 ià(
šfe
.
key
 == "title")

265 
m­_Çme
 = 
msg
->
	`g‘
(
šfe
.
v®
);

268 
šfe
.
	`şo£
();

269  
m­_Çme
;

270 
	}
}

272 
	gGameS‹Lßd
::
	$»adGameSlÙ
(
¦Ù
) {

274 
¡ršg¡»am
 
f’ame
;

275 
FeP¬£r
 
šfe
;

278 ià(
¦Ù
 < 0 || slÙ >ğ
GAME_SLOT_MAX
) ;

281 
f’ame
 << 
PATH_USER
;

282 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

283 
f’ame
 << 
GAME_PREFIX
 << "_";

284 
f’ame
 << "§ve" << (
¦Ù
+1) << ".txt";

286 ià(!
šfe
.
	`İ’
(
f’ame
.
	`¡r
())) ;

288 
šfe
.
	`Ãxt
()) {

291 ià(
šfe
.
key
 == "name")

292 
¡©s
[
¦Ù
].
Çme
 = 
šfe
.
v®
;

293 ià(
šfe
.
key
 == "class")

294 
¡©s
[
¦Ù
].
ch¬aù”_şass
 = 
šfe
.
v®
;

295 ià(
šfe
.
key
 == "xp")

296 
¡©s
[
¦Ù
].
xp
 = 
	`©oi
(
šfe
.
v®
.
	`c_¡r
());

297 ià(
šfe
.
key
 == "build") {

298 
¡©s
[
¦Ù
].
physiÿl_ch¬aù”
 = 
	`©oi
(
šfe
.
	`ÃxtV®ue
().
	`c_¡r
());

299 
¡©s
[
¦Ù
].
m’l_ch¬aù”
 = 
	`©oi
(
šfe
.
	`ÃxtV®ue
().
	`c_¡r
());

300 
¡©s
[
¦Ù
].
ofãn£_ch¬aù”
 = 
	`©oi
(
šfe
.
	`ÃxtV®ue
().
	`c_¡r
());

301 
¡©s
[
¦Ù
].
deãn£_ch¬aù”
 = 
	`©oi
(
šfe
.
	`ÃxtV®ue
().
	`c_¡r
());

303 ià(
šfe
.
key
 == "equipped") {

304 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

305 
»³©_v®
 != "") {

306 
equ³d
[
¦Ù
].
	`push_back
(
	`toIÁ
(
»³©_v®
));

307 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

310 ià(
šfe
.
key
 == "option") {

311 
¡©s
[
¦Ù
].
ba£
 = 
šfe
.
	`ÃxtV®ue
();

312 
¡©s
[
¦Ù
].
h—d
 = 
šfe
.
	`ÃxtV®ue
();

313 
¡©s
[
¦Ù
].
pÜŒa™
 = 
šfe
.
	`ÃxtV®ue
();

315 ià(
šfe
.
key
 == "spawn") {

316 
cu¼’t_m­
[
¦Ù
] = 
	`g‘M­Name
(
šfe
.
	`ÃxtV®ue
());

319 
šfe
.
	`şo£
();

321 
¡©s
[
¦Ù
].
	`»ÿlc
();

322 
	`lßdP»v›w
(
¦Ù
);

324 
	}
}

326 
	gGameS‹Lßd
::
	$lßdP»v›w
(
¦Ù
) {

328 
veùÜ
<
¡ršg
> 
img_gfx
;

330 
i
=0; i<
¥r™es
[
¦Ù
].
	`size
(); i++) {

331 ià(
¥r™es
[
¦Ù
][
i
]è
	`SDL_F»eSurçû
(sprites[slot][i]);

333 
¥r™es
[
¦Ù
].
	`ş—r
();

336 
i
=0; i<
´ev›w_Ïy”
.
	`size
(); i++) {

337 
boŞ
 
exi¡s
 = 
	`feExi¡s
(
mods
->
	`loÿ‹
("ªim©iÚs/av©¬/" + 
¡©s
[
¦Ù
].
ba£
 + "/deçuÉ_" + 
´ev›w_Ïy”
[
i
] + ".txt"));

338 ià(
exi¡s
) {

339 
img_gfx
.
	`push_back
("deçuÉ_" + 
´ev›w_Ïy”
[
i
]);

340 } ià(
´ev›w_Ïy”
[
i
] == "head") {

341 
img_gfx
.
	`push_back
(
¡©s
[
¦Ù
].
h—d
);

343 
img_gfx
.
	`push_back
("");

347 
i
=0; i<
equ³d
[
¦Ù
].
	`size
(); i++) {

348 ià(()
equ³d
[
¦Ù
][
i
] > 
™ems
->™ems.
	`size
()-1){

349 
	`årštf
(
¡d”r
, "I‹m w™h id=%d ouˆoàbound 1-%d. You¸§vegami brok’ o¸you mighˆu£ incom·tibË savegame/mod\nQu™tšgØavoid savegam»wr™šg\n", 
equ³d
[
¦Ù
][
i
], ()
™ems
->™ems.
	`size
()-1);

350 
	`SDL_Qu™
();

351 
	`ex™
(1);

353 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
	`fšd
(
´ev›w_Ïy”
.
	`begš
(),…»v›w_Ïy”.
	`’d
(), 
™ems
->™ems[
equ³d
[
¦Ù
][
i
]].
ty³
);

354 ià(
equ³d
[
¦Ù
][
i
] > 0 && 
found
 !ğ
´ev›w_Ïy”
.
	`’d
()) {

355 
img_gfx
[
	`di¡ªû
(
´ev›w_Ïy”
.
	`begš
(), 
found
)] = 
™ems
->™ems[
equ³d
[
¦Ù
][
i
]].
gfx
;

360 
i
=0; i<
img_gfx
.
	`size
(); i++) {

361 ià(
img_gfx
[
i
] == "") ;

362 
¥r™es
[
¦Ù
].
	`push_back
(
NULL
);

364 ià(
TEXTURE_QUALITY
 =ğ
çl£
) {

365 
¥r™es
[
¦Ù
].
	`back
(èğ
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/av©¬/" + 
¡©s
[¦Ù].
ba£
 + "/´ev›w/nßÍha/" + 
img_gfx
[
i
] + ".²g").
	`c_¡r
());

367 ià(!
¥r™es
[
¦Ù
].
	`back
()) {

368 
¥r™es
[
¦Ù
].
	`back
(èğ
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/av©¬/" + 
¡©s
[¦Ù].
ba£
 + "/´ev›w/" + 
img_gfx
[
i
] + ".²g").
	`c_¡r
());

370 
	`SDL_S‘CŞÜKey
(
¥r™es
[
¦Ù
].
	`back
(), 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
(¥r™es[¦Ù].back()->
fÜm©
, 255, 0, 255));

372 ià(!
¥r™es
[
¦Ù
].
	`back
()) {

373 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

377 ià(
¥r™es
[
¦Ù
].
	`back
()) {

378 
SDL_Surçû
 *
ş—nup
 = 
¥r™es
[
¦Ù
].
	`back
();

379 
¥r™es
[
¦Ù
].
	`back
(èğ
	`SDL_Di¥ÏyFÜm©AÍha
(sprites[slot].back());

380 
	`SDL_F»eSurçû
(
ş—nup
);

384 
	}
}

387 
	gGameS‹Lßd
::
	$logic
() {

389 
äame_tick”
++;

390 ià(
äame_tick”
 == 64) frame_ticker = 0;

391 ià(
äame_tick”
 < 32)

392 
cu¼’t_äame
 = 
äame_tick”
 / 8;

394 
cu¼’t_äame
 = (63 - 
äame_tick”
) / 8;

396 ià(!
cÚfœm
->
visibË
) {

397 ià(
bu‰Ú_ex™
->
	`checkClick
()) {

398 
d–‘e
 
»que¡edGameS‹
;

399 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

402 ià(
lßdšg_»que¡ed
) {

403 
lßdšg
 = 
Œue
;

404 
lßdšg_»que¡ed
 = 
çl£
;

405 
	`logicLßdšg
();

408 ià(
bu‰Ú_aùiÚ
->
	`checkClick
()) {

409 ià(
¡©s
[
£Ëùed_¦Ù
].
Çme
 == "") {

411 
GameS‹New
* 
Ãwgame
 = 
Ãw
 
	`GameS‹New
();

412 
Ãwgame
->
game_¦Ù
 = 
£Ëùed_¦Ù
 + 1;

413 
»que¡edGameS‹
 = 
Ãwgame
;

416 
lßdšg_»que¡ed
 = 
Œue
;

419 ià(
bu‰Ú_®‹º©e
->
	`checkClick
()) {

421 
cÚfœm
->
visibË
 = 
Œue
;

422 
cÚfœm
->
	`»nd”
();

425 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]) {

426 
i
=0; i<
GAME_SLOT_MAX
; i++) {

427 ià(
	`isW™hš
(
¦Ù_pos
[
i
], 
š±
->
mou£
)) {

428 
š±
->
lock
[
MAIN1
] = 
Œue
;

429 
£Ëùed_¦Ù
 = 
i
;

430 
	`upd©eBu‰Ús
();

434 } ià(
cÚfœm
->
visibË
) {

435 
cÚfœm
->
	`logic
();

436 ià(
cÚfœm
->
cÚfœmClicked
) {

437 
¡ršg¡»am
 
f’ame
;

438 
f’ame
.
	`¡r
("");

439 
f’ame
 << 
PATH_USER
;

440 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

441 
f’ame
 << 
GAME_PREFIX
 << "_";

442 
f’ame
 << "§ve" << (
£Ëùed_¦Ù
+1) << ".txt";

444 ià(
	`»move
(
f’ame
.
	`¡r
().
	`c_¡r
()) != 0)

445 
	`³¼Ü
("Error deleting save from…ath");

446 
¡©s
[
£Ëùed_¦Ù
] = 
	`StBlock
();

447 
	`»adGameSlÙ
(
£Ëùed_¦Ù
);

448 
	`lßdP»v›w
(
£Ëùed_¦Ù
);

449 
	`lßdPÜŒa™
(
£Ëùed_¦Ù
);

451 
	`upd©eBu‰Ús
();

453 
cÚfœm
->
visibË
 = 
çl£
;

454 
cÚfœm
->
cÚfœmClicked
 = 
çl£
;

457 
	}
}

459 
	gGameS‹Lßd
::
	$logicLßdšg
() {

461 
GameS‹PÏy
* 
¶ay
 = 
Ãw
 
	`GameS‹PÏy
();

462 
¶ay
->
	`»£tGame
();

463 
¶ay
->
game_¦Ù
 = 
£Ëùed_¦Ù
 + 1;

464 
¶ay
->
	`lßdGame
();

465 
»que¡edGameS‹
 = 
¶ay
;

466 
lßded
 = 
Œue
;

467 
lßdšg
 = 
çl£
;

468 
	}
}

470 
	gGameS‹Lßd
::
	$upd©eBu‰Ús
() {

471 
	`lßdPÜŒa™
(
£Ëùed_¦Ù
);

473 
bu‰Ú_aùiÚ
->
’abËd
 = 
Œue
;

474 
bu‰Ú_aùiÚ
->
toŞt
 = "";

475 ià(
¡©s
[
£Ëùed_¦Ù
].
Çme
 == "") {

476 
bu‰Ú_aùiÚ
->
Ïb–
 = 
msg
->
	`g‘
("New Game");

477 ià(!
	`feExi¡s
(
mods
->
	`loÿ‹
("maps/spawn.txt"))) {

478 
bu‰Ú_aùiÚ
->
’abËd
 = 
çl£
;

479 
bu‰Ú_aùiÚ
->
toŞt
 = 
msg
->
	`g‘
("Enable‡ story modo continue");

481 
bu‰Ú_®‹º©e
->
’abËd
 = 
çl£
;

484 
bu‰Ú_®‹º©e
->
’abËd
 = 
Œue
;

485 
bu‰Ú_aùiÚ
->
Ïb–
 = 
msg
->
	`g‘
("Load Game");

486 ià(
cu¼’t_m­
[
£Ëùed_¦Ù
] == "") {

487 ià(!
	`feExi¡s
(
mods
->
	`loÿ‹
("maps/spawn.txt"))) {

488 
bu‰Ú_aùiÚ
->
’abËd
 = 
çl£
;

489 
bu‰Ú_aùiÚ
->
toŞt
 = 
msg
->
	`g‘
("Enable‡ story modo continue");

493 
bu‰Ú_aùiÚ
->
	`»äesh
();

494 
bu‰Ú_®‹º©e
->
	`»äesh
();

495 
	}
}

497 
	gGameS‹Lßd
::
	$»nd”
() {

499 
SDL_Reù
 
¤c
;

500 
SDL_Reù
 
de¡
;

503 
¤c
.
w
 = 
game¦Ù_pos
.w;

504 
¤c
.
h
 = 
game¦Ù_pos
.h * 
GAME_SLOT_MAX
;

505 
¤c
.
x
 = src.
y
 = 0;

506 
de¡
.
x
 = 
¦Ù_pos
[0].x;

507 
de¡
.
y
 = 
¦Ù_pos
[0].y;

508 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

511 ià(
£Ëùed_¦Ù
 >= 0) {

512 
¤c
.
w
 = 
game¦Ù_pos
.w;

513 
¤c
.
h
 = 
game¦Ù_pos
.h;

514 
¤c
.
x
 = src.
y
 = 0;

515 
	`SDL_Bl™Surçû
(
£ËùiÚ
, &
¤c
, 
sü“n
, &
¦Ù_pos
[
£Ëùed_¦Ù
]);

520 ià(
£Ëùed_¦Ù
 >ğ0 && 
pÜŒa™
 !ğ
NULL
) {

522 
¤c
.
w
 = 
pÜŒa™_pos
.w;

523 
¤c
.
h
 = 
pÜŒa™_pos
.h;

524 
de¡
.
x
 = 
pÜŒa™_pos
.x + (
VIEW_W
 - 
FRAME_W
)/2;

525 
de¡
.
y
 = 
pÜŒa™_pos
.y + (
VIEW_H
 - 
FRAME_H
)/2;

527 
	`SDL_Bl™Surçû
(
pÜŒa™
, &
¤c
, 
sü“n
, &
de¡
);

528 
	`SDL_Bl™Surçû
(
pÜŒa™_bÜd”
, &
¤c
, 
sü“n
, &
de¡
);

531 
Pošt
 
Ïb–
;

532 
¡ršg¡»am
 
ss
;

534 ià(
lßdšg_»que¡ed
 || 
lßdšg
 || 
lßded
) {

535 
Ïb–
.
x
 = 
lßdšg_pos
.x + (
VIEW_W
 - 
FRAME_W
)/2;

536 
Ïb–
.
y
 = 
lßdšg_pos
.y + (
VIEW_H
 - 
FRAME_H
)/2;

538 iàĞ
lßded
) {

539 
Ïb–_lßdšg
->
	`£t
(
msg
->
	`g‘
("Entering game world..."));

541 
Ïb–_lßdšg
->
	`£t
(
msg
->
	`g‘
("Loading saved game..."));

544 
Ïb–_lßdšg
->
	`£t
(
Ïb–
.
x
,†ab–.
y
, 
lßdšg_pos
.
ju¡ify
,†ßdšg_pos.
v®ign
,†ab–_lßdšg->
	`g‘
(), 
cŞÜ_nÜm®
,†ßdšg_pos.
fÚt_¡yË
);

545 
Ïb–_lßdšg
->
	`»nd”
();

549 
¦Ù
=0; slÙ<
GAME_SLOT_MAX
; slot++) {

550 ià(
¡©s
[
¦Ù
].
Çme
 != "") {

553 
Ïb–
.
x
 = 
¦Ù_pos
[
¦Ù
].x + 
Çme_pos
.x;

554 
Ïb–
.
y
 = 
¦Ù_pos
[
¦Ù
].y + 
Çme_pos
.y;

555 
Ïb–_Çme
[
¦Ù
]->
	`£t
(
Ïb–
.
x
,†ab–.
y
, 
Çme_pos
.
ju¡ify
,‚ame_pos.
v®ign
, 
¡©s
[¦Ù].
Çme
, 
cŞÜ_nÜm®
,‚ame_pos.
fÚt_¡yË
);

556 
Ïb–_Çme
[
¦Ù
]->
	`»nd”
();

559 
ss
.
	`¡r
("");

560 
Ïb–
.
x
 = 
¦Ù_pos
[
¦Ù
].x + 
Ëv–_pos
.x;

561 
Ïb–
.
y
 = 
¦Ù_pos
[
¦Ù
].y + 
Ëv–_pos
.y;

562 
ss
 << 
msg
->
	`g‘
("Lev– %d %s", 
¡©s
[
¦Ù
].
Ëv–
, msg->g‘(¡©s[¦Ù].
ch¬aù”_şass
));

563 
Ïb–_Ëv–
[
¦Ù
]->
	`£t
(
Ïb–
.
x
,†ab–.
y
, 
Ëv–_pos
.
ju¡ify
,†ev–_pos.
v®ign
, 
ss
.
	`¡r
(), 
cŞÜ_nÜm®
,†ev–_pos.
fÚt_¡yË
);

564 
Ïb–_Ëv–
[
¦Ù
]->
	`»nd”
();

567 
Ïb–
.
x
 = 
¦Ù_pos
[
¦Ù
].x + 
m­_pos
.x;

568 
Ïb–
.
y
 = 
¦Ù_pos
[
¦Ù
].y + 
m­_pos
.y;

569 
Ïb–_m­
[
¦Ù
]->
	`£t
(
Ïb–
.
x
,†ab–.
y
, 
m­_pos
.
ju¡ify
, m­_pos.
v®ign
, 
cu¼’t_m­
[¦Ù], 
cŞÜ_nÜm®
, m­_pos.
fÚt_¡yË
);

570 
Ïb–_m­
[
¦Ù
]->
	`»nd”
();

573 
de¡
.
x
 = 
¦Ù_pos
[
¦Ù
].x + 
¥r™es_pos
.x;

574 
de¡
.
y
 = 
¦Ù_pos
[
¦Ù
].y + 
¥r™es_pos
.y;

575 
¤c
.
x
 = 
cu¼’t_äame
 * 
´ev›w_pos
.
h
;

576 
¤c
.
y
 = 0;

577 
¤c
.
w
 = src.
h
 = 
´ev›w_pos
.h;

579 
i
=0; i<
¥r™es
[
¦Ù
].
	`size
(); i++) {

580 
	`SDL_Bl™Surçû
(
¥r™es
[
¦Ù
][
i
], &
¤c
, 
sü“n
, &
de¡
);

584 
Ïb–
.
x
 = 
¦Ù_pos
[
¦Ù
].x + 
Çme_pos
.x;

585 
Ïb–
.
y
 = 
¦Ù_pos
[
¦Ù
].y + 
Çme_pos
.y;

586 
Ïb–_Çme
[
¦Ù
]->
	`£t
(
Ïb–
.
x
,†ab–.
y
, 
Çme_pos
.
ju¡ify
,‚ame_pos.
v®ign
, 
msg
->
	`g‘
("Em±y SlÙ"), 
cŞÜ_nÜm®
,‚ame_pos.
fÚt_¡yË
);

587 
Ïb–_Çme
[
¦Ù
]->
	`»nd”
();

591 ià(
cÚfœm
->
visibË
ècÚfœm->
	`»nd”
();

594 
bu‰Ú_ex™
->
	`»nd”
();

595 
bu‰Ú_aùiÚ
->
	`»nd”
();

596 
bu‰Ú_®‹º©e
->
	`»nd”
();

597 
	}
}

599 
	gGameS‹Lßd
::~
	$GameS‹Lßd
() {

600 
	`SDL_F»eSurçû
(
background
);

601 
	`SDL_F»eSurçû
(
£ËùiÚ
);

602 
	`SDL_F»eSurçû
(
pÜŒa™_bÜd”
);

603 
	`SDL_F»eSurçû
(
pÜŒa™
);

604 
d–‘e
 
bu‰Ú_ex™
;

605 
d–‘e
 
bu‰Ú_aùiÚ
;

606 
d–‘e
 
bu‰Ú_®‹º©e
;

607 
d–‘e
 
™ems
;

608 
¦Ù
=0; slÙ<
GAME_SLOT_MAX
; slot++) {

609 
i
=0; i<
¥r™es
[
¦Ù
].
	`size
(); i++) {

610 
	`SDL_F»eSurçû
(
¥r™es
[
¦Ù
][
i
]);

612 
¥r™es
[
¦Ù
].
	`ş—r
();

614 
i
=0; i<
GAME_SLOT_MAX
; i++) {

615 
d–‘e
 
Ïb–_Çme
[
i
];

616 
d–‘e
 
Ïb–_Ëv–
[
i
];

617 
d–‘e
 
Ïb–_m­
[
i
];

619 
d–‘e
 
Ïb–_lßdšg
;

620 
d–‘e
 
cÚfœm
;

621 
	}
}

	@GameStateLoad.h

28 #´agm¨
Úû


29 #iâdeà
GAMESTATELOAD_H


30 
	#GAMESTATELOAD_H


	)

32 
	~"StBlock.h
"

33 
	~"GameS‹.h
"

34 
	~"Widg‘Lab–.h
"

36 
	~<SDL.h
>

37 
	~<SDL_image.h
>

38 
	~<SDL_mix”.h
>

40 
	~<¡ršg
>

41 
	~<s¡»am
>

43 
şass
 
	gI‹mMªag”
;

44 
şass
 
	gM’uCÚfœm
;

45 
şass
 
	gWidg‘Bu‰Ú
;

46 
şass
 
	gWidg‘Lab–
;

49 cÚ¡ 
	gGAME_SLOT_MAX
 = 4;

51 şas 
	cGameS‹Lßd
 : 
public
 
GameS‹
 {

52 
´iv©e
:

54 
lßdG¿phics
();

55 
lßdPÜŒa™
(
¦Ù
);

56 
	m¡d
::
¡ršg
 
g‘M­Name
(cÚ¡ 
¡d
::¡ršg& 
m­_f’ame
);

57 
upd©eBu‰Ús
();

59 
I‹mMªag”
 *
	m™ems
;

60 
Widg‘Bu‰Ú
 *
	mbu‰Ú_ex™
;

61 
Widg‘Bu‰Ú
 *
	mbu‰Ú_aùiÚ
;

62 
Widg‘Bu‰Ú
 *
	mbu‰Ú_®‹º©e
;

63 
Widg‘Lab–
 *
	mÏb–_lßdšg
;

64 
Widg‘Lab–
 *
	mÏb–_Çme
[
GAME_SLOT_MAX
];

65 
Widg‘Lab–
 *
	mÏb–_Ëv–
[
GAME_SLOT_MAX
];

66 
Widg‘Lab–
 *
	mÏb–_m­
[
GAME_SLOT_MAX
];

68 
M’uCÚfœm
 *
	mcÚfœm
;

70 
SDL_Surçû
 *
	mbackground
;

71 
SDL_Surçû
 *
	m£ËùiÚ
;

72 
SDL_Surçû
 *
	mpÜŒa™_bÜd”
;

73 
SDL_Surçû
 *
	mpÜŒa™
;

74 
	m¡d
::
veùÜ
<
SDL_Surçû
 *> 
¥r™es
[
GAME_SLOT_MAX
];

75 
StBlock
 
	m¡©s
[
GAME_SLOT_MAX
];

76 
	m¡d
::
veùÜ
<> 
equ³d
[
GAME_SLOT_MAX
];

77 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
´ev›w_Ïy”
;

78 
SDL_Reù
 
	m¦Ù_pos
[
GAME_SLOT_MAX
];

79 
	m¡d
::
¡ršg
 
cu¼’t_m­
[
GAME_SLOT_MAX
];

81 
boŞ
 
	mlßdšg_»que¡ed
;

82 
boŞ
 
	mlßdšg
;

83 
boŞ
 
	mlßded
;

85 
Lab–Info
 
	mÇme_pos
;

86 
Lab–Info
 
	mËv–_pos
;

87 
Lab–Info
 
	mm­_pos
;

88 
Lab–Info
 
	mlßdšg_pos
;

89 
Pošt
 
	m¥r™es_pos
;

92 
	mcu¼’t_äame
;

93 
	mäame_tick”
;

95 
SDL_Reù
 
	mpÜŒa™_pos
;

96 
SDL_Reù
 
	mgame¦Ù_pos
;

97 
SDL_Reù
 
	m´ev›w_pos
;

99 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

101 
	mpublic
:

102 
GameS‹Lßd
();

103 ~
GameS‹Lßd
();

105 
logic
();

106 
logicLßdšg
();

107 
»nd”
();

108 
»adGameSlÙ
(
¦Ù
);

109 
»adGameSlÙs
();

110 
lßdP»v›w
(
¦Ù
);

112 
boŞ
 
	mlßd_game
;

113 
	m£Ëùed_¦Ù
;

	@GameStateNew.cpp

26 
	~"Av©¬.h
"

27 
	~"FeP¬£r.h
"

28 
	~"GameS‹CÚfig.h
"

29 
	~"GameS‹New.h
"

30 
	~"GameS‹Lßd.h
"

31 
	~"GameS‹PÏy.h
"

32 
	~"S‘tšgs.h
"

33 
	~"Sh¬edResourûs.h
"

34 
	~"UtsP¬sšg.h
"

35 
	~"Widg‘Bu‰Ú.h
"

36 
	~"Widg‘CheckBox.h
"

37 
	~"Widg‘IÅut.h
"

38 
	~"Widg‘Lab–.h
"

39 
	~"Widg‘Li¡Box.h
"

40 
	~"Widg‘ToŞt.h
"

42 
usšg
 
Çme¥aû
 
	g¡d
;

45 
	gGameS‹New
::
	$GameS‹New
(è: 
	$GameS‹
() {

46 
game_¦Ù
 = 0;

47 
cu¼’t_İtiÚ
 = 0;

48 
İtiÚ_couÁ
 = 0;

49 
pÜŒa™_image
 = 
NULL
;

50 
t_buf
.
	`ş—r
();

51 
modif›d_Çme
 = 
çl£
;

54 
bu‰Ú_ex™
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

55 
bu‰Ú_ex™
->
Ïb–
 = 
msg
->
	`g‘
("Cancel");

56 
bu‰Ú_ex™
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰Ú_ex™->pos.
w
;

57 
bu‰Ú_ex™
->
pos
.
y
 = 
VIEW_H
 - bu‰Ú_ex™->pos.
h
;

58 
bu‰Ú_ex™
->
	`»äesh
();

60 
bu‰Ú_ü—‹
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

61 
bu‰Ú_ü—‹
->
Ïb–
 = 
msg
->
	`g‘
("Create");

62 
bu‰Ú_ü—‹
->
pos
.
x
 = 
VIEW_W_HALF
;

63 
bu‰Ú_ü—‹
->
pos
.
y
 = 
VIEW_H
 - bu‰Ú_ü—‹->pos.
h
;

64 
bu‰Ú_ü—‹
->
’abËd
 = 
çl£
;

65 
bu‰Ú_ü—‹
->
	`»äesh
();

67 
bu‰Ú_´ev
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/left.png"));

68 
bu‰Ú_Ãxt
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/right.png"));

69 
šput_Çme
 = 
Ãw
 
	`Widg‘IÅut
();

70 
bu‰Ú_³rmad—th
 = 
Ãw
 
	`Widg‘CheckBox
(
mods
->
	`loÿ‹
("images/menus/buttons/checkbox_default.png"));

72 
şass_li¡
 = 
Ãw
 
	`Widg‘Li¡Box
 (
HERO_CLASSES
.
	`size
(), 12, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_default.png"));

73 
şass_li¡
->
ÿn_de£Ëù
 = 
çl£
;

74 
şass_li¡
->
£Ëùed
[0] = 
Œue
;

76 
show_şas¦i¡
 = 
Œue
;

78 
t
 = 
Ãw
 
	`Widg‘ToŞt
();

81 
FeP¬£r
 
šfe
;

83 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/gamenew.txt"))) {

84 
šfe
.
	`Ãxt
()) {

85 
šfe
.
v®
 = infile.val + ',';

87 ià(
šfe
.
key
 == "button_prev") {

88 
bu‰Ú_´ev
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

89 
bu‰Ú_´ev
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

90 } ià(
šfe
.
key
 == "button_next") {

91 
bu‰Ú_Ãxt
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

92 
bu‰Ú_Ãxt
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

93 } ià(
šfe
.
key
 == "button_permadeath") {

94 
bu‰Ú_³rmad—th
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

95 
bu‰Ú_³rmad—th
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

96 } ià(
šfe
.
key
 == "name_input") {

97 
Çme_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

98 
Çme_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

99 } ià(
šfe
.
key
 == "portrait_label") {

100 
pÜŒa™_Ïb–
 = 
	`—tLab–Info
(
šfe
.
v®
);

101 } ià(
šfe
.
key
 == "name_label") {

102 
Çme_Ïb–
 = 
	`—tLab–Info
(
šfe
.
v®
);

103 } ià(
šfe
.
key
 == "permadeath_label") {

104 
³rmad—th_Ïb–
 = 
	`—tLab–Info
(
šfe
.
v®
);

105 } ià(
šfe
.
key
 == "classlist_label") {

106 
şas¦i¡_Ïb–
 = 
	`—tLab–Info
(
šfe
.
v®
);

107 } ià(
šfe
.
key
 == "portrait") {

108 
pÜŒa™_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

109 
pÜŒa™_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

110 
pÜŒa™_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

111 
pÜŒa™_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

112 } ià(
šfe
.
key
 == "class_list") {

113 
şass_li¡
->
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

114 
şass_li¡
->
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

115 } ià(
šfe
.
key
 == "show_classlist") {

116 
show_ş
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

117 ià(
show_ş
 == 1)

118 
show_şas¦i¡
 = 
Œue
;

120 
show_şas¦i¡
 = 
çl£
;

123 
šfe
.
	`şo£
();

124 } 
	`årštf
(
¡d”r
, "Unableo open menus/gamenew.txt!\n");

126 
bu‰Ú_´ev
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

127 
bu‰Ú_´ev
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

129 
bu‰Ú_Ãxt
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

130 
bu‰Ú_Ãxt
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

132 
şass_li¡
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

133 
şass_li¡
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

135 
Çme_pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

136 
Çme_pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

138 
šput_Çme
->
	`£tPos™iÚ
(
Çme_pos
.
x
,‚ame_pos.
y
);

140 
bu‰Ú_³rmad—th
->
pos
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

141 
bu‰Ú_³rmad—th
->
pos
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

143 
pÜŒa™_Ïb–
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

144 
pÜŒa™_Ïb–
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

146 
Çme_Ïb–
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

147 
Çme_Ïb–
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

149 
³rmad—th_Ïb–
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

150 
³rmad—th_Ïb–
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

152 
şas¦i¡_Ïb–
.
x
 +ğ(
VIEW_W
 - 
FRAME_W
)/2;

153 
şas¦i¡_Ïb–
.
y
 +ğ(
VIEW_H
 - 
FRAME_H
)/2;

156 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

157 
Ïb–_pÜŒa™
 = 
Ãw
 
	`Widg‘Lab–
();

158 
Ïb–_pÜŒa™
->
	`£t
(
pÜŒa™_Ïb–
.
x
,…ÜŒa™_Ïb–.
y
,…ÜŒa™_Ïb–.
ju¡ify
,…ÜŒa™_Ïb–.
v®ign
, 
msg
->
	`g‘
("Choo£‡ PÜŒa™"), 
cŞÜ_nÜm®
,…ÜŒa™_Ïb–.
fÚt_¡yË
);

159 
Ïb–_Çme
 = 
Ãw
 
	`Widg‘Lab–
();

160 
Ïb–_Çme
->
	`£t
(
Çme_Ïb–
.
x
,‚ame_Ïb–.
y
,‚ame_Ïb–.
ju¡ify
,‚ame_Ïb–.
v®ign
, 
msg
->
	`g‘
("Choo£‡ Name"), 
cŞÜ_nÜm®
,‚ame_Ïb–.
fÚt_¡yË
);

161 
Ïb–_³rmad—th
 = 
Ãw
 
	`Widg‘Lab–
();

162 
Ïb–_³rmad—th
->
	`£t
(
³rmad—th_Ïb–
.
x
,…”mad—th_Ïb–.
y
,…”mad—th_Ïb–.
ju¡ify
,…”mad—th_Ïb–.
v®ign
, 
msg
->
	`g‘
("P”mad—th?"), 
cŞÜ_nÜm®
,…”mad—th_Ïb–.
fÚt_¡yË
);

163 
Ïb–_şas¦i¡
 = 
Ãw
 
	`Widg‘Lab–
();

164 
Ïb–_şas¦i¡
->
	`£t
(
şas¦i¡_Ïb–
.
x
, cÏs¦i¡_Ïb–.
y
, cÏs¦i¡_Ïb–.
ju¡ify
, cÏs¦i¡_Ïb–.
v®ign
, 
msg
->
	`g‘
("Choo£‡ CÏss"), 
cŞÜ_nÜm®
, cÏs¦i¡_Ïb–.
fÚt_¡yË
);

167 
i
=0; i<
HERO_CLASSES
.
	`size
(); i++) {

168 
şass_li¡
->
	`­³nd
(
msg
->
	`g‘
(
HERO_CLASSES
[
i
].
Çme
),
	`g‘CÏssToŞt
(i));

171 
	`lßdG¿phics
();

172 
	`lßdO±iÚs
("hero_options.txt");

173 
	`lßdPÜŒa™
(
pÜŒa™
[0]);

174 
	`£tName
(
Çme
[0]);

175 
	}
}

177 
	gGameS‹New
::
	$lßdG¿phics
() {

178 
pÜŒa™_bÜd”
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/pÜŒa™_bÜd”.²g").
	`c_¡r
());

179 if(!
pÜŒa™_bÜd”
) {

180 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

183 
	`SDL_S‘CŞÜKey
Ğ
pÜŒa™_bÜd”
, 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
ÕÜŒa™_bÜd”->
fÜm©
, 255, 0, 255) );

184 
SDL_Surçû
 *
ş—nup
 = 
pÜŒa™_bÜd”
;

185 
pÜŒa™_bÜd”
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait_border);

186 
	`SDL_F»eSurçû
(
ş—nup
);

188 
	}
}

190 
	gGameS‹New
::
	$lßdPÜŒa™
(cÚ¡ 
¡ršg
& 
pÜŒa™_f’ame
) {

191 
	`SDL_F»eSurçû
(
pÜŒa™_image
);

192 
pÜŒa™_image
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/pÜŒa™s/" + 
pÜŒa™_f’ame
 + ".²g").
	`c_¡r
());

193 ià(!
pÜŒa™_image
) ;

196 
SDL_Surçû
 *
ş—nup
 = 
pÜŒa™_image
;

197 
pÜŒa™_image
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait_image);

198 
	`SDL_F»eSurçû
(
ş—nup
);

199 
	}
}

206 
	gGameS‹New
::
	$lßdO±iÚs
(cÚ¡ 
¡ršg
& 
f’ame
) {

207 
FeP¬£r
 
fš
;

208 ià(!
fš
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/" + 
f’ame
))) ;

210 
fš
.
	`Ãxt
()) {

211 ià(
fš
.
key
 == "option") {

212 
ba£
.
	`push_back
(
fš
.
	`ÃxtV®ue
());

213 
h—d
.
	`push_back
(
fš
.
	`ÃxtV®ue
());

214 
pÜŒa™
.
	`push_back
(
fš
.
	`ÃxtV®ue
());

215 
Çme
.
	`push_back
(
fš
.
	`ÃxtV®ue
());

218 
fš
.
	`şo£
();

219 
	}
}

226 
	gGameS‹New
:: 
	$£tName
(cÚ¡ 
¡ršg
& 
deçuÉ_Çme
) {

227 ià(
šput_Çme
->
	`g‘Text
(è=ğ"" || !
modif›d_Çme
) {

228 
šput_Çme
->
	`£tText
(
deçuÉ_Çme
);

229 
modif›d_Çme
 = 
çl£
;

231 
	}
}

233 
	gGameS‹New
::
	$logic
() {

234 
bu‰Ú_³rmad—th
->
	`checkClick
();

235 ià(
show_şas¦i¡
è
şass_li¡
->
	`checkClick
();

238 ià(
šput_Çme
->
	`g‘Text
() == "") {

239 ià(
bu‰Ú_ü—‹
->
’abËd
) {

240 
bu‰Ú_ü—‹
->
’abËd
 = 
çl£
;

241 
bu‰Ú_ü—‹
->
	`»äesh
();

245 ià(!
bu‰Ú_ü—‹
->
’abËd
) {

246 
bu‰Ú_ü—‹
->
’abËd
 = 
Œue
;

247 
bu‰Ú_ü—‹
->
	`»äesh
();

251 ià(
bu‰Ú_ex™
->
	`checkClick
()) {

252 
d–‘e
 
»que¡edGameS‹
;

253 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹Lßd
();

256 ià(
bu‰Ú_ü—‹
->
	`checkClick
()) {

258 
GameS‹PÏy
* 
¶ay
 = 
Ãw
 
	`GameS‹PÏy
();

259 
Av©¬
 *
pc
 = 
¶ay
->
	`g‘Av©¬
();

260 
pc
->
¡©s
.
ba£
 = ba£[
cu¼’t_İtiÚ
];

261 
pc
->
¡©s
.
h—d
 = h—d[
cu¼’t_İtiÚ
];

262 
pc
->
¡©s
.
pÜŒa™
 =…ÜŒa™[
cu¼’t_İtiÚ
];

263 
pc
->
¡©s
.
Çme
 = 
šput_Çme
->
	`g‘Text
();

264 
pc
->
¡©s
.
³rmad—th
 = 
bu‰Ú_³rmad—th
->
	`isChecked
();

265 
¶ay
->
game_¦Ù
 = game_slot;

266 
¶ay
->
	`»£tGame
();

267 
¶ay
->
	`lßdCÏss
(
şass_li¡
->
	`g‘S–eùed
());

268 
»que¡edGameS‹
 = 
¶ay
;

272 ià(
bu‰Ú_Ãxt
->
	`checkClick
()) {

273 
cu¼’t_İtiÚ
++;

274 ià(
cu¼’t_İtiÚ
 =ğ()
ba£
.
	`size
()) current_option = 0;

275 
	`lßdPÜŒa™
(
pÜŒa™
[
cu¼’t_İtiÚ
]);

276 
	`£tName
(
Çme
[
cu¼’t_İtiÚ
]);

278 ià(
bu‰Ú_´ev
->
	`checkClick
()) {

279 
cu¼’t_İtiÚ
--;

280 ià(
cu¼’t_İtiÚ
 =ğ-1ècu¼’t_İtiÚ = 
ba£
.
	`size
()-1;

281 
	`lßdPÜŒa™
(
pÜŒa™
[
cu¼’t_İtiÚ
]);

282 
	`£tName
(
Çme
[
cu¼’t_İtiÚ
]);

285 
šput_Çme
->
	`logic
();

287 ià(
šput_Çme
->
	`g‘Text
(è!ğ
Çme
[
cu¼’t_İtiÚ
]è
modif›d_Çme
 = 
Œue
;

288 
	}
}

290 
	gGameS‹New
::
	$»nd”
() {

293 
bu‰Ú_ex™
->
	`»nd”
();

294 
bu‰Ú_ü—‹
->
	`»nd”
();

295 
bu‰Ú_´ev
->
	`»nd”
();

296 
bu‰Ú_Ãxt
->
	`»nd”
();

297 
šput_Çme
->
	`»nd”
();

298 
bu‰Ú_³rmad—th
->
	`»nd”
();

301 
SDL_Reù
 
¤c
;

302 
SDL_Reù
 
de¡
;

304 
¤c
.
w
 = 
de¡
.w = 
pÜŒa™_pos
.w;

305 
¤c
.
h
 = 
de¡
.h = 
pÜŒa™_pos
.h;

306 
¤c
.
x
 = src.
y
 = 0;

307 
de¡
.
x
 = 
pÜŒa™_pos
.x + (
VIEW_W
 - 
FRAME_W
)/2;

308 
de¡
.
y
 = 
pÜŒa™_pos
.y + (
VIEW_H
 - 
FRAME_H
)/2;

310 
	`SDL_Bl™Surçû
(
pÜŒa™_image
, &
¤c
, 
sü“n
, &
de¡
);

311 
	`SDL_Bl™Surçû
(
pÜŒa™_bÜd”
, &
¤c
, 
sü“n
, &
de¡
);

314 ià(!
pÜŒa™_Ïb–
.
hidd’
è
Ïb–_pÜŒa™
->
	`»nd”
();

315 ià(!
Çme_Ïb–
.
hidd’
è
Ïb–_Çme
->
	`»nd”
();

316 ià(!
³rmad—th_Ïb–
.
hidd’
è
Ïb–_³rmad—th
->
	`»nd”
();

317 ià(!
şas¦i¡_Ïb–
.
hidd’
è
Ïb–_şas¦i¡
->
	`»nd”
();

320 ià(
show_şas¦i¡
) {

321 
şass_li¡
->
	`»nd”
();

323 
ToŞtD©a
 
t_Ãw
 = 
şass_li¡
->
	`checkToŞt
(
š±
->
mou£
);

324 ià(!
t_Ãw
.
	`isEm±y
()) {

329 ià(!
t_Ãw
.
	`com·»
(&
t_buf
)) {

330 
t_buf
.
	`ş—r
();

331 
t_buf
 = 
t_Ãw
;

333 
t
->
	`»nd”
(
t_buf
, 
š±
->
mou£
, 
STYLE_FLOAT
);

338 
	}
}

340 
	g¡d
::
¡ršg
 
GameS‹New
::
	$g‘CÏssToŞt
(
šdex
) {

341 
¡ršg
 
toŞt
;

342 ià(
HERO_CLASSES
[
šdex
].
desütiÚ
 !ğ""è
toŞt
 +ğ
msg
->
	`g‘
(HERO_CLASSES[index].description);

343  
toŞt
;

344 
	}
}

346 
	gGameS‹New
::~
	$GameS‹New
() {

347 
	`SDL_F»eSurçû
(
pÜŒa™_image
);

348 
	`SDL_F»eSurçû
(
pÜŒa™_bÜd”
);

349 
d–‘e
 
bu‰Ú_ex™
;

350 
d–‘e
 
bu‰Ú_ü—‹
;

351 
d–‘e
 
bu‰Ú_Ãxt
;

352 
d–‘e
 
bu‰Ú_´ev
;

353 
d–‘e
 
Ïb–_pÜŒa™
;

354 
d–‘e
 
Ïb–_Çme
;

355 
d–‘e
 
šput_Çme
;

356 
d–‘e
 
bu‰Ú_³rmad—th
;

357 
d–‘e
 
Ïb–_³rmad—th
;

358 
d–‘e
 
Ïb–_şas¦i¡
;

359 
d–‘e
 
şass_li¡
;

360 
d–‘e
 
t
;

361 
	}
}

	@GameStateNew.h

26 #´agm¨
Úû


27 #iâdeà
GAMESTATENEW_H


28 
	#GAMESTATENEW_H


	)

30 
	~"GameS‹.h
"

31 
	~"Widg‘Lab–.h
"

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

35 
	~<SDL_mix”.h
>

37 
	~<¡ršg
>

38 
	~<s¡»am
>

39 
	~<veùÜ
>

41 
	~"Widg‘ToŞt.h
"

43 
şass
 
	gWidg‘Bu‰Ú
;

44 
şass
 
	gWidg‘CheckBox
;

45 
şass
 
	gWidg‘IÅut
;

46 
şass
 
	gWidg‘Lab–
;

47 
şass
 
	gWidg‘Li¡Box
;

49 şas 
	cGameS‹New
 : 
public
 
GameS‹
 {

50 
´iv©e
:

52 
lßdG¿phics
();

53 
lßdPÜŒa™
(cÚ¡ 
¡d
::
¡ršg
& 
pÜŒa™_f’ame
);

54 
lßdO±iÚs
(cÚ¡ 
¡d
::
¡ršg
& 
İtiÚ_f’ame
);

55 
	m¡d
::
¡ršg
 
g‘CÏssToŞt
(
šdex
);

56 
£tName
(cÚ¡ 
¡d
::
¡ršg
& 
deçuÉ_Çme
);

58 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
ba£
;

59 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
h—d
;

60 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
pÜŒa™
;

61 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Çme
;

62 
	mİtiÚ_couÁ
;

63 
	mcu¼’t_İtiÚ
;

65 
SDL_Surçû
 *
	mpÜŒa™_image
;

66 
SDL_Surçû
 *
	mpÜŒa™_bÜd”
;

67 
Widg‘Bu‰Ú
 *
	mbu‰Ú_ex™
;

68 
Widg‘Bu‰Ú
 *
	mbu‰Ú_ü—‹
;

69 
Widg‘Bu‰Ú
 *
	mbu‰Ú_Ãxt
;

70 
Widg‘Bu‰Ú
 *
	mbu‰Ú_´ev
;

71 
Widg‘Lab–
 *
	mÏb–_pÜŒa™
;

72 
Widg‘Lab–
 *
	mÏb–_Çme
;

73 
Widg‘IÅut
 *
	mšput_Çme
;

74 
Widg‘CheckBox
 *
	mbu‰Ú_³rmad—th
;

75 
Widg‘Lab–
 *
	mÏb–_³rmad—th
;

76 
Widg‘Lab–
 *
	mÏb–_şas¦i¡
;

77 
Widg‘Li¡Box
 *
	mşass_li¡
;

78 
Widg‘ToŞt
 *
	mt
;

80 
Pošt
 
	mÇme_pos
;

81 
Lab–Info
 
	mpÜŒa™_Ïb–
;

82 
Lab–Info
 
	mÇme_Ïb–
;

83 
Lab–Info
 
	m³rmad—th_Ïb–
;

84 
Lab–Info
 
	mşas¦i¡_Ïb–
;

85 
SDL_Reù
 
	mpÜŒa™_pos
;

86 
boŞ
 
	mshow_şas¦i¡
;

87 
ToŞtD©a
 
	mt_buf
;

88 
boŞ
 
	mmodif›d_Çme
;

90 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

92 
	mpublic
:

93 
GameS‹New
();

94 ~
GameS‹New
();

95 
logic
();

96 
»nd”
();

97 
	mgame_¦Ù
;

	@GameStatePlay.cpp

28 
	~"Av©¬.h
"

29 
	~"Cam·ignMªag”.h
"

30 
	~"EÃmyMªag”.h
"

31 
	~"GameS‹PÏy.h
"

32 
	~"GameS‹.h
"

33 
	~"GameS‹T™Ë.h
"

34 
	~"Haz¬d.h
"

35 
	~"Haz¬dMªag”.h
"

36 
	~"LoÙMªag”.h
"

37 
	~"M’u.h
"

38 
	~"M’uAùiÚB¬.h
"

39 
	~"M’uCh¬aù”.h
"

40 
	~"M’uEÃmy.h
"

41 
	~"M’uHUDLog.h
"

42 
	~"M’uInv’tÜy.h
"

43 
	~"M’uLog.h
"

44 
	~"M’uMªag”.h
"

45 
	~"M’uMšiM­.h
"

46 
	~"M’uNPCAùiÚs.h
"

47 
	~"M’uSsh.h
"

48 
	~"M’uT®k”.h
"

49 
	~"M’uV’dÜ.h
"

50 
	~"NPC.h
"

51 
	~"NPCMªag”.h
"

52 
	~"Que¡Log.h
"

53 
	~"Widg‘Lab–.h
"

54 
	~"Sh¬edResourûs.h
"

55 
	~"UtsFeSy¡em.h
"

56 
	~"FeP¬£r.h
"

57 
	~"UtsP¬sšg.h
"

58 
	~"M’uPow”s.h
"

60 
usšg
 
Çme¥aû
 
	g¡d
;

62 cÚ¡ 
	gMENU_ENEMY_TIMEOUT
 = 
MAX_FRAMES_PER_SEC
 * 10;

67 
	gGameS‹PÏy
::
	$GameS‹PÏy
()

68 : 
	`GameS‹
()

69 , 
	`’emy
(
NULL
)

70 , 
	`pow”s
(
Ãw
 
	`Pow”Mªag”
())

71 , 
	`™ems
(
Ãw
 
	`I‹mMªag”
())

72 , 
	`ÿmp
(
Ãw
 
	`Cam·ignMªag”
())

73 , 
	`m­
(
Ãw
 
	`M­R’d””
(
ÿmp
))

74 , 
	`pc
(
Ãw
 
	`Av©¬
(
pow”s
, 
m­
))

75 , 
	`’em›s
(
Ãw
 
	`EÃmyMªag”
(
pow”s
, 
m­
))

76 , 
	`haz¬ds
(
Ãw
 
	`Haz¬dMªag”
(
pow”s
, 
pc
, 
’em›s
))

77 , 
	`m’u
(
Ãw
 
	`M’uMªag”
(
pow”s
, &
pc
->
¡©s
, 
ÿmp
, 
™ems
))

78 , 
	`loÙ
(
Ãw
 
	`LoÙMªag”
(
™ems
, 
m­
, &
pc
->
¡©s
))

79 , 
	`Åcs
(
Ãw
 
	`NPCMªag”
(
m­
, 
loÙ
, 
™ems
, &
pc
->
¡©s
))

80 , 
	`que¡s
(
Ãw
 
	`Que¡Log
(
ÿmp
, 
m’u
->
log
))

81 , 
	`lßdšg
(
Ãw
 
	`Widg‘Lab–
())

82 , 
	`lßdšg_bg
(
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/cÚfœm_bg.²g").
	`c_¡r
()))

83 , 
	`Åc_id
(-1)

84 , 
	`ev’tDŸlogOngošg
(
çl£
)

85 , 
	`ev’tP’dšgDŸlog
(
çl£
)

86 , 
	`cŞÜ_nÜm®
(
fÚt
->
	`g‘CŞÜ
("menu_normal"))

87 , 
	$game_¦Ù
(0)

89 
hasMusic
 = 
Œue
;

93 
ÿmp
->
™ems
 = items;

94 
ÿmp
->
ÿ¼›d_™ems
 = &
m’u
->
šv
->
šv’tÜy
[
CARRIED
];

95 
ÿmp
->
cu¼’cy
 = &
m’u
->
šv
->currency;

96 
ÿmp
->
h”o
 = &
pc
->
¡©s
;

97 
m­
->
pow”s
 =…owers;

99 
lßdšg
->
	`£t
(
VIEW_W_HALF
, 
VIEW_H_HALF
, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
msg
->
	`g‘
("Lßdšg..."), 
cŞÜ_nÜm®
);

103 if(!
lßdšg_bg
) {

104 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

106 
SDL_Surçû
 *
ş—nup
 = 
lßdšg_bg
;

107 
lßdšg_bg
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(loading_bg);

108 
	`SDL_F»eSurçû
(
ş—nup
);

112 
	`lßdT™Ës
();

113 
	}
}

118 
	gGameS‹PÏy
::
	$»£tGame
() {

119 
m­
->
	`lßd
("spawn.txt");

120 
ÿmp
->
	`ş—rAÎ
();

121 
pc
->
	`š™
();

122 
pc
->
¡©s
.
cu¼’cy
 = 0;

123 
m’u
->
aù
->
	`ş—r
();

124 
m’u
->
šv
->
šv’tÜy
[0].
	`ş—r
();

125 
m’u
->
šv
->
šv’tÜy
[1].
	`ş—r
();

126 
m’u
->
šv
->
chªged_equm’t
 = 
Œue
;

127 
m’u
->
šv
->
cu¼’cy
 = 0;

128 
m’u
->
log
->
	`ş—r
();

129 
que¡s
->
	`ü—‹Que¡Li¡
();

130 
m’u
->
hudlog
->
	`ş—r
();

131 
	`lßdSsh
();

134 
m’u
->
lk”
->
	`£tH”o
(
pc
->
¡©s
.
Çme
,…c->¡©s.
pÜŒa™
);

135 
pc
->
	`lßdSounds
();

136 
	}
}

143 
	gGameS‹PÏy
::
	$checkEÃmyFocus
() {

146 
’emy
 = 
’em›s
->
	`’emyFocus
(
š±
->
mou£
, 
m­
->
ÿm
, 
Œue
);

148 ià(
’emy
 !ğ
NULL
) {

151 ià(!
’emy
->
¡©s
.
suµ»ss_hp
) {

152 
m’u
->
’emy
->enemy =ƒnemy;

153 
m’u
->
’emy
->
timeout
 = 
MENU_ENEMY_TIMEOUT
;

159 
EÃmy
 *
‹mp_’emy
 = 
’em›s
->
	`’emyFocus
(
š±
->
mou£
, 
m­
->
ÿm
, 
çl£
);

160 ià(
‹mp_’emy
 !ğ
NULL
) {

161 
m’u
->
’emy
->’emy = 
‹mp_’emy
;

162 
m’u
->
’emy
->
timeout
 = 
MENU_ENEMY_TIMEOUT
;

166 
	}
}

172 
boŞ
 
	gGameS‹PÏy
::
	$»¡riùPow”U£
() {

173 if(
MOUSE_MOVE
) {

174 if(
’emy
 =ğ
NULL
 && 
š±
->
´essšg
[
MAIN1
] && !š±->´essšg[
SHIFT
] && !(
	`isW™hš
(
m’u
->
aù
->
numb”A»a
,š±->
mou£
è|| isW™hš(m’u->aù->
mou£A»a
,š±->mou£è|| isW™hš(m’u->aù->
m’uA»a
, inpt->mouse))) {

175  
Œue
;

178  
çl£
;

179 
	}
}

184 
	gGameS‹PÏy
::
	$checkLoÙ
() {

186 ià(!
pc
->
¡©s
.
®ive
)

189 
I‹mSck
 
pickup
;

190 
cu¼’cy
;

193 ià(
AUTOPICKUP_CURRENCY
) {

194 
pickup
 = 
loÙ
->
	`checkAutoPickup
(
pc
->
¡©s
.
pos
, 
cu¼’cy
);

195 ià(
cu¼’cy
 > 0) {

196 
m’u
->
šv
->
	`addCu¼’cy
(
cu¼’cy
);

201 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]) {

203 
pickup
 = 
loÙ
->
	`checkPickup
(
š±
->
mou£
, 
m­
->
ÿm
, 
pc
->
¡©s
.
pos
, 
cu¼’cy
, 
m’u
->
šv
);

204 ià(
pickup
.
™em
 > 0) {

205 
š±
->
lock
[
MAIN1
] = 
Œue
;

206 
m’u
->
šv
->
	`add
(
pickup
);

208 
ÿmp
->
	`£tStus
(
m’u
->
™ems
->™ems[
pickup
.
™em
].
pickup_¡©us
);

210 ià(
cu¼’cy
 > 0) {

211 
š±
->
lock
[
MAIN1
] = 
Œue
;

212 
m’u
->
šv
->
	`addCu¼’cy
(
cu¼’cy
);

214 ià(
loÙ
->
fuÎ_msg
) {

215 
š±
->
lock
[
MAIN1
] = 
Œue
;

216 
m’u
->
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

217 
m’u
->
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

218 
loÙ
->
fuÎ_msg
 = 
çl£
;

223 ià((
š±
->
´essšg
[
ACCEPT
] && !š±->
lock
[ACCEPT])) {

225 
pickup
 = 
loÙ
->
	`checkN—»¡Pickup
(
pc
->
¡©s
.
pos
, 
cu¼’cy
, 
m’u
->
šv
);

226 ià(
pickup
.
™em
 > 0) {

227 ià(
š±
->
´essšg
[
ACCEPT
]èš±->
lock
[ACCEPT] = 
Œue
;

228 
m’u
->
šv
->
	`add
(
pickup
);

230 
ÿmp
->
	`£tStus
(
m’u
->
™ems
->™ems[
pickup
.
™em
].
pickup_¡©us
);

232 ià(
cu¼’cy
 > 0) {

233 ià(
š±
->
´essšg
[
ACCEPT
]èš±->
lock
[ACCEPT] = 
Œue
;

234 
m’u
->
šv
->
	`addCu¼’cy
(
cu¼’cy
);

236 ià(
loÙ
->
fuÎ_msg
) {

237 ià(
š±
->
´essšg
[
ACCEPT
]èš±->
lock
[ACCEPT] = 
Œue
;

238 
m’u
->
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

239 
m’u
->
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

240 
loÙ
->
fuÎ_msg
 = 
çl£
;

243 
	}
}

245 
	gGameS‹PÏy
::
	$checkT–•Üt
() {

248 ià(
m­
->
‹ËpÜtiÚ
 || 
pc
->
¡©s
.teleportation) {

250 
m­
->
cŞlid”
.
	`unblock
(
pc
->
¡©s
.
pos
.
x
,…c->¡©s.pos.
y
);

252 ià(
m­
->
‹ËpÜtiÚ
) {

253 
m­
->
ÿm
.
x
 = 
pc
->
¡©s
.
pos
.x = m­->
‹ËpÜt_de¡š©iÚ
.x;

254 
m­
->
ÿm
.
y
 = 
pc
->
¡©s
.
pos
.y = m­->
‹ËpÜt_de¡š©iÚ
.y;

257 
m­
->
ÿm
.
x
 = 
pc
->
¡©s
.
pos
.x =…c->¡©s.
‹ËpÜt_de¡š©iÚ
.x;

258 
m­
->
ÿm
.
y
 = 
pc
->
¡©s
.
pos
.y =…c->¡©s.
‹ËpÜt_de¡š©iÚ
.y;

262 ià(
m­
->
‹ËpÜtiÚ
 && m­->
‹ËpÜt_m­Çme
 != "") {

263 
	`showLßdšg
();

264 
m­
->
	`lßd
(m­->
‹ËpÜt_m­Çme
);

265 
’em›s
->
	`hªdËNewM­
();

266 
haz¬ds
->
	`hªdËNewM­
();

267 
loÙ
->
	`hªdËNewM­
();

268 
pow”s
->
	`hªdËNewM­
(&
m­
->
cŞlid”
);

269 
m’u
->
’emy
->
	`hªdËNewM­
();

270 
Åcs
->
	`hªdËNewM­
();

271 
m’u
->
v’dÜ
->
Åc
 = 
NULL
;

272 
m’u
->
v’dÜ
->
visibË
 = 
çl£
;

273 
m’u
->
lk”
->
visibË
 = 
çl£
;

274 
m’u
->
¡ash
->
visibË
 = 
çl£
;

275 
m’u
->
Åc
->
visibË
 = 
çl£
;

276 
m’u
->
mši
->
	`´”’d”
(&
m­
->
cŞlid”
, m­->
w
, m­->
h
);

277 
Åc_id
 = -1;

280 
m­
->
»¥awn_m­
 = m­->
‹ËpÜt_m­Çme
;

281 
m­
->
»¥awn_pošt
.
x
 = 
pc
->
¡©s
.
pos
.x;

282 
m­
->
»¥awn_pošt
.
y
 = 
pc
->
¡©s
.
pos
.y;

285 ià(
pc
->
¡©s
.
³rmad—th
 &&…c->¡©s.
cÜp£
) {

286 
¡ršg¡»am
 
f’ame
;

287 
f’ame
 << 
PATH_USER
 << "§ve" << 
game_¦Ù
 << ".txt";

288 if(
	`»move
(
f’ame
.
	`¡r
().
	`c_¡r
()) != 0)

289 
	`³¼Ü
("Error deleting save from…ath");

291 
d–‘e
 
»que¡edGameS‹
;

292 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

295 
	`§veGame
();

299 
m­
->
cŞlid”
.
	`block
(
pc
->
¡©s
.
pos
.
x
,…c->¡©s.pos.
y
);

301 
m­
->
‹ËpÜtiÚ
 = 
çl£
;

302 
pc
->
¡©s
.
‹ËpÜtiÚ
 = 
çl£
;

305 
	}
}

311 
	gGameS‹PÏy
::
	$checkCªûl
() {

314 ià(
m’u
->
	`»que¡šgEx™
()) {

315 
	`§veGame
();

316 
	`Mix_H®tMusic
();

317 
d–‘e
 
»que¡edGameS‹
;

318 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

322 ià(
š±
->
dÚe
) {

323 
	`§veGame
();

324 
	`Mix_H®tMusic
();

325 
ex™Reque¡ed
 = 
Œue
;

327 
	}
}

332 
	gGameS‹PÏy
::
	$checkLog
() {

335 ià(
pc
->
»¥awn
) {

336 
m’u
->
hudlog
->
	`ş—r
();

340 ià(
m­
->
log_msg
 != "") {

341 
m’u
->
log
->
	`add
(
m­
->
log_msg
, 
LOG_TYPE_MESSAGES
);

342 
m’u
->
hudlog
->
	`add
(
m­
->
log_msg
);

343 
m­
->
log_msg
 = "";

347 ià(
pc
->
log_msg
 != "") {

348 
m’u
->
log
->
	`add
(
pc
->
log_msg
, 
LOG_TYPE_MESSAGES
);

349 
m’u
->
hudlog
->
	`add
(
pc
->
log_msg
);

350 
pc
->
log_msg
 = "";

354 ià(
ÿmp
->
log_msg
 != "") {

355 
m’u
->
log
->
	`add
(
ÿmp
->
log_msg
, 
LOG_TYPE_MESSAGES
);

356 
m’u
->
hudlog
->
	`add
(
ÿmp
->
log_msg
);

357 
ÿmp
->
log_msg
 = "";

361 ià(
m’u
->
šv
->
log_msg
 != "") {

362 
m’u
->
hudlog
->
	`add
(m’u->
šv
->
log_msg
);

363 
m’u
->
šv
->
log_msg
 = "";

367 ià(
pow”s
->
log_msg
 != "") {

368 
m’u
->
hudlog
->
	`add
(
pow”s
->
log_msg
);

369 
pow”s
->
log_msg
 = "";

371 
	}
}

373 
	gGameS‹PÏy
::
	$lßdT™Ës
() {

374 
FeP¬£r
 
šfe
;

375 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/titles.txt"))) {

376 
šfe
.
	`Ãxt
()) {

377 ià(
šfe
.
Ãw_£ùiÚ
 && infe.
£ùiÚ
 == "title") {

378 
T™Ë
 
t
;

379 
t™Ës
.
	`push_back
(
t
);

382 ià(
t™Ës
.
	`em±y
()) ;

384 ià(
šfe
.
key
 =ğ"t™Ë"è
t™Ës
.
	`back
().
t™Ë
 = infe.
v®
;

385 ià(
šfe
.
key
 =ğ"Ëv–"è
t™Ës
.
	`back
().
Ëv–
 = 
	`toIÁ
(šfe.
v®
);

386 ià(
šfe
.
key
 =ğ"pow”"è
t™Ës
.
	`back
().
pow”
 = 
	`toIÁ
(šfe.
v®
);

387 ià(
šfe
.
key
 =ğ"»quœes_¡©us"è
t™Ës
.
	`back
().
»quœes_¡©us
 = infe.
v®
;

388 ià(
šfe
.
key
 =ğ"»quœes_nÙ"è
t™Ës
.
	`back
().
»quœes_nÙ
 = infe.
v®
;

389 ià(
šfe
.
key
 =ğ"´im¬y_¡©"è
t™Ës
.
	`back
().
´im¬y_¡©
 = infe.
v®
;

391 
šfe
.
	`şo£
();

393 
	`årštf
(
¡d”r
, "Unableo openƒngine/titles.txt!\n");

394 
	}
}

396 
	gGameS‹PÏy
::
	$checkT™Ë
() {

397 ià(!
pc
->
¡©s
.
check_t™Ë
 || 
t™Ës
.
	`em±y
()) ;

399 
t™Ë_id
 = -1;

401 
i
=0; i<
t™Ës
.
	`size
(); i++) {

402 ià(
t™Ës
[
i
].
t™Ë
 == "") ;

404 ià(
t™Ës
[
i
].
Ëv–
 > 0 && 
pc
->
¡©s
.level <itles[i].level) ;

405 ià(
t™Ës
[
i
].
pow”
 > 0 && 
	`fšd
(
pc
->
¡©s
.
pow”s_li¡
.
	`begš
(),…c->¡©s.pow”s_li¡.
	`’d
(),itles[i].power) ==…c->stats.powers_list.end()) ;

406 ià(
t™Ës
[
i
].
»quœes_¡©us
 !ğ"" && !
ÿmp
->
	`checkStus
(titles[i].requires_status)) ;

407 ià(
t™Ës
[
i
].
»quœes_nÙ
 !ğ"" && 
ÿmp
->
	`checkStus
(titles[i].requires_not)) ;

408 ià(
t™Ës
[
i
].
´im¬y_¡©
 != "") {

409 ià(
t™Ës
[
i
].
´im¬y_¡©
 == "physical") {

410 ià(
pc
->
¡©s
.
	`g‘_physiÿl
(è<ğpc->¡©s.
	`g‘_m’l
(è||…c->¡©s.g‘_physiÿl(è<ğpc->¡©s.
	`g‘_ofãn£
(è||…c->¡©s.g‘_physiÿl(è<ğpc->¡©s.
	`g‘_deãn£
())

412 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "offense") {

413 ià(
pc
->
¡©s
.
	`g‘_ofãn£
(è<ğpc->¡©s.
	`g‘_m’l
(è||…c->¡©s.g‘_ofãn£(è<ğpc->¡©s.
	`g‘_physiÿl
(è||…c->¡©s.g‘_ofãn£(è<ğpc->¡©s.
	`g‘_deãn£
())

415 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "mental") {

416 ià(
pc
->
¡©s
.
	`g‘_m’l
(è<ğpc->¡©s.
	`g‘_physiÿl
(è||…c->¡©s.g‘_m’l(è<ğpc->¡©s.
	`g‘_ofãn£
(è||…c->¡©s.g‘_m’l(è<ğpc->¡©s.
	`g‘_deãn£
())

418 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "defense") {

419 ià(
pc
->
¡©s
.
	`g‘_deãn£
(è<ğpc->¡©s.
	`g‘_m’l
(è||…c->¡©s.g‘_deãn£(è<ğpc->¡©s.
	`g‘_ofãn£
(è||…c->¡©s.g‘_deãn£(è<ğpc->¡©s.
	`g‘_physiÿl
())

421 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "physoff") {

422 ià(
pc
->
¡©s
.
	`physoff
(è<ğpc->¡©s.
	`physdef
(è||…c->¡©s.physoff(è<ğpc->¡©s.
	`m’toff
(è||…c->¡©s.physoff(è<ğpc->¡©s.
	`m’tdef
(è||…c->¡©s.physoff(è<ğpc->¡©s.
	`physm’t
(è||…c->¡©s.physoff(è<ğpc->¡©s.
	`offdef
())

424 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "physment") {

425 ià(
pc
->
¡©s
.
	`physm’t
(è<ğpc->¡©s.
	`physdef
(è||…c->¡©s.physm’t(è<ğpc->¡©s.
	`m’toff
(è||…c->¡©s.physm’t(è<ğpc->¡©s.
	`m’tdef
(è||…c->¡©s.physm’t(è<ğpc->¡©s.
	`physoff
(è||…c->¡©s.physm’t(è<ğpc->¡©s.
	`offdef
())

427 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "physdef") {

428 ià(
pc
->
¡©s
.
	`physdef
(è<ğpc->¡©s.
	`physoff
(è||…c->¡©s.physdef(è<ğpc->¡©s.
	`m’toff
(è||…c->¡©s.physdef(è<ğpc->¡©s.
	`m’tdef
(è||…c->¡©s.physdef(è<ğpc->¡©s.
	`physm’t
(è||…c->¡©s.physdef(è<ğpc->¡©s.
	`offdef
())

430 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "mentoff") {

431 ià(
pc
->
¡©s
.
	`m’toff
(è<ğpc->¡©s.
	`physdef
(è||…c->¡©s.m’toff(è<ğpc->¡©s.
	`physoff
(è||…c->¡©s.m’toff(è<ğpc->¡©s.
	`m’tdef
(è||…c->¡©s.m’toff(è<ğpc->¡©s.
	`physm’t
(è||…c->¡©s.m’toff(è<ğpc->¡©s.
	`offdef
())

433 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "offdef") {

434 ià(
pc
->
¡©s
.
	`offdef
(è<ğpc->¡©s.
	`physdef
(è||…c->¡©s.offdef(è<ğpc->¡©s.
	`m’toff
(è||…c->¡©s.offdef(è<ğpc->¡©s.
	`m’tdef
(è||…c->¡©s.offdef(è<ğpc->¡©s.
	`physm’t
(è||…c->¡©s.offdef(è<ğpc->¡©s.
	`physoff
())

436 } ià(
t™Ës
[
i
].
´im¬y_¡©
 == "mentdef") {

437 ià(
pc
->
¡©s
.
	`m’tdef
(è<ğpc->¡©s.
	`physdef
(è||…c->¡©s.m’tdef(è<ğpc->¡©s.
	`m’toff
(è||…c->¡©s.m’tdef(è<ğpc->¡©s.
	`physoff
(è||…c->¡©s.m’tdef(è<ğpc->¡©s.
	`physm’t
(è||…c->¡©s.m’tdef(è<ğpc->¡©s.
	`offdef
())

442 
t™Ë_id
 = 
i
;

446 ià(
t™Ë_id
 !ğ-1è
pc
->
¡©s
.
ch¬aù”_şass
 = 
t™Ës
[t™Ë_id].
t™Ë
;

447 
pc
->
¡©s
.
check_t™Ë
 = 
çl£
;

448 
pc
->
¡©s
.
»äesh_¡©s
 = 
Œue
;

449 
	}
}

451 
	gGameS‹PÏy
::
	$checkEqum’tChªge
() {

452 ià(
m’u
->
šv
->
chªged_equm’t
) {

454 
veùÜ
<
Lay”_gfx
> 
img_gfx
;

456 
j
=0; j<
pc
->
Ïy”_»ã»nû_Üd”
.
	`size
(); j++) {

457 
Lay”_gfx
 
gfx
;

458 
gfx
.gfx = "";

459 
gfx
.
ty³
 = "";

460 
i
=0; i<
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`g‘SlÙNumb”
(); i++) {

461 ià(
pc
->
Ïy”_»ã»nû_Üd”
[
j
] =ğ
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
¦Ù_ty³
[
i
]) {

462 
gfx
.gfx = 
m’u
->
™ems
->™ems[m’u->
šv
->
šv’tÜy
[
EQUIPMENT
][
i
].
™em
].gfx;

463 
gfx
.
ty³
 = 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
¦Ù_ty³
[
i
];

467 ià(
gfx
.gfx =ğ"" && 
pc
->
Ïy”_»ã»nû_Üd”
[
j
] == "head") {

468 
gfx
.gfx = 
pc
->
¡©s
.
h—d
;

469 
gfx
.
ty³
 = "head";

472 ià(
gfx
.gfx == "") {

473 
boŞ
 
exi¡s
 = 
	`feExi¡s
(
mods
->
	`loÿ‹
("ªim©iÚs/av©¬/" + 
pc
->
¡©s
.
ba£
 + "/deçuÉ_" + 
gfx
.
ty³
 + ".txt"));

474 ià(
exi¡s
è
gfx
.gfx = "deçuÉ_" + gfx.
ty³
;

476 
img_gfx
.
	`push_back
(
gfx
);

478 
	`as£¹
(
pc
->
Ïy”_»ã»nû_Üd”
.
	`size
()==
img_gfx
.size());

479 
pc
->
	`lßdG¿phics
(
img_gfx
);

481 
pc
->
	`lßdS‹pFX
(
m’u
->
™ems
->™ems[m’u->
šv
->
šv’tÜy
[
EQUIPMENT
][1].
™em
].
¡•fx
);

483 
m’u
->
šv
->
chªged_equm’t
 = 
çl£
;

485 
	}
}

487 
	gGameS‹PÏy
::
	$checkLoÙDrİ
() {

490 ià(
m’u
->
drİ_¡ack
.
™em
 > 0) {

491 
loÙ
->
	`addLoÙ
(
m’u
->
drİ_¡ack
, 
pc
->
¡©s
.
pos
);

492 
m’u
->
drİ_¡ack
.
™em
 = 0;

493 
m’u
->
drİ_¡ack
.
quªt™y
 = 0;

497 ià(
ÿmp
->
drİ_¡ack
.
™em
 > 0) {

498 
loÙ
->
	`addLoÙ
(
ÿmp
->
drİ_¡ack
, 
pc
->
¡©s
.
pos
);

499 
ÿmp
->
drİ_¡ack
.
™em
 = 0;

500 
ÿmp
->
drİ_¡ack
.
quªt™y
 = 0;

503 
	}
}

508 
	gGameS‹PÏy
::
	$checkCÚsumabË
() {

509 
i
=0; i<
pow”s
->
u£d_™ems
.
	`size
(); i++) {

510 ià(
m’u
->
™ems
->™ems[
pow”s
->
u£d_™ems
[
i
]].
ty³
 == "consumable") {

511 
m’u
->
šv
->
	`»move
(
pow”s
->
u£d_™ems
[
i
]);

514 
i
=0; i<
pow”s
->
u£d_equ³d_™ems
.
	`size
(); i++) {

515 
m’u
->
šv
->
	`»moveEqu³d
(
pow”s
->
u£d_equ³d_™ems
[
i
]);

517 
pow”s
->
u£d_™ems
.
	`ş—r
();

518 
pow”s
->
u£d_equ³d_™ems
.
	`ş—r
();

519 
	}
}

524 
	gGameS‹PÏy
::
	$checkNÙifiÿtiÚs
() {

525 ià(
pc
->
ÃwLev–NÙifiÿtiÚ
) {

526 
pc
->
ÃwLev–NÙifiÿtiÚ
 = 
çl£
;

527 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_CHARACTER
] = 
Œue
;

529 ià(
m’u
->
chr
->
ÃwPow”NÙifiÿtiÚ
) {

530 
m’u
->
chr
->
ÃwPow”NÙifiÿtiÚ
 = 
çl£
;

531 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_POWERS
] = 
Œue
;

533 ià(
que¡s
->
»£tQue¡NÙifiÿtiÚ
) {

534 
que¡s
->
»£tQue¡NÙifiÿtiÚ
 = 
çl£
;

535 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_LOG
] = 
çl£
;

537 ià(
que¡s
->
ÃwQue¡NÙifiÿtiÚ
) {

538 
que¡s
->
ÃwQue¡NÙifiÿtiÚ
 = 
çl£
;

539 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_LOG
] = 
Œue
;

543 ià(!
pc
->
¡©s
.
humªoid
) {

544 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_CHARACTER
] = 
çl£
;

545 
m’u
->
aù
->
»quœes_©‹ÁiÚ
[
MENU_POWERS
] = 
çl£
;

547 
	}
}

554 
	gGameS‹PÏy
::
	$checkNPCIÁ”aùiÚ
() {

555 ià(
pc
->
©ckšg
) ;

557 
Åc_şick
 = -1;

558 
max_š‹¿ù_di¡ªû
 = 
UNITS_PER_TILE
 * 4;

559 
š‹¿ù_di¡ªû
 = 
max_š‹¿ù_di¡ªû
+1;

562 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]) {

563 
Åc_şick
 = 
Åcs
->
	`checkNPCClick
(
š±
->
mou£
, 
m­
->
ÿm
);

564 ià(
Åc_şick
 !ğ-1è
Åc_id
 =‚pc_click;

567 ià(
š±
->
´essšg
[
ACCEPT
] && !š±->
lock
[ACCEPT]) {

568 
Åc_şick
 = 
Åcs
->
	`g‘N—»¡NPC
(
pc
->
¡©s
.
pos
);

569 ià(
Åc_şick
 !ğ-1è
Åc_id
 =‚pc_click;

573 ià(
Åc_id
 != -1) {

574 
š‹¿ù_di¡ªû
 = ()
	`ÿlcDi¡
(
pc
->
¡©s
.
pos
, 
Åcs
->Åcs[
Åc_id
]->pos);

577 ià(
m­
->
ev’t_Åc
 != "") {

578 
Åc_id
 = 
Åcs
->
	`g‘ID
(
m­
->
ev’t_Åc
);

579 ià(
Åc_id
 != -1) {

580 
ev’tDŸlogOngošg
 = 
Œue
;

581 
ev’tP’dšgDŸlog
 = 
Œue
;

583 
m­
->
ev’t_Åc
 = "";

588 ià(
Åc_id
 !ğ-1 && ((
Åc_şick
 !ğ-1 && 
š‹¿ù_di¡ªû
 < 
max_š‹¿ù_di¡ªû
 && 
pc
->
¡©s
.
®ive
 &&…c->¡©s.
humªoid
è|| 
ev’tP’dšgDŸlog
)) {

590 ià(
š±
->
´essšg
[
MAIN1
]èš±->
lock
[MAIN1] = 
Œue
;

591 ià(
š±
->
´essšg
[
ACCEPT
]èš±->
lock
[ACCEPT] = 
Œue
;

593 
m’u
->
Åc
->
	`£tNPC
(
Åcs
->Åcs[
Åc_id
]);

596 ià(!
m’u
->
Åc
->
	`em±y
(è&& !m’u->Åc->
	`£ËùiÚ
())

597 
m’u
->
Åc
->
visibË
 = 
Œue
;

601 ià(
m’u
->
Åc
->
	`£ËùiÚ
()) {

602 ià(
m’u
->
Åc
->
v’dÜ_£Ëùed
) {

603 
m’u
->
v’dÜ
->
lk”_visibË
 = 
çl£
;

604 
m’u
->
lk”
->
v’dÜ_visibË
 = 
Œue
;

605 
Åcs
->Åcs[
Åc_id
]->
	`¶aySound
(
NPC_VOX_INTRO
);

606 } ià(
m’u
->
Åc
->
dŸlog_£Ëùed
) {

607 
m’u
->
v’dÜ
->
lk”_visibË
 = 
Œue
;

608 
m’u
->
lk”
->
v’dÜ_visibË
 = 
çl£
;

611 
m’u
->
Åc
->
	`£tNPC
(
NULL
);

614 ià(
Åc_id
 !ğ-1 && ((
š‹¿ù_di¡ªû
 < 
max_š‹¿ù_di¡ªû
 && 
pc
->
¡©s
.
®ive
 &&…c->¡©s.
humªoid
è|| 
ev’tP’dšgDŸlog
)) {

616 ià(
m’u
->
lk”
->
v’dÜ_visibË
 && !m’u->
v’dÜ
->
lk”_visibË
) {

619 
m’u
->
v’dÜ
->
	`£tTab
(0);

620 
m’u
->
v’dÜ
->
Åc
 = 
Åcs
->Åcs[
Åc_id
];

621 
m’u
->
v’dÜ
->
	`£tInv’tÜy
();

622 
m’u
->
	`şo£AÎ
();

623 
m’u
->
lk”
->
visibË
 = 
çl£
;

624 
m’u
->
v’dÜ
->
visibË
 = 
Œue
;

625 
m’u
->
šv
->
visibË
 = 
Œue
;

628 ià(!
Åcs
->Åcs[
Åc_id
]->
lk”
)

629 
Åcs
->Åcs[
Åc_id
]->
	`¶aySound
(
NPC_VOX_INTRO
);

631 
¢d
->
	`¶ay
(
m’u
->
v’dÜ
->
sfx_İ’
);

633 
m’u
->
lk”
->
v’dÜ_visibË
 = 
çl£
;

634 
m’u
->
v’dÜ
->
lk”_visibË
 = 
çl£
;

636 } ià(!
m’u
->
lk”
->
v’dÜ_visibË
 && m’u->
v’dÜ
->
lk”_visibË
 && 
Åcs
->Åcs[
Åc_id
]->talker) {

639 ià(
Åcs
->Åcs[
Åc_id
]->
v’dÜ
) {

640 
m’u
->
lk”
->
v’dÜ_visibË
 = 
çl£
;

641 
m’u
->
v’dÜ
->
lk”_visibË
 = 
Œue
;

644 
m’u
->
lk”
->
Åc
 = 
Åcs
->Åcs[
Åc_id
];

645 
m’u
->
lk”
->
	`choo£DŸlogNode
(m’u->
Åc
->
£Ëùed_dŸlog_node
);

647 
m’u
->
	`şo£AÎ
();

648 
m’u
->
lk”
->
visibË
 = 
Œue
;

649 
m’u
->
v’dÜ
->
visibË
 = 
çl£
;

650 
m’u
->
šv
->
visibË
 = 
çl£
;

652 
m’u
->
lk”
->
v’dÜ_visibË
 = 
çl£
;

653 
m’u
->
v’dÜ
->
lk”_visibË
 = 
çl£
;

656 ià(
ev’tP’dšgDŸlog
èev’tP’dšgDŸlog = 
çl£
;

661 ià(
Åc_id
 !ğ-1 && !
ev’tDŸlogOngošg
) {

662 ià(
š‹¿ù_di¡ªû
 > 
max_š‹¿ù_di¡ªû
 || !
pc
->
¡©s
.
®ive
) {

663 
m’u
->
Åc
->
	`£tNPC
(
NULL
);

664 
m’u
->
v’dÜ
->
Åc
 = 
NULL
;

665 
m’u
->
lk”
->
Åc
 = 
NULL
;

666 ià(
m’u
->
v’dÜ
->
visibË
 || m’u->
lk”
->visibË || m’u->
Åc
->visible) {

667 
m’u
->
v’dÜ
->
visibË
 = 
çl£
;

668 
m’u
->
lk”
->
visibË
 = 
çl£
;

669 
m’u
->
Åc
->
visibË
 = 
çl£
;

671 
Åc_id
 = -1;

674 ià((!
m’u
->
v’dÜ
->
visibË
 && !m’u->
lk”
->visibËè|| 
Åc_şick
 != -1) {

675 
ev’tDŸlogOngošg
 = 
çl£
;

678 
	}
}

680 
	gGameS‹PÏy
::
	$checkSsh
() {

681 
max_š‹¿ù_di¡ªû
 = 
UNITS_PER_TILE
 * 4;

682 
š‹¿ù_di¡ªû
 = 
max_š‹¿ù_di¡ªû
+1;

684 ià(
m­
->
¡ash
) {

686 
m’u
->
šv
->
visibË
 = 
Œue
;

687 
m’u
->
¡ash
->
visibË
 = 
Œue
;

688 
m­
->
¡ash
 = 
çl£
;

691 ià(!
m’u
->
šv
->
visibË
èm’u->
¡ash
->visibË = 
çl£
;

694 
š‹¿ù_di¡ªû
 = ()
	`ÿlcDi¡
(
pc
->
¡©s
.
pos
, 
m­
->
¡ash_pos
);

695 ià(
š‹¿ù_di¡ªû
 > 
max_š‹¿ù_di¡ªû
 || !
pc
->
¡©s
.
®ive
) {

696 
m’u
->
¡ash
->
visibË
 = 
çl£
;

700 ià(
m’u
->
¡ash
->
upd©ed
) {

701 
m’u
->
¡ash
->
upd©ed
 = 
çl£
;

702 
	`§veGame
();

705 
	}
}

711 
	gGameS‹PÏy
::
	$logic
() {

714 
m’u
->
	`logic
();

716 ià(!
m’u
->
·u£
) {

719 ià(
pc
->
¡©s
.
®ive
è
	`checkLoÙ
();

720 
	`checkEÃmyFocus
();

721 ià(
pc
->
¡©s
.
®ive
) {

722 
	`checkNPCIÁ”aùiÚ
();

723 
m­
->
	`checkHÙ¥Ùs
();

724 
m­
->
	`checkN—»¡Ev’t
(
pc
->
¡©s
.
pos
);

726 
	`checkT™Ë
();

728 
pc
->
	`logic
(
m’u
->
aù
->
	`checkAùiÚ
(
š±
->
mou£
), 
	`»¡riùPow”U£
());

731 
’em›s
->
h”o_pos
 = 
pc
->
¡©s
.
pos
;

732 
’em›s
->
h”o_®ive
 = 
pc
->
¡©s
.
®ive
;

733 ià(
pc
->
¡©s
.
efãùs
.
bÚus_¡—Éh
 > 100è
’em›s
->
h”o_¡—Éh
 = 100;

734 
’em›s
->
h”o_¡—Éh
 = 
pc
->
¡©s
.
efãùs
.
bÚus_¡—Éh
;

736 
’em›s
->
	`logic
();

737 
haz¬ds
->
	`logic
();

738 
loÙ
->
	`logic
();

739 
’em›s
->
	`checkEÃm›sfÜXP
(
ÿmp
);

740 
Åcs
->
	`logic
();

742 
¢d
->
	`logic
(
pc
->
¡©s
.
pos
);

746 ià(
pc
->
şo£_m’us
) {

747 
pc
->
şo£_m’us
 = 
çl£
;

748 
m’u
->
	`şo£AÎ
();

752 
	`checkNÙifiÿtiÚs
();

753 
	`checkLoÙDrİ
();

754 
	`checkT–•Üt
();

755 
	`checkLog
();

756 
	`checkEqum’tChªge
();

757 
	`checkCÚsumabË
();

758 
	`checkSsh
();

759 
	`checkCªûl
();

761 
m­
->
	`logic
();

762 
m­
->
’em›s_ş—»d
 = 
’em›s
->
	`isCË¬ed
();

763 
que¡s
->
	`logic
();

767 ià(
pc
->
£tPow”s
) {

768 
pc
->
£tPow”s
 = 
çl£
;

769 ià(!
pc
->
¡©s
.
humªoid
 && 
m’u
->
pow
->
visibË
èm’u->
	`şo£Right
();

771 
i
=0; i<12 ; i++) {

772 
m’u
->
aù
->
aùiÚb¬
[
i
] = m’u->aù->
hÙkeys
[i];

773 
m’u
->
aù
->
hÙkeys
[
i
] = 0;

775 
couÁ
 = 10;

776 
i
=0; i<4 ; i++) {

777 ià(
pc
->
ch¬med_¡©s
->
pow”_šdex
[
i
] != 0) {

778 
m’u
->
aù
->
hÙkeys
[
couÁ
] = 
pc
->
ch¬med_¡©s
->
pow”_šdex
[
i
];

779 
m’u
->
aù
->
locked
[
couÁ
] = 
Œue
;

780 
couÁ
++;

782 ià(
couÁ
 == 12) count = 0;

784 ià(
pc
->
¡©s
.
mªu®_uÁ¿nsfÜm
 &&…c->
uÁ¿nsfÜm_pow”
 > 0) {

785 
m’u
->
aù
->
hÙkeys
[
couÁ
] = 
pc
->
uÁ¿nsfÜm_pow”
;

786 
m’u
->
aù
->
locked
[
couÁ
] = 
Œue
;

787 } ià(
pc
->
¡©s
.
mªu®_uÁ¿nsfÜm
 &&…c->
uÁ¿nsfÜm_pow”
 == 0)

788 
	`årštf
(
¡d”r
, "Untransform…ower‚ot found, you can't untransform manually\n");

791 ià(
pc
->
¡©s
.
ŒªsfÜm_w™h_equm’t
)

792 
m’u
->
šv
->
	`­¶yEqum’t
(m’u->šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

795 ià(
pc
->
»v”tPow”s
) {

796 
pc
->
»v”tPow”s
 = 
çl£
;

799 
i
=0; i<12 ; i++) {

800 
m’u
->
aù
->
hÙkeys
[
i
] = m’u->aù->
aùiÚb¬
[i];

801 
m’u
->
aù
->
locked
[
i
] = 
çl£
;

805 
m’u
->
šv
->
	`­¶yEqum’t
(m’u->šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

809 ià(
pc
->
»¥awn
) {

810 
pc
->
¡©s
.
®ive
 = 
Œue
;

811 
pc
->
¡©s
.
cÜp£
 = 
çl£
;

812 
pc
->
¡©s
.
cur_¡©e
 = 
AVATAR_STANCE
;

813 
m’u
->
šv
->
	`­¶yEqum’t
(m’u->šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

814 
pc
->
pow”s
->
	`aùiv©ePassives
(&pc->
¡©s
);

815 
pc
->
¡©s
.
	`logic
();

816 
pc
->
¡©s
.
	`»ÿlc
();

817 
pc
->
»¥awn
 = 
çl£
;

819 
	}
}

825 
	gGameS‹PÏy
::
	$»nd”
() {

829 
veùÜ
<
R’d”abË
> 
»ns
;

830 
veùÜ
<
R’d”abË
> 
»ns_d—d
;

832 
pc
->
	`addR’d”s
(
»ns
);

834 
’em›s
->
	`addR’d”s
(
»ns
, 
»ns_d—d
);

836 
Åcs
->
	`addR’d”s
(
»ns
);

838 
loÙ
->
	`addR’d”s
(
»ns
, 
»ns_d—d
);

840 
haz¬ds
->
	`addR’d”s
(
»ns
, 
»ns_d—d
);

844 
m­
->
	`»nd”
(
»ns
, 
»ns_d—d
);

847 
loÙ
->
	`»nd”ToŞts
(
m­
->
ÿm
);

848 
Åcs
->
	`»nd”ToŞts
(
m­
->
ÿm
, 
š±
->
mou£
);

850 ià(
m­
->
m­_chªge
) {

851 
m’u
->
mši
->
	`´”’d”
(&
m­
->
cŞlid”
, m­->
w
, m­->
h
);

852 
m­
->
m­_chªge
 = 
çl£
;

854 
m’u
->
mši
->
	`g‘M­T™Ë
(
m­
->
t™Ë
);

855 
m’u
->
mši
->
	`»nd”
(
pc
->
¡©s
.
pos
);

856 
m’u
->
	`»nd”
();

860 
Comb©Text
 *
comb©_‹xt
 = 
comb
;

861 
comb©_‹xt
->
	`£tCam
(
m­
->
ÿm
);

862 
comb©_‹xt
->
	`»nd”
();

863 
	}
}

865 
	gGameS‹PÏy
::
	$showLßdšg
() {

866 ià(!
lßdšg_bg
) ;

868 
SDL_Reù
 
de¡
;

869 
de¡
.
x
 = 
VIEW_W_HALF
 - 
lßdšg_bg
->
w
/2;

870 
de¡
.
y
 = 
VIEW_H_HALF
 - 
lßdšg_bg
->
h
/2;

872 
	`SDL_Bl™Surçû
(
lßdšg_bg
,
NULL
,
sü“n
,&
de¡
);

873 
lßdšg
->
	`»nd”
();

875 
	`SDL_Fl
(
sü“n
);

876 
	}
}

878 
	gGameS‹PÏy
::~
	$GameS‹PÏy
() {

879 
d–‘e
 
que¡s
;

880 
d–‘e
 
Åcs
;

881 
d–‘e
 
haz¬ds
;

882 
d–‘e
 
’em›s
;

883 
d–‘e
 
pc
;

884 
d–‘e
 
m­
;

885 
d–‘e
 
m’u
;

886 
d–‘e
 
loÙ
;

887 
d–‘e
 
ÿmp
;

888 
d–‘e
 
™ems
;

889 
d–‘e
 
pow”s
;

891 
d–‘e
 
lßdšg
;

893 
	`SDL_F»eSurçû
(
lßdšg_bg
);

894 
	}
}

	@GameStatePlay.h

27 #´agm¨
Úû


28 #iâdeà
GAMESTATEPLAY_H


29 
	#GAMESTATEPLAY_H


	)

31 
	~"GameS‹.h
"

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

36 
	~<¡ršg
>

37 
	~<veùÜ
>

39 
şass
 
	gAv©¬
;

40 
şass
 
	gCam·ignMªag”
;

41 
şass
 
	gEÃmy
;

42 
şass
 
	gEÃmyMªag”
;

43 
şass
 
	gHaz¬dMªag”
;

44 
şass
 
	gI‹mMªag”
;

45 
şass
 
	gLoÙMªag”
;

46 
şass
 
	gM­R’d””
;

47 
şass
 
	gM’uMªag”
;

48 
şass
 
	gNPCMªag”
;

49 
şass
 
	gPow”Mªag”
;

50 
şass
 
	gQue¡Log
;

51 
şass
 
	gWidg‘Lab–
;

53 şas 
	cT™Ë
{

54 
	mpublic
:

55 
¡d
::
¡ršg
 
t™Ë
;

56 
	mËv–
;

57 
	mpow”
;

58 
	m¡d
::
¡ršg
 
»quœes_¡©us
;

59 
	m¡d
::
¡ršg
 
»quœes_nÙ
;

60 
	m¡d
::
¡ršg
 
´im¬y_¡©
;

62 
	$T™Ë
()

63 : 
	`t™Ë
("")

64 , 
	`Ëv–
(0)

65 , 
	`pow”
(0)

66 , 
	`»quœes_¡©us
("")

67 , 
	`»quœes_nÙ
("")

68 , 
	`´im¬y_¡©
("")

70 
	}
};

72 şas 
	cGameS‹PÏy
 : 
public
 
GameS‹
 {

73 
´iv©e
:

74 
EÃmy
 *
’emy
;

76 
Pow”Mªag”
 *
	mpow”s
;

77 
I‹mMªag”
 *
	m™ems
;

78 
Cam·ignMªag”
 *
	mÿmp
;

79 
M­R’d””
 *
	mm­
;

80 
Av©¬
 *
	mpc
;

81 
EÃmyMªag”
 *
	m’em›s
;

82 
Haz¬dMªag”
 *
	mhaz¬ds
;

83 
M’uMªag”
 *
	mm’u
;

84 
LoÙMªag”
 *
	mloÙ
;

85 
NPCMªag”
 *
	mÅcs
;

86 
Que¡Log
 *
	mque¡s
;

88 
Widg‘Lab–
 *
	mlßdšg
;

89 
SDL_Surçû
 *
	mlßdšg_bg
;

91 
boŞ
 
»¡riùPow”U£
();

92 
checkEÃmyFocus
();

93 
checkLoÙ
();

94 
checkLoÙDrİ
();

95 
checkT–•Üt
();

96 
checkCªûl
();

97 
checkLog
();

98 
checkEqum’tChªge
();

99 
checkT™Ë
();

100 
checkCÚsumabË
();

101 
checkNÙifiÿtiÚs
();

102 
checkNPCIÁ”aùiÚ
();

103 
checkSsh
();

104 
showLßdšg
();

105 
lßdT™Ës
();

107 
	mÅc_id
;

108 
boŞ
 
	mev’tDŸlogOngošg
;

109 
boŞ
 
	mev’tP’dšgDŸlog
;

111 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

113 
	m¡d
::
veùÜ
<
T™Ë
> 
t™Ës
;

115 
	mpublic
:

116 
GameS‹PÏy
();

117 ~
GameS‹PÏy
();

119 
logic
();

120 
»nd”
();

121 
showFPS
(
ås
);

122 
§veGame
();

123 
lßdGame
();

124 
lßdCÏss
(
šdex
);

125 
lßdSsh
();

126 
»£tGame
();

127 
	mgame_¦Ù
;

129 
Av©¬
 *
	$g‘Av©¬
(ècÚ¡ {  
pc
; }

130 
	}
};

	@GameStateTitle.cpp

18 
	~<io¡»am
>

20 
	~"GameS‹Lßd.h
"

21 
	~"GameS‹T™Ë.h
"

22 
	~"GameS‹CÚfig.h
"

23 
	~"Sh¬edResourûs.h
"

24 
	~"S‘tšgs.h
"

25 
	~"Widg‘Bu‰Ú.h
"

26 
	~"Widg‘Lab–.h
"

28 
	gGameS‹T™Ë
::
	$GameS‹T™Ë
(è: 
	$GameS‹
() {

30 
ex™_game
 = 
çl£
;

31 
lßd_game
 = 
çl£
;

33 
	`lßdG¿phics
();

36 
bu‰Ú_¶ay
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

37 
bu‰Ú_ex™
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

38 
bu‰Ú_cfg
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

40 
bu‰Ú_¶ay
->
Ïb–
 = 
msg
->
	`g‘
("Play Game");

41 
bu‰Ú_¶ay
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰Ú_¶ay->pos.
w
/2;

42 
bu‰Ú_¶ay
->
pos
.
y
 = 
VIEW_H
 - (
bu‰Ú_ex™
->pos.
h
*3);

43 ià(!
ENABLE_PLAYGAME
) {

44 
bu‰Ú_¶ay
->
’abËd
 = 
çl£
;

45 
bu‰Ú_¶ay
->
toŞt
 = 
msg
->
	`g‘
("Enable‡ core modo continue");

47 
bu‰Ú_¶ay
->
	`»äesh
();

49 
bu‰Ú_cfg
->
Ïb–
 = 
msg
->
	`g‘
("Configuration");

50 
bu‰Ú_cfg
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰Ú_cfg->pos.
w
/2;

51 
bu‰Ú_cfg
->
pos
.
y
 = 
VIEW_H
 - (
bu‰Ú_ex™
->pos.
h
*2);

52 
bu‰Ú_cfg
->
	`»äesh
();

54 
bu‰Ú_ex™
->
Ïb–
 = 
msg
->
	`g‘
("Exit Game");

55 
bu‰Ú_ex™
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰Ú_ex™->pos.
w
/2;

56 
bu‰Ú_ex™
->
pos
.
y
 = 
VIEW_H
 - bu‰Ú_ex™->pos.
h
;

57 
bu‰Ú_ex™
->
	`»äesh
();

60 
Ïb–_v”siÚ
 = 
Ãw
 
	`Widg‘Lab–
();

61 
Ïb–_v”siÚ
->
	`£t
(
VIEW_W
, 0, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
msg
->
	`g‘
("FÏ» AÍh¨v0.18"), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

63 
š±
->
	`’abËMou£EmuÏtiÚ
();

64 
	}
}

66 
	gGameS‹T™Ë
::
	$lßdG¿phics
() {

68 
SDL_Surçû
 *
ş—nup
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/logo.²g").
	`c_¡r
());

70 if(!
ş—nup
) {

71 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

74 
logo
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(
ş—nup
);

75 
	`SDL_F»eSurçû
(
ş—nup
);

77 
	}
}

79 
	gGameS‹T™Ë
::
	$logic
() {

80 
bu‰Ú_¶ay
->
’abËd
 = 
ENABLE_PLAYGAME
;

82 
¢d
->
	`logic
(
	`Pošt
(0,0));

84 ià(
bu‰Ú_¶ay
->
	`checkClick
()) {

85 
d–‘e
 
»que¡edGameS‹
;

86 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹Lßd
();

87 } ià(
bu‰Ú_cfg
->
	`checkClick
()) {

88 
d–‘e
 
»que¡edGameS‹
;

89 
»que¡edGameS‹
 = 
Ãw
 
	`GameS‹CÚfig
();

90 } ià(
bu‰Ú_ex™
->
	`checkClick
()) {

91 
ex™Reque¡ed
 = 
Œue
;

93 
	}
}

95 
	gGameS‹T™Ë
::
	$»nd”
() {

97 
SDL_Reù
 
¤c
;

98 
SDL_Reù
 
de¡
;

101 ià(
logo
) {

102 
¤c
.
x
 = src.
y
 = 0;

103 
¤c
.
w
 = 
de¡
.w = 
logo
->w;

104 
¤c
.
h
 = 
de¡
.h = 
logo
->h;

105 
de¡
.
x
 = 
VIEW_W_HALF
 - (
logo
->
w
/2);

106 
de¡
.
y
 = 
VIEW_H_HALF
 - (
logo
->
h
/2);

107 
	`SDL_Bl™Surçû
(
logo
, &
¤c
, 
sü“n
, &
de¡
);

111 
bu‰Ú_¶ay
->
	`»nd”
();

112 
bu‰Ú_cfg
->
	`»nd”
();

113 
bu‰Ú_ex™
->
	`»nd”
();

116 
Ïb–_v”siÚ
->
	`»nd”
();

117 
	}
}

119 
	gGameS‹T™Ë
::~
	$GameS‹T™Ë
() {

120 
d–‘e
 
bu‰Ú_¶ay
;

121 
d–‘e
 
bu‰Ú_cfg
;

122 
d–‘e
 
bu‰Ú_ex™
;

123 
d–‘e
 
Ïb–_v”siÚ
;

124 
	`SDL_F»eSurçû
(
logo
);

125 
	}
}

	@GameStateTitle.h

19 #´agm¨
Úû


20 #iâdeà
GAMESTATETITLE_H


21 
	#GAMESTATETITLE_H


	)

23 
	~"GameS‹.h
"

25 
şass
 
	gWidg‘Bu‰Ú
;

26 
şass
 
	gWidg‘Lab–
;

28 şas 
	cGameS‹T™Ë
 : 
public
 
GameS‹
 {

29 
´iv©e
:

30 
SDL_Surçû
 *
logo
;

31 
Widg‘Bu‰Ú
 *
	mbu‰Ú_¶ay
;

32 
Widg‘Bu‰Ú
 *
	mbu‰Ú_ex™
;

33 
Widg‘Bu‰Ú
 *
	mbu‰Ú_cfg
;

34 
Widg‘Lab–
 *
	mÏb–_v”siÚ
;

36 
	mpublic
:

37 
GameS‹T™Ë
();

38 ~
GameS‹T™Ë
();

39 
lßdG¿phics
();

40 
logic
();

41 
»nd”
();

44 
boŞ
 
	mex™_game
;

45 
boŞ
 
	mlßd_game
;

	@GameSwitcher.cpp

33 
	~"GameSw™ch”.h
"

34 
	~"GameS‹T™Ë.h
"

35 
	~"Sh¬edResourûs.h
"

36 
	~"S‘tšgs.h
"

37 
	~"FeP¬£r.h
"

38 
	~"UtsP¬sšg.h
"

40 
usšg
 
Çme¥aû
 
	g¡d
;

42 
	gGameSw™ch”
::
	$GameSw™ch”
() {

45 
cu¼’tS‹
 = 
Ãw
 
	`GameS‹T™Ë
();

47 
Ïb–_ås
 = 
Ãw
 
	`Widg‘Lab–
();

48 
dÚe
 = 
çl£
;

49 
music
 = 
NULL
;

50 
	`lßdMusic
();

51 
	`lßdFPS
();

52 
	}
}

54 
	gGameSw™ch”
::
	$lßdMusic
() {

55 ià(
AUDIO
 && 
MUSIC_VOLUME
) {

56 
	`Mix_F»eMusic
(
music
);

57 
music
 = 
	`Mix_LßdMUS
((
mods
->
	`loÿ‹
("music/t™Ë_theme.ogg")).
	`c_¡r
());

58 ià(!
music
)

59 
	`´štf
("Mix_LßdMUS: %s\n", 
	`Mix_G‘E¼Ü
());

62 ià(
music
) {

63 
	`Mix_VŞumeMusic
(
MUSIC_VOLUME
);

64 
	`Mix_PÏyMusic
(
music
, -1);

66 
	}
}

68 
	gGameSw™ch”
::
	$logic
() {

70 
GameS‹
* 
ÃwS‹
 = 
cu¼’tS‹
->
	`g‘Reque¡edGameS‹
();

71 ià(
ÃwS‹
 !ğ
NULL
) {

72 
d–‘e
 
cu¼’tS‹
;

73 
cu¼’tS‹
 = 
ÃwS‹
;

76 
	`lßdFPS
();

79 ià(!
cu¼’tS‹
->
hasMusic
)

80 ià(!
	`Mix_PÏyšgMusic
())

81 ià(
music
)

82 
	`Mix_PÏyMusic
(
music
, -1);

85 
cu¼’tS‹
->
	`logic
();

88 
dÚe
 = 
cu¼’tS‹
->
	`isEx™Reque¡ed
();

90 ià(
cu¼’tS‹
->
»lßd_music
) {

91 
	`lßdMusic
();

92 
cu¼’tS‹
->
»lßd_music
 = 
çl£
;

94 
	}
}

96 
	gGameSw™ch”
::
	$showFPS
(
ås
) {

97 ià(!
SHOW_FPS
) ;

98 
¡ršg
 
sås
 = 
	`toSŒšg
(
	`ty³id
(
ås
), &åsè+ 
	`¡ršg
(" fps");

99 
Ïb–_ås
->
	`£t
(
ås_pos™iÚ
.
x
, fps_pos™iÚ.
y
, 
JUSTIFY_LEFT
, 
VALIGN_TOP
, 
sås
, 
ås_cŞÜ
);

100 
Ïb–_ås
->
	`»nd”
();

101 
	}
}

103 
	gGameSw™ch”
::
	$lßdFPS
() {

105 
FeP¬£r
 
šfe
;

106 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/fps.txt"))) {

107 
šfe
.
	`Ãxt
()) {

108 
šfe
.
v®
 = infile.val + ',';

110 if(
šfe
.
key
 == "position") {

111 
ås_pos™iÚ
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

112 
ås_pos™iÚ
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

113 
ås_cÜÃr
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

114 } if(
šfe
.
key
 == "color") {

115 
ås_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

116 
ås_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

117 
ås_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

120 
šfe
.
	`şo£
();

121 } 
	`årštf
(
¡d”r
, "Unableo open menus/fps.txt!\n");

124 
fÚt
->
	`£tFÚt
("font_regular");

125 
w
 = 
fÚt
->
	`ÿlc_width
("00 fps");

126 
h
 = 
fÚt
->
	`g‘LšeHeight
();

128 ià(
ås_cÜÃr
 == "top_left") {

130 } ià(
ås_cÜÃr
 == "top_right") {

131 
ås_pos™iÚ
.
x
 +ğ
VIEW_W
-
w
;

132 } ià(
ås_cÜÃr
 == "bottom_left") {

133 
ås_pos™iÚ
.
y
 +ğ
VIEW_H
-
h
;

134 } ià(
ås_cÜÃr
 == "bottom_right") {

135 
ås_pos™iÚ
.
x
 +ğ
VIEW_W
-
w
;

136 
ås_pos™iÚ
.
y
 +ğ
VIEW_H
-
h
;

139 
	}
}

141 
	gGameSw™ch”
::
	$»nd”
() {

142 
cu¼’tS‹
->
	`»nd”
();

143 
	}
}

145 
	gGameSw™ch”
::~
	$GameSw™ch”
() {

146 
d–‘e
 
cu¼’tS‹
;

147 
d–‘e
 
Ïb–_ås
;

148 
	`Mix_F»eMusic
(
music
);

149 
	}
}

	@GameSwitcher.h

20 #´agm¨
Úû


21 #iâdeà
GAME_SWITCHER_H


22 
	#GAME_SWITCHER_H


	)

24 
	~<SDL.h
>

25 
	~<SDL_image.h
>

26 
	~<SDL_mix”.h
>

28 
	~"Uts.h
"

29 
	~"Widg‘Lab–.h
"

31 cÚ¡ 
	gGAME_STATE_TITLE
 = 0;

32 cÚ¡ 
	gGAME_STATE_PLAY
 = 1;

33 cÚ¡ 
	gGAME_STATE_LOAD
 = 2;

34 cÚ¡ 
	gGAME_STATE_NEW
 = 3;

36 
şass
 
	gGameS‹
;

51 şas 
	cGameSw™ch”
 {

52 
	m´iv©e
:

53 
Mix_Music
 *
music
;

55 
GameS‹
 *
	mcu¼’tS‹
;

57 
Widg‘Lab–
 *
	mÏb–_ås
;

58 
Pošt
 
	mås_pos™iÚ
;

59 
SDL_CŞÜ
 
	mås_cŞÜ
;

60 
	m¡d
::
¡ršg
 
ås_cÜÃr
;

62 
	mpublic
:

63 
GameSw™ch”
();

64 
GameSw™ch”
(cÚ¡ GameSw™ch” &
cİy
);

65 ~
GameSw™ch”
();

67 
lßdMusic
();

68 
lßdFPS
();

69 
logic
();

70 
»nd”
();

71 
showFPS
(
ås
);

72 
boŞ
 
	mdÚe
;

	@GetText.cpp

19 
	~"G‘Text.h
"

20 
	~"UtsP¬sšg.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

26 
	gG‘Text
::
	$G‘Text
() {

27 
lše
 = "";

28 
key
 = "";

29 
v®
 = "";

30 
	}
}

32 
boŞ
 
	gG‘Text
::
	$İ’
(cÚ¡ 
¡ršg
& 
f’ame
) {

33 
šfe
.
	`İ’
(
f’ame
.
	`c_¡r
(), 
ios
::
š
);

34  
šfe
.
	`is_İ’
();

35 
	}
}

37 
	gG‘Text
::
	$şo£
() {

38 ià(
šfe
.
	`is_İ’
())

39 
šfe
.
	`şo£
();

40 
	}
}

43 
¡ršg
 
	gG‘Text
::
	$§n™ize
(
¡ršg
 
mes§ge
) {

44 sigÃd 
pos
 = 0;

45 (
pos
 = 
mes§ge
.
	`fšd
("\\\"")) != -1) {

46 
mes§ge
 = mes§ge.
	`sub¡r
(0, 
pos
) + message.substr(pos+1);

48  
mes§ge
;

49 
	}
}

56 
boŞ
 
	gG‘Text
::
	$Ãxt
() {

58 
key
 = "";

59 
v®
 = "";

61 
fuzzy
 = 
çl£
;

63 
šfe
.
	`good
()) {

64 
lše
 = 
	`g‘Lše
(
šfe
);

67 ià(
lše
.
	`com·»
(0,2,"#,"è&&†še.
	`fšd
("fuzzy") == 0)

68 
fuzzy
 = 
Œue
;

71 ià(
lše
.
	`fšd
("msgid") == 0) {

73 
key
 = 
lše
.
	`sub¡r
(6);

74 
key
 = key.
	`sub¡r
(1, key.
	`Ëngth
()-2);

75 
key
 = 
	`§n™ize
(key);

77 ià(
key
 != "")

82 
lše
 = 
	`g‘Lše
(
šfe
);

83 
lše
.
	`fšd
("\"") == 0)

86 
key
 +ğ
lše
.
	`sub¡r
(1,†še.
	`Ëngth
()-2);

87 
lše
 = 
	`g‘Lše
(
šfe
);

93 ià(
lše
.
	`fšd
("msgstr") == 0) {

95 
v®
 = 
lše
.
	`sub¡r
(7);

96 
v®
 = v®.
	`sub¡r
(1, v®.
	`Ëngth
()-2);

97 
v®
 = 
	`§n™ize
(val);

100 ià(
key
 != "")

102 if(
v®
 != "")

104  
Œue
;

108 
lše
 = 
	`g‘Lše
(
šfe
);

109 
lše
.
	`fšd
("\"") == 0)

112 
v®
 +ğ
lše
.
	`sub¡r
(1,†še.
	`Ëngth
()-2);

113 
lše
 = 
	`g‘Lše
(
šfe
);

115 if(
v®
 != "")

117  
Œue
;

125  
çl£
;

126 
	}
}

128 
	gG‘Text
::~
	$G‘Text
() {

129 
	`şo£
();

130 
	}
}

	@GetText.h

26 #´agm¨
Úû


27 #iâdeà
GET_TEXT_H


28 
	#GET_TEXT_H


	)

30 
	~<f¡»am
>

31 
	~<¡ršg
>

33 şas 
	cG‘Text
 {

34 
	m´iv©e
:

35 
¡d
::
if¡»am
 
šfe
;

36 
	m¡d
::
¡ršg
 
lše
;

37 
	m¡d
::
¡ršg
 
§n™ize
(
¡d
::¡ršg 
šput
);

39 
	mpublic
:

40 
G‘Text
();

41 ~
G‘Text
();

43 
boŞ
 
İ’
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

44 
şo£
();

45 
boŞ
 
Ãxt
();

47 
	m¡d
::
¡ršg
 
key
;

48 
	m¡d
::
¡ršg
 
v®
;

49 
boŞ
 
	mfuzzy
;

	@Hazard.cpp

25 
	~"Anim©iÚ.h
"

26 
	~"Anim©iÚS‘.h
"

27 
	~"Anim©iÚMªag”.h
"

28 
	~"FeP¬£r.h
"

29 
	~"Haz¬d.h
"

30 
	~"M­CŞlisiÚ.h
"

31 
	~"Sh¬edResourûs.h
"

32 
	~"S‘tšgs.h
"

33 
	~"UtsP¬sšg.h
"

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 
	gHaz¬d
::
	$Haz¬d
(
M­CŞlisiÚ
 *
_cŞlid”
)

38 : 
	`cŞlid”
(
_cŞlid”
)

39 , 
	`aùiveAnim©iÚ
(
NULL
)

40 , 
	`ªim©iÚ_Çme
("")

41 , 
	`¤c_¡©s
(
NULL
)

42 , 
	`dmg_mš
(0)

43 , 
	`dmg_max
(0)

44 , 
	`ü™_chªû
(0)

45 , 
	`accu¿cy
(0)

46 , 
	`sourû_ty³
(0)

47 , 
	`pos
()

48 , 
	`¥“d
()

49 , 
	`ba£_¥“d
(0)

50 , 
	`liã¥ª
(1)

51 , 
	`¿dius
(0)

52 , 
	`pow”_šdex
(0)

53 , 
	`ªim©iÚKšd
(0)

54 , 
	`æoÜ
(
çl£
)

55 , 
	`d–ay_äames
(0)

56 , 
	`com¶‘e_ªim©iÚ
(
çl£
)

57 , 
	`muÉ™¬g‘
(
çl£
)

58 , 
	`aùive
(
Œue
)

59 , 
	`»move_now
(
çl£
)

60 , 
	`h™_w®l
(
çl£
)

61 , 
	`hp_¡—l
(0)

62 , 
	`mp_¡—l
(0)

63 , 
	`Œa™_¬mÜ_³ÃŒ©iÚ
(
çl£
)

64 , 
	`Œa™_ü™s_im·œed
(0)

65 , 
	`Œa™_–em’l
(-1)

66 , 
	`po¡_pow”
(0)

67 , 
	`w®l_pow”
(0)

68 , 
	$mod_pow”
(0)

70 
	}
}

72 
	gHaz¬d
::~
	$Haz¬d
() {

73 ià(
aùiveAnim©iÚ
) {

74 
ªim
->
	`deü—£CouÁ
(
ªim©iÚ_Çme
);

75 
d–‘e
 
aùiveAnim©iÚ
;

77 
	}
}

79 
	gHaz¬d
::
	$logic
() {

82 ià(
d–ay_äames
 > 0) {

83 
d–ay_äames
--;

88 ià(
liã¥ª
 > 0)†ifespan--;

90 ià(
aùiveAnim©iÚ
)

91 
aùiveAnim©iÚ
->
	`advªûF¿me
();

94 ià(!(
	`round
(
¥“d
.
x
è=ğ0 &&„ound(¥“d.
y
) == 0)) {

95 
pos
.
x
 +ğ
¥“d
.x;

96 
pos
.
y
 +ğ
¥“d
.y;

100 ià(
cŞlid”
->
	`is_w®l
(
	`round
(
pos
.
x
),„oundÕos.
y
))) {

101 
liã¥ª
 = 0;

102 
h™_w®l
 = 
Œue
;

104 ià(
cŞlid”
->
	`is_outside_m­
(
	`round
(
pos
.
x
è>> 
TILE_SHIFT
,„oundÕos.
y
) >> TILE_SHIFT))

105 
»move_now
 = 
Œue
;

108 
	}
}

110 
	gHaz¬d
::
lßdAnim©iÚ
(
¡d
::
¡ršg
 &
s
) {

111 ià(
aùiveAnim©iÚ
) {

112 
ªim
->
deü—£CouÁ
(
ªim©iÚ_Çme
);

113 
d–‘e
 
	gaùiveAnim©iÚ
;

114 
	gaùiveAnim©iÚ
 = 0;

116 
	gªim©iÚ_Çme
 = 
s
;

117 ià(
	gªim©iÚ_Çme
 != "") {

118 
ªim
->
šü—£CouÁ
(
ªim©iÚ_Çme
);

119 
Anim©iÚS‘
 *
	gªim©iÚS‘
 = 
ªim
->
g‘Anim©iÚS‘
(
ªim©iÚ_Çme
);

120 
	gaùiveAnim©iÚ
 = 
ªim©iÚS‘
->
g‘Anim©iÚ
();

124 
boŞ
 
	gHaz¬d
::
	$isDªg”ousNow
() {

125  
aùive
 && (
d–ay_äames
 == 0) &&

126 Ğ(
aùiveAnim©iÚ
 !ğ
NULL
 &&‡ùiveAnim©iÚ->
	`isAùiveF¿me
())

127 || 
aùiveAnim©iÚ
 =ğ
NULL
);

128 
	}
}

130 
boŞ
 
	gHaz¬d
::
	$hasEÁ™y
(
EÁ™y
 *
’t
)

132 
veùÜ
<
EÁ™y
*>::
™”©Ü
 
™
 = 
’t™›sCŞlided
.
	`begš
(); iˆ!ğ’t™›sCŞlided.
	`’d
(); ++it)

133 if(*
™
 =ğ
’t
è 
Œue
;

134  
çl£
;

135 
	}
}

137 
	gHaz¬d
::
	$addEÁ™y
(
EÁ™y
 *
’t
)

139 
’t™›sCŞlided
.
	`push_back
(
’t
);

140 
	}
}

142 
	gHaz¬d
::
addR’d”abË
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
)

144 ià(
	gd–ay_äames
 =ğ0 && 
aùiveAnim©iÚ
) {

145 
R’d”abË
 
»
 = 
aùiveAnim©iÚ
->
g‘Cu¼’tF¿me
(
ªim©iÚKšd
);

146 
	g»
.
	gm­_pos
.
	gx
 = 
round
(
pos
.
x
);

147 
	g»
.
	gm­_pos
.
	gy
 = 
round
(
pos
.
y
);

148 (
	gæoÜ
 ? 
	gr_d—d
 : 
r
).
push_back
(
»
);

	@Hazard.h

26 #´agm¨
Úû


27 #iâdeà
HAZARD_H


28 
	#HAZARD_H


	)

30 
şass
 
	gEÁ™y
;

32 
	~<veùÜ
>

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

35 
	~<SDL_mix”.h
>

36 
	~"Uts.h
"

38 
şass
 
	gAnim©iÚ
;

39 
şass
 
	gStBlock
;

40 
şass
 
	gM­CŞlisiÚ
;

43 cÚ¡ 
	gSOURCE_TYPE_HERO
 = 0;

44 cÚ¡ 
	gSOURCE_TYPE_NEUTRAL
 = 1;

45 cÚ¡ 
	gSOURCE_TYPE_ENEMY
 = 2;

47 şas 
	cHaz¬d
 {

48 
	m´iv©e
:

49 cÚ¡ 
M­CŞlisiÚ
 *
cŞlid”
;

51 
	m¡d
::
veùÜ
<
EÁ™y
*> 
’t™›sCŞlided
;

52 
Anim©iÚ
 *
	maùiveAnim©iÚ
;

53 
	m¡d
::
¡ršg
 
ªim©iÚ_Çme
;

55 
	mpublic
:

56 
Haz¬d
(
M­CŞlisiÚ
 *
_cŞlid”
);

58 
Haz¬d
(const Hazard&);

59 
	mHaz¬d
 & 
	mİ”©Ü
ğ(cÚ¡ 
Haz¬d
 & 
Ùh”
);

61 ~
Haz¬d
();

63 
StBlock
 *
	m¤c_¡©s
;

65 
logic
();

67 
boŞ
 
hasEÁ™y
(
EÁ™y
*);

68 
addEÁ™y
(
EÁ™y
*);

70 
lßdAnim©iÚ
(
¡d
::
¡ršg
 &
s
);

72 
	mdmg_mš
;

73 
	mdmg_max
;

74 
	mü™_chªû
;

75 
	maccu¿cy
;

76 
	msourû_ty³
;

78 
FPošt
 
	mpos
;

79 
FPošt
 
	m¥“d
;

80 
	mba£_¥“d
;

81 
	mliã¥ª
;

82 
	m¿dius
;

83 
	mpow”_šdex
;

85 
	mªim©iÚKšd
;

89 
boŞ
 
isDªg”ousNow
();

90 
addR’d”abË
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

92 
boŞ
 
	mæoÜ
;

93 
	md–ay_äames
;

94 
boŞ
 
	mcom¶‘e_ªim©iÚ
;

99 
boŞ
 
	mmuÉ™¬g‘
;

100 
boŞ
 
	maùive
;

102 
boŞ
 
	m»move_now
;

103 
boŞ
 
	mh™_w®l
;

106 
	mhp_¡—l
;

107 
	mmp_¡—l
;

109 
boŞ
 
	mŒa™_¬mÜ_³ÃŒ©iÚ
;

110 
	mŒa™_ü™s_im·œed
;

111 
	mŒa™_–em’l
;

114 
	mpo¡_pow”
;

115 
	mw®l_pow”
;

116 
	mmod_pow”
;

	@HazardManager.cpp

25 
	~"Av©¬.h
"

26 
	~"Anim©iÚ.h
"

27 
	~"EÃmyMªag”.h
"

28 
	~"Haz¬d.h
"

29 
	~"Haz¬dMªag”.h
"

30 
	~"Pow”Mªag”.h
"

32 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gHaz¬dMªag”
::
	$Haz¬dMªag”
(
Pow”Mªag”
 *
_pow”s
, 
Av©¬
 *
_h”o
, 
EÃmyMªag”
 *
_’em›s
) {

35 
pow”s
 = 
_pow”s
;

36 
h”o
 = 
_h”o
;

37 
’em›s
 = 
_’em›s
;

38 
	}
}

40 
	gHaz¬dMªag”
::
	$logic
() {

43 
i
=
h
.
	`size
()-1; i>=0; i--) {

44 ià(
h
[
i
]->
liã¥ª
 == 0)

45 
	`expœe
(
i
);

48 
	`checkNewHaz¬ds
();

51 
i
=
h
.
	`size
()-1; i>=0; i--) {

52 
h
[
i
]->
	`logic
();

55 ià(
h
[
i
]->
»move_now
)

56 
	`expœe
(
i
);

60 ià(
h
[
i
]->
h™_w®l
 && h[i]->
w®l_pow”
 > 0) {

61 
Pošt
 
rg‘
;

62 
rg‘
.
x
 = ()(
h
[
i
]->
pos
.x);

63 
rg‘
.
y
 = ()(
h
[
i
]->
pos
.y);

65 
pow”s
->
	`aùiv©e
(
h
[
i
]->
w®l_pow”
, h[i]->
¤c_¡©s
, 
rg‘
);

66 ià(
pow”s
->pow”s[
h
[
i
]->
w®l_pow”
].
dœeùiÚ®
èpow”s->
haz¬ds
.
	`back
()->
ªim©iÚKšd
 = h[i]->animationKind;

72 
boŞ
 
h™
;

75 
i
=0; i<
h
.
	`size
(); i++) {

76 ià(
h
[
i
]->
	`isDªg”ousNow
()) {

79 ià(
h
[
i
]->
sourû_ty³
 !ğ
SOURCE_TYPE_ENEMY
) {

80 
ešdex
 = 0;ƒšdex < 
’em›s
->’em›s.
	`size
();ƒindex++) {

83 ià(
’em›s
->’em›s[
ešdex
]->
¡©s
.
hp
 > 0 && 
h
[
i
]->
aùive
) {

84 ià(
	`isW™hš
(
	`round
(
h
[
i
]->
pos
), h[i]->
¿dius
, 
’em›s
->’em›s[
ešdex
]->
¡©s
.pos)) {

85 ià(!
h
[
i
]->
	`hasEÁ™y
(
’em›s
->’em›s[
ešdex
])) {

86 
h
[
i
]->
	`addEÁ™y
(
’em›s
->’em›s[
ešdex
]);

88 
h™
 = 
’em›s
->’em›s[
ešdex
]->
	`keH™
(*
h
[
i
]);

89 ià(!
h
[
i
]->
muÉ™¬g‘
 && 
h™
) {

90 
h
[
i
]->
aùive
 = 
çl£
;

91 ià(!
h
[
i
]->
com¶‘e_ªim©iÚ
èh[i]->
liã¥ª
 = 0;

101 ià(
h
[
i
]->
sourû_ty³
 !ğ
SOURCE_TYPE_HERO
) {

102 ià(
h”o
->
¡©s
.
hp
 > 0 && 
h
[
i
]->
aùive
) {

103 ià(
	`isW™hš
(
	`round
(
h
[
i
]->
pos
), h[i]->
¿dius
, 
h”o
->
¡©s
.pos)) {

104 ià(!
h
[
i
]->
	`hasEÁ™y
(
h”o
)) {

105 
h
[
i
]->
	`addEÁ™y
(
h”o
);

107 
h™
 = 
h”o
->
	`keH™
(*
h
[
i
]);

108 ià(!
h
[
i
]->
muÉ™¬g‘
 && 
h™
) {

109 
h
[
i
]->
aùive
 = 
çl£
;

110 ià(!
h
[
i
]->
com¶‘e_ªim©iÚ
èh[i]->
liã¥ª
 = 0;

119 
	}
}

125 
	gHaz¬dMªag”
::
	$checkNewHaz¬ds
() {

128 !
pow”s
->
haz¬ds
.
	`em±y
()) {

129 
Haz¬d
 *
Ãw_haz
 = 
pow”s
->
haz¬ds
.
	`äÚt
();

130 
pow”s
->
haz¬ds
.
	`pİ
();

133 
h
.
	`push_back
(
Ãw_haz
);

137 ià(
h”o
->
haz
 !ğ
NULL
) {

138 
h
.
	`push_back
(
h”o
->
haz
);

139 
h”o
->
haz
 = 
NULL
;

143 
ešdex
 = 0;ƒšdex < 
’em›s
->’em›s.
	`size
();ƒindex++) {

144 ià(
’em›s
->’em›s[
ešdex
]->
haz
 !ğ
NULL
) {

145 
h
.
	`push_back
(
’em›s
->’em›s[
ešdex
]->
haz
);

146 
’em›s
->’em›s[
ešdex
]->
haz
 = 
NULL
;

149 
	}
}

151 
	gHaz¬dMªag”
::
	$expœe
(
šdex
) {

152 
d–‘e
 
h
[
šdex
];

153 
h
.
	`”a£
(h.
	`begš
()+
šdex
);

154 
	}
}

159 
	gHaz¬dMªag”
::
	$hªdËNewM­
() {

160 
i
 = 0; i < 
h
.
	`size
(); i++)

161 
d–‘e
 
h
[
i
];

162 
h
.
	`ş—r
();

163 
	}
}

170 
	gHaz¬dMªag”
::
addR’d”s
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
) {

171 
	gi
=0; i<
	gh
.
size
(); i++)

172 
	gh
[
i
]->
addR’d”abË
(
r
, 
r_d—d
);

175 
	gHaz¬dMªag”
::~
	$Haz¬dMªag”
() {

176 
i
 = 0; i < 
h
.
	`size
(); i++)

177 
d–‘e
 
h
[
i
];

179 
	}
}

	@HazardManager.h

25 #´agm¨
Úû


26 #iâdeà
HAZARD_MANAGER_H


27 
	#HAZARD_MANAGER_H


	)

29 
	~"Uts.h
"

31 
	~<veùÜ
>

33 
şass
 
	gAv©¬
;

34 
şass
 
	gEÃmyMªag”
;

35 
şass
 
	gHaz¬d
;

36 
şass
 
	gM­CŞlisiÚ
;

37 
şass
 
	gPow”Mªag”
;

39 şas 
	cHaz¬dMªag”
 {

40 
	m´iv©e
:

41 
Av©¬
 *
h”o
;

42 
EÃmyMªag”
 *
	m’em›s
;

43 
Pow”Mªag”
 *
	mpow”s
;

44 
	mpublic
:

45 
Haz¬dMªag”
(
Pow”Mªag”
 *
_pow”s
, 
Av©¬
 *
_h”o
, 
EÃmyMªag”
 *
_’em›s
);

46 ~
Haz¬dMªag”
();

47 
logic
();

48 
expœe
(
šdex
);

49 
checkNewHaz¬ds
();

50 
hªdËNewM­
();

51 
addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

53 
	m¡d
::
veùÜ
<
Haz¬d
*> 
h
;

	@ImageManager.cpp

18 
	~<®gÜ™hm
>

19 
	~<¡ršg
>

20 
	~<veùÜ
>

21 
	~<io¡»am
>

23 
	~<as£¹.h
>

26 
	~"ImageMªag”.h
"

27 
	~"S‘tšgs.h
"

28 
	~"Sh¬edResourûs.h
"

30 
usšg
 
Çme¥aû
 
	g¡d
;

32 
ImageMªag”
* 
	gImageMªag”_š¡ªû
 = 0;

34 
	gImageMªag”
::
	$ImageMªag”
()

35 {
	}
}

37 
ImageMªag”
::~
	$ImageMªag”
()

39 
	`ş—nUp
();

41 #iâdeà
NDEBUG


42 ià(!
¥r™es
.
	`em±y
()) {

43 
cout
 << "ImageMªag” stÈhŞdšghe£ images:" << 
’dl
;

44 
i
 = 0; i < 
¥r™es
.
	`size
(); ++i)

45 
	`årštf
(
¡d”r
, "% %d\n", 
Çmes
[
i
].
	`c_¡r
(), 
couÁs
[i]);

47 
	`as£¹
(
¥r™es
.
	`size
() == 0);

49 
	}
}

51 
SDL_Surçû
 *
	gImageMªag”
::
g‘Surçû
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

52 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
fšd
(
Çmes
.
begš
(),‚ames.
’d
(), 
Çme
);

53 ià(
	gfound
 !ğ
Çmes
.
’d
()) {

54 
šdex
 = 
di¡ªû
(
Çmes
.
begš
(), 
found
);

55 ià(
	g¥r™es
[
šdex
] == 0) {

56 
SDL_Surçû
 *
ş—nup
 = 
NULL
;

58 ià(
	gTEXTURE_QUALITY
 =ğ
çl£
) {

59 
¡ršg
 
·th
 = 
mods
->
loÿ‹
(
Çme
);

60 cÚ¡ * 
	gpch
 = 
¡¼chr
(
·th
.
c_¡r
(), '/' );

61 
	g·th
.
š£¹
(
pch
-
·th
.
c_¡r
(), "/noalpha");

62 
	gş—nup
 = 
IMG_Lßd
(
·th
.
c_¡r
());

63 ià(!
	gş—nup
)

64 
´štf
("çedØlßd %s\n", 
·th
.
c_¡r
());

66 
SDL_S‘CŞÜKey
(
ş—nup
, 
SDL_SRCCOLORKEY
, 
SDL_M­RGB
(ş—nup->
fÜm©
, 255, 0, 255));

69 ià(!
	gş—nup
) {

70 
	gş—nup
 = 
IMG_Lßd
(
mods
->
loÿ‹
(
Çme
).
c_¡r
());

73 ià(!
	gş—nup
) {

74 
årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
IMG_G‘E¼Ü
());

76 
SDL_Surçû
 *
	g¥r™e
 = 
SDL_Di¥ÏyFÜm©AÍha
(
ş—nup
);

77 
SDL_F»eSurçû
(
ş—nup
);

78 
	g¥r™es
[
šdex
] = 
¥r™e
;

81  
	g¥r™es
[
šdex
];

86 
	gImageMªag”
::
šü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

87 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
fšd
(
Çmes
.
begš
(),‚ames.
’d
(), 
Çme
);

88 ià(
	gfound
 !ğ
Çmes
.
’d
()) {

89 
šdex
 = 
di¡ªû
(
Çmes
.
begš
(), 
found
);

90 
	gcouÁs
[
šdex
]++;

92 
	g¥r™es
.
push_back
(0);

93 
	gÇmes
.
push_back
(
Çme
);

94 
	gcouÁs
.
push_back
(1);

98 
	gImageMªag”
::
deü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
) {

99 
veùÜ
<
¡ršg
>::
™”©Ü
 
found
 = 
fšd
(
Çmes
.
begš
(),‚ames.
’d
(), 
Çme
);

100 ià(
	gfound
 !ğ
Çmes
.
’d
()) {

101 
šdex
 = 
di¡ªû
(
Çmes
.
begš
(), 
found
);

102 
	gcouÁs
[
šdex
]--;

104 
årštf
(
¡d”r
, "ImageMªag”::deü—£CouÁ: Couldn'ˆdeü—£ imagcouÁ: %s\n", 
Çme
.
c_¡r
());

108 
	gImageMªag”
::
	$ş—nUp
() {

109 
i
 = 
¥r™es
.
	`size
() - 1;

110 
i
 >= 0) {

111 ià(
couÁs
[
i
] <= 0) {

112 
	`SDL_F»eSurçû
(
¥r™es
[
i
]);

113 
couÁs
.
	`”a£
(couÁs.
	`begš
()+
i
);

114 
¥r™es
.
	`”a£
(¥r™es.
	`begš
()+
i
);

115 
Çmes
.
	`”a£
Òames.
	`begš
()+
i
);

117 --
i
;

119 
	}
}

	@ImageManager.h

18 #´agm¨
Úû


19 #iâdeà
__IMAGE_MANAGER__


20 
	#__IMAGE_MANAGER__


	)

22 
	~<¡ršg
>

23 
	~<veùÜ
>

25 
	~<SDL_image.h
>

37 şas 
	cImageMªag”
 {

38 
	m´iv©e
:

39 
¡d
::
veùÜ
<
SDL_Surçû
*> 
¥r™es
;

40 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Çmes
;

41 
	m¡d
::
veùÜ
<> 
couÁs
;

43 
	mpublic
:

44 
ImageMªag”
();

45 ~
ImageMªag”
();

52 
SDL_Surçû
 *
g‘Surçû
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

57 
deü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

62 
šü—£CouÁ
(cÚ¡ 
¡d
::
¡ršg
 &
Çme
);

67 
ş—nUp
();

	@InputState.cpp

25 
	~<io¡»am
>

27 
	~"FeP¬£r.h
"

28 
	~"IÅutS‹.h
"

29 
	~"S‘tšgs.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"UtsDebug.h
"

32 
	~"UtsP¬sšg.h
"

34 
usšg
 
Çme¥aû
 
	g¡d
;

36 
	gIÅutS‹
::
	$IÅutS‹
()

37 : 
	`mx_v–
(0)

38 , 
	`my_v–
(0)

39 , 
	`dÚe
(
çl£
)

40 , 
	`mou£
()

41 , 
	`Ï¡_key
(0)

42 , 
	`Ï¡_bu‰Ú
(0)

43 , 
	`süŞl_up
(
çl£
)

44 , 
	`süŞl_down
(
çl£
)

45 , 
	$mou£_emuÏtiÚ
(
çl£
)

47 
	`SDL_EÇbËUNICODE
(
Œue
);

49 
	`deçuÉQw”tyKeyBšdšgs
();

50 
	`deçuÉJoy¡ickBšdšgs
();

52 
key
=0; key<
key_couÁ
; key++) {

53 
´essšg
[
key
] = 
çl£
;

54 
lock
[
key
] = 
çl£
;

57 
	`lßdKeyBšdšgs
();

58 
	`£tKeybšdNames
();

59 
	}
}

62 
	gIÅutS‹
::
	$deçuÉQw”tyKeyBšdšgs
 ()

64 
bšdšg
[
CANCEL
] = 
SDLK_ESCAPE
;

65 
bšdšg
[
ACCEPT
] = 
SDLK_RETURN
;

66 
bšdšg
[
UP
] = 
SDLK_w
;

67 
bšdšg
[
DOWN
] = 
SDLK_s
;

68 
bšdšg
[
LEFT
] = 
SDLK_a
;

69 
bšdšg
[
RIGHT
] = 
SDLK_d
;

71 
bšdšg_®t
[
CANCEL
] = 
SDLK_ESCAPE
;

72 
bšdšg_®t
[
ACCEPT
] = 
SDLK_SPACE
;

73 
bšdšg_®t
[
UP
] = 
SDLK_UP
;

74 
bšdšg_®t
[
DOWN
] = 
SDLK_DOWN
;

75 
bšdšg_®t
[
LEFT
] = 
SDLK_LEFT
;

76 
bšdšg_®t
[
RIGHT
] = 
SDLK_RIGHT
;

78 
bšdšg
[
BAR_1
] = 
bšdšg_®t
[BAR_1] = 
SDLK_1
;

79 
bšdšg
[
BAR_2
] = 
bšdšg_®t
[BAR_2] = 
SDLK_2
;

80 
bšdšg
[
BAR_3
] = 
bšdšg_®t
[BAR_3] = 
SDLK_3
;

81 
bšdšg
[
BAR_4
] = 
bšdšg_®t
[BAR_4] = 
SDLK_4
;

82 
bšdšg
[
BAR_5
] = 
bšdšg_®t
[BAR_5] = 
SDLK_5
;

83 
bšdšg
[
BAR_6
] = 
bšdšg_®t
[BAR_6] = 
SDLK_6
;

84 
bšdšg
[
BAR_7
] = 
bšdšg_®t
[BAR_7] = 
SDLK_7
;

85 
bšdšg
[
BAR_8
] = 
bšdšg_®t
[BAR_8] = 
SDLK_8
;

86 
bšdšg
[
BAR_9
] = 
bšdšg_®t
[BAR_9] = 
SDLK_9
;

87 
bšdšg
[
BAR_0
] = 
bšdšg_®t
[BAR_0] = 
SDLK_0
;

89 
bšdšg
[
CHARACTER
] = 
bšdšg_®t
[CHARACTER] = 
SDLK_c
;

90 
bšdšg
[
INVENTORY
] = 
bšdšg_®t
[INVENTORY] = 
SDLK_i
;

91 
bšdšg
[
POWERS
] = 
bšdšg_®t
[POWERS] = 
SDLK_p
;

92 
bšdšg
[
LOG
] = 
bšdšg_®t
[LOG] = 
SDLK_l
;

94 
bšdšg
[
MAIN1
] = 
bšdšg_®t
[MAIN1] = 
SDL_BUTTON_LEFT
;

95 
bšdšg
[
MAIN2
] = 
bšdšg_®t
[MAIN2] = 
SDL_BUTTON_RIGHT
;

97 
bšdšg
[
CTRL
] = 
SDLK_LCTRL
;

98 
bšdšg_®t
[
CTRL
] = 
SDLK_RCTRL
;

99 
bšdšg
[
SHIFT
] = 
SDLK_LSHIFT
;

100 
bšdšg_®t
[
SHIFT
] = 
SDLK_RSHIFT
;

101 
bšdšg
[
DEL
] = 
SDLK_DELETE
;

102 
bšdšg_®t
[
DEL
] = 
SDLK_BACKSPACE
;

103 
	}
}

105 
	gIÅutS‹
::
	$deçuÉJoy¡ickBšdšgs
 ()

108 
key
=0; key<
key_couÁ
; key++) {

109 
bšdšg_joy
[
key
] = -1;

112 
bšdšg_joy
[
MAIN1
] = 0;

113 
bšdšg_joy
[
MAIN2
] = 1;

114 
bšdšg_joy
[
ACCEPT
] = 2;

115 
bšdšg_joy
[
CANCEL
] = 3;

116 
bšdšg_joy
[
CHARACTER
] = 4;

117 
bšdšg_joy
[
INVENTORY
] = 5;

118 
bšdšg_joy
[
LOG
] = 6;

119 
bšdšg_joy
[
POWERS
] = 7;

120 
	}
}

125 
	gIÅutS‹
::
	$lßdKeyBšdšgs
() {

127 
FeP¬£r
 
šfe
;

128 
key1
;

129 
key2
;

130 
cursÜ
;

132 ià(!
šfe
.
	`İ’
(
PATH_CONF
 + 
FILE_KEYBINDINGS
)) {

133 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/deçuÉ_keybšdšgs.txt").
	`c_¡r
())) {

134 
	`§veKeyBšdšgs
();

136 } 
	`§veKeyBšdšgs
();

139 
šfe
.
	`Ãxt
()) {

141 
key1
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

142 
key2
 = 
	`toIÁ
(
šfe
.
v®
);

144 
cursÜ
 = -1;

146 ià(
šfe
.
key
 =ğ"ÿnûl"è
cursÜ
 = 
CANCEL
;

147 ià(
šfe
.
key
 =ğ"acû±"è
cursÜ
 = 
ACCEPT
;

148 ià(
šfe
.
key
 =ğ"up"è
cursÜ
 = 
UP
;

149 ià(
šfe
.
key
 =ğ"down"è
cursÜ
 = 
DOWN
;

150 ià(
šfe
.
key
 =ğ"Ëá"è
cursÜ
 = 
LEFT
;

151 ià(
šfe
.
key
 =ğ"right"è
cursÜ
 = 
RIGHT
;

152 ià(
šfe
.
key
 =ğ"b¬1"è
cursÜ
 = 
BAR_1
;

153 ià(
šfe
.
key
 =ğ"b¬2"è
cursÜ
 = 
BAR_2
;

154 ià(
šfe
.
key
 =ğ"b¬3"è
cursÜ
 = 
BAR_3
;

155 ià(
šfe
.
key
 =ğ"b¬4"è
cursÜ
 = 
BAR_4
;

156 ià(
šfe
.
key
 =ğ"b¬5"è
cursÜ
 = 
BAR_5
;

157 ià(
šfe
.
key
 =ğ"b¬6"è
cursÜ
 = 
BAR_6
;

158 ià(
šfe
.
key
 =ğ"b¬7"è
cursÜ
 = 
BAR_7
;

159 ià(
šfe
.
key
 =ğ"b¬8"è
cursÜ
 = 
BAR_8
;

160 ià(
šfe
.
key
 =ğ"b¬9"è
cursÜ
 = 
BAR_9
;

161 ià(
šfe
.
key
 =ğ"b¬0"è
cursÜ
 = 
BAR_0
;

162 ià(
šfe
.
key
 =ğ"maš1"è
cursÜ
 = 
MAIN1
;

163 ià(
šfe
.
key
 =ğ"maš2"è
cursÜ
 = 
MAIN2
;

164 ià(
šfe
.
key
 =ğ"ch¬aù”"è
cursÜ
 = 
CHARACTER
;

165 ià(
šfe
.
key
 =ğ"šv’tÜy"è
cursÜ
 = 
INVENTORY
;

166 ià(
šfe
.
key
 =ğ"pow”s"è
cursÜ
 = 
POWERS
;

167 ià(
šfe
.
key
 =ğ"log"è
cursÜ
 = 
LOG
;

168 ià(
šfe
.
key
 =ğ"ù¾"è
cursÜ
 = 
CTRL
;

169 ià(
šfe
.
key
 =ğ"shiá"è
cursÜ
 = 
SHIFT
;

170 ià(
šfe
.
key
 =ğ"d–‘e"è
cursÜ
 = 
DEL
;

172 ià(
cursÜ
 != -1) {

173 
bšdšg
[
cursÜ
] = 
key1
;

174 
bšdšg_®t
[
cursÜ
] = 
key2
;

178 
šfe
.
	`şo£
();

179 
	}
}

184 
	gIÅutS‹
::
	$§veKeyBšdšgs
() {

185 
of¡»am
 
outfe
;

186 
outfe
.
	`İ’
((
PATH_CONF
 + 
FILE_KEYBINDINGS
).
	`c_¡r
(), 
ios
::
out
);

188 ià(
outfe
.
	`is_İ’
()) {

190 
outfe
 << "ÿnûl=" << 
bšdšg
[
CANCEL
] << "," << 
bšdšg_®t
[CANCEL] << "\n";

191 
outfe
 << "acû±=" << 
bšdšg
[
ACCEPT
] << "," << 
bšdšg_®t
[ACCEPT] << "\n";

192 
outfe
 << "up=" << 
bšdšg
[
UP
] << "," << 
bšdšg_®t
[UP] << "\n";

193 
outfe
 << "down=" << 
bšdšg
[
DOWN
] << "," << 
bšdšg_®t
[DOWN] << "\n";

194 
outfe
 << "Ëá=" << 
bšdšg
[
LEFT
] << "," << 
bšdšg_®t
[LEFT] << "\n";

195 
outfe
 << "right=" << 
bšdšg
[
RIGHT
] << "," << 
bšdšg_®t
[RIGHT] << "\n";

196 
outfe
 << "b¬1=" << 
bšdšg
[
BAR_1
] << "," << 
bšdšg_®t
[BAR_1] << "\n";

197 
outfe
 << "b¬2=" << 
bšdšg
[
BAR_2
] << "," << 
bšdšg_®t
[BAR_2] << "\n";

198 
outfe
 << "b¬3=" << 
bšdšg
[
BAR_3
] << "," << 
bšdšg_®t
[BAR_3] << "\n";

199 
outfe
 << "b¬4=" << 
bšdšg
[
BAR_4
] << "," << 
bšdšg_®t
[BAR_4] << "\n";

200 
outfe
 << "b¬5=" << 
bšdšg
[
BAR_5
] << "," << 
bšdšg_®t
[BAR_5] << "\n";

201 
outfe
 << "b¬6=" << 
bšdšg
[
BAR_6
] << "," << 
bšdšg_®t
[BAR_6] << "\n";

202 
outfe
 << "b¬7=" << 
bšdšg
[
BAR_7
] << "," << 
bšdšg_®t
[BAR_7] << "\n";

203 
outfe
 << "b¬8=" << 
bšdšg
[
BAR_8
] << "," << 
bšdšg_®t
[BAR_8] << "\n";

204 
outfe
 << "b¬9=" << 
bšdšg
[
BAR_9
] << "," << 
bšdšg_®t
[BAR_9] << "\n";

205 
outfe
 << "b¬0=" << 
bšdšg
[
BAR_0
] << "," << 
bšdšg_®t
[BAR_0] << "\n";

206 
outfe
 << "maš1=" << 
bšdšg
[
MAIN1
] << "," << 
bšdšg_®t
[MAIN1] << "\n";

207 
outfe
 << "maš2=" << 
bšdšg
[
MAIN2
] << "," << 
bšdšg_®t
[MAIN2] << "\n";

208 
outfe
 << "ch¬aù”=" << 
bšdšg
[
CHARACTER
] << "," << 
bšdšg_®t
[CHARACTER] << "\n";

209 
outfe
 << "šv’tÜy=" << 
bšdšg
[
INVENTORY
] << "," << 
bšdšg_®t
[INVENTORY] << "\n";

210 
outfe
 << "pow”s=" << 
bšdšg
[
POWERS
] << "," << 
bšdšg_®t
[POWERS] << "\n";

211 
outfe
 << "log=" << 
bšdšg
[
LOG
] << "," << 
bšdšg_®t
[LOG] << "\n";

212 
outfe
 << "ù¾=" << 
bšdšg
[
CTRL
] << "," << 
bšdšg_®t
[CTRL] << "\n";

213 
outfe
 << "shiá=" << 
bšdšg
[
SHIFT
] << "," << 
bšdšg_®t
[SHIFT] << "\n";

214 
outfe
 << "d–‘e=" << 
bšdšg
[
DEL
] << "," << 
bšdšg_®t
[DEL] << "\n";

216 ià(
outfe
.
	`bad
()è
	`årštf
(
¡d”r
, "Unableo write keybindings config file. No write‡ccess or disk is full!\n");

217 
outfe
.
	`şo£
();

218 
outfe
.
	`ş—r
();

221 
	}
}

223 
	gIÅutS‹
::
	$hªdË
(
boŞ
 
dump_ev’t
) {

224 
SDL_Ev’t
 
ev’t
;

226 
	`SDL_G‘Mou£S‹
(&
mou£
.
x
, &mou£.
y
);

228 
boŞ
 
joyRev”£AxisX
;

229 
boŞ
 
joyRev”£AxisY
;

230 
boŞ
 
joyHasMovedX
;

231 
boŞ
 
joyHasMovedY
;

232 
joyLa¡PosX
;

233 
joyLa¡PosY
;

234 
joyAxisXv®
;

235 
joyAxisYv®
;

237 
škeys
 = "";

240 
	`SDL_PŞlEv’t
 (&
ev’t
)) {

242 ià(
dump_ev’t
) {

243 
cout
 << 
ev’t
 << 
’dl
;

247 ià(
ev’t
.
ty³
 =ğ
SDL_KEYDOWN
) {

248 
ch
 = 
ev’t
.
key
.
keysym
.
unicode
;

250 ià(
ch
 >= 0x800) {

251 
škeys
 +ğ(è((
ch
 >> 12) | 0xe0);

252 
škeys
 +ğ(è(((
ch
 >> 6) & 0x3f) | 0x80);

253 
škeys
 +ğ(è((
ch
 & 0x3f) | 0x80);

254 } ià(
ch
 >= 0x80) {

255 
škeys
 +ğ(è((
ch
 >> 6) | 0xc0);

256 
škeys
 +ğ(è((
ch
 & 0x3f) | 0x80);

257 } ià(
ch
 >= 32 && ch != 127) {

258 
škeys
 +ğ()
ch
;

262 
ev’t
.
ty³
) {

264 
SDL_MOUSEBUTTONDOWN
:

265 ià(
ev’t
.
bu‰Ú
.bu‰Ú =ğ
SDL_BUTTON_WHEELUP
) {

266 
süŞl_up
 = 
Œue
;

267 } ià(
ev’t
.
bu‰Ú
.bu‰Ú =ğ
SDL_BUTTON_WHEELDOWN
) {

268 
süŞl_down
 = 
Œue
;

270 
key
=0; key<
key_couÁ
; key++) {

271 ià(
ev’t
.
bu‰Ú
.bu‰Ú =ğ
bšdšg
[
key
] ||ƒv’t.bu‰Ú.bu‰Ú =ğ
bšdšg_®t
[key]) {

272 
´essšg
[
key
] = 
Œue
;

277 
SDL_MOUSEBUTTONUP
:

278 
key
=0; key<
key_couÁ
; key++) {

279 ià(
ev’t
.
bu‰Ú
.bu‰Ú =ğ
bšdšg
[
key
] ||ƒv’t.bu‰Ú.bu‰Ú =ğ
bšdšg_®t
[key]) {

280 
´essšg
[
key
] = 
çl£
;

281 
lock
[
key
] = 
çl£
;

284 
Ï¡_bu‰Ú
 = 
ev’t
.
bu‰Ú
.button;

286 
SDL_KEYDOWN
:

287 
key
=0; key<
key_couÁ
; key++) {

288 ià(
ev’t
.
key
.
keysym
.
sym
 =ğ
bšdšg
[key] ||ƒv’t.key.keysym.sym =ğ
bšdšg_®t
[key]) {

289 
´essšg
[
key
] = 
Œue
;

293 
SDL_KEYUP
:

294 
key
=0; key<
key_couÁ
; key++) {

295 ià(
ev’t
.
key
.
keysym
.
sym
 =ğ
bšdšg
[key] ||ƒv’t.key.keysym.sym =ğ
bšdšg_®t
[key]) {

296 
´essšg
[
key
] = 
çl£
;

297 
lock
[
key
] = 
çl£
;

300 
Ï¡_key
 = 
ev’t
.
key
.
keysym
.
sym
;

307 
SDL_JOYHATMOTION
:

308 if(
JOYSTICK_DEVICE
 =ğ
ev’t
.
jh©
.
which
 && 
ENABLE_JOYSTICK
)

310 
ev’t
.
jh©
.
v®ue
) {

311 
SDL_HAT_CENTERED
:

312 
´essšg
[
UP
] = 
çl£
;

313 
lock
[
UP
] = 
çl£
;

314 
´essšg
[
DOWN
] = 
çl£
;

315 
lock
[
DOWN
] = 
çl£
;

316 
´essšg
[
LEFT
] = 
çl£
;

317 
lock
[
LEFT
] = 
çl£
;

318 
´essšg
[
RIGHT
] = 
çl£
;

319 
lock
[
RIGHT
] = 
çl£
;

321 
SDL_HAT_UP
:

322 
´essšg
[
UP
] = 
Œue
;

323 
´essšg
[
DOWN
] = 
çl£
;

324 
lock
[
DOWN
] = 
çl£
;

325 
´essšg
[
LEFT
] = 
çl£
;

326 
lock
[
LEFT
] = 
çl£
;

327 
´essšg
[
RIGHT
] = 
çl£
;

328 
lock
[
RIGHT
] = 
çl£
;

330 
SDL_HAT_DOWN
:

331 
´essšg
[
UP
] = 
çl£
;

332 
lock
[
UP
] = 
çl£
;

333 
´essšg
[
DOWN
] = 
Œue
;

334 
´essšg
[
LEFT
] = 
çl£
;

335 
lock
[
LEFT
] = 
çl£
;

336 
´essšg
[
RIGHT
] = 
çl£
;

337 
lock
[
RIGHT
] = 
çl£
;

339 
SDL_HAT_LEFT
:

340 
´essšg
[
UP
] = 
çl£
;

341 
lock
[
UP
] = 
çl£
;

342 
´essšg
[
DOWN
] = 
çl£
;

343 
lock
[
DOWN
] = 
çl£
;

344 
´essšg
[
LEFT
] = 
Œue
;

345 
´essšg
[
RIGHT
] = 
çl£
;

346 
lock
[
RIGHT
] = 
çl£
;

348 
SDL_HAT_RIGHT
:

349 
´essšg
[
UP
] = 
çl£
;

350 
lock
[
UP
] = 
çl£
;

351 
´essšg
[
DOWN
] = 
çl£
;

352 
lock
[
DOWN
] = 
çl£
;

353 
´essšg
[
LEFT
] = 
çl£
;

354 
lock
[
LEFT
] = 
çl£
;

355 
´essšg
[
RIGHT
] = 
Œue
;

357 
SDL_HAT_LEFTUP
:

358 
´essšg
[
UP
] = 
Œue
;

359 
´essšg
[
DOWN
] = 
çl£
;

360 
lock
[
DOWN
] = 
çl£
;

361 
´essšg
[
LEFT
] = 
Œue
;

362 
´essšg
[
RIGHT
] = 
çl£
;

363 
lock
[
RIGHT
] = 
çl£
;

365 
SDL_HAT_LEFTDOWN
:

366 
´essšg
[
UP
] = 
çl£
;

367 
lock
[
UP
] = 
çl£
;

368 
´essšg
[
DOWN
] = 
Œue
;

369 
´essšg
[
LEFT
] = 
Œue
;

370 
´essšg
[
RIGHT
] = 
çl£
;

371 
lock
[
RIGHT
] = 
çl£
;

373 
SDL_HAT_RIGHTUP
:

374 
´essšg
[
UP
] = 
Œue
;

375 
´essšg
[
DOWN
] = 
çl£
;

376 
lock
[
DOWN
] = 
çl£
;

377 
´essšg
[
LEFT
] = 
çl£
;

378 
lock
[
LEFT
] = 
çl£
;

379 
´essšg
[
RIGHT
] = 
Œue
;

381 
SDL_HAT_RIGHTDOWN
:

382 
´essšg
[
UP
] = 
çl£
;

383 
lock
[
UP
] = 
çl£
;

384 
´essšg
[
DOWN
] = 
Œue
;

385 
´essšg
[
LEFT
] = 
çl£
;

386 
lock
[
LEFT
] = 
çl£
;

387 
´essšg
[
RIGHT
] = 
Œue
;

392 
SDL_JOYBUTTONDOWN
:

393 if(
JOYSTICK_DEVICE
 =ğ
ev’t
.
jbu‰Ú
.
which
 && 
ENABLE_JOYSTICK
)

395 
key
=0; key<
key_couÁ
; key++) {

396 ià(
ev’t
.
jbu‰Ú
.
bu‰Ú
 =ğ
bšdšg_joy
[
key
]) {

397 
´essšg
[
key
] = 
Œue
;

402 
SDL_JOYBUTTONUP
:

403 if(
JOYSTICK_DEVICE
 =ğ
ev’t
.
jbu‰Ú
.
which
 && 
ENABLE_JOYSTICK
)

405 
key
=0; key<
key_couÁ
; key++) {

406 ià(
ev’t
.
jbu‰Ú
.
bu‰Ú
 =ğ
bšdšg_joy
[
key
]) {

407 
´essšg
[
key
] = 
çl£
;

408 
lock
[
key
] = 
çl£
;

413 
SDL_QUIT
:

414 
dÚe
 = 1;

422 if(
ENABLE_JOYSTICK
)

424 
joyAxisXv®
 = 
	`SDL_Joy¡ickG‘Axis
(
joy
, 0);

425 
joyAxisYv®
 = 
	`SDL_Joy¡ickG‘Axis
(
joy
, 1);

428 if(
joyAxisXv®
 < -
JOY_DEADZONE
)

430 if(!
joyRev”£AxisX
)

432 if(
joyLa¡PosX
 =ğ
JOY_POS_RIGHT
)

434 
joyHasMovedX
 = 0;

439 if(
joyLa¡PosX
 =ğ
JOY_POS_LEFT
)

441 
joyHasMovedX
 = 0;

444 if(
joyHasMovedX
 == 0)

446 if(!
joyRev”£AxisX
)

448 
´essšg
[
LEFT
] = 
Œue
;

449 
´essšg
[
RIGHT
] = 
çl£
;

450 
lock
[
RIGHT
] = 
çl£
;

451 
joyLa¡PosX
 = 
JOY_POS_LEFT
;

455 
´essšg
[
RIGHT
] = 
Œue
;

456 
´essšg
[
LEFT
] = 
çl£
;

457 
lock
[
LEFT
] = 
çl£
;

458 
joyLa¡PosX
 = 
JOY_POS_RIGHT
;

460 
joyHasMovedX
 = 1;

463 if(
joyAxisXv®
 > 
JOY_DEADZONE
)

465 if(!
joyRev”£AxisX
)

467 if(
joyLa¡PosX
 =ğ
JOY_POS_LEFT
)

469 
joyHasMovedX
 = 0;

474 if(
joyLa¡PosX
 =ğ
JOY_POS_RIGHT
)

476 
joyHasMovedX
 = 0;

479 if(
joyHasMovedX
 == 0)

481 if(!
joyRev”£AxisX
)

483 
´essšg
[
RIGHT
] = 
Œue
;

484 
´essšg
[
LEFT
] = 
çl£
;

485 
lock
[
LEFT
] = 
çl£
;

486 
joyLa¡PosX
 = 
JOY_POS_RIGHT
;

490 
´essšg
[
LEFT
] = 
Œue
;

491 
´essšg
[
RIGHT
] = 
çl£
;

492 
lock
[
RIGHT
] = 
çl£
;

493 
joyLa¡PosX
 = 
JOY_POS_LEFT
;

495 
joyHasMovedX
 = 1;

498 if((
joyAxisXv®
 >ğ-
JOY_DEADZONE
) && (joyAxisXval < JOY_DEADZONE))

500 
´essšg
[
LEFT
] = 
çl£
;

501 
lock
[
LEFT
] = 
çl£
;

502 
´essšg
[
RIGHT
] = 
çl£
;

503 
lock
[
RIGHT
] = 
çl£
;

504 
joyHasMovedX
 = 0;

505 
joyLa¡PosX
 = 
JOY_POS_CENTER
;

509 if(
joyAxisYv®
 < -
JOY_DEADZONE
)

511 if(!
joyRev”£AxisY
)

513 if(
joyLa¡PosY
 =ğ
JOY_POS_DOWN
)

515 
joyHasMovedY
 = 0;

520 if(
joyLa¡PosY
 =ğ
JOY_POS_UP
)

522 
joyHasMovedY
 = 0;

525 if(
joyHasMovedY
 == 0)

527 if(!
joyRev”£AxisY
)

529 
´essšg
[
UP
] = 
Œue
;

530 
´essšg
[
DOWN
] = 
çl£
;

531 
lock
[
DOWN
] = 
çl£
;

532 
joyLa¡PosY
 = 
JOY_POS_UP
;

536 
´essšg
[
DOWN
] = 
Œue
;

537 
´essšg
[
UP
] = 
çl£
;

538 
lock
[
UP
] = 
çl£
;

539 
joyLa¡PosY
 = 
JOY_POS_DOWN
;

541 
joyHasMovedY
 = 1;

544 if(
joyAxisYv®
 > 
JOY_DEADZONE
)

546 if(!
joyRev”£AxisY
)

548 if(
joyLa¡PosY
 =ğ
JOY_POS_UP
)

550 
joyHasMovedY
 = 0;

555 if(
joyLa¡PosY
 =ğ
JOY_POS_DOWN
)

557 
joyHasMovedY
 = 0;

560 if(
joyHasMovedY
 == 0)

562 if(!
joyRev”£AxisY
)

564 
´essšg
[
DOWN
] = 
Œue
;

565 
´essšg
[
UP
] = 
çl£
;

566 
lock
[
UP
] = 
çl£
;

567 
joyLa¡PosY
 = 
JOY_POS_DOWN
;

571 
´essšg
[
UP
] = 
Œue
;

572 
´essšg
[
DOWN
] = 
çl£
;

573 
lock
[
DOWN
] = 
çl£
;

574 
joyLa¡PosY
 = 
JOY_POS_UP
;

576 
joyHasMovedY
 = 1;

579 if((
joyAxisYv®
 >ğ-
JOY_DEADZONE
) && (joyAxisYval < JOY_DEADZONE))

581 
´essšg
[
UP
] = 
çl£
;

582 
lock
[
UP
] = 
çl£
;

583 
´essšg
[
DOWN
] = 
çl£
;

584 
lock
[
DOWN
] = 
çl£
;

585 
joyHasMovedY
 = 0;

586 
joyLa¡PosY
 = 
JOY_POS_CENTER
;

589 
	`mou£EmuÏtiÚ
();

591 
	}
}

593 
	gIÅutS‹
::
	$»£tSüŞl
() {

594 
süŞl_up
 = 
çl£
;

595 
süŞl_down
 = 
çl£
;

596 
	}
}

598 
	gIÅutS‹
::
	$’abËMou£EmuÏtiÚ
() {

599 ià(
ENABLE_JOYSTICK
 && !
mou£_emuÏtiÚ
) {

600 
mou£_emuÏtiÚ
 = 
Œue
;

601 
	`SDL_W¬pMou£
(
VIEW_W_HALF
,
VIEW_H_HALF
);

603 
	}
}

605 
	gIÅutS‹
::
	$di§bËMou£EmuÏtiÚ
() {

606 ià(
ENABLE_JOYSTICK
 && 
mou£_emuÏtiÚ
) {

607 
mou£_emuÏtiÚ
 = 
çl£
;

608 
	`SDL_W¬pMou£
(
VIEW_W
-1,
VIEW_H
-1);

610 
	}
}

612 
	gIÅutS‹
::
	$mou£EmuÏtiÚ
() {

613 ià(!
mou£_emuÏtiÚ
) ;

615 ià(
´essšg
[
UP
] && 
my_v–
 > -
MOUSE_EMU_VEL
) my_vel--;

616 ià(!
´essšg
[
UP
] && 
my_v–
 < 0) my_vel = 0;

618 ià(
´essšg
[
DOWN
] && 
my_v–
 < 
MOUSE_EMU_VEL
) my_vel++;

619 ià(!
´essšg
[
DOWN
] && 
my_v–
 > 0) my_vel = 0;

621 ià(
´essšg
[
LEFT
] && 
mx_v–
 > -
MOUSE_EMU_VEL
) mx_vel--;

622 ià(!
´essšg
[
LEFT
] && 
mx_v–
 < 0) mx_vel = 0;

624 ià(
´essšg
[
RIGHT
] && 
mx_v–
 < 
MOUSE_EMU_VEL
) mx_vel++;

625 ià(!
´essšg
[
RIGHT
] && 
mx_v–
 > 0) mx_vel = 0;

627 ià(
mx_v–
 !ğ0 || 
my_v–
 !ğ0è
	`SDL_W¬pMou£
(
mou£
.
x
+mx_v–,mou£.
y
+my_vel);

628 
	}
}

630 
	gIÅutS‹
::
	$lockAùiÚB¬
() {

631 
´essšg
[
BAR_1
] = 
çl£
;

632 
´essšg
[
BAR_2
] = 
çl£
;

633 
´essšg
[
BAR_3
] = 
çl£
;

634 
´essšg
[
BAR_4
] = 
çl£
;

635 
´essšg
[
BAR_5
] = 
çl£
;

636 
´essšg
[
BAR_6
] = 
çl£
;

637 
´essšg
[
BAR_7
] = 
çl£
;

638 
´essšg
[
BAR_8
] = 
çl£
;

639 
´essšg
[
BAR_9
] = 
çl£
;

640 
´essšg
[
BAR_0
] = 
çl£
;

641 
´essšg
[
MAIN1
] = 
çl£
;

642 
´essšg
[
MAIN2
] = 
çl£
;

643 
lock
[
BAR_1
] = 
Œue
;

644 
lock
[
BAR_2
] = 
Œue
;

645 
lock
[
BAR_3
] = 
Œue
;

646 
lock
[
BAR_4
] = 
Œue
;

647 
lock
[
BAR_5
] = 
Œue
;

648 
lock
[
BAR_6
] = 
Œue
;

649 
lock
[
BAR_7
] = 
Œue
;

650 
lock
[
BAR_8
] = 
Œue
;

651 
lock
[
BAR_9
] = 
Œue
;

652 
lock
[
BAR_0
] = 
Œue
;

653 
lock
[
MAIN1
] = 
Œue
;

654 
lock
[
MAIN2
] = 
Œue
;

655 
	}
}

657 
	gIÅutS‹
::
	$uÆockAùiÚB¬
() {

658 
lock
[
BAR_1
] = 
çl£
;

659 
lock
[
BAR_2
] = 
çl£
;

660 
lock
[
BAR_3
] = 
çl£
;

661 
lock
[
BAR_4
] = 
çl£
;

662 
lock
[
BAR_5
] = 
çl£
;

663 
lock
[
BAR_6
] = 
çl£
;

664 
lock
[
BAR_7
] = 
çl£
;

665 
lock
[
BAR_8
] = 
çl£
;

666 
lock
[
BAR_9
] = 
çl£
;

667 
lock
[
BAR_0
] = 
çl£
;

668 
lock
[
MAIN1
] = 
çl£
;

669 
lock
[
MAIN2
] = 
çl£
;

670 
	}
}

672 
	gIÅutS‹
::
	$£tKeybšdNames
() {

673 
bšdšg_Çme
[0] = 
msg
->
	`g‘
("Cancel");

674 
bšdšg_Çme
[1] = 
msg
->
	`g‘
("Accept");

675 
bšdšg_Çme
[2] = 
msg
->
	`g‘
("Up");

676 
bšdšg_Çme
[3] = 
msg
->
	`g‘
("Down");

677 
bšdšg_Çme
[4] = 
msg
->
	`g‘
("Left");

678 
bšdšg_Çme
[5] = 
msg
->
	`g‘
("Right");

679 
bšdšg_Çme
[6] = 
msg
->
	`g‘
("Bar1");

680 
bšdšg_Çme
[7] = 
msg
->
	`g‘
("Bar2");

681 
bšdšg_Çme
[8] = 
msg
->
	`g‘
("Bar3");

682 
bšdšg_Çme
[9] = 
msg
->
	`g‘
("Bar4");

683 
bšdšg_Çme
[10] = 
msg
->
	`g‘
("Bar5");

684 
bšdšg_Çme
[11] = 
msg
->
	`g‘
("Bar6");

685 
bšdšg_Çme
[12] = 
msg
->
	`g‘
("Bar7");

686 
bšdšg_Çme
[13] = 
msg
->
	`g‘
("Bar8");

687 
bšdšg_Çme
[14] = 
msg
->
	`g‘
("Bar9");

688 
bšdšg_Çme
[15] = 
msg
->
	`g‘
("Bar0");

689 
bšdšg_Çme
[16] = 
msg
->
	`g‘
("Character");

690 
bšdšg_Çme
[17] = 
msg
->
	`g‘
("Inventory");

691 
bšdšg_Çme
[18] = 
msg
->
	`g‘
("Powers");

692 
bšdšg_Çme
[19] = 
msg
->
	`g‘
("Log");

693 
bšdšg_Çme
[20] = 
msg
->
	`g‘
("Main1");

694 
bšdšg_Çme
[21] = 
msg
->
	`g‘
("Main2");

695 
bšdšg_Çme
[22] = 
msg
->
	`g‘
("Ctrl");

696 
bšdšg_Çme
[23] = 
msg
->
	`g‘
("Shift");

697 
bšdšg_Çme
[24] = 
msg
->
	`g‘
("Delete");

699 
mou£_bu‰Ú
[0] = 
msg
->
	`g‘
("lmb");

700 
mou£_bu‰Ú
[1] = 
msg
->
	`g‘
("mmb");

701 
mou£_bu‰Ú
[2] = 
msg
->
	`g‘
("rmb");

702 
mou£_bu‰Ú
[3] = 
msg
->
	`g‘
("wheel up");

703 
mou£_bu‰Ú
[4] = 
msg
->
	`g‘
("wheel down");

704 
mou£_bu‰Ú
[5] = 
msg
->
	`g‘
("mbx1");

705 
mou£_bu‰Ú
[6] = 
msg
->
	`g‘
("mbx2");

706 
	}
}

708 
	gIÅutS‹
::~
	$IÅutS‹
() {

709 
	}
}

	@InputState.h

19 #´agm¨
Úû


20 #iâdeà
INPUT_STATE_H


21 
	#INPUT_STATE_H


	)

23 
	~"Uts.h
"

25 
	~<SDL.h
>

26 
	~<¡ršg
>

29 
	#JOY_DEADZONE
 100

	)

31 
	#JOY_POS_CENTER
 0

	)

32 
	#JOY_POS_LEFT
 -1

	)

33 
	#JOY_POS_RIGHT
 1

	)

34 
	#JOY_POS_UP
 -1

	)

35 
	#JOY_POS_DOWN
 1

	)

39 cÚ¡ 
	gCANCEL
 = 0;

40 cÚ¡ 
	gACCEPT
 = 1;

41 cÚ¡ 
	gUP
 = 2;

42 cÚ¡ 
	gDOWN
 = 3;

43 cÚ¡ 
	gLEFT
 = 4;

44 cÚ¡ 
	gRIGHT
 = 5;

45 cÚ¡ 
	gBAR_1
 = 6;

46 cÚ¡ 
	gBAR_2
 = 7;

47 cÚ¡ 
	gBAR_3
 = 8;

48 cÚ¡ 
	gBAR_4
 = 9;

49 cÚ¡ 
	gBAR_5
 = 10;

50 cÚ¡ 
	gBAR_6
 = 11;

51 cÚ¡ 
	gBAR_7
 = 12;

52 cÚ¡ 
	gBAR_8
 = 13;

53 cÚ¡ 
	gBAR_9
 = 14;

54 cÚ¡ 
	gBAR_0
 = 15;

55 cÚ¡ 
	gCHARACTER
 = 16;

56 cÚ¡ 
	gINVENTORY
 = 17;

57 cÚ¡ 
	gPOWERS
 = 18;

58 cÚ¡ 
	gLOG
 = 19;

59 cÚ¡ 
	gMAIN1
 = 20;

60 cÚ¡ 
	gMAIN2
 = 21;

61 cÚ¡ 
	gCTRL
 = 22;

62 cÚ¡ 
	gSHIFT
 = 23;

63 cÚ¡ 
	gDEL
 = 24;

66 cÚ¡ 
	gMOUSE_EMU_VEL
 = 32;

74 şas 
	cIÅutS‹
 {

75 
	m´iv©e
:

76 
mx_v–
;

77 
	mmy_v–
;

78 
mou£EmuÏtiÚ
();

79 
	mpublic
:

80 cÚ¡ 
key_couÁ
 = 25;

81 
	mbšdšg
[
key_couÁ
];

82 
	mbšdšg_®t
[
key_couÁ
];

83 
	mbšdšg_joy
[
key_couÁ
];

85 
	m¡d
::
¡ršg
 
bšdšg_Çme
[25];

86 
	m¡d
::
¡ršg
 
mou£_bu‰Ú
[7];

88 
IÅutS‹
();

89 ~
IÅutS‹
();

91 
deçuÉQw”tyKeyBšdšgs
();

92 
deçuÉJoy¡ickBšdšgs
();

93 
lßdKeyBšdšgs
();

94 
§veKeyBšdšgs
();

95 
hªdË
(
boŞ
 
dump_ev’t
);

96 
»£tSüŞl
();

97 
’abËMou£EmuÏtiÚ
();

98 
di§bËMou£EmuÏtiÚ
();

99 
lockAùiÚB¬
();

100 
uÆockAùiÚB¬
();

101 
£tKeybšdNames
();

103 
boŞ
 
	m´essšg
[
key_couÁ
];

104 
boŞ
 
	mlock
[
key_couÁ
];

106 
boŞ
 
	mdÚe
;

107 
Pošt
 
	mmou£
;

108 
	m¡d
::
¡ršg
 
škeys
;

109 
	mÏ¡_key
;

110 
	mÏ¡_bu‰Ú
;

111 
boŞ
 
	msüŞl_up
;

112 
boŞ
 
	msüŞl_down
;

113 
boŞ
 
	mmou£_emuÏtiÚ
;

	@ItemManager.cpp

25 
	~"I‹mMªag”.h
"

26 
	~"FeP¬£r.h
"

27 
	~"Sh¬edResourûs.h
"

28 
	~"S‘tšgs.h
"

29 
	~"StBlock.h
"

30 
	~"UtsFeSy¡em.h
"

31 
	~"UtsP¬sšg.h
"

32 
	~"Widg‘Lab–.h
"

34 
	~<ÿs£¹
>

35 
	~<şim™s
>

36 
	~<c¡ršg
>

37 
	~<f¡»am
>

38 
	~<s¡»am
>

40 
usšg
 
Çme¥aû
 
	g¡d
;

45 
	g‹m¶©e
 <
ty³Çme
 
	gTy_
>

46 
šlše
 
’su»F™sId
(
veùÜ
<
Ty_
>& 
vec
, 
id
)

49 ià(
	gid
 < 1) ;

51 
ty³Çme
 
	tveùÜ
<
	tTy_
>::
	tsize_ty³
 
	tVecSz
;

53 ià(
	gvec
.
size
(è<ğ
VecSz
(
id
+1))

54 
vec
.
»size
(
id
+1);

63 
	g‹m¶©e
 <
ty³Çme
 
	gTy_
>

64 
šlše
 
shrškVecToF™
(
¡d
::
veùÜ
<
Ty_
>& 
vec
)

66 ià(
vec
.
ÿ·c™y
(è!ğvec.
size
())

67 
¡d
::
veùÜ
<
Ty_
>(
vec
).
sw­
(vec);

70 
	gI‹mMªag”
::
	$I‹mMªag”
()

71 : 
	`cŞÜ_nÜm®
(
fÚt
->
	`g‘CŞÜ
("item_normal"))

72 , 
	`cŞÜ_low
(
fÚt
->
	`g‘CŞÜ
("item_low"))

73 , 
	`cŞÜ_high
(
fÚt
->
	`g‘CŞÜ
("item_high"))

74 , 
	`cŞÜ_•ic
(
fÚt
->
	`g‘CŞÜ
("item_epic"))

75 , 
	`cŞÜ_bÚus
(
fÚt
->
	`g‘CŞÜ
("item_bonus"))

76 , 
	`cŞÜ_³ÇÉy
(
fÚt
->
	`g‘CŞÜ
("item_penalty"))

77 , 
	`cŞÜ_»quœem’ts_nÙ_m‘
(
fÚt
->
	`g‘CŞÜ
("requirements_not_met"))

78 , 
	`cŞÜ_æavÜ
(
fÚt
->
	`g‘CŞÜ
("item_flavor"))

81 
™ems
.
	`»£rve
(20);

82 
™em_£ts
.
	`»£rve
(5);

84 
	`lßdAÎ
();

85 
	`lßdIcÚs
();

86 
	}
}

91 
	gI‹mMªag”
::
	$lßdAÎ
() {

92 
¡ršg
 
‹¡_·th
;

95 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

96 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/items/items.txt";

98 ià(
	`feExi¡s
(
‹¡_·th
)) {

99 
this
->
	`lßd
(
‹¡_·th
);

102 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/items/types.txt";

104 ià(
	`feExi¡s
(
‹¡_·th
)) {

105 
this
->
	`lßdTy³s
(
‹¡_·th
);

108 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/items/sets.txt";

110 ià(
	`feExi¡s
(
‹¡_·th
)) {

111 
this
->
	`lßdS‘s
(
‹¡_·th
);

125 
	`shrškVecToF™
(
™ems
);

126 
	`shrškVecToF™
(
™em_£ts
);

128 ià(
™ems
.
	`em±y
()è
	`årštf
(
¡d”r
, "No items were found.\n");

133 
	}
}

140 
	gI‹mMªag”
::
	$lßd
(cÚ¡ 
¡ršg
& 
f’ame
) {

141 
FeP¬£r
 
šfe
;

142 ià(!
šfe
.
	`İ’
(
f’ame
)) {

143 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
f’ame
.
	`c_¡r
());

147 
id
 = 0;

148 
boŞ
 
id_lše
 = 
çl£
;

149 
šfe
.
	`Ãxt
()) {

150 ià(
šfe
.
key
 == "id") {

151 
id_lše
 = 
Œue
;

152 
id
 = 
	`toIÁ
(
šfe
.
v®
);

153 
	`’su»F™sId
(
™ems
, 
id
+1);

154 } 
id_lše
 = 
çl£
;

156 ià(
id
 < 1) {

157 ià(
id_lše
è
	`årštf
(
¡d”r
, "I‹m index ouˆoàbound 1-%d, skpšg\n", 
INT_MAX
);

160 ià(
id_lše
) ;

162 
	`as£¹
(
™ems
.
	`size
(è> 
¡d
::
	`size_t
(
id
));

164 ià(
šfe
.
key
 == "name")

165 
™ems
[
id
].
Çme
 = 
msg
->
	`g‘
(
šfe
.
v®
);

166 ià(
šfe
.
key
 == "flavor")

167 
™ems
[
id
].
æavÜ
 = 
msg
->
	`g‘
(
šfe
.
v®
);

168 ià(
šfe
.
key
 == "level")

169 
™ems
[
id
].
Ëv–
 = 
	`toIÁ
(
šfe
.
v®
);

170 ià(
šfe
.
key
 == "icon") {

171 
™ems
[
id
].
icÚ
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

173 ià(
šfe
.
key
 == "quality") {

174 ià(
šfe
.
v®
 == "low")

175 
™ems
[
id
].
qu®™y
 = 
ITEM_QUALITY_LOW
;

176 ià(
šfe
.
v®
 == "high")

177 
™ems
[
id
].
qu®™y
 = 
ITEM_QUALITY_HIGH
;

178 ià(
šfe
.
v®
 == "epic")

179 
™ems
[
id
].
qu®™y
 = 
ITEM_QUALITY_EPIC
;

181 ià(
šfe
.
key
 == "item_type") {

182 
™ems
[
id
].
ty³
 = 
šfe
.
v®
;

184 ià(
šfe
.
key
 == "dmg_melee") {

185 
™ems
[
id
].
dmg_m–“_mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

186 ià(
šfe
.
v®
.
	`Ëngth
() > 0)

187 
™ems
[
id
].
dmg_m–“_max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

189 
™ems
[
id
].
dmg_m–“_max
 = i‹ms[id].
dmg_m–“_mš
;

191 ià(
šfe
.
key
 == "dmg_ranged") {

192 
™ems
[
id
].
dmg_¿nged_mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

193 ià(
šfe
.
v®
.
	`Ëngth
() > 0)

194 
™ems
[
id
].
dmg_¿nged_max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

196 
™ems
[
id
].
dmg_¿nged_max
 = i‹ms[id].
dmg_¿nged_mš
;

198 ià(
šfe
.
key
 == "dmg_ment") {

199 
™ems
[
id
].
dmg_m’t_mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

200 ià(
šfe
.
v®
.
	`Ëngth
() > 0)

201 
™ems
[
id
].
dmg_m’t_max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

203 
™ems
[
id
].
dmg_m’t_max
 = i‹ms[id].
dmg_m’t_mš
;

205 ià(
šfe
.
key
 == "abs") {

206 
™ems
[
id
].
abs_mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

207 ià(
šfe
.
v®
.
	`Ëngth
() > 0)

208 
™ems
[
id
].
abs_max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

210 
™ems
[
id
].
abs_max
 = i‹ms[id].
abs_mš
;

212 ià(
šfe
.
key
 == "req") {

213 
¡ršg
 
s
 = 
šfe
.
	`ÃxtV®ue
();

214 ià(
s
 == "p")

215 
™ems
[
id
].
»q_¡©
 = 
REQUIRES_PHYS
;

216 ià(
s
 == "m")

217 
™ems
[
id
].
»q_¡©
 = 
REQUIRES_MENT
;

218 ià(
s
 == "o")

219 
™ems
[
id
].
»q_¡©
 = 
REQUIRES_OFF
;

220 ià(
s
 == "d")

221 
™ems
[
id
].
»q_¡©
 = 
REQUIRES_DEF
;

222 
™ems
[
id
].
»q_v®
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

224 ià(
šfe
.
key
 == "bonus") {

225 
™ems
[
id
].
bÚus_¡©
.
	`push_back
(
šfe
.
	`ÃxtV®ue
());

226 
™ems
[
id
].
bÚus_v®
.
	`push_back
(
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()));

228 ià(
šfe
.
key
 == "soundfx") {

229 
™ems
[
id
].
sfx
 = 
¢d
->
	`lßd
(
šfe
.
v®
, "ItemManager");

231 ià(
šfe
.
key
 == "gfx")

232 
™ems
[
id
].
gfx
 = 
šfe
.
v®
;

233 ià(
šfe
.
key
 == "loot_animation")

234 
™ems
[
id
].
loÙ_ªim©iÚ
 = 
šfe
.
v®
;

235 ià(
šfe
.
key
 == "power") {

236 ià(
	`toIÁ
(
šfe
.
v®
) > 0) {

237 
™ems
[
id
].
pow”
 = 
	`toIÁ
(
šfe
.
v®
);

239 
	`årštf
(
¡d”r
, "Pow” index insid™em %d defš™iÚ ouˆoàbound 1-%d, skpšg i‹m\n", 
id
, 
INT_MAX
);

241 ià(
šfe
.
key
 == "power_mod")

242 
™ems
[
id
].
pow”_mod
 = 
	`toIÁ
(
šfe
.
v®
);

243 ià(
šfe
.
key
 == "power_desc")

244 
™ems
[
id
].
pow”_desc
 = 
msg
->
	`g‘
(
šfe
.
v®
);

245 ià(
šfe
.
key
 == "price")

246 
™ems
[
id
].
´iû
 = 
	`toIÁ
(
šfe
.
v®
);

247 ià(
šfe
.
key
 == "price_sell")

248 
™ems
[
id
].
´iû_£Î
 = 
	`toIÁ
(
šfe
.
v®
);

249 ià(
šfe
.
key
 == "max_quantity")

250 
™ems
[
id
].
max_quªt™y
 = 
	`toIÁ
(
šfe
.
v®
);

251 ià(
šfe
.
key
 == "rand_loot")

252 
™ems
[
id
].
¿nd_loÙ
 = 
	`toIÁ
(
šfe
.
v®
);

253 ià(
šfe
.
key
 == "rand_vendor")

254 
™ems
[
id
].
¿nd_v’dÜ
 = 
	`toIÁ
(
šfe
.
v®
);

255 ià(
šfe
.
key
 == "pickup_status")

256 
™ems
[
id
].
pickup_¡©us
 = 
šfe
.
v®
;

257 ià(
šfe
.
key
 == "stepfx")

258 
™ems
[
id
].
¡•fx
 = 
šfe
.
v®
;

259 ià(
šfe
.
key
 == "class") {

260 
¡ršg
 
şas¢ame
 = 
šfe
.
	`ÃxtV®ue
();

261 
şas¢ame
 != "") {

262 
pos
;

263 
pos
 = 0;…o < 
™em_şass_Çmes
.
	`size
();…os++) {

264 ià(
™em_şass_Çmes
[
pos
] =ğ
şas¢ame
)

269 ià(
pos
 =ğ
™em_şass_Çmes
.
	`size
()) {

270 
™em_şass_Çmes
.
	`push_back
(
şas¢ame
);

271 
™em_şass_™ems
.
	`push_back
(
veùÜ
<>());

274 
™em_şass_™ems
[
pos
].
	`push_back
(
id
);

275 
şas¢ame
 = 
šfe
.
	`ÃxtV®ue
();

280 
šfe
.
	`şo£
();

281 
	}
}

283 
	gI‹mMªag”
::
	$lßdTy³s
(cÚ¡ 
¡ršg
& 
f’ame
) {

284 
FeP¬£r
 
šfe
;

285 
¡ršg
 
ty³
,
desütiÚ
;

286 
ty³
 = 
desütiÚ
 = "";

288 ià(
šfe
.
	`İ’
(
f’ame
)) {

289 
šfe
.
	`Ãxt
()) {

290 ià(
šfe
.
key
 =ğ"Çme"è
ty³
 = infe.
v®
;

291 ià(
šfe
.
key
 =ğ"desütiÚ"è
desütiÚ
 = infe.
v®
;

293 ià(
ty³
 !ğ"" && 
desütiÚ
 != "") {

294 
™em_ty³s
[
ty³
] = 
desütiÚ
;

295 
ty³
 = 
desütiÚ
 = "";

298 
šfe
.
	`şo£
();

299 } 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
f’ame
.
	`c_¡r
());

300 
	}
}

302 
¡ršg
 
	gI‹mMªag”
::
g‘I‹mTy³
(
¡d
::¡ršg 
_ty³
) {

303 
m­
<
¡ršg
,
	g¡ršg
>::
™”©Ü
 
™
,
	g’d
;

304 
	g™
=
™em_ty³s
.
begš
(), 
	g’d
=™em_ty³s.
’d
(); it!=end; ++it) {

305 ià(
	g_ty³
.
com·»
(
™
->
fœ¡
è=ğ0è it->
£cÚd
;

308  
	g_ty³
;

311 
	gI‹mMªag”
::
	$lßdS‘s
(cÚ¡ 
¡ršg
& 
f’ame
) {

312 
FeP¬£r
 
šfe
;

313 ià(!
šfe
.
	`İ’
(
f’ame
)) {

314 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
f’ame
.
	`c_¡r
());

318 
id
 = 0;

319 
boŞ
 
id_lše
;

320 
šfe
.
	`Ãxt
()) {

321 ià(
šfe
.
key
 == "id") {

322 
id_lše
 = 
Œue
;

323 
id
 = 
	`toIÁ
(
šfe
.
v®
);

324 
	`’su»F™sId
(
™em_£ts
, 
id
+1);

325 } 
id_lše
 = 
çl£
;

327 ià(
id
 < 1) {

328 ià(
id_lše
è
	`årštf
(
¡d”r
, "I‹m s‘ index ouˆoàbound 1-%d, skpšg\n", 
INT_MAX
);

331 ià(
id_lše
) ;

333 
	`as£¹
(
™em_£ts
.
	`size
(è> 
¡d
::
	`size_t
(
id
));

335 ià(
šfe
.
key
 == "name") {

336 
™em_£ts
[
id
].
Çme
 = 
msg
->
	`g‘
(
šfe
.
v®
);

338 ià(
šfe
.
key
 == "items") {

339 
¡ršg
 
™em_id
 = 
šfe
.
	`ÃxtV®ue
();

340 
™em_id
 != "") {

341 
‹mp_id
 = 
	`toIÁ
(
™em_id
);

342 ià(
‹mp_id
 > 0 &&emp_id < 
¡©ic_ÿ¡
<>(
™ems
.
	`size
())) {

343 
™ems
[
‹mp_id
].
£t
 = 
id
;

344 
™em_£ts
[
id
].
™ems
.
	`push_back
(
‹mp_id
);

346 cÚ¡ 
maxsize
 = 
¡©ic_ÿ¡
<>(
™ems
.
	`size
()-1);

347 cÚ¡ * 
úame
 = 
™em_£ts
[
id
].
Çme
.
	`c_¡r
();

348 
	`årštf
(
¡d”r
, "I‹m index insid™em s‘ % defš™iÚ ouˆoàbound 1-%d, skpšg i‹m\n", 
úame
, 
maxsize
);

350 
™em_id
 = 
šfe
.
	`ÃxtV®ue
();

353 ià(
šfe
.
key
 == "color") {

354 
™em_£ts
[
id
].
cŞÜ
.
r
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

355 
™em_£ts
[
id
].
cŞÜ
.
g
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

356 
™em_£ts
[
id
].
cŞÜ
.
b
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

358 ià(
šfe
.
key
 == "bonus") {

359 
S‘_bÚus
 
bÚus
;

360 
bÚus
.
»quœem’t
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

361 
bÚus
.
bÚus_¡©
 = 
šfe
.
	`ÃxtV®ue
();

362 
bÚus
.
bÚus_v®
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

363 
™em_£ts
[
id
].
bÚus
.
	`push_back
(bonus);

366 
šfe
.
	`şo£
();

367 
	}
}

372 
	gI‹mMªag”
::
	$lßdIcÚs
() {

374 
icÚs
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/icÚs/icÚs.²g").
	`c_¡r
());

376 ià(!
icÚs
) {

377 
	`årštf
(
¡d”r
, "Couldn'ˆlßd icÚs: %s\n", 
	`IMG_G‘E¼Ü
());

380 
SDL_Surçû
 *
ş—nup
 = 
icÚs
;

381 
icÚs
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(icons);

382 
	`SDL_F»eSurçû
(
ş—nup
);

384 
	}
}

390 
	gI‹mMªag”
::
	$»nd”IcÚ
(
I‹mSck
 
¡ack
, 
x
, 
y
, 
size
) {

391 ià(!
icÚs
) ;

393 
de¡
.
x
 = x;

394 
de¡
.
y
 = y;

395 
¤c
.
w
 = src.
h
 = 
de¡
.w = de¡.h = 
size
;

397 ià(
¡ack
.
™em
 > 0) {

398 
cŞumns
 = 
icÚs
->
w
 / 
ICON_SIZE
;

399 
¤c
.
x
 = (
™ems
[
¡ack
.
™em
].
icÚ
 % 
cŞumns
è* 
size
;

400 
¤c
.
y
 = (
™ems
[
¡ack
.
™em
].
icÚ
 / 
cŞumns
è* 
size
;

401 
	`SDL_Bl™Surçû
(
icÚs
, &
¤c
, 
sü“n
, &
de¡
);

404 ià(
¡ack
.
quªt™y
 > 1 || 
™ems
[¡ack.
™em
].
max_quªt™y
 > 1) {

406 
¡ršg¡»am
 
ss
;

407 
ss
 << 
¡ack
.
quªt™y
;

409 
Widg‘Lab–
 
Ïb–
;

410 
Ïb–
.
	`£t
(
de¡
.
x
 + 2, de¡.
y
 + 2, 
JUSTIFY_LEFT
, 
VALIGN_TOP
, 
ss
.
	`¡r
(), 
cŞÜ_nÜm®
);

411 
Ïb–
.
	`»nd”
();

413 
	}
}

415 
	gI‹mMªag”
::
	$¶aySound
(
™em
, 
Pošt
 
pos
) {

416 
¢d
->
	`¶ay
(
™ems
[
™em
].
sfx
, 
GLOBAL_VIRTUAL_CHANNEL
, 
pos
, 
çl£
);

417 
	}
}

419 
ToŞtD©a
 
	gI‹mMªag”
::
	$g‘ShÜtToŞt
(
I‹mSck
 
¡ack
) {

420 
¡ršg¡»am
 
ss
;

421 
ToŞtD©a
 
t
;

422 
SDL_CŞÜ
 
cŞÜ
 = 
cŞÜ_nÜm®
;

424 ià(
¡ack
.
™em
 =ğ0è 
t
;

427 ià(
™ems
[
¡ack
.
™em
].
£t
 > 0) {

428 
cŞÜ
 = 
™em_£ts
[
™ems
[
¡ack
.
™em
].
£t
].color;

430 ià(
™ems
[
¡ack
.
™em
].
qu®™y
 =ğ
ITEM_QUALITY_LOW
) {

431 
cŞÜ
 = 
cŞÜ_low
;

433 ià(
™ems
[
¡ack
.
™em
].
qu®™y
 =ğ
ITEM_QUALITY_HIGH
) {

434 
cŞÜ
 = 
cŞÜ_high
;

436 ià(
™ems
[
¡ack
.
™em
].
qu®™y
 =ğ
ITEM_QUALITY_EPIC
) {

437 
cŞÜ
 = 
cŞÜ_•ic
;

441 ià(
¡ack
.
quªt™y
 > 1) {

442 
ss
 << 
¡ack
.
quªt™y
 << " " << 
™ems
[¡ack.
™em
].
Çme
;

444 
ss
 << 
™ems
[
¡ack
.
™em
].
Çme
;

446 
t
.
	`addText
(
ss
.
	`¡r
(), 
cŞÜ
);

448  
t
;

449 
	}
}

454 
ToŞtD©a
 
	gI‹mMªag”
::
	$g‘ToŞt
(
™em
, 
StBlock
 *
¡©s
, 
cÚ‹xt
) {

455 
ToŞtD©a
 
t
;

456 
SDL_CŞÜ
 
cŞÜ
 = 
cŞÜ_nÜm®
;

458 ià(
™em
 =ğ0è 
t
;

461 ià(
™ems
[
™em
].
£t
 > 0) {

462 
cŞÜ
 = 
™em_£ts
[
™ems
[
™em
].
£t
].color;

464 ià(
™ems
[
™em
].
qu®™y
 =ğ
ITEM_QUALITY_LOW
) {

465 
cŞÜ
 = 
cŞÜ_low
;

467 ià(
™ems
[
™em
].
qu®™y
 =ğ
ITEM_QUALITY_HIGH
) {

468 
cŞÜ
 = 
cŞÜ_high
;

470 ià(
™ems
[
™em
].
qu®™y
 =ğ
ITEM_QUALITY_EPIC
) {

471 
cŞÜ
 = 
cŞÜ_•ic
;

475 
t
.
	`addText
(
™ems
[
™em
].
Çme
, 
cŞÜ
);

478 ià(
™ems
[
™em
].
Ëv–
 != 0) {

479 
t
.
	`addText
(
msg
->
	`g‘
("Lev– %d", 
™ems
[
™em
].
Ëv–
));

483 ià(
™ems
[
™em
].
ty³
 != "other") {

484 
t
.
	`addText
(
msg
->
	`g‘
(
	`g‘I‹mTy³
(
™ems
[
™em
].
ty³
)));

488 ià(
™ems
[
™em
].
dmg_m–“_max
 > 0) {

489 ià(
™ems
[
™em
].
dmg_m–“_mš
 < i‹ms[™em].
dmg_m–“_max
)

490 
t
.
	`addText
(
msg
->
	`g‘
("M–“ damage: %d-%d", 
™ems
[
™em
].
dmg_m–“_mš
, i‹ms[™em].
dmg_m–“_max
));

492 
t
.
	`addText
(
msg
->
	`g‘
("M–“ damage: %d", 
™ems
[
™em
].
dmg_m–“_max
));

494 ià(
™ems
[
™em
].
dmg_¿nged_max
 > 0) {

495 ià(
™ems
[
™em
].
dmg_¿nged_mš
 < i‹ms[™em].
dmg_¿nged_max
)

496 
t
.
	`addText
(
msg
->
	`g‘
("Rªged damage: %d-%d", 
™ems
[
™em
].
dmg_¿nged_mš
, i‹ms[™em].
dmg_¿nged_max
));

498 
t
.
	`addText
(
msg
->
	`g‘
("Rªged damage: %d", 
™ems
[
™em
].
dmg_¿nged_max
));

500 ià(
™ems
[
™em
].
dmg_m’t_max
 > 0) {

501 ià(
™ems
[
™em
].
dmg_m’t_mš
 < i‹ms[™em].
dmg_m’t_max
)

502 
t
.
	`addText
(
msg
->
	`g‘
("M’Èdamage: %d-%d", 
™ems
[
™em
].
dmg_m’t_mš
, i‹ms[™em].
dmg_m’t_max
));

504 
t
.
	`addText
(
msg
->
	`g‘
("M’Èdamage: %d", 
™ems
[
™em
].
dmg_m’t_max
));

508 ià(
™ems
[
™em
].
abs_max
 > 0) {

509 ià(
™ems
[
™em
].
abs_mš
 < i‹ms[™em].
abs_max
)

510 
t
.
	`addText
(
msg
->
	`g‘
("AbsÜb: %d-%d", 
™ems
[
™em
].
abs_mš
, i‹ms[™em].
abs_max
));

512 
t
.
	`addText
(
msg
->
	`g‘
("AbsÜb: %d", 
™ems
[
™em
].
abs_max
));

516 
bÚus_couÁ”
 = 0;

517 
¡ršg
 
modif›r
;

518 
bÚus_couÁ”
 < 
™ems
[
™em
].
bÚus_v®
.
	`size
(è&& i‹ms[™em].
bÚus_¡©
[bonus_counter] != "") {

519 ià(
™ems
[
™em
].
bÚus_¡©
[
bÚus_couÁ”
] == "speed") {

520 
modif›r
 = 
msg
->
	`g‘
("%d%% S³ed", 
™ems
[
™em
].
bÚus_v®
[
bÚus_couÁ”
]);

521 ià(
™ems
[
™em
].
bÚus_v®
[
bÚus_couÁ”
] >ğ100è
cŞÜ
 = 
cŞÜ_bÚus
;

522 
cŞÜ
 = 
cŞÜ_³ÇÉy
;

524 ià(
™ems
[
™em
].
bÚus_v®
[
bÚus_couÁ”
] > 0) {

525 
modif›r
 = 
msg
->
	`g‘
("Increases %s by %d",

526 
™ems
[
™em
].
bÚus_v®
[
bÚus_couÁ”
],

527 
msg
->
	`g‘
(
™ems
[
™em
].
bÚus_¡©
[
bÚus_couÁ”
]));

529 
cŞÜ
 = 
cŞÜ_bÚus
;

532 
modif›r
 = 
msg
->
	`g‘
("Decreases %s by %d",

533 
™ems
[
™em
].
bÚus_v®
[
bÚus_couÁ”
],

534 
msg
->
	`g‘
(
™ems
[
™em
].
bÚus_¡©
[
bÚus_couÁ”
]));

536 
cŞÜ
 = 
cŞÜ_³ÇÉy
;

539 
t
.
	`addText
(
modif›r
, 
cŞÜ
);

540 
bÚus_couÁ”
++;

544 ià(
™ems
[
™em
].
pow”_desc
 != "") {

545 
t
.
	`addText
(
™ems
[
™em
].
pow”_desc
, 
cŞÜ_bÚus
);

549 ià(
™ems
[
™em
].
»q_v®
 > 0) {

550 ià(
™ems
[
™em
].
»q_¡©
 =ğ
REQUIRES_PHYS
) {

551 ià(
¡©s
->
	`g‘_physiÿl
(è< 
™ems
[
™em
].
»q_v®
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

552 
cŞÜ
 = 
cŞÜ_nÜm®
;

553 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈ%d", 
™ems
[
™em
].
»q_v®
), 
cŞÜ
);

555 ià(
™ems
[
™em
].
»q_¡©
 =ğ
REQUIRES_MENT
) {

556 ià(
¡©s
->
	`g‘_m’l
(è< 
™ems
[
™em
].
»q_v®
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

557 
cŞÜ
 = 
cŞÜ_nÜm®
;

558 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’È%d", 
™ems
[
™em
].
»q_v®
), 
cŞÜ
);

560 ià(
™ems
[
™em
].
»q_¡©
 =ğ
REQUIRES_OFF
) {

561 ià(
¡©s
->
	`g‘_ofãn£
(è< 
™ems
[
™em
].
»q_v®
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

562 
cŞÜ
 = 
cŞÜ_nÜm®
;

563 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Ofãn£ %d", 
™ems
[
™em
].
»q_v®
), 
cŞÜ
);

565 ià(
™ems
[
™em
].
»q_¡©
 =ğ
REQUIRES_DEF
) {

566 ià(
¡©s
->
	`g‘_deãn£
(è< 
™ems
[
™em
].
»q_v®
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

567 
cŞÜ
 = 
cŞÜ_nÜm®
;

568 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Deãn£ %d", 
™ems
[
™em
].
»q_v®
), 
cŞÜ
);

573 ià(
™ems
[
™em
].
æavÜ
 != "") {

574 
t
.
	`addText
(
™ems
[
™em
].
æavÜ
, 
cŞÜ_æavÜ
);

578 ià(
™ems
[
™em
].
´iû
 > 0) {

580 
´iû_³r_un™
;

581 ià(
cÚ‹xt
 =ğ
VENDOR_BUY
) {

582 
´iû_³r_un™
 = 
™ems
[
™em
].
´iû
;

583 ià(
¡©s
->
cu¼’cy
 < 
™ems
[
™em
].
´iû
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

584 
cŞÜ
 = 
cŞÜ_nÜm®
;

585 ià(
™ems
[
™em
].
max_quªt™y
 <= 1)

586 
t
.
	`addText
(
msg
->
	`g‘
("Buy Priû: %d %s", 
´iû_³r_un™
, 
CURRENCY
), 
cŞÜ
);

588 
t
.
	`addText
(
msg
->
	`g‘
("Buy Priû: %d % —ch", 
´iû_³r_un™
, 
CURRENCY
), 
cŞÜ
);

589 } ià(
cÚ‹xt
 =ğ
VENDOR_SELL
) {

590 
´iû_³r_un™
 = 
™ems
[
™em
].
	`g‘S–lPriû
();

591 ià(
¡©s
->
cu¼’cy
 < 
´iû_³r_un™
è
cŞÜ
 = 
cŞÜ_»quœem’ts_nÙ_m‘
;

592 
cŞÜ
 = 
cŞÜ_nÜm®
;

593 ià(
™ems
[
™em
].
max_quªt™y
 <= 1)

594 
t
.
	`addText
(
msg
->
	`g‘
("Buy Priû: %d %s", 
´iû_³r_un™
, 
CURRENCY
), 
cŞÜ
);

596 
t
.
	`addText
(
msg
->
	`g‘
("Buy Priû: %d % —ch", 
´iû_³r_un™
, 
CURRENCY
), 
cŞÜ
);

597 } ià(
cÚ‹xt
 =ğ
PLAYER_INV
) {

598 
´iû_³r_un™
 = 
™ems
[
™em
].
	`g‘S–lPriû
();

599 ià(
´iû_³r_un™
 == 0)…rice_per_unit = 1;

600 ià(
™ems
[
™em
].
max_quªt™y
 <= 1)

601 
t
.
	`addText
(
msg
->
	`g‘
("S–ÈPriû: %d %s", 
´iû_³r_un™
, 
CURRENCY
));

603 
t
.
	`addText
(
msg
->
	`g‘
("S–ÈPriû: %d % —ch", 
´iû_³r_un™
, 
CURRENCY
));

607 ià(
™ems
[
™em
].
£t
 > 0) {

609 
I‹mS‘
 
£t
 = 
™em_£ts
[
™ems
[
™em
].set];

610 
bÚus_couÁ”
 = 0;

611 
modif›r
 = "";

613 
t
.
	`addText
("\n" + 
msg
->
	`g‘
("S‘: "è+ msg->g‘(
™em_£ts
[
™ems
[
™em
].
£t
].
Çme
), s‘.
cŞÜ
);

615 
bÚus_couÁ”
 < 
£t
.
bÚus
.
	`size
(è&& s‘.bÚus[bÚus_couÁ”].
bÚus_¡©
 != "") {

616 ià(
£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
 > 0) {

617 
modif›r
 = 
msg
->
	`g‘
("%d i‹ms: ", 
£t
.
bÚus
[
bÚus_couÁ”
].
»quœem’t
è+ msg->g‘("Inü—£ % by %d", s‘.bÚus[bÚus_couÁ”].
bÚus_v®
, msg->g‘(£t.bÚus[bÚus_couÁ”].
bÚus_¡©
));

620 
modif›r
 = 
msg
->
	`g‘
("%d i‹ms: ", 
£t
.
bÚus
[
bÚus_couÁ”
].
»quœem’t
è+ msg->g‘("Deü—£ % by %d", s‘.bÚus[bÚus_couÁ”].
bÚus_v®
, msg->g‘(£t.bÚus[bÚus_couÁ”].
bÚus_¡©
));

622 
t
.
	`addText
(
modif›r
, 
£t
.
cŞÜ
);

623 
bÚus_couÁ”
++;

627  
t
;

628 
	}
}

630 
	gI‹mMªag”
::~
	$I‹mMªag”
() {

631 
	`SDL_F»eSurçû
(
icÚs
);

632 
	}
}

637 
boŞ
 
	gI‹mSck
::
İ”©Ü
 > (cÚ¡ 
I‹mSck
 &
·¿m
) const {

638 ià(
™em
 =ğ0 && 
·¿m
.item > 0) {

640  
Œue
;

641 } ià(
	g™em
 > 0 && 
	g·¿m
.item == 0) {

643  
çl£
;

645  
	g™em
 > 
	g·¿m
.item;

649 
	gI‹m
::
	$g‘S–lPriû
() {

650 
Ãw_´iû
 = 0;

651 ià(
´iû_£Î
 != 0)

652 
Ãw_´iû
 = 
´iû_£Î
;

654 
Ãw_´iû
 = 
¡©ic_ÿ¡
<>(
´iû
 * 
VENDOR_RATIO
);

655 ià(
Ãw_´iû
 == 0)‚ew_price = 1;

657  
Ãw_´iû
;

658 
	}
}

	@ItemManager.h

25 #´agm¨
Úû


26 #iâdeà
ITEM_MANAGER_H


27 
	#ITEM_MANAGER_H


	)

29 
	~"Widg‘ToŞt.h
"

31 
	~<SDL.h
>

32 
	~<SDL_image.h
>

33 
	~<SDL_mix”.h
>

35 
	~<m­
>

36 
	~<¡ršg
>

37 
	~<¡dšt.h
>

38 
	~<veùÜ
>

40 
	#VENDOR_BUY
 0

	)

41 
	#VENDOR_SELL
 1

	)

42 
	#PLAYER_INV
 2

	)

44 
şass
 
	gStBlock
;

46 cÚ¡ 
	gREQUIRES_PHYS
 = 0;

47 cÚ¡ 
	gREQUIRES_MENT
 = 1;

48 cÚ¡ 
	gREQUIRES_OFF
 = 2;

49 cÚ¡ 
	gREQUIRES_DEF
 = 3;

51 cÚ¡ 
	gITEM_QUALITY_LOW
 = 0;

52 cÚ¡ 
	gITEM_QUALITY_NORMAL
 = 1;

53 cÚ¡ 
	gITEM_QUALITY_HIGH
 = 2;

54 cÚ¡ 
	gITEM_QUALITY_EPIC
 = 3;

56 cÚ¡ 
	gITEM_MAX_BONUSES
 = 8;

58 şas 
	cS‘_bÚus
 {

59 
	mpublic
:

60 
»quœem’t
;

61 
	m¡d
::
¡ršg
 
bÚus_¡©
;

62 
	mbÚus_v®
;

63 
	$S‘_bÚus
()

64 : 
	`»quœem’t
(0)

65 , 
	`bÚus_¡©
("")

66 , 
	$bÚus_v®
(0)

68 
	}
};

70 şas 
	cI‹m
 {

71 
	mpublic
:

72 
¡d
::
¡ršg
 
Çme
;

73 
	m¡d
::
¡ršg
 
æavÜ
;

74 
	mËv–
;

75 
	m£t
;

76 
	mqu®™y
;

77 
	m¡d
::
¡ršg
 
ty³
;

78 
	micÚ
;

79 
	mdmg_m–“_mš
;

80 
	mdmg_m–“_max
;

81 
	mdmg_¿nged_mš
;

82 
	mdmg_¿nged_max
;

83 
	mdmg_m’t_mš
;

84 
	mdmg_m’t_max
;

85 
	mabs_mš
;

86 
	mabs_max
;

87 
	m»q_¡©
;

88 
	m»q_v®
;

89 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
bÚus_¡©
;

90 
	m¡d
::
veùÜ
<> 
bÚus_v®
;

91 
	mSoundMªag”
::
SoundID
 
sfx
;

92 
	m¡d
::
¡ršg
 
gfx
;

93 
	m¡d
::
¡ršg
 
loÙ_ªim©iÚ
;

94 
	mpow”
;

95 
	mpow”_mod
;

96 
	m¡d
::
¡ršg
 
pow”_desc
;

97 
	m´iû
;

98 
	m´iû_£Î
;

99 
	mmax_quªt™y
;

100 
	m¿nd_loÙ
;

101 
	m¿nd_v’dÜ
;

102 
	m¡d
::
¡ršg
 
pickup_¡©us
;

103 
	m¡d
::
¡ršg
 
¡•fx
;

105 
g‘S–lPriû
();

107 
	$I‹m
()

108 : 
	`Çme
("")

109 , 
	`æavÜ
("")

110 , 
	`Ëv–
(0)

111 , 
	`£t
(0)

112 , 
	`qu®™y
(
ITEM_QUALITY_NORMAL
)

113 , 
	`ty³
("other")

114 , 
	`icÚ
(0)

115 , 
	`dmg_m–“_mš
(0)

116 , 
	`dmg_m–“_max
(0)

117 , 
	`dmg_¿nged_mš
(0)

118 , 
	`dmg_¿nged_max
(0)

119 , 
	`dmg_m’t_mš
(0)

120 , 
	`dmg_m’t_max
(0)

121 , 
	`abs_mš
(0)

122 , 
	`abs_max
(0)

123 , 
	`»q_¡©
(0)

124 , 
	`»q_v®
(0)

125 , 
	`sfx
(0)

126 , 
	`gfx
("")

127 , 
	`loÙ_ªim©iÚ
("")

128 , 
	`pow”
(0)

129 , 
	`pow”_mod
(0)

130 , 
	`pow”_desc
("")

131 , 
	`´iû
(0)

132 , 
	`´iû_£Î
(0)

133 , 
	`max_quªt™y
(1)

134 , 
	`¿nd_loÙ
(1)

135 , 
	`¿nd_v’dÜ
(1)

136 , 
	`pickup_¡©us
("")

137 , 
	`¡•fx
("")

140 ~
	$I‹m
() {

141 
	}
}

144 şas 
	cI‹mS‘
 {

145 
	mpublic
:

146 
¡d
::
¡ršg
 
Çme
;

147 
	m¡d
::
veùÜ
<> 
™ems
;

148 
	m¡d
::
veùÜ
<
S‘_bÚus
> 
bÚus
;

149 
SDL_CŞÜ
 
	mcŞÜ
;

151 
	$I‹mS‘
()

152 : 
	`Çme
("")

154 
cŞÜ
.
r
 = 255;

155 
cŞÜ
.
g
 = 255;

156 
cŞÜ
.
b
 = 255;

159 ~
	$I‹mS‘
() {

160 
	}
}

163 şas 
	cI‹mSck
 {

164 
	mpublic
:

165 
	$I‹mSck
()

166 : 
	`™em
(0)

167 , 
	$quªt™y
(0)

169 ~
	$I‹mSck
(è{
	}
}

170 
	g™em
;

171 
	gquªt™y
;

172 
boŞ
 
	gİ”©Ü
 > (cÚ¡ 
	gI‹mSck
 &
	g·¿m
) const;

175 şas 
	cI‹mMªag”
 {

176 
	m´iv©e
:

177 
SDL_Surçû
 *
icÚs
;

178 
SDL_Reù
 
	m¤c
;

179 
SDL_Reù
 
	mde¡
;

181 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

182 
lßdTy³s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

183 
lßdS‘s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

184 
lßdAÎ
();

185 
lßdIcÚs
();

187 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

188 
SDL_CŞÜ
 
	mcŞÜ_low
;

189 
SDL_CŞÜ
 
	mcŞÜ_high
;

190 
SDL_CŞÜ
 
	mcŞÜ_•ic
;

191 
SDL_CŞÜ
 
	mcŞÜ_bÚus
;

192 
SDL_CŞÜ
 
	mcŞÜ_³ÇÉy
;

193 
SDL_CŞÜ
 
	mcŞÜ_»quœem’ts_nÙ_m‘
;

194 
SDL_CŞÜ
 
	mcŞÜ_æavÜ
;

196 
	mpublic
:

197 
I‹mMªag”
();

198 ~
I‹mMªag”
();

199 
»nd”IcÚ
(
I‹mSck
 
¡ack
, 
x
, 
y
, 
size
);

200 
¶aySound
(
™em
, 
Pošt
 
pos
 = Point(0,0));

201 
ToŞtD©a
 
g‘ToŞt
(
™em
, 
StBlock
 *
¡©s
, 
cÚ‹xt
);

202 
ToŞtD©a
 
g‘ShÜtToŞt
(
I‹mSck
 
™em
);

203 
	m¡d
::
¡ršg
 
g‘I‹mTy³
(
¡d
::¡ršg 
_ty³
);

205 
	m¡d
::
veùÜ
<
I‹m
> 
™ems
;

206 
	m¡d
::
m­
<
¡d
::
¡ršg
,¡d::¡ršg> 
™em_ty³s
;

207 
	m¡d
::
veùÜ
<
I‹mS‘
> 
™em_£ts
;

209 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
™em_şass_Çmes
;

211 
	m¡d
::
veùÜ
<
¡d
::veùÜ<> > 
™em_şass_™ems
;

	@ItemStorage.cpp

22 
	~"I‹mMªag”.h
"

23 
	~"I‹mStÜage.h
"

24 
	~"UtsP¬sšg.h
"

26 
	~<s¡»am
>

28 
usšg
 
Çme¥aû
 
	g¡d
;

31 
	gI‹mStÜage
::
	$š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
) {

32 
¦Ù_numb”
 = 
_¦Ù_numb”
;

33 
™ems
 = 
_™ems
;

35 
¡Üage
 = 
Ãw
 
I‹mSck
[
¦Ù_numb”
];

37  
i
=0; i<
¦Ù_numb”
; i++) {

38 
¡Üage
[
i
].
™em
 = 0;

39 
¡Üage
[
i
].
quªt™y
 = 0;

41 
	}
}

43 
	gI‹mSck
 & 
	gI‹mStÜage
::
İ”©Ü
 [] (
¦Ù
) {

44  
¡Üage
[
¦Ù
];

50 
	gI‹mStÜage
::
	$£tI‹ms
(
¡ršg
 
s
) {

51 
s
 = s + ',';

52 
i
=0; i<
¦Ù_numb”
; i++) {

53 
¡Üage
[
i
].
™em
 = 
	`—tFœ¡IÁ
(
s
, ',');

55 ià(
¡Üage
[
i
].
™em
 < 0) {

56 
	`årštf
(
¡d”r
, "I‹m oÀpos™iÚ %d ha Ãg©ivid, skpšg\n", 
i
);

57 
¡Üage
[
i
].
™em
 = 0;

58 
¡Üage
[
i
].
quªt™y
 = 0;

60 ià(()
¡Üage
[
i
].
™em
 > 
™ems
->™ems.
	`size
()-1) {

61 
	`årštf
(
¡d”r
, "I‹m id (%dèouˆoàbound 1-%d, skpšg\n", 
¡Üage
[
i
].
™em
, ()
™ems
->™ems.
	`size
());

62 
¡Üage
[
i
].
™em
 = 0;

63 
¡Üage
[
i
].
quªt™y
 = 0;

65 ià(
¡Üage
[
i
].
™em
 !ğ0 && 
™ems
->™ems[¡Üage[i].™em].
Çme
 == "") {

66 
	`årštf
(
¡d”r
, "I‹m w™h id=%d. found oÀpos™iÚ %d dÛ nÙƒxi¡, skpšg\n", 
¡Üage
[
i
].
™em
, i);

67 
¡Üage
[
i
].
™em
 = 0;

68 
¡Üage
[
i
].
quªt™y
 = 0;

71 
	}
}

76 
	gI‹mStÜage
::
	$£tQuªt™›s
(
¡ršg
 
s
) {

77 
s
 = s + ',';

78 
i
=0; i<
¦Ù_numb”
; i++) {

79 
¡Üage
[
i
].
quªt™y
 = 
	`—tFœ¡IÁ
(
s
, ',');

80 ià(
¡Üage
[
i
].
quªt™y
 < 0) {

81 
	`årštf
(
¡d”r
, "I‹m quªt™y oÀpos™iÚ %d i Ãg©ive, s‘tšgØz”o\n", 
i
);

82 
¡Üage
[
i
].
quªt™y
 = 0;

85 
	}
}

87 
	gI‹mStÜage
::
	$g‘SlÙNumb”
() {

88  
¦Ù_numb”
;

89 
	}
}

94 
¡ršg
 
	gI‹mStÜage
::
	$g‘I‹ms
() {

95 
¡ršg¡»am
 
ss
;

96 
ss
.
	`¡r
("");

97 
i
=0; i<
¦Ù_numb”
; i++) {

98 
ss
 << 
¡Üage
[
i
].
™em
;

99 ià(
i
 < 
¦Ù_numb”
-1è
ss
 << ',';

101  
ss
.
	`¡r
();

102 
	}
}

107 
¡ršg
 
	gI‹mStÜage
::
	$g‘Quªt™›s
() {

108 
¡ršg¡»am
 
ss
;

109 
ss
.
	`¡r
("");

110 
i
=0; i<
¦Ù_numb”
; i++) {

111 
ss
 << 
¡Üage
[
i
].
quªt™y
;

112 ià(
i
 < 
¦Ù_numb”
-1è
ss
 << ',';

114  
ss
.
	`¡r
();

115 
	}
}

117 
	gI‹mStÜage
::
	$ş—r
() {

118  
i
=0; i<
¦Ù_numb”
; i++) {

119 
¡Üage
[
i
].
™em
 = 0;

120 
¡Üage
[
i
].
quªt™y
 = 0;

122 
	}
}

130 
	gI‹mStÜage
::
	$add
Ğ
I‹mSck
 
¡ack
, 
¦Ù
) {

132 ià(
¡ack
.
™em
 != 0) {

133 
max_quªt™y
 = 
™ems
->™ems[
¡ack
.
™em
].max_quantity;

134 ià(
¦Ù
 > -1) {

136 ià(
¡Üage
[
¦Ù
].
™em
 !ğ0 && stÜage[¦Ù].™em !ğ
¡ack
.item) {

138 
¦Ù
 = -1;

142 
i
 = 0;

143 
max_quªt™y
 > 1 && 
¦Ù
 =ğ-1 && 
i
 < 
¦Ù_numb”
) {

144 ià(
¡Üage
[
i
].
™em
 =ğ
¡ack
.™em && stÜage[i].
quªt™y
 < 
max_quªt™y
) {

145 
¦Ù
 = 
i
;

147 
i
++;

150 
i
 = 0;

151 
¦Ù
 =ğ-1 && 
i
 < 
¦Ù_numb”
) {

152 ià(
¡Üage
[
i
].
™em
 == 0) {

153 
¦Ù
 = 
i
;

155 
i
++;

158 ià(
¦Ù
 != -1) {

160 
quªt™y_added
 = 
	`mš
Ğ
¡ack
.
quªt™y
, 
max_quªt™y
 - 
¡Üage
[
¦Ù
].quantity);

161 
¡Üage
[
¦Ù
].
™em
 = 
¡ack
.item;

162 
¡Üage
[
¦Ù
].
quªt™y
 +ğ
quªt™y_added
;

163 
¡ack
.
quªt™y
 -ğ
quªt™y_added
;

165 ià(
¡ack
.
quªt™y
 > 0) {

166 
	`add
Ğ
¡ack
);

173 
	}
}

180 
	gI‹mStÜage
::
	$sub¡¿ù
(
¦Ù
, 
quªt™y
) {

181 
¡Üage
[
¦Ù
].
quªt™y
 -= quantity;

182 ià(
¡Üage
[
¦Ù
].
quªt™y
 <= 0) {

183 
¡Üage
[
¦Ù
].
™em
 = 0;

185 
	}
}

190 
boŞ
 
	gI‹mStÜage
::
	$»move
(
™em
) {

191 
i
=0; i<
¦Ù_numb”
; i++) {

192 ià(
¡Üage
[
i
].
™em
 == item) {

193 
	`sub¡¿ù
(
i
, 1);

194  
Œue
;

197  
çl£
;

198 
	}
}

200 
	$com·»I‹mSck
 (cÚ¡ *
a
, cÚ¡ *
b
)

202 cÚ¡ 
I‹mSck
 *
i1
 = 
¡©ic_ÿ¡
<cÚ¡ I‹mSck*>(
a
);

203 cÚ¡ 
I‹mSck
 *
i2
 = 
¡©ic_ÿ¡
<cÚ¡ I‹mSck*>(
b
);

204 ià((*
i1
è> (*
i2
))

208 
	}
}

210 
	gI‹mStÜage
::
	$sÜt
() {

211 
	`qsÜt
(
¡Üage
, 
¦Ù_numb”
, (
I‹mSck
), 
com·»I‹mSck
);

212 
	}
}

214 
boŞ
 
	gI‹mStÜage
::
	$fuÎ
(
™em
) {

215 
i
=0; i<
¦Ù_numb”
; i++) {

216 ià(
¡Üage
[
i
].
™em
 =ğ™em && 
™ems
->™ems[™em].
max_quªt™y
 > 1) {

217  
çl£
;

219 ià(
¡Üage
[
i
].
™em
 == 0) {

220  
çl£
;

223  
Œue
;

224 
	}
}

229 
	gI‹mStÜage
::
	$couÁ
(
™em
) {

230 
™em_couÁ
=0;

231 
i
=0; i<
¦Ù_numb”
; i++) {

232 ià(
¡Üage
[
i
].
™em
 == item) {

233 
™em_couÁ
 +ğ
¡Üage
[
i
].
quªt™y
;

236  
™em_couÁ
;

237 
	}
}

242 
boŞ
 
	gI‹mStÜage
::
	$cÚš
(
™em
) {

243 
i
=0; i<
¦Ù_numb”
; i++) {

244 ià(
¡Üage
[
i
].
™em
 == item)

245  
Œue
;

247  
çl£
;

248 
	}
}

250 
	gI‹mStÜage
::~
	$I‹mStÜage
() {

251 
d–‘e
[] 
¡Üage
;

252 
	}
}

	@ItemStorage.h

23 #´agm¨
Úû


24 #iâdeà
ITEM_STORAGE_H


25 
	#ITEM_STORAGE_H


	)

27 
	~<SDL.h
>

29 
şass
 
	gI‹mMªag”
;

30 
şass
 
	gI‹mSck
;

32 şas 
	cI‹mStÜage
 {

33 
	m´Ùeùed
:

34 
I‹mMªag”
 *
™ems
;

35 
	m¦Ù_numb”
;

37 
	mpublic
:

38 
š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
);

39 ~
I‹mStÜage
();

41 
	mI‹mSck
 & 
	mİ”©Ü
 [] (
	m¦Ù
);

43 
£tI‹ms
(
¡d
::
¡ršg
 
s
);

44 
£tQuªt™›s
(
¡d
::
¡ršg
 
s
);

45 
g‘SlÙNumb”
();

46 
	m¡d
::
¡ršg
 
g‘I‹ms
();

47 
	m¡d
::
¡ršg
 
g‘Quªt™›s
();

48 
add
(
I‹mSck
 
¡ack
, 
¦Ù
 = -1);

49 
sub¡¿ù
(
¦Ù
, 
quªt™y
 = 1);

50 
boŞ
 
»move
(
™em
);

51 
sÜt
();

52 
ş—r
();

54 
boŞ
 
fuÎ
(
™em
);

55 
couÁ
(
™em
);

56 
boŞ
 
cÚš
(
™em
);

58 
I‹mSck
 * 
	m¡Üage
;

	@Loot.cpp

19 
	~"LoÙ.h
"

21 
	gLoÙ
::
	$LoÙ
() {

22 
¡ack
.
™em
 = 0;

23 
¡ack
.
quªt™y
 = 0;

24 
pos
.
x
 = 0;

25 
pos
.
y
 = 0;

26 
ªim©iÚ
 = 
NULL
;

27 
cu¼’cy
 = 0;

28 
t
.
	`ş—r
();

29 
gfx
 = "";

30 
	}
}

32 
	gLoÙ
::
	$LoÙ
(cÚ¡ 
LoÙ
 &
Ùh”
) {

33 
¡ack
.
™em
 = 
Ùh”
.stack.item;

34 
¡ack
.
quªt™y
 = 
Ùh”
.stack.quantity;

35 
pos
.
x
 = 
Ùh”
.pos.x;

36 
pos
.
y
 = 
Ùh”
.pos.y;

37 
	`lßdAnim©iÚ
(
Ùh”
.
gfx
);

38 
ªim©iÚ
->
	`syncTo
(
Ùh”
.animation);

39 
cu¼’cy
 = 
Ùh”
.currency;

40 
t
 = 
Ùh”
.tip;

41 
	}
}

45 
	gLoÙ
& LoÙ::
İ”©Ü
ğ(cÚ¡ 
LoÙ
 &
Ùh”
) {

46 ià(
gfx
 != "")

47 
ªim
->
deü—£CouÁ
(
gfx
);

48 
d–‘e
 
	gªim©iÚ
;

50 
lßdAnim©iÚ
(
Ùh”
.
gfx
);

51 
	gªim©iÚ
->
syncTo
(
Ùh”
.
ªim©iÚ
);

53 
	g¡ack
.
	g™em
 = 
Ùh”
.
¡ack
.
™em
;

54 
	g¡ack
.
	gquªt™y
 = 
Ùh”
.
¡ack
.
quªt™y
;

55 
	gpos
.
	gx
 = 
Ùh”
.
pos
.
x
;

56 
	gpos
.
	gy
 = 
Ùh”
.
pos
.
y
;

57 
	gcu¼’cy
 = 
Ùh”
.
cu¼’cy
;

58 
	gt
 = 
Ùh”
.
t
;

60  *
	gthis
;

63 
	gLoÙ
::
lßdAnim©iÚ
(
¡d
::
¡ršg
 
_gfx
) {

64 
gfx
 = 
_gfx
;

65 ià(
	ggfx
 != "") {

66 
ªim
->
šü—£CouÁ
(
gfx
);

67 
Anim©iÚS‘
 *
	gas
 = 
ªim
->
g‘Anim©iÚS‘
(
gfx
);

68 
	gªim©iÚ
 = 
as
->
g‘Anim©iÚ
();

72 
boŞ
 
	gLoÙ
::
	$isFlyšg
() {

73  !
ªim©iÚ
->
	`isLa¡F¿me
();

74 
	}
}

76 
	gLoÙ
::~
	$LoÙ
() {

77 ià(
gfx
 != "")

78 
ªim
->
	`deü—£CouÁ
(
gfx
);

79 
d–‘e
 
ªim©iÚ
;

80 
	}
}

	@Loot.h

19 #´agm¨
Úû


20 #iâdeà
LOOT_H


21 
	#LOOT_H


	)

23 
	~<io¡»am
>

24 
	~"I‹mMªag”.h
"

25 
	~"S‘tšgs.h
"

27 şas 
	cLoÙ
 {

28 
	m´iv©e
:

29 
¡d
::
¡ršg
 
gfx
;

31 
	mpublic
:

32 
I‹mSck
 
¡ack
;

33 
Pošt
 
	mpos
;

34 
Anim©iÚ
 *
	mªim©iÚ
;

35 
	mcu¼’cy
;

36 
ToŞtD©a
 
	mt
;

38 
LoÙ
();

39 
LoÙ
(cÚ¡ LoÙ &
Ùh”
);

40 
	mLoÙ
& 
	mİ”©Ü
ğ(cÚ¡ 
LoÙ
 &
Ùh”
);

41 ~
LoÙ
();

43 
lßdAnim©iÚ
(
¡d
::
¡ršg
 
_gfx
);

49 
boŞ
 
isFlyšg
();

	@LootManager.cpp

26 
	~"Anim©iÚ.h
"

27 
	~"Anim©iÚS‘.h
"

28 
	~"Anim©iÚMªag”.h
"

30 
	~"EÃmyMªag”.h
"

31 
	~"FeP¬£r.h
"

32 
	~"LoÙMªag”.h
"

33 
	~"M’u.h
"

34 
	~"M’uInv’tÜy.h
"

35 
	~"Sh¬edResourûs.h
"

36 
	~"UtsP¬sšg.h
"

37 
	~"UtsM©h.h
"

38 
	~"Uts.h
"

40 
	~<s¡»am
>

41 
	~<io¡»am
>

42 
	~<lim™s
>

44 
usšg
 
Çme¥aû
 
	g¡d
;

46 
LoÙMªag”
 *
	gloÙMªag”
 = 0;

47 
LoÙMªag”
 *
	gLoÙMªag”
::
	$g‘In¡ªû
() {

48  
loÙMªag”
;

49 
	}
}

51 
	gLoÙMªag”
::
	$LoÙMªag”
(
I‹mMªag”
 *
_™ems
, 
M­R’d””
 *
_m­
, 
StBlock
 *
_h”o
) {

52 
™ems
 = 
_™ems
;

53 
m­
 = 
_m­
;

54 
h”o
 = 
_h”o
;

56 
t
 = 
Ãw
 
	`Widg‘ToŞt
();

58 
FeP¬£r
 
šfe
;

60 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/loÙ.txt").
	`c_¡r
())) {

61 
šfe
.
	`Ãxt
()) {

62 
šfe
.
v®
 = infile.val + ',';

64 ià(
šfe
.
key
 == "loot_animation") {

65 
ªim©iÚ_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

66 
ªim©iÚ_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

67 
ªim©iÚ_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

68 
ªim©iÚ_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

69 } ià(
šfe
.
key
 == "loot_animation_offset") {

70 
ªim©iÚ_off£t
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

71 
ªim©iÚ_off£t
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

72 } ià(
šfe
.
key
 == "tooltip_margin") {

73 
toŞt_m¬gš
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

74 } ià(
šfe
.
key
 == "autopickup_range") {

75 
AUTOPICKUP_RANGE
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

76 } ià(
šfe
.
key
 == "autopickup_currency") {

77 
cu¼’cy
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

78 ià(
cu¼’cy
 == 1)

79 
AUTOPICKUP_CURRENCY
 = 
Œue
;

81 
AUTOPICKUP_CURRENCY
 = 
çl£
;

82 } ià(
šfe
.
key
 == "currency_name") {

83 
CURRENCY
 = 
msg
->
	`g‘
(
	`—tFœ¡SŒšg
(
šfe
.
v®
, ','));

84 } ià(
šfe
.
key
 == "vendor_ratio") {

85 
VENDOR_RATIO
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',') / 100.0f;

86 } ià(
šfe
.
key
 == "currency_range") {

87 
Cu¼’cyRªge
 
ü
;

88 
ü
.
f’ame
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
, ',');

89 
ü
.
low
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

90 
ü
.
high
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

91 
cu¼’cy_¿nge
.
	`push_back
(
ü
);

92 } ià(
šfe
.
key
 == "sfx_loot") {

93 
sfx_loÙ
 = 
¢d
->
	`lßd
(
	`—tFœ¡SŒšg
(
šfe
.
v®
, ','), "LootManager dropping†oot");

94 } ià(
šfe
.
key
 == "sfx_currency") {

95 
sfx_cu¼’cy
 = 
¢d
->
	`lßd
(
	`—tFœ¡SŒšg
(
šfe
.
v®
, ','), "LootManager currency");

98 
šfe
.
	`şo£
();

99 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/loot.txt!\n");

102 
loÙ
.
	`ş—r
();

104 
	`lßdG¿phics
();

106 
fuÎ_msg
 = 
çl£
;

108 ià(!
loÙMªag”
)

109 
loÙMªag”
 = 
this
;

111 
	`ex™
(25);

113 
	}
}

119 
	gLoÙMªag”
::
	$lßdG¿phics
() {

122 
i
=0; i < 
™ems
->™ems.
	`size
(); i++) {

123 
¡ršg
 
ªim_id
 = 
™ems
->™ems[
i
].
loÙ_ªim©iÚ
;

124 ià(
ªim_id
 == "") ;

126 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
ªim_id
 + ".txt";

127 
ªim
->
	`šü—£CouÁ
(
ªim©iÚÇme
);

131 
i
=0; i<
cu¼’cy_¿nge
.
	`size
(); i++) {

132 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
cu¼’cy_¿nge
[
i
].
f’ame
 + ".txt";

133 
ªim
->
	`šü—£CouÁ
(
ªim©iÚÇme
);

135 
	}
}

137 
	gLoÙMªag”
::
	$hªdËNewM­
() {

138 
loÙ
.
	`ş—r
();

139 
	}
}

141 
	gLoÙMªag”
::
	$logic
() {

142 
veùÜ
<
LoÙ
>::
™”©Ü
 
™
;

143 
™
 = 
loÙ
.
	`begš
(); iˆ!ğloÙ.
	`’d
(); ++it) {

146 
™
->
ªim©iÚ
->
	`advªûF¿me
();

148 ià(
™
->
ªim©iÚ
->
	`isSecÚdLa¡F¿me
()) {

149 ià(
™
->
¡ack
.
™em
 > 0)

150 
™ems
->
	`¶aySound
(
™
->
¡ack
.
™em
, it->
pos
);

152 
	`¶ayCu¼’cySound
(
™
->
pos
);

156 
	`checkEÃm›sFÜLoÙ
();

157 
	`checkM­FÜLoÙ
();

158 
	}
}

163 
	gLoÙMªag”
::
	$»nd”ToŞts
(
Pošt
 
ÿm
) {

164 
Pošt
 
de¡
;

165 
¡ršg¡»am
 
ss
;

167 
veùÜ
<
LoÙ
>::
™”©Ü
 
™
;

168 
™
 = 
loÙ
.
	`begš
(); iˆ!ğloÙ.
	`’d
(); ++it) {

169 ià(
™
->
ªim©iÚ
->
	`isLa¡F¿me
()) {

170 
Pošt
 
p
 = 
	`m­_to_sü“n
(
™
->
pos
.
x
, it->pos.
y
, 
ÿm
.x, cam.y);

171 
de¡
.
x
 = 
p
.x;

172 
de¡
.
y
 = 
p
.y + 
TILE_H_HALF
;

175 
de¡
.
y
 -ğ
toŞt_m¬gš
;

178 ià(
™
->
t
.
	`isEm±y
()) {

180 ià(
™
->
¡ack
.
™em
 > 0) {

181 
™
->
t
 = 
™ems
->
	`g‘ShÜtToŞt
(™->
¡ack
);

184 
ss
.
	`¡r
("");

185 
ss
 << 
msg
->
	`g‘
("%d %s", 
™
->
cu¼’cy
, 
CURRENCY
);

186 
™
->
t
.
	`addText
(
ss
.
	`¡r
());

190 
t
->
	`»nd”
(
™
->t, 
de¡
, 
STYLE_TOPLABEL
);

193 
	}
}

199 
	gLoÙMªag”
::
	$checkEÃm›sFÜLoÙ
() {

200 
I‹mSck
 
i¡ack
;

201 
i¡ack
.
quªt™y
 = 1;

203 
i
=0; i < 
’em›sDrİpšgLoÙ
.
	`size
(); ++i) {

204 cÚ¡ 
EÃmy
 *
e
 = 
’em›sDrİpšgLoÙ
[
i
];

205 ià(
e
->
¡©s
.
que¡_loÙ_id
 != 0) {

207 
i¡ack
.
™em
 = 
e
->
¡©s
.
que¡_loÙ_id
;

208 
	`addLoÙ
(
i¡ack
, 
e
->
¡©s
.
pos
);

212 
Pošt
 
pos
 = 
h”o
->pos;

213 ià(
m­
->
cŞlid”
.
	`is_v®id_pos™iÚ
(
e
->
¡©s
.
pos
.
x
,ƒ->¡©s.pos.
y
, 
MOVEMENT_NORMAL
))

214 
pos
 = 
e
->
¡©s
.pos;

216 
	`d‘”mšeLoÙByEÃmy
(
e
, 
pos
);

219 
’em›sDrİpšgLoÙ
.
	`ş—r
();

220 
	}
}

222 
	gLoÙMªag”
::
	$addEÃmyLoÙ
(cÚ¡ 
EÃmy
 *
e
) {

223 
’em›sDrİpšgLoÙ
.
	`push_back
(
e
);

224 
	}
}

230 
	gLoÙMªag”
::
	$checkM­FÜLoÙ
() {

231 
Pošt
 
p
;

232 
Ev’t_CompÚ’t
 *
ec
;

233 
I‹mSck
 
Ãw_loÙ
;

234 
¡d
::
veùÜ
<> 
possibË_ids
;

235 
commÚ_chªû
 = -1;

237 
chªû
 = 
	`¿nd
() % 100;

240 
i
 = 
m­
->
loÙ
.
	`size
(); i > 0; i--) {

241 
ec
 = &
m­
->
loÙ
[
i
-1];

242 ià(
ec
->
z
 == 0) {

243 
p
.
x
 = 
ec
->x;

244 
p
.
y
 = 
ec
->y;

247 ià(
ec
->
s
 =ğ"cu¼’cy" || 
	`toIÁ
(ec->s) == 0) {

248 
	`addCu¼’cy
(
	`¿ndB‘w“n
(
ec
->
a
,ec->
b
), 
p
);

250 
Ãw_loÙ
.
™em
 = 
	`toIÁ
(
ec
->
s
);

251 
Ãw_loÙ
.
quªt™y
 = 
	`¿ndB‘w“n
(
ec
->
a
,ec->
b
);

252 
	`addLoÙ
(
Ãw_loÙ
, 
p
);

255 
m­
->
loÙ
.
	`”a£
(m­->loÙ.
	`begš
()+
i
-1);

260 
i
 = 
m­
->
loÙ
.
	`size
(); i > 0; i--) {

261 
ec
 = &
m­
->
loÙ
[
i
-1];

263 ià(
possibË_ids
.
	`em±y
()) {

265 ià(
chªû
 < (
ec
->
z
 * (
h”o
->
efãùs
.
bÚus_™em_fšd
 + 100)) / 100) {

266 
possibË_ids
.
	`push_back
(
i
-1);

267 
commÚ_chªû
 = 
ec
->
z
;

268 
i
=
m­
->
loÙ
.
	`size
();

273 ià(
ec
->
z
 =ğ
commÚ_chªû
)

274 
possibË_ids
.
	`push_back
(
i
-1);

277 ià(!
possibË_ids
.
	`em±y
()) {

279 
cho£n_loÙ
 = 0;

280 ià(
possibË_ids
.
	`size
(è> 1è
cho£n_loÙ
 = 
	`¿nd
() %…ossible_ids.size();

282 
ec
 = &
m­
->
loÙ
[
cho£n_loÙ
];

283 
p
.
x
 = 
ec
->x;

284 
p
.
y
 = 
ec
->y;

287 ià(
ec
->
s
 =ğ"cu¼’cy" || 
	`toIÁ
(ec->s) == 0) {

288 
	`addCu¼’cy
(
	`¿ndB‘w“n
(
ec
->
a
,ec->
b
), 
p
);

290 
Ãw_loÙ
.
™em
 = 
	`toIÁ
(
ec
->
s
);

291 
Ãw_loÙ
.
quªt™y
 = 
	`¿ndB‘w“n
(
ec
->
a
,ec->
b
);

292 
	`addLoÙ
(
Ãw_loÙ
, 
p
);

296 
m­
->
loÙ
.
	`ş—r
();

297 
	}
}

303 
	gLoÙMªag”
::
	$d‘”mšeLoÙByEÃmy
(cÚ¡ 
EÃmy
 *
e
, 
Pošt
 
pos
) {

304 
I‹mSck
 
Ãw_loÙ
;

305 
¡d
::
veùÜ
<> 
possibË_ids
;

306 
¡d
::
veùÜ
<
Pošt
> 
possibË_¿nges
;

307 
Pošt
 
¿nge
;

308 
commÚ_chªû
 = -1;

310 
chªû
 = 
	`¿nd
() % 100;

312 
i
=0; i<
e
->
¡©s
.
loÙ
.
	`size
(); i++) {

313 ià(
possibË_ids
.
	`em±y
()) {

315 ià(
chªû
 < (
e
->
¡©s
.
loÙ
[
i
].chªû * (
h”o
->
efãùs
.
bÚus_™em_fšd
 + 100)) / 100) {

316 
possibË_ids
.
	`push_back
(
e
->
¡©s
.
loÙ
[
i
].
id
);

317 
commÚ_chªû
 = 
e
->
¡©s
.
loÙ
[
i
].
chªû
;

319 
¿nge
.
x
 = 
e
->
¡©s
.
loÙ
[
i
].
couÁ_mš
;

320 
¿nge
.
y
 = 
e
->
¡©s
.
loÙ
[
i
].
couÁ_max
;

321 
possibË_¿nges
.
	`push_back
(
¿nge
);

323 
i
=-1;

328 ià(
e
->
¡©s
.
loÙ
[
i
].
chªû
 =ğ
commÚ_chªû
) {

329 
possibË_ids
.
	`push_back
(
e
->
¡©s
.
loÙ
[
i
].
id
);

331 
¿nge
.
x
 = 
e
->
¡©s
.
loÙ
[
i
].
couÁ_mš
;

332 
¿nge
.
y
 = 
e
->
¡©s
.
loÙ
[
i
].
couÁ_max
;

333 
possibË_¿nges
.
	`push_back
(
¿nge
);

339 ià(!
possibË_ids
.
	`em±y
()) {

341 
rŞl
 = 
	`¿nd
(è% 
possibË_ids
.
	`size
();

342 
Ãw_loÙ
.
™em
 = 
possibË_ids
[
rŞl
];

343 
Ãw_loÙ
.
quªt™y
 = 
	`¿ndB‘w“n
(
possibË_¿nges
[
rŞl
].
x
,…ossibË_¿nges[rŞl].
y
);

346 ià(
Ãw_loÙ
.
™em
 == 0) {

349 
cu¼’cy
 = 
Ãw_loÙ
.
quªt™y
;

350 
cu¼’cy
 = (cu¼’cy * (100 + 
h”o
->
efãùs
.
bÚus_cu¼’cy
)) / 100;

352 
	`addCu¼’cy
(
cu¼’cy
, 
pos
);

354 
	`addLoÙ
(
Ãw_loÙ
, 
pos
);

357 
	}
}

359 
	gLoÙMªag”
::
	$addLoÙ
(
I‹mSck
 
¡ack
, 
Pošt
 
pos
) {

361 
LoÙ
 
ld
;

362 
ld
.
¡ack
 = stack;

363 
ld
.
pos
.
x
 =…os.x;

364 
ld
.
pos
.
y
 =…os.y;

366 cÚ¡ 
¡ršg
 
ªim_id
 = 
™ems
->™ems[
¡ack
.
™em
].
loÙ_ªim©iÚ
;

367 cÚ¡ 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
ªim_id
 + ".txt";

368 
ld
.
	`lßdAnim©iÚ
(
ªim©iÚÇme
);

369 
ld
.
cu¼’cy
 = 0;

370 
loÙ
.
	`push_back
(
ld
);

371 
¢d
->
	`¶ay
(
sfx_loÙ
, 
GLOBAL_VIRTUAL_CHANNEL
, 
pos
, 
çl£
);

372 
	}
}

374 
	gLoÙMªag”
::
	$addCu¼’cy
(
couÁ
, 
Pošt
 
pos
) {

375 
LoÙ
 
ld
;

376 
ld
.
¡ack
.
™em
 = 0;

377 
ld
.
¡ack
.
quªt™y
 = 0;

378 
ld
.
pos
.
x
 =…os.x;

379 
ld
.
pos
.
y
 =…os.y;

381 
šdex
 = 
cu¼’cy_¿nge
.
	`size
()-1;

382 
i
=0; i<
cu¼’cy_¿nge
.
	`size
(); i++) {

383 ià(
couÁ
 >ğ
cu¼’cy_¿nge
[
i
].
low
 && (couÁ <ğcu¼’cy_¿nge[i].
high
 || currency_range[i].high == -1)) {

384 
šdex
 = 
i
;

388 cÚ¡ 
¡ršg
 
ªim_id
 = 
cu¼’cy_¿nge
[
šdex
].
f’ame
;

389 cÚ¡ 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
ªim_id
 + ".txt";

390 
ld
.
	`lßdAnim©iÚ
(
ªim©iÚÇme
);

392 
ld
.
cu¼’cy
 = 
couÁ
;

393 
loÙ
.
	`push_back
(
ld
);

394 
¢d
->
	`¶ay
(
sfx_loÙ
, 
GLOBAL_VIRTUAL_CHANNEL
, 
pos
, 
çl£
);

395 
	}
}

402 
I‹mSck
 
	gLoÙMªag”
::
	$checkPickup
(
Pošt
 
mou£
, Pošˆ
ÿm
, Pošˆ
h”o_pos
, &
cu¼’cy
, 
M’uInv’tÜy
 *
šv
) {

403 
Pošt
 
p
;

404 
SDL_Reù
 
r
;

405 
I‹mSck
 
loÙ_¡ack
;

406 
cu¼’cy
 = 0;

407 
loÙ_¡ack
.
™em
 = 0;

408 
loÙ_¡ack
.
quªt™y
 = 0;

413 
veùÜ
<
LoÙ
>::
™”©Ü
 
™
;

414 
™
 = 
loÙ
.
	`’d
(); iˆ!ğloÙ.
	`begš
(); ) {

415 --
™
;

418 ià(
	`abs
(
h”o_pos
.
x
 - 
™
->
pos
.xè< 
LOOT_RANGE
 &&‡bs(h”o_pos.
y
 - it->pos.yè< LOOT_RANGE && !™->
	`isFlyšg
()) {

420 
p
 = 
	`m­_to_sü“n
(
™
->
pos
.
x
, it->pos.
y
, 
ÿm
.x, cam.y);

422 
r
.
w
 = 32;

423 
r
.
h
 = 48;

424 
r
.
x
 = 
p
.x - 16;

425 
r
.
y
 = 
p
.y - 32;

428 ià(
mou£
.
x
 > 
r
.x && mou£.x <„.x+r.
w
 &&

429 
mou£
.
y
 > 
r
.y && mou£.y <„.y+r.
h
) {

431 ià(
™
->
¡ack
.
™em
 > 0 && !(
šv
->
	`fuÎ
(it->stack.item))) {

432 
loÙ_¡ack
 = 
™
->
¡ack
;

433 
™
 = 
loÙ
.
	`”a£
(it);

434  
loÙ_¡ack
;

436 ià(
™
->
¡ack
.
™em
 > 0) {

437 
fuÎ_msg
 = 
Œue
;

439 ià(
™
->
cu¼’cy
 > 0) {

440 
cu¼’cy
 = 
™
->currency;

441 
™
 = 
loÙ
.
	`”a£
(it);

443  
loÙ_¡ack
;

448  
loÙ_¡ack
;

449 
	}
}

455 
I‹mSck
 
	gLoÙMªag”
::
	$checkAutoPickup
(
Pošt
 
h”o_pos
, &
cu¼’cy
) {

456 
I‹mSck
 
loÙ_¡ack
;

457 
cu¼’cy
 = 0;

458 
loÙ_¡ack
.
™em
 = 0;

459 
loÙ_¡ack
.
quªt™y
 = 0;

461 
veùÜ
<
LoÙ
>::
™”©Ü
 
™
;

462 
™
 = 
loÙ
.
	`’d
(); iˆ!ğloÙ.
	`begš
(); ) {

463 --
™
;

464 ià(
	`abs
(
h”o_pos
.
x
 - 
™
->
pos
.xè< 
AUTOPICKUP_RANGE
 &&‡bs(h”o_pos.
y
 - it->pos.yè< AUTOPICKUP_RANGE && !™->
	`isFlyšg
()) {

465 ià(
™
->
cu¼’cy
 > 0 && 
AUTOPICKUP_CURRENCY
) {

466 
cu¼’cy
 = 
™
->currency;

467 
™
 = 
loÙ
.
	`”a£
(it);

468  
loÙ_¡ack
;

472  
loÙ_¡ack
;

473 
	}
}

475 
I‹mSck
 
	gLoÙMªag”
::
	$checkN—»¡Pickup
(
Pošt
 
h”o_pos
, &
cu¼’cy
, 
M’uInv’tÜy
 *
šv
) {

476 
I‹mSck
 
loÙ_¡ack
;

477 
cu¼’cy
 = 0;

478 
loÙ_¡ack
.
™em
 = 0;

479 
loÙ_¡ack
.
quªt™y
 = 0;

481 
be¡_di¡ªû
 = 
¡d
::
num”ic_lim™s
<>::
	`max
();

483 
veùÜ
<
LoÙ
>::
™”©Ü
 
™
;

484 
veùÜ
<
LoÙ
>::
™”©Ü
 
Ã¬e¡
;

486 
™
 = 
loÙ
.
	`’d
(); iˆ!ğloÙ.
	`begš
(); ) {

487 --
™
;

489 
di¡ªû
 = ()
	`ÿlcDi¡
(
h”o_pos
,
™
->
pos
);

490 ià(
di¡ªû
 < 
LOOT_RANGE
 && di¡ªû < 
be¡_di¡ªû
) {

491 
be¡_di¡ªû
 = 
di¡ªû
;

492 
Ã¬e¡
 = 
™
;

496 ià(&(*
Ã¬e¡
è!ğ
NULL
) {

497 ià(
Ã¬e¡
->
¡ack
.
™em
 > 0 && !(
šv
->
	`fuÎ
(nearest->stack.item))) {

498 
loÙ_¡ack
 = 
Ã¬e¡
->
¡ack
;

499 
loÙ
.
	`”a£
(
Ã¬e¡
);

500  
loÙ_¡ack
;

502 ià(
Ã¬e¡
->
¡ack
.
™em
 > 0) {

503 
fuÎ_msg
 = 
Œue
;

505 ià(
Ã¬e¡
->
cu¼’cy
 > 0) {

506 
cu¼’cy
 = 
Ã¬e¡
->currency;

507 
loÙ
.
	`”a£
(
Ã¬e¡
);

509  
loÙ_¡ack
;

513  
loÙ_¡ack
;

514 
	}
}

516 
	gLoÙMªag”
::
addR’d”s
(
veùÜ
<
R’d”abË
> &
»n
, veùÜ<R’d”abË> &
»n_d—d
) {

517 
	gveùÜ
<
	gLoÙ
>::
™”©Ü
 
™
;

518 
	g™
 = 
loÙ
.
begš
(); iˆ!ğloÙ.
’d
(); ++it) {

519 
R’d”abË
 
	gr
 = 
™
->
ªim©iÚ
->
g‘Cu¼’tF¿me
(0);

520 
	gr
.
	gm­_pos
.
	gx
 = 
™
->
pos
.
x
;

521 
	gr
.
	gm­_pos
.
	gy
 = 
™
->
pos
.
y
;

523 (
	g™
->
	gªim©iÚ
->
isLa¡F¿me
(è? 
	g»n_d—d
 : 
»n
).
push_back
(
r
);

527 
	gLoÙMªag”
::
	$¶ayCu¼’cySound
(
Pošt
 
pos
) {

528 
¢d
->
	`¶ay
(
sfx_cu¼’cy
, 
GLOBAL_VIRTUAL_CHANNEL
, 
pos
, 
çl£
);

529 
	}
}

531 
	gLoÙMªag”
::~
	$LoÙMªag”
() {

533 
i
=0; i < 
™ems
->™ems.
	`size
(); i++) {

534 
¡ršg
 
ªim_id
 = 
™ems
->™ems[
i
].
loÙ_ªim©iÚ
;

535 ià(
ªim_id
 == "") ;

536 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
ªim_id
 + ".txt";

537 
ªim
->
	`deü—£CouÁ
(
ªim©iÚÇme
);

541 
i
=0; i<
cu¼’cy_¿nge
.
	`size
(); i++) {

542 
¡ršg
 
ªim©iÚÇme
 = "ªim©iÚs/loÙ/" + 
cu¼’cy_¿nge
[
i
].
f’ame
 + ".txt";

543 
ªim
->
	`deü—£CouÁ
(
ªim©iÚÇme
);

547 
loÙ
.
	`ş—r
();

549 
ªim
->
	`ş—nUp
();

551 
¢d
->
	`uÆßd
(
sfx_loÙ
);

552 
¢d
->
	`uÆßd
(
sfx_cu¼’cy
);

554 
loÙMªag”
 = 0;

555 
d–‘e
 
t
;

556 
	}
}

	@LootManager.h

27 #´agm¨
Úû


28 #iâdeà
LOOT_MANAGER_H


29 
	#LOOT_MANAGER_H


	)

31 
	~"Anim©iÚ.h
"

32 
	~"Anim©iÚS‘.h
"

33 
	~"Anim©iÚMªag”.h
"

35 
	~"LoÙ.h
"

36 
	~"I‹mMªag”.h
"

37 
	~"S‘tšgs.h
"

39 
	~<SDL.h
>

40 
	~<SDL_image.h
>

41 
	~<SDL_mix”.h
>

43 
	~<¡ršg
>

45 
şass
 
	gEÃmyMªag”
;

46 
şass
 
	gM­R’d””
;

47 
şass
 
	gM’uInv’tÜy
;

48 
şass
 
	gWidg‘ToŞt
;

50 şas 
	cCu¼’cyRªge
 {

51 
	mpublic
:

52 
¡d
::
¡ršg
 
f’ame
;

53 
	mlow
;

54 
	mhigh
;

60 cÚ¡ 
	gRARITY_LOW
 = 7;

61 cÚ¡ 
	gRARITY_NORMAL
 = 10;

62 cÚ¡ 
	gRARITY_HIGH
 = 3;

63 cÚ¡ 
	gRARITY_EPIC
 = 1;

66 cÚ¡ 
	gLOOT_RANGE
 = 3 * 
UNITS_PER_TILE
;

68 şas 
	cLoÙMªag”
 {

69 
	m´iv©e
:

71 
I‹mMªag”
 *
™ems
;

72 
Widg‘ToŞt
 *
	mt
;

73 
M­R’d””
 *
	mm­
;

74 
StBlock
 *
	mh”o
;

77 
lßdG¿phics
();

79 
	mSoundMªag”
::
SoundID
 
sfx_cu¼’cy
;

80 
	mSoundMªag”
::
SoundID
 
sfx_loÙ
;

83 
	m¡d
::
veùÜ
<
LoÙ
> 
loÙ
;

85 
SDL_Reù
 
	mªim©iÚ_pos
;

86 
Pošt
 
	mªim©iÚ_off£t
;

87 
	m¡d
::
veùÜ
<
Cu¼’cyRªge
> 
cu¼’cy_¿nge
;

90 
	m¡d
::
veùÜ
<cÚ¡ 
şass
 
EÃmy
*> 
’em›sDrİpšgLoÙ
;

92 
	mpublic
:

93 
LoÙMªag”
 *
g‘In¡ªû
();

94 
LoÙMªag”
(
I‹mMªag”
 *
_™ems
, 
M­R’d””
 *
_m­
, 
StBlock
 *
_h”o
);

95 
LoÙMªag”
(cÚ¡ LoÙMªag” &
cİy
);

96 ~
LoÙMªag”
();

98 
hªdËNewM­
();

99 
logic
();

100 
»nd”ToŞts
(
Pošt
 
ÿm
);

101 
checkEÃm›sFÜLoÙ
();

103 
¶ayCu¼’cySound
(
Pošt
 
loÙ_pos
 = Point(0,0));

106 
addEÃmyLoÙ
(cÚ¡ 
EÃmy
 *
e
);

107 
checkM­FÜLoÙ
();

108 
d‘”mšeLoÙByEÃmy
(cÚ¡ 
EÃmy
 *
e
, 
Pošt
 
pos
);

109 
addLoÙ
(
I‹mSck
 
¡ack
, 
Pošt
 
pos
);

110 
addCu¼’cy
(
couÁ
, 
Pošt
 
pos
);

111 
I‹mSck
 
checkPickup
(
Pošt
 
mou£
, Pošˆ
ÿm
, Pošˆ
h”o_pos
, &
cu¼’cy
, 
M’uInv’tÜy
 *
šv
);

112 
I‹mSck
 
checkAutoPickup
(
Pošt
 
h”o_pos
, &
cu¼’cy
);

113 
I‹mSck
 
checkN—»¡Pickup
(
Pošt
 
h”o_pos
, &
cu¼’cy
, 
M’uInv’tÜy
 *
šv
);

115 
addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
»n
, std::veùÜ<R’d”abË> &
»n_d—d
);

117 
	mtoŞt_m¬gš
;

118 
boŞ
 
	mfuÎ_msg
;

121 
LoÙMªag”
 *
loÙMªag”
;

	@MapCollision.cpp

26 
	~"ASrNode.h
"

27 
	~"M­CŞlisiÚ.h
"

28 
	~"S‘tšgs.h
"

29 
	~<cæßt
>

31 
usšg
 
Çme¥aû
 
	g¡d
;

33 
	gM­CŞlisiÚ
::
	$M­CŞlisiÚ
()

34 : 
	`m­_size
(
	$Pošt
())

36 
	`mem£t
(
cŞm­
, 0, (colmap));

37 
	}
}

39 
	gM­CŞlisiÚ
::
	$£tm­
(cÚ¡ 
_cŞm­
[][256], 
w
, 
h
) {

40 
i
=0; i<
w
; i++)

41 
j
=0; j<
h
; j++)

42 
cŞm­
[
i
][
j
] = 
_cŞm­
[i][j];

44 
m­_size
.
x
 = 
w
;

45 
m­_size
.
y
 = 
h
;

46 
	}
}

53 
boŞ
 
	gM­CŞlisiÚ
::
	$move
(&
x
, &
y
, 
¡•_x
, 
¡•_y
, 
di¡
, 
movem’t_ty³
) {

55 
boŞ
 
dŸg
 = 
¡•_x
 && 
¡•_y
;

57 
i
 = 
di¡
; i--;) {

58 ià(
	`is_v®id_pos™iÚ
(
x
 + 
¡•_x
, 
y
 + 
¡•_y
, 
movem’t_ty³
)) {

59 
x
+ğ
¡•_x
;

60 
y
+ğ
¡•_y
;

62 ià(
dŸg
 && 
	`is_v®id_pos™iÚ
(
x
 + 
¡•_x
, 
y
, 
movem’t_ty³
)) {

63 
x
+ğ
¡•_x
;

65 ià(
dŸg
 && 
	`is_v®id_pos™iÚ
(
x
, 
y
 + 
¡•_y
, 
movem’t_ty³
)) {

66 
y
+ğ
¡•_y
;

70 ià(
dŸg
è 
çl£
;

72 
way_¬ound
 = 
	`is_Úe_¡•_¬ound
(
x
, 
y
, 
¡•_x
, 
¡•_y
);

74 ià(!
way_¬ound
) {

75  
çl£
;

78 ià(
¡•_x
) {

79 
y
+ğ
way_¬ound
;

81 
x
+ğ
way_¬ound
;

85  
Œue
;

86 
	}
}

91 
boŞ
 
	gM­CŞlisiÚ
::
	$is_outside_m­
(
te_x
, 
te_y
) const {

92  (
te_x
 < 0 || 
te_y
 < 0 ||e_x >ğ
m­_size
.
x
 ||e_y >ğm­_size.
y
);

93 
	}
}

99 
boŞ
 
	gM­CŞlisiÚ
::
	$is_em±y
(
x
, 
y
) const {

100 
te_x
 = 
x
 >> 
TILE_SHIFT
;

101 
te_y
 = 
y
 >> 
TILE_SHIFT
;

104 ià(
	`is_outside_m­
(
te_x
, 
te_y
)è 
çl£
;

107  (
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_NONE
);

108 
	}
}

114 
boŞ
 
	gM­CŞlisiÚ
::
	$is_w®l
(
x
, 
y
) const {

115 
te_x
 = 
x
 >> 
TILE_SHIFT
;

116 
te_y
 = 
y
 >> 
TILE_SHIFT
;

119 ià(
	`is_outside_m­
(
te_x
, 
te_y
)è 
Œue
;

122  (
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_ALL
 || cŞm­[te_x][te_y] =ğ
BLOCKS_ALL_HIDDEN
);

123 
	}
}

128 
boŞ
 
	gM­CŞlisiÚ
::
	$is_v®id_te
(
te_x
, 
te_y
, 
movem’t_ty³
) const {

131 ià(
	`is_outside_m­
(
te_x
,
te_y
)è 
çl£
;

134 ià(
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_ENTITIES
è 
çl£
;

137 ià(
movem’t_ty³
 =ğ
MOVEMENT_INTANGIBLE
è 
Œue
;

140 ià(
movem’t_ty³
 =ğ
MOVEMENT_FLYING
) {

141  (!(
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_ALL
 || cŞm­[te_x][te_y] =ğ
BLOCKS_ALL_HIDDEN
));

145  (
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_NONE
);

146 
	}
}

151 
boŞ
 
	gM­CŞlisiÚ
::
	$is_v®id_pos™iÚ
(
x
, 
y
, 
movem’t_ty³
) const {

153 cÚ¡ 
te_x
 = 
x
 >> 
TILE_SHIFT
;

154 cÚ¡ 
te_y
 = 
y
 >> 
TILE_SHIFT
;

156  
	`is_v®id_te
(
te_x
, 
te_y
, 
movem’t_ty³
);

157 
	}
}

161 
boŞ
 
šlše
 
	gM­CŞlisiÚ
::
	$is_side¡•abË
(
te_x
, 
te_y
, 
offx
, 
offy
) {

162  !
	`is_outside_m­
(
te_x
 + 
offx
, 
te_y
 + 
offy
è&& !
cŞm­
[tile_x + offx][tile_y + offy];

163 
	}
}

175 
	gM­CŞlisiÚ
::
	$is_Úe_¡•_¬ound
(
x
, 
y
, 
xdœ
, 
ydœ
) {

176 
te_x
 = 
x
 >> 
TILE_SHIFT
;

177 
te_y
 = 
y
 >> 
TILE_SHIFT
;

178 
»t
 = 0;

180 ià(
xdœ
) {

181 ià(
	`is_side¡•abË
(
te_x
, 
te_y
, 
xdœ
, -1)) {

182 
»t
 = 1;

184 ià(
	`is_side¡•abË
(
te_x
, 
te_y
, 
xdœ
, 1)) {

185 
»t
 |= 2;

187 ià(
»t
 == 3) {

192 
»t
 = (
y
 & (
UNITS_PER_TILE
 - 1)) < UNITS_PER_TILE >> 1 ? 1 : -1;

195 ià(
	`is_side¡•abË
(
te_x
, 
te_y
, -1, 
ydœ
)) {

196 
»t
 = 1;

198 ià(
	`is_side¡•abË
(
te_x
, 
te_y
, 1, 
ydœ
)) {

199 
»t
 |= 2;

201 ià(
»t
 == 3) {

202 
»t
 = (
x
 & (
UNITS_PER_TILE
 - 1)) < UNITS_PER_TILE >> 1 ? 1 : -1;

206  !
»t
 ? 0 : (ret == 1 ? -1 : 1);

207 
	}
}

214 
boŞ
 
	gM­CŞlisiÚ
::
	$lše_check
(
x1
, 
y1
, 
x2
, 
y2
, 
check_ty³
, 
movem’t_ty³
) {

215 
x
 = ()
x1
;

216 
y
 = ()
y1
;

217 
dx
 = ()
	`abs
(
x2
 - 
x1
);

218 
dy
 = ()
	`abs
(
y2
 - 
y1
);

219 
¡•_x
;

220 
¡•_y
;

221 
¡•s
 = ()
	`max
(
dx
, 
dy
);

224 ià(
dx
 > 
dy
) {

225 
¡•_x
 = 1;

226 
¡•_y
 = 
dy
 / 
dx
;

229 
¡•_y
 = 1;

230 
¡•_x
 = 
dx
 / 
dy
;

233 ià(
x1
 > 
x2
è
¡•_x
 = -step_x;

234 ià(
y1
 > 
y2
è
¡•_y
 = -step_y;

237 ià(
check_ty³
 =ğ
CHECK_SIGHT
) {

238 
i
=0; i<
¡•s
; i++) {

239 
x
 +ğ
¡•_x
;

240 
y
 +ğ
¡•_y
;

241 ià(
	`is_w®l
(
	`round
(
x
),„ound(
y
)))

242  
çl£
;

245 ià(
check_ty³
 =ğ
CHECK_MOVEMENT
) {

246 
i
=0; i<
¡•s
; i++) {

247 
x
 +ğ
¡•_x
;

248 
y
 +ğ
¡•_y
;

249 ià(!
	`is_v®id_pos™iÚ
(
	`round
(
x
),„ound(
y
), 
movem’t_ty³
))

250  
çl£
;

254  
Œue
;

255 
	}
}

257 
boŞ
 
	gM­CŞlisiÚ
::
	$lše_of_sight
(
x1
, 
y1
, 
x2
, 
y2
) {

258  
	`lše_check
(
x1
, 
y1
, 
x2
, 
y2
, 
CHECK_SIGHT
, 0);

259 
	}
}

261 
boŞ
 
	gM­CŞlisiÚ
::
	$lše_of_movem’t
(
x1
, 
y1
, 
x2
, 
y2
, 
movem’t_ty³
) {

264 ià(
movem’t_ty³
 =ğ
MOVEMENT_INTANGIBLE
è 
Œue
;

267 
te_x
 = 
x2
 >> 
TILE_SHIFT
;

268 
te_y
 = 
y2
 >> 
TILE_SHIFT
;

269 
boŞ
 
rg‘_blocks
 = 
çl£
;

270 ià(
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_ENTITIES
) {

271 
rg‘_blocks
 = 
Œue
;

272 
	`unblock
(
x2
,
y2
);

275 
boŞ
 
has_movem’t
 = 
	`lše_check
(
x1
, 
y1
, 
x2
, 
y2
, 
CHECK_MOVEMENT
, 
movem’t_ty³
);

277 ià(
rg‘_blocks
è
	`block
(
x2
,
y2
);

278  
has_movem’t
;

280 
	}
}

288 
boŞ
 
	gM­CŞlisiÚ
::
compu‹_·th
(
Pošt
 
¡¬t_pos
, Pošˆ
’d_pos
, 
veùÜ
<Pošt> &
·th
, 
movem’t_ty³
, 
lim™
) {

291 ià(!
	g·th
.
em±y
())

292 
	g·th
.
ş—r
();

295 
Pošt
 
	g¡¬t
 = 
m­_to_cŞlisiÚ
(
¡¬t_pos
);

296 
Pošt
 
	g’d
 = 
m­_to_cŞlisiÚ
(
’d_pos
);

299 
boŞ
 
	grg‘_blocks
 = 
çl£
;

300 ià(
	gcŞm­
[
’d
.
x
][’d.
y
] =ğ
BLOCKS_ENTITIES
) {

301 
rg‘_blocks
 = 
Œue
;

302 
unblock
(
’d_pos
.
x
,ƒnd_pos.
y
);

305 
Pošt
 
	gcu¼’t
 = 
¡¬t
;

306 
ASrNode
 
node
(
¡¬t
);

307 
	gnode
.
£tAùu®Co¡
(0);

308 
	gnode
.
£tE¡im©edCo¡
(()
ÿlcDi¡
(
¡¬t
,
’d
));

309 
	gnode
.
£tP¬’t
(
cu¼’t
);

311 
	gli¡
<
	gASrNode
> 
	gİ’
;

312 
	gli¡
<
	gASrNode
> 
	gşo£
;

314 
	gİ’
.
push_back
(
node
);

316 !
	gİ’
.
em±y
(è&& 
	gşo£
.
size
(è< 
	glim™
) {

317 
	glowe¡_scÜe
 = 
FLT_MAX
;

319 
	gli¡
<
	gASrNode
>::
™”©Ü
 
lowe¡_™
;

320 
	gli¡
<
	gASrNode
>::
™”©Ü
 
™
=
İ’
.
begš
(); 
	g™
 !ğİ’.
’d
(); ++it) {

321 ià(
	g™
->
g‘Fš®Co¡
(è< 
	glowe¡_scÜe
) {

322 
	glowe¡_scÜe
 = 
™
->
g‘Fš®Co¡
();

323 
	glowe¡_™
 = 
™
;

326 
	gnode
 = *
lowe¡_™
;

327 
	gcu¼’t
.
	gx
 = 
node
.
g‘X
();

328 
	gcu¼’t
.
	gy
 = 
node
.
g‘Y
();

329 
	gşo£
.
push_back
(
node
);

330 
	gİ’
.
”a£
(
lowe¡_™
);

332 iàĞ
	gcu¼’t
.
	gx
 =ğ
’d
.
x
 && 
cu¼’t
.
y
 ==ƒnd.y)

335 
	gli¡
<
	gPošt
> 
	gÃighbours
 = 
node
.
g‘Neighbours
(256,256);

338 
	gli¡
<
	gPošt
>::
™”©Ü
 
™
=
Ãighbours
.
begš
(); 
	g™
 !ğÃighbours.
’d
(); ++it) {

339 
Pošt
 
	gÃighbour
 = *
™
;

342 ià(!
is_v®id_te
(
Ãighbour
.
x
,Ãighbour.
y
,
movem’t_ty³
è|| 
fšd
(
şo£
.
begš
(), clo£.
’d
(),‚eighbour)!=close.end())

345 
	gli¡
<
	gASrNode
>::
™”©Ü
 
i
 = 
fšd
(
İ’
.
begš
(), o³n.
’d
(), 
Ãighbour
);

347 ià(
	gi
==
İ’
.
’d
()) {

348 
ASrNode
 
ÃwNode
(
Ãighbour
.
x
,Ãighbour.
y
);

349 
	gÃwNode
.
£tAùu®Co¡
(
node
.
g‘Aùu®Co¡
()+()
ÿlcDi¡
(
cu¼’t
,
Ãighbour
));

350 
	gÃwNode
.
£tP¬’t
(
cu¼’t
);

351 
	gÃwNode
.
£tE¡im©edCo¡
(()
ÿlcDi¡
(
Ãighbour
,
’d
));

352 
	gİ’
.
push_back
(
ÃwNode
);

355 ià(
	gnode
.
g‘Aùu®Co¡
()+
	gnode_¡ride
 < 
	gi
->getActualCost()) {

356 
	gi
->
£tAùu®Co¡
(
node
.
g‘Aùu®Co¡
()+
node_¡ride
);

357 
	gi
->
£tP¬’t
(
cu¼’t
);

362 ià(
	gcu¼’t
.
	gx
 !ğ
’d
.
x
 || 
cu¼’t
.
y
 !=ƒnd.y) {

365 ià(
rg‘_blocks
è
block
(
’d_pos
.
x
,ƒnd_pos.
y
);

367  
	gçl£
;

372 
	g·th
.
push_back
(
cŞlisiÚ_to_m­
(
’d
));

373 
	gcu¼’t
.
	gx
 !ğ
¡¬t
.
x
 || 
cu¼’t
.
y
 != start.y) {

374 
·th
.
push_back
(
cŞlisiÚ_to_m­
(
cu¼’t
));

375 
	gcu¼’t
 = 
fšd
(
şo£
.
begš
(), clo£.
’d
(), 
cu¼’t
)->
g‘P¬’t
();

380 ià(
	grg‘_blocks
è
block
(
’d_pos
.
x
,ƒnd_pos.
y
);

382  !
	g·th
.
em±y
();

385 
	gM­CŞlisiÚ
::
	$block
(cÚ¡ 
x
, cÚ¡ 
y
) {

387 cÚ¡ 
te_x
 = 
x
 >> 
TILE_SHIFT
;

388 cÚ¡ 
te_y
 = 
y
 >> 
TILE_SHIFT
;

390 ià(
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_NONE
) {

391 
cŞm­
[
te_x
][
te_y
] = 
BLOCKS_ENTITIES
;

394 
	}
}

396 
	gM­CŞlisiÚ
::
	$unblock
(
x
, 
y
) {

398 cÚ¡ 
te_x
 = 
x
 >> 
TILE_SHIFT
;

399 cÚ¡ 
te_y
 = 
y
 >> 
TILE_SHIFT
;

401 ià(
cŞm­
[
te_x
][
te_y
] =ğ
BLOCKS_ENTITIES
) {

402 
cŞm­
[
te_x
][
te_y
] = 
BLOCKS_NONE
;

405 
	}
}

407 
	gM­CŞlisiÚ
::~
	$M­CŞlisiÚ
() {

408 
	}
}

	@MapCollision.h

26 #´agm¨
Úû


27 #iâdeà
MAP_COLLISION_H


28 
	#MAP_COLLISION_H


	)

30 
	~"Uts.h
"

32 
	~<®gÜ™hm
>

33 
	~<c¡dlib
>

34 
	~<veùÜ
>

37 cÚ¡ 
	gBLOCKS_NONE
 = 0;

38 cÚ¡ 
	gBLOCKS_ALL
 = 1;

39 cÚ¡ 
	gBLOCKS_MOVEMENT
 = 2;

40 cÚ¡ 
	gBLOCKS_ALL_HIDDEN
 = 3;

41 cÚ¡ 
	gBLOCKS_MOVEMENT_HIDDEN
 = 4;

42 cÚ¡ 
	gBLOCKS_ENTITIES
 = 5;

45 cÚ¡ 
	gCHECK_MOVEMENT
 = 1;

46 cÚ¡ 
	gCHECK_SIGHT
 = 2;

49 cÚ¡ 
	gMOVEMENT_NORMAL
 = 0;

50 cÚ¡ 
	gMOVEMENT_FLYING
 = 1;

51 cÚ¡ 
	gMOVEMENT_INTANGIBLE
 = 2;

53 cÚ¡ 
	gPATH_MAX_TILES
 = 256;

56 şas 
	cM­CŞlisiÚ
 {

57 
	m´iv©e
:

59 
boŞ
 
lše_check
(
x1
, 
y1
, 
x2
, 
y2
, 
check_ty³
, 
movem’t_ty³
);

60 
boŞ
 
is_side¡•abË
(
te_x
, 
te_y
, 
offx2
, 
offy2
);

62 
	mpublic
:

63 
M­CŞlisiÚ
();

64 ~
M­CŞlisiÚ
();

66 
£tm­
(cÚ¡ 
_cŞm­
[][256], 
w
, 
h
);

67 
boŞ
 
move
(&
x
, &
y
, 
¡•_x
, 
¡•_y
, 
di¡
, 
movem’t_ty³
);

69 
boŞ
 
	$is_outside_m­
(
te_x
, 
te_y
) const;

70 
boŞ
 
	$is_em±y
(
x
, 
y
) const;

71 
boŞ
 
	$is_w®l
(
x
, 
y
) const;

72 
boŞ
 
	$is_v®id_te
(
x
, 
y
, 
movem’t_ty³
) const;

73 
boŞ
 
	$is_v®id_pos™iÚ
(
x
, 
y
, 
movem’t_ty³
) const;

75 
	`is_Úe_¡•_¬ound
(
x
, 
y
, 
xidr
, 
ydœ
);

77 
boŞ
 
	`lše_of_sight
(
x1
, 
y1
, 
x2
, 
y2
);

78 
boŞ
 
	`lše_of_movem’t
(
x1
, 
y1
, 
x2
, 
y2
, 
movem’t_ty³
);

80 
boŞ
 
	`compu‹_·th
(
Pošt
 
¡¬t
, Pošˆ
’d
, 
¡d
::
veùÜ
<Pošt> &
·th
, 
movem’t_ty³
, 
lim™
 = 
PATH_MAX_TILES
);

82 
	`block
(
m­_x
, 
m­_y
);

83 
	`unblock
(
m­_x
, 
m­_y
);

85 
cŞm­
[256][256];

86 
Pošt
 
m­_size
;

	@MapRenderer.cpp

20 
	~"M­R’d””.h
"

21 
	~"Cam·ignMªag”.h
"

22 
	~"EÃmyGroupMªag”.h
"

23 
	~"FeP¬£r.h
"

24 
	~"Sh¬edResourûs.h
"

25 
	~"Pow”Mªag”.h
"

26 
	~"StBlock.h
"

27 
	~"UtsFeSy¡em.h
"

28 
	~"UtsM©h.h
"

29 
	~"UtsP¬sšg.h
"

31 
	~<¡dšt.h
>

33 
	~<io¡»am
>

34 
	~<lim™s
>

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 cÚ¡ 
	gCLICK_RANGE
 = 3 * 
UNITS_PER_TILE
;

39 
	gM­R’d””
::
	$M­R’d””
(
Cam·ignMªag”
 *
_ÿmp
)

40 : 
	`music
(
NULL
)

41 , 
	`t
(
Ãw
 
	`Widg‘ToŞt
())

42 , 
	`t_pos
()

43 , 
	`show_toŞt
(
çl£
)

44 , 
	`ev’ts
()

45 , 
	`background
(
NULL
)

46 , 
	`äšge
(
NULL
)

47 , 
	`objeù
(
NULL
)

48 , 
	`fÜeground
(
NULL
)

49 , 
	`cŞlisiÚ
(
NULL
)

50 , 
	`shakyÿm
(
	`Pošt
())

51 , 
	`Ãw_music
(
çl£
)

52 , 
	`backgroundsurçû
(
NULL
)

53 , 
	`backgroundsurçûoff£t
()

54 , 
	`»·št_background
(
çl£
)

55 , 
	`ÿmp
(
_ÿmp
)

56 , 
	`pow”s
(
NULL
)

57 , 
	`w
(0)

58 , 
	`h
(0)

59 , 
	`ÿm
()

60 , 
	`h”o_te
()

61 , 
	`¥awn
()

62 , 
	`¥awn_dœ
(0)

63 , 
	`m­_chªge
(
çl£
)

64 , 
	`‹ËpÜtiÚ
(
çl£
)

65 , 
	`‹ËpÜt_de¡š©iÚ
()

66 , 
	`»¥awn_pošt
()

67 , 
	`log_msg
("")

68 , 
	`shaky_ÿm_ticks
(0)

69 , 
	`¡ash
(
çl£
)

70 , 
	`¡ash_pos
()

71 , 
	$’em›s_ş—»d
(
çl£
)

73 
	}
}

75 
	gM­R’d””
::
	$ş—rEv’ts
() {

76 
ev’ts
.
	`ş—r
();

77 
	}
}

79 
	gM­R’d””
::
	$push_’emy_group
(
M­_Group
 
g
) {

81 
aùiv©e_chªû
 = (
	`¿nd
() % 100) / 100.0f;

82 ià(
aùiv©e_chªû
 > 
g
.
chªû
) {

93 
’em›s_to_¥awn
 = 
	`¿ndB‘w“n
(
g
.
numb”mš
, g.
numb”max
);

96 
®lowed_mis£s
 = 3 * 
g
.
numb”max
;

98 
’em›s_to_¥awn
 && 
®lowed_mis£s
) {

100 
x
 = (
g
.
pos
.x + (
	`¿nd
(è% g.
¬—
.x)è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

101 
y
 = (
g
.
pos
.y + (
	`¿nd
(è% g.
¬—
.y)è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

102 
boŞ
 
sucûss
 = 
çl£
;

104 ià(
cŞlid”
.
	`is_em±y
(
x
, 
y
)) {

105 
EÃmy_Lev–
 
’emy_Ëv
 = 
EÃmyGroupMªag”
::
	`š¡ªû
().
	`g‘RªdomEÃmy
(
g
.
ÿ‹gÜy
, g.
Ëv–mš
, g.
Ëv–max
);

106 ià(
’emy_Ëv
.
ty³
 != ""){

107 
M­_EÃmy
 
group_memb”
 = 
	`M­_EÃmy
(
’emy_Ëv
.
ty³
, 
	`Pošt
(
x
, 
y
));

108 
’em›s
.
	`push
(
group_memb”
);

110 
sucûss
 = 
Œue
;

113 ià(
sucûss
)

114 
’em›s_to_¥awn
--;

116 
®lowed_mis£s
--;

118 
	}
}

120 
	gM­R’d””
::
	$lßd
(
¡ršg
 
f’ame
) {

121 
FeP¬£r
 
šfe
;

122 
¡ršg
 
v®
;

123 
m­row
 *
cur_Ïy”
;

124 
M­_EÃmy
 
Ãw_’emy
;

125 
M­_Group
 
Ãw_group
;

126 
boŞ
 
’emy_awa™šg_queue
 = 
çl£
;

127 
boŞ
 
group_awa™šg_queue
 = 
çl£
;

128 
boŞ
 
Åc_awa™šg_queue
 = 
çl£
;

129 
M­_NPC
 
Ãw_Åc
;

131 
	`ş—rEv’ts
();

132 
	`ş—rLay”s
();

133 
	`ş—rQueues
();

136 
¢d
->
	`»£t
();

137 !
sids
.
	`em±y
()) {

138 
¢d
->
	`uÆßd
(
sids
.
	`back
());

139 
sids
.
	`pİ_back
();

142 
cur_Ïy”
 = 
NULL
;

143 
show_toŞt
 = 
çl£
;

145 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("m­s/" + 
f’ame
))) {

146 
û¼
 << "UÇbËØİ’ m­s/" << 
f’ame
 << 
’dl
;

150 
šfe
.
	`Ãxt
()) {

151 ià(
šfe
.
Ãw_£ùiÚ
) {

153 ià(
’emy_awa™šg_queue
) {

154 
’em›s
.
	`push
(
Ãw_’emy
);

155 
’emy_awa™šg_queue
 = 
çl£
;

157 ià(
Åc_awa™šg_queue
) {

158 
Åcs
.
	`push
(
Ãw_Åc
);

159 
Åc_awa™šg_queue
 = 
çl£
;

161 ià(
group_awa™šg_queue
) {

162 
	`push_’emy_group
(
Ãw_group
);

163 
group_awa™šg_queue
 = 
çl£
;

167 ià(
šfe
.
£ùiÚ
 == "enemy") {

168 
Ãw_’emy
 = 
	`M­_EÃmy
();

169 
’emy_awa™šg_queue
 = 
Œue
;

171 ià(
šfe
.
£ùiÚ
 == "enemygroup") {

172 
Ãw_group
.
	`ş—r
();

173 
group_awa™šg_queue
 = 
Œue
;

175 ià(
šfe
.
£ùiÚ
 == "npc") {

176 
Ãw_Åc
.
	`ş—r
();

177 
Åc_awa™šg_queue
 = 
Œue
;

179 ià(
šfe
.
£ùiÚ
 == "event") {

180 
ev’ts
.
	`push_back
(
	`M­_Ev’t
());

184 ià(
šfe
.
£ùiÚ
 == "header") {

185 ià(
šfe
.
key
 == "title") {

186 
this
->
t™Ë
 = 
msg
->
	`g‘
(
šfe
.
v®
);

188 ià(
šfe
.
key
 == "width") {

189 
this
->
w
 = 
	`toIÁ
(
šfe
.
v®
);

191 ià(
šfe
.
key
 == "height") {

192 
this
->
h
 = 
	`toIÁ
(
šfe
.
v®
);

194 ià(
šfe
.
key
 == "tileset") {

195 
this
->
te£t
 = 
šfe
.
v®
;

197 ià(
šfe
.
key
 == "music") {

198 ià(
this
->
music_f’ame
 =ğ
šfe
.
v®
) {

199 
this
->
Ãw_music
 = 
çl£
;

202 
this
->
music_f’ame
 = 
šfe
.
v®
;

203 
this
->
Ãw_music
 = 
Œue
;

206 ià(
šfe
.
key
 == "location") {

207 
¥awn
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

208 
¥awn
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

209 
¥awn_dœ
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

212 ià(
šfe
.
£ùiÚ
 == "layer") {

213 ià(
šfe
.
key
 == "type") {

214 
cur_Ïy”
 = 
Ãw
 
m­row
[
w
];

215 ià(
šfe
.
v®
 =ğ"background"è
background
 = 
cur_Ïy”
;

216 ià(
šfe
.
v®
 =ğ"äšge"è
äšge
 = 
cur_Ïy”
;

217 ià(
šfe
.
v®
 =ğ"objeù"è
objeù
 = 
cur_Ïy”
;

218 ià(
šfe
.
v®
 =ğ"fÜeground"è
fÜeground
 = 
cur_Ïy”
;

219 ià(
šfe
.
v®
 =ğ"cŞlisiÚ"è
cŞlisiÚ
 = 
cur_Ïy”
;

221 ià(
šfe
.
key
 == "format") {

222 ià(
šfe
.
v®
 != "dec") {

223 
	`årštf
(
¡d”r
, "ERROR: maploading: The format of‡†ayer must be \"dec\"!\n");

224 
	`SDL_Qu™
();

225 
	`ex™
(1);

228 ià(
šfe
.
key
 == "data") {

231 
j
=0; j<
h
; j++) {

232 
v®
 = 
šfe
.
	`g‘RawLše
() + ',';

233 
i
=0; i<
w
; i++)

234 
cur_Ïy”
[
i
][
j
] = 
	`—tFœ¡IÁ
(
v®
, ',');

236 ià(
cur_Ïy”
 =ğ
cŞlisiÚ
)

237 
cŞlid”
.
	`£tm­
(
cŞlisiÚ
, 
w
, 
h
);

240 ià(
šfe
.
£ùiÚ
 == "enemy") {

241 ià(
šfe
.
key
 == "type") {

242 
Ãw_’emy
.
ty³
 = 
šfe
.
v®
;

244 ià(
šfe
.
key
 == "location") {

245 
Ãw_’emy
.
pos
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

246 
Ãw_’emy
.
pos
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

248 ià(
šfe
.
key
 == "direction") {

249 
Ãw_’emy
.
dœeùiÚ
 = 
	`toIÁ
(
šfe
.
v®
);

251 ià(
šfe
.
key
 == "waypoints") {

252 
¡ršg
 
nÚe
 = "";

253 
¡ršg
 
a
 = 
šfe
.
	`ÃxtV®ue
();

254 
¡ršg
 
b
 = 
šfe
.
	`ÃxtV®ue
();

256 
a
 !ğ
nÚe
) {

257 
Pošt
 
p
;

258 
p
.
x
 = 
	`toIÁ
(
a
è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

259 
p
.
y
 = 
	`toIÁ
(
b
è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

260 
Ãw_’emy
.
waypošts
.
	`push
(
p
);

261 
a
 = 
šfe
.
	`ÃxtV®ue
();

262 
b
 = 
šfe
.
	`ÃxtV®ue
();

264 } ià(
šfe
.
key
 == "wander_area") {

265 
Ãw_’emy
.
wªd”
 = 
Œue
;

266 
Ãw_’emy
.
wªd”_¬—
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

267 
Ãw_’emy
.
wªd”_¬—
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

268 
Ãw_’emy
.
wªd”_¬—
.
w
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

269 
Ãw_’emy
.
wªd”_¬—
.
h
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE / 2;

272 ià(
šfe
.
£ùiÚ
 == "enemygroup") {

273 ià(
šfe
.
key
 == "type") {

274 
Ãw_group
.
ÿ‹gÜy
 = 
šfe
.
v®
;

276 ià(
šfe
.
key
 == "level") {

277 
Ãw_group
.
Ëv–mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

278 
Ãw_group
.
Ëv–max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

280 ià(
šfe
.
key
 == "location") {

281 
Ãw_group
.
pos
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

282 
Ãw_group
.
pos
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

283 
Ãw_group
.
¬—
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

284 
Ãw_group
.
¬—
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

286 ià(
šfe
.
key
 == "number") {

287 
Ãw_group
.
numb”mš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

288 
Ãw_group
.
numb”max
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

290 ià(
šfe
.
key
 == "chance") {

291 
Ãw_group
.
chªû
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()) / 100.0f;

292 ià(
Ãw_group
.
chªû
 > 1.0f) {

293 
Ãw_group
.
chªû
 = 1.0f;

295 ià(
Ãw_group
.
chªû
 < 0.0f) {

296 
Ãw_group
.
chªû
 = 0.0f;

300 ià(
šfe
.
£ùiÚ
 == "npc") {

301 ià(
šfe
.
key
 == "type") {

302 
Ãw_Åc
.
id
 = 
šfe
.
v®
;

304 ià(
šfe
.
key
 == "location") {

305 
Ãw_Åc
.
pos
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

306 
Ãw_Åc
.
pos
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

309 ià(
šfe
.
£ùiÚ
 == "event") {

310 ià(
šfe
.
key
 == "type") {

311 
ev’ts
.
	`back
().
ty³
 = 
šfe
.
v®
;

313 ià(
šfe
.
key
 == "location") {

314 
ev’ts
.
	`back
().
loÿtiÚ
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

315 
ev’ts
.
	`back
().
loÿtiÚ
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

316 
ev’ts
.
	`back
().
loÿtiÚ
.
w
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

317 
ev’ts
.
	`back
().
loÿtiÚ
.
h
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

319 ià(
šfe
.
key
 == "hotspot") {

320 ià(
šfe
.
v®
 == "location") {

321 
ev’ts
.
	`back
().
hÙ¥Ù
.
x
 =ƒv’ts.back().
loÿtiÚ
.x;

322 
ev’ts
.
	`back
().
hÙ¥Ù
.
y
 =ƒv’ts.back().
loÿtiÚ
.y;

323 
ev’ts
.
	`back
().
hÙ¥Ù
.
w
 =ƒv’ts.back().
loÿtiÚ
.w;

324 
ev’ts
.
	`back
().
hÙ¥Ù
.
h
 =ƒv’ts.back().
loÿtiÚ
.h;

327 
ev’ts
.
	`back
().
hÙ¥Ù
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

328 
ev’ts
.
	`back
().
hÙ¥Ù
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

329 
ev’ts
.
	`back
().
hÙ¥Ù
.
w
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

330 
ev’ts
.
	`back
().
hÙ¥Ù
.
h
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

333 ià(
šfe
.
key
 == "tooltip") {

334 
ev’ts
.
	`back
().
toŞt
 = 
msg
->
	`g‘
(
šfe
.
v®
);

336 ià(
šfe
.
key
 == "power_path") {

337 
ev’ts
.
	`back
().
pow”_¤c
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

338 
ev’ts
.
	`back
().
pow”_¤c
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

339 
¡ršg
 
de¡
 = 
šfe
.
	`ÃxtV®ue
();

340 ià(
de¡
 == "hero") {

341 
ev’ts
.
	`back
().
rg‘H”o
 = 
Œue
;

344 
ev’ts
.
	`back
().
pow”_de¡
.
x
 = 
	`toIÁ
(
de¡
);

345 
ev’ts
.
	`back
().
pow”_de¡
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

348 ià(
šfe
.
key
 == "power_damage") {

349 
ev’ts
.
	`back
().
damagemš
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

350 
ev’ts
.
	`back
().
damagemax
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

352 ià(
šfe
.
key
 == "cooldown") {

353 
ev’ts
.
	`back
().
coŞdown
 = 
	`·r£_du¿tiÚ
(
šfe
.
v®
);

357 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

358 
Ev’t_CompÚ’t
 *
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

359 
e
->
ty³
 = 
šfe
.
key
;

361 ià(
šfe
.
key
 == "intermap") {

362 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

363 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

364 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

366 ià(
šfe
.
key
 == "intramap") {

367 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

368 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

370 ià(
šfe
.
key
 == "mapmod") {

371 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

372 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

373 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

374 
e
->
z
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

377 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

378 
»³©_v®
 != "") {

379 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

380 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

381 
e
->
ty³
 = 
šfe
.
key
;

382 
e
->
s
 = 
»³©_v®
;

383 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

384 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

385 
e
->
z
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

387 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

390 ià(
šfe
.
key
 == "soundfx") {

391 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

392 
e
->
x
 =ƒ->
y
 = -1;

394 
¡d
::
¡ršg
 
s
 = 
šfe
.
	`ÃxtV®ue
();

395 ià(
s
 !ğ""è
e
->
x
 = 
	`toIÁ
(s);

397 
s
 = 
šfe
.
	`ÃxtV®ue
();

398 ià(
s
 !ğ""è
e
->
y
 = 
	`toIÁ
(s);

401 ià(
šfe
.
key
 == "loot") {

402 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

403 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

404 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

407 
¡ršg
 
chªû
 = 
šfe
.
	`ÃxtV®ue
();

408 ià(
chªû
 =ğ"fixed"è
e
->
z
 = 0;

409 
e
->
z
 = 
	`toIÁ
(
chªû
);

412 
e
->
a
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

413 ià(
e
->
a
 < 1)ƒ->a = 1;

414 
e
->
b
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

415 ià(
e
->
b
 <ƒ->
a
)ƒ->b =ƒ->a;

418 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

419 
»³©_v®
 != "") {

420 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

421 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

422 
e
->
ty³
 = 
šfe
.
key
;

423 
e
->
s
 = 
»³©_v®
;

424 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

425 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

427 
¡ršg
 
chªû
 = 
šfe
.
	`ÃxtV®ue
();

428 ià(
chªû
 =ğ"fixed"è
e
->
z
 = 0;

429 
e
->
z
 = 
	`toIÁ
(
chªû
);

431 
e
->
a
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

432 ià(
e
->
a
 < 1)ƒ->a = 1;

433 
e
->
b
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

434 ià(
e
->
b
 <ƒ->
a
)ƒ->b =ƒ->a;

436 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

439 ià(
šfe
.
key
 == "msg") {

440 
e
->
s
 = 
msg
->
	`g‘
(
šfe
.
v®
);

442 ià(
šfe
.
key
 == "shakycam") {

443 
e
->
x
 = 
	`toIÁ
(
šfe
.
v®
);

445 ià(
šfe
.
key
 == "requires_status") {

446 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

449 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

450 
»³©_v®
 != "") {

451 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

452 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

453 
e
->
ty³
 = 
šfe
.
key
;

454 
e
->
s
 = 
»³©_v®
;

456 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

459 ià(
šfe
.
key
 == "requires_not") {

460 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

463 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

464 
»³©_v®
 != "") {

465 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

466 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

467 
e
->
ty³
 = 
šfe
.
key
;

468 
e
->
s
 = 
»³©_v®
;

470 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

473 ià(
šfe
.
key
 == "requires_level") {

474 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

476 ià(
šfe
.
key
 == "requires_not_level") {

477 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

479 ià(
šfe
.
key
 == "requires_item") {

480 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

483 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

484 
»³©_v®
 != "") {

485 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

486 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

487 
e
->
ty³
 = 
šfe
.
key
;

488 
e
->
x
 = 
	`toIÁ
(
»³©_v®
);

490 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

493 ià(
šfe
.
key
 == "set_status") {

494 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

497 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

498 
»³©_v®
 != "") {

499 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

500 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

501 
e
->
ty³
 = 
šfe
.
key
;

502 
e
->
s
 = 
»³©_v®
;

504 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

507 ià(
šfe
.
key
 == "unset_status") {

508 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

511 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

512 
»³©_v®
 != "") {

513 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

514 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

515 
e
->
ty³
 = 
šfe
.
key
;

516 
e
->
s
 = 
»³©_v®
;

518 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

521 ià(
šfe
.
key
 == "remove_item") {

522 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

525 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

526 
»³©_v®
 != "") {

527 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

528 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

529 
e
->
ty³
 = 
šfe
.
key
;

530 
e
->
x
 = 
	`toIÁ
(
»³©_v®
);

532 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

535 ià(
šfe
.
key
 == "reward_xp") {

536 
e
->
x
 = 
	`toIÁ
(
šfe
.
v®
);

538 ià(
šfe
.
key
 == "power") {

539 
e
->
x
 = 
	`toIÁ
(
šfe
.
v®
);

541 ià(
šfe
.
key
 == "spawn") {

543 
e
->
s
 = 
šfe
.
	`ÃxtV®ue
();

544 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

545 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

548 
¡ršg
 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

549 
»³©_v®
 != "") {

550 
ev’ts
.
	`back
().
compÚ’ts
.
	`push_back
(
	`Ev’t_CompÚ’t
());

551 
e
 = &
ev’ts
.
	`back
().
compÚ’ts
.back();

552 
e
->
ty³
 = 
šfe
.
key
;

554 
e
->
s
 = 
»³©_v®
;

555 
e
->
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

556 
e
->
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

558 
»³©_v®
 = 
šfe
.
	`ÃxtV®ue
();

561 ià(
šfe
.
key
 == "npc") {

562 
Ãw_Åc
.
id
 = 
šfe
.
v®
;

563 
e
->
s
 = 
šfe
.
v®
;

565 ià(
šfe
.
key
 == "music") {

566 
e
->
s
 = 
šfe
.
v®
;

572 
šfe
.
	`şo£
();

575 ià(
’emy_awa™šg_queue
)

576 
’em›s
.
	`push
(
Ãw_’emy
);

578 ià(
Åc_awa™šg_queue
)

579 
Åcs
.
	`push
(
Ãw_Åc
);

581 ià(
group_awa™šg_queue
)

582 
	`push_’emy_group
(
Ãw_group
);

584 ià(
this
->
Ãw_music
) {

585 
	`lßdMusic
();

586 
this
->
Ãw_music
 = 
çl£
;

588 
t£t
.
	`lßd
(
this
->
te£t
);

592 
	`execu‹OnLßdEv’ts
();

595 
	}
}

597 
	gM­R’d””
::
	$ş—rQueues
() {

598 
’em›s
 = 
queue
<
M­_EÃmy
>();

599 
Åcs
 = 
queue
<
M­_NPC
>();

600 
loÙ
.
	`ş—r
();

601 
	}
}

607 
	gM­R’d””
::
	$ş—rLay”s
() {

608 
d–‘e
[] 
background
;

609 
d–‘e
[] 
äšge
;

610 
d–‘e
[] 
objeù
;

611 
d–‘e
[] 
fÜeground
;

612 
d–‘e
[] 
cŞlisiÚ
;

614 
background
 = 0;

615 
äšge
 = 0;

616 
objeù
 = 0;

617 
fÜeground
 = 0;

618 
cŞlisiÚ
 = 0;

620 
	`SDL_F»eSurçû
(
backgroundsurçû
);

621 
backgroundsurçû
 = 0;

622 
	}
}

624 
	gM­R’d””
::
	$lßdMusic
() {

626 ià(
music
) {

627 
	`Mix_H®tMusic
();

628 
	`Mix_F»eMusic
(
music
);

629 
music
 = 
NULL
;

631 ià(
AUDIO
 && 
MUSIC_VOLUME
) {

632 
music
 = 
	`Mix_LßdMUS
(
mods
->
	`loÿ‹
("music/" + 
this
->
music_f’ame
).
	`c_¡r
());

633 if(!
music
)

634 
cout
 << "Mix_LßdMUS: "<< 
	`Mix_G‘E¼Ü
()<<
’dl
;

637 ià(
music
) {

638 
	`Mix_VŞumeMusic
(
MUSIC_VOLUME
);

639 
	`Mix_PÏyMusic
(
music
, -1);

641 
	}
}

643 
	gM­R’d””
::
	$logic
() {

646 ià(
shaky_ÿm_ticks
 > 0) shaky_cam_ticks--;

649 
t£t
.
	`logic
();

652 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
™
;

653 
™
 = 
ev’ts
.
	`begš
(); iˆ<ƒv’ts.
	`’d
(); ++it) {

654 ià((*
™
).
coŞdown_ticks
 > 0) (*it).cooldown_ticks--;

657 
	}
}

659 
boŞ
 
	$´iocom·»
(cÚ¡ 
R’d”abË
 &
r1
, cÚ¡ R’d”abË &
r2
) {

660  
r1
.
´io
 < 
r2
.prio;

661 
	}
}

667 
ÿlcuÏ‹PriosIso
(
veùÜ
<
R’d”abË
> &
r
) {

668 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
™
 = 
r
.
begš
(); 
	g™
 !ğr.
’d
(); ++it) {

669 cÚ¡ 
	gtex
 = 
™
->
m­_pos
.
x
 >> 
TILE_SHIFT
;

670 cÚ¡ 
	gtey
 = 
™
->
m­_pos
.
y
 >> 
TILE_SHIFT
;

671 
	g™
->
	g´io
 +ğ(((
ušt64_t
)(
tex
 + 
tey
)è<< 48è+ (((ušt64_téexè<< 32è+ ((
™
->
m­_pos
.
x
 + it->m­_pos.
y
) << 16);

675 
ÿlcuÏ‹PriosO¹ho
(
veùÜ
<
R’d”abË
> &
r
) {

676 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
™
 = 
r
.
begš
(); 
	g™
 !ğr.
’d
(); ++it) {

677 cÚ¡ 
	gtex
 = 
™
->
m­_pos
.
x
 >> 
TILE_SHIFT
;

678 cÚ¡ 
	gtey
 = 
™
->
m­_pos
.
y
 >> 
TILE_SHIFT
;

679 
	g™
->
	g´io
 +ğ(((
ušt64_t
)
tey
è<< 48è+ (((ušt64_t)
tex
è<< 32è+ (
™
->
m­_pos
.
y
 << 16);

683 
	gM­R’d””
::
»nd”
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
) {

685 ià(
	gshaky_ÿm_ticks
 == 0) {

686 
shakyÿm
.
x
 = 
ÿm
.x;

687 
	gshakyÿm
.
	gy
 = 
ÿm
.
y
;

690 
	gshakyÿm
.
	gx
 = 
ÿm
.
x
 + (
¿nd
(è% 16 - 8è/
UNITS_PER_PIXEL_X
;

691 
	gshakyÿm
.
	gy
 = 
ÿm
.
y
 + (
¿nd
(è% 16 - 8è/
UNITS_PER_PIXEL_Y
;

694 ià(
	gTILESET_ORIENTATION
 =ğ
TILESET_ORTHOGONAL
) {

695 
ÿlcuÏ‹PriosO¹ho
(
r
);

696 
ÿlcuÏ‹PriosO¹ho
(
r_d—d
);

697 
	g¡d
::
sÜt
(
r
.
begš
(),„.
’d
(), 
´iocom·»
);

698 
	g¡d
::
sÜt
(
r_d—d
.
begš
(),„_d—d.
’d
(), 
´iocom·»
);

699 
»nd”O¹ho
(
r
, 
r_d—d
);

701 
ÿlcuÏ‹PriosIso
(
r
);

702 
ÿlcuÏ‹PriosIso
(
r_d—d
);

703 
	g¡d
::
sÜt
(
r
.
begš
(),„.
’d
(), 
´iocom·»
);

704 
	g¡d
::
sÜt
(
r_d—d
.
begš
(),„_d—d.
’d
(), 
´iocom·»
);

705 
»nd”Iso
(
r
, 
r_d—d
);

709 
	gM­R’d””
::
	$ü—‹BackgroundSurçû
() {

710 
	`SDL_F»eSurçû
(
backgroundsurçû
);

711 
backgroundsurçû
 = 
	`ü—‹Surçû
(

712 
VIEW_W
 + 2 * 
movedi¡ªû_to_»»nd”
 * 
TILE_W
 * 
t£t
.
max_size_x
,

713 
VIEW_H
 + 2 * 
movedi¡ªû_to_»»nd”
 * 
TILE_H
 * 
t£t
.
max_size_y
);

715 
	`SDL_S‘CŞÜKey
(
backgroundsurçû
, 0, 0);

716 
	}
}

718 
	gM­R’d””
::
d¿wR’d”abË
(
veùÜ
<
R’d”abË
>::
™”©Ü
 
r_cursÜ
) {

719 ià(
r_cursÜ
->
¥r™e
) {

720 
SDL_Reù
 
de¡
;

721 
Pošt
 
	gp
 = 
m­_to_sü“n
(
r_cursÜ
->
m­_pos
.
x
,„_cursÜ->m­_pos.
y
, 
shakyÿm
.x, shakycam.y);

722 
	gde¡
.
	gx
 = 
p
.
x
 - 
r_cursÜ
->
off£t
.x;

723 
	gde¡
.
	gy
 = 
p
.
y
 - 
r_cursÜ
->
off£t
.y;

724 
SDL_Bl™Surçû
(
r_cursÜ
->
¥r™e
, &r_cursÜ->
¤c
, 
sü“n
, &
de¡
);

728 
	gM­R’d””
::
	$»nd”IsoLay”
(
SDL_Surçû
 *
wh”‘Ü’d”
, 
Pošt
 
off£t
, cÚ¡ 
Ïy”d©a
[256][256]) {

729 
i
;

730 
j
;

731 
SDL_Reù
 
de¡
;

732 cÚ¡ 
Pošt
 
uµ”right
 = 
	`sü“n_to_m­
(0, 0, 
shakyÿm
.
x
, shakyÿm.
y
);

733 cÚ¡ 
max_tes_width
 = (
VIEW_W
 / 
TILE_W
è+ 2 * 
t£t
.
max_size_x
;

734 cÚ¡ 
max_tes_height
 = ((2 * 
VIEW_H
 / 
TILE_H
è+ 2 * 
t£t
.
max_size_y
) * 2;

736 
j
 = 
uµ”right
.
y
 / 
UNITS_PER_TILE
 - 
t£t
.
max_size_y
 +£t.
max_size_x
;

737 
i
 = 
uµ”right
.
x
 / 
UNITS_PER_TILE
 - 
t£t
.
max_size_y
 -£t.
max_size_x
;

739 
y
 = 
max_tes_height
 ; y; --y) {

740 
tes_width
 = 0;

743 ià(
i
 < -1) {

744 
j
 +ğ
i
 + 1;

745 
tes_width
 -ğ
i
 + 1;

746 
i
 = -1;

748 cÚ¡ 
d
 = 
j
 - 
h
;

749 ià(
d
 >= 0) {

750 
j
 -ğ
d
; 
tes_width
 +ğd; 
i
 += d;

752 cÚ¡ 
j_’d
 = 
¡d
::
	`max
((
j
+
i
-
w
+1), std::max(j - 
max_tes_width
, 0));

755 
Pošt
 
p
 = 
	`m­_to_sü“n
(
i
 * 
UNITS_PER_TILE
, 
j
 * UNITS_PER_TILE, 
shakyÿm
.
x
, shakyÿm.
y
);

756 
p
 = 
	`ûÁ”_te
(p);

758 
j
 > 
j_’d
) {

759 --
j
;

760 ++
i
;

761 ++
tes_width
;

762 
p
.
x
 +ğ
TILE_W
;

764 cÚ¡ 
cu¼’t_te
 = 
Ïy”d©a
[
i
][
j
];

766 ià(
cu¼’t_te
) {

767 
de¡
.
x
 = 
p
.x - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x + offset.x;

768 
de¡
.
y
 = 
p
.y - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y + offset.y;

771 
	`SDL_Bl™Surçû
(
t£t
.
¥r™es
, &Ñ£t.
tes
[
cu¼’t_te
].
¤c
), 
wh”‘Ü’d”
, &
de¡
);

774 
j
 +ğ
tes_width
;

775 
i
 -ğ
tes_width
;

776 ià(
y
 % 2)

777 
i
++;

779 
j
++;

781 
	}
}

783 
	gM­R’d””
::
»nd”IsoBackObjeùs
(
veùÜ
<
R’d”abË
> &
r
) {

784 
veùÜ
<
R’d”abË
>::
™”©Ü
 
™
;

785 
	g™
 = 
r
.
begš
(); iˆ!ğr.
’d
(); ++it)

786 
d¿wR’d”abË
(
™
);

789 
	gM­R’d””
::
»nd”IsoFrÚtObjeùs
(
veùÜ
<
R’d”abË
> &
r
) {

790 
i
;

791 
	gj
;

792 
SDL_Reù
 
	gde¡
;

793 cÚ¡ 
Pošt
 
	guµ”right
 = 
sü“n_to_m­
(0, 0, 
shakyÿm
.
x
, shakyÿm.
y
);

794 cÚ¡ 
	gmax_tes_width
 = (
VIEW_W
 / 
TILE_W
è+ 2 * 
t£t
.
max_size_x
;

795 cÚ¡ 
	gmax_tes_height
 = ((
VIEW_H
 / 
TILE_H
è+ 2 * 
t£t
.
max_size_y
)*2;

797 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
r_cursÜ
 = 
r
.
begš
();

798 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
r_’d
 = 
r
.
’d
();

801 
	gj
 = 
uµ”right
.
y
 / 
UNITS_PER_TILE
 - 
t£t
.
max_size_y
 +£t.
max_size_x
;

802 
	gi
 = 
uµ”right
.
x
 / 
UNITS_PER_TILE
 - 
t£t
.
max_size_y
 -£t.
max_size_x
;

804 
	gr_cursÜ
 !ğ
r_’d
 && ((
r_cursÜ
->
m­_pos
.
x
>>
TILE_SHIFT
è+ (r_cursÜ->m­_pos.
y
>>TILE_SHIFTè< 
i
 + 
j
 || (r_cursor->map_pos.x>>TILE_SHIFT) < i))

805 ++
r_cursÜ
;

807 
	gy
 = 
max_tes_height
 ; y; --y) {

808 
	gtes_width
 = 0;

811 ià(
	gi
 < -1) {

812 
	gj
 +ğ
i
 + 1;

813 
	gtes_width
 -ğ
i
 + 1;

814 
	gi
 = -1;

816 cÚ¡ 
	gd
 = 
j
 - 
h
;

817 ià(
	gd
 >= 0) {

818 
j
 -ğ
d
; 
	gtes_width
 +ğd; 
	gi
 += d;

820 cÚ¡ 
	gj_’d
 = 
¡d
::
max
((
j
+
i
-
w
+1), std::max(j - 
max_tes_width
, 0));

823 
Pošt
 
	gp
 = 
m­_to_sü“n
(
i
 * 
UNITS_PER_TILE
, 
j
 * UNITS_PER_TILE, 
shakyÿm
.
x
, shakyÿm.
y
);

824 
	gp
 = 
ûÁ”_te
(
p
);

825 
	gj
 > 
	gj_’d
) {

826 --
	gj
;

827 ++
	gi
;

828 ++
	gtes_width
;

829 
	gp
.
	gx
 +ğ
TILE_W
;

831 cÚ¡ 
	gcu¼’t_te
 = 
objeù
[
i
][
j
];

833 ià(
	gcu¼’t_te
) {

835 
	gde¡
.
	gx
 = 
p
.
x
 - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x;

836 
	gde¡
.
	gy
 = 
p
.
y
 - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y;

837 
SDL_Bl™Surçû
(
t£t
.
¥r™es
, &Ñ£t.
tes
[
cu¼’t_te
].
¤c
), 
sü“n
, &
de¡
);

841 
	gr_cursÜ
 !ğ
r_’d
 && (
r_cursÜ
->
m­_pos
.
x
>>
TILE_SHIFT
è=ğ
i
 && (r_cursÜ->m­_pos.
y
>>TILE_SHIFTè=ğ
j
) {

842 
d¿wR’d”abË
(
r_cursÜ
);

843 ++
	gr_cursÜ
;

846 
	gj
 +ğ
tes_width
;

847 
	gi
 -ğ
tes_width
;

848 ià(
	gy
 % 2)

849 
	gi
++;

851 
	gj
++;

852 
	gr_cursÜ
 !ğ
r_’d
 && ((
r_cursÜ
->
m­_pos
.
x
>>
TILE_SHIFT
è+ (r_cursÜ->m­_pos.
y
>>TILE_SHIFTè< 
i
 + 
j
 || (r_cursor->map_pos.x>>TILE_SHIFT) <= i))

853 ++
r_cursÜ
;

857 
	gM­R’d””
::
»nd”Iso
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
) {

858 cÚ¡ 
Pošt
 
nuÎoff£t
(0, 0);

859 ià(
	gANIMATED_TILES
) {

860 ià(
	gbackground
è
»nd”IsoLay”
(
sü“n
, 
nuÎoff£t
, 
background
);

861 ià(
	gäšge
è
»nd”IsoLay”
(
sü“n
, 
nuÎoff£t
, 
äšge
);

864 ià(
abs
(
shakyÿm
.
x
 - 
backgroundsurçûoff£t
.xè> 
movedi¡ªû_to_»»nd”
 * 
	gTILE_W


865 || 
abs
(
shakyÿm
.
y
 - 
backgroundsurçûoff£t
.yè> 
movedi¡ªû_to_»»nd”
 * 
	gTILE_H


866 || 
	g»·št_background
) {

868 ià(!
	gbackgroundsurçû
)

869 
ü—‹BackgroundSurçû
();

871 
	g»·št_background
 = 
çl£
;

873 
	gbackgroundsurçûoff£t
 = 
shakyÿm
;

875 
SDL_FlReù
(
backgroundsurçû
, 0, 0);

876 
Pošt
 
off
(
VIEW_W_HALF
, 
VIEW_H_HALF
);

877 ià(
	gbackground
è
»nd”IsoLay”
(
backgroundsurçû
, 
off
, 
background
);

878 ià(
	gäšge
è
»nd”IsoLay”
(
backgroundsurçû
, 
off
, 
äšge
);

880 
Pošt
 
	gp
 = 
m­_to_sü“n
(
shakyÿm
.
x
, shakyÿm.
y
 , 
backgroundsurçûoff£t
.x, backgroundsurfaceoffset.y);

881 
SDL_Reù
 
	g¤c
;

882 
	g¤c
.
	gx
 = 
p
.
x
;

883 
	g¤c
.
	gy
 = 
p
.
y
;

884 
	g¤c
.
	gw
 = 2 * 
VIEW_W
;

885 
	g¤c
.
	gh
 = 2 * 
VIEW_H
;

886 
SDL_Bl™Surçû
(
backgroundsurçû
, &
¤c
, 
sü“n
 , 0);

888 ià(
	gobjeù
è
»nd”IsoBackObjeùs
(
r_d—d
);

889 ià(
	gobjeù
è
»nd”IsoFrÚtObjeùs
(
r
);

890 ià(
	gfÜeground
è
»nd”IsoLay”
(
sü“n
, 
nuÎoff£t
, 
fÜeground
);

891 
checkToŞt
();

894 
	gM­R’d””
::
	$»nd”O¹hoLay”
(cÚ¡ 
Ïy”d©a
[256][256]) {

896 cÚ¡ 
Pošt
 
uµ”right
 = 
	`sü“n_to_m­
(0, 0, 
shakyÿm
.
x
, shakyÿm.
y
);

898 
¡¬tj
 = 
	`max
(0, 
uµ”right
.
y
 / 
UNITS_PER_TILE
);

899 
¡¬ti
 = 
	`max
(0, 
uµ”right
.
x
 / 
UNITS_PER_TILE
);

900 cÚ¡ 
max_tes_width
 = 
	`mš
(
w
, 
¡©ic_ÿ¡
<>(
¡¬ti
 + (
VIEW_W
 / 
TILE_W
è+ 2 * 
t£t
.
max_size_x
));

901 cÚ¡ 
max_tes_height
 = 
	`mš
(
h
, 
¡©ic_ÿ¡
<>(
¡¬tj
 + (
VIEW_H
 / 
TILE_H
è+ 2 * 
t£t
.
max_size_y
));

903 
i
;

904 
j
;

906 
j
 = 
¡¬tj
; j < 
max_tes_height
; j++) {

907 
Pošt
 
p
 = 
	`m­_to_sü“n
(
¡¬ti
 * 
UNITS_PER_TILE
, 
j
 * UNITS_PER_TILE, 
shakyÿm
.
x
, shakyÿm.
y
);

908 
p
 = 
	`ûÁ”_te
(p);

909 
i
 = 
¡¬ti
; i < 
max_tes_width
; i++) {

911 ià(cÚ¡ 
cu¼’t_te
 = 
Ïy”d©a
[
i
][
j
]) {

912 
SDL_Reù
 
de¡
;

913 
de¡
.
x
 = 
p
.x - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x;

914 
de¡
.
y
 = 
p
.y - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y;

915 
	`SDL_Bl™Surçû
(
t£t
.
¥r™es
, &Ñ£t.
tes
[
cu¼’t_te
].
¤c
), 
sü“n
, &
de¡
);

917 
p
.
x
 +ğ
TILE_W
;

920 
	}
}

922 
	gM­R’d””
::
»nd”O¹hoBackObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
) {

924 
veùÜ
<
R’d”abË
>::
™”©Ü
 
™
;

925 
	g™
 = 
r
.
begš
(); iˆ!ğr.
’d
(); ++it)

926 
d¿wR’d”abË
(
™
);

929 
	gM­R’d””
::
»nd”O¹hoFrÚtObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
) {

931 
i
;

932 
	gj
;

933 
SDL_Reù
 
	gde¡
;

934 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
r_cursÜ
 = 
r
.
begš
();

935 
	gveùÜ
<
	gR’d”abË
>::
™”©Ü
 
r_’d
 = 
r
.
’d
();

937 cÚ¡ 
Pošt
 
	guµ”right
 = 
sü“n_to_m­
(0, 0, 
shakyÿm
.
x
, shakyÿm.
y
);

939 
	g¡¬tj
 = 
max
(0, 
uµ”right
.
y
 / 
UNITS_PER_TILE
);

940 
	g¡¬ti
 = 
max
(0, 
uµ”right
.
x
 / 
UNITS_PER_TILE
);

941 cÚ¡ 
	gmax_tes_width
 = 
mš
(
w
, 
¡©ic_ÿ¡
<>(
¡¬ti
 + (
VIEW_W
 / 
TILE_W
è+ 2 * 
t£t
.
max_size_x
));

942 cÚ¡ 
	gmax_tes_height
 = 
mš
(
h
, 
¡©ic_ÿ¡
<>(
¡¬tj
 + (
VIEW_H
 / 
TILE_H
è+ 2 * 
t£t
.
max_size_y
));

944 
	gr_cursÜ
 !ğ
r_’d
 && (
r_cursÜ
->
m­_pos
.
y
>>
TILE_SHIFT
è< 
¡¬tj
)

945 ++
r_cursÜ
;

947 
	gj
 = 
¡¬tj
; j<
	gmax_tes_height
; j++) {

948 
Pošt
 
	gp
 = 
m­_to_sü“n
(
¡¬ti
 * 
UNITS_PER_TILE
, 
j
 * UNITS_PER_TILE, 
shakyÿm
.
x
, shakyÿm.
y
);

949 
	gp
 = 
ûÁ”_te
(
p
);

950 
	gi
 = 
¡¬ti
; i<
	gmax_tes_width
; i++) {

952 ià(cÚ¡ 
	gcu¼’t_te
 = 
objeù
[
i
][
j
]) {

953 
de¡
.
x
 = 
p
.x - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x;

954 
	gde¡
.
	gy
 = 
p
.
y
 - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y;

955 
SDL_Bl™Surçû
(
t£t
.
¥r™es
, &Ñ£t.
tes
[
cu¼’t_te
].
¤c
), 
sü“n
, &
de¡
);

957 
	gp
.
	gx
 +ğ
TILE_W
;

959 
	gr_cursÜ
 !ğ
r_’d
 && (
r_cursÜ
->
m­_pos
.
y
>>
TILE_SHIFT
è=ğ
j
 && (r_cursÜ->m­_pos.
x
>>TILE_SHIFTè< 
i
)

960 ++
r_cursÜ
;

963 
	gr_cursÜ
 !ğ
r_’d
 && (
r_cursÜ
->
m­_pos
.
y
>>
TILE_SHIFT
è=ğ
j
 && (r_cursÜ->m­_pos.
x
>>TILE_SHIFTè=ğ
i
)

964 
d¿wR’d”abË
(
r_cursÜ
++);

966 
	gr_cursÜ
 !ğ
r_’d
 && (
r_cursÜ
->
m­_pos
.
y
>>
TILE_SHIFT
è<ğ
j
)

967 ++
r_cursÜ
;

971 
	gM­R’d””
::
»nd”O¹ho
(
veùÜ
<
R’d”abË
> &
r
, veùÜ<R’d”abË> &
r_d—d
) {

972 ià(
	gbackground
è
»nd”O¹hoLay”
(
background
);

973 ià(
	gäšge
è
»nd”O¹hoLay”
(
äšge
);

974 ià(
	gobjeù
è
»nd”O¹hoBackObjeùs
(
r_d—d
);

975 ià(
	gobjeù
è
»nd”O¹hoFrÚtObjeùs
(
r
);

976 ià(
	gfÜeground
è
»nd”O¹hoLay”
(
fÜeground
);

978 
checkToŞt
();

981 
	gM­R’d””
::
	$execu‹OnLßdEv’ts
() {

982 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
™
;

985 
™
 = 
ev’ts
.
	`’d
(); iˆ!ğev’ts.
	`begš
(); ) {

986 --
™
;

989 ià(!
	`isAùive
(*
™
)) ;

991 ià((*
™
).
ty³
 == "on_load") {

992 ià(
	`execu‹Ev’t
(*
™
))

993 
™
 = 
ev’ts
.
	`”a£
(it);

996 
	}
}

999 
	gM­R’d””
::
	$checkEv’ts
(
Pošt
 
loc
) {

1000 
Pošt
 
m­loc
;

1001 
m­loc
.
x
 = 
loc
.x >> 
TILE_SHIFT
;

1002 
m­loc
.
y
 = 
loc
.y >> 
TILE_SHIFT
;

1003 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
™
;

1006 
™
 = 
ev’ts
.
	`’d
(); iˆ!ğev’ts.
	`begš
(); ) {

1007 --
™
;

1010 ià(!
	`isAùive
(*
™
)) ;

1012 ià((*
™
).
ty³
 == "on_clear") {

1013 ià(
’em›s_ş—»d
 && 
	`execu‹Ev’t
(*
™
))

1014 
™
 = 
ev’ts
.
	`”a£
(it);

1016 ià(
m­loc
.
x
 >ğ(*
™
).
loÿtiÚ
.x &&

1017 
m­loc
.
y
 >ğ(*
™
).
loÿtiÚ
.y &&

1018 
m­loc
.
x
 <ğ(*
™
).
loÿtiÚ
.x + (*™).loÿtiÚ.
w
-1 &&

1019 
m­loc
.
y
 <ğ(*
™
).
loÿtiÚ
.y + (*™).loÿtiÚ.
h
-1) {

1020 ià(
	`execu‹Ev’t
(*
™
))

1021 
™
 = 
ev’ts
.
	`”a£
(it);

1024 
	}
}

1035 
	gM­R’d””
::
	$checkHÙ¥Ùs
() {

1036 
show_toŞt
 = 
çl£
;

1038 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
™
;

1042 
™
 = 
ev’ts
.
	`’d
(); iˆ!ğev’ts.
	`begš
(); ) {

1043 --
™
;

1045 
x
=
™
->
hÙ¥Ù
.x; x < it->hÙ¥Ù.x + it->hÙ¥Ù.
w
; ++x) {

1046 
y
=
™
->
hÙ¥Ù
.y; y < it->hÙ¥Ù.y + it->hÙ¥Ù.
h
; ++y) {

1048 
boŞ
 
backgroundm©ch
 = 
çl£
;

1049 
boŞ
 
objeùm©ch
 = 
çl£
;

1051 
Pošt
 
p
 = 
	`m­_to_sü“n
(
x
 * 
UNITS_PER_TILE
,

1052 
y
 * 
UNITS_PER_TILE
,

1053 
shakyÿm
.
x
,

1054 
shakyÿm
.
y
);

1055 
p
 = 
	`ûÁ”_te
(p);

1057 ià(cÚ¡ 
cu¼’t_te
 = 
background
[
x
][
y
]) {

1059 
SDL_Reù
 
de¡
;

1060 
de¡
.
x
 = 
p
.x - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x;

1061 
de¡
.
y
 = 
p
.y - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y;

1062 
de¡
.
w
 = 
t£t
.
tes
[
cu¼’t_te
].
¤c
.w;

1063 
de¡
.
h
 = 
t£t
.
tes
[
cu¼’t_te
].
¤c
.h;

1065 ià(
	`isW™hš
(
de¡
, 
š±
->
mou£
)) {

1070 
Pošt
 
p1
;

1071 
p1
.
x
 = 
š±
->
mou£
.x - 
de¡
.x + 
t£t
.
tes
[
cu¼’t_te
].
¤c
.x;

1072 
p1
.
y
 = 
š±
->
mou£
.y - 
de¡
.y + 
t£t
.
tes
[
cu¼’t_te
].
¤c
.y;

1073 
backgroundm©ch
 = 
	`checkPix–
(
p1
, 
t£t
.
¥r™es
);

1074 
t_pos
.
x
 = 
de¡
.x + de¡.
w
/2;

1075 
t_pos
.
y
 = 
de¡
.y;

1078 ià(cÚ¡ 
cu¼’t_te
 = 
objeù
[
x
][
y
]) {

1079 
SDL_Reù
 
de¡
;

1080 
de¡
.
x
 = 
p
.x - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.x;

1081 
de¡
.
y
 = 
p
.y - 
t£t
.
tes
[
cu¼’t_te
].
off£t
.y;

1082 
de¡
.
w
 = 
t£t
.
tes
[
cu¼’t_te
].
¤c
.w;

1083 
de¡
.
h
 = 
t£t
.
tes
[
cu¼’t_te
].
¤c
.h;

1085 ià(
	`isW™hš
(
de¡
, 
š±
->
mou£
)) {

1086 
Pošt
 
p1
;

1087 
p1
.
x
 = 
š±
->
mou£
.x - 
de¡
.x + 
t£t
.
tes
[
cu¼’t_te
].
¤c
.x;

1088 
p1
.
y
 = 
š±
->
mou£
.y - 
de¡
.y + 
t£t
.
tes
[
cu¼’t_te
].
¤c
.y;

1089 
objeùm©ch
 = 
	`checkPix–
(
p1
, 
t£t
.
¥r™es
);

1090 
t_pos
.
x
 = 
de¡
.x + de¡.
w
/2;

1091 
t_pos
.
y
 = 
de¡
.y;

1094 ià(
backgroundm©ch
 || 
objeùm©ch
) {

1096 ià(!
	`isAùive
(*
™
)) ;

1099 ià((*
™
).
hÙ¥Ù
.
h
 == 0) ;

1102 ià((*
™
).
coŞdown_ticks
 != 0) ;

1105 ià(!(*
™
).
toŞt
.
	`em±y
(è&& 
TOOLTIP_CONTEXT
 !ğ
TOOLTIP_MENU
) {

1106 
show_toŞt
 = 
Œue
;

1107 ià(!
t_buf
.
	`com·»Fœ¡Lše
((*
™
).
toŞt
)) {

1108 
t_buf
.
	`ş—r
();

1109 
t_buf
.
	`addText
((*
™
).
toŞt
);

1111 
TOOLTIP_CONTEXT
 = 
TOOLTIP_MAP
;

1112 } ià(
TOOLTIP_CONTEXT
 !ğ
TOOLTIP_MENU
) {

1113 
TOOLTIP_CONTEXT
 = 
TOOLTIP_NONE
;

1116 ià((
	`abs
(
ÿm
.
x
 - (*
™
).
loÿtiÚ
.x * 
UNITS_PER_TILE
è< 
CLICK_RANGE
)

1117 && (
	`abs
(
ÿm
.
y
 - (*
™
).
loÿtiÚ
.y * 
UNITS_PER_TILE
è< 
CLICK_RANGE
)) {

1121 ià(!
š±
->
´essšg
[
MAIN1
]) ;

1122 ià(
š±
->
lock
[
MAIN1
]) ;

1124 
š±
->
lock
[
MAIN1
] = 
Œue
;

1125 ià(
	`execu‹Ev’t
(*
™
))

1126 
™
 = 
ev’ts
.
	`”a£
(it);

1129 } 
show_toŞt
 = 
çl£
;

1133 
	}
}

1135 
	gM­R’d””
::
	$checkN—»¡Ev’t
(
Pošt
 
loc
) {

1136 ià(
š±
->
´essšg
[
ACCEPT
] && !š±->
lock
[ACCEPT]) {

1137 ià(
š±
->
´essšg
[
ACCEPT
]èš±->
lock
[ACCEPT] = 
Œue
;

1139 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
™
;

1140 
veùÜ
<
M­_Ev’t
>::
™”©Ü
 
Ã¬e¡
;

1141 
be¡_di¡ªû
 = 
¡d
::
num”ic_lim™s
<>::
	`max
();

1144 
™
 = 
ev’ts
.
	`’d
(); iˆ!ğev’ts.
	`begš
(); ) {

1145 --
™
;

1148 ià(!
	`isAùive
(*
™
)) ;

1151 ià((*
™
).
hÙ¥Ù
.
h
 == 0) ;

1154 ià((*
™
).
coŞdown_ticks
 != 0) ;

1156 
Pošt
 
ev_loc
;

1157 
ev_loc
.
x
 = (*
™
).
loÿtiÚ
.x * 
UNITS_PER_TILE
;

1158 
ev_loc
.
y
 = (*
™
).
loÿtiÚ
.y * 
UNITS_PER_TILE
;

1159 
di¡ªû
 = ()
	`ÿlcDi¡
(
loc
,
ev_loc
);

1160 ià(
di¡ªû
 < 
CLICK_RANGE
 && di¡ªû < 
be¡_di¡ªû
) {

1161 
be¡_di¡ªû
 = 
di¡ªû
;

1162 
Ã¬e¡
 = 
™
;

1165 ià(
	`execu‹Ev’t
(*
Ã¬e¡
))

1166 
ev’ts
.
	`”a£
(
Ã¬e¡
);

1168 
	}
}

1170 
boŞ
 
	gM­R’d””
::
	$isAùive
(cÚ¡ 
M­_Ev’t
 &
e
){

1171 
i
=0; i < 
e
.
compÚ’ts
.
	`size
(); i++) {

1172 ià(
e
.
compÚ’ts
[
i
].
ty³
 == "requires_not") {

1173 ià(
ÿmp
->
	`checkStus
(
e
.
compÚ’ts
[
i
].
s
)) {

1174  
çl£
;

1177 ià(
e
.
compÚ’ts
[
i
].
ty³
 == "requires_status") {

1178 ià(!
ÿmp
->
	`checkStus
(
e
.
compÚ’ts
[
i
].
s
)) {

1179  
çl£
;

1182 ià(
e
.
compÚ’ts
[
i
].
ty³
 == "requires_item") {

1183 ià(!
ÿmp
->
	`checkI‹m
(
e
.
compÚ’ts
[
i
].
x
)) {

1184  
çl£
;

1187 ià(
e
.
compÚ’ts
[
i
].
ty³
 == "requires_level") {

1188 ià(
ÿmp
->
h”o
->
Ëv–
 < 
e
.
compÚ’ts
[
i
].
x
) {

1189  
çl£
;

1192 ià(
e
.
compÚ’ts
[
i
].
ty³
 == "requires_not_level") {

1193 ià(
ÿmp
->
h”o
->
Ëv–
 >ğ
e
.
compÚ’ts
[
i
].
x
) {

1194  
çl£
;

1198  
Œue
;

1199 
	}
}

1201 
	gM­R’d””
::
	$checkToŞt
() {

1202 ià(
show_toŞt
)

1203 
t
->
	`»nd”
(
t_buf
, 
t_pos
, 
STYLE_TOPLABEL
);

1204 
	}
}

1213 
boŞ
 
	gM­R’d””
::
	$execu‹Ev’t
(
M­_Ev’t
 &
ev
) {

1214 if(&
ev
 =ğ
NULL
è 
çl£
;

1217 ià(
ev
.
coŞdown_ticks
 > 0è 
çl£
;

1220 
ev
.
coŞdown_ticks
 =ƒv.
coŞdown
;

1222 cÚ¡ 
Ev’t_CompÚ’t
 *
ec
;

1223 
boŞ
 
de¡roy_ev’t
 = 
çl£
;

1225 
i
=0; i<
ev
.
compÚ’ts
.
	`size
(); i++) {

1226 
ec
 = &
ev
.
compÚ’ts
[
i
];

1228 ià(
ec
->
ty³
 == "set_status") {

1229 
ÿmp
->
	`£tStus
(
ec
->
s
);

1231 ià(
ec
->
ty³
 == "unset_status") {

1232 
ÿmp
->
	`un£tStus
(
ec
->
s
);

1234 ià(
ec
->
ty³
 == "intermap") {

1236 ià(
	`feExi¡s
(
mods
->
	`loÿ‹
("m­s/" + 
ec
->
s
))) {

1237 
‹ËpÜtiÚ
 = 
Œue
;

1238 
‹ËpÜt_m­Çme
 = 
ec
->
s
;

1239 
‹ËpÜt_de¡š©iÚ
.
x
 = 
ec
->x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1240 
‹ËpÜt_de¡š©iÚ
.
y
 = 
ec
->y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1243 
de¡roy_ev’t
 = 
Œue
;

1244 
log_msg
 = 
msg
->
	`g‘
("Unknown destination");

1247 ià(
ec
->
ty³
 == "intramap") {

1248 
‹ËpÜtiÚ
 = 
Œue
;

1249 
‹ËpÜt_m­Çme
 = "";

1250 
‹ËpÜt_de¡š©iÚ
.
x
 = 
ec
->x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1251 
‹ËpÜt_de¡š©iÚ
.
y
 = 
ec
->y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1253 ià(
ec
->
ty³
 == "mapmod") {

1254 ià(
ec
->
s
 == "collision") {

1255 
cŞlisiÚ
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1256 
cŞlid”
.
cŞm­
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1258 ià(
ec
->
s
 == "object") {

1259 
objeù
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1261 ià(
ec
->
s
 == "foreground") {

1262 
fÜeground
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1264 ià(
ec
->
s
 == "fringe") {

1265 
äšge
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1267 ià(
ec
->
s
 == "background") {

1268 
background
[
ec
->
x
][ec->
y
] =ƒc->
z
;

1269 
»·št_background
 = 
çl£
;

1271 
m­_chªge
 = 
Œue
;

1273 ià(
ec
->
ty³
 == "soundfx") {

1274 
Pošt
 
	`pos
(0,0);

1275 
boŞ
 
loİ
 = 
çl£
;

1277 ià(
ec
->
x
 !ğ-1 &&ƒc->
y
 != -1) {

1278 ià(
ec
->
x
 !ğ0 &&ƒc->
y
 != 0) {

1279 
pos
.
x
 = 
ec
->x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1280 
pos
.
y
 = 
ec
->y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1283 ià(
ev
.
loÿtiÚ
.
x
 !ğ0 &&ƒv.loÿtiÚ.
y
 != 0) {

1284 
pos
.
x
 = 
ev
.
loÿtiÚ
.x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1285 
pos
.
y
 = 
ev
.
loÿtiÚ
.y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1288 ià(
ev
.
ty³
 == "on_load")

1289 
loİ
 = 
Œue
;

1291 
SoundMªag”
::
SoundID
 
sid
 = 
¢d
->
	`lßd
(
ec
->
s
, "MapRenderer background soundfx");

1293 
¢d
->
	`¶ay
(
sid
, 
GLOBAL_VIRTUAL_CHANNEL
, 
pos
, 
loİ
);

1294 
sids
.
	`push_back
(
sid
);

1296 ià(
ec
->
ty³
 == "loot") {

1297 
loÙ
.
	`push_back
(*
ec
);

1299 ià(
ec
->
ty³
 == "msg") {

1300 
log_msg
 = 
ec
->
s
;

1302 ià(
ec
->
ty³
 == "shakycam") {

1303 
shaky_ÿm_ticks
 = 
ec
->
x
;

1305 ià(
ec
->
ty³
 == "remove_item") {

1306 
ÿmp
->
	`»moveI‹m
(
ec
->
x
);

1308 ià(
ec
->
ty³
 == "reward_xp") {

1309 
ÿmp
->
	`»w¬dXP
(
ec
->
x
, 
Œue
);

1311 ià(
ec
->
ty³
 == "spawn") {

1312 
Pošt
 
¥awn_pos
;

1313 
¥awn_pos
.
x
 = 
ec
->x;

1314 
¥awn_pos
.
y
 = 
ec
->y;

1315 
pow”s
->
	`¥awn
(
ec
->
s
, 
¥awn_pos
);

1317 ià(
ec
->
ty³
 == "power") {

1319 
pow”_šdex
 = 
ec
->
x
;

1321 ià(
ev
.
¡©s
 =ğ
NULL
) {

1322 
ev
.
¡©s
 = 
Ãw
 
	`StBlock
();

1324 
ev
.
¡©s
->
accu¿cy
 = 1000;

1327 ià(
ev
.
pow”_¤c
.
x
 > 0) {

1328 
ev
.
¡©s
->
pos
.
x
 =ƒv.
pow”_¤c
.x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1329 
ev
.
¡©s
->
pos
.
y
 =ƒv.
pow”_¤c
.y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1333 
ev
.
¡©s
->
pos
.
x
 =ƒv.
loÿtiÚ
.x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1334 
ev
.
¡©s
->
pos
.
y
 =ƒv.
loÿtiÚ
.y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1337 
ev
.
¡©s
->
dmg_m–“_mš
 =ƒv.¡©s->
dmg_¿nged_mš
 =ƒv.¡©s->
dmg_m’t_mš
 =ƒv.
damagemš
;

1338 
ev
.
¡©s
->
dmg_m–“_max
 =ƒv.¡©s->
dmg_¿nged_max
 =ƒv.¡©s->
dmg_m’t_max
 =ƒv.
damagemax
;

1341 
Pošt
 
rg‘
;

1345 ià(
ev
.
rg‘H”o
) {

1346 
rg‘
.
x
 = 
ÿm
.x;

1347 
rg‘
.
y
 = 
ÿm
.y;

1350 ià(
ev
.
pow”_de¡
.
x
 != 0) {

1351 
rg‘
.
x
 = 
ev
.
pow”_de¡
.x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1352 
rg‘
.
y
 = 
ev
.
pow”_de¡
.y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1356 
rg‘
.
x
 = 
ev
.
¡©s
->
pos
.x;

1357 
rg‘
.
y
 = 
ev
.
¡©s
->
pos
.y;

1360 
pow”s
->
	`aùiv©e
(
pow”_šdex
, 
ev
.
¡©s
, 
rg‘
);

1363 ià(
ec
->
ty³
 == "stash") {

1364 
¡ash
 = 
Œue
;

1365 
¡ash_pos
.
x
 = 
ev
.
loÿtiÚ
.x * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1366 
¡ash_pos
.
y
 = 
ev
.
loÿtiÚ
.y * 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

1368 ià(
ec
->
ty³
 == "npc") {

1369 
ev’t_Åc
 = 
ec
->
s
;

1371 ià(
ec
->
ty³
 == "music") {

1372 ià(
this
->
music_f’ame
 !ğ
ec
->
s
) {

1373 
this
->
music_f’ame
 = 
ec
->
s
;

1374 
	`lßdMusic
();

1378 ià(
ev
.
ty³
 =ğ"run_Úû" ||ƒv.ty³ =ğ"Ú_lßd" ||ƒv.ty³ =ğ"Ú_ş—r" || 
de¡roy_ev’t
)

1379  
Œue
;

1381  
çl£
;

1382 
	}
}

1384 
	gM­R’d””
::~
	$M­R’d””
() {

1385 ià(
music
 !ğ
NULL
) {

1386 
	`Mix_H®tMusic
();

1387 
	`Mix_F»eMusic
(
music
);

1390 
t_buf
.
	`ş—r
();

1391 
	`ş—rLay”s
();

1392 
	`ş—rEv’ts
();

1393 
	`ş—rQueues
();

1394 
d–‘e
 
t
;

1397 
¢d
->
	`»£t
();

1398 !
sids
.
	`em±y
()) {

1399 
¢d
->
	`uÆßd
(
sids
.
	`back
());

1400 
sids
.
	`pİ_back
();

1402 
	}
}

	@MapRenderer.h

28 #´agm¨
Úû


29 #iâdeà
MAP_RENDERER_H


30 
	#MAP_RENDERER_H


	)

32 
	~"EÃmy.h
"

33 
	~"GameS‹PÏy.h
"

34 
	~"Uts.h
"

35 
	~"TeS‘.h
"

36 
	~"M­CŞlisiÚ.h
"

37 
	~"S‘tšgs.h
"

38 
	~"Widg‘ToŞt.h
"

40 
	~<SDL.h
>

41 
	~<SDL_image.h
>

42 
	~<SDL_mix”.h
>

44 
	~<¡ršg
>

45 
	~<queue
>

46 
	~<veùÜ
>

48 
şass
 
	gCam·ignMªag”
;

49 
şass
 
	gPow”Mªag”
;

53 şas 
	cM­_Group
 {

54 
	mpublic
:

55 
¡d
::
¡ršg
 
ÿ‹gÜy
;

56 
Pošt
 
	mpos
;

57 
Pošt
 
	m¬—
;

58 
	mËv–mš
;

59 
	mËv–max
;

60 
	mnumb”mš
;

61 
	mnumb”max
;

62 
	mchªû
;

63 
	$ş—r
() {

64 
ÿ‹gÜy
 = "";

65 
pos
.
x
 = 0;

66 
pos
.
y
 = 0;

67 
¬—
.
x
 = 0;

68 
¬—
.
y
 = 0;

69 
Ëv–mš
 = 0;

70 
Ëv–max
 = 0;

71 
numb”mš
 = 0;

72 
numb”max
 = 0;

73 
chªû
 = 1.0f;

75 
	}
};

77 şas 
	cM­_NPC
 {

78 
	mpublic
:

79 
¡d
::
¡ršg
 
id
;

80 
Pošt
 
	mpos
;

81 
	$ş—r
() {

82 
id
 = "";

83 
pos
.
x
 = 0;

84 
pos
.
y
 = 0;

86 
	}
};

88 şas 
	cM­_Ev’t
 {

89 
	mpublic
:

90 
¡d
::
¡ršg
 
ty³
;

91 
SDL_Reù
 
	mloÿtiÚ
;

92 
	m¡d
::
veùÜ
<
Ev’t_CompÚ’t
> 
compÚ’ts
;

93 
SDL_Reù
 
	mhÙ¥Ù
;

94 
	m¡d
::
¡ršg
 
toŞt
;

95 
	mcoŞdown
;

98 
Pošt
 
	mpow”_¤c
;

99 
Pošt
 
	mpow”_de¡
;

100 
boŞ
 
	mrg‘H”o
;

101 
	mdamagemš
;

102 
	mdamagemax
;

103 
	mcoŞdown_ticks
;

105 
StBlock
 *
	m¡©s
;

107 
	$M­_Ev’t
()

108 : 
	`ty³
("")

109 , 
	`compÚ’ts
(
¡d
::
veùÜ
<
Ev’t_CompÚ’t
>())

110 , 
	`toŞt
("")

111 , 
	`coŞdown
(0)

112 , 
	`rg‘H”o
(
çl£
)

113 , 
	`damagemš
(0)

114 , 
	`damagemax
(0)

115 , 
	`coŞdown_ticks
(0)

116 , 
	$¡©s
(
NULL
)

118 
loÿtiÚ
.
x
 =†oÿtiÚ.
y
 =†oÿtiÚ.
w
 =†oÿtiÚ.
h
 = 0;

119 
hÙ¥Ù
.
x
 = hÙ¥Ù.
y
 = hÙ¥Ù.
w
 = hÙ¥Ù.
h
 = 0;

120 
pow”_¤c
.
x
 =…ow”_¤c.
y
 = 0;

121 
pow”_de¡
.
x
 =…ow”_de¡.
y
 = 0;

124 ~
	$M­_Ev’t
()

126 
d–‘e
 
¡©s
;

127 
	}
}

130 şas 
	cM­_EÃmy
 {

131 
	mpublic
:

132 
¡d
::
¡ršg
 
ty³
;

133 
Pošt
 
	mpos
;

134 
	mdœeùiÚ
;

135 
	m¡d
::
queue
<
Pošt
> 
waypošts
;

136 
boŞ
 
	mwªd”
;

137 
SDL_Reù
 
	mwªd”_¬—
;

139 
M­_EÃmy
(
¡d
::
¡ršg
 
_ty³
="", 
Pošt
 
_pos
=
	$Pošt
())

140 : 
	`ty³
(
_ty³
)

141 , 
	`pos
(
_pos
)

142 , 
	`dœeùiÚ
(
	`¿nd
() % 8)

143 , 
	`waypošts
(
¡d
::
queue
<
Pošt
>())

144 , 
	$wªd”
(
çl£
)

146 
wªd”_¬—
.
x
 = 0;

147 
wªd”_¬—
.
y
 = 0;

148 
wªd”_¬—
.
w
 = 0;

149 
wªd”_¬—
.
h
 = 0;

151 
	}
};

153 şas 
	cM­R’d””
 {

154 
	m´iv©e
:

155 
Mix_Music
 *
music
;

157 
Widg‘ToŞt
 *
	mt
;

158 
ToŞtD©a
 
	mt_buf
;

159 
Pošt
 
	mt_pos
;

160 
boŞ
 
	mshow_toŞt
;

162 
boŞ
 
execu‹Ev’t
(
M­_Ev’t
 &
e
);

163 
push_’emy_group
(
M­_Group
 
g
);

164 
boŞ
 
isAùive
(cÚ¡ 
M­_Ev’t
 &
e
);

166 
lßdMusic
();

169 
	m¡d
::
veùÜ
<
M­_Ev’t
> 
ev’ts
;

172 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sids
;

174 
	tm­row
[256];

176 
m­row
 *
	mbackground
;

177 
m­row
 *
	mäšge
;

178 
m­row
 *
	mobjeù
;

179 
m­row
 *
	mfÜeground
;

180 
m­row
 *
	mcŞlisiÚ
;

186 cÚ¡ 
	mmovedi¡ªû_to_»»nd”
 = 4;

190 
execu‹OnLßdEv’ts
();

192 
d¿wR’d”abË
(
¡d
::
veùÜ
<
R’d”abË
>::
™”©Ü
 
r_cursÜ
);

196 
»nd”IsoLay”
(
SDL_Surçû
 *
wh”‘Ü’d”
, 
Pošt
 
off£t
, cÚ¡ 
Ïy”d©a
[][256]);

199 
»nd”IsoBackObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

202 
»nd”IsoFrÚtObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

203 
»nd”Iso
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

205 
»nd”O¹hoLay”
(cÚ¡ 
Ïy”d©a
[][256]);

206 
»nd”O¹hoBackObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

207 
»nd”O¹hoFrÚtObjeùs
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

208 
»nd”O¹ho
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

210 
ş—rLay”s
();

211 
ş—rQueues
();

213 
Pošt
 
	mshakyÿm
;

214 
boŞ
 
	mÃw_music
;

215 
TeS‘
 
	mt£t
;

216 
	m¡d
::
¡ršg
 
te£t
;

217 
	m¡d
::
¡ršg
 
music_f’ame
;

220 
SDL_Surçû
* 
	mbackgroundsurçû
;

223 
ü—‹BackgroundSurçû
();

226 
Pošt
 
	mbackgroundsurçûoff£t
;

229 
boŞ
 
	m»·št_background
;

231 
	mpublic
:

232 
Cam·ignMªag”
 *
ÿmp
;

233 
Pow”Mªag”
 *
	mpow”s
;

236 
M­R’d””
(
Cam·ignMªag”
 *
_ÿmp
);

237 ~
M­R’d””
();

239 
lßd
(
¡d
::
¡ršg
 
f’ame
);

240 
logic
();

241 
»nd”
(
¡d
::
veùÜ
<
R’d”abË
> &
r
, std::veùÜ<R’d”abË> &
r_d—d
);

243 
ş—rEv’ts
();

244 
checkEv’ts
(
Pošt
 
loc
);

245 
checkHÙ¥Ùs
();

246 
checkN—»¡Ev’t
(
Pošt
 
loc
);

247 
checkToŞt
();

250 
	m¡d
::
¡ršg
 
t™Ë
;

251 
	mw
;

252 
	mh
;

256 
Pošt
 
	mÿm
;

257 
Pošt
 
	mh”o_te
;

258 
Pošt
 
	m¥awn
;

259 
	m¥awn_dœ
;

263 
boŞ
 
	mm­_chªge
;

265 
M­CŞlisiÚ
 
	mcŞlid”
;

268 
	m¡d
::
queue
<
M­_EÃmy
> 
’em›s
;

271 
	m¡d
::
queue
<
M­_NPC
> 
Åcs
;

274 
	m¡d
::
veùÜ
<
Ev’t_CompÚ’t
> 
loÙ
;

277 
boŞ
 
	m‹ËpÜtiÚ
;

278 
Pošt
 
	m‹ËpÜt_de¡š©iÚ
;

279 
	m¡d
::
¡ršg
 
‹ËpÜt_m­Çme
;

280 
	m¡d
::
¡ršg
 
»¥awn_m­
;

281 
Pošt
 
	m»¥awn_pošt
;

284 
	m¡d
::
¡ršg
 
log_msg
;

287 
	mshaky_ÿm_ticks
;

290 
boŞ
 
	m¡ash
;

291 
Pošt
 
	m¡ash_pos
;

294 
boŞ
 
	m’em›s_ş—»d
;

297 
	m¡d
::
¡ršg
 
ev’t_Åc
;

	@Menu.cpp

25 
	~"M’u.h
"

26 
	~"S‘tšgs.h
"

28 
	gM’u
::
	$M’u
()

29 : 
	`background
(
NULL
)

30 , 
	`visibË
(
çl£
)

31 , 
	`sfx_İ’
(0)

32 , 
	$sfx_şo£
(0)

33 {
	}
}

35 
	gM’u
::~
	$M’u
() {

36 
	}
}

38 
M’u
::
	$®ign
() {

39 
SDL_Reù
 
‹mp
 = 
wšdow_¬—
;

41 ià(
®ignm’t
 == "topleft") {

42 
wšdow_¬—
.
x
 = 0+
‹mp
.x;

43 
wšdow_¬—
.
y
 = 0+
‹mp
.y;

44 } ià(
®ignm’t
 == "top") {

45 
wšdow_¬—
.
x
 = (
VIEW_W_HALF
-
‹mp
.
w
/2)+temp.x;

46 
wšdow_¬—
.
y
 = 0+
‹mp
.y;

47 } ià(
®ignm’t
 == "topright") {

48 
wšdow_¬—
.
x
 = (
VIEW_W
-
‹mp
.
w
)+temp.x;

49 
wšdow_¬—
.
y
 = 0+
‹mp
.y;

50 } ià(
®ignm’t
 == "left") {

51 
wšdow_¬—
.
x
 = 0+
‹mp
.x;

52 
wšdow_¬—
.
y
 = (
VIEW_H_HALF
-
‹mp
.
h
/2)+temp.y;

53 } ià(
®ignm’t
 == "center") {

54 
wšdow_¬—
.
x
 = (
VIEW_W_HALF
-
‹mp
.
w
/2)+temp.x;

55 
wšdow_¬—
.
y
 = (
VIEW_H_HALF
-
‹mp
.
h
/2)+temp.y;

56 } ià(
®ignm’t
 == "right") {

57 
wšdow_¬—
.
x
 = (
VIEW_W
-
‹mp
.
w
)+temp.x;

58 
wšdow_¬—
.
y
 = (
VIEW_H_HALF
-
‹mp
.
h
/2)+temp.y;

59 } ià(
®ignm’t
 == "bottomleft") {

60 
wšdow_¬—
.
x
 = 0+
‹mp
.x;

61 
wšdow_¬—
.
y
 = (
VIEW_H
-
‹mp
.
h
)+temp.y;

62 } ià(
®ignm’t
 == "bottom") {

63 
wšdow_¬—
.
x
 = (
VIEW_W_HALF
-
‹mp
.
w
/2)+temp.x;

64 
wšdow_¬—
.
y
 = (
VIEW_H
-
‹mp
.
h
)+temp.y;

65 } ià(
®ignm’t
 == "bottomright") {

66 
wšdow_¬—
.
x
 = (
VIEW_W
-
‹mp
.
w
)+temp.x;

67 
wšdow_¬—
.
y
 = (
VIEW_H
-
‹mp
.
h
)+temp.y;

69 
	}
}

	@Menu.h

26 #´agm¨
Úû


27 #iâdeà
MENU_H


28 
	#MENU_H


	)

30 
	~<SDL_image.h
>

31 
	~<¡ršg
>

32 
	~"SoundMªag”.h
"

34 şas 
	cM’u
 {

35 
	m´Ùeùed
:

37 
SDL_Surçû
 *
background
;

39 
	mpublic
:

40 
M’u
();

41 
	mvœtu®
 ~
M’u
();

43 
boŞ
 
	mvisibË
;

44 
SDL_Reù
 
	mwšdow_¬—
;

45 
	m¡d
::
¡ršg
 
®ignm’t
;

47 
vœtu®
 
®ign
();

48 
vœtu®
 
»nd”
() = 0;

50 
	mSoundMªag”
::
SoundID
 
sfx_İ’
;

51 
	mSoundMªag”
::
SoundID
 
sfx_şo£
;

	@MenuActionBar.cpp

25 
	~"FeP¬£r.h
"

26 
	~"M’u.h
"

27 
	~"M’uAùiÚB¬.h
"

28 
	~"Pow”Mªag”.h
"

29 
	~"Sh¬edResourûs.h
"

30 
	~"S‘tšgs.h
"

31 
	~"StBlock.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"Widg‘Lab–.h
"

34 
	~"Widg‘ToŞt.h
"

36 
	~<¡ršg
>

37 
	~<s¡»am
>

38 
	~<şim™s
>

40 
usšg
 
Çme¥aû
 
	g¡d
;

43 
	gM’uAùiÚB¬
::
	$M’uAùiÚB¬
(
Pow”Mªag”
 *
_pow”s
, 
StBlock
 *
_h”o
, 
SDL_Surçû
 *
_icÚs
) {

44 
pow”s
 = 
_pow”s
;

45 
h”o
 = 
_h”o
;

46 
icÚs
 = 
_icÚs
;

48 
¤c
.
x
 = 0;

49 
¤c
.
y
 = 0;

50 
¤c
.
w
 = 
ICON_SIZE
;

51 
¤c
.
h
 = 
ICON_SIZE
;

52 
d¿g_´ev_¦Ù
 = -1;

53 
Ï¡_mou£
.
x
 = 0;

54 
Ï¡_mou£
.
y
 = 0;

56 
	`ş—r
();

58 
i
=0;i<16;i++) {

59 
Ïb–s
[
i
] = 
Ãw
 
	`Widg‘Lab–
();

62 
	`lßdG¿phics
();

64 
	}
}

66 
	gM’uAùiÚB¬
::
	$upd©e
() {

69 
FeP¬£r
 
šfe
;

71 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/actionbar.txt"))) {

72 
šfe
.
	`Ãxt
()) {

73 
šfe
.
v®
 = infile.val + ',';

75 ià(
šfe
.
key
 == "slot1") {

76 
¦Ùs
[0].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

77 
¦Ùs
[0].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

78 
¦Ùs
[0].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

79 
¦Ùs
[0].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

80 } ià(
šfe
.
key
 == "slot2") {

81 
¦Ùs
[1].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

82 
¦Ùs
[1].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

83 
¦Ùs
[1].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

84 
¦Ùs
[1].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

85 } ià(
šfe
.
key
 == "slot3") {

86 
¦Ùs
[2].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

87 
¦Ùs
[2].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

88 
¦Ùs
[2].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

89 
¦Ùs
[2].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

90 } ià(
šfe
.
key
 == "slot4") {

91 
¦Ùs
[3].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

92 
¦Ùs
[3].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

93 
¦Ùs
[3].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

94 
¦Ùs
[3].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

95 } ià(
šfe
.
key
 == "slot5") {

96 
¦Ùs
[4].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

97 
¦Ùs
[4].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

98 
¦Ùs
[4].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

99 
¦Ùs
[4].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

100 } ià(
šfe
.
key
 == "slot6") {

101 
¦Ùs
[5].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

102 
¦Ùs
[5].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

103 
¦Ùs
[5].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

104 
¦Ùs
[5].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

105 } ià(
šfe
.
key
 == "slot7") {

106 
¦Ùs
[6].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

107 
¦Ùs
[6].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

108 
¦Ùs
[6].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

109 
¦Ùs
[6].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

110 } ià(
šfe
.
key
 == "slot8") {

111 
¦Ùs
[7].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

112 
¦Ùs
[7].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

113 
¦Ùs
[7].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

114 
¦Ùs
[7].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

115 } ià(
šfe
.
key
 == "slot9") {

116 
¦Ùs
[8].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

117 
¦Ùs
[8].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

118 
¦Ùs
[8].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

119 
¦Ùs
[8].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

120 } ià(
šfe
.
key
 == "slot10") {

121 
¦Ùs
[9].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

122 
¦Ùs
[9].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

123 
¦Ùs
[9].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

124 
¦Ùs
[9].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

125 } ià(
šfe
.
key
 == "slot_M1") {

126 
¦Ùs
[10].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

127 
¦Ùs
[10].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

128 
¦Ùs
[10].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

129 
¦Ùs
[10].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

130 } ià(
šfe
.
key
 == "slot_M2") {

131 
¦Ùs
[11].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

132 
¦Ùs
[11].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

133 
¦Ùs
[11].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

134 
¦Ùs
[11].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

135 } ià(
šfe
.
key
 == "char_menu") {

136 
m’us
[0].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

137 
m’us
[0].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

138 
m’us
[0].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

139 
m’us
[0].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

140 } ià(
šfe
.
key
 == "inv_menu") {

141 
m’us
[1].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

142 
m’us
[1].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

143 
m’us
[1].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

144 
m’us
[1].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

145 } ià(
šfe
.
key
 == "powers_menu") {

146 
m’us
[2].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

147 
m’us
[2].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

148 
m’us
[2].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

149 
m’us
[2].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

150 } ià(
šfe
.
key
 == "log_menu") {

151 
m’us
[3].
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

152 
m’us
[3].
y
 = 
wšdow_¬—
.y+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

153 
m’us
[3].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

154 
m’us
[3].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

155 } ià(
šfe
.
key
 == "numberArea") {

156 
numb”A»a
.
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

157 
numb”A»a
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

158 
numb”A»a
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

159 } ià(
šfe
.
key
 == "mouseArea") {

160 
mou£A»a
.
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

161 
mou£A»a
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

162 
mou£A»a
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

163 } ià(
šfe
.
key
 == "menuArea") {

164 
m’uA»a
.
x
 = 
wšdow_¬—
.x+
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

165 
m’uA»a
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

166 
m’uA»a
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

170 
šfe
.
	`şo£
();

171 } 
	`årštf
(
¡d”r
, "Unableo open menus/actionbar.txt!\n");

174 
numb”A»a
.
y
 = 
mou£A»a
.y = 
m’uA»a
.y = 
wšdow_¬—
.y;

177 
i
=0; i<10; i++) {

178 ià(
š±
->
bšdšg
[
i
+6] < 8)

179 
Ïb–s
[
i
]->
	`£t
(
¦Ùs
[i].
x
+¦Ùs[i].
w
, slÙs[i].
y
+¦Ùs[i].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
š±
->
mou£_bu‰Ú
[š±->
bšdšg
[i+6]-1], 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

181 
Ïb–s
[
i
]->
	`£t
(
¦Ùs
[i].
x
+¦Ùs[i].
w
, slÙs[i].
y
+¦Ùs[i].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
bšdšg
[i+6]), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

183 
i
=0; i<2; i++) {

184 ià(
š±
->
bšdšg
[
i
+20] < 8)

185 
Ïb–s
[
i
+10]->
	`£t
(
¦Ùs
[i+10].
x
+¦Ùs[i+10].
w
, slÙs[i+10].
y
+¦Ùs[i+10].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
š±
->
mou£_bu‰Ú
[š±->
bšdšg
[i+20]-1], 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

187 
Ïb–s
[
i
+10]->
	`£t
(
¦Ùs
[i+10].
x
+¦Ùs[i+10].
w
, slÙs[i+10].
y
+¦Ùs[i+10].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
bšdšg
[i+20]), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

189 
i
=0; i<4; i++) {

190 ià(
š±
->
bšdšg
[
i
+16] < 8)

191 
Ïb–s
[
i
+12]->
	`£t
(
m’us
[i].
x
+m’us[i].
w
, m’us[i].
y
+m’us[i].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
š±
->
mou£_bu‰Ú
[š±->
bšdšg
[i+16]-1], 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

193 
Ïb–s
[
i
+12]->
	`£t
(
m’us
[i].
x
+m’us[i].
w
, m’us[i].
y
+m’us[i].
h
-12, 
JUSTIFY_RIGHT
, 
VALIGN_TOP
, 
	`SDL_G‘KeyName
((
SDLKey
)
š±
->
bšdšg
[i+16]), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

195 
	}
}

197 
	gM’uAùiÚB¬
::
	$ş—r
() {

199 
i
=0; i<12; i++) {

200 
hÙkeys
[
i
] = 0;

201 
aùiÚb¬
[
i
] = 0;

202 
¦Ù_™em_couÁ
[
i
] = -1;

203 
¦Ù_’abËd
[
i
] = 
Œue
;

204 
locked
[
i
] = 
çl£
;

208 
i
=0; i<4; i++)

209 
»quœes_©‹ÁiÚ
[
i
] = 
çl£
;

211 
	}
}

213 
	gM’uAùiÚB¬
::
	$lßdG¿phics
() {

215 
em±y¦Ù
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/¦Ù_em±y.²g").
	`c_¡r
());

216 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/aùiÚb¬_Œim.²g").
	`c_¡r
());

217 
di§bËd
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/di§bËd.²g").
	`c_¡r
());

218 
©‹ÁiÚ
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/©‹ÁiÚ_glow.²g").
	`c_¡r
());

219 if(!
em±y¦Ù
 || !
background
 || !
di§bËd
 || !
©‹ÁiÚ
) {

220 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

224 
SDL_Surçû
 *
ş—nup
;

226 ià(
background
) {

227 
ş—nup
 = 
background
;

228 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

229 
	`SDL_F»eSurçû
(
ş—nup
);

232 ià(
em±y¦Ù
) {

233 
ş—nup
 = 
em±y¦Ù
;

234 
em±y¦Ù
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(emptyslot);

235 
	`SDL_F»eSurçû
(
ş—nup
);

238 ià(
di§bËd
) {

239 
ş—nup
 = 
di§bËd
;

240 
di§bËd
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(disabled);

241 
	`SDL_F»eSurçû
(
ş—nup
);

244 ià(
©‹ÁiÚ
) {

245 
ş—nup
 = 
©‹ÁiÚ
;

246 
©‹ÁiÚ
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(attention);

247 
	`SDL_F»eSurçû
(
ş—nup
);

249 
	}
}

254 
	gM’uAùiÚB¬
::
	$»nd”IcÚ
(
icÚ_id
, 
x
, 
y
) {

255 
SDL_Reù
 
icÚ_¤c
;

256 
SDL_Reù
 
icÚ_de¡
;

258 
icÚ_de¡
.
x
 = x;

259 
icÚ_de¡
.
y
 = y;

260 
icÚ_¤c
.
w
 = icÚ_¤c.
h
 = 
icÚ_de¡
.w = icÚ_de¡.h = 
ICON_SIZE
;

262 
cŞumns
 = 
icÚs
->
w
 / 
ICON_SIZE
;

263 
icÚ_¤c
.
x
 = (
icÚ_id
 % 
cŞumns
è* 
ICON_SIZE
;

264 
icÚ_¤c
.
y
 = (
icÚ_id
 / 
cŞumns
è* 
ICON_SIZE
;

265 
	`SDL_Bl™Surçû
(
icÚs
, &
icÚ_¤c
, 
sü“n
, &
icÚ_de¡
);

266 
	}
}

269 
	gM’uAùiÚB¬
::
	$»nd”A‰’tiÚ
(
m’u_id
) {

270 
SDL_Reù
 
de¡
;

273 
de¡
.
x
 = 
wšdow_¬—
.x + (
m’u_id
 * 
ICON_SIZE
) + ICON_SIZE*15;

274 
de¡
.
y
 = 
wšdow_¬—
.y+3;

275 
de¡
.
w
 = de¡.
h
 = 
ICON_SIZE
;

276 
	`SDL_Bl™Surçû
(
©‹ÁiÚ
, 
NULL
, 
sü“n
, &
de¡
);

277 
	}
}

279 
	gM’uAùiÚB¬
::
	$logic
() {

280 
	}
}

284 
M’uAùiÚB¬
::
	$»nd”
() {

286 
SDL_Reù
 
de¡
;

287 
SDL_Reù
 
Œim¤c
;

289 
de¡
.
x
 = 
wšdow_¬—
.x;

290 
de¡
.
y
 = 
wšdow_¬—
.y;

291 
de¡
.
w
 = 
wšdow_¬—
.w;

292 
de¡
.
h
 = 
wšdow_¬—
.h;

293 
Œim¤c
.
x
 = 0;

294 
Œim¤c
.
y
 = 0;

295 
Œim¤c
.
w
 = 640;

296 
Œim¤c
.
h
 = 35;

298 
	`SDL_Bl™Surçû
(
background
, &
Œim¤c
, 
sü“n
, &
de¡
);

301 
¤c
.
x
 = src.
y
 = 0;

302 
¤c
.
w
 = src.
h
 = 
de¡
.w = de¡.h = 
ICON_SIZE
;

303 
de¡
.
y
 = 
wšdow_¬—
.y+3;

304 
i
=0; i<12; i++) {

306 ià(
i
<=9)

307 
de¡
.
x
 = 
wšdow_¬—
.x + (
i
 * 
ICON_SIZE
) + ICON_SIZE;

309 
de¡
.
x
 = 
wšdow_¬—
.x + (
i
 * 
ICON_SIZE
) + ICON_SIZE* 2;

311 ià(
hÙkeys
[
i
] != 0) {

312 cÚ¡ 
Pow”
 &
pow”
 = 
pow”s
->
	`g‘Pow”
(
hÙkeys
[
i
]);

313 
¦Ù_’abËd
[
i
] = (
h”o
->
h”o_coŞdown
[
hÙkeys
[i]] == 0)

314 && (
¦Ù_™em_couÁ
[
i
] != 0)

315 && !
h”o
->
efãùs
.
¡un


316 && 
h”o
->
®ive


317 && 
h”o
->
	`ÿnU£Pow”
(
pow”
, 
hÙkeys
[
i
]);

318 
icÚ_off£t
 = 0;

320 
	`»nd”IcÚ
(
pow”
.
icÚ
 + 
icÚ_off£t
, 
de¡
.
x
, de¡.
y
);

323 
	`SDL_Bl™Surçû
(
em±y¦Ù
, &
¤c
, 
sü“n
, &
de¡
);

327 
	`»nd”CoŞdowns
();

328 
	`»nd”I‹mCouÁs
();

331 
i
=0; i<4; i++)

332 ià(
»quœes_©‹ÁiÚ
[
i
])

333 
	`»nd”A‰’tiÚ
(
i
);

336 
i
=0; i<16;i++) {

337 
Ïb–s
[
i
]->
	`»nd”
();

340 
	}
}

346 
	gM’uAùiÚB¬
::
	$»nd”CoŞdowns
() {

348 
SDL_Reù
 
™em_¤c
;

349 
SDL_Reù
 
™em_de¡
;

351 
i
=0; i<12; i++) {

352 ià(!
¦Ù_’abËd
[
i
]) {

354 
™em_¤c
.
x
 = 0;

355 
™em_¤c
.
y
 = 0;

356 
™em_¤c
.
h
 = 
ICON_SIZE
;

357 
™em_¤c
.
w
 = 
ICON_SIZE
;

360 ià(
h”o
->
h”o_coŞdown
[
hÙkeys
[
i
]]) {

361 
™em_¤c
.
h
 = (
ICON_SIZE
 * 
h”o
->
h”o_coŞdown
[
hÙkeys
[
i
]]è/ 
pow”s
->pow”s[hÙkeys[i]].
coŞdown
;

365 
™em_de¡
.
x
 = 
¦Ùs
[
i
].x;

366 
™em_de¡
.
y
 = 
¦Ùs
[
i
].y;

367 
™em_de¡
.
w
 = 
¦Ùs
[
i
].w;

368 
™em_de¡
.
h
 = 
¦Ùs
[
i
].h;

370 
	`SDL_Bl™Surçû
(
di§bËd
, &
™em_¤c
, 
sü“n
, &
™em_de¡
);

373 
	}
}

378 
	gM’uAùiÚB¬
::
	$»nd”I‹mCouÁs
() {

380 
¡ršg¡»am
 
ss
;

382 
i
=0; i<12; i++) {

383 ià(
¦Ù_™em_couÁ
[
i
] > -1) {

384 
ss
.
	`¡r
("");

385 
ss
 << 
¦Ù_™em_couÁ
[
i
];

387 
Widg‘Lab–
 
Ïb–
;

388 
Ïb–
.
	`£t
(
¦Ùs
[
i
].
x
, slÙs[i].
y
, 
JUSTIFY_LEFT
, 
VALIGN_TOP
, 
ss
.
	`¡r
(), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

389 
Ïb–
.
	`»nd”
();

392 
	}
}

397 
ToŞtD©a
 
	gM’uAùiÚB¬
::
	$checkToŞt
(
Pošt
 
mou£
) {

398 
ToŞtD©a
 
t
;

400 ià(
	`isW™hš
(
m’us
[0], 
mou£
)) {

401 
t
.
	`addText
(
msg
->
	`g‘
("Character"));

402  
t
;

404 ià(
	`isW™hš
(
m’us
[1], 
mou£
)) {

405 
t
.
	`addText
(
msg
->
	`g‘
("Inventory"));

406  
t
;

408 ià(
	`isW™hš
(
m’us
[2], 
mou£
)) {

409 
t
.
	`addText
(
msg
->
	`g‘
("Powers"));

410  
t
;

412 ià(
	`isW™hš
(
m’us
[3], 
mou£
)) {

413 
t
.
	`addText
(
msg
->
	`g‘
("Log"));

414  
t
;

416 
i
=0; i<12; i++) {

417 ià(
hÙkeys
[
i
] != 0) {

418 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

419 
t
.
	`addText
(
pow”s
->pow”s[
hÙkeys
[
i
]].
Çme
);

424  
t
;

425 
	}
}

430 
	gM’uAùiÚB¬
::
	$drİ
(
Pošt
 
mou£
, 
pow”_šdex
, 
boŞ
 
»¬¿ngšg
) {

431 
i
=0; i<12; i++) {

432 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

433 ià(
»¬¿ngšg
) {

434 ià((
locked
[
i
] && !locked[
d¿g_´ev_¦Ù
]) || (!locked[i] &&†ocked[drag_prev_slot])) {

435 
locked
[
i
] = !locked[i];

436 
locked
[
d¿g_´ev_¦Ù
] = !locked[drag_prev_slot];

438 
hÙkeys
[
d¿g_´ev_¦Ù
] = hÙkeys[
i
];

439 } ià(
locked
[
i
]) ;

440 
hÙkeys
[
i
] = 
pow”_šdex
;

444 
	}
}

449 
	gM’uAùiÚB¬
::
	$aùiÚR‘uº
(
pow”_šdex
) {

450 
	`drİ
(
Ï¡_mou£
, 
pow”_šdex
, 0);

451 
	}
}

456 
	gM’uAùiÚB¬
::
	$»move
(
Pošt
 
mou£
) {

457 
i
=0; i<12; i++) {

458 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

459 ià(
locked
[
i
]) ;

460 
hÙkeys
[
i
] = 0;

464 
	}
}

470 
	gM’uAùiÚB¬
::
	$checkAùiÚ
(
Pošt
 
mou£
) {

473 ià((
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]è|| (š±->´essšg[
MAIN2
] && !inpt->lock[MAIN2])) {

474 
i
=0; i<12; i++) {

475 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
è&& 
¦Ù_’abËd
[i]) {

477  
hÙkeys
[
i
];

483 ià(
š±
->
´essšg
[
BAR_1
] && 
¦Ù_’abËd
[0]è 
hÙkeys
[0];

484 ià(
š±
->
´essšg
[
BAR_2
] && 
¦Ù_’abËd
[1]è 
hÙkeys
[1];

485 ià(
š±
->
´essšg
[
BAR_3
] && 
¦Ù_’abËd
[2]è 
hÙkeys
[2];

486 ià(
š±
->
´essšg
[
BAR_4
] && 
¦Ù_’abËd
[3]è 
hÙkeys
[3];

487 ià(
š±
->
´essšg
[
BAR_5
] && 
¦Ù_’abËd
[4]è 
hÙkeys
[4];

488 ià(
š±
->
´essšg
[
BAR_6
] && 
¦Ù_’abËd
[5]è 
hÙkeys
[5];

489 ià(
š±
->
´essšg
[
BAR_7
] && 
¦Ù_’abËd
[6]è 
hÙkeys
[6];

490 ià(
š±
->
´essšg
[
BAR_8
] && 
¦Ù_’abËd
[7]è 
hÙkeys
[7];

491 ià(
š±
->
´essšg
[
BAR_9
] && 
¦Ù_’abËd
[8]è 
hÙkeys
[8];

492 ià(
š±
->
´essšg
[
BAR_0
] && 
¦Ù_’abËd
[9]è 
hÙkeys
[9];

493 ià(
š±
->
´essšg
[
MAIN1
] && 
¦Ù_’abËd
[10] && !š±->
lock
[MAIN1]è 
hÙkeys
[10];

494 ià(
š±
->
´essšg
[
MAIN2
] && 
¦Ù_’abËd
[11] && !š±->
lock
[MAIN2]è 
hÙkeys
[11];

496 
	}
}

501 
	gM’uAùiÚB¬
::
	$checkD¿g
(
Pošt
 
mou£
) {

502 
pow”_šdex
;

504 
i
=0; i<12; i++) {

505 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

506 
d¿g_´ev_¦Ù
 = 
i
;

507 
pow”_šdex
 = 
hÙkeys
[
i
];

508 
hÙkeys
[
i
] = 0;

509 
Ï¡_mou£
 = 
mou£
;

510  
pow”_šdex
;

515 
	}
}

520 
	gM’uAùiÚB¬
::
	$checkM’u
(
Pošt
 
mou£
, 
boŞ
 &
m’u_c
, boŞ &
m’u_i
, boŞ &
m’u_p
, boŞ &
m’u_l
) {

521 ià((
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]è|| (š±->´essšg[
MAIN2
] && !inpt->lock[MAIN2])) {

522 ià(
	`isW™hš
(
m’us
[
MENU_CHARACTER
], 
mou£
)) {

523 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]èš±->lock[MAIN1] = 
Œue
;

524 
š±
->
lock
[
MAIN2
] = 
Œue
;

525 
m’u_c
 = 
Œue
;

527 ià(
	`isW™hš
(
m’us
[
MENU_INVENTORY
], 
mou£
)) {

528 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]èš±->lock[MAIN1] = 
Œue
;

529 
š±
->
lock
[
MAIN2
] = 
Œue
;

530 
m’u_i
 = 
Œue
;

532 ià(
	`isW™hš
(
m’us
[
MENU_POWERS
], 
mou£
)) {

533 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]èš±->lock[MAIN1] = 
Œue
;

534 
š±
->
lock
[
MAIN2
] = 
Œue
;

535 
š±
->
lock
[
MAIN1
] = 
Œue
;

536 
m’u_p
 = 
Œue
;

538 ià(
	`isW™hš
(
m’us
[
MENU_LOG
], 
mou£
)) {

539 ià(
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]èš±->lock[MAIN1] = 
Œue
;

540 
š±
->
lock
[
MAIN2
] = 
Œue
;

541 
š±
->
lock
[
MAIN1
] = 
Œue
;

542 
m’u_l
 = 
Œue
;

545 
	}
}

550 
	gM’uAùiÚB¬
::
	$£t
(
pow”_id
[12]) {

551 
i
=0; i<12; i++)

552 
hÙkeys
[
i
] = 
pow”_id
[i];

553 
	}
}

555 
	gM’uAùiÚB¬
::~
	$M’uAùiÚB¬
() {

556 
	`SDL_F»eSurçû
(
em±y¦Ù
);

557 
	`SDL_F»eSurçû
(
background
);

558 
	`SDL_F»eSurçû
(
di§bËd
);

559 
	`SDL_F»eSurçû
(
©‹ÁiÚ
);

561 
i
=0; i<16; i++) {

562 
d–‘e
 
Ïb–s
[
i
];

564 
	}
}

	@MenuActionBar.h

26 #´agm¨
Úû


27 #iâdeà
MENU_ACTION_BAR_H


28 
	#MENU_ACTION_BAR_H


	)

30 
	~"Uts.h
"

32 
	~<SDL.h
>

33 
	~<SDL_image.h
>

34 
	~"Widg‘Lab–.h
"

36 
şass
 
	gPow”Mªag”
;

37 
şass
 
	gStBlock
;

38 
şass
 
	gToŞtD©a
;

39 
şass
 
	gWidg‘Lab–
;

41 cÚ¡ 
	gMENU_CHARACTER
 = 0;

42 cÚ¡ 
	gMENU_INVENTORY
 = 1;

43 cÚ¡ 
	gMENU_POWERS
 = 2;

44 cÚ¡ 
	gMENU_LOG
 = 3;

46 şas 
	cM’uAùiÚB¬
 : 
public
 
M’u
 {

47 
´iv©e
:

48 
»nd”CoŞdowns
();

49 
»nd”I‹mCouÁs
();

51 
SDL_Surçû
 *
	mbackground
;

52 
SDL_Surçû
 *
	mem±y¦Ù
;

53 
SDL_Surçû
 *
	micÚs
;

54 
SDL_Surçû
 *
	mdi§bËd
;

55 
SDL_Surçû
 *
	m©‹ÁiÚ
;

57 
StBlock
 *
	mh”o
;

58 
Pow”Mªag”
 *
	mpow”s
;

59 
SDL_Reù
 
	m¤c
;

61 
Widg‘Lab–
 *
	mÏb–s
[16];

62 
Pošt
 
	mÏ¡_mou£
;

64 
	mpublic
:

66 
M’uAùiÚB¬
(
Pow”Mªag”
 *
_pow”s
, 
StBlock
 *
h”o
, 
SDL_Surçû
 *
icÚs
);

67 ~
M’uAùiÚB¬
();

68 
lßdG¿phics
();

69 
»nd”IcÚ
(
icÚ_id
, 
x
, 
y
);

70 
»nd”A‰’tiÚ
(
m’u_id
);

71 
logic
();

72 
»nd”
();

73 
checkAùiÚ
(
Pošt
 
mou£
);

74 
checkD¿g
(
Pošt
 
mou£
);

75 
checkM’u
(
Pošt
 
mou£
, 
boŞ
 &
m’u_c
, boŞ &
m’u_i
, boŞ &
m’u_p
, boŞ &
m’u_l
);

76 
drİ
(
Pošt
 
mou£
, 
pow”_šdex
, 
boŞ
 
»¬¿ngšg
);

77 
aùiÚR‘uº
(
pow”_šdex
);

78 
»move
(
Pošt
 
mou£
);

79 
£t
(
pow”_id
[12]);

80 
ş—r
();

81 
upd©e
();

83 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

85 
	mhÙkeys
[12];

86 
	maùiÚb¬
[12];

87 
boŞ
 
	mlocked
[12];

88 
SDL_Reù
 
	m¦Ùs
[12];

89 
SDL_Reù
 
	mm’us
[4];

90 
	m¦Ù_™em_couÁ
[12];

91 
boŞ
 
	m¦Ù_’abËd
[12];

92 
boŞ
 
	m»quœes_©‹ÁiÚ
[4];

96 
SDL_Reù
 
	mnumb”A»a
;

97 
SDL_Reù
 
	mmou£A»a
;

98 
SDL_Reù
 
	mm’uA»a
;

99 
	md¿g_´ev_¦Ù
;

	@MenuActiveEffects.cpp

25 
	~"M’u.h
"

26 
	~"M’uAùiveEfãùs.h
"

27 
	~"ModMªag”.h
"

28 
	~"S‘tšgs.h
"

29 
	~"Sh¬edResourûs.h
"

30 
	~"StBlock.h
"

31 
	~"FeP¬£r.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"UtsFeSy¡em.h
"

35 
	~<¡ršg
>

36 
	~<s¡»am
>

39 
usšg
 
Çme¥aû
 
	g¡d
;

42 
	gM’uAùiveEfãùs
::
	$M’uAùiveEfãùs
(
SDL_Surçû
 *
_icÚs
) {

43 
¡©s
 = 
NULL
;

44 
icÚs
 = 
_icÚs
;

45 
Ü›Á©iÚ
 = 0;

48 
FeP¬£r
 
šfe
;

49 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/activeeffects.txt"))) {

50 
šfe
.
	`Ãxt
()) {

51 
šfe
.
v®
 = infile.val + ',';

53 if(
šfe
.
key
 == "orientation") {

54 
Ü›Á
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

55 ià(
Ü›Á
 == 1)

56 
Ü›Á©iÚ
 = 
Œue
;

58 
Ü›Á©iÚ
 = 
çl£
;

61 
šfe
.
	`şo£
();

62 } 
	`årštf
(
¡d”r
, "Unableo open menus/activeeffects.txt!\n");

64 
	`lßdG¿phics
();

65 
	}
}

67 
	gM’uAùiveEfãùs
::
	$lßdG¿phics
() {

69 
tim”
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/di§bËd.²g").
	`c_¡r
());

70 if(!
tim”
) {

71 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

74 
SDL_Surçû
 *
ş—nup
 = 
tim”
;

75 
tim”
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(timer);

76 
	`SDL_F»eSurçû
(
ş—nup
);

78 
	}
}

80 
	gM’uAùiveEfãùs
::
	$»nd”IcÚ
(
icÚ_id
, 
šdex
, 
cu¼’t
, 
max
){

81 ià(
icÚ_id
 > -1) {

82 
SDL_Reù
 
pos
,
¤c
,
ov”Ïy
;

83 ià(
Ü›Á©iÚ
 == 0) {

84 
pos
.
x
 = 
wšdow_¬—
.x + (
šdex
 * 
ICON_SIZE
);

85 
pos
.
y
 = 
wšdow_¬—
.y;

86 } ià(
Ü›Á©iÚ
 == 1) {

87 
pos
.
x
 = 
wšdow_¬—
.x;

88 
pos
.
y
 = 
wšdow_¬—
.y + (
šdex
 * 
ICON_SIZE
);

91 
cŞumns
 = 
icÚs
->
w
 / 
ICON_SIZE
;

92 
¤c
.
x
 = (
icÚ_id
 % 
cŞumns
è* 
ICON_SIZE
;

93 
¤c
.
y
 = (
icÚ_id
 / 
cŞumns
è* 
ICON_SIZE
;

94 
¤c
.
w
 = src.
h
 = 
ICON_SIZE
;

96 
	`SDL_Bl™Surçû
(
icÚs
,&
¤c
,
sü“n
,&
pos
);

98 ià(
max
 > 0) {

99 
ov”Ïy
.
x
 = 0;

100 
ov”Ïy
.
y
 = (
ICON_SIZE
 * 
cu¼’t
è/ 
max
;

101 
ov”Ïy
.
w
 = 
ICON_SIZE
;

102 
ov”Ïy
.
h
 = 
ICON_SIZE
 - ov”Ïy.
y
;

104 
	`SDL_Bl™Surçû
(
tim”
,&
ov”Ïy
,
sü“n
,&
pos
);

107 
	}
}

109 
	gM’uAùiveEfãùs
::
	$upd©e
(
StBlock
 *
_¡©s
) {

110 
¡©s
 = 
_¡©s
;

111 
	}
}

113 
	gM’uAùiveEfãùs
::
	$»nd”
() {

114 
couÁ
=-1;

117 
i
=0; i<
¡©s
->
efãùs
.
efãù_li¡
.
	`size
(); i++) {

118 
¡d
::
¡ršg
 
ty³
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].type;

119 
icÚ
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].icon;

120 
ticks
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].ticks;

121 
du¿tiÚ
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].duration;

122 
magn™ude
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].magnitude;

123 
magn™ude_max
 = 
¡©s
->
efãùs
.
efãù_li¡
[
i
].magnitude_max;

125 ià(
icÚ
 >ğ0è
couÁ
++;

127 ià(
ty³
 == "shield")

128 
	`»nd”IcÚ
(
icÚ
,
couÁ
,
magn™ude
,
magn™ude_max
);

129 ià(
ty³
 == "heal" ||ype == "block")

130 
	`»nd”IcÚ
(
icÚ
,
couÁ
,0,0);

131 ià(
ticks
 >ğ0 && 
du¿tiÚ
 >= 0)

132 
	`»nd”IcÚ
(
icÚ
,
couÁ
,
ticks
,
du¿tiÚ
);

134 
	}
}

136 
	gM’uAùiveEfãùs
::~
	$M’uAùiveEfãùs
() {

137 
	`SDL_F»eSurçû
(
tim”
);

138 
	}
}

	@MenuActiveEffects.h

26 #´agm¨
Úû


27 #iâdeà
MENU_ACTIVE_EFFECTS_H


28 
	#MENU_ACTIVE_EFFECTS_H


	)

30 
	~"Uts.h
"

32 
	~<SDL.h
>

33 
	~<SDL_image.h
>

34 
	~<veùÜ
>

36 
şass
 
	gStBlock
;

38 şas 
	cM’uAùiveEfãùs
 : 
public
 
M’u
 {

39 
´iv©e
:

40 
SDL_Surçû
 *
icÚs
;

41 
SDL_Surçû
 *
	mtim”
;

42 
StBlock
 *
	m¡©s
;

43 
boŞ
 
	mÜ›Á©iÚ
;

45 
»nd”IcÚ
(
icÚ_id
, 
šdex
, 
cu¼’t
, 
max
);

47 
	mpublic
:

48 
M’uAùiveEfãùs
(
SDL_Surçû
 *
_icÚs
);

49 ~
M’uAùiveEfãùs
();

50 
lßdG¿phics
();

51 
upd©e
(
StBlock
 *
_¡©s
);

52 
»nd”
();

	@MenuCharacter.cpp

23 
	~"FeP¬£r.h
"

24 
	~"M’u.h
"

25 
	~"M’uCh¬aù”.h
"

26 
	~"Sh¬edResourûs.h
"

27 
	~"S‘tšgs.h
"

28 
	~"StBlock.h
"

29 
	~"UtsP¬sšg.h
"

30 
	~"Widg‘Bu‰Ú.h
"

31 
	~"Widg‘Li¡Box.h
"

34 
usšg
 
Çme¥aû
 
	g¡d
;

37 
	gM’uCh¬aù”
::
	$M’uCh¬aù”
(
StBlock
 *
_¡©s
) {

38 
¡©s
 = 
_¡©s
;

40 
skl_pošts
 = 0;

42 
visibË
 = 
çl£
;

43 
ÃwPow”NÙifiÿtiÚ
 = 
çl£
;

45 
i
=0; i<
CSTAT_COUNT
; i++) {

46 
c¡©
[
i
].
Ïb–
 = 
Ãw
 
	`Widg‘Lab–
();

47 
c¡©
[
i
].
v®ue
 = 
Ãw
 
	`Widg‘Lab–
();

48 
c¡©
[
i
].
hov”
.
x
 = c¡©[i].hov”.
y
 = 0;

49 
c¡©
[
i
].
hov”
.
w
 = c¡©[i].hov”.
h
 = 0;

50 
c¡©
[
i
].
visibË
 = 
Œue
;

52 
i
=0; i<
STATLIST_COUNT
; i++) {

53 
show_¡©
[
i
] = 
Œue
;

55 
¡©li¡_rows
 = 10;

56 
¡©li¡_süŞlb¬_off£t
 = 0;

58 
şo£Bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

61 
i
=0; i<4; i++) {

62 
upg¿deBu‰Ú
[
i
] = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/upgrade.png"));

63 
upg¿deBu‰Ú
[
i
]->
’abËd
 = 
çl£
;

64 
show_upg¿de
[
i
] = 
Œue
;

66 
physiÿl_up
 = 
çl£
;

67 
m’l_up
 = 
çl£
;

68 
ofãn£_up
 = 
çl£
;

69 
deãn£_up
 = 
çl£
;

72 
Ïb–Ch¬aù”
 = 
Ãw
 
	`Widg‘Lab–
();

75 
Ïb–Un¥’t
 = 
Ãw
 
	`Widg‘Lab–
();

78 
FeP¬£r
 
šfe
;

79 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/character.txt"))) {

80 
šfe
.
	`Ãxt
()) {

81 
šfe
.
v®
 = infile.val + ',';

83 if(
šfe
.
key
 == "close") {

84 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

85 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

86 } if(
šfe
.
key
 == "caption") {

87 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

88 } if(
šfe
.
key
 == "upgrade_physical") {

89 
upg¿de_pos
[0].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

90 
upg¿de_pos
[0].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

91 } if(
šfe
.
key
 == "upgrade_mental") {

92 
upg¿de_pos
[1].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

93 
upg¿de_pos
[1].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

94 } if(
šfe
.
key
 == "upgrade_offense") {

95 
upg¿de_pos
[2].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

96 
upg¿de_pos
[2].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

97 } if(
šfe
.
key
 == "upgrade_defense") {

98 
upg¿de_pos
[3].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

99 
upg¿de_pos
[3].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

100 } if(
šfe
.
key
 == "statlist") {

101 
¡©li¡_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

102 
¡©li¡_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

103 } ià(
šfe
.
key
 == "statlist_rows") {

104 
¡©li¡_rows
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

105 } ià(
šfe
.
key
 == "statlist_scrollbar_offset") {

106 
¡©li¡_süŞlb¬_off£t
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

107 } if(
šfe
.
key
 == "label_name") {

108 
Ïb–_pos
[0] = 
	`—tLab–Info
(
šfe
.
v®
);

109 
c¡©
[
CSTAT_NAME
].
visibË
 = !
Ïb–_pos
[0].
hidd’
;

110 } if(
šfe
.
key
 == "label_level") {

111 
Ïb–_pos
[1] = 
	`—tLab–Info
(
šfe
.
v®
);

112 
c¡©
[
CSTAT_LEVEL
].
visibË
 = !
Ïb–_pos
[1].
hidd’
;

113 } if(
šfe
.
key
 == "label_physical") {

114 
Ïb–_pos
[2] = 
	`—tLab–Info
(
šfe
.
v®
);

115 
c¡©
[
CSTAT_PHYSICAL
].
visibË
 = !
Ïb–_pos
[2].
hidd’
;

116 } if(
šfe
.
key
 == "label_mental") {

117 
Ïb–_pos
[3] = 
	`—tLab–Info
(
šfe
.
v®
);

118 
c¡©
[
CSTAT_MENTAL
].
visibË
 = !
Ïb–_pos
[3].
hidd’
;

119 } if(
šfe
.
key
 == "label_offense") {

120 
Ïb–_pos
[4] = 
	`—tLab–Info
(
šfe
.
v®
);

121 
c¡©
[
CSTAT_OFFENSE
].
visibË
 = !
Ïb–_pos
[4].
hidd’
;

122 } if(
šfe
.
key
 == "label_defense") {

123 
Ïb–_pos
[5] = 
	`—tLab–Info
(
šfe
.
v®
);

124 
c¡©
[
CSTAT_DEFENSE
].
visibË
 = !
Ïb–_pos
[5].
hidd’
;

125 } if(
šfe
.
key
 == "name") {

126 
v®ue_pos
[0].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

127 
v®ue_pos
[0].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

128 
v®ue_pos
[0].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

129 
v®ue_pos
[0].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

130 } if(
šfe
.
key
 == "level") {

131 
v®ue_pos
[1].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

132 
v®ue_pos
[1].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

133 
v®ue_pos
[1].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

134 
v®ue_pos
[1].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

135 } if(
šfe
.
key
 == "physical") {

136 
v®ue_pos
[2].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

137 
v®ue_pos
[2].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

138 
v®ue_pos
[2].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

139 
v®ue_pos
[2].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

140 } if(
šfe
.
key
 == "mental") {

141 
v®ue_pos
[3].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

142 
v®ue_pos
[3].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

143 
v®ue_pos
[3].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

144 
v®ue_pos
[3].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

145 } if(
šfe
.
key
 == "offense") {

146 
v®ue_pos
[4].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

147 
v®ue_pos
[4].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

148 
v®ue_pos
[4].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

149 
v®ue_pos
[4].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

150 } if(
šfe
.
key
 == "defense") {

151 
v®ue_pos
[5].
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

152 
v®ue_pos
[5].
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

153 
v®ue_pos
[5].
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

154 
v®ue_pos
[5].
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

155 } if(
šfe
.
key
 == "unspent") {

156 
un¥’t_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

157 } ià(
šfe
.
key
 == "show_upgrade_physical"){

158 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_upg¿de
[0] = 
çl£
;

159 } ià(
šfe
.
key
 == "show_upgrade_mental"){

160 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_upg¿de
[1] = 
çl£
;

161 } ià(
šfe
.
key
 == "show_upgrade_offense"){

162 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_upg¿de
[2] = 
çl£
;

163 } ià(
šfe
.
key
 == "show_upgrade_defense"){

164 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_upg¿de
[3] = 
çl£
;

165 } ià(
šfe
.
key
 == "show_maxhp"){

166 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[0] = 
çl£
;

167 } ià(
šfe
.
key
 == "show_hpregen"){

168 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[1] = 
çl£
;

169 } ià(
šfe
.
key
 == "show_maxmp"){

170 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[2] = 
çl£
;

171 } ià(
šfe
.
key
 == "show_mpregen"){

172 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[3] = 
çl£
;

173 } ià(
šfe
.
key
 == "show_accuracy"){

174 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[4] = 
çl£
;

175 } ià(
šfe
.
key
 == "show_avoidance"){

176 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[5] = 
çl£
;

177 } ià(
šfe
.
key
 == "show_melee"){

178 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[6] = 
çl£
;

179 } ià(
šfe
.
key
 == "show_ranged"){

180 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[7] = 
çl£
;

181 } ià(
šfe
.
key
 == "show_mental"){

182 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[8] = 
çl£
;

183 } ià(
šfe
.
key
 == "show_crit"){

184 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[9] = 
çl£
;

185 } ià(
šfe
.
key
 == "show_absorb"){

186 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[10] = 
çl£
;

187 } ià(
šfe
.
key
 == "show_poise"){

188 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[11] = 
çl£
;

189 } ià(
šfe
.
key
 == "show_bonus_xp"){

190 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[12] = 
çl£
;

191 } ià(
šfe
.
key
 == "show_bonus_currency"){

192 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[13] = 
çl£
;

193 } ià(
šfe
.
key
 == "show_bonus_itemfind"){

194 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[14] = 
çl£
;

195 } ià(
šfe
.
key
 == "show_bonus_stealth"){

196 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[15] = 
çl£
;

197 } ià(
šfe
.
key
 == "show_resists"){

198 ià(
	`—tFœ¡IÁ
(
šfe
.
v®
,','è=ğ0è
show_¡©
[16] = 
çl£
;

201 
šfe
.
	`şo£
();

202 } 
	`årštf
(
¡d”r
, "Unableo open menus/character.txt!\n");

205 
¡©Li¡
 = 
Ãw
 
	`Widg‘Li¡Box
(
STATLIST_COUNT
-1+
¡©s
->
vuÊ”abË
.
	`size
(), 
¡©li¡_rows
, 
mods
->
	`loÿ‹
("images/menus/buttons/listbox_char.png"));

206 
¡©Li¡
->
ÿn_£Ëù
 = 
çl£
;

207 
¡©Li¡
->
süŞlb¬_off£t
 = 
¡©li¡_süŞlb¬_off£t
;

209 
	`lßdG¿phics
();

210 
	}
}

212 
	gM’uCh¬aù”
::
	$upd©e
() {

215 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x + 
şo£_pos
.x;

216 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y + 
şo£_pos
.y;

219 
Ïb–Ch¬aù”
->
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("Ch¬aù”"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),™Ë.
fÚt_¡yË
);

222 
i
=0; i<4; i++) {

223 
upg¿deBu‰Ú
[
i
]->
pos
.
x
 = 
wšdow_¬—
.x+
upg¿de_pos
[i].x;

224 
upg¿deBu‰Ú
[
i
]->
pos
.
y
 = 
wšdow_¬—
.y+
upg¿de_pos
[i].y;

228 
¡©Li¡
->
pos
.
x
 = 
wšdow_¬—
.x+
¡©li¡_pos
.x;

229 
¡©Li¡
->
pos
.
y
 = 
wšdow_¬—
.y+
¡©li¡_pos
.y;

232 
c¡©
[
CSTAT_NAME
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[0].x, wšdow_¬—.
y
+Ïb–_pos[0].y,†ab–_pos[0].
ju¡ify
,†ab–_pos[0].
v®ign
, 
msg
->
	`g‘
("Name"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[0].
fÚt_¡yË
);

233 
c¡©
[
CSTAT_LEVEL
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[1].x, wšdow_¬—.
y
+Ïb–_pos[1].y,†ab–_pos[1].
ju¡ify
,†ab–_pos[1].
v®ign
, 
msg
->
	`g‘
("Lev–"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[1].
fÚt_¡yË
);

234 
c¡©
[
CSTAT_PHYSICAL
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[2].x, wšdow_¬—.
y
+Ïb–_pos[2].y,†ab–_pos[2].
ju¡ify
,†ab–_pos[2].
v®ign
, 
msg
->
	`g‘
("Physiÿl"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[2].
fÚt_¡yË
);

235 
c¡©
[
CSTAT_MENTAL
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[3].x, wšdow_¬—.
y
+Ïb–_pos[3].y,†ab–_pos[3].
ju¡ify
,†ab–_pos[3].
v®ign
, 
msg
->
	`g‘
("M’l"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[3].
fÚt_¡yË
);

236 
c¡©
[
CSTAT_OFFENSE
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[4].x, wšdow_¬—.
y
+Ïb–_pos[4].y,†ab–_pos[4].
ju¡ify
,†ab–_pos[4].
v®ign
, 
msg
->
	`g‘
("Ofãn£"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[4].
fÚt_¡yË
);

237 
c¡©
[
CSTAT_DEFENSE
].
Ïb–
->
	`£t
(
wšdow_¬—
.
x
+
Ïb–_pos
[5].x, wšdow_¬—.
y
+Ïb–_pos[5].y,†ab–_pos[5].
ju¡ify
,†ab–_pos[5].
v®ign
, 
msg
->
	`g‘
("Deãn£"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),†ab–_pos[5].
fÚt_¡yË
);

240 
c¡©
[
CSTAT_NAME
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[0].x, wšdow_¬—.
y
+v®ue_pos[0].y, v®ue_pos[0].
w
, v®ue_pos[0].
h
);

241 
c¡©
[
CSTAT_LEVEL
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[1].x, wšdow_¬—.
y
+v®ue_pos[1].y, v®ue_pos[1].
w
, v®ue_pos[1].
h
);

242 
c¡©
[
CSTAT_PHYSICAL
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[2].x, wšdow_¬—.
y
+v®ue_pos[2].y, v®ue_pos[2].
w
, v®ue_pos[2].
h
);

243 
c¡©
[
CSTAT_MENTAL
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[3].x, wšdow_¬—.
y
+v®ue_pos[3].y, v®ue_pos[3].
w
, v®ue_pos[3].
h
);

244 
c¡©
[
CSTAT_OFFENSE
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[4].x, wšdow_¬—.
y
+v®ue_pos[4].y, v®ue_pos[4].
w
, v®ue_pos[4].
h
);

245 
c¡©
[
CSTAT_DEFENSE
].
	`£tHov”
(
wšdow_¬—
.
x
+
v®ue_pos
[5].x, wšdow_¬—.
y
+v®ue_pos[5].y, v®ue_pos[5].
w
, v®ue_pos[5].
h
);

246 
	}
}

248 
	gM’uCh¬aù”
::
	$lßdG¿phics
() {

250 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/ch¬aù”.²g").
	`c_¡r
());

251 if(!
background
) {

252 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

255 
SDL_Surçû
 *
ş—nup
 = 
background
;

256 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

257 
	`SDL_F»eSurçû
(
ş—nup
);

260 
	}
}

265 
	gM’uCh¬aù”
::
	$»äeshSts
() {

267 
¡©s
->
»äesh_¡©s
 = 
çl£
;

269 
¡ršg¡»am
 
ss
;

272 
c¡©
[
CSTAT_NAME
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[0].x+4, wšdow_¬—.
y
+v®ue_pos[0].y+v®ue_pos[0].
h
/2, 
JUSTIFY_LEFT
, 
VALIGN_CENTER
, 
¡©s
->
Çme
, 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

274 
ss
.
	`¡r
("");

275 
ss
 << 
¡©s
->
Ëv–
;

276 
c¡©
[
CSTAT_LEVEL
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[1].x+v®ue_pos[1].
w
/2, wšdow_¬—.
y
+v®ue_pos[1].y+v®ue_pos[1].
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

278 
ss
.
	`¡r
("");

279 
ss
 << 
¡©s
->
	`g‘_physiÿl
();

280 
c¡©
[
CSTAT_PHYSICAL
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[2].x+v®ue_pos[2].
w
/2, wšdow_¬—.
y
+v®ue_pos[2].y+v®ue_pos[2].
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
	`bÚusCŞÜ
(
¡©s
->
physiÿl_add™iÚ®
));

282 
ss
.
	`¡r
("");

283 
ss
 << 
¡©s
->
	`g‘_m’l
();

284 
c¡©
[
CSTAT_MENTAL
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[3].x+v®ue_pos[3].
w
/2, wšdow_¬—.
y
+v®ue_pos[3].y+v®ue_pos[3].
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
	`bÚusCŞÜ
(
¡©s
->
m’l_add™iÚ®
));

286 
ss
.
	`¡r
("");

287 
ss
 << 
¡©s
->
	`g‘_ofãn£
();

288 
c¡©
[
CSTAT_OFFENSE
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[4].x+v®ue_pos[4].
w
/2, wšdow_¬—.
y
+v®ue_pos[4].y+v®ue_pos[4].
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
	`bÚusCŞÜ
(
¡©s
->
ofãn£_add™iÚ®
));

290 
ss
.
	`¡r
("");

291 
ss
 << 
¡©s
->
	`g‘_deãn£
();

292 
c¡©
[
CSTAT_DEFENSE
].
v®ue
->
	`£t
(
wšdow_¬—
.
x
+
v®ue_pos
[5].x+v®ue_pos[5].
w
/2, wšdow_¬—.
y
+v®ue_pos[5].y+v®ue_pos[5].
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
	`bÚusCŞÜ
(
¡©s
->
deãn£_add™iÚ®
));

294 
ss
.
	`¡r
("");

295 ià(
skl_pošts
 > 0è
ss
 << skl_pošt << " " << 
msg
->
	`g‘
("points„emaining");

296 
ss
.
	`¡r
("");

297 
Ïb–Un¥’t
->
	`£t
(
wšdow_¬—
.
x
+
un¥’t_pos
.x, wšdow_¬—.
y
+un¥’t_pos.y, un¥’t_pos.
ju¡ify
, un¥’t_pos.
v®ign
, 
ss
.
	`¡r
(), 
fÚt
->
	`g‘CŞÜ
("m’u_bÚus"), un¥’t_pos.
fÚt_¡yË
);

301 
visibË_¡©s
 = 0;

303 ià(
show_¡©
[0]) {

304 
ss
.
	`¡r
("");

305 
ss
 << 
msg
->
	`g‘
("Max HP:"è<< " " << 
¡©s
->
maxhp
;

306 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Each…ošˆoàPhysiÿÈg¿Á +%d HP. Each†ev– g¿Á +%d HP", 
¡©s
->
hp_³r_physiÿl
, sts->
hp_³r_Ëv–
));

309 ià(
show_¡©
[1]) {

310 
ss
.
	`¡r
("");

311 
ss
 << 
msg
->
	`g‘
("HP Reg’:"è<< " " << 
¡©s
->
hp_³r_mšu‹
;

312 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Tick oàHP„eg’…” mšu‹. Each…ošˆoàPhysiÿÈg¿Á +%d HP„eg’. Each†ev– g¿Á +%d HP„eg’",
¡©s
->
hp_»g’_³r_physiÿl
, sts->
hp_»g’_³r_Ëv–
));

315 ià(
show_¡©
[2]) {

316 
ss
.
	`¡r
("");

317 
ss
 << 
msg
->
	`g‘
("Max MP:"è<< " " << 
¡©s
->
maxmp
;

318 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Each…ošˆoàM’Èg¿Á +%d MP. Each†ev– g¿Á +%d MP", 
¡©s
->
mp_³r_m’l
, sts->
mp_³r_Ëv–
));

321 ià(
show_¡©
[3]) {

322 
ss
.
	`¡r
("");

323 
ss
 << 
msg
->
	`g‘
("MP Reg’:"è<< " " << 
¡©s
->
mp_³r_mšu‹
;

324 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Tick oàMP„eg’…” mšu‹. Each…ošˆoàM’Èg¿Á +%d MP„eg’. Each†ev– g¿Á +%d MP„eg’", 
¡©s
->
mp_»g’_³r_m’l
, sts->
mp_»g’_³r_Ëv–
));

327 ià(
show_¡©
[4]) {

328 
ss
.
	`¡r
("");

329 
ss
 << 
msg
->
	`g‘
("Accu¿cy:"è<< " " << 
¡©s
->
accu¿cy
 << "%";

330 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Each…ošˆoàOfãn£ g¿Á +%d‡ccu¿cy. Each†ev– g¿Á +%d‡ccu¿cy", 
¡©s
->
accu¿cy_³r_ofãn£
, sts->
accu¿cy_³r_Ëv–
));

333 ià(
show_¡©
[5]) {

334 
ss
.
	`¡r
("");

335 
ss
 << 
msg
->
	`g‘
("Avoidªû:"è<< " " << 
¡©s
->
avoidªû
 << "%";

336 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Each…ošˆoàDeãn£ g¿Á +%d‡voidªû. Each†ev– g¿Á +%d‡voidªû", 
¡©s
->
avoidªû_³r_deãn£
, sts->
avoidªû_³r_Ëv–
));

339 ià(
show_¡©
[6]) {

340 
ss
.
	`¡r
("");

341 
ss
 << 
msg
->
	`g‘
("Melee Damage:") << " ";

342 ià(
¡©s
->
dmg_m–“_mš
 =ğ¡©s->
dmg_m–“_max
)

343 
ss
 << 
¡©s
->
dmg_m–“_mš
;

345 
ss
 << 
¡©s
->
dmg_m–“_mš
 << "-" << sts->
dmg_m–“_max
;

346 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

349 ià(
show_¡©
[7]) {

350 
ss
.
	`¡r
("");

351 
ss
 << 
msg
->
	`g‘
("Ranged Damage:") << " ";

352 ià(
¡©s
->
dmg_¿nged_mš
 =ğ¡©s->
dmg_¿nged_max
)

353 
ss
 << 
¡©s
->
dmg_¿nged_mš
;

355 
ss
 << 
¡©s
->
dmg_¿nged_mš
 << "-" << sts->
dmg_¿nged_max
;

356 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

359 ià(
show_¡©
[8]) {

360 
ss
.
	`¡r
("");

361 
ss
 << 
msg
->
	`g‘
("Mental Damage:") << " ";

362 ià(
¡©s
->
dmg_m’t_mš
 =ğ¡©s->
dmg_m’t_max
)

363 
ss
 << 
¡©s
->
dmg_m’t_mš
;

365 
ss
 << 
¡©s
->
dmg_m’t_mš
 << "-" << sts->
dmg_m’t_max
;

366 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

369 ià(
show_¡©
[9]) {

370 
ss
.
	`¡r
("");

371 
ss
 << 
msg
->
	`g‘
("Cr™:"è<< " " << 
¡©s
->
ü™
 << "%";

372 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

375 ià(
show_¡©
[10]) {

376 
ss
.
	`¡r
("");

377 
ss
 << 
msg
->
	`g‘
("Absorb:") << " ";

378 ià(
¡©s
->
absÜb_mš
 =ğ¡©s->
absÜb_max
)

379 
ss
 << 
¡©s
->
absÜb_mš
;

381 
ss
 << 
¡©s
->
absÜb_mš
 << "-" << sts->
absÜb_max
;

382 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

385 ià(
show_¡©
[11]) {

386 
ss
.
	`¡r
("");

387 
ss
 << 
msg
->
	`g‘
("Poi£: "è<< 
¡©s
->
poi£
 << "%";

388 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Reduces your chance of stumbling when hit"));

391 ià(
show_¡©
[12]) {

392 
ss
.
	`¡r
("");

393 
ss
 << 
msg
->
	`g‘
("BÚu XP: "è<< 
¡©s
->
efãùs
.
bÚus_xp
 << "%";

394 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Increaseshe XP gained…er kill"));

397 ià(
show_¡©
[13]) {

398 
ss
.
	`¡r
("");

399 
ss
 << 
msg
->
	`g‘
("BÚus"è<< " " << 
CURRENCY
 << ": " << 
¡©s
->
efãùs
.
bÚus_cu¼’cy
 << "%";

400 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Inü—£ th% found…” drİ",
CURRENCY
));

403 ià(
show_¡©
[14]) {

404 
ss
.
	`¡r
("");

405 
ss
 << 
msg
->
	`g‘
("BÚu I‹m Fšd: "è<< 
¡©s
->
efãùs
.
bÚus_™em_fšd
 << "%";

406 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Increaseshe chancehat‡nƒnemy will drop‡n item when killed"));

409 ià(
show_¡©
[15]) {

410 
ss
.
	`¡r
("");

411 
ss
 << 
msg
->
	`g‘
("S‹®th: "è<< 
¡©s
->
efãùs
.
bÚus_¡—Éh
 << "%";

412 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),
msg
->
	`g‘
("Increases your‡bilityo move undetected"));

415 ià(
show_¡©
[16]) {

416 
j
=0; j<
¡©s
->
vuÊ”abË
.
	`size
(); j++) {

417 
ss
.
	`¡r
("");

418 
ss
 << 
msg
->
	`g‘
(
ELEMENTS
[
j
].
»si¡
è<< ": " << (100 - 
¡©s
->
vuÊ”abË
[j]) << "%";

419 
¡©Li¡
->
	`£t
(
visibË_¡©s
++, 
ss
.
	`¡r
(),"");

423 
¡©Li¡
->
	`»äesh
();

426 
c¡©
[
CSTAT_NAME
].
t
.
	`ş—r
();

427 
c¡©
[
CSTAT_NAME
].
t
.
	`addText
(
msg
->
	`g‘
(
¡©s
->
ch¬aù”_şass
));

429 
c¡©
[
CSTAT_LEVEL
].
t
.
	`ş—r
();

430 
c¡©
[
CSTAT_LEVEL
].
t
.
	`addText
(
msg
->
	`g‘
("XP: %d", 
¡©s
->
xp
));

431 ià(
¡©s
->
Ëv–
 < 
MAX_CHARACTER_LEVEL
) {

432 
c¡©
[
CSTAT_LEVEL
].
t
.
	`addText
(
msg
->
	`g‘
("Next: %d", 
¡©s
->
xp_bË
[¡©s->
Ëv–
]));

435 
c¡©
[
CSTAT_PHYSICAL
].
t
.
	`ş—r
();

436 
c¡©
[
CSTAT_PHYSICAL
].
t
.
	`addText
(
msg
->
	`g‘
("Physical (P) increases melee weapon…roficiency‡ndotal HP."));

437 
c¡©
[
CSTAT_PHYSICAL
].
t
.
	`addText
(
msg
->
	`g‘
("ba£ (%d), bÚu (%d)", 
¡©s
->
physiÿl_ch¬aù”
, sts->
physiÿl_add™iÚ®
));

439 
c¡©
[
CSTAT_MENTAL
].
t
.
	`ş—r
();

440 
c¡©
[
CSTAT_MENTAL
].
t
.
	`addText
(
msg
->
	`g‘
("Mental (M) increases mental weapon…roficiency‡ndotal MP."));

441 
c¡©
[
CSTAT_MENTAL
].
t
.
	`addText
(
msg
->
	`g‘
("ba£ (%d), bÚu (%d)", 
¡©s
->
m’l_ch¬aù”
, sts->
m’l_add™iÚ®
));

443 
c¡©
[
CSTAT_OFFENSE
].
t
.
	`ş—r
();

444 
c¡©
[
CSTAT_OFFENSE
].
t
.
	`addText
(
msg
->
	`g‘
("Offense (O) increases„anged weapon…roficiency‡nd‡ccuracy."));

445 
c¡©
[
CSTAT_OFFENSE
].
t
.
	`addText
(
msg
->
	`g‘
("ba£ (%d), bÚu (%d)", 
¡©s
->
ofãn£_ch¬aù”
, sts->
ofãn£_add™iÚ®
));

447 
c¡©
[
CSTAT_DEFENSE
].
t
.
	`ş—r
();

448 
c¡©
[
CSTAT_DEFENSE
].
t
.
	`addText
(
msg
->
	`g‘
("Defense (D) increases‡rmor…roficiency‡nd‡voidance."));

449 
c¡©
[
CSTAT_DEFENSE
].
t
.
	`addText
(
msg
->
	`g‘
("ba£ (%d), bÚu (%d)", 
¡©s
->
deãn£_ch¬aù”
, sts->
deãn£_add™iÚ®
));

450 
	}
}

456 
SDL_CŞÜ
 
	gM’uCh¬aù”
::
	$bÚusCŞÜ
(
¡©
) {

457 ià(
¡©
 > 0è 
fÚt
->
	`g‘CŞÜ
("menu_bonus");

458 ià(
¡©
 < 0è 
fÚt
->
	`g‘CŞÜ
("menu_penalty");

459  
fÚt
->
	`g‘CŞÜ
("menu_label");

460 
	}
}

462 
	gM’uCh¬aù”
::
	$logic
() {

463 ià(!
visibË
) ;

465 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

466 
visibË
 = 
çl£
;

467 
¢d
->
	`¶ay
(
sfx_şo£
);

471 
i
=0; i<4; i++) {

472 
upg¿deBu‰Ú
[
i
]->
’abËd
 = 
çl£
;

475 
¥’t
 = 
¡©s
->
physiÿl_ch¬aù”
 + sts->
m’l_ch¬aù”
 + sts->
ofãn£_ch¬aù”
 + sts->
deãn£_ch¬aù”
 -4;

476 
skl_pošts
 = (
¡©s
->
Ëv–
 * sts->
¡©_pošts_³r_Ëv–
è- 
¥’t
;

478 ià(
¡©s
->
hp
 > 0 && 
¥’t
 < (¡©s->
Ëv–
 * sts->
¡©_pošts_³r_Ëv–
è&& s³Á < sts->
max_¥’dabË_¡©_pošts
 && sts->
humªoid
 ) {

479 ià(
¡©s
->
physiÿl_ch¬aù”
 < sts->
max_pošts_³r_¡©
 && 
show_upg¿de
[0]è
upg¿deBu‰Ú
[0]->
’abËd
 = 
Œue
;

480 ià(
¡©s
->
m’l_ch¬aù”
 < sts->
max_pošts_³r_¡©
 && 
show_upg¿de
[1]è
upg¿deBu‰Ú
[1]->
’abËd
 = 
Œue
;

481 ià(
¡©s
->
ofãn£_ch¬aù”
 < sts->
max_pošts_³r_¡©
 && 
show_upg¿de
[2]è
upg¿deBu‰Ú
[2]->
’abËd
 = 
Œue
;

482 ià(
¡©s
->
deãn£_ch¬aù”
 < sts->
max_pošts_³r_¡©
 && 
show_upg¿de
[3]è
upg¿deBu‰Ú
[3]->
’abËd
 = 
Œue
;

485 ià(
upg¿deBu‰Ú
[0]->
	`checkClick
()è
physiÿl_up
 = 
Œue
;

486 ià(
upg¿deBu‰Ú
[1]->
	`checkClick
()è
m’l_up
 = 
Œue
;

487 ià(
upg¿deBu‰Ú
[2]->
	`checkClick
()è
ofãn£_up
 = 
Œue
;

488 ià(
upg¿deBu‰Ú
[3]->
	`checkClick
()è
deãn£_up
 = 
Œue
;

490 
¡©Li¡
->
	`checkClick
();

492 ià(
¡©s
->
»äesh_¡©s
è
	`»äeshSts
();

493 
	}
}

497 
	gM’uCh¬aù”
::
	$»nd”
() {

498 ià(!
visibË
) ;

500 
SDL_Reù
 
¤c
;

501 
SDL_Reù
 
de¡
;

504 
¤c
.
x
 = 0;

505 
¤c
.
y
 = 0;

506 
de¡
.
x
 = 
wšdow_¬—
.x;

507 
de¡
.
y
 = 
wšdow_¬—
.y;

508 
¤c
.
w
 = 
de¡
.w = 320;

509 
¤c
.
h
 = 
de¡
.h = 416;

510 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

513 
şo£Bu‰Ú
->
	`»nd”
();

516 
Ïb–Ch¬aù”
->
	`»nd”
();

519 
Ïb–Un¥’t
->
	`»nd”
();

522 
i
=0; i<
CSTAT_COUNT
; i++) {

523 ià(
c¡©
[
i
].
visibË
) {

524 
c¡©
[
i
].
Ïb–
->
	`»nd”
();

525 
c¡©
[
i
].
v®ue
->
	`»nd”
();

530 
i
=0; i<4; i++) {

531 ià(
upg¿deBu‰Ú
[
i
]->
’abËd
èupg¿deBu‰Ú[i]->
	`»nd”
();

534 
¡©Li¡
->
	`»nd”
();

535 
	}
}

541 
ToŞtD©a
 
	gM’uCh¬aù”
::
	$checkToŞt
() {

543 
i
=0; i<
CSTAT_COUNT
; i++) {

544 ià(
	`isW™hš
(
c¡©
[
i
].
hov”
, 
š±
->
mou£
è&& !c¡©[i].
t
.
	`isEm±y
(è&& c¡©[i].
visibË
)

545  
c¡©
[
i
].
t
;

548  
¡©Li¡
->
	`checkToŞt
(
š±
->
mou£
);

549 
	}
}

555 
boŞ
 
	gM’uCh¬aù”
::
	$checkUpg¿de
() {

556 
¥’t
 = 
¡©s
->
physiÿl_ch¬aù”
 + sts->
m’l_ch¬aù”
 + sts->
ofãn£_ch¬aù”
 + sts->
deãn£_ch¬aù”
 -4;

557 
skl_pošts
 = (
¡©s
->
Ëv–
 * sts->
¡©_pošts_³r_Ëv–
è- 
¥’t
;

560 ià(
¥’t
 < (
¡©s
->
Ëv–
 * sts->
¡©_pošts_³r_Ëv–
è&& s³Á < sts->
max_¥’dabË_¡©_pošts
) {

563 ià(
physiÿl_up
) {

564 
¡©s
->
physiÿl_ch¬aù”
++;

565 
¡©s
->
	`»ÿlc
();

566 
ÃwPow”NÙifiÿtiÚ
 = 
Œue
;

567 
physiÿl_up
 = 
çl£
;

568  
Œue
;

571 ià(
m’l_up
) {

572 
¡©s
->
m’l_ch¬aù”
++;

573 
¡©s
->
	`»ÿlc
();

574 
ÃwPow”NÙifiÿtiÚ
 = 
Œue
;

575 
m’l_up
 = 
çl£
;

576  
Œue
;

579 ià(
ofãn£_up
) {

580 
¡©s
->
ofãn£_ch¬aù”
++;

581 
¡©s
->
	`»ÿlc
();

582 
ÃwPow”NÙifiÿtiÚ
 = 
Œue
;

583 
ofãn£_up
 = 
çl£
;

584  
Œue
;

587 ià(
deãn£_up
) {

588 
¡©s
->
deãn£_ch¬aù”
++;

589 
¡©s
->
	`»ÿlc
();

590 
ÃwPow”NÙifiÿtiÚ
 = 
Œue
;

591 
deãn£_up
 = 
çl£
;

592  
Œue
;

596  
çl£
;

597 
	}
}

599 
	gM’uCh¬aù”
::~
	$M’uCh¬aù”
() {

600 
	`SDL_F»eSurçû
(
background
);

601 
d–‘e
 
şo£Bu‰Ú
;

603 
d–‘e
 
Ïb–Ch¬aù”
;

604 
d–‘e
 
Ïb–Un¥’t
;

605 
i
=0; i<
CSTAT_COUNT
; i++) {

606 
d–‘e
 
c¡©
[
i
].
Ïb–
;

607 
d–‘e
 
c¡©
[
i
].
v®ue
;

609 
i
=0; i<4; i++) {

610 
d–‘e
 
upg¿deBu‰Ú
[
i
];

612 
d–‘e
 
¡©Li¡
;

613 
	}
}

	@MenuCharacter.h

23 #´agm¨
Úû


24 #iâdeà
MENU_CHARACTER_H


25 
	#MENU_CHARACTER_H


	)

27 
	~<SDL.h
>

28 
	~<SDL_image.h
>

29 
	~<SDL_mix”.h
>

31 
	~"Widg‘Lab–.h
"

32 
	~"Widg‘ToŞt.h
"

34 
	~<¡ršg
>

35 
	~<s¡»am
>

37 
şass
 
	gStBlock
;

38 
şass
 
	gWidg‘Bu‰Ú
;

39 
şass
 
	gWidg‘Lab–
;

40 
şass
 
	gWidg‘Li¡Box
;

42 cÚ¡ 
	gCSTAT_NAME
 = 0;

43 cÚ¡ 
	gCSTAT_LEVEL
 = 1;

44 cÚ¡ 
	gCSTAT_PHYSICAL
 = 2;

45 cÚ¡ 
	gCSTAT_MENTAL
 = 3;

46 cÚ¡ 
	gCSTAT_OFFENSE
 = 4;

47 cÚ¡ 
	gCSTAT_DEFENSE
 = 5;

48 cÚ¡ 
	gCSTAT_COUNT
 = 6;

49 cÚ¡ 
	gSTATLIST_COUNT
 = 17;

51 şas 
	cCh¬St
 {

52 
	mpublic
:

53 
Widg‘Lab–
 *
Ïb–
;

54 
Widg‘Lab–
 *
	mv®ue
;

55 
SDL_Reù
 
	mhov”
;

56 
ToŞtD©a
 
	mt
;

57 
boŞ
 
	mvisibË
;

59 
	$£tHov”
(
x
, 
y
, 
w
, 
h
) {

60 
hov”
.
x
=x;

61 
hov”
.
y
=y;

62 
hov”
.
w
=w;

63 
hov”
.
h
=h;

65 
	}
};

67 şas 
	cM’uCh¬aù”
 : 
public
 
M’u
 {

68 
´iv©e
:

69 
StBlock
 *
¡©s
;

71 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

72 
Widg‘Bu‰Ú
 *
	mupg¿deBu‰Ú
[4];

73 
Widg‘Lab–
 *
	mÏb–Ch¬aù”
;

74 
Widg‘Lab–
 *
	mÏb–Un¥’t
;

75 
Widg‘Li¡Box
 *
	m¡©Li¡
;

76 
Ch¬St
 
	mc¡©
[
CSTAT_COUNT
];

78 
lßdG¿phics
();

79 
SDL_CŞÜ
 
bÚusCŞÜ
(
¡©
);

80 
	mskl_pošts
;

81 
boŞ
 
	mphysiÿl_up
;

82 
boŞ
 
	mm’l_up
;

83 
boŞ
 
	mofãn£_up
;

84 
boŞ
 
	mdeãn£_up
;

87 
Pošt
 
	mşo£_pos
;

88 
Lab–Info
 
	mt™Ë
;

89 
Pošt
 
	mupg¿de_pos
[4];

90 
Pošt
 
	m¡©li¡_pos
;

91 
	m¡©li¡_rows
;

92 
	m¡©li¡_süŞlb¬_off£t
;

93 
Lab–Info
 
	mun¥’t_pos
;

94 
Lab–Info
 
	mÏb–_pos
[
CSTAT_COUNT
];

95 
SDL_Reù
 
	mv®ue_pos
[
CSTAT_COUNT
];

96 
boŞ
 
	mshow_upg¿de
[4];

97 
boŞ
 
	mshow_¡©
[
STATLIST_COUNT
];

100 
	mpublic
:

101 
M’uCh¬aù”
(
StBlock
 *
¡©s
);

102 ~
M’uCh¬aù”
();

103 
upd©e
();

104 
logic
();

105 
»nd”
();

106 
»äeshSts
();

107 
ToŞtD©a
 
checkToŞt
();

108 
boŞ
 
checkUpg¿de
();

109 
	$g‘Un¥’t
(è{  
skl_pošts
; }

111 
boŞ
 
ÃwPow”NÙifiÿtiÚ
;

113 
	}
};

	@MenuConfirm.cpp

19 
	~"M’uCÚfœm.h
"

20 
	~"S‘tšgs.h
"

21 
	~"Sh¬edResourûs.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

26 
	gM’uCÚfœm
::
	$M’uCÚfœm
(cÚ¡ 
¡ršg
& 
_bu‰ÚMsg
, cÚ¡ sŒšg& 
_boxMsg
è: 
	$M’u
() {

27 
cÚfœmClicked
 = 
çl£
;

28 
ÿnûlClicked
 = 
çl£
;

29 
hasCÚfœmBu‰Ú
 = 
Œue
;

30 ià(
_bu‰ÚMsg
 =ğ""è
hasCÚfœmBu‰Ú
 = 
çl£
;

32 
boxMsg
 = 
_boxMsg
;

34 ià(
hasCÚfœmBu‰Ú
) {

35 
bu‰ÚCÚfœm
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

36 
bu‰ÚCÚfœm
->
Ïb–
 = 
_bu‰ÚMsg
;

39 
bu‰ÚClo£
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

41 
	`lßdG¿phics
();

42 
	}
}

44 
	gM’uCÚfœm
::
	$lßdG¿phics
() {

45 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/cÚfœm_bg.²g").
	`c_¡r
());

46 if(!
background
) {

47 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

50 
SDL_Surçû
 *
ş—nup
 = 
background
;

51 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

52 
	`SDL_F»eSurçû
(
ş—nup
);

54 
	}
}

56 
	gM’uCÚfœm
::
	$upd©e
() {

57 ià(
hasCÚfœmBu‰Ú
) {

58 
bu‰ÚCÚfœm
->
pos
.
x
 = 
wšdow_¬—
.x + wšdow_¬—.
w
/2 - buttonConfirm->pos.w/2;

59 
bu‰ÚCÚfœm
->
pos
.
y
 = 
wšdow_¬—
.y + wšdow_¬—.
h
/2;

60 
bu‰ÚCÚfœm
->
	`»äesh
();

61 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
 + wšdow_¬—.
w
/2, wšdow_¬—.
y
 + wšdow_¬—.
h
 - (
bu‰ÚCÚfœm
->
pos
.h * 2), 
JUSTIFY_CENTER
, 
VALIGN_TOP
, 
boxMsg
, 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

63 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
 + wšdow_¬—.
w
/2, wšdow_¬—.
y
 + (wšdow_¬—.
h
 / 4), 
JUSTIFY_CENTER
, 
VALIGN_TOP
, 
boxMsg
, 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

66 
bu‰ÚClo£
->
pos
.
x
 = 
wšdow_¬—
.x + wšdow_¬—.
w
;

67 
bu‰ÚClo£
->
pos
.
y
 = 
wšdow_¬—
.y;

68 
	}
}

70 
	gM’uCÚfœm
::
	$logic
() {

71 ià(
visibË
è
cÚfœmClicked
 = 
çl£
;

72 ià(
visibË
 && 
hasCÚfœmBu‰Ú
) {

73 if(
bu‰ÚCÚfœm
->
	`checkClick
()) {

74 
cÚfœmClicked
 = 
Œue
;

76 if(
bu‰ÚClo£
->
	`checkClick
()) {

77 
visibË
 = 
çl£
;

78 
ÿnûlClicked
 = 
Œue
;

80 } ià(
visibË
 && !
hasCÚfœmBu‰Ú
) {

81 if(
bu‰ÚClo£
->
	`checkClick
()) {

82 
visibË
 = 
çl£
;

83 
ÿnûlClicked
 = 
Œue
;

86 
	}
}

88 
	gM’uCÚfœm
::
	$»nd”
() {

89 
SDL_Reù
 
¤c
;

92 
¤c
.
x
 = 0;

93 
¤c
.
y
 = 0;

94 
¤c
.
w
 = 
wšdow_¬—
.w;

95 
¤c
.
h
 = 
wšdow_¬—
.h;

96 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
wšdow_¬—
);

98 
Ïb–
.
	`»nd”
();

100 ià(
hasCÚfœmBu‰Ú
è
bu‰ÚCÚfœm
->
	`»nd”
();

101 
bu‰ÚClo£
->
	`»nd”
();

102 
	}
}

104 
	gM’uCÚfœm
::~
	$M’uCÚfœm
() {

105 ià(
hasCÚfœmBu‰Ú
è
d–‘e
 
bu‰ÚCÚfœm
;

106 
d–‘e
 
bu‰ÚClo£
;

107 
	`SDL_F»eSurçû
(
background
);

108 
	}
}

	@MenuConfirm.h

20 #´agm¨
Úû


21 #iâdeà
MENU_CONFIRM_H


22 
	#MENU_CONFIRM_H


	)

24 
	~"M’u.h
"

25 
	~"Widg‘Bu‰Ú.h
"

26 
	~<SDL_image.h
>

28 şas 
	cM’uCÚfœm
 : 
public
 
M’u
 {

29 
´Ùeùed
:

30 
lßdG¿phics
();

32 
Widg‘Bu‰Ú
 *
	mbu‰ÚCÚfœm
;

33 
Widg‘Bu‰Ú
 *
	mbu‰ÚClo£
;

34 
Widg‘Lab–
 
	mÏb–
;

36 
	m¡d
::
¡ršg
 
boxMsg
;

37 
boŞ
 
	mhasCÚfœmBu‰Ú
;

38 
	mpublic
:

39 
M’uCÚfœm
(cÚ¡ 
¡d
::
¡ršg
&, const std::string&);

40 ~
M’uCÚfœm
();

42 
upd©e
();

43 
logic
();

44 
vœtu®
 
»nd”
();

46 
boŞ
 
	mcÚfœmClicked
;

47 
boŞ
 
	mÿnûlClicked
;

	@MenuEnemy.cpp

24 
	~"M’u.h
"

25 
	~"M’uEÃmy.h
"

26 
	~"Sh¬edResourûs.h
"

27 
	~"Widg‘Lab–.h
"

28 
	~"FeP¬£r.h
"

29 
	~"UtsP¬sšg.h
"

30 
	~"UtsFeSy¡em.h
"

32 
	~<¡ršg
>

33 
	~<s¡»am
>

35 
usšg
 
Çme¥aû
 
	g¡d
;

38 
	gM’uEÃmy
::
	$M’uEÃmy
() {

39 
cu¡om_‹xt_pos
 = 
çl£
;

42 
FeP¬£r
 
šfe
;

43 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/enemy.txt"))) {

44 
šfe
.
	`Ãxt
()) {

45 
šfe
.
v®
 = infile.val + ',';

47 if(
šfe
.
key
 == "pos") {

48 
b¬_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

49 
b¬_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

50 
b¬_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

51 
b¬_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

52 } if(
šfe
.
key
 == "text_pos") {

53 
cu¡om_‹xt_pos
 = 
Œue
;

54 
‹xt_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

57 
šfe
.
	`şo£
();

58 } 
	`årštf
(
¡d”r
, "Unableo open menus/enemy.txt!\n");

60 
	`lßdG¿phics
();

61 
’emy
 = 
NULL
;

62 
timeout
 = 0;

64 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

65 
	}
}

67 
	gM’uEÃmy
::
	$lßdG¿phics
() {

69 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/’emy_b¬.²g").
	`c_¡r
());

70 
b¬_hp
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/’emy_b¬_hp.²g").
	`c_¡r
());

72 if(!
background
 || !
b¬_hp
) {

73 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

77 
SDL_Surçû
 *
ş—nup
;

79 ià(
background
) {

80 
ş—nup
 = 
background
;

81 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

82 
	`SDL_F»eSurçû
(
ş—nup
);

85 ià(
b¬_hp
) {

86 
ş—nup
 = 
b¬_hp
;

87 
b¬_hp
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(bar_hp);

88 
	`SDL_F»eSurçû
(
ş—nup
);

90 
	}
}

92 
	gM’uEÃmy
::
	$hªdËNewM­
() {

93 
’emy
 = 
NULL
;

94 
	}
}

96 
	gM’uEÃmy
::
	$logic
() {

99 ià(
timeout
 > 0)imeout--;

100 ià(
timeout
 =ğ0è
’emy
 = 
NULL
;

101 
	}
}

103 
	gM’uEÃmy
::
	$»nd”
() {

104 ià(
’emy
 =ğ
NULL
) ;

105 ià(
’emy
->
¡©s
.
cÜp£
 &&ƒÃmy->¡©s.
cÜp£_ticks
 == 0) ;

107 
SDL_Reù
 
¤c
;

108 
SDL_Reù
 
de¡
;

109 
hp_b¬_Ëngth
;

112 
de¡
.
x
 = 
wšdow_¬—
.x+
b¬_pos
.x;

113 
de¡
.
y
 = 
wšdow_¬—
.y+
b¬_pos
.y;

114 
de¡
.
w
 = 
b¬_pos
.w;

115 
de¡
.
h
 = 
b¬_pos
.h;

117 
	`SDL_Bl™Surçû
(
background
, 
NULL
, 
sü“n
, &
de¡
);

119 ià(
’emy
->
¡©s
.
maxhp
 == 0)

120 
hp_b¬_Ëngth
 = 0;

122 
hp_b¬_Ëngth
 = (
’emy
->
¡©s
.
hp
 * 100è/ƒÃmy->¡©s.
maxhp
;

126 
¤c
.
x
 = 0;

127 
¤c
.
y
 = 0;

128 
¤c
.
h
 = 
b¬_pos
.h;

129 
¤c
.
w
 = 
hp_b¬_Ëngth
;

131 
	`SDL_Bl™Surçû
(
b¬_hp
, &
¤c
, 
sü“n
, &
de¡
);

133 
¡ršg¡»am
 
ss
;

134 
ss
.
	`¡r
("");

135 ià(
’emy
->
¡©s
.
hp
 > 0)

136 
ss
 << 
’emy
->
¡©s
.
hp
 << "/" <<ƒÃmy->¡©s.
maxhp
;

138 
ss
 << 
msg
->
	`g‘
("Dead");

140 ià(!
‹xt_pos
.
hidd’
) {

141 
Widg‘Lab–
 
Ïb–
;

143 ià(
cu¡om_‹xt_pos
) {

144 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
‹xt_pos
.x, wšdow_¬—.
y
+‹xt_pos.y,ext_pos.
ju¡ify
,ext_pos.
v®ign
, 
msg
->
	`g‘
("% Ëv– %d", 
’emy
->
¡©s
.
Ëv–
,ƒÃmy->¡©s.
Çme
), 
cŞÜ_nÜm®
,ext_pos.
fÚt_¡yË
);

146 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
b¬_pos
.x+b¬_pos.
w
/2, wšdow_¬—.
y
+b¬_pos.y, 
JUSTIFY_CENTER
, 
VALIGN_BOTTOM
, 
msg
->
	`g‘
("% Ëv– %d", 
’emy
->
¡©s
.
Ëv–
,ƒÃmy->¡©s.
Çme
), 
cŞÜ_nÜm®
);

148 
Ïb–
.
	`»nd”
();

150 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
b¬_pos
.x+b¬_pos.
w
/2, wšdow_¬—.
y
+b¬_pos.y+b¬_pos.
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
ss
.
	`¡r
(), 
cŞÜ_nÜm®
);

151 
Ïb–
.
	`»nd”
();

156 
	}
}

158 
	gM’uEÃmy
::~
	$M’uEÃmy
() {

159 
	`SDL_F»eSurçû
(
background
);

160 
	`SDL_F»eSurçû
(
b¬_hp
);

161 
	}
}

	@MenuEnemy.h

25 #´agm¨
Úû


26 #iâdeà
MENU_ENEMY_H


27 
	#MENU_ENEMY_H


	)

29 
	~"EÃmy.h
"

30 
	~"S‘tšgs.h
"

31 
	~"Widg‘Lab–.h
"

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

36 şas 
	cM’uEÃmy
 : 
public
 
M’u
 {

37 
´iv©e
:

38 
SDL_Surçû
 *
background
;

39 
SDL_Surçû
 *
	mb¬_hp
;

40 
SDL_Reù
 
	mb¬_pos
;

41 
Lab–Info
 
	m‹xt_pos
;

42 
boŞ
 
	mcu¡om_‹xt_pos
;

43 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

44 
	mpublic
:

45 
M’uEÃmy
();

46 ~
M’uEÃmy
();

47 
EÃmy
 *
	m’emy
;

48 
lßdG¿phics
();

49 
hªdËNewM­
();

50 
logic
();

51 
»nd”
();

52 
	mtimeout
;

	@MenuExit.cpp

22 
	~"M’uEx™.h
"

23 
	~"Sh¬edResourûs.h
"

24 
	~"S‘tšgs.h
"

26 
	gM’uEx™
::
	$M’uEx™
(è: 
	$M’u
() {

28 
ex™Clicked
 = 
çl£
;

30 
bu‰ÚEx™
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_default.png"));

31 
bu‰ÚEx™
->
Ïb–
 = 
msg
->
	`g‘
("Exit");

33 
bu‰ÚClo£
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

35 
	`lßdG¿phics
();

36 
	}
}

38 
	gM’uEx™
::
	$lßdG¿phics
() {

39 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/cÚfœm_bg.²g").
	`c_¡r
());

40 if(!
background
) {

41 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

44 
SDL_Surçû
 *
ş—nup
 = 
background
;

45 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

46 
	`SDL_F»eSurçû
(
ş—nup
);

48 
	}
}

50 
	gM’uEx™
::
	$upd©e
() {

51 
bu‰ÚEx™
->
pos
.
x
 = 
VIEW_W_HALF
 - bu‰ÚEx™->pos.
w
/2;

52 
bu‰ÚEx™
->
pos
.
y
 = 
VIEW_H
/2;

53 
bu‰ÚEx™
->
	`»äesh
();

55 
bu‰ÚClo£
->
pos
.
x
 = 
wšdow_¬—
.x + wšdow_¬—.
w
;

56 
bu‰ÚClo£
->
pos
.
y
 = 
wšdow_¬—
.y;

58 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
 + wšdow_¬—.
w
/2, wšdow_¬—.
y
 + wšdow_¬—.
h
 - (
bu‰ÚEx™
->
pos
.h * 2), 
JUSTIFY_CENTER
, 
VALIGN_TOP
, 
msg
->
	`g‘
("Savªdƒx™Øt™Ë?"), 
fÚt
->
	`g‘CŞÜ
("menu_normal"));

59 
	}
}

61 
	gM’uEx™
::
	$logic
() {

62 ià(
visibË
) {

63 ià(
bu‰ÚEx™
->
	`checkClick
()) {

64 
ex™Clicked
 = 
Œue
;

66 ià(
bu‰ÚClo£
->
	`checkClick
()) {

67 
visibË
 = 
çl£
;

70 
	}
}

72 
	gM’uEx™
::
	$»nd”
() {

73 ià(
visibË
) {

74 
SDL_Reù
 
¤c
;

77 
¤c
.
x
 = 0;

78 
¤c
.
y
 = 0;

79 
¤c
.
w
 = 
wšdow_¬—
.w;

80 
¤c
.
h
 = 
wšdow_¬—
.h;

81 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
wšdow_¬—
);

83 
Ïb–
.
	`»nd”
();

85 
bu‰ÚEx™
->
	`»nd”
();

86 
bu‰ÚClo£
->
	`»nd”
();

88 
	}
}

90 
	gM’uEx™
::~
	$M’uEx™
() {

91 
d–‘e
 
bu‰ÚEx™
;

92 
d–‘e
 
bu‰ÚClo£
;

93 
	`SDL_F»eSurçû
(
background
);

94 
	}
}

	@MenuExit.h

23 #´agm¨
Úû


24 #iâdeà
MENU_EXIT_h


25 
	#MENU_EXIT_H


	)

27 
	~"M’u.h
"

28 
	~"Widg‘Bu‰Ú.h
"

30 
	~<SDL_image.h
>

33 şas 
	cM’uEx™
 : 
public
 
M’u
 {

34 
´Ùeùed
:

35 
lßdG¿phics
();

37 
Widg‘Bu‰Ú
 *
	mbu‰ÚEx™
;

38 
Widg‘Bu‰Ú
 *
	mbu‰ÚClo£
;

39 
Widg‘Lab–
 
	mÏb–
;

41 
boŞ
 
	mex™Clicked
;

43 
	mpublic
:

44 
M’uEx™
();

45 ~
M’uEx™
();

47 
upd©e
();

48 
logic
();

49 
vœtu®
 
»nd”
();

51 
boŞ
 
	$isEx™Reque¡ed
(è{  
ex™Clicked
; }

52 
	}
};

	@MenuHUDLog.cpp

23 
	~"M’u.h
"

24 
	~"M’uHUDLog.h
"

25 
	~"Sh¬edResourûs.h
"

26 
	~"S‘tšgs.h
"

28 
usšg
 
Çme¥aû
 
	g¡d
;

30 
	gM’uHUDLog
::
	$M’uHUDLog
() {

32 
li¡_¬—
.
x
 = 224;

33 
li¡_¬—
.
y
 = 416;

34 
fÚt
->
	`£tFÚt
("font_regular");

35 
·¿g¿ph_¥acšg
 = 
fÚt
->
	`g‘LšeHeight
()/2;

37 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

38 
	}
}

44 
	gM’uHUDLog
::
	$ÿlcDu¿tiÚ
(cÚ¡ 
¡ršg
& 
s
) {

46  
MAX_FRAMES_PER_SEC
 * 5 + 
s
.
	`Ëngth
() * (MAX_FRAMES_PER_SEC/10);

47 
	}
}

53 
	gM’uHUDLog
::
	$logic
() {

54 
i
=0; i<
msg_age
.
	`size
(); i++) {

55 ià(
msg_age
[
i
] > 0)

56 
msg_age
[
i
]--;

58 
	`»move
(
i
);

60 
	}
}

66 
	gM’uHUDLog
::
	$»nd”
() {

68 
SDL_Reù
 
de¡
;

69 
de¡
.
x
 = 
wšdow_¬—
.x;

70 
de¡
.
y
 = 
wšdow_¬—
.y;

74 
i
 = 
msg_age
.
	`size
() - 1; i >= 0; i--) {

75 ià(
msg_age
[
i
] > 0 && 
de¡
.
y
 > 64) {

77 
de¡
.
y
 -ğ
msg_bufãr
[
i
]->
h
 + 
·¿g¿ph_¥acšg
;

78 
	`SDL_Bl™Surçû
(
msg_bufãr
[
i
], 
NULL
, 
sü“n
, &
de¡
);

82 
	}
}

88 
	gM’uHUDLog
::
	$add
(cÚ¡ 
¡ršg
& 
s
) {

91 
log_msg
.
	`push_back
(
s
);

92 
msg_age
.
	`push_back
(
	`ÿlcDu¿tiÚ
(
s
));

95 ià(
msg_age
.
	`size
() > 1) {

96 cÚ¡ 
Ï¡
 = 
msg_age
.
	`size
()-1;

97 ià(
msg_age
[
Ï¡
] < msg_age[last-1])

98 
msg_age
[
Ï¡
] = msg_age[last-1];

102 
fÚt
->
	`£tFÚt
("font_regular");

103 
Pošt
 
size
 = 
fÚt
->
	`ÿlc_size
(
s
, 
wšdow_¬—
.
w
);

104 
msg_bufãr
.
	`push_back
(
	`ü—‹AÍhaSurçû
(
size
.
x
, size.
y
));

105 
fÚt
->
	`»nd”Shadowed
(
s
, 0, 0, 
JUSTIFY_LEFT
, 
msg_bufãr
.
	`back
(), 
wšdow_¬—
.
w
, 
cŞÜ_nÜm®
);

106 
	}
}

111 
	gM’uHUDLog
::
	$»move
(
msg_šdex
) {

112 
	`SDL_F»eSurçû
(
msg_bufãr
.
	`©
(
msg_šdex
));

113 
msg_bufãr
.
	`”a£
(msg_bufãr.
	`begš
()+
msg_šdex
);

114 
msg_age
.
	`”a£
(msg_age.
	`begš
()+
msg_šdex
);

115 
log_msg
.
	`”a£
Öog_msg.
	`begš
()+
msg_šdex
);

116 
	}
}

118 
	gM’uHUDLog
::
	$ş—r
() {

119 
i
=0; i<
msg_bufãr
.
	`size
(); i++) {

120 
	`SDL_F»eSurçû
(
msg_bufãr
[
i
]);

122 
msg_bufãr
.
	`ş—r
();

123 
msg_age
.
	`ş—r
();

124 
log_msg
.
	`ş—r
();

125 
	}
}

127 
	gM’uHUDLog
::~
	$M’uHUDLog
() {

128 
i
=0; i<
msg_bufãr
.
	`size
(); i++) {

129 
	`SDL_F»eSurçû
(
msg_bufãr
[
i
]);

131 
	}
}

	@MenuHUDLog.h

23 #´agm¨
Úû


24 #iâdeà
MENU_HUD_LOG_H


25 
	#MENU_HUD_LOG_H


	)

27 
	~"Uts.h
"

29 
	~<SDL.h
>

30 
	~<SDL_image.h
>

32 
	~<¡ršg
>

33 
	~<veùÜ
>

35 şas 
	cM’uHUDLog
 : 
public
 
M’u
 {

36 
´iv©e
:

38 
ÿlcDu¿tiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

40 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
log_msg
;

41 
	m¡d
::
veùÜ
<> 
msg_age
;

42 
	m¡d
::
veùÜ
<
SDL_Surçû
*> 
msg_bufãr
;

44 
	m·¿g¿ph_¥acšg
;

46 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

48 
	mpublic
:

50 
M’uHUDLog
();

51 ~
M’uHUDLog
();

52 
logic
();

53 
»nd”
();

54 
add
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

55 
»move
(
msg_šdex
);

56 
ş—r
();

58 
Pošt
 
	mli¡_¬—
;

	@MenuInventory.cpp

25 
	~"FeP¬£r.h
"

26 
	~"LoÙMªag”.h
"

27 
	~"M’u.h
"

28 
	~"M’uInv’tÜy.h
"

29 
	~"Pow”Mªag”.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"S‘tšgs.h
"

32 
	~"StBlock.h
"

33 
	~"UtsP¬sšg.h
"

34 
	~"Widg‘Bu‰Ú.h
"

36 
	~<s¡»am
>

38 
usšg
 
Çme¥aû
 
	g¡d
;

41 
	gM’uInv’tÜy
::
	$M’uInv’tÜy
(
I‹mMªag”
 *
_™ems
, 
StBlock
 *
_¡©s
, 
Pow”Mªag”
 *
_pow”s
) {

42 
™ems
 = 
_™ems
;

43 
¡©s
 = 
_¡©s
;

44 
pow”s
 = 
_pow”s
;

45 
MAX_EQUIPPED
 = 4;

46 
MAX_CARRIED
 = 64;

47 
visibË
 = 
çl£
;

48 
	`lßdG¿phics
();

50 
cu¼’cy
 = 0;

52 
d¿g_´ev_¤c
 = -1;

53 
chªged_equm’t
 = 
Œue
;

54 
chªged_¬tiçù
 = 
Œue
;

55 
log_msg
 = "";

57 
şo£Bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

60 
SDL_Reù
 
equm’t_¦Ù
;

61 
FeP¬£r
 
šfe
;

62 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/inventory.txt"))) {

63 
šfe
.
	`Ãxt
()) {

64 
šfe
.
v®
 = infile.val + ',';

66 if(
šfe
.
key
 == "close") {

67 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

68 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

69 } if(
šfe
.
key
 == "equipment_slot") {

70 
equm’t_¦Ù
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

71 
equm’t_¦Ù
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

72 
equm’t_¦Ù
.
w
 =ƒqum’t_¦Ù.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

73 
equ³d_¬—
.
	`push_back
(
equm’t_¦Ù
);

74 
¦Ù_ty³
.
	`push_back
(
	`—tFœ¡SŒšg
(
šfe
.
v®
,','));

75 } if(
šfe
.
key
 == "slot_name") {

76 
¦Ù_desc
.
	`push_back
(
	`—tFœ¡SŒšg
(
šfe
.
v®
,','));

77 } if(
šfe
.
key
 == "carried_area") {

78 
ÿ¼›d_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

79 
ÿ¼›d_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

80 } ià(
šfe
.
key
 == "carried_cols"){

81 
ÿ¼›d_cŞs
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

82 } ià(
šfe
.
key
 == "carried_rows"){

83 
ÿ¼›d_rows
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

84 } ià(
šfe
.
key
 == "caption"){

85 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

86 } ià(
šfe
.
key
 == "currency"){

87 
cu¼’cy_lbl
 = 
	`—tLab–Info
(
šfe
.
v®
);

88 } ià(
šfe
.
key
 == "help"){

89 
h–p_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

90 
h–p_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

91 
h–p_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

92 
h–p_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

95 
šfe
.
	`şo£
();

96 } 
	`årštf
(
¡d”r
, "Unableo open menus/inventory.txt!\n");

98 
MAX_EQUIPPED
 = 
equ³d_¬—
.
	`size
();

99 
MAX_CARRIED
 = 
ÿ¼›d_cŞs
 * 
ÿ¼›d_rows
;

101 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

102 
cŞÜ_high
 = 
fÚt
->
	`g‘CŞÜ
("menu_bonus");

103 
	}
}

105 
	gM’uInv’tÜy
::
	$lßdG¿phics
() {

107 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/šv’tÜy.²g").
	`c_¡r
());

108 if(!
background
) {

109 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

112 
SDL_Surçû
 *
ş—nup
 = 
background
;

113 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

114 
	`SDL_F»eSurçû
(
ş—nup
);

116 
	}
}

118 
	gM’uInv’tÜy
::
	$upd©e
() {

119 
i
=0; i<
MAX_EQUIPPED
; i++) {

120 
equ³d_¬—
[
i
].
x
 +ğ
wšdow_¬—
.x;

121 
equ³d_¬—
[
i
].
y
 +ğ
wšdow_¬—
.y;

124 
ÿ¼›d_¬—
.
x
 +ğ
wšdow_¬—
.x;

125 
ÿ¼›d_¬—
.
y
 +ğ
wšdow_¬—
.y;

126 
ÿ¼›d_¬—
.
w
 = 
ÿ¼›d_cŞs
*
ICON_SIZE
;

127 
ÿ¼›d_¬—
.
h
 = 
ÿ¼›d_rows
*
ICON_SIZE
;

129 
šv’tÜy
[
EQUIPMENT
].
	`š™
(
MAX_EQUIPPED
, 
™ems
, 
equ³d_¬—
, 
¦Ù_ty³
);

130 
šv’tÜy
[
CARRIED
].
	`š™
(
MAX_CARRIED
, 
™ems
, 
ÿ¼›d_¬—
, 
ICON_SIZE
, 
ÿ¼›d_cŞs
);

132 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x+
şo£_pos
.x;

133 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y+
şo£_pos
.y;

134 
	}
}

136 
	gM’uInv’tÜy
::
	$logic
() {

139 ià(
¡©s
->
d—th_³ÇÉy
) {

140 
cu¼’cy
 = currency/2;

141 
¡©s
->
d—th_³ÇÉy
 = 
çl£
;

145 
¡©s
->
cu¼’cy
 = currency;

148 ià(
visibË
) {

149 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

150 
visibË
 = 
çl£
;

151 
¢d
->
	`¶ay
(
sfx_şo£
);

153 ià(
d¿g_´ev_¤c
 == -1) {

154 
	`ş—rHighlight
();

157 
	}
}

159 
	gM’uInv’tÜy
::
	$»nd”
() {

160 ià(!
visibË
) ;

163 
SDL_Reù
 
de¡
 = 
wšdow_¬—
;

164 
	`SDL_Bl™Surçû
(
background
, 
NULL
, 
sü“n
, &
de¡
);

167 
şo£Bu‰Ú
->
	`»nd”
();

170 
Widg‘Lab–
 
Ïb–
;

171 ià(!
t™Ë
.
hidd’
) {

172 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("Inv’tÜy"), 
cŞÜ_nÜm®
,™Ë.
fÚt_¡yË
);

173 
Ïb–
.
	`»nd”
();

175 ià(!
cu¼’cy_lbl
.
hidd’
) {

176 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
cu¼’cy_lbl
.x, wšdow_¬—.
y
+cu¼’cy_lbl.y, cu¼’cy_lbl.
ju¡ify
, cu¼’cy_lbl.
v®ign
, 
msg
->
	`g‘
("%d %s", 
cu¼’cy
, 
CURRENCY
), 
cŞÜ_nÜm®
, cu¼’cy_lbl.
fÚt_¡yË
);

177 
Ïb–
.
	`»nd”
();

180 
šv’tÜy
[
EQUIPMENT
].
	`»nd”
();

181 
šv’tÜy
[
CARRIED
].
	`»nd”
();

182 
	}
}

184 
	gM’uInv’tÜy
::
	$¬—Ov”
(
Pošt
 
mou£
) {

185 ià(
	`isW™hš
(
ÿ¼›d_¬—
, 
mou£
)) {

186  
CARRIED
;

188 
i
=0; i<
equ³d_¬—
.
	`size
(); i++) {

189 ià(
	`isW™hš
(
equ³d_¬—
[
i
], 
mou£
)) {

190  
EQUIPMENT
;

195 
	}
}

202 
ToŞtD©a
 
	gM’uInv’tÜy
::
	$checkToŞt
(
Pošt
 
mou£
) {

203 
¬—
;

204 
¦Ù
;

205 
ToŞtD©a
 
t
;

207 
¬—
 = 
	`¬—Ov”
(
mou£
);

208 ià(
¬—
 == -1) {

209 ià(
mou£
.
x
 >ğ
wšdow_¬—
.x + 
h–p_pos
.x && mou£.
y
 >ğwšdow_¬—.y+h–p_pos.y && mou£.x < wšdow_¬—.x+h–p_pos.x+h–p_pos.
w
 && mou£.y < wšdow_¬—.y+h–p_pos.y+h–p_pos.
h
) {

210 
t
.
	`addText
(
msg
->
	`g‘
("Use SHIFTo move only one item."));

211 
t
.
	`addText
(
msg
->
	`g‘
("CTRL-click‡ carried itemo sell it."));

213  
t
;

215 
¦Ù
 = 
šv’tÜy
[
¬—
].
	`¦ÙOv”
(
mou£
);

217 ià(
¦Ù
 == -1)

218  
t
;

220 ià(
šv’tÜy
[
¬—
][
¦Ù
].
™em
 > 0) {

221 
t
 = 
šv’tÜy
[
¬—
].
	`checkToŞt
Ğ
mou£
, 
¡©s
, 
PLAYER_INV
);

223 ià(
¬—
 =ğ
EQUIPMENT
 && 
šv’tÜy
[¬—][
¦Ù
].
™em
 == 0) {

224 
t
.
	`addText
(
msg
->
	`g‘
(
¦Ù_desc
[
¦Ù
]));

227  
t
;

228 
	}
}

233 
I‹mSck
 
	gM’uInv’tÜy
::
	$şick
(
IÅutS‹
 * 
šput
) {

234 
I‹mSck
 
™em
;

235 
™em
.item = 0;

236 
™em
.
quªt™y
 = 0;

238 
d¿g_´ev_¤c
 = 
	`¬—Ov”
(
šput
->
mou£
);

239 ifĞ
d¿g_´ev_¤c
 > -1) {

240 
™em
 = 
šv’tÜy
[
d¿g_´ev_¤c
].
	`şick
(
šput
);

242 ià(
d¿g_´ev_¤c
 =ğ
EQUIPMENT
) {

243 ià(
¡©s
->
humªoid
) {

244 
	`upd©eEqum’t
Ğ
šv’tÜy
[
EQUIPMENT
].
d¿g_´ev_¦Ù
);

246 
	`™emR‘uº
(
™em
);

247 
™em
.item = 0;

248 
™em
.
quªt™y
 = 0;

250 } ià(
d¿g_´ev_¤c
 =ğ
CARRIED
 && !
š±
->
´essšg
[
CTRL
] && !š±->´essšg[
MAIN2
]) {

251 
šv’tÜy
[
EQUIPMENT
].
	`highlightM©chšg
(
™ems
->™ems[
™em
.™em].
ty³
);

255  
™em
;

256 
	}
}

261 
	gM’uInv’tÜy
::
	$™emR‘uº
Ğ
I‹mSck
 
¡ack
) {

262 ià(
d¿g_´ev_¤c
 == -1) ;

263 
šv’tÜy
[
d¿g_´ev_¤c
].
	`™emR‘uº
Ğ
¡ack
);

265 ià(
d¿g_´ev_¤c
 =ğ
EQUIPMENT
) {

266 
	`upd©eEqum’t
(
šv’tÜy
[
EQUIPMENT
].
d¿g_´ev_¦Ù
);

268 
d¿g_´ev_¤c
 = -1;

269 
	}
}

275 
	gM’uInv’tÜy
::
	$drİ
(
Pošt
 
mou£
, 
I‹mSck
 
¡ack
) {

276 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

278 
¬—
 = 
	`¬—Ov”
(
mou£
);

279 ià(
¬—
 == -1) {

281 
	`™emR‘uº
(
¡ack
);

285 
¦Ù
 = 
šv’tÜy
[
¬—
].
	`¦ÙOv”
(
mou£
);

286 ià(
¦Ù
 == -1) {

288 
	`™emR‘uº
(
¡ack
);

292 
d¿g_´ev_¦Ù
 = 
šv’tÜy
[
d¿g_´ev_¤c
].drag_prev_slot;

294 ià(
¬—
 =ğ
EQUIPMENT
) {

299 ià(
d¿g_´ev_¤c
 =ğ
CARRIED
 && 
¦Ù_ty³
[
¦Ù
] =ğ
™ems
->™ems[
¡ack
.
™em
].
ty³
 && 
	`»quœem’tsM‘
(¡ack.™emè&& 
¡©s
->
humªoid
) {

300 ifĞ
šv’tÜy
[
¬—
][
¦Ù
].
™em
 =ğ
¡ack
.item) {

302 
	`add
Ğ
¡ack
, 
¬—
, 
¦Ù
);

304 ifĞ
šv’tÜy
[
d¿g_´ev_¤c
][
d¿g_´ev_¦Ù
].
™em
 == 0) {

306 
	`™emR‘uº
Ğ
šv’tÜy
[
¬—
][
¦Ù
]);

307 
šv’tÜy
[
¬—
][
¦Ù
] = 
¡ack
;

308 
	`upd©eEqum’t
Ğ
¦Ù
);

310 
	`™emR‘uº
Ğ
¡ack
);

315 
	`™emR‘uº
Ğ
¡ack
);

318 ià(
¬—
 =ğ
CARRIED
) {

321 ià(
d¿g_´ev_¤c
 =ğ
CARRIED
) {

322 ià(
¦Ù
 !ğ
d¿g_´ev_¦Ù
) {

323 ifĞ
šv’tÜy
[
¬—
][
¦Ù
].
™em
 =ğ
¡ack
.item) {

325 
	`add
Ğ
¡ack
, 
¬—
, 
¦Ù
);

327 ifĞ
šv’tÜy
[
¬—
][
¦Ù
].
™em
 == 0) {

329 
šv’tÜy
[
¬—
][
¦Ù
] = 
¡ack
;

331 ifĞ
šv’tÜy
[
d¿g_´ev_¤c
][
d¿g_´ev_¦Ù
].
™em
 == 0) {

333 
	`™emR‘uº
Ğ
šv’tÜy
[
¬—
][
¦Ù
]);

334 
šv’tÜy
[
¬—
][
¦Ù
] = 
¡ack
;

336 
	`™emR‘uº
Ğ
¡ack
);

340 
	`™emR‘uº
Ğ
¡ack
);

346 ià(
šv’tÜy
[
¬—
][
¦Ù
].
™em
 =ğ
¡ack
.™em || 
d¿g_´ev_¤c
 == -1) {

348 
	`add
Ğ
¡ack
, 
¬—
, 
¦Ù
);

350 ifĞ
šv’tÜy
[
¬—
][
¦Ù
].
™em
 == 0) {

352 
šv’tÜy
[
¬—
][
¦Ù
] = 
¡ack
;

355 
šv’tÜy
[
EQUIPMENT
][
d¿g_´ev_¦Ù
].
™em
 == 0

356 && 
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
 !ğ
¡ack
.item

357 && 
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
 =ğ
¦Ù_ty³
[
d¿g_´ev_¦Ù
]

358 && 
	`»quœem’tsM‘
(
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
)

361 
	`™emR‘uº
Ğ
šv’tÜy
[
¬—
][
¦Ù
]);

362 
šv’tÜy
[
¬—
][
¦Ù
] = 
¡ack
;

365 
	`™emR‘uº
Ğ
¡ack
);

370 
d¿g_´ev_¤c
 = -1;

371 
	}
}

378 
	gM’uInv’tÜy
::
	$aùiv©e
(
IÅutS‹
 * 
šput
) {

379 
I‹mSck
 
¡ack
;

380 
Pošt
 
nuÎ±
;

381 
nuÎ±
.
x
 =‚uÎ±.
y
 = 0;

384 
¦Ù
 = 
šv’tÜy
[
CARRIED
].
	`¦ÙOv”
(
šput
->
mou£
);

385 ià(
¦Ù
 == -1)

389 ià(
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
 == "quest") {

393 ià(
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
 == "consumable") {

396 ià(
pow”s
->pow”s[
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
pow”
].
¥awn_ty³
 =ğ"uÁ¿nsfÜm" && !
¡©s
->
ŒªsfÜmed
) ;

399 ià(
¡©s
->
h”o_coŞdown
[
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
pow”
] > 0) ;

400 
¡©s
->
h”o_coŞdown
[
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
pow”
] = 
pow”s
->pow”s[™ems->™ems[šv’tÜy[CARRIED][¦Ù].™em].pow”].
coŞdown
;

403 ià(!
pow”s
->pow”s[
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
pow”
].
»quœes_rg‘šg
) {

405 
u£d_™em_couÁ
 = 
pow”s
->
u£d_™ems
.
	`size
();

406 
u£d_equ³d_™em_couÁ
 = 
pow”s
->
u£d_equ³d_™ems
.
	`size
();

407 
pow”s
->
	`aùiv©e
(
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
pow”
, 
¡©s
, 
nuÎ±
);

409 ià(
u£d_™em_couÁ
 < 
pow”s
->
u£d_™ems
.
	`size
()èpow”s->u£d_™ems.
	`pİ_back
();

410 ià(
u£d_equ³d_™em_couÁ
 < 
pow”s
->
u£d_equ³d_™ems
.
	`size
()èpow”s->u£d_equ³d_™ems.
	`pİ_back
();

411 
šv’tÜy
[
CARRIED
].
	`sub¡¿ù
(
¦Ù
);

415 
log_msg
 = 
msg
->
	`g‘
("This item can only be used fromhe‡ction bar.");

420 ià(
¡©s
->
humªoid
) {

421 
equ_¦Ù
 = -1;

423 
i
 = 0; i < 
MAX_EQUIPPED
; i++) {

425 ià((
¦Ù_ty³
[
i
] =ğ
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
) &&

426 (
šv’tÜy
[
EQUIPMENT
].
¡Üage
[
i
].
™em
 == 0)) {

427 
equ_¦Ù
 = 
i
;

430 ià(
equ_¦Ù
 == -1) {

432 
i
 = 0; i < 
MAX_EQUIPPED
; i++) {

433 ià(
¦Ù_ty³
[
i
] =ğ
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
) {

434 
equ_¦Ù
 = 
i
;

440 ià(
equ_¦Ù
 != -1) {

441 ià(
	`»quœem’tsM‘
(
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
)) {

442 
¡ack
 = 
	`şick
Ğ
šput
);

443 ifĞ
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
].
™em
 =ğ
¡ack
.item) {

445 
	`add
Ğ
¡ack
, 
EQUIPMENT
, 
equ_¦Ù
);

447 ifĞ
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
].
™em
 == 0) {

449 
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
] = 
¡ack
;

452 ifĞ
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
 == 0) {

454 
	`™emR‘uº
Ğ
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
]);

458 
	`add
Ğ
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
]);

460 
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
] = 
¡ack
;

462 
	`upd©eEqum’t
Ğ
equ_¦Ù
);

463 
™ems
->
	`¶aySound
(
šv’tÜy
[
EQUIPMENT
][
equ_¦Ù
].
™em
);

465 } 
	`årštf
(
¡d”r
, "Cª'ˆfšdƒqu slÙ, cÜ»¥ÚdšgØty³ %s\n", 
™ems
->™ems[
šv’tÜy
[
CARRIED
][
¦Ù
].
™em
].
ty³
.
	`c_¡r
());

468 
d¿g_´ev_¤c
 = -1;

469 
	}
}

478 
	gM’uInv’tÜy
::
	$add
(
I‹mSck
 
¡ack
, 
¬—
, 
¦Ù
) {

479 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

481 ià(
¡ack
.
™em
 != 0) {

482 ià(
¬—
 < 0) {

483 
¬—
 = 
CARRIED
;

485 
max_quªt™y
 = 
™ems
->™ems[
¡ack
.
™em
].max_quantity;

486 ià(
¦Ù
 > -1 && 
šv’tÜy
[
¬—
][¦Ù].
™em
 !ğ0 && inv’tÜy[¬—][¦Ù].™em !ğ
¡ack
.item) {

488 
¦Ù
 = -1;

490 ià(
¬—
 =ğ
CARRIED
) {

492 ià(
¦Ù
 =ğ-1 && 
max_quªt™y
 > 1) {

493 
i
 = 0;

494 
i
 < 
MAX_CARRIED
 &&

495 (
šv’tÜy
[
¬—
][
i
].
™em
 !ğ
¡ack
.item

496 || 
šv’tÜy
[
¬—
][
i
].
quªt™y
 >ğ
max_quªt™y
))

497 ++
i
;

498 ià(
i
 < 
MAX_CARRIED
)

499 
¦Ù
 = 
i
;

502 ià(
¦Ù
 == -1) {

503 
i
 = 0;

504 
šv’tÜy
[
¬—
][
i
].
™em
 !ğ0 && i < 
MAX_CARRIED
)

505 
i
++;

506 ià(
i
 < 
MAX_CARRIED
)

507 
¦Ù
 = 
i
;

510 ià(
¦Ù
 != -1) {

512 
quªt™y_added
 = 
	`mš
Ğ
¡ack
.
quªt™y
, 
max_quªt™y
 - 
šv’tÜy
[
¬—
][
¦Ù
].quantity);

513 
šv’tÜy
[
¬—
][
¦Ù
].
™em
 = 
¡ack
.item;

514 
šv’tÜy
[
¬—
][
¦Ù
].
quªt™y
 +ğ
quªt™y_added
;

515 
¡ack
.
quªt™y
 -ğ
quªt™y_added
;

517 ifĞ
¡ack
.
quªt™y
 > 0) {

518 ifĞ
d¿g_´ev_¤c
 > -1) {

519 
	`™emR‘uº
Ğ
¡ack
);

521 
	`add
Ğ
¡ack
);

529 
	}
}

534 
	gM’uInv’tÜy
::
	$»move
(
™em
) {

535 ifĞ!
šv’tÜy
[
CARRIED
].
	`»move
(
™em
)) {

536 
šv’tÜy
[
EQUIPMENT
].
	`»move
(
™em
);

537 
	`­¶yEqum’t
(
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

539 
	}
}

544 
	gM’uInv’tÜy
::
	$»moveEqu³d
(
™em
) {

545 
šv’tÜy
[
EQUIPMENT
].
	`»move
(
™em
);

546 
	`­¶yEqum’t
(
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

547 
	}
}

552 
	gM’uInv’tÜy
::
	$addCu¼’cy
(
couÁ
) {

553 
cu¼’cy
 +ğ
couÁ
;

554 
LoÙMªag”
::
	`g‘In¡ªû
()->
	`¶ayCu¼’cySound
();

555 
	}
}

561 
boŞ
 
	gM’uInv’tÜy
::
	$buy
(
I‹mSck
 
¡ack
, 
b
) {

562 
v®ue_—ch
;

563 ià(
b
 =ğ
VENDOR_BUY
è
v®ue_—ch
 = 
™ems
->™ems[
¡ack
.
™em
].
´iû
;

564 
v®ue_—ch
 = 
™ems
->™ems[
¡ack
.
™em
].
	`g‘S–lPriû
();

566 
couÁ
 = 
v®ue_—ch
 * 
¡ack
.
quªt™y
;

567 ifĞ
cu¼’cy
 >ğ
couÁ
) {

568 
cu¼’cy
 -ğ
couÁ
;

570 
LoÙMªag”
::
	`g‘In¡ªû
()->
	`¶ayCu¼’cySound
();

571  
Œue
;

574  
çl£
;

576 
	}
}

581 
boŞ
 
	gM’uInv’tÜy
::
	$¡ashAdd
(
I‹mSck
 
¡ack
) {

583 ià(
™ems
->™ems[
¡ack
.
™em
].
´iû
 =ğ0è 
çl£
;

585 
d¿g_´ev_¤c
 = -1;

586  
Œue
;

587 
	}
}

591 
boŞ
 
	gM’uInv’tÜy
::
	$£Î
(
I‹mSck
 
¡ack
) {

593 ià(
™ems
->™ems[
¡ack
.
™em
].
´iû
 =ğ0è 
çl£
;

595 
v®ue_—ch
 = 
™ems
->™ems[
¡ack
.
™em
].
	`g‘S–lPriû
();

596 
v®ue
 = 
v®ue_—ch
 * 
¡ack
.
quªt™y
;

597 
cu¼’cy
 +ğ
v®ue
;

598 
LoÙMªag”
::
	`g‘In¡ªû
()->
	`¶ayCu¼’cySound
();

599 
d¿g_´ev_¤c
 = -1;

600  
Œue
;

601 
	}
}

607 
boŞ
 
	gM’uInv’tÜy
::
	$fuÎ
(
™em
) {

608  
šv’tÜy
[
CARRIED
].
	`fuÎ
(
™em
);

609 
	}
}

614 
	gM’uInv’tÜy
::
	$g‘I‹mCouÁC¬r›d
(
™em
) {

615  
šv’tÜy
[
CARRIED
].
	`couÁ
(
™em
);

616 
	}
}

621 
boŞ
 
	gM’uInv’tÜy
::
	$isI‹mEqu³d
(
™em
) {

622  
šv’tÜy
[
EQUIPMENT
].
	`cÚš
(
™em
);

623 
	}
}

628 
boŞ
 
	gM’uInv’tÜy
::
	$»quœem’tsM‘
(
™em
) {

629 ià(
™ems
->™ems[
™em
].
»q_¡©
 =ğ
REQUIRES_PHYS
) {

630  (
¡©s
->
	`g‘_physiÿl
(è>ğ
™ems
->™ems[
™em
].
»q_v®
);

632 ià(
™ems
->™ems[
™em
].
»q_¡©
 =ğ
REQUIRES_MENT
) {

633  (
¡©s
->
	`g‘_m’l
(è>ğ
™ems
->™ems[
™em
].
»q_v®
);

635 ià(
™ems
->™ems[
™em
].
»q_¡©
 =ğ
REQUIRES_OFF
) {

636  (
¡©s
->
	`g‘_ofãn£
(è>ğ
™ems
->™ems[
™em
].
»q_v®
);

638 ià(
™ems
->™ems[
™em
].
»q_¡©
 =ğ
REQUIRES_DEF
) {

639  (
¡©s
->
	`g‘_deãn£
(è>ğ
™ems
->™ems[
™em
].
»q_v®
);

642  
Œue
;

643 
	}
}

645 
	gM’uInv’tÜy
::
	$upd©eEqum’t
(
¦Ù
) {

647 ià(
¦Ù
 == -1) {

650 
chªged_equm’t
 = 
Œue
;

652 ià(
¦Ù_ty³
[
¦Ù
] != "artifact") {

653 
chªged_equm’t
 = 
Œue
;

656 
chªged_¬tiçù
 = 
Œue
;

658 
	}
}

663 
	gM’uInv’tÜy
::
	$­¶yEqum’t
(
I‹mSck
 *
equ³d
) {

665 
bÚus_couÁ”
;

667 cÚ¡ 
veùÜ
<
I‹m
> &
pc_™ems
 = 
™ems
->items;

668 
™em_id
;

671 
boŞ
 
checkRequœed
 = 
Œue
;

672 
checkRequœed
)

674 
checkRequœed
 = 
çl£
;

675 
¡©s
->
ofãn£_add™iÚ®
 = sts->
deãn£_add™iÚ®
 = sts->
physiÿl_add™iÚ®
 = sts->
m’l_add™iÚ®
 = 0;

676 
i
 = 0; i < 
MAX_EQUIPPED
; i++) {

677 
™em_id
 = 
equ³d
[
i
].
™em
;

678 cÚ¡ 
I‹m
 &
™em
 = 
pc_™ems
[
™em_id
];

679 
bÚus_couÁ”
 = 0;

680 
bÚus_couÁ”
 < 
™em
.
bÚus_¡©
.
	`size
() && item.bonus_stat[bonus_counter] != "") {

681 ià(
™em
.
bÚus_¡©
[
bÚus_couÁ”
] == "offense")

682 
¡©s
->
ofãn£_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

683 ià(
™em
.
bÚus_¡©
[
bÚus_couÁ”
] == "defense")

684 
¡©s
->
deãn£_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

685 ià(
™em
.
bÚus_¡©
[
bÚus_couÁ”
] == "physical")

686 
¡©s
->
physiÿl_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

687 ià(
™em
.
bÚus_¡©
[
bÚus_couÁ”
] == "mental")

688 
¡©s
->
m’l_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

689 ià(
™em
.
bÚus_¡©
[
bÚus_couÁ”
] == "all basic stats") {

690 
¡©s
->
ofãn£_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

691 
¡©s
->
deãn£_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

692 
¡©s
->
physiÿl_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

693 
¡©s
->
m’l_add™iÚ®
 +ğ
™em
.
bÚus_v®
[
bÚus_couÁ”
];

695 
bÚus_couÁ”
++;

700 
veùÜ
<> 
£t
;

701 
veùÜ
<> 
quªt™y
;

702 
veùÜ
<>::
™”©Ü
 
™
;

703 
bÚus_couÁ”
 = 0;

705 
i
=0; i<
MAX_EQUIPPED
; i++) {

706 
™em_id
 = 
equ³d
[
i
].
™em
;

707 
™
 = 
	`fšd
(
£t
.
	`begš
(), s‘.
	`’d
(), 
™ems
->™ems[
™em_id
].set);

708 ià(
™ems
->™ems[
™em_id
].
£t
 > 0 && 
™
 !ğ£t.
	`’d
()) {

709 
quªt™y
[
	`di¡ªû
(
£t
.
	`begš
(), 
™
)] += 1;

711 ià(
™ems
->™ems[
™em_id
].
£t
 > 0) {

712 
£t
.
	`push_back
(
™ems
->™ems[
™em_id
].set);

713 
quªt™y
.
	`push_back
(1);

717 
I‹mS‘
 
‹mp_£t
;

718 
k
=0; k<
£t
.
	`size
(); k++) {

719 
‹mp_£t
 = 
™ems
->
™em_£ts
[
£t
[
k
]];

720 
bÚus_couÁ”
=0; bÚus_couÁ”<
‹mp_£t
.
bÚus
.
	`size
(); bonus_counter++) {

721 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
»quœem’t
 !ğ
quªt™y
[
k
]) ;

723 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
 == "offense")

724 
¡©s
->
ofãn£_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

725 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
 == "defense")

726 
¡©s
->
deãn£_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

727 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
 == "physical")

728 
¡©s
->
physiÿl_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

729 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
 == "mental")

730 
¡©s
->
m’l_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

731 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
 == "all basic stats") {

732 
¡©s
->
ofãn£_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

733 
¡©s
->
deãn£_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

734 
¡©s
->
physiÿl_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

735 
¡©s
->
m’l_add™iÚ®
 +ğ
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
;

740 
i
 = 0; i < 
MAX_EQUIPPED
; i++) {

741 ià(!
	`»quœem’tsM‘
(
equ³d
[
i
].
™em
)) {

742 
	`add
(
equ³d
[
i
]);

743 
equ³d
[
i
].
™em
 = 0;

744 
equ³d
[
i
].
quªt™y
 = 0;

745 
checkRequœed
 = 
Œue
;

751 
i
=0; i<
¡©s
->
pow”s_li¡_™ems
.
	`size
(); ++i) {

752 
id
 = 
¡©s
->
pow”s_li¡_™ems
[
i
];

754 ià(
pow”s
->pow”s[
id
].
·ssive
 && 
¡©s
->
hp
 > 0)

755 
¡©s
->
efãùs
.
	`»moveEfãùPassive
(
id
);

757 
¡©s
->
pow”s_li¡_™ems
.
	`ş—r
();

761 
¡©s
->
	`ÿlcBa£DmgAndAbs
();

764 
¡©s
->
w›ldšg_physiÿl
 = 
çl£
;

765 
¡©s
->
w›ldšg_m’l
 = 
çl£
;

766 
¡©s
->
w›ldšg_ofãn£
 = 
çl£
;

769 
¡©s
->
efãùs
.
	`ş—rI‹mEfãùs
();

771 
	`­¶yI‹mSts
(
equ³d
);

772 
	`­¶yI‹mS‘BÚu£s
(
equ³d
);

775 ià(
¡©s
->
dmg_m–“_mš
 < sts->
dmg_m–“_mš_deçuÉ
)

776 
¡©s
->
dmg_m–“_mš
 = sts->
dmg_m–“_mš_deçuÉ
;

777 ià(
¡©s
->
dmg_m–“_max
 < sts->
dmg_m–“_max_deçuÉ
)

778 
¡©s
->
dmg_m–“_max
 = sts->
dmg_m–“_max_deçuÉ
;

779 ià(
¡©s
->
dmg_¿nged_mš
 < sts->
dmg_¿nged_mš_deçuÉ
)

780 
¡©s
->
dmg_¿nged_mš
 = sts->
dmg_¿nged_mš_deçuÉ
;

781 ià(
¡©s
->
dmg_¿nged_max
 < sts->
dmg_¿nged_max_deçuÉ
)

782 
¡©s
->
dmg_¿nged_max
 = sts->
dmg_¿nged_max_deçuÉ
;

783 ià(
¡©s
->
dmg_m’t_mš
 < sts->
dmg_m’t_mš_deçuÉ
)

784 
¡©s
->
dmg_m’t_mš
 = sts->
dmg_m’t_mš_deçuÉ
;

785 ià(
¡©s
->
dmg_m’t_max
 < sts->
dmg_m’t_max_deçuÉ
)

786 
¡©s
->
dmg_m’t_max
 = sts->
dmg_m’t_max_deçuÉ
;

787 ià(
¡©s
->
absÜb_mš
 < sts->
absÜb_mš_deçuÉ
)

788 
¡©s
->
absÜb_mš
 = sts->
absÜb_mš_deçuÉ
;

789 ià(
¡©s
->
absÜb_max
 < sts->
absÜb_max_deçuÉ
)

790 
¡©s
->
absÜb_max
 = sts->
absÜb_max_deçuÉ
;

793 
¡©s
->
»äesh_¡©s
 = 
Œue
;

794 
	}
}

796 
	gM’uInv’tÜy
::
	$­¶yI‹mSts
(
I‹mSck
 *
equ³d
) {

797 
bÚus_couÁ”
;

798 cÚ¡ 
veùÜ
<
I‹m
> &
pc_™ems
 = 
™ems
->items;

799 
™em_id
;

802 
i
=0; i<
MAX_EQUIPPED
; i++) {

803 
™em_id
 = 
equ³d
[
i
].
™em
;

804 cÚ¡ 
I‹m
 &
™em
 = 
pc_™ems
[
™em_id
];

807 
¡©s
->
dmg_m–“_mš
 +ğ
™em
.dmg_melee_min;

808 
¡©s
->
dmg_m–“_max
 +ğ
™em
.dmg_melee_max;

809 
¡©s
->
dmg_¿nged_mš
 +ğ
™em
.dmg_ranged_min;

810 
¡©s
->
dmg_¿nged_max
 +ğ
™em
.dmg_ranged_max;

811 
¡©s
->
dmg_m’t_mš
 +ğ
™em
.dmg_ment_min;

812 
¡©s
->
dmg_m’t_max
 +ğ
™em
.dmg_ment_max;

817 ià(
™em
.
dmg_m–“_max
 > 0) {

818 
¡©s
->
w›ldšg_physiÿl
 = 
Œue
;

819 ià(
™em
.
pow”_mod
 != 0) {

820 
¡©s
->
m–“_w—pÚ_pow”
 = 
™em
.
pow”_mod
;

823 ià(
™em
.
dmg_¿nged_max
 > 0) {

824 
¡©s
->
w›ldšg_ofãn£
 = 
Œue
;

825 ià(
™em
.
pow”_mod
 != 0) {

826 
¡©s
->
¿nged_w—pÚ_pow”
 = 
™em
.
pow”_mod
;

829 ià(
™em
.
dmg_m’t_max
 > 0) {

830 
¡©s
->
w›ldšg_m’l
 = 
Œue
;

831 ià(
™em
.
pow”_mod
 != 0) {

832 
¡©s
->
m’l_w—pÚ_pow”
 = 
™em
.
pow”_mod
;

837 
¡©s
->
absÜb_mš
 +ğ
™em
.
abs_mš
;

838 
¡©s
->
absÜb_max
 +ğ
™em
.
abs_max
;

841 
bÚus_couÁ”
 = 0;

842 
bÚus_couÁ”
 < 
™em
.
bÚus_¡©
.
	`size
() && item.bonus_stat[bonus_counter] != "") {

843 
id
 = 
pow”s
->
	`g‘IdFromTag
(
™em
.
bÚus_¡©
[
bÚus_couÁ”
]);

845 ià(
id
 > 0)

846 
¡©s
->
efãùs
.
	`addEfãù
(
id
, 
pow”s
->pow”s[id].
icÚ
, 0, 
™em
.
bÚus_v®
[
bÚus_couÁ”
],…ow”s->pow”s[id].
efãù_ty³
,…ow”s->pow”s[id].
ªim©iÚ_Çme
,…ow”s->pow”s[id].
efãù_add™ive
, 
Œue
, -1,…ow”s->pow”s[id].
efãù_»nd”_above
, 0);

848 
bÚus_couÁ”
++;

852 ià(
™em
.
pow”
 > 0) {

853 
¡©s
->
pow”s_li¡_™ems
.
	`push_back
(
™em
.
pow”
);

854 ià(
¡©s
->
efãùs
.
Œigg”ed_Ùh”s
)

855 
pow”s
->
	`aùiv©eSšgËPassive
(
¡©s
,
™em
.
pow”
);

859 
	}
}

861 
	gM’uInv’tÜy
::
	$­¶yI‹mS‘BÚu£s
(
I‹mSck
 *
equ³d
) {

863 
veùÜ
<> 
£t
;

864 
veùÜ
<> 
quªt™y
;

865 
veùÜ
<>::
™”©Ü
 
™
;

866 
bÚus_couÁ”
 = 0;

867 
™em_id
;

869 
i
=0; i<
MAX_EQUIPPED
; i++) {

870 
™em_id
 = 
equ³d
[
i
].
™em
;

871 
™
 = 
	`fšd
(
£t
.
	`begš
(), s‘.
	`’d
(), 
™ems
->™ems[
™em_id
].set);

872 ià(
™ems
->™ems[
™em_id
].
£t
 > 0 && 
™
 !ğ£t.
	`’d
()) {

873 
quªt™y
[
	`di¡ªû
(
£t
.
	`begš
(), 
™
)] += 1;

875 ià(
™ems
->™ems[
™em_id
].
£t
 > 0) {

876 
£t
.
	`push_back
(
™ems
->™ems[
™em_id
].set);

877 
quªt™y
.
	`push_back
(1);

881 
I‹mS‘
 
‹mp_£t
;

882 
k
=0; k<
£t
.
	`size
(); k++) {

883 
‹mp_£t
 = 
™ems
->
™em_£ts
[
£t
[
k
]];

884 
bÚus_couÁ”
=0; bÚus_couÁ”<
‹mp_£t
.
bÚus
.
	`size
(); bonus_counter++) {

885 ià(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
»quœem’t
 !ğ
quªt™y
[
k
]) ;

887 
id
 = 
pow”s
->
	`g‘IdFromTag
(
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_¡©
);

889 ià(
id
 > 0)

890 
¡©s
->
efãùs
.
	`addEfãù
(
id
, 
pow”s
->pow”s[id].
icÚ
, 0, 
‹mp_£t
.
bÚus
[
bÚus_couÁ”
].
bÚus_v®
,…ow”s->pow”s[id].
efãù_ty³
,…ow”s->pow”s[id].
ªim©iÚ_Çme
,…ow”s->pow”s[id].
efãù_add™ive
, 
Œue
, -1,…ow”s->pow”s[id].
efãù_»nd”_above
, 0);

893 
	}
}

895 
	gM’uInv’tÜy
::
	$ş—rHighlight
() {

896 
šv’tÜy
[
EQUIPMENT
].
	`highlightCË¬
();

897 
šv’tÜy
[
CARRIED
].
	`highlightCË¬
();

898 
	}
}

900 
	gM’uInv’tÜy
::~
	$M’uInv’tÜy
() {

901 
	`SDL_F»eSurçû
(
background
);

902 
d–‘e
 
şo£Bu‰Ú
;

903 
	}
}

	@MenuInventory.h

24 #´agm¨
Úû


25 #iâdeà
MENU_INVENTORY_H


26 
	#MENU_INVENTORY_H


	)

28 
	~"M’uI‹mStÜage.h
"

29 
	~"Widg‘Lab–.h
"

31 
	~<SDL.h
>

32 
	~<SDL_image.h
>

34 
	~<¡ršg
>

36 
şass
 
	gIÅutS‹
;

37 
şass
 
	gI‹mMªag”
;

38 
şass
 
	gPow”Mªag”
;

39 
şass
 
	gStBlock
;

40 
şass
 
	gWidg‘Bu‰Ú
;

42 cÚ¡ 
	gEQUIPMENT
 = 0;

43 cÚ¡ 
	gCARRIED
 = 1;

45 şas 
	cM’uInv’tÜy
 : 
public
 
M’u
 {

46 
´iv©e
:

47 
I‹mMªag”
 *
™ems
;

48 
StBlock
 *
	m¡©s
;

49 
Pow”Mªag”
 *
	mpow”s
;

51 
lßdG¿phics
();

52 
¬—Ov”
(
Pošt
 
mou£
);

53 
upd©eEqum’t
(
¦Ù
);

55 
SDL_Surçû
 *
	mbackground
;

56 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

58 
	mMAX_EQUIPPED
;

59 
	mMAX_CARRIED
;

62 
Pošt
 
	mşo£_pos
;

63 
Lab–Info
 
	mt™Ë
;

64 
Lab–Info
 
	mcu¼’cy_lbl
;

65 
SDL_Reù
 
	mh–p_pos
;

66 
	mÿ¼›d_cŞs
;

67 
	mÿ¼›d_rows
;

68 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

69 
SDL_CŞÜ
 
	mcŞÜ_high
;

71 
	mpublic
:

72 
M’uInv’tÜy
(
I‹mMªag”
 *
™ems
, 
StBlock
 *
¡©s
, 
Pow”Mªag”
 *
pow”s
);

73 ~
M’uInv’tÜy
();

74 
upd©e
();

75 
logic
();

76 
»nd”
();

77 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

79 
I‹mSck
 
şick
(
IÅutS‹
 * 
šput
);

80 
™emR‘uº
(
I‹mSck
 
¡ack
);

81 
drİ
(
Pošt
 
mou£
, 
I‹mSck
 
¡ack
);

82 
aùiv©e
(
IÅutS‹
 * 
šput
);

84 
add
Ğ
I‹mSck
 
¡ack
, 
¬—
 = 
CARRIED
, 
¦Ù
 = -1);

85 
»move
(
™em
);

86 
»moveEqu³d
(
™em
);

87 
addCu¼’cy
(
couÁ
);

88 
boŞ
 
buy
(
I‹mSck
 
¡ack
, 
b
);

89 
boŞ
 
£Î
(
I‹mSck
 
¡ack
);

90 
boŞ
 
¡ashAdd
(
I‹mSck
 
¡ack
);

92 
boŞ
 
fuÎ
(
™em
);

93 
g‘I‹mCouÁC¬r›d
(
™em
);

94 
boŞ
 
isI‹mEqu³d
(
™em
);

95 
boŞ
 
»quœem’tsM‘
(
™em
);

97 
­¶yEqum’t
(
I‹mSck
 *
equ³d
);

98 
­¶yI‹mSts
(
I‹mSck
 *
equ³d
);

99 
­¶yI‹mS‘BÚu£s
(
I‹mSck
 *
equ³d
);

101 
ş—rHighlight
();

103 
SDL_Reù
 
	mÿ¼›d_¬—
;

104 
	m¡d
::
veùÜ
<
SDL_Reù
> 
equ³d_¬—
;

105 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¦Ù_ty³
;

106 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¦Ù_desc
;

108 
M’uI‹mStÜage
 
	mšv’tÜy
[2];

109 
	mcu¼’cy
;

110 
	md¿g_´ev_¤c
;

114 
boŞ
 
	mchªged_equm’t
;

115 
boŞ
 
	mchªged_¬tiçù
;

117 
	m¡d
::
¡ršg
 
log_msg
;

	@MenuItemStorage.cpp

23 
	~"IÅutS‹.h
"

24 
	~"M’uI‹mStÜage.h
"

25 
	~"S‘tšgs.h
"

27 
usšg
 
Çme¥aû
 
	g¡d
;

29 
	gM’uI‹mStÜage
::
	$M’uI‹mStÜage
()

30 : 
	`¬—
()

31 , 
	`icÚ_size
(
NULL
)

32 , 
	`nb_cŞs
(0)

33 , 
	`¦Ù_ty³
()

34 , 
	`d¿g_´ev_¦Ù
(0)

35 , 
	`highlight
(
NULL
)

36 , 
	$highlight_image
(
NULL
)

37 {
	}
}

39 
	gM’uI‹mStÜage
::
	$š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
, 
SDL_Reù
 
_¬—
, 
_icÚ_size
, 
_nb_cŞs
) {

40 
I‹mStÜage
::
	`š™
Ğ
_¦Ù_numb”
, 
_™ems
);

41 
¬—
.
	`push_back
(
_¬—
);

42 
nb_cŞs
 = 
_nb_cŞs
;

43 
d¿g_´ev_¦Ù
 = -1;

44 
highlight
 = 
Ãw
 
boŞ
[
_¦Ù_numb”
];

45 
icÚ_size
 = 
Ãw
 [
_¦Ù_numb”
];

46 
i
=0; i<
_¦Ù_numb”
; i++) {

47 
highlight
[
i
] = 
çl£
;

48 
icÚ_size
[
i
] = 
_icÚ_size
;

50 
	`lßdG¿phics
();

51 
	}
}

56 
	gM’uI‹mStÜage
::
š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
, 
veùÜ
<
SDL_Reù
> 
_¬—
, veùÜ<
¡ršg
> 
_¦Ù_ty³
) {

57 
	gI‹mStÜage
::
š™
Ğ
_¦Ù_numb”
, 
_™ems
);

58 
	g¬—
 = 
_¬—
;

59 
	gnb_cŞs
 = 0;

60 
	g¦Ù_ty³
 = 
_¦Ù_ty³
;

61 
	gd¿g_´ev_¦Ù
 = -1;

62 
	ghighlight
 = 
Ãw
 
boŞ
[
_¦Ù_numb”
];

63 
	gicÚ_size
 = 
Ãw
 [
_¦Ù_numb”
];

64 
	gi
=0; i<
	g_¦Ù_numb”
; i++) {

65 
	ghighlight
[
i
] = 
çl£
;

66 
	gicÚ_size
[
i
] = 
¬—
[i].
w
;

68 
lßdG¿phics
();

71 
	gM’uI‹mStÜage
::
	$lßdG¿phics
() {

73 
highlight_image
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/©‹ÁiÚ_glow.²g").
	`c_¡r
());

75 ià(!
highlight_image
) {

76 
	`årštf
(
¡d”r
, "Couldn'ˆlßd icÚ highlighˆimage: %s\n", 
	`IMG_G‘E¼Ü
());

79 
SDL_Surçû
 *
ş—nup
 = 
highlight_image
;

80 
highlight_image
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(highlight_image);

81 
	`SDL_F»eSurçû
(
ş—nup
);

83 
	}
}

85 
	gM’uI‹mStÜage
::
	$»nd”
() {

86 
i
=0; i<
¦Ù_numb”
; i++) {

87 ià(
nb_cŞs
 > 0) {

88 ià(
¡Üage
[
i
].
™em
 > 0è
™ems
->
	`»nd”IcÚ
(¡Üage[i], 
¬—
[0].
x
 + (˜% 
nb_cŞs
 * 
icÚ_size
[i]),‡»a[0].
y
 + (i /‚b_cols * icon_size[i]), icon_size[i]);

89 ià(
highlight
[
i
]è
	`»nd”Highlight
(
¬—
[0].
x
 + (˜% 
nb_cŞs
 * 
icÚ_size
[i]),‡»a[0].
y
 + (i /‚b_cols * icon_size[i]), icon_size[i]);

90 } ià(
nb_cŞs
 == 0) {

91 ià(
¡Üage
[
i
].
™em
 > 0è
™ems
->
	`»nd”IcÚ
(¡Üage[i], 
¬—
[i].
x
,‡»a[i].
y
,‡»a[i].
w
);

92 ià(
highlight
[
i
]è
	`»nd”Highlight
(
¬—
[i].
x
,‡»a[i].
y
, 
icÚ_size
[i]);

95 
	}
}

97 
	gM’uI‹mStÜage
::
	$»nd”Highlight
(
x
, 
y
, 
_icÚ_size
) {

98 ià(
_icÚ_size
 =ğ
ICON_SIZE
) {

99 
SDL_Reù
 
de¡
;

100 
de¡
.
x
 = x;

101 
de¡
.
y
 = y;

102 
	`SDL_Bl™Surçû
(
highlight_image
,
NULL
,
sü“n
,&
de¡
);

104 
	}
}

106 
	gM’uI‹mStÜage
::
	$¦ÙOv”
(
Pošt
 
mou£
) {

107 ià(
	`isW™hš
(
¬—
[0], 
mou£
è&& 
nb_cŞs
 > 0) {

108  (
mou£
.
x
 - 
¬—
[0].xè/ 
icÚ_size
[0] + (mou£.
y
 -‡»a[0].yè/ icÚ_size[0] * 
nb_cŞs
;

110 ià(
nb_cŞs
 == 0) {

111 
i
=0; i<
¬—
.
	`size
(); i++) {

112 ià(
	`isW™hš
(
¬—
[
i
], 
mou£
))  i;

116 
	}
}

118 
ToŞtD©a
 
	gM’uI‹mStÜage
::
	$checkToŞt
(
Pošt
 
mou£
, 
StBlock
 *
¡©s
, 
cÚ‹xt
) {

119 
ToŞtD©a
 
t
;

120 
¦Ù
 = 
	`¦ÙOv”
Ğ
mou£
);

122 ià(
¦Ù
 > -1 && 
¡Üage
[¦Ù].
™em
 > 0) {

123  
™ems
->
	`g‘ToŞt
Ğ
¡Üage
[
¦Ù
].
™em
, 
¡©s
, 
cÚ‹xt
);

125  
t
;

126 
	}
}

128 
I‹mSck
 
	gM’uI‹mStÜage
::
	$şick
(
IÅutS‹
 * 
šput
) {

129 
I‹mSck
 
™em
;

130 
d¿g_´ev_¦Ù
 = 
	`¦ÙOv”
(
šput
->
mou£
);

131 ià(
d¿g_´ev_¦Ù
 > -1) {

132 
™em
 = 
¡Üage
[
d¿g_´ev_¦Ù
];

133 ià(
šput
->
´essšg
[
SHIFT
]) {

134 
™em
.
quªt™y
 = 1;

136 
	`sub¡¿ù
Ğ
d¿g_´ev_¦Ù
, 
™em
.
quªt™y
);

137  
™em
;

140 
™em
.item = 0;

141 
™em
.
quªt™y
 = 0;

142  
™em
;

144 
	}
}

146 
	gM’uI‹mStÜage
::
	$™emR‘uº
(
I‹mSck
 
¡ack
) {

147 
	`add
Ğ
¡ack
, 
d¿g_´ev_¦Ù
);

148 
d¿g_´ev_¦Ù
 = -1;

149 
	}
}

154 
	gM’uI‹mStÜage
::
	$flEqum’tSlÙs
() {

156 *
equ_™em
 = 
Ãw
 [
¦Ù_numb”
];

157 *
equ_quªt™y
 = 
Ãw
 [
¦Ù_numb”
];;

160 
i
=0; i<
¦Ù_numb”
; i++) {

161 
equ_™em
[
i
] = 
¡Üage
[i].
™em
;

162 
equ_quªt™y
[
i
] = 
¡Üage
[i].
quªt™y
;

165 
i
=0; i<
¦Ù_numb”
; i++) {

166 
¡Üage
[
i
].
™em
 = 0;

167 
¡Üage
[
i
].
quªt™y
 = 0;

171 
i
=0; i<
¦Ù_numb”
; i++) {

172 
j
=0; j<
¦Ù_numb”
; j++) {

174 ià(
™ems
->™ems[
equ_™em
[
i
]].
ty³
 =ğ
¦Ù_ty³
[
j
] &&ƒqu_™em[i] > 0 && 
¡Üage
[j].
™em
 == 0) {

175 
¡Üage
[
j
].
™em
 = 
equ_™em
[
i
];

176 
¡Üage
[
j
].
quªt™y
 = (
equ_quªt™y
[
i
] > 0) ?ƒquip_quantity[i] : 1;

181 
d–‘e
 [] 
equ_™em
;

182 
d–‘e
 [] 
equ_quªt™y
;

183 
	}
}

185 
	gM’uI‹mStÜage
::
	$highlightM©chšg
(
¡ršg
 
ty³
) {

186 
i
=0; i<
¦Ù_numb”
; i++) {

187 ià(
¦Ù_ty³
[
i
] =ğ
ty³
è
highlight
[i] = 
Œue
;

189 
	}
}

191 
	gM’uI‹mStÜage
::
	$highlightCË¬
() {

192 
i
=0; i<
¦Ù_numb”
; i++) {

193 
highlight
[
i
] = 
çl£
;

195 
	}
}

197 
	gM’uI‹mStÜage
::~
	$M’uI‹mStÜage
() {

198 
d–‘e
[] 
highlight
;

199 
d–‘e
[] 
icÚ_size
;

200 
	`SDL_F»eSurçû
(
highlight_image
);

201 
	}
}

	@MenuItemStorage.h

24 #´agm¨
Úû


25 #iâdeà
MENU_ITEM_STORAGE_H


26 
	#MENU_ITEM_STORAGE_H


	)

28 
	~"I‹mMªag”.h
"

29 
	~"I‹mStÜage.h
"

30 
	~<SDL.h
>

32 
şass
 
	gIÅutS‹
;

33 
şass
 
	gToŞtD©a
;

35 şas 
	cM’uI‹mStÜage
 : 
public
 
I‹mStÜage
 {

36 
´Ùeùed
:

37 
lßdG¿phics
();

38 
»nd”Highlight
(
x
, 
y
, 
_icÚ_size
);

39 
	m¡d
::
veùÜ
<
SDL_Reù
> 
¬—
;

40 * 
	micÚ_size
;

41 
	mnb_cŞs
;

43 
	mpublic
:

44 
M’uI‹mStÜage
();

45 
š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
, 
SDL_Reù
 
_¬—
, 
icÚ_size
, 
nb_cŞs
);

46 
š™
(
_¦Ù_numb”
, 
I‹mMªag”
 *
_™ems
, 
¡d
::
veùÜ
<
SDL_Reù
> 
_¬—
, std::veùÜ<¡d::
¡ršg
> 
_¦Ù_ty³
);

47 ~
M’uI‹mStÜage
();

50 
»nd”
();

51 
¦ÙOv”
(
Pošt
 
mou£
);

52 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
, 
StBlock
 *
¡©s
, 
cÚ‹xt
);

53 
I‹mSck
 
şick
(
IÅutS‹
 * 
šput
);

54 
™emR‘uº
(
I‹mSck
 
¡ack
);

55 
flEqum’tSlÙs
();

56 
highlightM©chšg
(
¡d
::
¡ršg
 
ty³
);

57 
highlightCË¬
();

58 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¦Ù_ty³
;

60 
	md¿g_´ev_¦Ù
;

62 
boŞ
 * 
	mhighlight
;

63 
SDL_Surçû
 * 
	mhighlight_image
;

	@MenuLog.cpp

23 
	~"FeP¬£r.h
"

24 
	~"M’u.h
"

25 
	~"M’uLog.h
"

26 
	~"ModMªag”.h
"

27 
	~"S‘tšgs.h
"

28 
	~"UtsP¬sšg.h
"

29 
	~"Widg‘Bu‰Ú.h
"

30 
	~"Widg‘SüŞlBox.h
"

31 
	~"Widg‘TabCÚŒŞ.h
"

33 
usšg
 
Çme¥aû
 
	g¡d
;

36 
	gM’uLog
::
	$M’uLog
() {

38 
visibË
 = 
çl£
;

39 
b_cÚ‹Á_šd’t
 = 4;

42 
FeP¬£r
 
šfe
;

43 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/log.txt"))) {

44 
šfe
.
	`Ãxt
()) {

45 
šfe
.
v®
 = infile.val + ',';

47 if(
šfe
.
key
 == "caption") {

48 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

49 } if(
šfe
.
key
 == "close") {

50 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

51 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

52 } if(
šfe
.
key
 == "tab_area") {

53 
b_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

54 
b_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

55 
b_¬—
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

56 
b_¬—
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

57 } if(
šfe
.
key
 == "tab_bg_color") {

58 
b_bg
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

59 
b_bg
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

60 
b_bg
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

63 
šfe
.
	`şo£
();

64 } 
	`årštf
(
¡d”r
, "Unableo open menus/log.txt!\n");

67 
i
=0; i<
LOG_TYPE_COUNT
; i++) {

68 
log_couÁ
[
i
] = 0;

69 
msg_bufãr
[
i
] = 
Ãw
 
	`Widg‘SüŞlBox
(
b_¬—
.
w
,b_¬—.
h
);

70 
msg_bufãr
[
i
]->
bg
.
r
 = 
b_bg
.r;

71 
msg_bufãr
[
i
]->
bg
.
g
 = 
b_bg
.g;

72 
msg_bufãr
[
i
]->
bg
.
b
 = 
b_bg
.b;

76 
bCÚŒŞ
 = 
Ãw
 
	`Widg‘TabCÚŒŞ
(
LOG_TYPE_COUNT
);

79 
bCÚŒŞ
->
	`£tTabT™Ë
(
LOG_TYPE_MESSAGES
, 
msg
->
	`g‘
("Notes"));

80 
bCÚŒŞ
->
	`£tTabT™Ë
(
LOG_TYPE_QUESTS
, 
msg
->
	`g‘
("Quests"));

82 
fÚt
->
	`£tFÚt
("font_regular");

83 
·¿g¿ph_¥acšg
 = 
fÚt
->
	`g‘LšeHeight
()/2;

85 
	`lßdG¿phics
();

87 
şo£Bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

89 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

90 
	}
}

92 
	gM’uLog
::
	$lßdG¿phics
() {

94 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/log.²g").
	`c_¡r
());

96 if(!
background
) {

97 
	`årštf
(
¡d”r
, "Could‚Ù†ßd image: %s\n", 
	`IMG_G‘E¼Ü
());

100 
SDL_Surçû
 *
ş—nup
 = 
background
;

101 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

102 
	`SDL_F»eSurçû
(
ş—nup
);

105 
	}
}

107 
	gM’uLog
::
	$upd©e
() {

108 
bCÚŒŞ
->
	`£tMašA»a
(
wšdow_¬—
.
x
 + 
b_¬—
.x, wšdow_¬—.
y
 +ab_¬—.y,ab_¬—.
w
,ab_¬—.
h
);

109 
bCÚŒŞ
->
	`upd©eH—d”
();

110 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x + 
şo£_pos
.x;

111 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y + 
şo£_pos
.y;

113 
i
=0; i<
LOG_TYPE_COUNT
; i++) {

114 
msg_bufãr
[
i
]->
pos
.
x
 = 
wšdow_¬—
.x+
b_¬—
.x;

115 
msg_bufãr
[
i
]->
pos
.
y
 = 
wšdow_¬—
.y+
b_¬—
.y+
bCÚŒŞ
->
	`g‘TabHeight
();

117 
	}
}

122 
	gM’uLog
::
	$logic
() {

123 if(!
visibË
) ;

125 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

126 
visibË
 = 
çl£
;

127 
¢d
->
	`¶ay
(
sfx_şo£
);

130 
bCÚŒŞ
->
	`logic
();

131 
aùive_log
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

132 
msg_bufãr
[
aùive_log
]->
	`logic
();

133 
	}
}

138 
	gM’uLog
::
	$»nd”
() {

140 ià(!
visibË
) ;

142 
SDL_Reù
 
¤c
,
de¡
;

145 
de¡
 = 
wšdow_¬—
;

146 
¤c
.
x
 = 0;

147 
¤c
.
y
 = 0;

148 
¤c
.
w
 = 
wšdow_¬—
.w;

149 
¤c
.
h
 = 
wšdow_¬—
.h;

150 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
wšdow_¬—
);

153 
şo£Bu‰Ú
->
	`»nd”
();

156 ià(!
t™Ë
.
hidd’
) {

157 
Widg‘Lab–
 
Ïb–
;

158 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("Log"), 
cŞÜ_nÜm®
,™Ë.
fÚt_¡yË
);

159 
Ïb–
.
	`»nd”
();

163 
bCÚŒŞ
->
	`»nd”
();

167 
tÙ®_size
 = 
b_cÚ‹Á_šd’t
;

168 
aùive_log
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

170 ià(
msg_bufãr
[
aùive_log
]->
upd©e
) {

171 
msg_bufãr
[
aùive_log
]->
	`»äesh
();

172 
fÚt
->
	`£tFÚt
("font_regular");

173 
i
 = 
log_msg
[
aùive_log
].
	`size
(); i > 0; i--) {

174 
widthLim™
 = 
bCÚŒŞ
->
	`g‘CÚ‹ÁA»a
().
w
;

175 
Pošt
 
size
 = 
fÚt
->
	`ÿlc_size
(
log_msg
[
aùive_log
][
i
-1], 
widthLim™
);

176 
fÚt
->
	`»nd”Shadowed
(
log_msg
[
aùive_log
][
i
-1], 
b_cÚ‹Á_šd’t
, 
tÙ®_size
, 
JUSTIFY_LEFT
, 
msg_bufãr
[aùive_log]->
cÚ‹Ás
, 
widthLim™
, 
cŞÜ_nÜm®
);

177 
tÙ®_size
+=
size
.
y
+
·¿g¿ph_¥acšg
;

180 
msg_bufãr
[
aùive_log
]->
upd©e
 = 
çl£
;

182 
msg_bufãr
[
aùive_log
]->
	`»nd”
();

183 
	}
}

185 
	gM’uLog
::
	$»äesh
(
log_ty³
) {

186 
y
 = 
b_cÚ‹Á_šd’t
;

188 
fÚt
->
	`£tFÚt
("font_regular");

189 
i
=0; i<
log_msg
[
log_ty³
].
	`size
(); i++) {

190 
widthLim™
 = 
bCÚŒŞ
->
	`g‘CÚ‹ÁA»a
().
w
;

191 
Pošt
 
size
 = 
fÚt
->
	`ÿlc_size
(
log_msg
[
log_ty³
][
i
], 
widthLim™
);

192 
y
+=
size
.y+
·¿g¿ph_¥acšg
;

194 
y
+=
b_cÚ‹Á_šd’t
;

196 
msg_bufãr
[
log_ty³
]->
	`»size
(
y
);

197 
	}
}

202 
	gM’uLog
::
	$add
(cÚ¡ 
¡ršg
& 
s
, 
log_ty³
) {

204 
log_msg
[
log_ty³
].
	`size
(è>ğ
MAX_LOG_MESSAGES
) {

205 
log_msg
[
log_ty³
].
	`”a£
Öog_msg[log_ty³].
	`begš
());

209 
log_msg
[
log_ty³
].
	`push_back
(
s
);

210 
msg_bufãr
[
log_ty³
]->
upd©e
 = 
Œue
;

211 
	`»äesh
(
log_ty³
);

213 
log_couÁ
[
log_ty³
]++;

214 
	}
}

219 
	gM’uLog
::
	$»move
(
msg_šdex
, 
log_ty³
) {

221 
log_msg
[
log_ty³
][
msg_šdex
].
	`”a£
();

222 
msg_bufãr
[
log_ty³
]->
upd©e
 = 
Œue
;

223 
	`»äesh
(
log_ty³
);

225 
log_couÁ
[
log_ty³
]--;

226 
	}
}

228 
	gM’uLog
::
	$ş—r
(
log_ty³
) {

229 
log_couÁ
[
log_ty³
] = 0;

230 
log_msg
[
log_ty³
].
	`ş—r
();

231 
msg_bufãr
[
log_ty³
]->
upd©e
 = 
Œue
;

232 
	`»äesh
(
log_ty³
);

233 
	}
}

235 
	gM’uLog
::
	$ş—r
() {

236 
i
=0; i<
LOG_TYPE_COUNT
; i++) {

237 
	`ş—r
(
i
);

239 
	}
}

241 
	gM’uLog
::~
	$M’uLog
() {

243 
i
=0; i<
LOG_TYPE_COUNT
; i++) {

244 
log_couÁ
[
i
] = 0;

245 
d–‘e
 
msg_bufãr
[
i
];

248 
	`SDL_F»eSurçû
(
background
);

249 
d–‘e
 
şo£Bu‰Ú
;

250 
d–‘e
 
bCÚŒŞ
;

251 
	}
}

	@MenuLog.h

23 #´agm¨
Úû


24 #iâdeà
MENU_LOG_H


25 
	#MENU_LOG_H


	)

27 
	~<SDL.h
>

28 
	~<SDL_image.h
>

30 
	~"Uts.h
"

31 
	~"Widg‘Lab–.h
"

33 
	~<¡ršg
>

34 
	~<veùÜ
>

36 
	~"Uts.h
"

38 
şass
 
	gWidg‘Bu‰Ú
;

39 
şass
 
	gWidg‘SüŞlBox
;

40 
şass
 
	gWidg‘TabCÚŒŞ
;

42 cÚ¡ 
	gMAX_LOG_MESSAGES
 = 32;

44 cÚ¡ 
	gLOG_TYPE_COUNT
 = 2;

45 cÚ¡ 
	gLOG_TYPE_QUESTS
 = 0;

46 cÚ¡ 
	gLOG_TYPE_MESSAGES
 = 1;

48 şas 
	cM’uLog
 : 
public
 
M’u
 {

49 
´iv©e
:

51 
SDL_Surçû
 *
background
;

52 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

53 
Widg‘TabCÚŒŞ
 *
	mbCÚŒŞ
;

55 
lßdG¿phics
();

57 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
log_msg
[
LOG_TYPE_COUNT
];

58 
Widg‘SüŞlBox
 *
	mmsg_bufãr
[
LOG_TYPE_COUNT
];

59 
	mlog_couÁ
[
LOG_TYPE_COUNT
];

60 
	m¡d
::
¡ršg
 
b_Ïb–s
[
LOG_TYPE_COUNT
];

61 
SDL_Reù
 
	mb_»ù
[
LOG_TYPE_COUNT
];

62 
	m·¿g¿ph_¥acšg
;

64 
Lab–Info
 
	mt™Ë
;

65 
Pošt
 
	mşo£_pos
;

66 
	mb_cÚ‹Á_šd’t
;

67 
SDL_Reù
 
	mb_¬—
;

68 
SDL_CŞÜ
 
	mb_bg
;

69 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

71 
	mpublic
:

72 
M’uLog
();

73 ~
M’uLog
();

75 
upd©e
();

76 
logic
();

77 
»nd”
();

78 
»äesh
(
log_ty³
);

79 
add
(cÚ¡ 
¡d
::
¡ršg
& 
s
, 
log_ty³
);

80 
»move
(
msg_šdex
, 
log_ty³
);

81 
ş—r
(
log_ty³
);

82 
ş—r
();

	@MenuManager.cpp

23 
	~"FeP¬£r.h
"

24 
	~"UtsP¬sšg.h
"

25 
	~"UtsFeSy¡em.h
"

26 
	~"M’u.h
"

27 
	~"M’uMªag”.h
"

28 
	~"M’uAùiÚB¬.h
"

29 
	~"M’uCh¬aù”.h
"

30 
	~"M’uStB¬.h
"

31 
	~"M’uHUDLog.h
"

32 
	~"M’uInv’tÜy.h
"

33 
	~"M’uMšiM­.h
"

34 
	~"M’uNPCAùiÚs.h
"

35 
	~"M’uPow”s.h
"

36 
	~"M’uEÃmy.h
"

37 
	~"M’uV’dÜ.h
"

38 
	~"M’uT®k”.h
"

39 
	~"M’uEx™.h
"

40 
	~"M’uAùiveEfãùs.h
"

41 
	~"M’uSsh.h
"

42 
	~"M’uLog.h
"

43 
	~"ModMªag”.h
"

44 
	~"NPC.h
"

45 
	~"Pow”Mªag”.h
"

46 
	~"Sh¬edResourûs.h
"

48 
	gM’uMªag”
::
	$M’uMªag”
(
Pow”Mªag”
 *
_pow”s
, 
StBlock
 *
_¡©s
, 
Cam·ignMªag”
 *
_ÿmp
, 
I‹mMªag”
 *
_™ems
)

49 : 
	`icÚs
(
NULL
)

50 , 
	`pow”s
(
_pow”s
)

51 , 
	`¡©s
(
_¡©s
)

52 , 
	`ÿmp
(
_ÿmp
)

53 , 
	`t_buf
()

54 , 
	`key_lock
(
çl£
)

55 , 
	`d¿ggšg
(0)

56 , 
	`d¿g_¡ack
()

57 , 
	`d¿g_pow”
(0)

58 , 
	`d¿g_¤c
(0)

59 , 
	`dÚe
(
çl£
)

61 , 
	`™ems
(
_™ems
)

62 , 
	`šv
(
NULL
)

63 , 
	`pow
(
NULL
)

64 , 
	`chr
(
NULL
)

65 , 
	`log
(
NULL
)

66 , 
	`hudlog
(
NULL
)

67 , 
	`aù
(
NULL
)

68 , 
	`hp
(
NULL
)

69 , 
	`mp
(
NULL
)

70 , 
	`xp
(
NULL
)

71 , 
	`t
(
NULL
)

72 , 
	`mši
(
NULL
)

73 , 
	`Åc
(
NULL
)

74 , 
	`’emy
(
NULL
)

75 , 
	`v’dÜ
(
NULL
)

76 , 
	`lk”
(
NULL
)

77 , 
	`ex™
(
NULL
)

78 , 
	`efãùs
(
NULL
)

79 , 
	`¡ash
(
NULL
)

80 , 
	`·u£
(
çl£
)

81 , 
	`m’us_İ’
(
çl£
)

82 , 
	$drİ_¡ack
()

84 
	`lßdIcÚs
();

86 
hp
 = 
Ãw
 
	`M’uStB¬
("hp");

87 
m’us
.
	`push_back
(
hp
);

88 
mp
 = 
Ãw
 
	`M’uStB¬
("mp");

89 
m’us
.
	`push_back
(
mp
);

90 
xp
 = 
Ãw
 
	`M’uStB¬
("xp");

91 
m’us
.
	`push_back
(
xp
);

92 
efãùs
 = 
Ãw
 
	`M’uAùiveEfãùs
(
icÚs
);

93 
m’us
.
	`push_back
(
efãùs
);

94 
hudlog
 = 
Ãw
 
	`M’uHUDLog
();

95 
m’us
.
	`push_back
(
hudlog
);

96 
aù
 = 
Ãw
 
	`M’uAùiÚB¬
(
pow”s
, 
¡©s
, 
icÚs
);

97 
m’us
.
	`push_back
(
aù
);

98 
’emy
 = 
Ãw
 
	`M’uEÃmy
();

99 
m’us
.
	`push_back
(
’emy
);

100 
v’dÜ
 = 
Ãw
 
	`M’uV’dÜ
(
™ems
, 
¡©s
);

101 
m’us
.
	`push_back
(
v’dÜ
);

102 
lk”
 = 
Ãw
 
	`M’uT®k”
(
this
, 
ÿmp
);

103 
m’us
.
	`push_back
(
lk”
);

104 
ex™
 = 
Ãw
 
	`M’uEx™
();

105 
m’us
.
	`push_back
(
ex™
);

106 
mši
 = 
Ãw
 
	`M’uMšiM­
();

107 
m’us
.
	`push_back
(
mši
);

108 
chr
 = 
Ãw
 
	`M’uCh¬aù”
(
¡©s
);

109 
m’us
.
	`push_back
(
chr
);

110 
šv
 = 
Ãw
 
	`M’uInv’tÜy
(
™ems
, 
¡©s
, 
pow”s
);

111 
m’us
.
	`push_back
(
šv
);

112 
pow
 = 
Ãw
 
	`M’uPow”s
(
¡©s
, 
pow”s
, 
icÚs
);

113 
m’us
.
	`push_back
(
pow
);

114 
log
 = 
Ãw
 
	`M’uLog
();

115 
m’us
.
	`push_back
(
log
);

116 
¡ash
 = 
Ãw
 
	`M’uSsh
(
™ems
, 
¡©s
);

117 
m’us
.
	`push_back
(
¡ash
);

118 
Åc
 = 
Ãw
 
	`M’uNPCAùiÚs
();

119 
m’us
.
	`push_back
(
Åc
);

121 
t
 = 
Ãw
 
	`Widg‘ToŞt
();

124 
FeP¬£r
 
šfe
;

125 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/menus.txt"))) {

127 
m’u_šdex
 = -1;

129 
šfe
.
	`Ãxt
()) {

131 ià(
šfe
.
key
 == "id") {

134 ià(
m’u_šdex
 != -1)

135 
m’us
[
m’u_šdex
]->
	`®ign
();

137 ià(
šfe
.
v®
 =ğ"hp"è
m’u_šdex
 = 0;

138 ià(
šfe
.
v®
 =ğ"mp"è
m’u_šdex
 = 1;

139 ià(
šfe
.
v®
 =ğ"xp"è
m’u_šdex
 = 2;

140 ià(
šfe
.
v®
 =ğ"efãùs"è
m’u_šdex
 = 3;

141 ià(
šfe
.
v®
 =ğ"hudlog"è
m’u_šdex
 = 4;

142 ià(
šfe
.
v®
 =ğ"aùiÚb¬"è
m’u_šdex
 = 5;

143 ià(
šfe
.
v®
 =ğ"’emy"è
m’u_šdex
 = 6;

144 ià(
šfe
.
v®
 =ğ"v’dÜ"è
m’u_šdex
 = 7;

145 ià(
šfe
.
v®
 =ğ"lk”"è
m’u_šdex
 = 8;

146 ià(
šfe
.
v®
 =ğ"ex™"è
m’u_šdex
 = 9;

147 ià(
šfe
.
v®
 =ğ"mšim­"è
m’u_šdex
 = 10;

148 ià(
šfe
.
v®
 =ğ"ch¬aù”"è
m’u_šdex
 = 11;

149 ià(
šfe
.
v®
 =ğ"šv’tÜy"è
m’u_šdex
 = 12;

150 ià(
šfe
.
v®
 =ğ"pow”s"è
m’u_šdex
 = 13;

151 ià(
šfe
.
v®
 =ğ"log"è
m’u_šdex
 = 14;

152 ià(
šfe
.
v®
 =ğ"¡ash"è
m’u_šdex
 = 15;

153 ià(
šfe
.
v®
 =ğ"Åc"è
m’u_šdex
 = 16;

154 
m’u_šdex
 = -1;

158 ià(
m’u_šdex
 == -1)

161 ià(
šfe
.
key
 == "layout") {

163 
šfe
.
v®
 = infile.val + ',';

164 
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

165 
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

166 
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

167 
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

169 
m’us
[
m’u_šdex
]->
wšdow_¬—
.
x
 = x;

170 
m’us
[
m’u_šdex
]->
wšdow_¬—
.
y
 = y;

171 
m’us
[
m’u_šdex
]->
wšdow_¬—
.
w
 = w;

172 
m’us
[
m’u_šdex
]->
wšdow_¬—
.
h
 = h;

174 } ià(
šfe
.
key
 == "align") {

175 
m’us
[
m’u_šdex
]->
®ignm’t
 = 
šfe
.
v®
;

176 } ià(
šfe
.
key
 == "soundfx_open") {

177 
m’us
[
m’u_šdex
]->
sfx_İ’
 = 
¢d
->
	`lßd
(
šfe
.
v®
, "MenuManager openab");

178 } ià(
šfe
.
key
 == "soundfx_close") {

179 
m’us
[
m’u_šdex
]->
sfx_şo£
 = 
¢d
->
	`lßd
(
šfe
.
v®
, "MenuManager closeab");

184 
šfe
.
	`şo£
();

185 } 
	`årštf
(
¡d”r
, "Unableo open menus/menus.txt!\n");

188 
aù
->
	`upd©e
();

189 
v’dÜ
->
	`upd©e
();

190 
v’dÜ
->
buyback_¡ock
.
	`š™
(
NPC_VENDOR_MAX_STOCK
, 
™ems
);

191 
lk”
->
	`upd©e
();

192 
ex™
->
	`upd©e
();

193 
chr
->
	`upd©e
();

194 
šv
->
	`upd©e
();

195 
pow
->
	`upd©e
();

196 
log
->
	`upd©e
();

197 
¡ash
->
	`upd©e
();

199 
·u£
 = 
çl£
;

200 
d¿ggšg
 = 
çl£
;

201 
d¿g_¡ack
.
™em
 = 0;

202 
d¿g_¡ack
.
quªt™y
 = 0;

203 
d¿g_pow”
 = 0;

204 
d¿g_¤c
 = 0;

205 
drİ_¡ack
.
™em
 = 0;

206 
drİ_¡ack
.
quªt™y
 = 0;

208 
dÚe
 = 
çl£
;

210 
	`şo£AÎ
();

211 
	}
}

216 
	gM’uMªag”
::
	$lßdIcÚs
() {

218 
icÚs
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/icÚs/icÚs.²g").
	`c_¡r
());

219 ià(!
icÚs
) {

220 
	`årštf
(
¡d”r
, "Couldn'ˆlßd icÚs: %s\n", 
	`IMG_G‘E¼Ü
());

223 
SDL_Surçû
 *
ş—nup
 = 
icÚs
;

224 
icÚs
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(icons);

225 
	`SDL_F»eSurçû
(
ş—nup
);

227 
	}
}

229 
	gM’uMªag”
::
	$»nd”IcÚ
(
icÚ_id
, 
x
, 
y
) {

230 
SDL_Reù
 
¤c
;

231 
SDL_Reù
 
de¡
;

232 
de¡
.
x
 = x;

233 
de¡
.
y
 = y;

234 
¤c
.
w
 = src.
h
 = 
de¡
.w = de¡.h = 
ICON_SIZE
;

236 
cŞumns
 = 
icÚs
->
w
 / 
ICON_SIZE
;

237 
¤c
.
x
 = (
icÚ_id
 % 
cŞumns
è* 
ICON_SIZE
;

238 
¤c
.
y
 = (
icÚ_id
 / 
cŞumns
è* 
ICON_SIZE
;

240 
	`SDL_Bl™Surçû
(
icÚs
, &
¤c
, 
sü“n
, &
de¡
);

241 
	}
}

243 
	gM’uMªag”
::
	$logic
() {

245 
boŞ
 
şickšg_ch¬aù”
 = 
çl£
;

246 
boŞ
 
şickšg_šv’tÜy
 = 
çl£
;

247 
boŞ
 
şickšg_pow”s
 = 
çl£
;

248 
boŞ
 
şickšg_log
 = 
çl£
;

249 
I‹mSck
 
¡ack
;

251 
hp
->
	`upd©e
(
¡©s
->hp,¡©s->
maxhp
,
š±
->
mou£
,"");

252 
mp
->
	`upd©e
(
¡©s
->mp,¡©s->
maxmp
,
š±
->
mou£
,"");

253 
xp
->
	`upd©e
((
¡©s
->x°- sts->
xp_bË
[¡©s->
Ëv–
-1]),(¡©s->xp_bË[¡©s->Ëv–] - sts->xp_bË[¡©s->Ëv–-1]),
š±
->
mou£
,
msg
->
	`g‘
("XP: %d/%d", stats->xp, stats->xp_table[stats->level]));

254 
efãùs
->
	`upd©e
(
¡©s
);

256 
hudlog
->
	`logic
();

257 
’emy
->
	`logic
();

258 
chr
->
	`logic
();

259 
šv
->
	`logic
();

260 
v’dÜ
->
	`logic
();

261 
pow
->
	`logic
();

262 
log
->
	`logic
();

263 
lk”
->
	`logic
();

264 
¡ash
->
	`logic
();

266 ià(
chr
->
	`checkUpg¿de
(è|| 
¡©s
->
Ëv–_up
) {

268 
šv
->
	`­¶yEqum’t
(šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

269 
¡©s
->
hp
 = sts->
maxhp
;

270 
¡©s
->
mp
 = sts->
maxmp
;

271 
¡©s
->
Ëv–_up
 = 
çl£
;

275 ià(
v’dÜ
->
visibË
 && !(
šv
->visible)) {

276 
¢d
->
	`¶ay
(
v’dÜ
->
sfx_şo£
);

277 
	`şo£Leá
();

278 ià(
v’dÜ
->
lk”_visibË
 && !(
šv
->
visibË
))

279 
	`şo£Right
();

282 ià(!
š±
->
´essšg
[
INVENTORY
] && !š±->´essšg[
POWERS
] && !š±->´essšg[
CHARACTER
] && !š±->´essšg[
LOG
])

283 
key_lock
 = 
çl£
;

286 ià(
Åc
->
visibË
) {

287 
Åc
->
	`logic
();

291 
aù
->
	`checkM’u
(
š±
->
mou£
, 
şickšg_ch¬aù”
, 
şickšg_šv’tÜy
, 
şickšg_pow”s
, 
şickšg_log
);

293 ià(
ex™
->
visibË
) {

294 
ex™
->
	`logic
();

295 ià(
ex™
->
	`isEx™Reque¡ed
()) {

296 
dÚe
 = 
Œue
;

301 ià((!
key_lock
 && !
d¿ggšg
è&& !(
¡©s
->
cÜp£
 && sts->
³rmad—th
)) {

302 ià(
š±
->
´essšg
[
CANCEL
] && !š±->
lock
[CANCEL]) {

303 
š±
->
lock
[
CANCEL
] = 
Œue
;

304 
key_lock
 = 
Œue
;

305 ià(
m’us_İ’
) {

306 
	`şo£AÎ
();

309 
ex™
->
visibË
 = !exit->visible;

315 ià((
š±
->
´essšg
[
INVENTORY
] && !
key_lock
 && !
d¿ggšg
è|| 
şickšg_šv’tÜy
) {

316 
key_lock
 = 
Œue
;

317 ià(
šv
->
visibË
) {

318 
¢d
->
	`¶ay
(
šv
->
sfx_şo£
);

319 
	`şo£Right
();

322 
	`şo£Right
();

323 
aù
->
»quœes_©‹ÁiÚ
[
MENU_INVENTORY
] = 
çl£
;

324 
šv
->
visibË
 = 
Œue
;

325 
¢d
->
	`¶ay
(
šv
->
sfx_İ’
);

331 ià(((
š±
->
´essšg
[
POWERS
] && !
key_lock
 && !
d¿ggšg
è|| 
şickšg_pow”s
è&& 
¡©s
->
humªoid
) {

332 
key_lock
 = 
Œue
;

333 ià(
pow
->
visibË
) {

334 
¢d
->
	`¶ay
(
pow
->
sfx_şo£
);

335 
	`şo£Right
();

338 
	`şo£Right
();

339 
aù
->
»quœes_©‹ÁiÚ
[
MENU_POWERS
] = 
çl£
;

340 
pow
->
visibË
 = 
Œue
;

341 
¢d
->
	`¶ay
(
pow
->
sfx_İ’
);

344 
aù
->
»quœes_©‹ÁiÚ
[
MENU_POWERS
] = 
pow
->
	`g‘Un¥’t
() > 0;

347 ià(((
š±
->
´essšg
[
CHARACTER
] && !
key_lock
 && !
d¿ggšg
è|| 
şickšg_ch¬aù”
)) {

348 
key_lock
 = 
Œue
;

349 ià(
chr
->
visibË
) {

350 
¢d
->
	`¶ay
(
chr
->
sfx_şo£
);

351 
	`şo£Leá
();

354 
	`şo£Leá
();

355 
aù
->
»quœes_©‹ÁiÚ
[
MENU_CHARACTER
] = 
çl£
;

356 
chr
->
visibË
 = 
Œue
;

357 
¢d
->
	`¶ay
(
chr
->
sfx_İ’
);

359 
š±
->
	`»£tSüŞl
();

362 
aù
->
»quœes_©‹ÁiÚ
[
MENU_CHARACTER
] = 
chr
->
	`g‘Un¥’t
() > 0;

365 ià((
š±
->
´essšg
[
LOG
] && !
key_lock
 && !
d¿ggšg
è|| 
şickšg_log
) {

366 
key_lock
 = 
Œue
;

367 ià(
log
->
visibË
) {

368 
¢d
->
	`¶ay
(
log
->
sfx_şo£
);

369 
	`şo£Leá
();

372 
	`şo£Leá
();

373 
aù
->
»quœes_©‹ÁiÚ
[
MENU_LOG
] = 
çl£
;

374 
log
->
visibË
 = 
Œue
;

375 
¢d
->
	`¶ay
(
log
->
sfx_İ’
);

377 
š±
->
	`»£tSüŞl
();

381 ià(
MENUS_PAUSE
) {

382 
·u£
 = (
šv
->
visibË
 || 
pow
->visibË || 
chr
->visibË || 
log
->visibË || 
v’dÜ
->visibË || 
lk”
->visibË || 
Åc
->visible);

384 
m’us_İ’
 = (
šv
->
visibË
 || 
pow
->visibË || 
chr
->visibË || 
log
->visibË || 
v’dÜ
->visibË || 
lk”
->visibË || 
Åc
->visible);

386 ià(
ENABLE_JOYSTICK
 && (
m’us_İ’
 || 
ex™
->
visibË
)è
š±
->
	`’abËMou£EmuÏtiÚ
();

387 
š±
->
	`di§bËMou£EmuÏtiÚ
();

389 ià(
¡©s
->
®ive
) {

392 ià(!
d¿ggšg
 && 
š±
->
´essšg
[
MAIN2
] && !š±->
lock
[MAIN2]) {

394 ià(
ex™
->
visibË
 && 
	`isW™hš
Óx™->
wšdow_¬—
, 
š±
->
mou£
)) {

395 
š±
->
lock
[
MAIN2
] = 
Œue
;

399 ià(
šv
->
visibË
 && 
	`isW™hš
(šv->
wšdow_¬—
, 
š±
->
mou£
)) {

400 
š±
->
lock
[
MAIN2
] = 
Œue
;

401 ià(
	`isW™hš
(
šv
->
ÿ¼›d_¬—
, 
š±
->
mou£
)) {

402 
šv
->
	`aùiv©e
(
š±
);

408 ià(!
d¿ggšg
 && 
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]) {

410 ià(
ex™
->
visibË
 && 
	`isW™hš
Óx™->
wšdow_¬—
, 
š±
->
mou£
)) {

411 
š±
->
lock
[
MAIN1
] = 
Œue
;

414 ià(
chr
->
visibË
 && 
	`isW™hš
(chr->
wšdow_¬—
, 
š±
->
mou£
)) {

415 
š±
->
lock
[
MAIN1
] = 
Œue
;

418 ià(
v’dÜ
->
visibË
 && 
	`isW™hš
(v’dÜ->
wšdow_¬—
,
š±
->
mou£
)) {

419 
š±
->
lock
[
MAIN1
] = 
Œue
;

420 
v’dÜ
->
	`bsLogic
();

421 ià(
š±
->
´essšg
[
CTRL
]) {

423 
¡ack
 = 
v’dÜ
->
	`şick
(
š±
);

424 ià(
¡ack
.
™em
 > 0) {

425 ià(!
šv
->
	`buy
(
¡ack
,
v’dÜ
->
	`g‘Tab
())) {

426 
log
->
	`add
(
msg
->
	`g‘
("NÙƒnough mÚey."), 
LOG_TYPE_MESSAGES
);

427 
hudlog
->
	`add
(
msg
->
	`g‘
("Notƒnough money."));

428 
v’dÜ
->
	`™emR‘uº
Ğ
¡ack
);

430 ià(
šv
->
	`fuÎ
(
¡ack
.
™em
)) {

431 
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

432 
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

433 
drİ_¡ack
 = 
¡ack
;

435 
šv
->
	`add
(
¡ack
);

441 
d¿g_¡ack
 = 
v’dÜ
->
	`şick
(
š±
);

442 ià(
d¿g_¡ack
.
™em
 > 0) {

443 
d¿ggšg
 = 
Œue
;

444 
d¿g_¤c
 = 
DRAG_SRC_VENDOR
;

449 ià(
¡ash
->
visibË
 && 
	`isW™hš
(¡ash->
wšdow_¬—
,
š±
->
mou£
)) {

450 
š±
->
lock
[
MAIN1
] = 
Œue
;

451 ià(
š±
->
´essšg
[
CTRL
]) {

453 
¡ack
 = 
¡ash
->
	`şick
(
š±
);

454 ià(
¡ack
.
™em
 > 0) {

455 ià(
šv
->
	`fuÎ
(
¡ack
.
™em
)) {

456 
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

457 
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

458 
drİ_¡ack
 = 
¡ack
;

460 
šv
->
	`add
(
¡ack
);

462 
¡ash
->
upd©ed
 = 
Œue
;

466 
d¿g_¡ack
 = 
¡ash
->
	`şick
(
š±
);

467 ià(
d¿g_¡ack
.
™em
 > 0) {

468 
d¿ggšg
 = 
Œue
;

469 
d¿g_¤c
 = 
DRAG_SRC_STASH
;

474 ià(
log
->
visibË
 && 
	`isW™hš
Öog->
wšdow_¬—
,
š±
->
mou£
)) {

475 
š±
->
lock
[
MAIN1
] = 
Œue
;

479 ià(
šv
->
visibË
 && 
	`isW™hš
(šv->
wšdow_¬—
,
š±
->
mou£
)) {

480 ià(
š±
->
´essšg
[
CTRL
]) {

481 
š±
->
lock
[
MAIN1
] = 
Œue
;

482 
¡ack
 = 
šv
->
	`şick
(
š±
);

483 ià(
¡ack
.
™em
 > 0) {

484 ià(
¡ash
->
visibË
) {

485 ià(
šv
->
	`¡ashAdd
(
¡ack
è&& !
¡ash
->
	`fuÎ
(¡ack.
™em
)) {

486 
¡ash
->
	`add
(
¡ack
);

487 
¡ash
->
upd©ed
 = 
Œue
;

490 
šv
->
	`™emR‘uº
(
¡ack
);

495 ià((
SELL_WITHOUT_VENDOR
 || 
v’dÜ
->
visibË
è&& 
šv
->
	`£Î
(
¡ack
)) {

496 
v’dÜ
->
	`£tTab
(
VENDOR_SELL
);

497 
v’dÜ
->
	`add
(
¡ack
);

500 
šv
->
	`™emR‘uº
(
¡ack
);

506 
š±
->
lock
[
MAIN1
] = 
Œue
;

507 
d¿g_¡ack
 = 
šv
->
	`şick
(
š±
);

508 ià(
d¿g_¡ack
.
™em
 > 0) {

509 
d¿ggšg
 = 
Œue
;

510 
d¿g_¤c
 = 
DRAG_SRC_INVENTORY
;

515 ià(
pow
->
visibË
 && 
	`isW™hš
Õow->
wšdow_¬—
,
š±
->
mou£
)) {

516 
š±
->
lock
[
MAIN1
] = 
Œue
;

519 ià(!
pow
->
	`uÆockClick
(
š±
->
mou£
)) {

522 
d¿g_pow”
 = 
pow
->
	`şick
(
š±
->
mou£
);

523 ià(
d¿g_pow”
 > 0) {

524 
d¿ggšg
 = 
Œue
;

525 
d¿g_¤c
 = 
DRAG_SRC_POWERS
;

530 ià(
	`isW™hš
(
aù
->
numb”A»a
,
š±
->
mou£
è|| isW™hš×ù->
mou£A»a
,š±->mou£è|| isW™hš×ù->
m’uA»a
, inpt->mouse)) {

531 
š±
->
lock
[
MAIN1
] = 
Œue
;

534 ià(
š±
->
´essšg
[
CTRL
]) {

535 
aù
->
	`»move
(
š±
->
mou£
);

538 ià(!
	`isW™hš
(
aù
->
m’uA»a
, 
š±
->
mou£
)) {

539 
d¿g_pow”
 = 
aù
->
	`checkD¿g
(
š±
->
mou£
);

540 ià(
d¿g_pow”
 > 0) {

541 
d¿ggšg
 = 
Œue
;

542 
d¿g_¤c
 = 
DRAG_SRC_ACTIONBAR
;

554 ià(
d¿ggšg
 && !
š±
->
´essšg
[
MAIN1
]) {

557 ià(
d¿g_¤c
 =ğ
DRAG_SRC_POWERS
) {

558 ià(
	`isW™hš
(
aù
->
numb”A»a
,
š±
->
mou£
è|| isW™hš×ù->
mou£A»a
,inpt->mouse)) {

559 
aù
->
	`drİ
(
š±
->
mou£
, 
d¿g_pow”
, 0);

564 ià(
d¿g_¤c
 =ğ
DRAG_SRC_ACTIONBAR
) {

565 ià(
	`isW™hš
(
aù
->
numb”A»a
,
š±
->
mou£
è|| isW™hš×ù->
mou£A»a
,inpt->mouse)) {

566 
aù
->
	`drİ
(
š±
->
mou£
, 
d¿g_pow”
, 1);

568 } ià(
aù
->
locked
[aù->
d¿g_´ev_¦Ù
]) {

569 
aù
->
hÙkeys
[aù->
d¿g_´ev_¦Ù
] = 
d¿g_pow”
;

574 ià(
d¿g_¤c
 =ğ
DRAG_SRC_INVENTORY
) {

576 ià(
šv
->
visibË
 && 
	`isW™hš
(šv->
wšdow_¬—
, 
š±
->
mou£
)) {

577 
šv
->
	`drİ
(
š±
->
mou£
, 
d¿g_¡ack
);

578 
d¿g_¡ack
.
™em
 = 0;

580 ià(
	`isW™hš
(
aù
->
numb”A»a
,
š±
->
mou£
è|| isW™hš×ù->
mou£A»a
,inpt->mouse)) {

582 
šv
->
	`™emR‘uº
(
d¿g_¡ack
);

585 ià(
™ems
->™ems[
d¿g_¡ack
.
™em
].
pow”
 != 0) {

586 
aù
->
	`drİ
(
š±
->
mou£
, 
™ems
->™ems[
d¿g_¡ack
.
™em
].
pow”
, 
çl£
);

589 ià(
v’dÜ
->
visibË
 && 
	`isW™hš
(v’dÜ->
¦Ùs_¬—
, 
š±
->
mou£
)) {

590 ià(
šv
->
	`£Î
Ğ
d¿g_¡ack
)) {

591 
v’dÜ
->
	`£tTab
(
VENDOR_SELL
);

592 
v’dÜ
->
	`add
Ğ
d¿g_¡ack
);

595 
šv
->
	`™emR‘uº
(
d¿g_¡ack
);

597 
d¿g_¡ack
.
™em
 = 0;

599 ià(
¡ash
->
visibË
 && 
	`isW™hš
(¡ash->
¦Ùs_¬—
, 
š±
->
mou£
)) {

600 ià(
šv
->
	`¡ashAdd
Ğ
d¿g_¡ack
è&& !
¡ash
->
	`fuÎ
(d¿g_¡ack.
™em
)) {

601 
¡ash
->
	`drİ
(
š±
->
mou£
, 
d¿g_¡ack
);

602 
¡ash
->
upd©ed
 = 
Œue
;

605 
šv
->
	`™emR‘uº
(
d¿g_¡ack
);

607 
d¿g_¡ack
.
™em
 = 0;

613 ià(
™ems
->™ems[
d¿g_¡ack
.
™em
].
ty³
 != "quest") {

614 
drİ_¡ack
 = 
d¿g_¡ack
;

615 
d¿g_¡ack
.
™em
 = 0;

616 
d¿g_¡ack
.
quªt™y
 = 0;

617 
šv
->
	`ş—rHighlight
();

620 
šv
->
	`™emR‘uº
(
d¿g_¡ack
);

625 ià(
d¿g_¤c
 =ğ
DRAG_SRC_VENDOR
) {

628 ià(
šv
->
visibË
 && 
	`isW™hš
Ğšv->
ÿ¼›d_¬—
, 
š±
->
mou£
)) {

629 ià(!
šv
->
	`buy
(
d¿g_¡ack
,
v’dÜ
->
	`g‘Tab
())) {

630 
log
->
	`add
(
msg
->
	`g‘
("NÙƒnough mÚey."), 
LOG_TYPE_MESSAGES
);

631 
hudlog
->
	`add
(
msg
->
	`g‘
("Notƒnough money."));

632 
v’dÜ
->
	`™emR‘uº
Ğ
d¿g_¡ack
);

634 ià(
šv
->
	`fuÎ
(
d¿g_¡ack
.
™em
)) {

635 
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

636 
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

637 
drİ_¡ack
 = 
d¿g_¡ack
;

639 
šv
->
	`drİ
(
š±
->
mou£
,
d¿g_¡ack
);

642 
d¿g_¡ack
.
™em
 = 0;

643 
d¿g_¡ack
.
quªt™y
 = 0;

646 
v’dÜ
->
	`™emR‘uº
(
d¿g_¡ack
);

650 ià(
d¿g_¤c
 =ğ
DRAG_SRC_STASH
) {

653 ià(
šv
->
visibË
 && 
	`isW™hš
Ğšv->
ÿ¼›d_¬—
, 
š±
->
mou£
)) {

654 ià(
šv
->
	`fuÎ
(
d¿g_¡ack
.
™em
)) {

655 
log
->
	`add
(
msg
->
	`g‘
("Inv’tÜy i fuÎ."), 
LOG_TYPE_MESSAGES
);

656 
hudlog
->
	`add
(
msg
->
	`g‘
("Inventory is full."));

658 ià(
™ems
->™ems[
d¿g_¡ack
.
™em
].
ty³
 != "quest") {

659 
drİ_¡ack
 = 
d¿g_¡ack
;

661 
¡ash
->
	`™emR‘uº
(
d¿g_¡ack
);

664 
šv
->
	`drİ
(
š±
->
mou£
,
d¿g_¡ack
);

666 
¡ash
->
upd©ed
 = 
Œue
;

667 
d¿g_¡ack
.
™em
 = 0;

668 
d¿g_¡ack
.
quªt™y
 = 0;

670 ià(
¡ash
->
visibË
 && 
	`isW™hš
(¡ash->
¦Ùs_¬—
, 
š±
->
mou£
)) {

671 
¡ash
->
	`drİ
(
š±
->
mou£
,
d¿g_¡ack
);

674 
¡ash
->
	`™emR‘uº
Ğ
d¿g_¡ack
);

678 
d¿ggšg
 = 
çl£
;

682 ià(
d¿ggšg
) {

683 ià(
d¿g_¤c
 =ğ
DRAG_SRC_VENDOR
è
v’dÜ
->
	`™emR‘uº
(
d¿g_¡ack
);

684 ià(
d¿g_¤c
 =ğ
DRAG_SRC_STASH
è
¡ash
->
	`™emR‘uº
(
d¿g_¡ack
);

685 ià(
d¿g_¤c
 =ğ
DRAG_SRC_INVENTORY
è
šv
->
	`™emR‘uº
(
d¿g_¡ack
);

686 ià(
d¿g_¤c
 =ğ
DRAG_SRC_ACTIONBAR
è
aù
->
	`aùiÚR‘uº
(
d¿g_pow”
);

687 
d¿g_¤c
 = -1;

688 
d¿ggšg
 = 
çl£
;

693 ià(
šv
->
chªged_equm’t
 || inv->
chªged_¬tiçù
) {

694 
šv
->
	`­¶yEqum’t
(šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

695 
šv
->
chªged_¬tiçù
 = 
çl£
;

700 
i
=0; i<12; i++) {

701 
aù
->
¦Ù_’abËd
[
i
] = 
Œue
;

702 
aù
->
¦Ù_™em_couÁ
[
i
] = -1;

704 ià(
aù
->
hÙkeys
[
i
] != -1) {

705 
™em_id
 = 
pow”s
->pow”s[
aù
->
hÙkeys
[
i
]].
»quœes_™em
;

706 ià(
™em_id
 !ğ-1 && 
™ems
->™ems[™em_id].
ty³
 == "consumable") {

707 
aù
->
¦Ù_™em_couÁ
[
i
] = 
šv
->
	`g‘I‹mCouÁC¬r›d
(
™em_id
);

708 ià(
aù
->
¦Ù_™em_couÁ
[
i
] == 0) {

709 
aù
->
¦Ù_’abËd
[
i
] = 
çl£
;

712 ià(
™em_id
 != -1) {

715 ià(!
šv
->
	`isI‹mEqu³d
(
™em_id
)) {

716 
aù
->
¦Ù_’abËd
[
i
] = 
çl£
;

722 
	}
}

724 
	gM’uMªag”
::
	$»nd”
() {

725 
i
=0; i<
m’us
.
	`size
(); i++) {

726 
m’us
[
i
]->
	`»nd”
();

729 
ToŞtD©a
 
t_Ãw
;

732 ià(
chr
->
visibË
 && 
	`isW™hš
(chr->
wšdow_¬—
,
š±
->
mou£
)) {

733 
t_Ãw
 = 
chr
->
	`checkToŞt
();

735 ià(
v’dÜ
->
visibË
 && 
	`isW™hš
(v’dÜ->
wšdow_¬—
,
š±
->
mou£
)) {

736 
t_Ãw
 = 
v’dÜ
->
	`checkToŞt
(
š±
->
mou£
);

738 ià(
¡ash
->
visibË
 && 
	`isW™hš
(¡ash->
wšdow_¬—
,
š±
->
mou£
)) {

739 
t_Ãw
 = 
¡ash
->
	`checkToŞt
(
š±
->
mou£
);

741 ià(
pow
->
visibË
 && 
	`isW™hš
Õow->
wšdow_¬—
,
š±
->
mou£
)) {

742 
t_Ãw
 = 
pow
->
	`checkToŞt
(
š±
->
mou£
);

744 ià(
šv
->
visibË
 && !
d¿ggšg
 && 
	`isW™hš
(šv->
wšdow_¬—
,
š±
->
mou£
)) {

745 
t_Ãw
 = 
šv
->
	`checkToŞt
(
š±
->
mou£
);

747 ià(
	`isW™hš
(
aù
->
wšdow_¬—
,
š±
->
mou£
)) {

748 
t_Ãw
 = 
aù
->
	`checkToŞt
(
š±
->
mou£
);

751 ià(!
t_Ãw
.
	`isEm±y
()) {

756 ià(!
t_Ãw
.
	`com·»
(&
t_buf
)) {

757 
t_buf
.
	`ş—r
();

758 
t_buf
 = 
t_Ãw
;

760 
t
->
	`»nd”
(
t_buf
, 
š±
->
mou£
, 
STYLE_FLOAT
);

761 
TOOLTIP_CONTEXT
 = 
TOOLTIP_MENU
;

762 } ià(
TOOLTIP_CONTEXT
 !ğ
TOOLTIP_MAP
) {

763 
TOOLTIP_CONTEXT
 = 
TOOLTIP_NONE
;

767 ià(
d¿ggšg
) {

768 ià(
d¿g_¤c
 =ğ
DRAG_SRC_INVENTORY
 || d¿g_¤ø=ğ
DRAG_SRC_VENDOR
 || d¿g_¤ø=ğ
DRAG_SRC_STASH
)

769 
™ems
->
	`»nd”IcÚ
(
d¿g_¡ack
, 
š±
->
mou£
.
x
 - 
ICON_SIZE
/2, iÅt->mou£.
y
 - ICON_SIZE/2, ICON_SIZE);

770 ià(
d¿g_¤c
 =ğ
DRAG_SRC_POWERS
 || d¿g_¤ø=ğ
DRAG_SRC_ACTIONBAR
)

771 
	`»nd”IcÚ
(
pow”s
->pow”s[
d¿g_pow”
].
icÚ
, 
š±
->
mou£
.
x
-
ICON_SIZE
/2, iÅt->mou£.
y
-ICON_SIZE/2);

774 
	}
}

776 
	gM’uMªag”
::
	$şo£AÎ
() {

777 ià(!
d¿ggšg
) {

778 
	`şo£Leá
();

779 
	`şo£Right
();

780 
v’dÜ
->
lk”_visibË
 = 
çl£
;

782 
	}
}

784 
	gM’uMªag”
::
	$şo£Leá
() {

785 ià(!
d¿ggšg
) {

786 
chr
->
visibË
 = 
çl£
;

787 
log
->
visibË
 = 
çl£
;

788 
v’dÜ
->
visibË
 = 
çl£
;

789 
lk”
->
visibË
 = 
çl£
;

790 
ex™
->
visibË
 = 
çl£
;

791 
¡ash
->
visibË
 = 
çl£
;

792 
Åc
->
visibË
 = 
çl£
;

794 
	}
}

796 
	gM’uMªag”
::
	$şo£Right
() {

797 ià(!
d¿ggšg
) {

798 
šv
->
visibË
 = 
çl£
;

799 
pow
->
visibË
 = 
çl£
;

800 
lk”
->
visibË
 = 
çl£
;

801 
ex™
->
visibË
 = 
çl£
;

802 
Åc
->
visibË
 = 
çl£
;

804 
	}
}

806 
	gM’uMªag”
::~
	$M’uMªag”
() {

808 
t_buf
.
	`ş—r
();

810 
d–‘e
 
hp
;

811 
d–‘e
 
mp
;

812 
d–‘e
 
xp
;

813 
d–‘e
 
mši
;

814 
d–‘e
 
šv
;

815 
d–‘e
 
pow
;

816 
d–‘e
 
chr
;

817 
d–‘e
 
hudlog
;

818 
d–‘e
 
log
;

819 
d–‘e
 
aù
;

820 
d–‘e
 
t
;

821 
d–‘e
 
v’dÜ
;

822 
d–‘e
 
lk”
;

823 
d–‘e
 
ex™
;

824 
d–‘e
 
’emy
;

825 
d–‘e
 
efãùs
;

826 
d–‘e
 
¡ash
;

827 
d–‘e
 
Åc
;

829 
	`SDL_F»eSurçû
(
icÚs
);

830 
	}
}

	@MenuManager.h

24 #´agm¨
Úû


25 #iâdeà
MENU_MANAGER_H


26 
	#MENU_MANAGER_H


	)

28 
	~<SDL.h
>

29 
	~<SDL_image.h
>

30 
	~<SDL_mix”.h
>

32 
	~"I‹mMªag”.h
"

33 
	~"Widg‘ToŞt.h
"

35 
şass
 
	gM’u
;

36 
şass
 
	gM’uInv’tÜy
;

37 
şass
 
	gM’uPow”s
;

38 
şass
 
	gM’uCh¬aù”
;

39 
şass
 
	gM’uLog
;

40 
şass
 
	gM’uHUDLog
;

41 
şass
 
	gM’uAùiÚB¬
;

42 
şass
 
	gM’uStB¬
;

43 
şass
 
	gM’uMšiM­
;

44 
şass
 
	gM’uNPCAùiÚs
;

45 
şass
 
	gM’uEÃmy
;

46 
şass
 
	gM’uV’dÜ
;

47 
şass
 
	gM’uT®k”
;

48 
şass
 
	gM’uEx™
;

49 
şass
 
	gM’uAùiveEfãùs
;

50 
şass
 
	gM’uSsh
;

51 
şass
 
	gCam·ignMªag”
;

52 
şass
 
	gI‹mMªag”
;

53 
şass
 
	gPow”Mªag”
;

54 
şass
 
	gStBlock
;

56 cÚ¡ 
	gDRAG_SRC_POWERS
 = 1;

57 cÚ¡ 
	gDRAG_SRC_INVENTORY
 = 2;

58 cÚ¡ 
	gDRAG_SRC_ACTIONBAR
 = 3;

59 cÚ¡ 
	gDRAG_SRC_VENDOR
 = 4;

60 cÚ¡ 
	gDRAG_SRC_STASH
 = 5;

62 şas 
	cM’uMªag”
 {

63 
	m´iv©e
:

65 
SDL_Surçû
 *
icÚs
;

67 
Pow”Mªag”
 *
	mpow”s
;

68 
StBlock
 *
	m¡©s
;

69 
Cam·ignMªag”
 *
	mÿmp
;

71 
ToŞtD©a
 
	mt_buf
;

73 
boŞ
 
	mkey_lock
;

74 
lßdIcÚs
();

76 
boŞ
 
	md¿ggšg
;

77 
I‹mSck
 
	md¿g_¡ack
;

78 
	md¿g_pow”
;

79 
	md¿g_¤c
;

81 
boŞ
 
	mdÚe
;

83 
	mpublic
:

84 
M’uMªag”
(
Pow”Mªag”
 *
pow”s
, 
StBlock
 *
¡©s
, 
Cam·ignMªag”
 *
ÿmp
, 
I‹mMªag”
 *
™ems
);

85 
M’uMªag”
(cÚ¡ M’uMªag” &
cİy
);

86 ~
M’uMªag”
();

87 
logic
();

88 
»nd”
();

89 
»nd”IcÚ
(
icÚ_id
, 
x
, 
y
);

90 
şo£AÎ
();

91 
şo£Leá
();

92 
şo£Right
();

94 
	m¡d
::
veùÜ
<
M’u
*> 
m’us
;

95 
I‹mMªag”
 *
	m™ems
;

96 
M’uInv’tÜy
 *
	mšv
;

97 
M’uPow”s
 *
	mpow
;

98 
M’uCh¬aù”
 *
	mchr
;

99 
M’uLog
 *
	mlog
;

100 
M’uHUDLog
 *
	mhudlog
;

101 
M’uAùiÚB¬
 *
	maù
;

102 
M’uStB¬
 *
	mhp
;

103 
M’uStB¬
 *
	mmp
;

104 
M’uStB¬
 *
	mxp
;

105 
Widg‘ToŞt
 *
	mt
;

106 
M’uMšiM­
 *
	mmši
;

107 
M’uNPCAùiÚs
 *
	mÅc
;

108 
M’uEÃmy
 *
	m’emy
;

109 
M’uV’dÜ
 *
	mv’dÜ
;

110 
M’uT®k”
 *
	mlk”
;

111 
M’uEx™
 *
	mex™
;

112 
M’uAùiveEfãùs
 *
	mefãùs
;

113 
M’uSsh
 *
	m¡ash
;

115 
boŞ
 
	m·u£
;

116 
boŞ
 
	mm’us_İ’
;

117 
I‹mSck
 
	mdrİ_¡ack
;

119 
boŞ
 
	$»que¡šgEx™
(è{  
dÚe
; }

120 
	}
};

	@MenuMiniMap.cpp

23 
	~"FeP¬£r.h
"

24 
	~"M’u.h
"

25 
	~"M’uMšiM­.h
"

26 
	~"M­CŞlisiÚ.h
"

27 
	~"Sh¬edResourûs.h
"

28 
	~"S‘tšgs.h
"

29 
	~"UtsP¬sšg.h
"

31 
	~<io¡»am
>

32 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gM’uMšiM­
::
	$M’uMšiM­
() {

36 
m­_surçû
 = 0;

37 
	`ü—‹M­Surçû
();

38 
cŞÜ_w®l
 = 
	`SDL_M­RGB
(
m­_surçû
->
fÜm©
, 128,128,128);

39 
cŞÜ_ob¡
 = 
	`SDL_M­RGB
(
m­_surçû
->
fÜm©
, 64,64,64);

40 
cŞÜ_h”o
 = 
	`SDL_M­RGB
(
m­_surçû
->
fÜm©
, 255,255,255);

43 
FeP¬£r
 
šfe
;

44 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/minimap.txt"))) {

45 
šfe
.
	`Ãxt
()) {

46 
šfe
.
v®
 = infile.val + ',';

48 if(
šfe
.
key
 == "pos") {

49 
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

50 
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

51 
pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

52 
pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

53 } if(
šfe
.
key
 == "text_pos") {

54 
‹xt_pos
 = 
	`—tLab–Info
(
šfe
.
v®
);

57 
šfe
.
	`şo£
();

58 } 
	`årštf
(
¡d”r
, "Unableo open menus/minimap.txt!\n");

61 
Ïb–
 = 
Ãw
 
	`Widg‘Lab–
();

63 
	}
}

65 
	gM’uMšiM­
::
g‘M­T™Ë
(
¡d
::
¡ršg
 
m­_t™Ë
) {

66 
Ïb–
->
£t
(
wšdow_¬—
.
x
+
‹xt_pos
.x, wšdow_¬—.
y
+‹xt_pos.y,ext_pos.
ju¡ify
,ext_pos.
v®ign
, 
m­_t™Ë
, 
fÚt
->
g‘CŞÜ
("m’u_nÜm®"),ext_pos.
fÚt_¡yË
);

69 
	gM’uMšiM­
::
	$ü—‹M­Surçû
() {

71 
	`SDL_F»eSurçû
(
m­_surçû
);

72 
m­_surçû
 = 
	`ü—‹Surçû
(512, 512);

73 
	}
}

75 
	gM’uMšiM­
::
	$»nd”
() {

76 
	}
}

78 
M’uMšiM­
::
	$»nd”
(
Pošt
 
h”o_pos
) {

79 ià(!
‹xt_pos
.
hidd’
è
Ïb–
->
	`»nd”
();

81 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ISOMETRIC
)

82 
	`»nd”Iso
(
h”o_pos
);

84 
	`»nd”O¹ho
(
h”o_pos
);

85 
	}
}

87 
	gM’uMšiM­
::
	$´”’d”
(
M­CŞlisiÚ
 *
cŞlid”
, 
m­_w
, 
m­_h
) {

88 
m­_size
.
x
 = 
m­_w
;

89 
m­_size
.
y
 = 
m­_h
;

90 
	`SDL_FlReù
(
m­_surçû
, 0, 
	`SDL_M­RGB
(m­_surçû->
fÜm©
,255,0,255));

92 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ISOMETRIC
)

93 
	`´”’d”Iso
(
cŞlid”
);

95 
	`´”’d”O¹ho
(
cŞlid”
);

96 
	}
}

101 
	gM’uMšiM­
::
	$»nd”O¹ho
(
Pošt
 
h”o_pos
) {

103 cÚ¡ 
h”ox
 = 
h”o_pos
.
x
 / 
UNITS_PER_TILE
;

104 cÚ¡ 
h”oy
 = 
h”o_pos
.
y
 / 
UNITS_PER_TILE
;

106 
SDL_Reù
 
ş
;

107 
ş
.
x
 = 
h”ox
 - 
pos
.
w
/2;

108 
ş
.
y
 = 
h”oy
 - 
pos
.
h
/2;

109 
ş
.
w
 = 
pos
.w;

110 
ş
.
h
 = 
pos
.h;

112 
SDL_Reù
 
m­_¬—
;

113 
m­_¬—
.
x
 = 
wšdow_¬—
.x + 
pos
.x;

114 
m­_¬—
.
y
 = 
wšdow_¬—
.y + 
pos
.y;

115 
m­_¬—
.
w
 = 
pos
.w;

116 
m­_¬—
.
h
 = 
pos
.h;

118 
	`SDL_Bl™Surçû
(
m­_surçû
, &
ş
 ,
sü“n
, &
m­_¬—
);

120 
	`SDL_LockSurçû
(
sü“n
);

121 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

122 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2 + 1, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

123 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2 - 1, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

124 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2 + 1, 
cŞÜ_h”o
);

125 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2 - 1, 
cŞÜ_h”o
);

126 
	`SDL_UÆockSurçû
(
sü“n
);

127 
	}
}

132 
	gM’uMšiM­
::
	$»nd”Iso
(
Pošt
 
h”o_pos
) {

134 cÚ¡ 
h”ox
 = 
h”o_pos
.
x
 / 
UNITS_PER_TILE
;

135 cÚ¡ 
h”oy
 = 
h”o_pos
.
y
 / 
UNITS_PER_TILE
;

136 cÚ¡ 
h”oy_sü“n
 = 
h”ox
 + 
h”oy
;

137 cÚ¡ 
h”ox_sü“n
 = 
h”ox
 - 
h”oy
 + 
¡d
::
	`max
(
m­_size
.
x
, m­_size.
y
);

139 
SDL_Reù
 
ş
;

140 
ş
.
x
 = 
h”ox_sü“n
 - 
pos
.
w
/2;

141 
ş
.
y
 = 
h”oy_sü“n
 - 
pos
.
h
/2;

142 
ş
.
w
 = 
pos
.w;

143 
ş
.
h
 = 
pos
.h;

145 
SDL_Reù
 
m­_¬—
;

146 
m­_¬—
.
x
 = 
wšdow_¬—
.x + 
pos
.x;

147 
m­_¬—
.
y
 = 
wšdow_¬—
.y + 
pos
.y;

148 
m­_¬—
.
w
 = 
pos
.w;

149 
m­_¬—
.
h
 = 
pos
.h;

151 
	`SDL_Bl™Surçû
(
m­_surçû
, &
ş
 ,
sü“n
, &
m­_¬—
);

152 
	`SDL_LockSurçû
(
sü“n
);

153 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2 + 1, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

154 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2 - 1, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

155 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2 + 1, 
cŞÜ_h”o
);

156 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2 - 1, 
cŞÜ_h”o
);

157 
	`d¿wPix–
(
sü“n
, 
wšdow_¬—
.
x
 + 
pos
.x +…os.
w
/2, wšdow_¬—.
y
 +…os.y +…os.
h
/2, 
cŞÜ_h”o
);

158 
	`SDL_UÆockSurçû
(
sü“n
);

159 
	}
}

161 
	gM’uMšiM­
::
	$´”’d”O¹ho
(
M­CŞlisiÚ
 *
cŞlid”
) {

162 
i
=0; i<
¡d
::
	`mš
(
m­_surçû
->
w
, 
m­_size
.
x
); i++) {

163 
j
=0; j<
¡d
::
	`mš
(
m­_surçû
->
h
, 
m­_size
.
y
); j++) {

164 ià(
cŞlid”
->
cŞm­
[
i
][
j
] == 1) {

165 
	`d¿wPix–
(
m­_surçû
, 
i
, 
j
, 
cŞÜ_w®l
);

167 ià(
cŞlid”
->
cŞm­
[
i
][
j
] == 2) {

168 
	`d¿wPix–
(
m­_surçû
, 
i
, 
j
, 
cŞÜ_ob¡
);

172 
	}
}

174 
	gM’uMšiM­
::
	$´”’d”Iso
(
M­CŞlisiÚ
 *
cŞlid”
) {

176 
Ušt32
 
d¿w_cŞÜ
;

177 
te_ty³
;

179 
Pošt
 
te_cursÜ
;

180 
te_cursÜ
.
x
 = -
¡d
::
	`max
(
m­_size
.x, m­_size.
y
)/2;

181 
te_cursÜ
.
y
 = 
¡d
::
	`max
(
m­_size
.
x
, map_size.y)/2;

183 
boŞ
 
odd_row
 = 
çl£
;

186 
j
=0; j<
m­_surçû
->
h
; j++) {

189 
i
=0; i<
m­_surçû
->
w
; i+=2) {

192 ià(
te_cursÜ
.
x
 >ğ0 &&e_cursÜ.
y
 >ğ0 &&e_cursÜ.x < 
m­_size
.x &&ile_cursor.y < map_size.y) {

194 
te_ty³
 = 
cŞlid”
->
cŞm­
[
te_cursÜ
.
x
][te_cursÜ.
y
];

195 
boŞ
 
d¿w_te
 = 
Œue
;

198 ià(
te_ty³
 =ğ1è
d¿w_cŞÜ
 = 
cŞÜ_w®l
;

199 ià(
te_ty³
 =ğ2è
d¿w_cŞÜ
 = 
cŞÜ_ob¡
;

200 
d¿w_te
 = 
çl£
;

202 ià(
d¿w_te
) {

203 ià(
odd_row
) {

204 
	`d¿wPix–
(
m­_surçû
, 
i
, 
j
, 
d¿w_cŞÜ
);

205 
	`d¿wPix–
(
m­_surçû
, 
i
+1, 
j
, 
d¿w_cŞÜ
);

208 
	`d¿wPix–
(
m­_surçû
, 
i
-1, 
j
, 
d¿w_cŞÜ
);

209 
	`d¿wPix–
(
m­_surçû
, 
i
, 
j
, 
d¿w_cŞÜ
);

215 
te_cursÜ
.
x
++;

216 
te_cursÜ
.
y
--;

220 ià(
odd_row
) {

221 
odd_row
 = 
çl£
;

222 
te_cursÜ
.
x
 -ğ
m­_surçû
->
w
/2;

223 
te_cursÜ
.
y
 +ğ(
m­_surçû
->
w
/2 +1);

226 
odd_row
 = 
Œue
;

227 
te_cursÜ
.
x
 -ğ(
m­_surçû
->
w
/2 -1);

228 
te_cursÜ
.
y
 +ğ
m­_surçû
->
w
/2;

231 
	}
}

233 
	gM’uMšiM­
::~
	$M’uMšiM­
() {

234 
	`SDL_F»eSurçû
(
m­_surçû
);

235 
d–‘e
 
Ïb–
;

236 
	}
}

	@MenuMiniMap.h

22 #´agm¨
Úû


23 #iâdeà
MENU_MINI_MAP_H


24 
	#MENU_MINI_MAP_H


	)

26 
	~<SDL.h
>

27 
	~"Uts.h
"

28 
	~"Widg‘Lab–.h
"

30 
şass
 
	gM­CŞlisiÚ
;

31 
şass
 
	gWidg‘Lab–
;

33 şas 
	cM’uMšiM­
 : 
public
 
M’u
 {

34 
´iv©e
:

35 
Ušt32
 
cŞÜ_w®l
;

36 
Ušt32
 
	mcŞÜ_ob¡
;

37 
Ušt32
 
	mcŞÜ_h”o
;

39 
SDL_Surçû
 *
	mm­_surçû
;

40 
Pošt
 
	mm­_size
;

42 
SDL_Reù
 
	mpos
;

43 
Lab–Info
 
	m‹xt_pos
;

44 
Widg‘Lab–
 *
	mÏb–
;

46 
ü—‹M­Surçû
();

47 
»nd”Iso
(
Pošt
 
h”o_pos
);

48 
»nd”O¹ho
(
Pošt
 
h”o_pos
);

49 
´”’d”O¹ho
(
M­CŞlisiÚ
 *
cŞlid”
);

50 
´”’d”Iso
(
M­CŞlisiÚ
 *
cŞlid”
);

52 
	mpublic
:

53 
M’uMšiM­
();

54 ~
M’uMšiM­
();

56 
»nd”
();

57 
»nd”
(
Pošt
 
h”o_pos
);

58 
´”’d”
(
M­CŞlisiÚ
 *
cŞlid”
, 
m­_w
, 
m­_h
);

59 
g‘M­T™Ë
(
¡d
::
¡ršg
 
m­_t™Ë
);

	@MenuNPCActions.cpp

21 
	~<s¡»am
>

22 
	~"FeP¬£r.h
"

23 
	~"M’u.h
"

24 
	~"M’uNPCAùiÚs.h
"

25 
	~"NPC.h
"

26 
	~"S‘tšgs.h
"

27 
	~"Sh¬edResourûs.h
"

28 
	~"SDL_gfxBl™Func.h
"

29 
	~"UtsP¬sšg.h
"

31 
	#SEPARATOR_HEIGHT
 2

	)

32 
	#ITEM_SPACING
 2

	)

33 
	#MENU_BORDER
 8

	)

35 
usšg
 
Çme¥aû
 
	g¡d
;

37 şas 
	cAùiÚ
 {

38 
	mpublic
:

39 
AùiÚ
(
¡d
::
¡ršg
 
_id
 = "", std::¡ršg 
_Ïb–
="")

40 : 
id
(
_id
)

41 , 
Ïb–
(
id
 !ğ"" ? 
Ãw
 
	$Widg‘Lab–
(è: 
NULL
)

43 ià(
Ïb–
)

44 
Ïb–
->
	`£t
(
_Ïb–
);

47 
	$AùiÚ
(cÚ¡ 
AùiÚ
 &
r
è: 
	$Ïb–
(
NULL
) {

48 
id
 = 
r
.id;

49 ià(
id
 != "") {

50 
Ïb–
 = 
Ãw
 
	`Widg‘Lab–
();

51 
Ïb–
->
	`£t
(
r
.Ïb–->
	`g‘
());

53 
	}
}

55 
	gvœtu®
 ~
	$AùiÚ
(è{ 
d–‘e
 
Ïb–
; 
	}
}

57 
	g¡d
::
¡ršg
 
id
;

58 
Widg‘Lab–
 *
	gÏb–
;

59 
SDL_Reù
 
	g»ù
;

62 
	gM’uNPCAùiÚs
::
	$M’uNPCAùiÚs
()

63 : 
	`M’u
()

64 , 
	`Åc
(
NULL
)

65 , 
	`is_£Ëùed
(
çl£
)

66 , 
	`is_em±y
(
Œue
)

67 , 
	`fœ¡_dŸlog_node
(-1)

68 , 
	`cu¼’t_aùiÚ
(-1)

69 , 
	`aùiÚ_m’u
(
NULL
)

70 , 
	`dŸlog_£Ëùed
(
çl£
)

71 , 
	`v’dÜ_£Ëùed
(
çl£
)

72 , 
	`ÿnûl_£Ëùed
(
çl£
)

73 , 
	`£Ëùed_dŸlog_node
(-1)

76 
v’dÜ_Ïb–
 = 
msg
->
	`g‘
("Trade");

77 
ÿnûl_Ïb–
 = 
msg
->
	`g‘
("Cancel");

80 
FeP¬£r
 
šfe
;

81 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/npc.txt"))) {

82 
šfe
.
	`Ãxt
()) {

83 
šfe
.
v®
 = infile.val + ',';

85 if(
šfe
.
key
 == "background_color") {

86 
background_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

87 
background_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

88 
background_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

89 
background_®pha
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

91 if(
šfe
.
key
 == "topic_normal_color") {

92 
tİic_nÜm®_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

93 
tİic_nÜm®_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

94 
tİic_nÜm®_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

96 if(
šfe
.
key
 == "topic_hilight_color") {

97 
tİic_hight_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

98 
tİic_hight_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

99 
tİic_hight_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

101 if(
šfe
.
key
 == "vendor_normal_color") {

102 
v’dÜ_nÜm®_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

103 
v’dÜ_nÜm®_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

104 
v’dÜ_nÜm®_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

106 if(
šfe
.
key
 == "vendor_hilight_color") {

107 
v’dÜ_hight_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

108 
v’dÜ_hight_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

109 
v’dÜ_hight_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

111 if(
šfe
.
key
 == "cancel_normal_color") {

112 
ÿnûl_nÜm®_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

113 
ÿnûl_nÜm®_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

114 
ÿnûl_nÜm®_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

116 if(
šfe
.
key
 == "cancel_hilight_color") {

117 
ÿnûl_hight_cŞÜ
.
r
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

118 
ÿnûl_hight_cŞÜ
.
g
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

119 
ÿnûl_hight_cŞÜ
.
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

122 
šfe
.
	`şo£
();

123 } 
	`årštf
(
¡d”r
, "Unableo open menus/npc.txt!\n");

124 
	}
}

126 
	gM’uNPCAùiÚs
::
	$upd©e
() {

127 ià(
aùiÚ_m’u
)

128 
	`SDL_F»eSurçû
(
aùiÚ_m’u
);

131 
w
 = 0, 
h
 = 0;

132 
size_t
 
i
=0; i<
Åc_aùiÚs
.
	`size
(); i++) {

133 
h
 +ğ
ITEM_SPACING
;

134 ià(
Åc_aùiÚs
[
i
].
Ïb–
) {

135 
w
 = 
	`max
(()
Åc_aùiÚs
[
i
].
Ïb–
->
bounds
.w, w);

136 
h
 +ğ
Åc_aùiÚs
[
i
].
Ïb–
->
bounds
.h;

139 
h
 +ğ
SEPARATOR_HEIGHT
;

141 
h
 +ğ
ITEM_SPACING
;

145 
wšdow_¬—
.
x
 = 
VIEW_W_HALF
 - (
w
 / 2);

146 
wšdow_¬—
.
y
 = 
	`max
(40, 
VIEW_H_HALF
 - 
h
 - ()(
UNITS_PER_TILE
*1.5));

147 
wšdow_¬—
.
w
 = w;

148 
wšdow_¬—
.
h
 = h;

151 
yoffs
 = 
MENU_BORDER
;

152 
SDL_CŞÜ
 
‹xt_cŞÜ
;

153 
size_t
 
i
=0; i<
Åc_aùiÚs
.
	`size
(); i++) {

154 
Åc_aùiÚs
[
i
].
»ù
.
x
 = 
wšdow_¬—
.x + 
MENU_BORDER
;

155 
Åc_aùiÚs
[
i
].
»ù
.
y
 = 
wšdow_¬—
.y + 
yoffs
;

156 
Åc_aùiÚs
[
i
].
»ù
.
w
 = w;

158 ià(
Åc_aùiÚs
[
i
].
Ïb–
) {

159 
Åc_aùiÚs
[
i
].
»ù
.
h
 =‚pc_aùiÚs[i].
Ïb–
->
bounds
.h + (
ITEM_SPACING
*2);

161 ià(
i
 =ğ
cu¼’t_aùiÚ
) {

162 ià(
Åc_aùiÚs
[
i
].
id
 == "id_cancel")

163 
‹xt_cŞÜ
 = 
ÿnûl_hight_cŞÜ
;

164 ià(
Åc_aùiÚs
[
i
].
id
 == "id_vendor")

165 
‹xt_cŞÜ
 = 
v’dÜ_hight_cŞÜ
;

167 
‹xt_cŞÜ
 = 
tİic_hight_cŞÜ
;

169 
Åc_aùiÚs
[
i
].
Ïb–
->
	`£t
(
MENU_BORDER
 + (
w
/2),

170 
yoffs
 + (
Åc_aùiÚs
[
i
].
»ù
.
h
/2) ,

171 
JUSTIFY_CENTER
, 
VALIGN_CENTER
,

172 
Åc_aùiÚs
[
i
].
Ïb–
->
	`g‘
(), 
‹xt_cŞÜ
);

174 ià(
Åc_aùiÚs
[
i
].
id
 == "id_cancel")

175 
‹xt_cŞÜ
 = 
ÿnûl_nÜm®_cŞÜ
;

176 ià(
Åc_aùiÚs
[
i
].
id
 == "id_vendor")

177 
‹xt_cŞÜ
 = 
v’dÜ_nÜm®_cŞÜ
;

179 
‹xt_cŞÜ
 = 
tİic_nÜm®_cŞÜ
;

181 
Åc_aùiÚs
[
i
].
Ïb–
->
	`£t
(
MENU_BORDER
 + (
w
/2),

182 
yoffs
 + (
Åc_aùiÚs
[
i
].
»ù
.
h
/2),

183 
JUSTIFY_CENTER
, 
VALIGN_CENTER
,

184 
Åc_aùiÚs
[
i
].
Ïb–
->
	`g‘
(), 
‹xt_cŞÜ
);

189 
Åc_aùiÚs
[
i
].
»ù
.
h
 = 
SEPARATOR_HEIGHT
 + (
ITEM_SPACING
*2);

191 
yoffs
 +ğ
Åc_aùiÚs
[
i
].
»ù
.
h
;

194 
w
 +ğ(
MENU_BORDER
*2);

195 
h
 +ğ(
MENU_BORDER
*2);

198 
aùiÚ_m’u
 = 
	`ü—‹AÍhaSurçû
(
w
,
h
);

199 
Ušt32
 
bg
 = 
	`SDL_M­RGBA
(
aùiÚ_m’u
->
fÜm©
,

200 
background_cŞÜ
.
r
, background_cŞÜ.
g
,

201 
background_cŞÜ
.
b
, 
background_®pha
);

202 
	`SDL_FlReù
(
aùiÚ_m’u
, 
NULL
, 
bg
);

204 
size_t
 
i
=0; i<
Åc_aùiÚs
.
	`size
(); i++) {

205 ià(
Åc_aùiÚs
[
i
].
Ïb–
) {

206 
Åc_aùiÚs
[
i
].
Ïb–
->
	`»nd”
(
aùiÚ_m’u
);

210 
	}
}

212 
	gM’uNPCAùiÚs
::
	$£tNPC
(
NPC
 *
²pc
) {

215 
Åc_aùiÚs
.
	`ş—r
();

218 
is_em±y
 = 
Œue
;

219 
is_£Ëùed
 = 
çl£
;

220 
tİics
 = 0;

221 
fœ¡_dŸlog_node
 = -1;

223 
Åc
 = 
²pc
;

225 ià(
Åc
 =ğ
NULL
)

229 
dŸlog_£Ëùed
 = 
v’dÜ_£Ëùed
 = 
ÿnûl_£Ëùed
 = 
çl£
;

232 
¡d
::
veùÜ
<> 
nodes
;

233 
Åc
->
	`g‘DŸlogNodes
(
nodes
);

234 
i
 = ()
nodes
.
	`size
() - 1; i >= 0; i--) {

236 ià(
fœ¡_dŸlog_node
 =ğ-1 && 
tİics
 == 0)

237 
fœ¡_dŸlog_node
 = 
nodes
[
i
];

239 
¡d
::
¡ršg
 
tİic
 = 
Åc
->
	`g‘DŸlogTİic
(
nodes
[
i
]);

240 ià(
tİic
.
	`Ëngth
() == 0)

243 
¡ršg¡»am
 
ss
;

244 
ss
.
	`¡r
("");

245 
ss
 << "id_dŸlog_" << 
nodes
[
i
];

247 
Åc_aùiÚs
.
	`push_back
(
	`AùiÚ
(
ss
.
	`¡r
(), 
tİic
));

248 
tİics
++;

249 
is_em±y
 = 
çl£
;

252 ià(
fœ¡_dŸlog_node
 !ğ-1 && 
tİics
 == 0)

253 
tİics
 = 1;

256 ià(
Åc
->
v’dÜ
) {

257 ià(
tİics
)

258 
Åc_aùiÚs
.
	`push_back
(
	`AùiÚ
());

259 
Åc_aùiÚs
.
	`push_back
(
	`AùiÚ
("id_v’dÜ", 
v’dÜ_Ïb–
));

260 
is_em±y
 = 
çl£
;

263 
Åc_aùiÚs
.
	`push_back
(
	`AùiÚ
());

264 
Åc_aùiÚs
.
	`push_back
(
	`AùiÚ
("id_ÿnûl", 
ÿnûl_Ïb–
));

268 ià(!
Åc
->
v’dÜ
 && 
tİics
 == 1) {

269 
dŸlog_£Ëùed
 = 
Œue
;

270 
£Ëùed_dŸlog_node
 = 
fœ¡_dŸlog_node
;

271 
is_£Ëùed
 = 
Œue
;

277 ià(
Åc
->
v’dÜ
 && 
tİics
 == 0) {

278 
v’dÜ_£Ëùed
 = 
Œue
;

279 
is_£Ëùed
 = 
Œue
;

283 
	`upd©e
();

285 
	}
}

287 
boŞ
 
	gM’uNPCAùiÚs
::
	$em±y
() {

288  
is_em±y
;

289 
	}
}

291 
boŞ
 
	gM’uNPCAùiÚs
::
	$£ËùiÚ
() {

292  
is_£Ëùed
;

293 
	}
}

295 
	gM’uNPCAùiÚs
::
	$logic
() {

296 ià(!
visibË
) ;

298 ià(
š±
->
lock
[
MAIN1
])

302 
boŞ
 
gÙ_aùiÚ
 = 
çl£
;

303 
size_t
 
i
=0; i<
Åc_aùiÚs
.
	`size
(); i++) {

305 ià(!
	`isW™hš
(
Åc_aùiÚs
[
i
].
»ù
, 
š±
->
mou£
))

308 
gÙ_aùiÚ
 = 
Œue
;

310 ià(
cu¼’t_aùiÚ
 !ğ
i
) {

311 
cu¼’t_aùiÚ
 = 
i
;

312 
	`upd©e
();

319 ià(!
gÙ_aùiÚ
) {

320 
cu¼’t_aùiÚ
 = -1;

325 ià(
š±
->
´essšg
[
MAIN1
]) {

326 
š±
->
lock
[
MAIN1
] = 
Œue
;

329 ià(
Åc_aùiÚs
[
cu¼’t_aùiÚ
].
Ïb–
 =ğ
NULL
)

331 ià(
Åc_aùiÚs
[
cu¼’t_aùiÚ
].
id
 == "id_cancel")

332 
ÿnûl_£Ëùed
 = 
Œue
;

334 ià(
Åc_aùiÚs
[
cu¼’t_aùiÚ
].
id
 == "id_vendor")

335 
v’dÜ_£Ëùed
 = 
Œue
;

337 ià(
Åc_aùiÚs
[
cu¼’t_aùiÚ
].
id
.
	`com·»
("id_dialog_")) {

338 
dŸlog_£Ëùed
 = 
Œue
;

339 
¡d
::
¡ršg¡»am
 
ss
;

340 
¡d
::
¡ršg
 
	`tmp
(10,' ');

341 
ss
.
	`¡r
(
Åc_aùiÚs
[
cu¼’t_aùiÚ
].
id
);

342 
ss
.
	`»ad
(&
tmp
[0], 10);

343 
ss
 >> 
£Ëùed_dŸlog_node
;

346 
is_£Ëùed
 = 
Œue
;

347 
visibË
 = 
çl£
;

350 
	}
}

352 
	gM’uNPCAùiÚs
::
	$»nd”
() {

353 ià(!
visibË
) ;

355 ià(!
aùiÚ_m’u
) ;

357 
	`SDL_Bl™Surçû
(
aùiÚ_m’u
, 
NULL
, 
sü“n
, &
wšdow_¬—
);

359 
	}
}

361 
	gM’uNPCAùiÚs
::~
	$M’uNPCAùiÚs
() {

362 
	`SDL_F»eSurçû
(
aùiÚ_m’u
);

363 
	}
}

	@MenuNPCActions.h

23 #´agm¨
Úû


24 #iâdeà
MENU_NPC_ACTIONS_H


25 
	#MENU_NPC_ACTIONS_H


	)

27 
	~<SDL.h
>

28 
	~<¡ršg
>

29 
	~<veùÜ
>

31 
şass
 
	gAùiÚ
;

32 
şass
 
	gNPC
;

34 şas 
	cM’uNPCAùiÚs
 : 
public
 
M’u
 {

35 
´iv©e
:

36 
¡d
::
	tveùÜ
<
	tAùiÚ
> 
	tAùiÚsCÚš”
;

37 
	mAùiÚsCÚš”
::
	t™”©Ü
 
	tAùiÚsI‹¿tÜ
;

39 
AùiÚsCÚš”
 
	mÅc_aùiÚs
;

40 
NPC
 *
	mÅc
;

42 
boŞ
 
	mis_£Ëùed
;

43 
boŞ
 
	mis_em±y
;

44 
	mfœ¡_dŸlog_node
;

45 
size_t
 
	mcu¼’t_aùiÚ
;

47 
SDL_Surçû
 *
	maùiÚ_m’u
;

48 
SDL_CŞÜ
 
	mtİic_nÜm®_cŞÜ
;

49 
SDL_CŞÜ
 
	mtİic_hight_cŞÜ
;

50 
SDL_CŞÜ
 
	mv’dÜ_nÜm®_cŞÜ
;

51 
SDL_CŞÜ
 
	mv’dÜ_hight_cŞÜ
;

52 
SDL_CŞÜ
 
	mÿnûl_nÜm®_cŞÜ
;

53 
SDL_CŞÜ
 
	mÿnûl_hight_cŞÜ
;

55 
	m¡d
::
¡ršg
 
v’dÜ_Ïb–
;

56 
	m¡d
::
¡ršg
 
ÿnûl_Ïb–
;

58 
SDL_CŞÜ
 
	mbackground_cŞÜ
;

59 
	mbackground_®pha
;

61 
	mpublic
:

62 
M’uNPCAùiÚs
();

63 ~
M’uNPCAùiÚs
();

65 
£tNPC
(
NPC
 *
Åc
);

67 
boŞ
 
em±y
();

68 
logic
();

69 
»nd”
();

70 
upd©e
();

72 
boŞ
 
£ËùiÚ
();

74 
boŞ
 
	mdŸlog_£Ëùed
;

75 
boŞ
 
	mv’dÜ_£Ëùed
;

76 
boŞ
 
	mÿnûl_£Ëùed
;

77 
	m£Ëùed_dŸlog_node
;

	@MenuPowers.cpp

25 
	~"M’u.h
"

26 
	~"FeP¬£r.h
"

27 
	~"M’uPow”s.h
"

28 
	~"Sh¬edResourûs.h
"

29 
	~"Pow”Mªag”.h
"

30 
	~"S‘tšgs.h
"

31 
	~"StBlock.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"Widg‘Lab–.h
"

34 
	~"Widg‘ToŞt.h
"

36 
	~<¡ršg
>

37 
	~<s¡»am
>

38 
	~<io¡»am
>

39 
	~<şim™s
>

41 
usšg
 
Çme¥aû
 
	g¡d
;

42 
M’uPow”s
 *
	gm’uPow”s
 = 
NULL
;

43 
M’uPow”s
 *
	gM’uPow”s
::
	$g‘In¡ªû
() {

44  
m’uPow”s
;

45 
	}
}

48 
	gM’uPow”s
::
	$M’uPow”s
(
StBlock
 *
_¡©s
, 
Pow”Mªag”
 *
_pow”s
, 
SDL_Surçû
 *
_icÚs
) {

50 
id
;

52 
¡©s
 = 
_¡©s
;

53 
pow”s
 = 
_pow”s
;

54 
icÚs
 = 
_icÚs
;

56 
ov”Ïy_di§bËd
 = 
NULL
;

58 
visibË
 = 
çl£
;

60 
pošts_Ëá
 = 0;

61 
bs_couÁ
 = 1;

62 
´es£d
 = 
çl£
;

63 
id
 = 0;

65 
bCÚŒŞ
 = 
NULL
;

67 
şo£Bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

70 
FeP¬£r
 
šfe
;

71 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/powers.txt"))) {

72 
boŞ
 
id_lše
 = 
çl£
;

73 
šfe
.
	`Ãxt
()) {

74 
šfe
.
v®
 = infile.val + ',';

76 ià(
šfe
.
key
 == "tab_title") {

77 
b_t™Ës
.
	`push_back
(
	`—tFœ¡SŒšg
(
šfe
.
v®
, ','));

78 } ià(
šfe
.
key
 == "tab_tree") {

79 
Œ“_image_fes
.
	`push_back
(
	`—tFœ¡SŒšg
(
šfe
.
v®
, ','));

80 } ià(
šfe
.
key
 == "caption") {

81 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

82 } ià(
šfe
.
key
 == "unspent_points") {

83 
un¥’t_pošts
 = 
	`—tLab–Info
(
šfe
.
v®
);

84 } ià(
šfe
.
key
 == "close") {

85 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

86 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

87 } ià(
šfe
.
key
 == "tab_area") {

88 
b_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

89 
b_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

90 
b_¬—
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

91 
b_¬—
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

92 } ià(
šfe
.
key
 == "tabs") {

93 
bs_couÁ
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

94 ià(
bs_couÁ
 < 1)abs_count = 1;

97 ià(
šfe
.
key
 == "id") {

98 
id
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

99 
id_lše
 = 
Œue
;

100 ià(
id
 > 0) {

101 
pow”_ûÎ
.
	`push_back
(
	`Pow”_M’u_C–l
());

102 
¦Ùs
.
	`push_back
(
	`SDL_Reù
());

103 
pow”_ûÎ
.
	`back
().
id
 = id;

105 } 
id_lše
 = 
çl£
;

107 ià(
id
 < 1) {

108 ià(
id_lše
è
	`årštf
(
¡d”r
, "Pow” index insidpow” m’u defš™iÚ ouˆoàbound 1-%d, skpšg\n", 
INT_MAX
);

111 ià(
id_lše
) ;

113 ià(
šfe
.
key
 == "tab") {

114 
pow”_ûÎ
.
	`back
().
b
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

115 } ià(
šfe
.
key
 == "position") {

116 
pow”_ûÎ
.
	`back
().
pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

117 
pow”_ûÎ
.
	`back
().
pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

118 } ià(
šfe
.
key
 == "requires_physoff") {

119 
pow”_ûÎ
.
	`back
().
»quœes_physoff
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

120 } ià(
šfe
.
key
 == "requires_physdef") {

121 
pow”_ûÎ
.
	`back
().
»quœes_physdef
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

122 } ià(
šfe
.
key
 == "requires_mentoff") {

123 
pow”_ûÎ
.
	`back
().
»quœes_m’toff
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

124 } ià(
šfe
.
key
 == "requires_mentdef") {

125 
pow”_ûÎ
.
	`back
().
»quœes_m’tdef
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

126 } ià(
šfe
.
key
 == "requires_defense") {

127 
pow”_ûÎ
.
	`back
().
»quœes_deãn£
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

128 } ià(
šfe
.
key
 == "requires_offense") {

129 
pow”_ûÎ
.
	`back
().
»quœes_ofãn£
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

130 } ià(
šfe
.
key
 == "requires_physical") {

131 
pow”_ûÎ
.
	`back
().
»quœes_physiÿl
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

132 } ià(
šfe
.
key
 == "requires_mental") {

133 
pow”_ûÎ
.
	`back
().
»quœes_m’l
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

134 } ià(
šfe
.
key
 == "requires_point") {

135 ià(
šfe
.
v®
 == "true,")

136 
pow”_ûÎ
.
	`back
().
»quœes_pošt
 = 
Œue
;

137 } ià(
šfe
.
key
 == "requires_level") {

138 
pow”_ûÎ
.
	`back
().
»quœes_Ëv–
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

139 } ià(
šfe
.
key
 == "requires_power") {

140 
pow”_ûÎ
.
	`back
().
»quœes_pow”
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
, ',');

144 
šfe
.
	`şo£
();

145 } 
	`årštf
(
¡d”r
, "Unableo open menus/powers.txt!\n");

147 
	`lßdG¿phics
();

150 if((
bs_couÁ
 =ğ1è&& (!
Œ“_image_fes
.
	`em±y
(è|| !
b_t™Ës
.empty())) {

151 
	`årštf
(
¡d”r
, "menu/powers.txtƒrror: you don't haveabs, butab_tree_image‡ndab_title counts‡re‚ot 0\n");

152 
	`SDL_Qu™
();

153 
	`ex™
(1);

154 } if((
bs_couÁ
 > 1è&& (
Œ“_image_fes
.
	`size
(è!ğ(éabs_couÁ || 
b_t™Ës
.size() != ()tabs_count)) {

155 
	`årštf
(
¡d”r
, "menu/powers.txtƒrror:abs count,ab_tree_image‡ndab_name counts do‚ot match\n");

156 
	`SDL_Qu™
();

157 
	`ex™
(1);

160 
m’uPow”s
 = 
this
;

162 
cŞÜ_bÚus
 = 
fÚt
->
	`g‘CŞÜ
("menu_bonus");

163 
cŞÜ_³ÇÉy
 = 
fÚt
->
	`g‘CŞÜ
("menu_penalty");

164 
	}
}

166 
	gM’uPow”s
::
	$upd©e
() {

167 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

168 
¦Ùs
[
i
].
w
 = slÙs[i].
h
 = 
ICON_SIZE
;

169 
¦Ùs
[
i
].
x
 = 
wšdow_¬—
.x + 
pow”_ûÎ
[i].
pos
.x;

170 
¦Ùs
[
i
].
y
 = 
wšdow_¬—
.y + 
pow”_ûÎ
[i].
pos
.y;

173 
Ïb–_pow”s
.
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("Pow”s"), 
fÚt
->
	`g‘CŞÜ
("m’u_nÜm®"),™Ë.
fÚt_¡yË
);

175 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x+
şo£_pos
.x;

176 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y+
şo£_pos
.y;

178 
¡©_up
.
	`£t
(
wšdow_¬—
.
x
+
un¥’t_pošts
.x, wšdow_¬—.
y
+un¥’t_pošts.y, un¥’t_pošts.
ju¡ify
, un¥’t_pošts.
v®ign
, "", 
fÚt
->
	`g‘CŞÜ
("m’u_bÚus"), un¥’t_pošts.
fÚt_¡yË
);

181 ià(
bs_couÁ
 > 1) {

182 
bCÚŒŞ
 = 
Ãw
 
	`Widg‘TabCÚŒŞ
(
bs_couÁ
);

185 
bCÚŒŞ
->
	`£tMašA»a
(
wšdow_¬—
.
x
+
b_¬—
.x, wšdow_¬—.
y
+b_¬—.y,ab_¬—.
w
,ab_¬—.
h
);

188 
i
=0; i<
bs_couÁ
; i++)

189 
bCÚŒŞ
->
	`£tTabT™Ë
(
i
, 
msg
->
	`g‘
(
b_t™Ës
[i]));

190 
bCÚŒŞ
->
	`upd©eH—d”
();

192 
	}
}

194 
	gM’uPow”s
::
	$lßdG¿phics
() {

196 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/pow”s.²g").
	`c_¡r
());

198 ià(
Œ“_image_fes
.
	`em±y
()) {

199 
Œ“_surf
.
	`push_back
(
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/pow”s_Œ“.²g").
	`c_¡r
()));

201 
i
=0; i<
Œ“_image_fes
.
	`size
(); i++è
Œ“_surf
.
	`push_back
(
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/" +»e_image_fes[i]).
	`c_¡r
()));

204 
pow”s_uÆock
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/pow”s_uÆock.²g").
	`c_¡r
());

205 
ov”Ïy_di§bËd
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/di§bËd.²g").
	`c_¡r
());

207 if(!
background
 || !
pow”s_uÆock
 || !
ov”Ïy_di§bËd
) {

208 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

210 
i
=0; i<
Œ“_surf
.
	`size
(); i++) {

211 if(!
Œ“_surf
[
i
]) {

212 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

217 
SDL_Surçû
 *
ş—nup
;

219 ià(
background
) {

220 
ş—nup
 = 
background
;

221 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

222 
	`SDL_F»eSurçû
(
ş—nup
);

225 
i
=0; i<
Œ“_surf
.
	`size
(); i++) {

226 ià(
Œ“_surf
[
i
]) {

227 
ş—nup
 = 
Œ“_surf
[
i
];

228 
Œ“_surf
[
i
] = 
	`SDL_Di¥ÏyFÜm©AÍha
(tree_surf[i]);

229 
	`SDL_F»eSurçû
(
ş—nup
);

233 ià(
pow”s_uÆock
) {

234 
ş—nup
 = 
pow”s_uÆock
;

235 
pow”s_uÆock
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(powers_unlock);

236 
	`SDL_F»eSurçû
(
ş—nup
);

239 ià(
ov”Ïy_di§bËd
) {

240 
ş—nup
 = 
ov”Ïy_di§bËd
;

241 
ov”Ïy_di§bËd
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(overlay_disabled);

242 
	`SDL_F»eSurçû
(
ş—nup
);

244 
	}
}

249 
	gM’uPow”s
::
	$»nd”IcÚ
(
icÚ_id
, 
x
, 
y
) {

250 
SDL_Reù
 
icÚ_¤c
;

251 
SDL_Reù
 
icÚ_de¡
;

253 
icÚ_de¡
.
x
 = x;

254 
icÚ_de¡
.
y
 = y;

255 
icÚ_¤c
.
w
 = icÚ_¤c.
h
 = 
icÚ_de¡
.w = icÚ_de¡.h = 
ICON_SIZE
;

257 
cŞumns
 = 
icÚs
->
w
 / 
ICON_SIZE
;

258 
icÚ_¤c
.
x
 = (
icÚ_id
 % 
cŞumns
è* 
ICON_SIZE
;

259 
icÚ_¤c
.
y
 = (
icÚ_id
 / 
cŞumns
è* 
ICON_SIZE
;

261 
	`SDL_Bl™Surçû
(
icÚs
, &
icÚ_¤c
, 
sü“n
, &
icÚ_de¡
);

262 
	}
}

264 
	gM’uPow”s
::
	$id_by_pow”Index
(
pow”_šdex
) {

266 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++)

267 ià(
pow”_ûÎ
[
i
].
id
 =ğ
pow”_šdex
)

268  
i
;

271 
	}
}

273 
boŞ
 
	gM’uPow”s
::
	$ba£Requœem’tsM‘
(
pow”_šdex
) {

274 
id
 = 
	`id_by_pow”Index
(
pow”_šdex
);

276 ià((
¡©s
->
	`physoff
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physoff
) &&

277 (
¡©s
->
	`physdef
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physdef
) &&

278 (
¡©s
->
	`m’toff
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’toff
) &&

279 (
¡©s
->
	`m’tdef
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’tdef
) &&

280 (
¡©s
->
	`g‘_deãn£
(è>ğ
pow”_ûÎ
[
id
].
»quœes_deãn£
) &&

281 (
¡©s
->
	`g‘_ofãn£
(è>ğ
pow”_ûÎ
[
id
].
»quœes_ofãn£
) &&

282 (
¡©s
->
	`g‘_physiÿl
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physiÿl
) &&

283 (
¡©s
->
	`g‘_m’l
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’l
) &&

284 (
¡©s
->
Ëv–
 >ğ
pow”_ûÎ
[
id
].
»quœes_Ëv–
) &&

285 
	`»quœem’tsM‘
(
pow”_ûÎ
[
id
].
»quœes_pow”
)è 
Œue
;

286  
çl£
;

287 
	}
}

292 
boŞ
 
	gM’uPow”s
::
	$»quœem’tsM‘
(
pow”_šdex
) {

296 ià(
pow”_šdex
 =ğ0è 
Œue
;

298 
id
 = 
	`id_by_pow”Index
(
pow”_šdex
);

301 ià(
id
 =ğ-1è 
Œue
;

304 ià(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_šdex
è!ğ¡©s->pow”s_li¡.’d()è 
Œue
;

307 ià(
	`ba£Requœem’tsM‘
(
pow”_šdex
è&& !
pow”_ûÎ
[
id
].
»quœes_pošt
è 
Œue
;

308  
çl£
;

309 
	}
}

314 
boŞ
 
	gM’uPow”s
::
	$pow”UÆockabË
(
pow”_šdex
) {

318 ià(
pow”_šdex
 =ğ0è 
Œue
;

321 
id
 = 
	`id_by_pow”Index
(
pow”_šdex
);

324 ià(
id
 =ğ-1è 
Œue
;

327 ià(
	`»quœem’tsM‘
(
pow”_šdex
)è 
çl£
;

330 ià(
	`ba£Requœem’tsM‘
(
pow”_šdex
)è 
Œue
;

331  
çl£
;

332 
	}
}

337 
	gM’uPow”s
::
	$şick
(
Pošt
 
mou£
) {

340 ià(
bs_couÁ
 > 1) {

341 
aùive_b
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

342 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

343 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
è&& (
pow”_ûÎ
[i].
b
 =ğ
aùive_b
)) {

344 ià(
	`»quœem’tsM‘
(
pow”_ûÎ
[
i
].
id
è&& !
pow”s
->pow”s[pow”_ûÎ[i].id].
·ssive
) …ower_cell[i].id;

350 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

351 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

352 ià(
	`»quœem’tsM‘
(
pow”_ûÎ
[
i
].
id
è&& !
pow”s
->pow”s[pow”_ûÎ[i].id].
·ssive
) …ower_cell[i].id;

358 
	}
}

363 
boŞ
 
	gM’uPow”s
::
	$uÆockClick
(
Pošt
 
mou£
) {

366 ià(
bs_couÁ
 > 1) {

367 
aùive_b
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

368 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

369 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)

370 && (
	`pow”UÆockabË
(
pow”_ûÎ
[
i
].
id
)è&& 
pošts_Ëá
 > 0

371 && 
pow”_ûÎ
[
i
].
»quœes_pošt
 &&…ow”_ûÎ[i].
b
 =ğ
aùive_b
) {

372 
¡©s
->
pow”s_li¡
.
	`push_back
(
pow”_ûÎ
[
i
].
id
);

373 
¡©s
->
check_t™Ë
 = 
Œue
;

374  
Œue
;

379 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

380 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)

381 && (
	`pow”UÆockabË
(
pow”_ûÎ
[
i
].
id
))

382 && 
pošts_Ëá
 > 0 && 
pow”_ûÎ
[
i
].
»quœes_pošt
) {

383 
¡©s
->
pow”s_li¡
.
	`push_back
(
pow”_ûÎ
[
i
].
id
);

384 
¡©s
->
check_t™Ë
 = 
Œue
;

385  
Œue
;

389  
çl£
;

390 
	}
}

392 
	gM’uPow”s
::
	$logic
() {

393 
pošts_u£d
 = 0;

394 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

395 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
·ssive
) {

396 ià(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
) != stats->powers_list.end()) {

397 
veùÜ
<>::
™”©Ü
 
™
 = 
	`fšd
(
¡©s
->
pow”s_·ssive
.
	`begš
(), sts->pow”s_·ssive.
	`’d
(), 
pow”_ûÎ
[
i
].
id
);

398 ià(
™
 !ğ
¡©s
->
pow”s_·ssive
.
	`’d
()) {

399 ià(!
	`ba£Requœem’tsM‘
(
pow”_ûÎ
[
i
].
id
è&&…ow”_ûÎ[i].
·ssive_Ú
) {

400 
¡©s
->
pow”s_·ssive
.
	`”a£
(
™
);

401 
¡©s
->
efãùs
.
	`»moveEfãùPassive
(
pow”_ûÎ
[
i
].
id
);

402 
pow”_ûÎ
[
i
].
·ssive_Ú
 = 
çl£
;

403 
¡©s
->
»äesh_¡©s
 = 
Œue
;

405 } ià(
	`ba£Requœem’tsM‘
(
pow”_ûÎ
[
i
].
id
è&& !pow”_ûÎ[i].
·ssive_Ú
) {

406 
¡©s
->
pow”s_·ssive
.
	`push_back
(
pow”_ûÎ
[
i
].
id
);

407 
pow”_ûÎ
[
i
].
·ssive_Ú
 = 
Œue
;

409 ià(
¡©s
->
efãùs
.
Œigg”ed_Ùh”s
)

410 
pow”s
->
	`aùiv©eSšgËPassive
(
¡©s
, 
pow”_ûÎ
[
i
].
id
);

414 ià(
pow”_ûÎ
[
i
].
»quœes_pošt
 &&

415 (
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
) != stats->powers_list.end()))

416 
pošts_u£d
++;

418 
pošts_Ëá
 = (
¡©s
->
Ëv–
 * sts->
pow”_pošts_³r_Ëv–
è- 
pošts_u£d
;

420 ià(!
visibË
) ;

422 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

423 
visibË
 = 
çl£
;

424 
¢d
->
	`¶ay
(
sfx_şo£
);

426 ià(
bs_couÁ
 > 1è
bCÚŒŞ
->
	`logic
();

427 
	}
}

429 
	gM’uPow”s
::
	$»nd”
() {

430 ià(!
visibË
) ;

432 
SDL_Reù
 
¤c
;

433 
SDL_Reù
 
de¡
;

436 
¤c
.
x
 = 0;

437 
¤c
.
y
 = 0;

438 
de¡
.
x
 = 
wšdow_¬—
.x;

439 
de¡
.
y
 = 
wšdow_¬—
.y;

440 
¤c
.
w
 = 
de¡
.w = 320;

441 
¤c
.
h
 = 
de¡
.h = 416;

442 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

444 ià(
bs_couÁ
 > 1) {

445 
bCÚŒŞ
->
	`»nd”
();

446 
aùive_b
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

447 
i
=0; i<
bs_couÁ
; i++) {

448 ià(
aùive_b
 =ğ
i
) {

450 
	`SDL_Bl™Surçû
(
Œ“_surf
[
i
], &
¤c
, 
sü“n
, &
de¡
);

452 
	`»nd”Pow”s
(
aùive_b
);

456 
	`SDL_Bl™Surçû
(
Œ“_surf
[0], &
¤c
, 
sü“n
, &
de¡
);

457 
	`»nd”Pow”s
(0);

461 
şo£Bu‰Ú
->
	`»nd”
();

464 ià(!
t™Ë
.
hidd’
è
Ïb–_pow”s
.
	`»nd”
();

467 ià(!
un¥’t_pošts
.
hidd’
) {

468 
¡ršg¡»am
 
ss
;

470 
ss
.
	`¡r
("");

471 ià(
pošts_Ëá
 !=0) {

472 
ss
 << 
msg
->
	`g‘
("Un¥’ˆskÈpošts:"è<< " " << 
pošts_Ëá
;

474 
¡©_up
.
	`£t
(
ss
.
	`¡r
());

475 
¡©_up
.
	`»nd”
();

477 
	}
}

482 
	gM’uPow”s
::
	$di¥ÏyBud
(
pow”_id
) {

483 
SDL_Reù
 
¤c_uÆock
;

485 
¤c_uÆock
.
x
 = 0;

486 
¤c_uÆock
.
y
 = 0;

487 
¤c_uÆock
.
w
 = 
ICON_SIZE
;

488 
¤c_uÆock
.
h
 = 
ICON_SIZE
;

490 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

491 ià(
pow”_ûÎ
[
i
].
id
 =ğ
pow”_id
) {

492 
	`SDL_Bl™Surçû
(
pow”s_uÆock
, &
¤c_uÆock
, 
sü“n
, &
¦Ùs
[
i
]);

495 
	}
}

500 
ToŞtD©a
 
	gM’uPow”s
::
	$checkToŞt
(
Pošt
 
mou£
) {

502 
ToŞtD©a
 
t
;

504 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

506 ià((
bs_couÁ
 > 1è&& (
bCÚŒŞ
->
	`g‘AùiveTab
(è!ğ
pow”_ûÎ
[
i
].
b
)) ;

508 ià(
	`isW™hš
(
¦Ùs
[
i
], 
mou£
)) {

509 
t
.
	`addText
(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
Çme
);

510 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
·ssive
è
t
.
	`addText
("Passive");

511 
t
.
	`addText
(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
desütiÚ
);

513 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_physiÿl_w—pÚ
)

514 
t
.
	`addText
(
msg
->
	`g‘
("Requires‡…hysical weapon"));

515 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_m’l_w—pÚ
)

516 
t
.
	`addText
(
msg
->
	`g‘
("Requires‡ mental weapon"));

517 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_ofãn£_w—pÚ
)

518 
t
.
	`addText
(
msg
->
	`g‘
("Requires‡n offense weapon"));

522 ià((
pow”_ûÎ
[
i
].
»quœes_physoff
 > 0è&& (
¡©s
->
	`physoff
() <…ower_cell[i].requires_physoff)) {

523 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈOfãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_physoff
), 
cŞÜ_³ÇÉy
);

524 } if((
pow”_ûÎ
[
i
].
»quœes_physoff
 > 0è&& (
¡©s
->
	`physoff
() >=…ower_cell[i].requires_physoff)) {

525 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈOfãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_physoff
));

527 ià((
pow”_ûÎ
[
i
].
»quœes_physdef
 > 0è&& (
¡©s
->
	`physdef
() <…ower_cell[i].requires_physdef)) {

528 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈDeãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_physdef
), 
cŞÜ_³ÇÉy
);

529 } ià((
pow”_ûÎ
[
i
].
»quœes_physdef
 > 0è&& (
¡©s
->
	`physdef
() >=…ower_cell[i].requires_physdef)) {

530 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈDeãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_physdef
));

532 ià((
pow”_ûÎ
[
i
].
»quœes_m’toff
 > 0è&& (
¡©s
->
	`m’toff
() <…ower_cell[i].requires_mentoff)) {

533 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’ÈOfãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_m’toff
), 
cŞÜ_³ÇÉy
);

534 } ià((
pow”_ûÎ
[
i
].
»quœes_m’toff
 > 0è&& (
¡©s
->
	`m’toff
() >=…ower_cell[i].requires_mentoff)) {

535 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’ÈOfãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_m’toff
));

537 ià((
pow”_ûÎ
[
i
].
»quœes_m’tdef
 > 0è&& (
¡©s
->
	`m’tdef
() <…ower_cell[i].requires_mentdef)) {

538 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’ÈDeãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_m’tdef
), 
cŞÜ_³ÇÉy
);

539 } ià((
pow”_ûÎ
[
i
].
»quœes_m’tdef
 > 0è&& (
¡©s
->
	`m’tdef
() >=…ower_cell[i].requires_mentdef)) {

540 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’ÈDeãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_m’tdef
));

542 ià((
pow”_ûÎ
[
i
].
»quœes_ofãn£
 > 0è&& (
¡©s
->
	`g‘_ofãn£
() <…ower_cell[i].requires_offense)) {

543 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Ofãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_ofãn£
), 
cŞÜ_³ÇÉy
);

544 } ià((
pow”_ûÎ
[
i
].
»quœes_ofãn£
 > 0è&& (
¡©s
->
	`g‘_ofãn£
() >=…ower_cell[i].requires_offense)) {

545 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Ofãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_ofãn£
));

547 ià((
pow”_ûÎ
[
i
].
»quœes_deãn£
 > 0è&& (
¡©s
->
	`g‘_deãn£
() <…ower_cell[i].requires_defense)) {

548 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Deãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_deãn£
), 
cŞÜ_³ÇÉy
);

549 } ià((
pow”_ûÎ
[
i
].
»quœes_deãn£
 > 0è&& (
¡©s
->
	`g‘_deãn£
() >=…ower_cell[i].requires_defense)) {

550 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Deãn£ %d", 
pow”_ûÎ
[
i
].
»quœes_deãn£
));

552 ià((
pow”_ûÎ
[
i
].
»quœes_physiÿl
 > 0è&& (
¡©s
->
	`g‘_physiÿl
() <…ower_cell[i].requires_physical)) {

553 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈ%d", 
pow”_ûÎ
[
i
].
»quœes_physiÿl
), 
cŞÜ_³ÇÉy
);

554 } ià((
pow”_ûÎ
[
i
].
»quœes_physiÿl
 > 0è&& (
¡©s
->
	`g‘_physiÿl
() >=…ower_cell[i].requires_physical)) {

555 
t
.
	`addText
(
msg
->
	`g‘
("Requœe PhysiÿÈ%d", 
pow”_ûÎ
[
i
].
»quœes_physiÿl
));

557 ià((
pow”_ûÎ
[
i
].
»quœes_m’l
 > 0è&& (
¡©s
->
	`g‘_m’l
() <…ower_cell[i].requires_mental)) {

558 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’È%d", 
pow”_ûÎ
[
i
].
»quœes_m’l
), 
cŞÜ_³ÇÉy
);

559 } ià((
pow”_ûÎ
[
i
].
»quœes_m’l
 > 0è&& (
¡©s
->
	`g‘_m’l
() >=…ower_cell[i].requires_mental)) {

560 
t
.
	`addText
(
msg
->
	`g‘
("Requœe M’È%d", 
pow”_ûÎ
[
i
].
»quœes_m’l
));

564 ià((
pow”_ûÎ
[
i
].
»quœes_Ëv–
 > 0è&& 
¡©s
->
Ëv–
 <…ower_cell[i].requires_level) {

565 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Lev– %d", 
pow”_ûÎ
[
i
].
»quœes_Ëv–
), 
cŞÜ_³ÇÉy
);

567 ià((
pow”_ûÎ
[
i
].
»quœes_Ëv–
 > 0è&& 
¡©s
->
Ëv–
 >=…ower_cell[i].requires_level) {

568 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Lev– %d", 
pow”_ûÎ
[
i
].
»quœes_Ëv–
));

572 ià((
pow”_ûÎ
[
i
].
»quœes_pošt
) &&

573 !(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
) != stats->powers_list.end()) &&

574 (
pošts_Ëá
 < 1)) {

575 
t
.
	`addText
(
msg
->
	`g‘
("Requœe %d SkÈPošt", 
pow”_ûÎ
[
i
].
»quœes_pošt
), 
cŞÜ_³ÇÉy
);

577 ià((
pow”_ûÎ
[
i
].
»quœes_pošt
) &&

578 !(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
) != stats->powers_list.end()) &&

579 (
pošts_Ëá
 > 0)) {

580 
t
.
	`addText
(
msg
->
	`g‘
("Requœe %d SkÈPošt", 
pow”_ûÎ
[
i
].
»quœes_pošt
));

584 ià(
pow”_ûÎ
[
i
].
»quœes_pošt
 &&

585 !(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
) != stats->powers_list.end()) &&

586 (
pošts_Ëá
 > 0) &&

587 
	`pow”UÆockabË
(
pow”_ûÎ
[
i
].
id
è&& (
pošts_Ëá
 > 0)) {

588 
t
.
	`addText
(
msg
->
	`g‘
("ClickØUÆock"), 
cŞÜ_bÚus
);

593 ià((
pow”_ûÎ
[
i
].
»quœes_pow”
 !ğ0è&& !(
	`»quœem’tsM‘
(power_cell[i].requires_power))) {

594 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Pow”: %s", 
pow”s
->pow”s[
pow”_ûÎ
[
i
].
»quœes_pow”
].
Çme
), 
cŞÜ_³ÇÉy
);

596 ià((
pow”_ûÎ
[
i
].
»quœes_pow”
 !ğ0è&& (
	`»quœem’tsM‘
(power_cell[i].requires_power))) {

597 
t
.
	`addText
(
msg
->
	`g‘
("Requœe Pow”: %s", 
pow”s
->pow”s[
pow”_ûÎ
[
i
].
»quœes_pow”
].
Çme
));

601 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_mp
 > 0) {

602 
t
.
	`addText
(
msg
->
	`g‘
("Co¡ %d MP", 
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_mp
));

605 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_hp
 > 0) {

606 
t
.
	`addText
(
msg
->
	`g‘
("Co¡ %d HP", 
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
»quœes_hp
));

609 ià(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
coŞdown
 > 0) {

610 
t
.
	`addText
(
msg
->
	`g‘
("CoŞdown: %d secÚds", 
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
coŞdown
 / 
MAX_FRAMES_PER_SEC
));

613  
t
;

617  
t
;

618 
	}
}

620 
	gM’uPow”s
::~
	$M’uPow”s
() {

621 
	`SDL_F»eSurçû
(
background
);

622 
i
=0; i<
Œ“_surf
.
	`size
(); i++è
	`SDL_F»eSurçû
(tree_surf[i]);

623 
	`SDL_F»eSurçû
(
pow”s_uÆock
);

624 
	`SDL_F»eSurçû
(
ov”Ïy_di§bËd
);

626 
d–‘e
 
şo£Bu‰Ú
;

627 ià(
bs_couÁ
 > 1è
d–‘e
 
bCÚŒŞ
;

628 
m’uPow”s
 = 
NULL
;

629 
	}
}

634 
boŞ
 
	gM’uPow”s
::
	$m“tsU§geSts
(
pow”id
) {

637 
id
 = 
	`id_by_pow”Index
(
pow”id
);

639 ià(
id
 =ğ-1è 
Œue
;

641  
¡©s
->
	`physoff
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physoff


642 && 
¡©s
->
	`physdef
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physdef


643 && 
¡©s
->
	`m’toff
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’toff


644 && 
¡©s
->
	`m’tdef
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’tdef


645 && 
¡©s
->
	`g‘_deãn£
(è>ğ
pow”_ûÎ
[
id
].
»quœes_deãn£


646 && 
¡©s
->
	`g‘_ofãn£
(è>ğ
pow”_ûÎ
[
id
].
»quœes_ofãn£


647 && 
¡©s
->
	`g‘_m’l
(è>ğ
pow”_ûÎ
[
id
].
»quœes_m’l


648 && 
¡©s
->
	`g‘_physiÿl
(è>ğ
pow”_ûÎ
[
id
].
»quœes_physiÿl
;

649 
	}
}

651 
	gM’uPow”s
::
	$»nd”Pow”s
(
b_num
) {

653 
SDL_Reù
 
di§bËd_¤c
;

654 
di§bËd_¤c
.
x
 = di§bËd_¤c.
y
 = 0;

655 
di§bËd_¤c
.
w
 = di§bËd_¤c.
h
 = 
ICON_SIZE
;

657 
i
=0; i<
pow”_ûÎ
.
	`size
(); i++) {

658 
boŞ
 
pow”_š_veùÜ
 = 
çl£
;

661 ià(
pow”_ûÎ
[
i
].
b
 !ğ
b_num
) ;

663 ià(
	`fšd
(
¡©s
->
pow”s_li¡
.
	`begš
(), sts->pow”s_li¡.
	`’d
(), 
pow”_ûÎ
[
i
].
id
è!ğ¡©s->pow”s_li¡.’d()è
pow”_š_veùÜ
 = 
Œue
;

665 
	`»nd”IcÚ
(
pow”s
->pow”s[
pow”_ûÎ
[
i
].
id
].
icÚ
, 
wšdow_¬—
.
x
 +…ow”_ûÎ[i].
pos
.x, wšdow_¬—.
y
 +…ower_cell[i].pos.y);

668 ià(
pow”_š_veùÜ
 || 
	`»quœem’tsM‘
(
pow”_ûÎ
[
i
].
id
)) {

669 
	`di¥ÏyBud
(
pow”_ûÎ
[
i
].
id
);

672 ià(
ov”Ïy_di§bËd
 !ğ
NULL
) {

673 
	`SDL_Bl™Surçû
(
ov”Ïy_di§bËd
, &
di§bËd_¤c
, 
sü“n
, &
¦Ùs
[
i
]);

677 
	}
}

	@MenuPowers.h

25 #´agm¨
Úû


26 #iâdeà
MENU_POWERS_H


27 
	#MENU_POWERS_H


	)

29 
	~"M’u.h
"

30 
	~"Uts.h
"

31 
	~"Widg‘Bu‰Ú.h
"

32 
	~"Widg‘Lab–.h
"

33 
	~"Widg‘TabCÚŒŞ.h
"

35 
	~<SDL.h
>

36 
	~<SDL_image.h
>

38 
	~<veùÜ
>

40 
şass
 
	gPow”Mªag”
;

41 
şass
 
	gStBlock
;

42 
şass
 
	gToŞtD©a
;

44 şas 
	cPow”_M’u_C–l
 {

45 
	mpublic
:

46 
id
;

47 
	mb
;

48 
Pošt
 
	mpos
;

49 
	m»quœes_physoff
;

50 
	m»quœes_physdef
;

51 
	m»quœes_m’toff
;

52 
	m»quœes_m’tdef
;

53 
	m»quœes_deãn£
;

54 
	m»quœes_ofãn£
;

55 
	m»quœes_physiÿl
;

56 
	m»quœes_m’l
;

57 
	m»quœes_Ëv–
;

58 
	m»quœes_pow”
;

59 
boŞ
 
	m»quœes_pošt
;

60 
boŞ
 
	m·ssive_Ú
;

61 
	$Pow”_M’u_C–l
() {

62 
id
 = -1;

63 
b
 = 0;

64 
pos
.
x
 = 0;

65 
pos
.
y
 = 0;

66 
»quœes_m’tdef
 = 0;

67 
»quœes_m’toff
 = 0;

68 
»quœes_physoff
 = 0;

69 
»quœes_physdef
 = 0;

70 
»quœes_deãn£
 = 0;

71 
»quœes_ofãn£
 = 0;

72 
»quœes_physiÿl
 = 0;

73 
»quœes_m’l
 = 0;

74 
»quœes_Ëv–
 = 0;

75 
»quœes_pow”
 = 0;

76 
»quœes_pošt
 = 
çl£
;

77 
·ssive_Ú
 = 
çl£
;

79 
	}
};

81 şas 
	cM’uPow”s
 : 
public
 
M’u
 {

82 
´iv©e
:

83 
StBlock
 *
¡©s
;

84 
Pow”Mªag”
 *
	mpow”s
;

85 
	m¡d
::
veùÜ
<
Pow”_M’u_C–l
> 
pow”_ûÎ
;

87 
SDL_Surçû
 *
	mbackground
;

88 
SDL_Surçû
 *
	micÚs
;

89 
	m¡d
::
veùÜ
<
SDL_Surçû
*> 
Œ“_surf
;

90 
SDL_Surçû
 *
	mpow”s_uÆock
;

91 
SDL_Surçû
 *
	mov”Ïy_di§bËd
;

92 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

93 
boŞ
 
	m´es£d
;

95 
Lab–Info
 
	mt™Ë
;

96 
Lab–Info
 
	mun¥’t_pošts
;

97 
Pošt
 
	mşo£_pos
;

98 
SDL_Reù
 
	mb_¬—
;

100 
	mpošts_Ëá
;

101 
	mbs_couÁ
;

102 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
b_t™Ës
;

103 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
Œ“_image_fes
;

105 
Widg‘Lab–
 
	mÏb–_pow”s
;

106 
Widg‘Lab–
 
	m¡©_up
;

107 
Widg‘TabCÚŒŞ
 *
	mbCÚŒŞ
;

109 
lßdG¿phics
();

110 
di¥ÏyBud
(
pow”_id
);

111 
»nd”IcÚ
(
icÚ_id
, 
x
, 
y
);

112 
boŞ
 
pow”UÆockabË
(
pow”_šdex
);

113 
»nd”Pow”s
(
b_num
);

115 
SDL_CŞÜ
 
	mcŞÜ_bÚus
;

116 
SDL_CŞÜ
 
	mcŞÜ_³ÇÉy
;

118 
id_by_pow”Index
(
pow”_šdex
);

120 
	mpublic
:

121 
M’uPow”s
 *
g‘In¡ªû
();

122 
M’uPow”s
(
StBlock
 *
_¡©s
, 
Pow”Mªag”
 *
_pow”s
, 
SDL_Surçû
 *
_icÚs
);

123 ~
M’uPow”s
();

124 
upd©e
();

125 
logic
();

126 
»nd”
();

127 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

128 
boŞ
 
ba£Requœem’tsM‘
(
pow”_šdex
);

129 
boŞ
 
»quœem’tsM‘
(
pow”_šdex
);

130 
şick
(
Pošt
 
mou£
);

131 
boŞ
 
uÆockClick
(
Pošt
 
mou£
);

132 
boŞ
 
m“tsU§geSts
(
pow”id
);

133 
	$g‘Un¥’t
(è{  
pošts_Ëá
; }

135 
¡d
::
veùÜ
<
SDL_Reù
> 
¦Ùs
;

137 
	}
};

138 
M’uPow”s
 *
m’uPow”s
;

	@MenuStash.cpp

23 
	~"FeP¬£r.h
"

24 
	~"M’u.h
"

25 
	~"M’uSsh.h
"

26 
	~"S‘tšgs.h
"

27 
	~"Sh¬edResourûs.h
"

28 
	~"UtsP¬sšg.h
"

29 
	~"Widg‘Bu‰Ú.h
"

31 
usšg
 
Çme¥aû
 
	g¡d
;

34 
	gM’uSsh
::
	$M’uSsh
(
I‹mMªag”
 *
_™ems
, 
StBlock
 *
_¡©s
)

35 : 
	`M’u
()

36 , 
	`™ems
(
_™ems
)

37 , 
	`¡©s
(
_¡©s
)

38 , 
	`şo£Bu‰Ú
(
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png")))

39 , 
	`cŞÜ_nÜm®
(
fÚt
->
	`g‘CŞÜ
("menu_normal"))

40 , 
	`¡ock
()

41 , 
	$upd©ed
(
çl£
)

44 
	`lßdG¿phics
();

47 
FeP¬£r
 
šfe
;

48 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/stash.txt"))) {

49 
šfe
.
	`Ãxt
()) {

50 
šfe
.
v®
 = infile.val + ',';

52 ià(
šfe
.
key
 == "close") {

53 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

54 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

55 } ià(
šfe
.
key
 == "slots_area") {

56 
¦Ùs_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

57 
¦Ùs_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

58 } ià(
šfe
.
key
 == "stash_cols"){

59 
¦Ùs_cŞs
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

60 } ià(
šfe
.
key
 == "stash_rows"){

61 
¦Ùs_rows
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

62 } ià(
šfe
.
key
 == "caption"){

63 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

66 
šfe
.
	`şo£
();

67 } 
	`årštf
(
¡d”r
, "Unableo open menus/stash.txt!\n");

69 
STASH_SLOTS
 = 
¦Ùs_cŞs
 * 
¦Ùs_rows
;

70 
	}
}

72 
	gM’uSsh
::
	$lßdG¿phics
() {

73 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/¡ash.²g").
	`c_¡r
());

74 ià(!
background
) {

75 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

78 
SDL_Surçû
 *
ş—nup
 = 
background
;

79 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

80 
	`SDL_F»eSurçû
(
ş—nup
);

82 
	}
}

84 
	gM’uSsh
::
	$upd©e
() {

85 
¦Ùs_¬—
.
x
 +ğ
wšdow_¬—
.x;

86 
¦Ùs_¬—
.
y
 +ğ
wšdow_¬—
.y;

87 
¦Ùs_¬—
.
w
 = 
¦Ùs_cŞs
*
ICON_SIZE
;

88 
¦Ùs_¬—
.
h
 = 
¦Ùs_rows
*
ICON_SIZE
;

90 
¡ock
.
	`š™
Ğ
STASH_SLOTS
, 
™ems
, 
¦Ùs_¬—
, 
ICON_SIZE
, 
¦Ùs_cŞs
);

92 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x+
şo£_pos
.x;

93 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y+
şo£_pos
.y;

94 
	}
}

96 
	gM’uSsh
::
	$logic
() {

97 ià(!
visibË
) ;

99 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

100 
visibË
 = 
çl£
;

101 
¢d
->
	`¶ay
(
sfx_şo£
);

103 
	}
}

105 
	gM’uSsh
::
	$»nd”
() {

106 ià(!
visibË
) ;

107 
SDL_Reù
 
¤c
;

108 
SDL_Reù
 
de¡
;

111 
¤c
.
x
 = 0;

112 
¤c
.
y
 = 0;

113 
de¡
.
x
 = 
wšdow_¬—
.x;

114 
de¡
.
y
 = 
wšdow_¬—
.y;

115 
¤c
.
w
 = 
de¡
.w = 
wšdow_¬—
.w;

116 
¤c
.
h
 = 
de¡
.h = 
wšdow_¬—
.h;

117 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

120 
şo£Bu‰Ú
->
	`»nd”
();

123 ià(!
t™Ë
.
hidd’
) {

124 
Widg‘Lab–
 
Ïb–
;

125 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("Sh¬ed Ssh"), 
cŞÜ_nÜm®
,™Ë.
fÚt_¡yË
);

126 
Ïb–
.
	`»nd”
();

130 
¡ock
.
	`»nd”
();

131 
	}
}

136 
	gM’uSsh
::
	$drİ
(
Pošt
 
mou£
, 
I‹mSck
 
¡ack
) {

137 
¦Ù
;

138 
d¿g_´ev_¦Ù
;

140 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

142 
¦Ù
 = 
¡ock
.
	`¦ÙOv”
(
mou£
);

143 
d¿g_´ev_¦Ù
 = 
¡ock
.drag_prev_slot;

145 ià(
¦Ù
 !ğ
d¿g_´ev_¦Ù
) {

146 ià(
¡ock
[
¦Ù
].
™em
 =ğ
¡ack
.item) {

148 
	`add
(
¡ack
, 
¦Ù
);

150 ià(
¡ock
[
¦Ù
].
™em
 == 0) {

152 
¡ock
[
¦Ù
] = 
¡ack
;

154 ià(
¡ock
[
d¿g_´ev_¦Ù
].
™em
 == 0) {

156 
	`™emR‘uº
(
¡ock
[
¦Ù
]);

157 
¡ock
[
¦Ù
] = 
¡ack
;

159 
	`™emR‘uº
Ğ
¡ack
);

163 
	`™emR‘uº
(
¡ack
);

166 
	}
}

168 
	gM’uSsh
::
	$add
(
I‹mSck
 
¡ack
, 
¦Ù
) {

170 ià(
¡ack
.
™em
 != 0) {

171 
max_quªt™y
 = 
™ems
->™ems[
¡ack
.
™em
].max_quantity;

172 ià(
¦Ù
 > -1 && 
¡ock
[¦Ù].
™em
 !ğ0 && stock[¦Ù].™em !ğ
¡ack
.item) {

174 
¦Ù
 = -1;

177 
i
 = 0;

178 
max_quªt™y
 > 1 && 
¦Ù
 =ğ-1 && 
i
 < 
STASH_SLOTS
) {

179 ià(
¡ock
[
i
].
™em
 =ğ
¡ack
.™em && stock[i].
quªt™y
 < 
max_quªt™y
) {

180 
¦Ù
 = 
i
;

182 
i
++;

185 
i
 = 0;

186 
¦Ù
 =ğ-1 && 
i
 < 
STASH_SLOTS
) {

187 ià(
¡ock
[
i
].
™em
 == 0) {

188 
¦Ù
 = 
i
;

190 
i
++;

192 ià(
¦Ù
 != -1) {

194 
quªt™y_added
 = 
	`mš
Ğ
¡ack
.
quªt™y
, 
max_quªt™y
 - 
¡ock
[
¦Ù
].quantity);

195 
¡ock
[
¦Ù
].
™em
 = 
¡ack
.item;

196 
¡ock
[
¦Ù
].
quªt™y
 +ğ
quªt™y_added
;

197 
¡ack
.
quªt™y
 -ğ
quªt™y_added
;

199 ià(
¡ack
.
quªt™y
 > 0) {

200 
	`add
Ğ
¡ack
);

207 
	}
}

213 
I‹mSck
 
	gM’uSsh
::
	$şick
(
IÅutS‹
 * 
šput
) {

214 
I‹mSck
 
¡ack
 = 
¡ock
.
	`şick
(
šput
);

215  
¡ack
;

216 
	}
}

221 
	gM’uSsh
::
	$™emR‘uº
(
I‹mSck
 
¡ack
) {

222 
¡ock
.
	`™emR‘uº
(
¡ack
);

223 
	}
}

225 
	gM’uSsh
::
	$add
(
I‹mSck
 
¡ack
) {

226 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

228 
¡ock
.
	`add
(
¡ack
);

229 
	}
}

231 
ToŞtD©a
 
	gM’uSsh
::
	$checkToŞt
(
Pošt
 
mou£
) {

232  
¡ock
.
	`checkToŞt
Ğ
mou£
, 
¡©s
, 
PLAYER_INV
);

233 
	}
}

235 
boŞ
 
	gM’uSsh
::
	$fuÎ
(
™em
) {

236  
¡ock
.
	`fuÎ
(
™em
);

237 
	}
}

239 
	gM’uSsh
::~
	$M’uSsh
() {

240 
	`SDL_F»eSurçû
(
background
);

241 
d–‘e
 
şo£Bu‰Ú
;

242 
	}
}

	@MenuStash.h

23 #´agm¨
Úû


24 #iâdeà
MENU_STASH_H


25 
	#MENU_STASH_H


	)

27 
	~"M’uI‹mStÜage.h
"

28 
	~"Widg‘Lab–.h
"

30 
	~<SDL.h
>

31 
	~<SDL_image.h
>

33 
	~<¡ršg
>

35 
şass
 
	gIÅutS‹
;

36 
şass
 
	gNPC
;

37 
şass
 
	gStBlock
;

38 
şass
 
	gWidg‘Bu‰Ú
;

40 şas 
	cM’uSsh
 : 
public
 
M’u
 {

41 
´iv©e
:

42 
I‹mMªag”
 *
™ems
;

43 
StBlock
 *
	m¡©s
;

44 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

46 
lßdG¿phics
();

47 
SDL_Surçû
 *
	mbackground
;

49 
	mSTASH_SLOTS
;

52 
Pošt
 
	mşo£_pos
;

53 
Lab–Info
 
	mt™Ë
;

54 
	m¦Ùs_cŞs
;

55 
	m¦Ùs_rows
;

56 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

58 
	mpublic
:

59 
M’uSsh
(
I‹mMªag”
 *
™ems
, 
StBlock
 *
¡©s
);

60 ~
M’uSsh
();

62 
upd©e
();

63 
logic
();

64 
»nd”
();

65 
I‹mSck
 
şick
(
IÅutS‹
 * 
šput
);

66 
™emR‘uº
(
I‹mSck
 
¡ack
);

67 
add
(
I‹mSck
 
¡ack
);

68 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

69 
boŞ
 
fuÎ
(
™em
);

70 
drİ
(
Pošt
 
mou£
, 
I‹mSck
 
¡ack
);

71 
add
(
I‹mSck
 
¡ack
, 
¦Ù
);

73 
SDL_Reù
 
	m¦Ùs_¬—
;

74 
M’uI‹mStÜage
 
	m¡ock
;

75 
boŞ
 
	mupd©ed
;

	@MenuStatBar.cpp

25 
	~"M’u.h
"

26 
	~"M’uStB¬.h
"

27 
	~"ModMªag”.h
"

28 
	~"Sh¬edResourûs.h
"

29 
	~"StBlock.h
"

30 
	~"Widg‘Lab–.h
"

31 
	~"FeP¬£r.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"UtsFeSy¡em.h
"

35 
	~<¡ršg
>

36 
	~<s¡»am
>

39 
usšg
 
Çme¥aû
 
	g¡d
;

41 
	gM’uStB¬
::
M’uStB¬
(
¡d
::
¡ršg
 
ty³
) {

43 
Ïb–
 = 
Ãw
 
Widg‘Lab–
();

45 
	gÜ›Á©iÚ
 = 0;

46 
	gcu¡om_‹xt_pos
 = 
çl£
;

47 
	gcu¡om_¡ršg
 = "";

49 
	g¡©_cur
 = 0;

50 
	g¡©_max
 = 0;

53 
FeP¬£r
 
	gšfe
;

54 if(
	gšfe
.
İ’
(
mods
->
loÿ‹
("m’us/"+
ty³
+".txt"))) {

55 
	gšfe
.
Ãxt
()) {

56 
	gšfe
.
	gv®
 = 
šfe
.
v®
 + ',';

58 if(
	gšfe
.
	gkey
 == "pos") {

59 
b¬_pos
.
x
 = 
—tFœ¡IÁ
(
šfe
.
v®
,',');

60 
	gb¬_pos
.
	gy
 = 
—tFœ¡IÁ
(
šfe
.
v®
,',');

61 
	gb¬_pos
.
	gw
 = 
—tFœ¡IÁ
(
šfe
.
v®
,',');

62 
	gb¬_pos
.
	gh
 = 
—tFœ¡IÁ
(
šfe
.
v®
,',');

63 } if(
	gšfe
.
	gkey
 == "text_pos") {

64 
cu¡om_‹xt_pos
 = 
Œue
;

65 
	g‹xt_pos
 = 
—tLab–Info
(
šfe
.
v®
);

66 } if(
	gšfe
.
	gkey
 == "orientation") {

67 
Ü›Á
 = 
—tFœ¡IÁ
(
šfe
.
v®
,',');

68 ià(
	gÜ›Á
 == 1)

69 
Ü›Á©iÚ
 = 
Œue
;

71 
	gÜ›Á©iÚ
 = 
çl£
;

74 
	gšfe
.
şo£
();

75 } 
årštf
(
¡d”r
, "UÇbËØİ’ m’us/%s.txt!\n", 
ty³
.
c_¡r
());

77 
lßdG¿phics
(
ty³
);

79 
	gcŞÜ_nÜm®
 = 
fÚt
->
g‘CŞÜ
("menu_normal");

82 
	gM’uStB¬
::
lßdG¿phics
(
¡d
::
¡ršg
 
ty³
) {

84 
background
 = 
IMG_Lßd
(
mods
->
loÿ‹
("images/m’us/b¬_"+
ty³
+"_background.²g").
c_¡r
());

85 
	gb¬
 = 
IMG_Lßd
(
mods
->
loÿ‹
("images/m’us/b¬_"+
ty³
+".²g").
c_¡r
());

87 if(!
	gbackground
 || !
	gb¬
) {

88 
årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
IMG_G‘E¼Ü
());

92 
SDL_Surçû
 *
	gş—nup
;

94 ià(
	gbackground
) {

95 
	gş—nup
 = 
background
;

96 
	gbackground
 = 
SDL_Di¥ÏyFÜm©AÍha
(
background
);

97 
SDL_F»eSurçû
(
ş—nup
);

100 ià(
	gb¬
) {

101 
	gş—nup
 = 
b¬
;

102 
	gb¬
 = 
SDL_Di¥ÏyFÜm©AÍha
(
b¬
);

103 
SDL_F»eSurçû
(
ş—nup
);

107 
	gM’uStB¬
::
upd©e
(
_¡©_cur
, 
_¡©_max
, 
Pošt
 
_mou£
, 
¡d
::
¡ršg
 
_cu¡om_¡ršg
) {

108 ià(
_cu¡om_¡ršg
 !ğ""è
cu¡om_¡ršg
 = _custom_string;

109 
	gmou£
 = 
_mou£
;

110 
	g¡©_cur
 = 
_¡©_cur
;

111 
	g¡©_max
 = 
_¡©_max
;

114 
	gM’uStB¬
::
	$»nd”
() {

115 
SDL_Reù
 
¤c
;

116 
SDL_Reù
 
de¡
;

117 
b¬_Ëngth
;

120 
SDL_Reù
 
b¬_de¡
 = 
b¬_pos
;

121 
b¬_de¡
.
x
 = 
b¬_pos
.x+
wšdow_¬—
.x;

122 
b¬_de¡
.
y
 = 
b¬_pos
.y+
wšdow_¬—
.y;

125 
de¡
.
x
 = 
b¬_de¡
.x;

126 
de¡
.
y
 = 
b¬_de¡
.y;

127 
¤c
.
x
 = 0;

128 
¤c
.
y
 = 0;

129 
¤c
.
w
 = 
b¬_pos
.w;

130 
¤c
.
h
 = 
b¬_pos
.h;

131 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

134 ià(
Ü›Á©iÚ
 == 0) {

135 ià(
¡©_max
 =ğ0è
b¬_Ëngth
 = 0;

136 
b¬_Ëngth
 = (
¡©_cur
 * 
b¬_pos
.
w
è/ 
¡©_max
;

137 
de¡
.
x
 = 
b¬_de¡
.x;

138 
de¡
.
y
 = 
b¬_de¡
.y;

139 
¤c
.
x
 = src.
y
 = 0;

140 
¤c
.
w
 = 
b¬_Ëngth
;

141 
¤c
.
h
 = 
b¬_pos
.h;

142 
	`SDL_Bl™Surçû
(
b¬
, &
¤c
, 
sü“n
, &
de¡
);

143 } ià(
Ü›Á©iÚ
 == 1) {

144 ià(
¡©_max
 =ğ0è
b¬_Ëngth
 = 0;

145 
b¬_Ëngth
 = (
¡©_cur
 * 
b¬_pos
.
h
è/ 
¡©_max
;

146 
¤c
.
x
 = 0;

147 
¤c
.
y
 = 
b¬_pos
.
h
-
b¬_Ëngth
;

148 
¤c
.
w
 = 
b¬_pos
.w;

149 
¤c
.
h
 = 
b¬_Ëngth
;

150 
de¡
.
x
 = 
b¬_de¡
.x;

151 
de¡
.
y
 = 
b¬_de¡
.y+
¤c
.y;

152 
	`SDL_Bl™Surçû
(
b¬
, &
¤c
, 
sü“n
, &
de¡
);

156 ià(!
‹xt_pos
.
hidd’
) {

157 ià(
cu¡om_‹xt_pos
)

158 
Ïb–
->
	`£t
(
b¬_de¡
.
x
+
‹xt_pos
.x, b¬_de¡.
y
+‹xt_pos.y,ext_pos.
ju¡ify
,ext_pos.
v®ign
, "", 
cŞÜ_nÜm®
,ext_pos.
fÚt_¡yË
);

160 
Ïb–
->
	`£t
(
b¬_de¡
.
x
+
b¬_pos
.
w
/2, b¬_de¡.
y
+b¬_pos.
h
/2, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, "", 
cŞÜ_nÜm®
);

162 ià(
	`isW™hš
(
b¬_de¡
,
mou£
)) {

163 
¡ršg¡»am
 
ss
;

164 ià(
cu¡om_¡ršg
 != "")

165 
ss
 << 
cu¡om_¡ršg
;

167 
ss
 << 
¡©_cur
 << "/" << 
¡©_max
;

168 
Ïb–
->
	`£t
(
ss
.
	`¡r
());

169 
Ïb–
->
	`»nd”
();

172 
	}
}

174 
	gM’uStB¬
::~
	$M’uStB¬
() {

175 
	`SDL_F»eSurçû
(
background
);

176 
	`SDL_F»eSurçû
(
b¬
);

177 
d–‘e
 
Ïb–
;

178 
	}
}

	@MenuStatBar.h

26 #´agm¨
Úû


27 #iâdeà
MENU_STATBAR_H


28 
	#MENU_STATBAR_H


	)

30 
	~"Uts.h
"

31 
	~"Widg‘Lab–.h
"

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

36 
şass
 
	gWidg‘Lab–
;

38 şas 
	cM’uStB¬
 : 
public
 
M’u
 {

39 
´iv©e
:

40 
SDL_Surçû
 *
background
;

41 
SDL_Surçû
 *
	mb¬
;

42 
Widg‘Lab–
 *
	mÏb–
;

43 
	m¡©_cur
;

44 
	m¡©_max
;

45 
Pošt
 
	mmou£
;

46 
SDL_Reù
 
	mb¬_pos
;

47 
Lab–Info
 
	m‹xt_pos
;

48 
boŞ
 
	mÜ›Á©iÚ
;

49 
boŞ
 
	mcu¡om_‹xt_pos
;

50 
	m¡d
::
¡ršg
 
cu¡om_¡ršg
;

51 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

53 
	mpublic
:

54 
M’uStB¬
(
¡d
::
¡ršg
 
ty³
);

55 ~
M’uStB¬
();

56 
lßdG¿phics
(
¡d
::
¡ršg
 
ty³
);

57 
upd©e
(
_¡©_cur
, 
_¡©_max
, 
Pošt
 
_mou£
, 
¡d
::
¡ršg
 
_cu¡om_¡ršg
);

58 
»nd”
();

	@MenuTalker.cpp

24 
	~"FeP¬£r.h
"

25 
	~"M’u.h
"

26 
	~"M’uT®k”.h
"

28 
	~"NPC.h
"

29 
	~"Widg‘Bu‰Ú.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"S‘tšgs.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"M’uMªag”.h
"

34 
	~"M’uNPCAùiÚs.h
"

36 
usšg
 
Çme¥aû
 
	g¡d
;

39 
	gM’uT®k”
::
	$M’uT®k”
(
M’uMªag”
 *
_m’u
, 
Cam·ignMªag”
 *
_ÿmp
) {

40 
ÿmp
 = 
_ÿmp
;

41 
m’u
 = 
_m’u
;

42 
Åc
 = 
NULL
;

43 
background
 = 
NULL
;

44 
pÜŒa™
 = 
NULL
;

45 
msg_bufãr
 = 
NULL
;

47 
advªûBu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/right.png"));

49 
şo£Bu‰Ú
 = 
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png"));

51 
visibË
 = 
çl£
;

52 
v’dÜ_visibË
 = 
çl£
;

55 
dŸlog_node
 = 0;

56 
ev’t_cursÜ
 = 0;

59 
fÚt_who
 = 
fÚt_dŸlog
 = "font_regular";

61 
	`lßdG¿phics
();

64 
FeP¬£r
 
šfe
;

65 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/talker.txt"))) {

66 
šfe
.
	`Ãxt
()) {

67 
šfe
.
v®
 = infile.val + ',';

69 if(
šfe
.
key
 == "close") {

70 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

71 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

72 } if(
šfe
.
key
 == "advance") {

73 
advªû_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

74 
advªû_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

75 } ià(
šfe
.
key
 == "dialogbox"){

76 
dŸlog_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

77 
dŸlog_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

78 
dŸlog_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

79 
dŸlog_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

80 } ià(
šfe
.
key
 == "dialogtext"){

81 
‹xt_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

82 
‹xt_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

83 
‹xt_pos
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

84 
‹xt_pos
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

85 } ià(
šfe
.
key
 == "text_offset"){

86 
‹xt_off£t
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

87 
‹xt_off£t
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

88 } ià(
šfe
.
key
 == "portrait_he"){

89 
pÜŒa™_he
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

90 
pÜŒa™_he
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

91 
pÜŒa™_he
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

92 
pÜŒa™_he
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

93 } ià(
šfe
.
key
 == "portrait_you"){

94 
pÜŒa™_you
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

95 
pÜŒa™_you
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

96 
pÜŒa™_you
.
w
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

97 
pÜŒa™_you
.
h
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

98 } ià(
šfe
.
key
 == "font_who") {

99 
fÚt_who
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

100 } ià(
šfe
.
key
 == "font_dialog") {

101 
fÚt_dŸlog
 = 
	`—tFœ¡SŒšg
(
šfe
.
v®
,',');

104 
šfe
.
	`şo£
();

105 } 
	`årštf
(
¡d”r
, "Unableo open menus/talker.txt!\n");

107 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("menu_normal");

108 
	}
}

110 
	gM’uT®k”
::
	$lßdG¿phics
() {

112 
	`SDL_F»eSurçû
(
background
);

113 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/dŸlog_box.²g").
	`c_¡r
());

114 if(!
background
) {

115 
	`årštf
(
¡d”r
, "Couldn'ˆlßd imagdŸlog_box.²g: %s\n", 
	`IMG_G‘E¼Ü
());

118 
SDL_Surçû
 *
ş—nup
 = 
background
;

119 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

120 
	`SDL_F»eSurçû
(
ş—nup
);

122 
	}
}

124 
	gM’uT®k”
::
	$choo£DŸlogNode
(
»que¡_dŸlog_node
) {

125 
ev’t_cursÜ
 = 0;

127 if(
»que¡_dŸlog_node
 == -1)

130 
dŸlog_node
 = 
»que¡_dŸlog_node
;

131 
Åc
->
	`´oûssDŸlog
(
dŸlog_node
, 
ev’t_cursÜ
);

132 
	`ü—‹Bufãr
();

133 
	}
}

135 
	gM’uT®k”
::
	$upd©e
() {

136 
advªûBu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x + 
advªû_pos
.x;

137 
advªûBu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y + 
advªû_pos
.y;

139 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x + 
şo£_pos
.x;

140 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y + 
şo£_pos
.y;

142 
	}
}

146 
	gM’uT®k”
::
	$logic
() {

148 ià(!
visibË
 || 
Åc
==
NULL
) ;

150 
advªûBu‰Ú
->
’abËd
 = 
çl£
;

151 
şo£Bu‰Ú
->
’abËd
 = 
çl£
;

154 ià(
ev’t_cursÜ
 < 
Åc
->
dŸlog
[
dŸlog_node
].
	`size
()-1) {

155 ià(
Åc
->
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
+1].
ty³
 != "") {

156 
advªûBu‰Ú
->
’abËd
 = 
Œue
;

159 
şo£Bu‰Ú
->
’abËd
 = 
Œue
;

163 
şo£Bu‰Ú
->
’abËd
 = 
Œue
;

166 
boŞ
 
mÜe
;

167 ià(
advªûBu‰Ú
->
	`checkClick
(è|| 
şo£Bu‰Ú
->checkClick()) {

169 
ev’t_cursÜ
++;

170 
mÜe
 = 
Åc
->
	`´oûssDŸlog
(
dŸlog_node
, 
ev’t_cursÜ
);

172 ià(
š±
->
´essšg
[
ACCEPT
] && !š±->
lock
[ACCEPT]) {

173 
š±
->
lock
[
ACCEPT
] = 
Œue
;

175 
ev’t_cursÜ
++;

176 
mÜe
 = 
Åc
->
	`´oûssDŸlog
(
dŸlog_node
, 
ev’t_cursÜ
);

182 ià(
mÜe
) {

183 
	`ü—‹Bufãr
();

187 
m’u
->
Åc
->
	`£tNPC
(npc);

189 ià(!
m’u
->
Åc
->
	`£ËùiÚ
())

190 
m’u
->
Åc
->
visibË
 = 
Œue
;

192 
m’u
->
Åc
->
	`£tNPC
(
NULL
);

195 
Åc
 = 
NULL
;

196 
visibË
 = 
çl£
;

198 
	}
}

200 
	gM’uT®k”
::
	$ü—‹Bufãr
() {

202 
¡ršg
 
lše
;

205 
¡ršg
 
‘y³
 = 
Åc
->
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
;

206 
¡ršg
 
who
;

208 ià(
‘y³
 == "him" ||ƒtype == "her") {

209 
who
 = 
Åc
->
Çme
;

211 ià(
‘y³
 == "you") {

212 
who
 = 
h”o_Çme
;

215 
lše
 = 
Åc
->
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
s
;

218 
	`SDL_F»eSurçû
(
msg_bufãr
);

219 
msg_bufãr
 = 
	`ü—‹AÍhaSurçû
(
‹xt_pos
.
w
,‹xt_pos.
h
);

220 
fÚt
->
	`£tFÚt
(
fÚt_who
);

221 
fÚt
->
	`»nd”
(
who
, 
‹xt_off£t
.
x
,ext_off£t.
y
, 
JUSTIFY_LEFT
, 
msg_bufãr
, 
‹xt_pos
.
w
 -ext_off£t.x*2, 
cŞÜ_nÜm®
);

222 
fÚt
->
	`£tFÚt
(
fÚt_dŸlog
);

223 
fÚt
->
	`»nd”
(
lše
, 
‹xt_off£t
.
x
,ext_off£t.
y
+fÚt->
	`g‘LšeHeight
(), 
JUSTIFY_LEFT
, 
msg_bufãr
, 
‹xt_pos
.
w
 -ext_off£t.x*2, 
cŞÜ_nÜm®
);

225 
	}
}

227 
	gM’uT®k”
::
	$»nd”
() {

228 ià(!
visibË
) ;

229 
SDL_Reù
 
¤c
;

230 
SDL_Reù
 
de¡
;

232 
off£t_x
 = 
wšdow_¬—
.
x
;

233 
off£t_y
 = 
wšdow_¬—
.
y
;

236 
¤c
.
x
 = 0;

237 
¤c
.
y
 = 0;

238 
de¡
.
x
 = 
off£t_x
 + 
dŸlog_pos
.x;

239 
de¡
.
y
 = 
off£t_y
 + 
dŸlog_pos
.y;

240 
¤c
.
w
 = 
de¡
.w = 
dŸlog_pos
.w;

241 
¤c
.
h
 = 
de¡
.h = 
dŸlog_pos
.h;

242 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

245 
¡ršg
 
‘y³
 = 
Åc
->
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
;

246 ià(
‘y³
 == "him" ||ƒtype == "her") {

247 ià(
Åc
->
pÜŒa™
 !ğ
NULL
) {

248 
¤c
.
w
 = 
de¡
.w = 
pÜŒa™_he
.w;

249 
¤c
.
h
 = 
de¡
.h = 
pÜŒa™_he
.h;

250 
de¡
.
x
 = 
off£t_x
 + 
pÜŒa™_he
.x;

251 
de¡
.
y
 = 
off£t_y
 + 
pÜŒa™_he
.y;

252 
	`SDL_Bl™Surçû
(
Åc
->
pÜŒa™
, &
¤c
, 
sü“n
, &
de¡
);

255 ià(
‘y³
 == "you") {

256 ià(
pÜŒa™
 !ğ
NULL
) {

257 
¤c
.
w
 = 
de¡
.w = 
pÜŒa™_you
.w;

258 
¤c
.
h
 = 
de¡
.h = 
pÜŒa™_you
.h;

259 
de¡
.
x
 = 
off£t_x
 + 
pÜŒa™_you
.x;

260 
de¡
.
y
 = 
off£t_y
 + 
pÜŒa™_you
.y;

261 
	`SDL_Bl™Surçû
(
pÜŒa™
, &
¤c
, 
sü“n
, &
de¡
);

266 
de¡
.
x
 = 
off£t_x
 + 
‹xt_pos
.x;

267 
de¡
.
y
 = 
off£t_y
 + 
‹xt_pos
.y;

268 
	`SDL_Bl™Surçû
(
msg_bufãr
, 
NULL
, 
sü“n
, &
de¡
);

271 ià(
ev’t_cursÜ
 < 
Åc
->
dŸlog
[
dŸlog_node
].
	`size
()-1) {

272 ià(
Åc
->
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
+1].
ty³
 != "") {

273 
advªûBu‰Ú
->
	`»nd”
();

276 
şo£Bu‰Ú
->
	`»nd”
();

280 
şo£Bu‰Ú
->
	`»nd”
();

282 
	}
}

284 
	gM’uT®k”
::
	$£tH”o
(cÚ¡ 
¡ršg
& 
Çme
, cÚ¡ sŒšg& 
pÜŒa™_f’ame
) {

285 
h”o_Çme
 = 
Çme
;

287 
	`SDL_F»eSurçû
(
pÜŒa™
);

288 
pÜŒa™
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/pÜŒa™s/" + 
pÜŒa™_f’ame
 + ".²g").
	`c_¡r
());

289 if(!
pÜŒa™
) {

290 
	`årštf
(
¡d”r
, "Couldn'ˆlßd…ÜŒa™: %s\n", 
	`IMG_G‘E¼Ü
());

296 
SDL_Surçû
 *
ş—nup
 = 
pÜŒa™
;

297 
pÜŒa™
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait);

298 
	`SDL_F»eSurçû
(
ş—nup
);

300 
	}
}

302 
	gM’uT®k”
::~
	$M’uT®k”
() {

303 
	`SDL_F»eSurçû
(
msg_bufãr
);

304 
	`SDL_F»eSurçû
(
background
);

305 
	`SDL_F»eSurçû
(
pÜŒa™
);

306 
d–‘e
 
advªûBu‰Ú
;

307 
d–‘e
 
şo£Bu‰Ú
;

308 
	}
}

	@MenuTalker.h

24 #´agm¨
Úû


25 #iâdeà
MENU_TALKER_H


26 
	#MENU_TALKER_H


	)

28 
	~<SDL.h
>

29 
	~<SDL_image.h
>

30 
	~<SDL_mix”.h
>

32 
	~"Uts.h
"

34 
	~<¡ršg
>

35 
	~<s¡»am
>

37 
şass
 
	gCam·ignMªag”
;

38 
şass
 
	gM’uMªag”
;

39 
şass
 
	gNPC
;

40 
şass
 
	gWidg‘Bu‰Ú
;

42 şas 
	cM’uT®k”
 : 
public
 
M’u
 {

43 
´iv©e
:

44 
Cam·ignMªag”
 *
ÿmp
;

45 
M’uMªag”
 *
	mm’u
;

47 
lßdG¿phics
();

48 
SDL_Surçû
 *
	mbackground
;

49 
SDL_Surçû
 *
	mpÜŒa™
;

50 
SDL_Surçû
 *
	mmsg_bufãr
;

51 
	m¡d
::
¡ršg
 
h”o_Çme
;

53 
	mdŸlog_node
;

54 
	mev’t_cursÜ
;

56 
Pošt
 
	mşo£_pos
;

57 
Pošt
 
	madvªû_pos
;

58 
SDL_Reù
 
	mdŸlog_pos
;

59 
SDL_Reù
 
	m‹xt_pos
;

60 
Pošt
 
	m‹xt_off£t
;

61 
SDL_Reù
 
	mpÜŒa™_he
;

62 
SDL_Reù
 
	mpÜŒa™_you
;

64 
	m¡d
::
¡ršg
 
fÚt_who
;

65 
	m¡d
::
¡ršg
 
fÚt_dŸlog
;

67 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

69 
	mpublic
:

70 
M’uT®k”
(
M’uMªag”
 *
m’u
,
Cam·ignMªag”
 *
ÿmp
);

71 ~
M’uT®k”
();

73 
NPC
 *
	mÅc
;

75 
choo£DŸlogNode
(
»que¡ed_node
 = -1);

76 
upd©e
();

77 
logic
();

78 
»nd”
();

79 
£tH”o
(cÚ¡ 
¡d
::
¡ršg
& 
Çme
, cÚ¡ std::¡ršg& 
pÜŒa™_f’ame
);

80 
ü—‹Bufãr
();

82 
boŞ
 
	mv’dÜ_visibË
;

84 
Widg‘Bu‰Ú
 *
	madvªûBu‰Ú
;

85 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

	@MenuVendor.cpp

23 
	~"FeP¬£r.h
"

24 
	~"I‹mStÜage.h
"

25 
	~"M’u.h
"

26 
	~"M’uV’dÜ.h
"

27 
	~"NPC.h
"

28 
	~"S‘tšgs.h
"

29 
	~"Sh¬edResourûs.h
"

30 
	~"UtsP¬sšg.h
"

31 
	~"Widg‘Bu‰Ú.h
"

32 
	~"Widg‘TabCÚŒŞ.h
"

34 
usšg
 
Çme¥aû
 
	g¡d
;

37 
	gM’uV’dÜ
::
	$M’uV’dÜ
(
I‹mMªag”
 *
_™ems
, 
StBlock
 *
_¡©s
)

38 : 
	`M’u
()

39 , 
	`™ems
(
_™ems
)

40 , 
	`¡©s
(
_¡©s
)

41 , 
	`şo£Bu‰Ú
(
Ãw
 
	`Widg‘Bu‰Ú
(
mods
->
	`loÿ‹
("images/menus/buttons/button_x.png")))

42 , 
	`bCÚŒŞ
(
Ãw
 
	`Widg‘TabCÚŒŞ
(2))

43 , 
	`aùiv‘ab
(
VENDOR_BUY
)

44 , 
	`cŞÜ_nÜm®
(
fÚt
->
	`g‘CŞÜ
("menu_normal"))

45 , 
	`Åc
(
NULL
)

46 , 
	`buyback_¡ock
()

47 , 
	$lk”_visibË
(
çl£
)

49 
	`lßdG¿phics
();

51 
bCÚŒŞ
->
	`£tTabT™Ë
(
VENDOR_BUY
,
msg
->
	`g‘
("Inventory"));

52 
bCÚŒŞ
->
	`£tTabT™Ë
(
VENDOR_SELL
,
msg
->
	`g‘
("Buyback"));

54 
	`lßdM”chªt
("");

57 
FeP¬£r
 
šfe
;

58 if(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("menus/vendor.txt"))) {

59 
šfe
.
	`Ãxt
()) {

60 
šfe
.
v®
 = infile.val + ',';

62 if(
šfe
.
key
 == "close") {

63 
şo£_pos
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

64 
şo£_pos
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

65 } if(
šfe
.
key
 == "slots_area") {

66 
¦Ùs_¬—
.
x
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

67 
¦Ùs_¬—
.
y
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

68 } ià(
šfe
.
key
 == "vendor_cols"){

69 
¦Ùs_cŞs
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

70 } ià(
šfe
.
key
 == "vendor_rows"){

71 
¦Ùs_rows
 = 
	`—tFœ¡IÁ
(
šfe
.
v®
,',');

72 } ià(
šfe
.
key
 == "caption"){

73 
t™Ë
 = 
	`—tLab–Info
(
šfe
.
v®
);

76 
šfe
.
	`şo£
();

77 } 
	`årštf
(
¡d”r
, "Unableo open menus/vendor.txt!\n");

79 
VENDOR_SLOTS
 = 
¦Ùs_cŞs
 * 
¦Ùs_rows
;

80 
	}
}

82 
	gM’uV’dÜ
::
	$lßdG¿phics
() {

83 
background
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/v’dÜ.²g").
	`c_¡r
());

84 if(!
background
) {

85 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

88 
SDL_Surçû
 *
ş—nup
 = 
background
;

89 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

90 
	`SDL_F»eSurçû
(
ş—nup
);

92 
	}
}

94 
	gM’uV’dÜ
::
	$upd©e
() {

95 
¦Ùs_¬—
.
x
 +ğ
wšdow_¬—
.x;

96 
¦Ùs_¬—
.
y
 +ğ
wšdow_¬—
.y;

97 
¦Ùs_¬—
.
w
 = 
¦Ùs_cŞs
*
ICON_SIZE
;

98 
¦Ùs_¬—
.
h
 = 
¦Ùs_rows
*
ICON_SIZE
;

100 
SDL_Reù
 
bs_¬—
 = 
¦Ùs_¬—
;

102 
bheight
 = 
bCÚŒŞ
->
	`g‘TabHeight
();

103 
bCÚŒŞ
->
	`£tMašA»a
(
bs_¬—
.
x
,abs_¬—.
y
-
bheight
,abs_¬—.
w
,abs_¬—.
h
+tabheight);

104 
bCÚŒŞ
->
	`upd©eH—d”
();

106 
¡ock
[
VENDOR_BUY
].
	`š™
Ğ
VENDOR_SLOTS
, 
™ems
, 
¦Ùs_¬—
, 
ICON_SIZE
, 
¦Ùs_cŞs
);

107 
¡ock
[
VENDOR_SELL
].
	`š™
Ğ
VENDOR_SLOTS
, 
™ems
, 
¦Ùs_¬—
, 
ICON_SIZE
, 
¦Ùs_cŞs
);

109 
şo£Bu‰Ú
->
pos
.
x
 = 
wšdow_¬—
.x+
şo£_pos
.x;

110 
şo£Bu‰Ú
->
pos
.
y
 = 
wšdow_¬—
.y+
şo£_pos
.y;

111 
	}
}

113 
	gM’uV’dÜ
::
lßdM”chªt
(cÚ¡ 
¡d
::
¡ršg
&) {

116 
M’uV’dÜ
::
	$logic
() {

117 ià(!
visibË
) ;

119 ià(
şo£Bu‰Ú
->
	`checkClick
()) {

120 
visibË
 = 
çl£
;

121 
¢d
->
	`¶ay
(
sfx_şo£
);

123 
	}
}

125 
	gM’uV’dÜ
::
	$bsLogic
() {

126 
bCÚŒŞ
->
	`logic
();

127 
aùiv‘ab
 = 
bCÚŒŞ
->
	`g‘AùiveTab
();

128 
	}
}

130 
	gM’uV’dÜ
::
	$£tTab
(
b
) {

131 
bCÚŒŞ
->
	`£tAùiveTab
(
b
);

132 
aùiv‘ab
 = 
b
;

133 
	}
}

135 
	gM’uV’dÜ
::
	$»nd”
() {

136 ià(!
visibË
) ;

137 
SDL_Reù
 
¤c
;

138 
SDL_Reù
 
de¡
;

141 
¤c
.
x
 = 0;

142 
¤c
.
y
 = 0;

143 
de¡
.
x
 = 
wšdow_¬—
.x;

144 
de¡
.
y
 = 
wšdow_¬—
.y;

145 
¤c
.
w
 = 
de¡
.w = 
wšdow_¬—
.w;

146 
¤c
.
h
 = 
de¡
.h = 
wšdow_¬—
.h;

147 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
sü“n
, &
de¡
);

150 
şo£Bu‰Ú
->
	`»nd”
();

153 ià(!
t™Ë
.
hidd’
) {

154 
Widg‘Lab–
 
Ïb–
;

155 
Ïb–
.
	`£t
(
wšdow_¬—
.
x
+
t™Ë
.x, wšdow_¬—.
y
+t™Ë.y,™Ë.
ju¡ify
,™Ë.
v®ign
, 
msg
->
	`g‘
("V’dÜ"è+ " - " + 
Åc
->
Çme
, 
cŞÜ_nÜm®
,™Ë.
fÚt_¡yË
);

156 
Ïb–
.
	`»nd”
();

160 
bCÚŒŞ
->
	`»nd”
();

163 
¡ock
[
aùiv‘ab
].
	`»nd”
();

164 
	}
}

170 
I‹mSck
 
	gM’uV’dÜ
::
	$şick
(
IÅutS‹
 * 
šput
) {

171 
I‹mSck
 
¡ack
 = 
¡ock
[
aùiv‘ab
].
	`şick
(
šput
);

172 
	`§veInv’tÜy
();

173  
¡ack
;

174 
	}
}

179 
	gM’uV’dÜ
::
	$™emR‘uº
(
I‹mSck
 
¡ack
) {

180 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

181 
¡ock
[
aùiv‘ab
].
	`™emR‘uº
(
¡ack
);

182 
	`§veInv’tÜy
();

183 
	}
}

185 
	gM’uV’dÜ
::
	$add
(
I‹mSck
 
¡ack
) {

187 ià(
¡ock
[
VENDOR_SELL
].
	`fuÎ
(
¡ack
.
™em
)) {

188 
¡ock
[
VENDOR_SELL
][0].
™em
 = 0;

189 
¡ock
[
VENDOR_SELL
][0].
quªt™y
 = 0;

190 
	`sÜt
(
VENDOR_SELL
);

192 
™ems
->
	`¶aySound
(
¡ack
.
™em
);

193 
¡ock
[
VENDOR_SELL
].
	`add
(
¡ack
);

194 
	`§veInv’tÜy
();

195 
	}
}

197 
ToŞtD©a
 
	gM’uV’dÜ
::
	$checkToŞt
(
Pošt
 
mou£
) {

198 
v’dÜ_v›w
 = (
aùiv‘ab
 =ğ
VENDOR_BUY
è? VENDOR_BUY : 
VENDOR_SELL
;

199  
¡ock
[
aùiv‘ab
].
	`checkToŞt
Ğ
mou£
, 
¡©s
, 
v’dÜ_v›w
);

200 
	}
}

206 
	gM’uV’dÜ
::
	$£tInv’tÜy
() {

207 
i
=0; i<
VENDOR_SLOTS
; i++) {

208 
¡ock
[
VENDOR_BUY
][
i
] = 
Åc
->stock[i];

209 
¡ock
[
VENDOR_SELL
][
i
] = 
buyback_¡ock
[i];

211 
	`sÜt
(
VENDOR_BUY
);

212 
	`sÜt
(
VENDOR_SELL
);

213 
	}
}

220 
	gM’uV’dÜ
::
	$§veInv’tÜy
() {

221 
i
=0; i<
VENDOR_SLOTS
; i++) {

222 ià(
Åc
èÅc->
¡ock
[
i
] = stock[
VENDOR_BUY
][i];

223 
buyback_¡ock
[
i
] = 
¡ock
[
VENDOR_SELL
][i];

226 
	}
}

228 
	gM’uV’dÜ
::
	$sÜt
(
ty³
) {

229 
i
=0; i<
VENDOR_SLOTS
; i++) {

230 ià(
¡ock
[
ty³
][
i
].
™em
 == 0) {

231 
j
=
i
; j<
VENDOR_SLOTS
; j++) {

232 ià(
¡ock
[
ty³
][
j
].
™em
 != 0) {

233 
¡ock
[
ty³
][
i
] = stock[ty³][
j
];

234 
¡ock
[
ty³
][
j
].
™em
 = 0;

235 
¡ock
[
ty³
][
j
].
quªt™y
 = 0;

241 
	}
}

243 
	gM’uV’dÜ
::~
	$M’uV’dÜ
() {

244 
	`SDL_F»eSurçû
(
background
);

245 
d–‘e
 
şo£Bu‰Ú
;

246 
d–‘e
 
bCÚŒŞ
;

247 
	}
}

	@MenuVendor.h

23 #´agm¨
Úû


24 #iâdeà
MENU_VENDOR_H


25 
	#MENU_VENDOR_H


	)

27 
	~"M’uI‹mStÜage.h
"

28 
	~"Widg‘Lab–.h
"

30 
	~<SDL.h
>

31 
	~<SDL_image.h
>

33 
	~<¡ršg
>

35 
şass
 
	gIÅutS‹
;

36 
şass
 
	gI‹mStÜage
;

37 
şass
 
	gNPC
;

38 
şass
 
	gStBlock
;

39 
şass
 
	gWidg‘Bu‰Ú
;

40 
şass
 
	gWidg‘TabCÚŒŞ
;

42 şas 
	cM’uV’dÜ
 : 
public
 
M’u
 {

43 
´iv©e
:

44 
I‹mMªag”
 *
™ems
;

45 
StBlock
 *
	m¡©s
;

46 
Widg‘Bu‰Ú
 *
	mşo£Bu‰Ú
;

47 
Widg‘TabCÚŒŞ
 *
	mbCÚŒŞ
;

49 
lßdG¿phics
();

50 
SDL_Surçû
 *
	mbackground
;

51 
M’uI‹mStÜage
 
	m¡ock
[2];

53 
	mVENDOR_SLOTS
;

56 
Pošt
 
	mşo£_pos
;

57 
Lab–Info
 
	mt™Ë
;

58 
	m¦Ùs_cŞs
;

59 
	m¦Ùs_rows
;

60 
	maùiv‘ab
;

61 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

63 
	mpublic
:

64 
M’uV’dÜ
(
I‹mMªag”
 *
™ems
, 
StBlock
 *
¡©s
);

65 ~
M’uV’dÜ
();

67 
NPC
 *
	mÅc
;

68 
I‹mStÜage
 
	mbuyback_¡ock
;

70 
upd©e
();

71 
lßdM”chªt
(cÚ¡ 
¡d
::
¡ršg
&);

72 
logic
();

73 
bsLogic
();

74 
£tTab
(
b
);

75 
	$g‘Tab
(è{ 
aùiv‘ab
;}

76 
	`»nd”
();

77 
I‹mSck
 
	`şick
(
IÅutS‹
 * 
šput
);

78 
	`™emR‘uº
(
I‹mSck
 
¡ack
);

79 
	`add
(
I‹mSck
 
¡ack
);

80 
ToŞtD©a
 
	`checkToŞt
(
Pošt
 
mou£
);

81 
	`£tInv’tÜy
();

82 
	`§veInv’tÜy
();

83 
	`sÜt
(
ty³
);

85 
boŞ
 
lk”_visibË
;

86 
SDL_Reù
 
¦Ùs_¬—
;

87 
	}
};

	@MessageEngine.cpp

28 
	~"G‘Text.h
"

29 
	~"Sh¬edResourûs.h
"

30 
	~"S‘tšgs.h
"

31 
	~<s¡»am
>

33 
usšg
 
Çme¥aû
 
	g¡d
;

35 
	gMes§geEngše
::
	$Mes§geEngše
() {

36 
G‘Text
 
šfe
;

37 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

38 
¡ršg
 
·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/languages/";

39 ià(
šfe
.
	`İ’
(
·th
 + "’gše." + 
LANGUAGE
 + ".po")) {

40 
šfe
.
	`Ãxt
(è&& !šfe.
fuzzy
) {

41 
mes§ges
.
	`š£¹
(
·œ
<
¡ršg
,¡ršg>(
šfe
.
key
, infe.
v®
));

43 
šfe
.
	`şo£
();

44 } ià(
LANGUAGE
 !ğ"’" && 
mods
->
mod_li¡
[
i
] =ğ
FALLBACK_MOD
) {

45 
	`årštf
(
¡d”r
, "UÇbËØİ’ mods/%s/Ïnguages/’gše.%s.po!\n", 
mods
->
mod_li¡
[
i
].
	`c_¡r
(), 
LANGUAGE
.c_str());

47 ià(
šfe
.
	`İ’
(
·th
 + "d©a." + 
LANGUAGE
 + ".po")) {

48 
šfe
.
	`Ãxt
(è&& !šfe.
fuzzy
) {

49 
mes§ges
.
	`š£¹
(
·œ
<
¡ršg
,¡ršg>(
šfe
.
key
, infe.
v®
));

51 
šfe
.
	`şo£
();

52 } ià(
LANGUAGE
 !ğ"’" && 
mods
->
mod_li¡
[
i
] !ğ
FALLBACK_MOD
) {

53 
	`årštf
(
¡d”r
, "UÇbËØİ’ mods/%s/Ïnguages/d©a.%s.po!\n", 
mods
->
mod_li¡
[
i
].
	`c_¡r
(), 
LANGUAGE
.c_str());

57 
	}
}

62 
¡ršg
 
	gMes§geEngše
::
	$g‘
(cÚ¡ 
¡ršg
& 
key
) {

63 
¡ršg
 
mes§ge
 = 
mes§ges
[
key
];

64 ià(
mes§ge
 =ğ""èmes§gğ
key
;

65  
	`uÃsÿ³
(
mes§ge
);

66 
	}
}

68 
¡ršg
 
	gMes§geEngše
::
	$g‘
(cÚ¡ 
¡ršg
& 
key
, 
i
) {

69 
¡ršg
 
mes§ge
 = 
mes§ges
[
key
];

70 ià(
mes§ge
 =ğ""èmes§gğ
key
;

71 
size_t
 
šdex
 = 
mes§ge
.
	`fšd
("%d");

72 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
	`¡r
(
i
));

73  
	`uÃsÿ³
(
mes§ge
);

74 
	}
}

76 
¡ršg
 
	gMes§geEngše
::
	$g‘
(cÚ¡ 
¡ršg
& 
key
, cÚ¡ sŒšg& 
s
) {

77 
¡ršg
 
mes§ge
 = 
mes§ges
[
key
];

78 ià(
mes§ge
 =ğ""èmes§gğ
key
;

79 
size_t
 
šdex
 = 
mes§ge
.
	`fšd
("%s");

80 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
s
);

81  
	`uÃsÿ³
(
mes§ge
);

82 
	}
}

84 
¡ršg
 
	gMes§geEngše
::
	$g‘
(cÚ¡ 
¡ršg
& 
key
, 
i
, cÚ¡ sŒšg& 
s
) {

85 
¡ršg
 
mes§ge
 = 
mes§ges
[
key
];

86 ià(
mes§ge
 =ğ""èmes§gğ
key
;

87 
size_t
 
šdex
 = 
mes§ge
.
	`fšd
("%d");

88 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
	`¡r
(
i
));

89 
šdex
 = 
mes§ge
.
	`fšd
("%s");

90 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
s
);

91  
	`uÃsÿ³
(
mes§ge
);

92 
	}
}

94 
¡ršg
 
	gMes§geEngše
::
	$g‘
(cÚ¡ 
¡ršg
& 
key
, 
i
, 
j
) {

95 
¡ršg
 
mes§ge
 = 
mes§ges
[
key
];

96 ià(
mes§ge
 =ğ""èmes§gğ
key
;

97 
size_t
 
šdex
 = 
mes§ge
.
	`fšd
("%d");

98 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
	`¡r
(
i
));

99 
šdex
 = 
mes§ge
.
	`fšd
("%d");

100 ià(
šdex
 !ğ
¡ršg
::
Åos
è
mes§ge
 = mes§ge.
	`»¶aû
(šdex, 2, 
	`¡r
(
j
));

101  
	`uÃsÿ³
(
mes§ge
);

102 
	}
}

105 
¡ršg
 
	gMes§geEngše
::
	$¡r
(
i
) {

106 
¡ršg¡»am
 
ss
;

107 
ss
 << 
i
;

108  
ss
.
	`¡r
();

109 
	}
}

112 
¡ršg
 
	gMes§geEngše
::
	$uÃsÿ³
(
¡ršg
 
v®
) {

115 
size_t
 
pos
;

116 (
pos
 = 
v®
.
	`fšd
("%%")è!ğ
¡ršg
::
Åos
)

117 
v®
 = v®.
	`»¶aû
(
pos
, 2, "%");

119  
v®
;

120 
	}
}

	@MessageEngine.h

30 #´agm¨
Úû


31 #iâdeà
MESSAGE_ENGINE_H


32 
	#MESSAGE_ENGINE_H


	)

34 
	~<m­
>

36 şas 
	cMes§geEngše
 {

38 
	m´iv©e
:

39 
¡d
::
m­
<¡d::
¡ršg
,
	m¡d
::¡ršg> 
mes§ges
;

40 
	m¡d
::
¡ršg
 
¡r
(
i
);

41 
	m¡d
::
¡ršg
 
uÃsÿ³
(
¡d
::¡ršg 
msg
);

42 
	mpublic
:

43 
Mes§geEngše
();

44 
	m¡d
::
¡ršg
 
g‘
(cÚ¡ 
¡d
::¡ršg& 
key
);

45 
	m¡d
::
¡ršg
 
g‘
(cÚ¡ 
¡d
::¡ršg& 
key
, 
i
);

46 
	m¡d
::
¡ršg
 
g‘
(cÚ¡ 
¡d
::¡ršg& 
key
, cÚ¡ std::¡ršg& 
s
);

47 
	m¡d
::
¡ršg
 
g‘
(cÚ¡ 
¡d
::¡ršg& 
key
, 
i
, cÚ¡ std::¡ršg& 
s
);

48 
	m¡d
::
¡ršg
 
g‘
(cÚ¡ 
¡d
::¡ršg& 
key
, 
i
, 
j
);

	@ModManager.cpp

18 
	~"ModMªag”.h
"

19 
	~"S‘tšgs.h
"

20 
	~"UtsFeSy¡em.h
"

21 
	~"UtsP¬sšg.h
"

22 
	~<SDL.h
>

23 
	~<f¡»am
>

24 
	~<®gÜ™hm
>

26 
usšg
 
Çme¥aû
 
	g¡d
;

29 
	gModMªag”
::
	$ModMªag”
() {

30 
loc_ÿche
.
	`ş—r
();

31 
mod_li¡
.
	`ş—r
();

33 
	`lßdModLi¡
();

34 
	}
}

46 
	gModMªag”
::
	$lßdModLi¡
() {

47 
if¡»am
 
šfe
;

48 
¡ršg
 
lše
;

49 
¡ršg
 
¡¬ts_w™h
;

50 
veùÜ
<
¡ršg
> 
mod_dœs
;

51 
boŞ
 
found_ªy_mod
 = 
çl£
;

53 
	`g‘DœLi¡
(
PATH_DATA
 + "mods", 
mod_dœs
);

56 ià(
	`fšd
(
mod_dœs
.
	`begš
(), mod_dœs.
	`’d
(), 
FALLBACK_MOD
) != mod_dirs.end()) {

57 
mod_li¡
.
	`push_back
(
FALLBACK_MOD
);

58 
found_ªy_mod
 = 
Œue
;

60 
	`årštf
(
¡d”r
, "Mod \"%s\"‚Ù found, skpšg\n", 
FALLBACK_MOD
);

64 
¡ršg
 
¶aû1
 = 
PATH_CONF
 + "mods.txt";

65 
¡ršg
 
¶aû2
 = 
PATH_DATA
 + "mods/mods.txt";

67 
šfe
.
	`İ’
(
¶aû1
.
	`c_¡r
(), 
ios
::
š
);

69 ià(!
šfe
.
	`is_İ’
()) {

70 
šfe
.
	`İ’
(
¶aû2
.
	`c_¡r
(), 
ios
::
š
);

72 ià(!
šfe
.
	`is_İ’
()) {

73 
	`årštf
(
¡d”r
, "Error during ModManager::loadModList() -- couldn't open mods.txt,o be†ocated‡t \n");

74 
	`årštf
(
¡d”r
, "%s\n%s\n\n", 
¶aû1
.
	`c_¡r
(), 
¶aû2
.c_str());

77 
šfe
.
	`good
()) {

78 
lše
 = 
	`g‘Lše
(
šfe
);

81 ià(
lše
.
	`Ëngth
() == 0) ;

84 
¡¬ts_w™h
 = 
lše
.
	`©
(0);

85 ià(
¡¬ts_w™h
 == "#") ;

88 ià(
	`fšd
(
mod_dœs
.
	`begš
(), mod_dœs.
	`’d
(), 
lše
) != mod_dirs.end()) {

89 
mod_li¡
.
	`push_back
(
lše
);

90 
found_ªy_mod
 = 
Œue
;

92 
	`årštf
(
¡d”r
, "Mod \"%s\"‚Ù found, skpšg\n", 
lše
.
	`c_¡r
());

95 
šfe
.
	`şo£
();

96 ià(!
found_ªy_mod
 && 
mod_li¡
.
	`size
() == 1) {

97 
	`årštf
(
¡d”r
, "Couldn't†ocate‡ny Flare mod. ");

98 
	`årštf
(
¡d”r
, "Check ifhe game data‡re installed correctly. ");

99 
	`årštf
(
¡d”r
, "Expectedo findhe data inhe $XDG_DATA_DIRS…ath, ");

100 
	`årštf
(
¡d”r
, "in /usr/local/share/flare/mods, ");

101 
	`årštf
(
¡d”r
, "or inhe same folder‡sheƒxecutable. ");

102 
	`årštf
(
¡d”r
, "Try…lacinghe mods folder in one ofhese†ocations.\n");

104 
	}
}

110 
¡ršg
 
	gModMªag”
::
	$loÿ‹
(cÚ¡ 
¡ršg
& 
f’ame
) {

113 ià(
loc_ÿche
.
	`fšd
(
f’ame
è!ğloc_ÿche.
	`’d
()) {

114  
loc_ÿche
[
f’ame
];

118 
¡ršg
 
‹¡_·th
;

120 
i
 = 
mod_li¡
.
	`size
(); i > 0; i--) {

121 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mod_li¡
[
i
-1] + "/" + 
f’ame
;

122 ià(
	`feExi¡s
(
‹¡_·th
)) {

123 
loc_ÿche
[
f’ame
] = 
‹¡_·th
;

124  
‹¡_·th
;

129  
PATH_DATA
 + 
f’ame
;

130 
	}
}

132 
	gModMªag”
::~
	$ModMªag”
() {

133 
	}
}

	@ModManager.h

26 #´agm¨
Úû


27 #iâdeà
MOD_MANAGER_H


28 
	#MOD_MANAGER_H


	)

30 
	#FALLBACK_MOD
 "deçuÉ"

	)

32 
	~<¡ršg
>

33 
	~<m­
>

34 
	~<veùÜ
>

36 şas 
	cModMªag”
 {

37 
	m´iv©e
:

38 
lßdModLi¡
();

40 
	m¡d
::
m­
<
¡d
::
¡ršg
,¡d::¡ršg> 
loc_ÿche
;

42 
	mpublic
:

43 
ModMªag”
();

44 ~
ModMªag”
();

45 
	m¡d
::
¡ršg
 
loÿ‹
(cÚ¡ 
¡d
::¡ršg& 
f’ame
);

47 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
mod_li¡
;

	@NPC.cpp

24 
	~"NPC.h
"

26 
	~"Anim©iÚ.h
"

27 
	~"Anim©iÚS‘.h
"

28 
	~"Anim©iÚMªag”.h
"

29 
	~"Cam·ignMªag”.h
"

30 
	~"FeP¬£r.h
"

31 
	~"I‹mMªag”.h
"

32 
	~"M­R’d””.h
"

33 
	~"Sh¬edResourûs.h
"

34 
	~"UtsP¬sšg.h
"

36 
usšg
 
Çme¥aû
 
	g¡d
;

39 
I‹mStÜage
 
	g¡ock
;

41 
	g¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
vox_šŒo
;

42 
	g¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
vox_que¡s
;

43 
	g¡d
::
veùÜ
<
¡d
::veùÜ<
Ev’t_CompÚ’t
> > 
dŸlog
;

45 
	gNPC
::
	$NPC
(
M­R’d””
 *
_m­
, 
I‹mMªag”
 *
_™ems
)

46 : 
	`EÁ™y
(
_m­
)

47 , 
	`™ems
(
_™ems
)

48 , 
	`Çme
("")

49 , 
	`gfx
("")

50 , 
	`pos
()

51 , 
	`Ëv–
(1)

52 , 
	`dœeùiÚ
(0)

53 , 
	`pÜŒa™
(
NULL
)

54 , 
	`lk”
(
çl£
)

55 , 
	`v’dÜ
(
çl£
)

56 , 
	`¡ock
()

57 , 
	`¡ock_couÁ
(0)

58 , 
	`vox_šŒo
()

59 , 
	`vox_que¡s
()

60 , 
	$dŸlog
()

62 
¡ock
.
	`š™
(
NPC_VENDOR_MAX_STOCK
, 
_™ems
);

63 
	}
}

70 
	gNPC
::
	$lßd
(cÚ¡ 
¡ršg
& 
Åc_id
, 
h”o_Ëv–
) {

72 
FeP¬£r
 
šfe
;

73 
I‹mSck
 
¡ack
;

75 
¡ršg
 
f’ame_pÜŒa™
 = "";

77 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("Åcs/" + 
Åc_id
 + ".txt"))) {

78 
šfe
.
	`Ãxt
()) {

79 ià(
šfe
.
£ùiÚ
 == "dialog") {

80 ià(
šfe
.
Ãw_£ùiÚ
) {

81 
dŸlog
.
	`push_back
(
veùÜ
<
Ev’t_CompÚ’t
>());

83 
Ev’t_CompÚ’t
 
e
;

84 
e
.
ty³
 = 
šfe
.
key
;

85 ià(
šfe
.
key
 == "requires_status")

86 
e
.
s
 = 
šfe
.
v®
;

87 ià(
šfe
.
key
 == "requires_not")

88 
e
.
s
 = 
šfe
.
v®
;

89 ià(
šfe
.
key
 == "requires_level")

90 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

91 ià(
šfe
.
key
 == "requires_not_level")

92 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

93 ià(
šfe
.
key
 == "requires_item")

94 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

95 ià(
šfe
.
key
 == "him" || infile.key == "her")

96 
e
.
s
 = 
msg
->
	`g‘
(
šfe
.
v®
);

97 ià(
šfe
.
key
 == "you")

98 
e
.
s
 = 
msg
->
	`g‘
(
šfe
.
v®
);

99 ià(
šfe
.
key
 == "reward_item") {

101 
e
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

102 
e
.
y
 = 
	`toIÁ
(
šfe
.
v®
);

104 ià(
šfe
.
key
 == "reward_xp")

105 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

106 ià(
šfe
.
key
 == "restore")

107 
e
.
s
 = 
šfe
.
v®
;

108 ià(
šfe
.
key
 == "reward_currency")

109 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

110 ià(
šfe
.
key
 == "remove_item")

111 
e
.
x
 = 
	`toIÁ
(
šfe
.
v®
);

112 ià(
šfe
.
key
 == "set_status")

113 
e
.
s
 = 
šfe
.
v®
;

114 ià(
šfe
.
key
 == "unset_status")

115 
e
.
s
 = 
šfe
.
v®
;

116 ià(
šfe
.
key
 == "voice") {

117 
e
.
x
 = 
	`lßdSound
(
šfe
.
v®
, 
NPC_VOX_QUEST
);

119 ià(
šfe
.
key
 == "topic") {

120 
e
.
s
 = 
msg
->
	`g‘
(
šfe
.
v®
);

122 ià(
šfe
.
key
 == "group") {

123 
e
.
s
 = 
šfe
.
v®
;

126 
dŸlog
.
	`back
().
	`push_back
(
e
);

129 
f’ame
 = 
Åc_id
;

130 ià(
šfe
.
key
 == "name") {

131 
Çme
 = 
msg
->
	`g‘
(
šfe
.
v®
);

133 ià(
šfe
.
key
 == "level") {

134 ià(
šfe
.
v®
 == "hero")

135 
Ëv–
 = 
h”o_Ëv–
;

137 
Ëv–
 = 
	`toIÁ
(
šfe
.
v®
);

139 ià(
šfe
.
key
 == "gfx") {

140 
gfx
 = 
šfe
.
v®
;

144 ià(
šfe
.
key
 == "talker") {

145 ià(
šfe
.
v®
 =ğ"Œue"è
lk”
 = 
Œue
;

147 ià(
šfe
.
key
 == "portrait") {

148 
f’ame_pÜŒa™
 = 
šfe
.
v®
;

152 ià(
šfe
.
key
 == "vendor") {

153 ià(
šfe
.
v®
 =ğ"Œue"è
v’dÜ
 = 
Œue
;

155 ià(
šfe
.
key
 == "constant_stock") {

156 
¡ack
.
quªt™y
 = 1;

157 
šfe
.
v®
 != "") {

158 
¡ack
.
™em
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

159 
¡ock
.
	`add
(
¡ack
);

162 ià(
šfe
.
key
 == "status_stock") {

163 ià(
m­
->
ÿmp
->
	`checkStus
(
šfe
.
	`ÃxtV®ue
())) {

164 
¡ack
.
quªt™y
 = 1;

165 
šfe
.
v®
 != "") {

166 
¡ack
.
™em
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

167 
¡ock
.
	`add
(
¡ack
);

173 ià(
šfe
.
key
 == "vox_intro") {

174 
	`lßdSound
(
šfe
.
v®
, 
NPC_VOX_INTRO
);

178 
šfe
.
	`şo£
();

179 } 
	`årštf
(
¡d”r
, "UÇbËØİ’‚pcs/%s.txt!\n", 
Åc_id
.
	`c_¡r
());

180 
	`lßdG¿phics
(
f’ame_pÜŒa™
);

181 
	}
}

183 
	gNPC
::
	$lßdG¿phics
(cÚ¡ 
¡ršg
& 
f’ame_pÜŒa™
) {

185 ià(
gfx
 != "") {

186 
¡d
::
¡ršg
 
ªim_Çme
 = "ªim©iÚs/Åcs/" + 
gfx
 + ".txt";

187 
ªim
->
	`šü—£CouÁ
(
ªim_Çme
);

188 
ªim©iÚS‘
 = 
ªim
->
	`g‘Anim©iÚS‘
(
ªim_Çme
);

189 
aùiveAnim©iÚ
 = 
ªim©iÚS‘
->
	`g‘Anim©iÚ
();

191 ià(
f’ame_pÜŒa™
 != "") {

192 
pÜŒa™
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/pÜŒa™s/" + 
f’ame_pÜŒa™
 + ".²g").
	`c_¡r
());

193 if(!
pÜŒa™
) {

194 
	`årštf
(
¡d”r
, "Couldn'ˆlßd NPC…ÜŒa™: %s\n", 
	`IMG_G‘E¼Ü
());

197 
	`SDL_S‘CŞÜKey
Ğ
pÜŒa™
, 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
ÕÜŒa™->
fÜm©
, 255, 0, 255) );

200 
SDL_Surçû
 *
ş—nup
 = 
pÜŒa™
;

201 
pÜŒa™
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(portrait);

202 
	`SDL_F»eSurçû
(
ş—nup
);

205 
	}
}

213 
	gNPC
::
	$lßdSound
(cÚ¡ 
¡ršg
& 
âame
, 
ty³
) {

215 
SoundMªag”
::
SoundID
 
a
 = 
¢d
->
	`lßd
("soundfx/Åcs/" + 
âame
, "NPC voice");

217 ià(!
a
)

220 ià(
ty³
 =ğ
NPC_VOX_INTRO
) {

221 
vox_šŒo
.
	`push_back
(
a
);

222  
vox_šŒo
.
	`size
() - 1;

225 ià(
ty³
 =ğ
NPC_VOX_QUEST
) {

226 
vox_que¡s
.
	`push_back
(
a
);

227  
vox_que¡s
.
	`size
() - 1;

230 
	}
}

232 
	gNPC
::
	$logic
() {

233 
aùiveAnim©iÚ
->
	`advªûF¿me
();

234 
	}
}

239 
boŞ
 
	gNPC
::
	$¶aySound
(
ty³
, 
id
) {

240 ià(
ty³
 =ğ
NPC_VOX_INTRO
) {

241 
rŞl
;

242 ià(
vox_šŒo
.
	`em±y
()è 
çl£
;

243 
rŞl
 = 
	`¿nd
(è% 
vox_šŒo
.
	`size
();

244 
¢d
->
	`¶ay
(
vox_šŒo
[
rŞl
], "NPC_VOX");

245  
Œue
;

247 ià(
ty³
 =ğ
NPC_VOX_QUEST
) {

248 ià(
id
 < 0 || id >ğ()
vox_que¡s
.
	`size
()è 
çl£
;

249 
¢d
->
	`¶ay
(
vox_que¡s
[
id
], "NPC_VOX");

250  
Œue
;

252  
çl£
;

253 
	}
}

258 
	gNPC
::
g‘DŸlogNodes
(
¡d
::
veùÜ
<> &
»suÉ
) {

259 
»suÉ
.
ş—r
();

260 ià(!
	glk”
)

263 
	g¡d
::
¡ršg
 
group
;

264 
	g¡d
::
	tveùÜ
<> 
	tDŸlogs
;

265 
	g¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, 
	tDŸlogs
 > 
	tDŸlogGroups
;

266 
DŸlogGroups
 
	ggroups
;

268 
	gi
=
dŸlog
.
size
()-1; i>=0; i--) {

269 
boŞ
 
	gis_avaabË
 = 
Œue
;

270 
boŞ
 
	gis_grou³d
 = 
çl£
;

271 
	gj
=0; j<
	gdŸlog
[
i
].
size
(); j++) {

273 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "requires_status") {

274 ià(
m­
->
ÿmp
->
checkStus
(
dŸlog
[
i
][
j
].
s
))

276 
	gis_avaabË
 = 
çl£
;

279 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "requires_not") {

280 ià(!
m­
->
ÿmp
->
checkStus
(
dŸlog
[
i
][
j
].
s
))

282 
	gis_avaabË
 = 
çl£
;

285 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "requires_item") {

286 ià(
m­
->
ÿmp
->
checkI‹m
(
dŸlog
[
i
][
j
].
x
))

288 
	gis_avaabË
 = 
çl£
;

291 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "requires_level") {

292 ià(!
m­
->
ÿmp
->
h”o
->
Ëv–
 < 
dŸlog
[
i
][
j
].
x
)

294 
	gis_avaabË
 = 
çl£
;

297 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "requires_not_level") {

298 ià(!
m­
->
ÿmp
->
h”o
->
Ëv–
 >ğ
dŸlog
[
i
][
j
].
x
)

300 
	gis_avaabË
 = 
çl£
;

303 ià(
	gdŸlog
[
i
][
j
].
	gty³
 == "group") {

304 
is_grou³d
 = 
Œue
;

305 
	ggroup
 = 
dŸlog
[
i
][
j
].
s
;

309 ià(
	gis_avaabË
) {

310 ià(!
	gis_grou³d
) {

311 
	g»suÉ
.
push_back
(
i
);

313 
	gDŸlogGroups
::
™”©Ü
 
™
;

314 
	g™
 = 
groups
.
fšd
(
group
);

315 ià(
	g™
 =ğ
groups
.
’d
()) {

316 
groups
.
š£¹
(
DŸlogGroups
::
v®ue_ty³
(
group
, 
DŸlogs
()));

319 
	g™
->
	g£cÚd
.
push_back
(
i
);

326 
	gDŸlogGroups
::
™”©Ü
 
™
;

327 
	g™
 = 
groups
.
begš
();

328 ià(
	g™
 =ğ
groups
.
’d
())

331 
	g™
 !ğ
groups
.
’d
()) {

333 
di
 = 
™
->
£cÚd
[
¿nd
(è% it->£cÚd.
size
()];

334 
	g»suÉ
.
push_back
(
di
);

335 ++
	g™
;

339 
	g¡d
::
¡ršg
 
NPC
::
	$g‘DŸlogTİic
(
dŸlog_node
) {

340 ià(!
lk”
)

343 
j
=0; j<
dŸlog
[
dŸlog_node
].
	`size
(); j++) {

344 ià(
dŸlog
[
dŸlog_node
][
j
].
ty³
 == "topic")

345  
dŸlog
[
dŸlog_node
][
j
].
s
;

349 
	}
}

356 
boŞ
 
	gNPC
::
	$´oûssDŸlog
(
dŸlog_node
, &
ev’t_cursÜ
) {

358 
ev’t_cursÜ
 < 
dŸlog
[
dŸlog_node
].
	`size
()) {

361 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "requires_status") {

364 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "requires_not") {

367 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "requires_item") {

370 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "set_status") {

371 
m­
->
ÿmp
->
	`£tStus
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
s
);

373 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "unset_status") {

374 
m­
->
ÿmp
->
	`un£tStus
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
s
);

376 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "him") {

377  
Œue
;

379 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "her") {

380  
Œue
;

382 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "you") {

383  
Œue
;

385 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "reward_xp") {

386 
m­
->
ÿmp
->
	`»w¬dXP
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
x
, 
Œue
);

388 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "restore") {

389 
m­
->
ÿmp
->
	`»¡ÜeHPMP
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
s
);

391 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "reward_currency") {

392 
m­
->
ÿmp
->
	`»w¬dCu¼’cy
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
x
);

394 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "reward_item") {

395 
I‹mSck
 
i¡ack
;

396 
i¡ack
.
™em
 = 
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
x
;

397 
i¡ack
.
quªt™y
 = 
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
y
;

398 
m­
->
ÿmp
->
	`»w¬dI‹m
(
i¡ack
);

400 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "remove_item") {

401 
m­
->
ÿmp
->
	`»moveI‹m
(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
x
);

403 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "voice") {

404 
	`¶aySound
(
NPC_VOX_QUEST
, 
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
x
);

406 ià(
dŸlog
[
dŸlog_node
][
ev’t_cursÜ
].
ty³
 == "") {

408  
çl£
;

411 
ev’t_cursÜ
++;

413  
çl£
;

414 
	}
}

416 
R’d”abË
 
	gNPC
::
	$g‘R’d”
() {

417 
R’d”abË
 
r
 = 
aùiveAnim©iÚ
->
	`g‘Cu¼’tF¿me
(
dœeùiÚ
);

418 
r
.
m­_pos
.
x
 = 
pos
.x;

419 
r
.
m­_pos
.
y
 = 
pos
.y;

421  
r
;

422 
	}
}

425 
	gNPC
::~
	$NPC
() {

426 ià(
gfx
 != "") {

427 cÚ¡ 
¡ršg
 
ªim_Çme
 = "ªim©iÚs/Åcs/" + 
gfx
 + ".txt";

428 
ªim
->
	`deü—£CouÁ
(
ªim_Çme
);

431 ià(
pÜŒa™
 !ğ
NULL
è
	`SDL_F»eSurçû
(portrait);

432 !
vox_šŒo
.
	`em±y
()) {

433 
¢d
->
	`uÆßd
(
vox_šŒo
.
	`back
());

434 
vox_šŒo
.
	`pİ_back
();

436 !
vox_que¡s
.
	`em±y
()) {

437 
¢d
->
	`uÆßd
(
vox_que¡s
.
	`back
());

438 
vox_que¡s
.
	`pİ_back
();

440 
	}
}

	@NPC.h

24 #´agm¨
Úû


25 #iâdeà
NPC_H


26 
	#NPC_H


	)

28 
	~"EÁ™y.h
"

29 
	~"I‹mStÜage.h
"

30 
	~"Uts.h
"

32 
	~<SDL.h
>

33 
	~<SDL_image.h
>

34 
	~<SDL_mix”.h
>

35 
	~<¡ršg
>

36 
	~<veùÜ
>

38 
şass
 
	gI‹mMªag”
;

39 
şass
 
	gM­R’d””
;

41 cÚ¡ 
	gNPC_VENDOR_MAX_STOCK
 = 80;

42 cÚ¡ 
	gNPC_VOX_INTRO
 = 0;

43 cÚ¡ 
	gNPC_VOX_QUEST
 = 1;

44 cÚ¡ 
	gNPC_NO_DIALOG_AVAIL
 = -1;

46 şas 
	cNPC
 : 
public
 
EÁ™y
 {

47 
´Ùeùed
:

48 
I‹mMªag”
 *
™ems
;

50 
	mpublic
:

51 
NPC
(
M­R’d””
 *
_m­
, 
I‹mMªag”
 *
_™ems
);

52 ~
NPC
();

53 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
Åc_id
, 
h”o_Ëv–
);

54 
lßdG¿phics
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame_pÜŒa™
);

55 
lßdSound
(cÚ¡ 
¡d
::
¡ršg
& 
âame
, 
ty³
);

56 
logic
();

57 
boŞ
 
¶aySound
(
ty³
, 
id
=-1);

58 
g‘DŸlogNodes
(
¡d
::
veùÜ
<> &
»suÉ
);

59 
	m¡d
::
¡ršg
 
g‘DŸlogTİic
(
dŸlog_node
);

60 
boŞ
 
´oûssDŸlog
(
dŸlog_node
, & 
ev’t_cursÜ
);

61 
vœtu®
 
R’d”abË
 
g‘R’d”
();

64 
	m¡d
::
¡ršg
 
Çme
;

65 
	m¡d
::
¡ršg
 
f’ame
;

66 
	m¡d
::
¡ršg
 
gfx
;

67 
Pošt
 
	mpos
;

68 
	mËv–
;

70 
	mdœeùiÚ
;

73 
SDL_Surçû
 *
	mpÜŒa™
;

74 
boŞ
 
	mlk”
;

77 
boŞ
 
	mv’dÜ
;

78 
I‹mStÜage
 
	m¡ock
;

79 
	m¡ock_couÁ
;

82 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
vox_šŒo
;

83 
	m¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
vox_que¡s
;

88 
	m¡d
::
veùÜ
<
¡d
::veùÜ<
Ev’t_CompÚ’t
> > 
dŸlog
;

	@NPCManager.cpp

26 
	~"Anim©iÚ.h
"

27 
	~"FeP¬£r.h
"

28 
	~"NPCMªag”.h
"

29 
	~"NPC.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"M­R’d””.h
"

32 
	~"LoÙMªag”.h
"

33 
	~"StBlock.h
"

34 
	~<lim™s
>

36 
usšg
 
Çme¥aû
 
	g¡d
;

38 
	gNPCMªag”
::
	$NPCMªag”
(
M­R’d””
 *
_m­
, 
LoÙMªag”
 *
_loÙ
, 
I‹mMªag”
 *
_™ems
, 
StBlock
 *
_¡©s
)

39 : 
	`m­
(
_m­
)

40 , 
	`t
(
Ãw
 
	`Widg‘ToŞt
())

41 , 
	`loÙ
(
_loÙ
)

42 , 
	`™ems
(
_™ems
)

43 , 
	`¡©s
(
_¡©s
)

44 , 
	$t_buf
()

46 
FeP¬£r
 
šfe
;

48 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/toŞts.txt").
	`c_¡r
())) {

49 
šfe
.
	`Ãxt
()) {

50 ià(
šfe
.
key
 == "npc_tooltip_margin") {

51 
toŞt_m¬gš
 = 
	`©oi
(
šfe
.
v®
.
	`c_¡r
());

54 
šfe
.
	`şo£
();

55 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/tooltips.txt!\n");

56 
	}
}

58 
	gNPCMªag”
::
addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
r
) {

59 
i
=0; 
	gi
<
	gÅcs
.
size
(); i++) {

60 
	gr
.
push_back
(
Åcs
[
i
]->
g‘R’d”
());

64 
	gNPCMªag”
::
	$hªdËNewM­
() {

66 
M­_NPC
 
mn
;

67 
I‹mSck
 
™em_rŞl
;

70 
i
=0; i<
Åcs
.
	`size
(); i++)

71 
	`d–‘e
(
Åcs
[
i
]);

73 
Åcs
.
	`ş—r
();

76 !
m­
->
Åcs
.
	`em±y
()) {

77 
mn
 = 
m­
->
Åcs
.
	`äÚt
();

78 
m­
->
Åcs
.
	`pİ
();

80 
NPC
 *
Åc
 = 
Ãw
 
	`NPC
(
m­
, 
™ems
);

81 
Åc
->
	`lßd
(
mn
.
id
, 
¡©s
->
Ëv–
);

82 
Åc
->
pos
.
x
 = 
mn
.pos.x;

83 
Åc
->
pos
.
y
 = 
mn
.pos.y;

85 
Åc
->
¡ock
.
	`sÜt
();

86 
Åcs
.
	`push_back
(
Åc
);

89 
	}
}

91 
	gNPCMªag”
::
	$logic
() {

92 
i
=0; i<
Åcs
.
	`size
(); i++) {

93 
Åcs
[
i
]->
	`logic
();

95 
	}
}

97 
	gNPCMªag”
::
g‘ID
(
¡d
::
¡ršg
 
ÅcName
) {

98 
i
=0; 
	gi
<
	gÅcs
.
size
(); i++) {

99 ià(
	gÅcs
[
i
]->
	gf’ame
 =ğ
ÅcName
)  i;

104 
	gNPCMªag”
::
	$checkNPCClick
(
Pošt
 
mou£
, Pošˆ
ÿm
) {

105 
Pošt
 
p
;

106 
SDL_Reù
 
r
;

107 
i
=0; i<
Åcs
.
	`size
(); i++) {

109 
p
 = 
	`m­_to_sü“n
(
Åcs
[
i
]->
pos
.
x
,‚pcs[i]->pos.
y
, 
ÿm
.x, cam.y);

111 
R’d”abË
 
»n
 = 
Åcs
[
i
]->
aùiveAnim©iÚ
->
	`g‘Cu¼’tF¿me
Òpcs[i]->
dœeùiÚ
);

112 
r
.
w
 = 
»n
.
¤c
.w;

113 
r
.
h
 = 
»n
.
¤c
.h;

114 
r
.
x
 = 
p
.x - 
»n
.
off£t
.x;

115 
r
.
y
 = 
p
.y - 
»n
.
off£t
.y;

117 ià(
	`isW™hš
(
r
, 
mou£
)) {

118  
i
;

122 
	}
}

124 
	gNPCMªag”
::
	$g‘N—»¡NPC
(
Pošt
 
pos
) {

125 
Ã¬e¡
 = -1;

126 
be¡_di¡ªû
 = 
¡d
::
num”ic_lim™s
<>::
	`max
();

128 
i
=0; i<
Åcs
.
	`size
(); i++) {

129 
di¡ªû
 = ()
	`ÿlcDi¡
(
pos
, 
Åcs
[
i
]->pos);

130 ià(
di¡ªû
 < 
be¡_di¡ªû
) {

131 
be¡_di¡ªû
 = 
di¡ªû
;

132 
Ã¬e¡
 = 
i
;

136  
Ã¬e¡
;

137 
	}
}

142 
	gNPCMªag”
::
	$»nd”ToŞts
(
Pošt
 
ÿm
, Pošˆ
mou£
) {

143 
Pošt
 
p
;

144 
SDL_Reù
 
r
;

146 
i
=0; i<
Åcs
.
	`size
(); i++) {

148 
p
 = 
	`m­_to_sü“n
(
Åcs
[
i
]->
pos
.
x
,‚pcs[i]->pos.
y
, 
ÿm
.x, cam.y);

150 
R’d”abË
 
»n
 = 
Åcs
[
i
]->
aùiveAnim©iÚ
->
	`g‘Cu¼’tF¿me
Òpcs[i]->
dœeùiÚ
);

151 
r
.
w
 = 
»n
.
¤c
.w;

152 
r
.
h
 = 
»n
.
¤c
.h;

153 
r
.
x
 = 
p
.x - 
»n
.
off£t
.x;

154 
r
.
y
 = 
p
.y - 
»n
.
off£t
.y;

156 ià(
	`isW™hš
(
r
, 
mou£
è&& 
TOOLTIP_CONTEXT
 !ğ
TOOLTIP_MENU
) {

159 
p
.
y
 -ğ
toŞt_m¬gš
;

162 ià(!
t_buf
.
	`com·»Fœ¡Lše
(
Åcs
[
i
]->
Çme
)) {

163 
t_buf
.
	`ş—r
();

164 
t_buf
.
	`addText
(
Åcs
[
i
]->
Çme
);

167 
t
->
	`»nd”
(
t_buf
, 
p
, 
STYLE_TOPLABEL
);

168 
TOOLTIP_CONTEXT
 = 
TOOLTIP_MAP
;

171 } ià(
TOOLTIP_CONTEXT
 !ğ
TOOLTIP_MENU
) {

172 
TOOLTIP_CONTEXT
 = 
TOOLTIP_NONE
;

175 
	}
}

177 
	gNPCMªag”
::~
	$NPCMªag”
() {

178 
i
=0; i<
Åcs
.
	`size
(); i++) {

179 
d–‘e
 
Åcs
[
i
];

182 
t_buf
.
	`ş—r
();

183 
d–‘e
 
t
;

184 
	}
}

	@NPCManager.h

26 #´agm¨
Úû


27 #iâdeà
NPC_MANAGER_H


28 
	#NPC_MANAGER_H


	)

30 
	~"Widg‘ToŞt.h
"

32 
	~<SDL.h
>

34 
	~<veùÜ
>

36 
şass
 
	gI‹mMªag”
;

37 
şass
 
	gLoÙMªag”
;

38 
şass
 
	gM­R’d””
;

39 
şass
 
	gStBlock
;

40 
şass
 
	gNPC
;

42 şas 
	cNPCMªag”
 {

43 
	m´iv©e
:

44 
M­R’d””
 *
m­
;

45 
Widg‘ToŞt
 *
	mt
;

46 
LoÙMªag”
 *
	mloÙ
;

47 
I‹mMªag”
 *
	m™ems
;

48 
StBlock
 *
	m¡©s
;

49 
ToŞtD©a
 
	mt_buf
;

50 
	mtoŞt_m¬gš
;

52 
	mpublic
:

53 
NPCMªag”
(
M­R’d””
 *
_m­
, 
LoÙMªag”
 *
_loÙ
, 
I‹mMªag”
 *
_™ems
, 
StBlock
 *
¡©s
);

54 ~
NPCMªag”
();

55 
	m¡d
::
veùÜ
<
NPC
*> 
Åcs
;

56 
hªdËNewM­
();

57 
logic
();

58 
addR’d”s
(
¡d
::
veùÜ
<
R’d”abË
> &
r
);

59 
g‘ID
(
¡d
::
¡ršg
 
ÅcName
);

60 
checkNPCClick
(
Pošt
 
mou£
, Pošˆ
ÿm
);

61 
g‘N—»¡NPC
(
Pošt
 
pos
);

62 
»nd”ToŞts
(
Pošt
 
ÿm
, Pošˆ
mou£
);

	@PowerManager.cpp

25 
	~"Pow”Mªag”.h
"

26 
	~"Anim©iÚ.h
"

27 
	~"Anim©iÚS‘.h
"

28 
	~"Anim©iÚMªag”.h
"

29 
	~"FeP¬£r.h
"

30 
	~"Haz¬d.h
"

31 
	~"Sh¬edResourûs.h
"

32 
	~"S‘tšgs.h
"

33 
	~"Sh¬edResourûs.h
"

34 
	~"StBlock.h
"

35 
	~"M­CŞlisiÚ.h
"

36 
	~"UtsFeSy¡em.h
"

37 
	~"UtsM©h.h
"

38 
	~"UtsP¬sšg.h
"

40 
	~<cm©h
>

41 
	~<io¡»am
>

42 
	~<şim™s
>

43 
usšg
 
Çme¥aû
 
	g¡d
;

49 
	gPow”Mªag”
::
	$Pow”Mªag”
()

50 : 
	`cŞlid”
(
NULL
)

51 , 
	`log_msg
("")

52 , 
	`u£d_™ems
()

53 , 
	$u£d_equ³d_™ems
()

55 
	`lßdAÎ
();

56 
	}
}

61 
	gPow”Mªag”
::
	$lßdAÎ
() {

63 
¡ršg
 
‹¡_·th
;

66 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

68 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/powers/powers.txt";

70 ià(
	`feExi¡s
(
‹¡_·th
)) {

71 
this
->
	`lßdPow”s
(
‹¡_·th
);

74 
	}
}

82 
	gPow”Mªag”
::
lßdPow”s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

83 
FeP¬£r
 
šfe
;

84 ià(!
	gšfe
.
İ’
(
f’ame
)) {

85 
årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
f’ame
.
c_¡r
());

89 
	gšput_id
 = 0;

90 
boŞ
 
	gskpšgEÁry
 = 
çl£
;

92 
	gšfe
.
Ãxt
()) {

95 ià(
	gšfe
.
	gkey
 == "id") {

96 
šput_id
 = 
toIÁ
(
šfe
.
v®
);

97 
	gskpšgEÁry
 = 
šput_id
 < 1;

98 ià(
	gskpšgEÁry
)

99 
årštf
(
¡d”r
, "Pow” index ouˆoàbound 1-%d, skpšg\n", 
INT_MAX
);

100 ià(
	g¡©ic_ÿ¡
<>(
	gpow”s
.
size
()è< 
	gšput_id
 + 1)

101 
	gpow”s
.
»size
(
šput_id
 + 1);

104 ià(
	gskpšgEÁry
)

107 ià(
	gšfe
.
	gkey
 == "type") {

108 ià(
šfe
.
v®
 =ğ"fixed"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_FIXED
;

109 ià(
	gšfe
.
	gv®
 =ğ"misse"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_MISSILE
;

110 ià(
	gšfe
.
	gv®
 =ğ"»³©”"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_REPEATER
;

111 ià(
	gšfe
.
	gv®
 =ğ"¥awn"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_SPAWN
;

112 ià(
	gšfe
.
	gv®
 =ğ"ŒªsfÜm"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_TRANSFORM
;

113 ià(
	gšfe
.
	gv®
 =ğ"efãù"è
pow”s
[
šput_id
].
ty³
 = 
POWTYPE_EFFECT
;

114 
årštf
(
¡d”r
, "unknowÀty³ %s\n", 
šfe
.
v®
.
c_¡r
());

116 ià(
	gšfe
.
	gkey
 == "name")

117 
pow”s
[
šput_id
].
Çme
 = 
msg
->
g‘
(
šfe
.
v®
);

118 ià(
	gšfe
.
	gkey
 == "description")

119 
pow”s
[
šput_id
].
desütiÚ
 = 
msg
->
g‘
(
šfe
.
v®
);

120 ià(
	gšfe
.
	gkey
 == "tag")

121 
pow”s
[
šput_id
].
g
 = 
šfe
.
v®
;

122 ià(
	gšfe
.
	gkey
 == "icon")

123 
pow”s
[
šput_id
].
icÚ
 = 
toIÁ
(
šfe
.
v®
);

124 ià(
	gšfe
.
	gkey
 == "new_state") {

125 ià(
šfe
.
v®
 =ğ"swšg"è
pow”s
[
šput_id
].
Ãw_¡©e
 = 
POWSTATE_SWING
;

126 ià(
	gšfe
.
	gv®
 =ğ"shoÙ"è
pow”s
[
šput_id
].
Ãw_¡©e
 = 
POWSTATE_SHOOT
;

127 ià(
	gšfe
.
	gv®
 =ğ"ÿ¡"è
pow”s
[
šput_id
].
Ãw_¡©e
 = 
POWSTATE_CAST
;

128 ià(
	gšfe
.
	gv®
 =ğ"block"è
pow”s
[
šput_id
].
Ãw_¡©e
 = 
POWSTATE_BLOCK
;

129 ià(
	gšfe
.
	gv®
 =ğ"š¡ªt"è
pow”s
[
šput_id
].
Ãw_¡©e
 = 
POWSTATE_INSTANT
;

130 
årštf
(
¡d”r
, "unknowÀÃw_¡©%s\n", 
šfe
.
v®
.
c_¡r
());

132 ià(
	gšfe
.
	gkey
 == "face")

133 
pow”s
[
šput_id
].
çû
 = 
toBoŞ
(
šfe
.
v®
);

134 ià(
	gšfe
.
	gkey
 == "source_type") {

135 ià(
šfe
.
v®
 =ğ"h”o"è
pow”s
[
šput_id
].
sourû_ty³
 = 
SOURCE_TYPE_HERO
;

136 ià(
	gšfe
.
	gv®
 =ğ"ÃuŒ®"è
pow”s
[
šput_id
].
sourû_ty³
 = 
SOURCE_TYPE_NEUTRAL
;

137 ià(
	gšfe
.
	gv®
 =ğ"’emy"è
pow”s
[
šput_id
].
sourû_ty³
 = 
SOURCE_TYPE_ENEMY
;

138 
årštf
(
¡d”r
, "unknowÀsourû_ty³ %s\n", 
šfe
.
v®
.
c_¡r
());

140 ià(
	gšfe
.
	gkey
 == "beacon")

141 
pow”s
[
šput_id
].
b—cÚ
 = 
toBoŞ
(
šfe
.
v®
);

142 ià(
	gšfe
.
	gkey
 == "count")

143 
pow”s
[
šput_id
].
couÁ
 = 
toIÁ
(
šfe
.
v®
);

144 ià(
	gšfe
.
	gkey
 == "passive")

145 
pow”s
[
šput_id
].
·ssive
 = 
toBoŞ
(
šfe
.
v®
);

146 ià(
	gšfe
.
	gkey
 == "passive_trigger") {

147 ià(
šfe
.
v®
 =ğ"Ú_block"è
pow”s
[
šput_id
].
·ssive_Œigg”
 = 
TRIGGER_BLOCK
;

148 ià(
	gšfe
.
	gv®
 =ğ"Ú_h™"è
pow”s
[
šput_id
].
·ssive_Œigg”
 = 
TRIGGER_HIT
;

149 ià(
	gšfe
.
	gv®
 =ğ"Ú_h®fd—th"è
pow”s
[
šput_id
].
·ssive_Œigg”
 = 
TRIGGER_HALFDEATH
;

150 ià(
	gšfe
.
	gv®
 =ğ"Ú_jošcomb©"è
pow”s
[
šput_id
].
·ssive_Œigg”
 = 
TRIGGER_JOINCOMBAT
;

151 ià(
	gšfe
.
	gv®
 =ğ"Ú_d—th"è
pow”s
[
šput_id
].
·ssive_Œigg”
 = 
TRIGGER_DEATH
;

152 
årštf
(
¡d”r
, "unknowÀ·ssivŒigg” %s\n", 
šfe
.
v®
.
c_¡r
());

155 ià(
	gšfe
.
	gkey
 == "requires_physical_weapon")

156 
pow”s
[
šput_id
].
»quœes_physiÿl_w—pÚ
 = 
toBoŞ
(
šfe
.
v®
);

157 ià(
	gšfe
.
	gkey
 == "requires_mental_weapon")

158 
pow”s
[
šput_id
].
»quœes_m’l_w—pÚ
 = 
toBoŞ
(
šfe
.
v®
);

159 ià(
	gšfe
.
	gkey
 == "requires_offense_weapon")

160 
pow”s
[
šput_id
].
»quœes_ofãn£_w—pÚ
 = 
toBoŞ
(
šfe
.
v®
);

161 ià(
	gšfe
.
	gkey
 == "requires_mp")

162 
pow”s
[
šput_id
].
»quœes_mp
 = 
toIÁ
(
šfe
.
v®
);

163 ià(
	gšfe
.
	gkey
 == "requires_hp")

164 
pow”s
[
šput_id
].
»quœes_hp
 = 
toIÁ
(
šfe
.
v®
);

165 ià(
	gšfe
.
	gkey
 == "sacrifice")

166 
pow”s
[
šput_id
].
§üifiû
 = 
toBoŞ
(
šfe
.
v®
);

167 ià(
	gšfe
.
	gkey
 == "requires_los")

168 
pow”s
[
šput_id
].
»quœes_los
 = 
toBoŞ
(
šfe
.
v®
);

169 ià(
	gšfe
.
	gkey
 == "requires_empty_target")

170 
pow”s
[
šput_id
].
»quœes_em±y_rg‘
 = 
toBoŞ
(
šfe
.
v®
);

171 ià(
	gšfe
.
	gkey
 == "requires_item")

172 
pow”s
[
šput_id
].
»quœes_™em
 = 
toIÁ
(
šfe
.
v®
);

173 ià(
	gšfe
.
	gkey
 == "requires_equipped_item")

174 
pow”s
[
šput_id
].
»quœes_equ³d_™em
 = 
toIÁ
(
šfe
.
v®
);

175 ià(
	gšfe
.
	gkey
 == "requires_targeting")

176 
pow”s
[
šput_id
].
»quœes_rg‘šg
 = 
toBoŞ
(
šfe
.
v®
);

177 ià(
	gšfe
.
	gkey
 == "cooldown")

178 
pow”s
[
šput_id
].
coŞdown
 = 
·r£_du¿tiÚ
(
šfe
.
v®
);

180 ià(
	gšfe
.
	gkey
 == "animation")

181 
pow”s
[
šput_id
].
ªim©iÚ_Çme
 = "ªim©iÚs/pow”s/" + 
šfe
.
v®
;

182 ià(
	gšfe
.
	gkey
 == "soundfx")

183 
pow”s
[
šput_id
].
sfx_šdex
 = 
lßdSFX
(
šfe
.
v®
);

184 ià(
	gšfe
.
	gkey
 == "directional")

185 
pow”s
[
šput_id
].
dœeùiÚ®
 = 
toBoŞ
(
šfe
.
v®
);

186 ià(
	gšfe
.
	gkey
 == "visual_random")

187 
pow”s
[
šput_id
].
visu®_¿ndom
 = 
toIÁ
(
šfe
.
v®
);

188 ià(
	gšfe
.
	gkey
 == "visual_option")

189 
pow”s
[
šput_id
].
visu®_İtiÚ
 = 
toIÁ
(
šfe
.
v®
);

190 ià(
	gšfe
.
	gkey
 == "aim_assist")

191 
pow”s
[
šput_id
].
aim_assi¡
 = 
toBoŞ
(
šfe
.
v®
);

192 ià(
	gšfe
.
	gkey
 == "speed")

193 
pow”s
[
šput_id
].
¥“d
 = 
toIÁ
(
šfe
.
v®
);

194 ià(
	gšfe
.
	gkey
 == "lifespan")

195 
pow”s
[
šput_id
].
liã¥ª
 = 
·r£_du¿tiÚ
(
šfe
.
v®
);

196 ià(
	gšfe
.
	gkey
 == "floor")

197 
pow”s
[
šput_id
].
æoÜ
 = 
toBoŞ
(
šfe
.
v®
);

198 ià(
	gšfe
.
	gkey
 == "complete_animation")

199 
pow”s
[
šput_id
].
com¶‘e_ªim©iÚ
 = 
toBoŞ
(
šfe
.
v®
);

201 ià(
	gšfe
.
	gkey
 == "use_hazard")

202 
pow”s
[
šput_id
].
u£_haz¬d
 = 
toBoŞ
(
šfe
.
v®
);

203 ià(
	gšfe
.
	gkey
 == "no_attack")

204 
pow”s
[
šput_id
].
no_©ck
 = 
toBoŞ
(
šfe
.
v®
);

205 ià(
	gšfe
.
	gkey
 == "radius")

206 
pow”s
[
šput_id
].
¿dius
 = 
toIÁ
(
šfe
.
v®
);

207 ià(
	gšfe
.
	gkey
 == "base_damage") {

208 ià(
šfe
.
v®
 =ğ"nÚe"è
pow”s
[
šput_id
].
ba£_damage
 = 
BASE_DAMAGE_NONE
;

209 ià(
	gšfe
.
	gv®
 =ğ"m–“"è
pow”s
[
šput_id
].
ba£_damage
 = 
BASE_DAMAGE_MELEE
;

210 ià(
	gšfe
.
	gv®
 =ğ"¿nged"è
pow”s
[
šput_id
].
ba£_damage
 = 
BASE_DAMAGE_RANGED
;

211 ià(
	gšfe
.
	gv®
 =ğ"m’t"è
pow”s
[
šput_id
].
ba£_damage
 = 
BASE_DAMAGE_MENT
;

212 
årštf
(
¡d”r
, "unknowÀba£_damag%s\n", 
šfe
.
v®
.
c_¡r
());

214 ià(
	gšfe
.
	gkey
 == "damage_multiplier")

215 
pow”s
[
šput_id
].
damage_muÉl›r
 = 
toIÁ
(
šfe
.
v®
);

216 ià(
	gšfe
.
	gkey
 == "starting_pos") {

217 ià(
šfe
.
v®
 =ğ"sourû"è
pow”s
[
šput_id
].
¡¬tšg_pos
 = 
STARTING_POS_SOURCE
;

218 ià(
	gšfe
.
	gv®
 =ğ"rg‘"è
pow”s
[
šput_id
].
¡¬tšg_pos
 = 
STARTING_POS_TARGET
;

219 ià(
	gšfe
.
	gv®
 =ğ"m–“"è
pow”s
[
šput_id
].
¡¬tšg_pos
 = 
STARTING_POS_MELEE
;

220 
årštf
(
¡d”r
, "unknowÀ¡¬tšg_po %s\n", 
šfe
.
v®
.
c_¡r
());

222 ià(
	gšfe
.
	gkey
 == "multitarget")

223 
pow”s
[
šput_id
].
muÉ™¬g‘
 = 
toBoŞ
(
šfe
.
v®
);

224 ià(
	gšfe
.
	gkey
 == "trait_armor_penetration")

225 
pow”s
[
šput_id
].
Œa™_¬mÜ_³ÃŒ©iÚ
 = 
toBoŞ
(
šfe
.
v®
);

226 ià(
	gšfe
.
	gkey
 == "trait_crits_impaired")

227 
pow”s
[
šput_id
].
Œa™_ü™s_im·œed
 = 
toIÁ
(
šfe
.
v®
);

228 ià(
	gšfe
.
	gkey
 == "trait_elemental") {

229 
i
=0; 
	gi
<
	gELEMENTS
.
size
(); i++) {

230 ià(
	gšfe
.
	gv®
 =ğ
ELEMENTS
[
i
].
Çme
è
pow”s
[
šput_id
].
Œa™_–em’l
 = i;

233 ià(
	gšfe
.
	gkey
 == "range")

234 
pow”s
[
šput_id
].
¿nge
 = 
toIÁ
(
šfe
.
ÃxtV®ue
());

236 ià(
	gšfe
.
	gkey
 == "hp_steal")

237 
pow”s
[
šput_id
].
hp_¡—l
 = 
toIÁ
(
šfe
.
v®
);

238 ià(
	gšfe
.
	gkey
 == "mp_steal")

239 
pow”s
[
šput_id
].
mp_¡—l
 = 
toIÁ
(
šfe
.
v®
);

241 ià(
	gšfe
.
	gkey
 == "missile_angle")

242 
pow”s
[
šput_id
].
misse_ªgË
 = 
toIÁ
(
šfe
.
v®
);

243 ià(
	gšfe
.
	gkey
 == "angle_variance")

244 
pow”s
[
šput_id
].
ªgË_v¬Ÿnû
 = 
toIÁ
(
šfe
.
v®
);

245 ià(
	gšfe
.
	gkey
 == "speed_variance")

246 
pow”s
[
šput_id
].
¥“d_v¬Ÿnû
 = 
toIÁ
(
šfe
.
v®
);

248 ià(
	gšfe
.
	gkey
 == "delay")

249 
pow”s
[
šput_id
].
d–ay
 = 
·r£_du¿tiÚ
(
šfe
.
v®
);

251 ià(
	gšfe
.
	gkey
 == "transform_duration")

252 
pow”s
[
šput_id
].
ŒªsfÜm_du¿tiÚ
 = 
toIÁ
(
šfe
.
v®
);

253 ià(
	gšfe
.
	gkey
 == "manual_untransform")

254 
pow”s
[
šput_id
].
mªu®_uÁ¿nsfÜm
 = 
toBoŞ
(
šfe
.
v®
);

255 ià(
	gšfe
.
	gkey
 == "keep_equipment")

256 
pow”s
[
šput_id
].
k“p_equm’t
 = 
toBoŞ
(
šfe
.
v®
);

258 ià(
	gšfe
.
	gkey
 == "buff")

259 
pow”s
[
šput_id
].
buff
ğ
toBoŞ
(
šfe
.
v®
);

260 ià(
	gšfe
.
	gkey
 == "buff_teleport")

261 
pow”s
[
šput_id
].
buff_‹ËpÜt
 = 
toBoŞ
(
šfe
.
v®
);

262 ià(
	gšfe
.
	gkey
 == "post_effect") {

263 
šfe
.
v®
 = infile.val + ',';

264 
Po¡Efãù
 
	g³
;

265 
	g³
.
	gid
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

266 
	g³
.
	gmagn™ude
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

267 
	g³
.
	gdu¿tiÚ
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

268 
	gpow”s
[
šput_id
].
	gpo¡_efãùs
.
push_back
(
³
);

270 ià(
	gšfe
.
	gkey
 == "effect_type")

271 
pow”s
[
šput_id
].
efãù_ty³
 = 
šfe
.
v®
;

272 ià(
	gšfe
.
	gkey
 == "effect_additive")

273 
pow”s
[
šput_id
].
efãù_add™ive
 = 
toBoŞ
(
šfe
.
v®
);

274 ià(
	gšfe
.
	gkey
 == "effect_render_above")

275 
pow”s
[
šput_id
].
efãù_»nd”_above
 = 
toBoŞ
(
šfe
.
v®
);

277 ià(
	gšfe
.
	gkey
 == "post_power")

278 
pow”s
[
šput_id
].
po¡_pow”
 = 
toIÁ
(
šfe
.
v®
);

279 ià(
	gšfe
.
	gkey
 == "wall_power")

280 
pow”s
[
šput_id
].
w®l_pow”
 = 
toIÁ
(
šfe
.
v®
);

281 ià(
	gšfe
.
	gkey
 == "allow_power_mod")

282 
pow”s
[
šput_id
].
®low_pow”_mod
 = 
toBoŞ
(
šfe
.
v®
);

284 ià(
	gšfe
.
	gkey
 == "spawn_type")

285 
pow”s
[
šput_id
].
¥awn_ty³
 = 
šfe
.
v®
;

286 ià(
	gšfe
.
	gkey
 == "target_neighbor")

287 
pow”s
[
šput_id
].
rg‘_ÃighbÜ
 = 
toIÁ
(
šfe
.
v®
);

289 
årštf
(
¡d”r
, "ignÜšg unknowÀkey % £ˆtØ%s\n", 
šfe
.
key
.
c_¡r
(), infe.
v®
.c_str());

291 
	gšfe
.
şo£
();

300 
	gPow”Mªag”
::
	$lßdSFX
(cÚ¡ 
¡ršg
& 
f’ame
) {

302 
SoundMªag”
::
SoundID
 
sid
 = 
¢d
->
	`lßd
("soundfx/pow”s/" + 
f’ame
, "PowerManager sfx");

303 
veùÜ
<
SoundMªag”
::
SoundID
>::
™”©Ü
 
™
 = 
¡d
::
	`fšd
(
sfx
.
	`begš
(), sfx.
	`’d
(), 
sid
);

304 ià(
™
 =ğ
sfx
.
	`’d
()) {

305 
sfx
.
	`push_back
(
sid
);

306  
sfx
.
	`size
() - 1;

309  
™
 - 
sfx
.
	`begš
();

310 
	}
}

316 
	gPow”Mªag”
::
	$hªdËNewM­
(
M­CŞlisiÚ
 *
_cŞlid”
) {

317 
cŞlid”
 = 
_cŞlid”
;

318 
	}
}

321 
	gPow”Mªag”
::
	$ÿlcTh‘a
(
x1
, 
y1
, 
x2
, 
y2
) {

323 
pi
 = 3.1415926535898f;

326 
dx
 = ()
x2
 - ()
x1
;

327 
dy
 = ()
y2
 - ()
y1
;

328 
exaù_dx
 = 
x2
 - 
x1
;

329 
th‘a
;

332 ià(
exaù_dx
 == 0) {

333 ià(
dy
 > 0.0è
th‘a
 = 
pi
/2.0f;

334 
th‘a
 = -
pi
/2.0f;

337 
th‘a
 = 
	`©ª
(
dy
/
dx
);

338 ià(
dx
 < 0.0 && 
dy
 >ğ0.0è
th‘a
 +ğ
pi
;

339 ià(
dx
 < 0.0 && 
dy
 < 0.0è
th‘a
 -ğ
pi
;

341  
th‘a
;

342 
	}
}

347 
	gPow”Mªag”
::
	$ÿlcDœeùiÚ
(
Üigš_x
, 
Üigš_y
, 
rg‘_x
, 
rg‘_y
) {

352 
dx
 = 
rg‘_x
 - 
Üigš_x
;

353 
dy
 = 
Üigš_y
 - 
rg‘_y
;

356 ià(
dx
 == 0) {

357 ià(
dy
 > 0)  3;

361 
¦İe
 = (()
dy
)/(()
dx
);

362 ià(0.5 <ğ
¦İe
 && slope <= 2.0) {

363 ià(
dy
 > 0)  4;

366 ià(-0.5 <ğ
¦İe
 && slope <= 0.5) {

367 ià(
dx
 > 0)  5;

370 ià(-2.0 <ğ
¦İe
 && slope <= -0.5) {

371 ià(
dx
 > 0)  6;

374 ià(2.0 <ğ
¦İe
 || -2.0 >= slope) {

375 ià(
dy
 > 0)  3;

379 
	}
}

384 
Pošt
 
	gPow”Mªag”
::
	$lim™Rªge
(
¿nge
, 
Pošt
 
¤c
, Pošˆ
rg‘
) {

385 ià(
¿nge
 > 0) {

386 ià(
¤c
.
x
+
¿nge
 < 
rg‘
.x)

387 
rg‘
.
x
 = 
¤c
.x+
¿nge
;

388 ià(
¤c
.
x
-
¿nge
 > 
rg‘
.x)

389 
rg‘
.
x
 = 
¤c
.x-
¿nge
;

390 ià(
¤c
.
y
+
¿nge
 < 
rg‘
.y)

391 
rg‘
.
y
 = 
¤c
.y+
¿nge
;

392 ià(
¤c
.
y
-
¿nge
 > 
rg‘
.y)

393 
rg‘
.
y
 = 
¤c
.y-
¿nge
;

396  
rg‘
;

397 
	}
}

402 
boŞ
 
	gPow”Mªag”
::
	$hasV®idT¬g‘
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

404 ià(!
cŞlid”
è 
çl£
;

406 
rg‘
 = 
	`lim™Rªge
(
pow”s
[
pow”_šdex
].
¿nge
,
¤c_¡©s
->
pos
,target);

408 ià(!
cŞlid”
->
	`is_em±y
(
rg‘
.
x
,¬g‘.
y
è|| cŞlid”->
	`is_w®l
(target.x,target.y)) {

409 ià(
pow”s
[
pow”_šdex
].
buff_‹ËpÜt
) {

410  
çl£
;

414  
Œue
;

415 
	}
}

417 
Pošt
 
	gPow”Mªag”
::
	$rg‘NeighbÜ
(
Pošt
 
rg‘
, 
¿nge
) {

418  
	`rg‘NeighbÜ
(
rg‘
,
¿nge
,
çl£
);

419 
	}
}

425 
Pošt
 
	gPow”Mªag”
::
	$rg‘NeighbÜ
(
Pošt
 
rg‘
, 
¿nge
, 
boŞ
 
ignÜe_blocked
) {

426 
Pošt
 
Ãw_rg‘
 = 
rg‘
;

427 
¡d
::
veùÜ
<
Pošt
> 
v®id_tes
;

429 
i
=-
¿nge
; i<=range; i++) {

430 
j
=-
¿nge
; j<=range; j++) {

431 ià(
i
 =ğ0 && 
j
 == 0) ;

432 
Ãw_rg‘
.
x
 = 
rg‘
.x+
UNITS_PER_TILE
*
i
;

433 
Ãw_rg‘
.
y
 = 
rg‘
.y+
UNITS_PER_TILE
*
j
;

434 ià(
cŞlid”
->
	`is_v®id_pos™iÚ
(
Ãw_rg‘
.
x
,Ãw_rg‘.
y
,
MOVEMENT_NORMAL
è|| 
ignÜe_blocked
)

435 
v®id_tes
.
	`push_back
(
Ãw_rg‘
);

439 ià(!
v®id_tes
.
	`em±y
())

440  
v®id_tes
[
	`¿nd
(è% v®id_tes.
	`size
()];

442  
rg‘
;

443 
	}
}

457 
	gPow”Mªag”
::
	$š™Haz¬d
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
, 
Haz¬d
 *
haz
) {

460 
haz
->
¤c_¡©s
 = src_stats;

462 
haz
->
pow”_šdex
 =…ower_index;

464 ià(
pow”s
[
pow”_šdex
].
sourû_ty³
 == -1){

465 ià(
¤c_¡©s
->
h”o
è
haz
->
sourû_ty³
 = 
SOURCE_TYPE_HERO
;

466 
haz
->
sourû_ty³
 = 
SOURCE_TYPE_ENEMY
;

469 
haz
->
sourû_ty³
 = 
pow”s
[
pow”_šdex
].source_type;

473 
haz
->
ü™_chªû
 = 
¤c_¡©s
->
ü™
;

474 
haz
->
accu¿cy
 = 
¤c_¡©s
->accuracy;

478 ià(
haz
->
dmg_max
 == 0) {

481 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MELEE
) {

482 
haz
->
dmg_mš
 = 
¤c_¡©s
->
dmg_m–“_mš
;

483 
haz
->
dmg_max
 = 
¤c_¡©s
->
dmg_m–“_max
;

485 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_RANGED
) {

486 
haz
->
dmg_mš
 = 
¤c_¡©s
->
dmg_¿nged_mš
;

487 
haz
->
dmg_max
 = 
¤c_¡©s
->
dmg_¿nged_max
;

489 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MENT
) {

490 
haz
->
dmg_mš
 = 
¤c_¡©s
->
dmg_m’t_mš
;

491 
haz
->
dmg_max
 = 
¤c_¡©s
->
dmg_m’t_max
;

495 
haz
->
dmg_mš
 = ()
	`û
((haz->dmg_mš * 
pow”s
[
pow”_šdex
].
damage_muÉl›r
) / 100.0);

496 
haz
->
dmg_max
 = ()
	`û
((haz->dmg_max * 
pow”s
[
pow”_šdex
].
damage_muÉl›r
) / 100.0);

503 ià(
pow”s
[
pow”_šdex
].
ªim©iÚ_Çme
 != "")

504 
haz
->
	`lßdAnim©iÚ
(
pow”s
[
pow”_šdex
].
ªim©iÚ_Çme
);

505 ià(
pow”s
[
pow”_šdex
].
liã¥ª
 != 0)

506 
haz
->
liã¥ª
 = 
pow”s
[
pow”_šdex
].lifespan;

507 ià(
pow”s
[
pow”_šdex
].
dœeùiÚ®
)

508 
haz
->
ªim©iÚKšd
 = 
	`ÿlcDœeùiÚ
(
¤c_¡©s
->
pos
.
x
, src_¡©s->pos.
y
, 
rg‘
.x,arget.y);

509 ià(
pow”s
[
pow”_šdex
].
visu®_¿ndom
)

510 
haz
->
ªim©iÚKšd
 = 
	`¿nd
(è% 
pow”s
[
pow”_šdex
].
visu®_¿ndom
;

511 ià(
pow”s
[
pow”_šdex
].
visu®_İtiÚ
)

512 
haz
->
ªim©iÚKšd
 = 
pow”s
[
pow”_šdex
].
visu®_İtiÚ
;

514 
haz
->
æoÜ
 = 
pow”s
[
pow”_šdex
].floor;

515 
haz
->
ba£_¥“d
 = 
pow”s
[
pow”_šdex
].
¥“d
;

516 
haz
->
com¶‘e_ªim©iÚ
 = 
pow”s
[
pow”_šdex
].complete_animation;

519 ià(
pow”s
[
pow”_šdex
].
no_©ck
) {

520 
haz
->
aùive
 = 
çl£
;

522 ià(
pow”s
[
pow”_šdex
].
muÉ™¬g‘
) {

523 
haz
->
muÉ™¬g‘
 = 
Œue
;

525 ià(
pow”s
[
pow”_šdex
].
¿dius
 != 0) {

526 
haz
->
¿dius
 = 
pow”s
[
pow”_šdex
].radius;

528 ià(
pow”s
[
pow”_šdex
].
Œa™_¬mÜ_³ÃŒ©iÚ
) {

529 
haz
->
Œa™_¬mÜ_³ÃŒ©iÚ
 = 
Œue
;

531 
haz
->
Œa™_ü™s_im·œed
 = 
pow”s
[
pow”_šdex
].trait_crits_impaired;

532 ià(
pow”s
[
pow”_šdex
].
Œa™_–em’l
 != -1) {

533 
haz
->
Œa™_–em’l
 = 
pow”s
[
pow”_šdex
].trait_elemental;

538 
haz
->
hp_¡—l
 +ğ
pow”s
[
pow”_šdex
].hp_steal;

539 
haz
->
mp_¡—l
 +ğ
pow”s
[
pow”_šdex
].mp_steal;

542 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_SOURCE
) {

543 
haz
->
pos
.
x
 = ()
¤c_¡©s
->pos.x;

544 
haz
->
pos
.
y
 = ()
¤c_¡©s
->pos.y;

546 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_TARGET
) {

547 
rg‘
 = 
	`lim™Rªge
(
pow”s
[
pow”_šdex
].
¿nge
,
¤c_¡©s
->
pos
,target);

548 
haz
->
pos
.
x
 = ()
rg‘
.x;

549 
haz
->
pos
.
y
 = ()
rg‘
.y;

551 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_MELEE
) {

552 
haz
->
pos
 = 
	`ÿlcVeùÜ
(
¤c_¡©s
->pos, src_¡©s->
dœeùiÚ
, src_¡©s->
m–“_¿nge
);

554 ià(
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
 > 0) {

555 
Pošt
 
Ãw_rg‘
 = 
	`rg‘NeighbÜ
(
¤c_¡©s
->
pos
,
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
,
Œue
);

556 
haz
->
pos
.
x
 = ()
Ãw_rg‘
.x;

557 
haz
->
pos
.
y
 = ()
Ãw_rg‘
.y;

561 ià(
pow”s
[
pow”_šdex
].
po¡_pow”
 != 0) {

562 
haz
->
po¡_pow”
 = 
pow”s
[
pow”_šdex
].post_power;

564 ià(
pow”s
[
pow”_šdex
].
w®l_pow”
 != 0) {

565 
haz
->
w®l_pow”
 = 
pow”s
[
pow”_šdex
].wall_power;

569 ià(
haz
->
mod_pow”
 =ğ0 && 
pow”s
[
pow”_šdex
].
®low_pow”_mod
) {

570 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MELEE
 && 
¤c_¡©s
->
m–“_w—pÚ_pow”
 != 0) {

571 
haz
->
mod_pow”
 = 
pow”_šdex
;

572 
	`š™Haz¬d
(
¤c_¡©s
->
m–“_w—pÚ_pow”
, src_¡©s, 
rg‘
, 
haz
);

574 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MENT
 && 
¤c_¡©s
->
m’l_w—pÚ_pow”
 != 0) {

575 
haz
->
mod_pow”
 = 
pow”_šdex
;

576 
	`š™Haz¬d
(
¤c_¡©s
->
m’l_w—pÚ_pow”
, src_¡©s, 
rg‘
, 
haz
);

578 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_RANGED
 && 
¤c_¡©s
->
¿nged_w—pÚ_pow”
 != 0) {

579 
haz
->
mod_pow”
 = 
pow”_šdex
;

580 
	`š™Haz¬d
(
¤c_¡©s
->
¿nged_w—pÚ_pow”
, src_¡©s, 
rg‘
, 
haz
);

583 
	}
}

589 
	gPow”Mªag”
::
	$buff
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

592 ià(
pow”s
[
pow”_šdex
].
buff_‹ËpÜt
) {

593 
rg‘
 = 
	`lim™Rªge
(
pow”s
[
pow”_šdex
].
¿nge
,
¤c_¡©s
->
pos
,target);

594 ià(
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
 > 0) {

595 
Pošt
 
Ãw_rg‘
 = 
	`rg‘NeighbÜ
(
rg‘
,
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
);

596 ià(
Ãw_rg‘
.
x
 =ğ
rg‘
.x &&‚ew_rg‘.
y
 ==arget.y) {

597 
¤c_¡©s
->
‹ËpÜtiÚ
 = 
çl£
;

599 
¤c_¡©s
->
‹ËpÜtiÚ
 = 
Œue
;

600 
¤c_¡©s
->
‹ËpÜt_de¡š©iÚ
.
x
 = 
Ãw_rg‘
.x;

601 
¤c_¡©s
->
‹ËpÜt_de¡š©iÚ
.
y
 = 
Ãw_rg‘
.y;

604 
¤c_¡©s
->
‹ËpÜtiÚ
 = 
Œue
;

605 
¤c_¡©s
->
‹ËpÜt_de¡š©iÚ
.
x
 = 
rg‘
.x;

606 
¤c_¡©s
->
‹ËpÜt_de¡š©iÚ
.
y
 = 
rg‘
.y;

611 ià(
pow”s
[
pow”_šdex
].
buff
) {

612 
	`efãù
(
¤c_¡©s
, 
pow”_šdex
);

617 ià(!
pow”s
[
pow”_šdex
].
u£_haz¬d
) {

618 
	`aùiv©e
(
pow”s
[
pow”_šdex
].
po¡_pow”
, 
¤c_¡©s
, src_¡©s->
pos
);

620 
	}
}

626 
	gPow”Mªag”
::
	$¶aySound
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
) {

627 
boŞ
 
¶ay_ba£_sound
 = 
çl£
;

629 ià(
pow”s
[
pow”_šdex
].
®low_pow”_mod
) {

630 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MELEE
 && 
¤c_¡©s
->
m–“_w—pÚ_pow”
 != 0

631 && 
pow”s
[
¤c_¡©s
->
m–“_w—pÚ_pow”
].
sfx_šdex
 != -1) {

632 
¢d
->
	`¶ay
(
sfx
[
pow”s
[
¤c_¡©s
->
m–“_w—pÚ_pow”
].
sfx_šdex
]);

634 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_MENT
 && 
¤c_¡©s
->
m’l_w—pÚ_pow”
 != 0

635 && 
pow”s
[
¤c_¡©s
->
m’l_w—pÚ_pow”
].
sfx_šdex
 != -1) {

636 
¢d
->
	`¶ay
(
sfx
[
pow”s
[
¤c_¡©s
->
m’l_w—pÚ_pow”
].
sfx_šdex
]);

638 ià(
pow”s
[
pow”_šdex
].
ba£_damage
 =ğ
BASE_DAMAGE_RANGED
 && 
¤c_¡©s
->
¿nged_w—pÚ_pow”
 != 0

639 && 
pow”s
[
¤c_¡©s
->
¿nged_w—pÚ_pow”
].
sfx_šdex
 != -1) {

640 
¢d
->
	`¶ay
(
sfx
[
pow”s
[
¤c_¡©s
->
¿nged_w—pÚ_pow”
].
sfx_šdex
]);

642 
¶ay_ba£_sound
 = 
Œue
;

644 
¶ay_ba£_sound
 = 
Œue
;

646 ià(
¶ay_ba£_sound
 && 
pow”s
[
pow”_šdex
].
sfx_šdex
 != -1)

647 
¢d
->
	`¶ay
(
sfx
[
pow”s
[
pow”_šdex
].
sfx_šdex
]);

648 
	}
}

650 
boŞ
 
	gPow”Mªag”
::
	$efãù
(
StBlock
 *
¤c_¡©s
, 
pow”_šdex
) {

651 
i
=0; i<
pow”s
[
pow”_šdex
].
po¡_efãùs
.
	`size
(); i++) {

653 
efãù_šdex
 = 
pow”s
[
pow”_šdex
].
po¡_efãùs
[
i
].
id
;

654 
magn™ude
 = 
pow”s
[
pow”_šdex
].
po¡_efãùs
[
i
].magnitude;

655 
du¿tiÚ
 = 
pow”s
[
pow”_šdex
].
po¡_efãùs
[
i
].duration;

657 ià(
efãù_šdex
 > 0) {

658 ià(
pow”s
[
efãù_šdex
].
efãù_ty³
 == "shield") {

660 
magn™ude
 = ()
	`û
(
¤c_¡©s
->
dmg_m’t_max
 * 
pow”s
[
pow”_šdex
].
damage_muÉl›r
 / 100.0);

661 
comb
->
	`addMes§ge
(
msg
->
	`g‘
("+%d Sh›ld",
magn™ude
), 
¤c_¡©s
->
pos
, 
COMBAT_MESSAGE_BUFF
);

662 } ià(
pow”s
[
efãù_šdex
].
efãù_ty³
 == "heal") {

664 
h—l_max
 = ()
	`û
(
¤c_¡©s
->
dmg_m’t_max
 * 
pow”s
[
pow”_šdex
].
damage_muÉl›r
 / 100.0);

665 
h—l_mš
 = ()
	`û
(
¤c_¡©s
->
dmg_m’t_mš
 * 
pow”s
[
pow”_šdex
].
damage_muÉl›r
 / 100.0);

666 
magn™ude
 = 
	`¿ndB‘w“n
(
h—l_mš
, 
h—l_max
-1);

668 
comb
->
	`addMes§ge
(
msg
->
	`g‘
("+%d HP",
magn™ude
), 
¤c_¡©s
->
pos
, 
COMBAT_MESSAGE_BUFF
);

669 
¤c_¡©s
->
hp
 +ğ
magn™ude
;

670 ià(
¤c_¡©s
->
hp
 > src_¡©s->
maxhp
) src_stats->hp = src_stats->maxhp;

673 
·ssive_id
 = 0;

674 ià(
pow”s
[
pow”_šdex
].
·ssive
è
·ssive_id
 =…ower_index;

676 
¤c_¡©s
->
efãùs
.
	`addEfãù
(
efãù_šdex
, 
pow”s
[efãù_šdex].
icÚ
, 
du¿tiÚ
, 
magn™ude
,…ow”s[efãù_šdex].
efãù_ty³
,…ow”s[efãù_šdex].
ªim©iÚ_Çme
,…ow”s[efãù_šdex].
efãù_add™ive
, 
çl£
,…ow”s[
pow”_šdex
].
·ssive_Œigg”
,…ow”s[efãù_šdex].
efãù_»nd”_above
, 
·ssive_id
);

680 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

683  
Œue
;

684 
	}
}

694 
boŞ
 
	gPow”Mªag”
::
	$fixed
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

696 ià(
pow”s
[
pow”_šdex
].
u£_haz¬d
) {

697 
d–ay_™”©Ü
 = 0;

698 
i
=0; i < 
pow”s
[
pow”_šdex
].
couÁ
; i++) {

699 
Haz¬d
 *
haz
 = 
Ãw
 
	`Haz¬d
(
cŞlid”
);

700 
	`š™Haz¬d
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
, 
haz
);

703 
haz
->
d–ay_äames
 = 
d–ay_™”©Ü
;

704 
d–ay_™”©Ü
 +ğ
pow”s
[
pow”_šdex
].
d–ay
;

707 
haz¬ds
.
	`push
(
haz
);

711 
	`buff
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

714 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

716 
	`·yPow”Co¡
(
pow”_šdex
, 
¤c_¡©s
);

717  
Œue
;

718 
	}
}

730 
boŞ
 
	gPow”Mªag”
::
	$misse
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

731 
pi
 = 3.1415926535898f;

733 
Pošt
 
¤c
;

734 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_TARGET
) {

735 
¤c
.
x
 = 
rg‘
.x;

736 
¤c
.
y
 = 
rg‘
.y;

739 
¤c
.
x
 = 
¤c_¡©s
->
pos
.x;

740 
¤c
.
y
 = 
¤c_¡©s
->
pos
.y;

744 
th‘a
 = 
	`ÿlcTh‘a
(
¤c
.
x
, src.
y
, 
rg‘
.x,arget.y);

746 
d–ay_™”©Ü
 = 0;

749 
i
=0; i < 
pow”s
[
pow”_šdex
].
couÁ
; i++) {

750 
Haz¬d
 *
haz
 = 
Ãw
 
	`Haz¬d
(
cŞlid”
);

753 
off£t_ªgË
 = ((1.0à- 
pow”s
[
pow”_šdex
].
couÁ
)/2 + 
i
è* (pow”s[pow”_šdex].
misse_ªgË
 * 
pi
 / 180.0f);

754 
v¬Ÿnû
 = 0;

755 ià(
pow”s
[
pow”_šdex
].
ªgË_v¬Ÿnû
 != 0)

756 
v¬Ÿnû
 = 
	`pow
(-1.0f, (
	`¿nd
(è% 2è- 1è* (¿nd(è% 
pow”s
[
pow”_šdex
].
ªgË_v¬Ÿnû
è* 
pi
 / 180.0f;

757 
®pha
 = 
th‘a
 + 
off£t_ªgË
 + 
v¬Ÿnû
;

758 
®pha
 >ğ
pi
+pi)‡lpha -=…i+pi;

759 
®pha
 < 0.0è®ph¨+ğ
pi
+pi;

761 
	`š™Haz¬d
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
, 
haz
);

764 
¥“d_v¬
 = 0;

765 ià(
pow”s
[
pow”_šdex
].
¥“d_v¬Ÿnû
 != 0)

766 
¥“d_v¬
 = ()(
	`pow
(-1.0f, (
	`¿nd
(è% 2è- 1è* (¿nd(è% 
pow”s
[
pow”_šdex
].
¥“d_v¬Ÿnû
 + 1) - 1);

767 
haz
->
¥“d
.
x
 = (haz->
ba£_¥“d
 + 
¥“d_v¬
è* 
	`cos
(
®pha
);

768 
haz
->
¥“d
.
y
 = (haz->
ba£_¥“d
 + 
¥“d_v¬
è* 
	`sš
(
®pha
);

771 ià(
pow”s
[
pow”_šdex
].
dœeùiÚ®
)

772 
haz
->
ªim©iÚKšd
 = 
	`ÿlcDœeùiÚ
(

773 
¤c
.
x
, src.
y
,

774 
¡©ic_ÿ¡
<>(
¤c
.
x
 + 
UNITS_PER_TILE
 * 
haz
->
¥“d
.x),

775 
¡©ic_ÿ¡
<>(
¤c
.
y
 + 
UNITS_PER_TILE
 * 
haz
->
¥“d
.y));

778 
haz
->
d–ay_äames
 = 
d–ay_™”©Ü
;

779 
d–ay_™”©Ü
 +ğ
pow”s
[
pow”_šdex
].
d–ay
;

781 
haz¬ds
.
	`push
(
haz
);

784 
	`·yPow”Co¡
(
pow”_šdex
, 
¤c_¡©s
);

786 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

787  
Œue
;

788 
	}
}

793 
boŞ
 
	gPow”Mªag”
::
	$»³©”
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

795 
	`·yPow”Co¡
(
pow”_šdex
, 
¤c_¡©s
);

798 
FPošt
 
loÿtiÚ_™”©Ü
;

799 
FPošt
 
¥“d
;

800 
d–ay_™”©Ü
 = 0;

801 
m­_¥“d
 = 64;

804 
th‘a
 = 
	`ÿlcTh‘a
(
¤c_¡©s
->
pos
.
x
, src_¡©s->pos.
y
, 
rg‘
.x,arget.y);

806 
¥“d
.
x
 = ()
m­_¥“d
 * 
	`cos
(
th‘a
);

807 
¥“d
.
y
 = ()
m­_¥“d
 * 
	`sš
(
th‘a
);

809 
loÿtiÚ_™”©Ü
.
x
 = ()
¤c_¡©s
->
pos
.x;

810 
loÿtiÚ_™”©Ü
.
y
 = ()
¤c_¡©s
->
pos
.y;

812 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

814 
i
=0; i<
pow”s
[
pow”_šdex
].
couÁ
; i++) {

816 
loÿtiÚ_™”©Ü
.
x
 +ğ
¥“d
.x;

817 
loÿtiÚ_™”©Ü
.
y
 +ğ
¥“d
.y;

820 ià(
cŞlid”
->
	`is_w®l
(()
loÿtiÚ_™”©Ü
.
x
, (îoÿtiÚ_™”©Ü.
y
)) {

824 
Haz¬d
 *
haz
 = 
Ãw
 
	`Haz¬d
(
cŞlid”
);

825 
	`š™Haz¬d
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
, 
haz
);

827 
haz
->
pos
.
x
 = 
loÿtiÚ_™”©Ü
.x;

828 
haz
->
pos
.
y
 = 
loÿtiÚ_™”©Ü
.y;

829 
haz
->
d–ay_äames
 = 
d–ay_™”©Ü
;

830 
d–ay_™”©Ü
 +ğ
pow”s
[
pow”_šdex
].
d–ay
;

832 
haz¬ds
.
	`push
(
haz
);

835  
Œue
;

837 
	}
}

843 
boŞ
 
	gPow”Mªag”
::
	$¥awn
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

846 
	`buff
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

849 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

851 
M­_EÃmy
 
e¥awn
;

852 
e¥awn
.
ty³
 = 
pow”s
[
pow”_šdex
].
¥awn_ty³
;

855 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_SOURCE
) {

856 
e¥awn
.
pos
.
x
 = 
¤c_¡©s
->pos.x;

857 
e¥awn
.
pos
.
y
 = 
¤c_¡©s
->pos.y;

859 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_TARGET
) {

860 
e¥awn
.
pos
.
x
 = 
rg‘
.x;

861 
e¥awn
.
pos
.
y
 = 
rg‘
.y;

863 ià(
pow”s
[
pow”_šdex
].
¡¬tšg_pos
 =ğ
STARTING_POS_MELEE
) {

864 
FPošt
 
åos
 = 
	`ÿlcVeùÜ
(
¤c_¡©s
->
pos
, src_¡©s->
dœeùiÚ
, src_¡©s->
m–“_¿nge
);

865 
e¥awn
.
pos
.
x
 = 
¡©ic_ÿ¡
<>(
åos
.x);

866 
e¥awn
.
pos
.
y
 = 
¡©ic_ÿ¡
<>(
åos
.y);

868 ià(
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
 > 0) {

869 
e¥awn
.
pos
 = 
	`rg‘NeighbÜ
(
¤c_¡©s
->pos,
pow”s
[
pow”_šdex
].
rg‘_ÃighbÜ
);

872 
e¥awn
.
dœeùiÚ
 = 
	`ÿlcDœeùiÚ
(
¤c_¡©s
->
pos
.
x
, src_¡©s->pos.
y
, 
rg‘
.x,arget.y);

873 
i
=0; i < 
pow”s
[
pow”_šdex
].
couÁ
; i++) {

874 
’em›s
.
	`push
(
e¥awn
);

876 
	`·yPow”Co¡
(
pow”_šdex
, 
¤c_¡©s
);

878  
Œue
;

879 
	}
}

884 
boŞ
 
	gPow”Mªag”
::
¥awn
(cÚ¡ 
¡d
::
¡ršg
& 
’emy_ty³
, 
Pošt
 
rg‘
) {

886 
M­_EÃmy
 
	ge¥awn
;

888 
	ge¥awn
.
	gty³
 = 
’emy_ty³
;

889 
	ge¥awn
.
	gpos
 = 
rg‘
;

892 
	ge¥awn
.
	gdœeùiÚ
 = 
¿nd
() % 8;

894 
	g’em›s
.
push
(
e¥awn
);

895  
	gŒue
;

901 
boŞ
 
	gPow”Mªag”
::
	$ŒªsfÜm
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

903 
š±
->
	`lockAùiÚB¬
();

905 ià(
¤c_¡©s
->
ŒªsfÜmed
 && 
pow”s
[
pow”_šdex
].
¥awn_ty³
 != "untransform") {

906 
log_msg
 = 
msg
->
	`g‘
("You‡re‡lreadyransformed, untransform first.");

907  
çl£
;

911 
	`buff
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

913 
¤c_¡©s
->
mªu®_uÁ¿nsfÜm
 = 
pow”s
[
pow”_šdex
].manual_untransform;

914 
¤c_¡©s
->
ŒªsfÜm_w™h_equm’t
 = 
pow”s
[
pow”_šdex
].
k“p_equm’t
;

917 
	`¶aySound
(
pow”_šdex
, 
¤c_¡©s
);

920 ià(
pow”s
[
pow”_šdex
].
¥awn_ty³
 =ğ"uÁ¿nsfÜm" && 
¤c_¡©s
->
ŒªsfÜmed
) {

921 
¤c_¡©s
->
ŒªsfÜm_du¿tiÚ
 = 0;

922 
¤c_¡©s
->
ŒªsfÜm_ty³
 = "untransform";

925 ià(
pow”s
[
pow”_šdex
].
ŒªsfÜm_du¿tiÚ
 == 0) {

927 
¤c_¡©s
->
ŒªsfÜm_du¿tiÚ
 = -1;

928 } ià(
pow”s
[
pow”_šdex
].
ŒªsfÜm_du¿tiÚ
 > 0) {

930 
¤c_¡©s
->
ŒªsfÜm_du¿tiÚ
 = 
pow”s
[
pow”_šdex
].transform_duration;

933 
¤c_¡©s
->
ŒªsfÜm_ty³
 = 
pow”s
[
pow”_šdex
].
¥awn_ty³
;

936 
	`·yPow”Co¡
(
pow”_šdex
, 
¤c_¡©s
);

938  
Œue
;

939 
	}
}

945 
boŞ
 
	gPow”Mªag”
::
	$aùiv©e
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
) {

947 ià(
¤c_¡©s
->
h”o
) {

948 ià(
pow”s
[
pow”_šdex
].
»quœes_mp
 > 
¤c_¡©s
->
mp
)

949  
çl£
;

952 ià(
¤c_¡©s
->
hp
 > 0 && 
pow”s
[
pow”_šdex
].
§üifiû
 =ğ
çl£
 &&…ow”s[pow”_šdex].
»quœes_hp
 >= src_stats->hp)

953  
çl£
;

958 
pow”s
[
pow”_šdex
].
ty³
) {

959 
POWTYPE_FIXED
:  
	`fixed
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

960 
POWTYPE_MISSILE
:  
	`misse
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

961 
POWTYPE_REPEATER
:  
	`»³©”
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

962 
POWTYPE_SPAWN
:  
	`¥awn
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

963 
POWTYPE_TRANSFORM
:  
	`ŒªsfÜm
(
pow”_šdex
, 
¤c_¡©s
, 
rg‘
);

966  
çl£
;

967 
	}
}

972 
	gPow”Mªag”
::
	$·yPow”Co¡
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
) {

973 ià(
¤c_¡©s
) {

974 ià(
¤c_¡©s
->
h”o
) {

975 
¤c_¡©s
->
mp
 -ğ
pow”s
[
pow”_šdex
].
»quœes_mp
;

976 ià(
pow”s
[
pow”_šdex
].
»quœes_™em
 != -1)

977 
u£d_™ems
.
	`push_back
(
pow”s
[
pow”_šdex
].
»quœes_™em
);

980 ià(
pow”s
[
pow”_šdex
].
»quœes_equ³d_™em
 != -1 &&

981 
	`fšd
(
u£d_equ³d_™ems
.
	`begš
(), u£d_equ³d_™ems.
	`’d
(), 
pow”s
[
pow”_šdex
].
»quœes_equ³d_™em
) == used_equipped_items.end())

982 
u£d_equ³d_™ems
.
	`push_back
(
pow”s
[
pow”_šdex
].
»quœes_equ³d_™em
);

984 
¤c_¡©s
->
hp
 -ğ
pow”s
[
pow”_šdex
].
»quœes_hp
;

985 
¤c_¡©s
->
hp
 = (src_stats->hp < 0 ? 0 : src_stats->hp);

987 
	}
}

992 
	gPow”Mªag”
::
	$aùiv©ePassives
(
StBlock
 *
¤c_¡©s
) {

993 
boŞ
 
Œigg”ed_Ùh”s
 = 
çl£
;

994 
Œigg”
 = -1;

996 
i
=0; i<
¤c_¡©s
->
pow”s_·ssive
.
	`size
(); i++) {

997 ià(
pow”s
[
¤c_¡©s
->
pow”s_·ssive
[
i
]].
·ssive
) {

998 
Œigg”
 = 
pow”s
[
¤c_¡©s
->
pow”s_·ssive
[
i
]].
·ssive_Œigg”
;

1000 ià(
Œigg”
 == -1) {

1001 ià(
¤c_¡©s
->
efãùs
.
Œigg”ed_Ùh”s
) ;

1002 
Œigg”ed_Ùh”s
 = 
Œue
;

1004 ià(
Œigg”
 =ğ
TRIGGER_BLOCK
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_block
) ;

1005 ià(
Œigg”
 =ğ
TRIGGER_HIT
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_h™
) ;

1006 ià(
Œigg”
 =ğ
TRIGGER_HALFDEATH
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_h®fd—th
) {

1007 ià(
¤c_¡©s
->
hp
 > src_¡©s->
maxhp
/2) ;

1008 
¤c_¡©s
->
efãùs
.
Œigg”ed_h®fd—th
 = 
Œue
;

1010 ià(
Œigg”
 =ğ
TRIGGER_JOINCOMBAT
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_jošcomb©
) {

1011 ià(!
¤c_¡©s
->
š_comb©
) ;

1012 
¤c_¡©s
->
efãùs
.
Œigg”ed_jošcomb©
 = 
Œue
;

1014 ià(
Œigg”
 =ğ
TRIGGER_DEATH
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_d—th
) ;

1016 
	`aùiv©e
(
¤c_¡©s
->
pow”s_·ssive
[
i
], src_¡©s, src_¡©s->
pos
);

1017 
¤c_¡©s
->
»äesh_¡©s
 = 
Œue
;

1021 
i
=0; i<
¤c_¡©s
->
pow”s_li¡_™ems
.
	`size
(); i++) {

1022 ià(
pow”s
[
¤c_¡©s
->
pow”s_li¡_™ems
[
i
]].
·ssive
) {

1023 
Œigg”
 = 
pow”s
[
¤c_¡©s
->
pow”s_li¡_™ems
[
i
]].
·ssive_Œigg”
;

1025 ià(
Œigg”
 == -1) {

1026 ià(
¤c_¡©s
->
efãùs
.
Œigg”ed_Ùh”s
) ;

1027 
Œigg”ed_Ùh”s
 = 
Œue
;

1029 ià(
Œigg”
 =ğ
TRIGGER_BLOCK
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_block
) ;

1030 ià(
Œigg”
 =ğ
TRIGGER_HIT
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_h™
) ;

1031 ià(
Œigg”
 =ğ
TRIGGER_HALFDEATH
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_h®fd—th
) {

1032 ià(
¤c_¡©s
->
hp
 > src_¡©s->
maxhp
/2) ;

1033 
¤c_¡©s
->
efãùs
.
Œigg”ed_h®fd—th
 = 
Œue
;

1035 ià(
Œigg”
 =ğ
TRIGGER_JOINCOMBAT
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_jošcomb©
) {

1036 ià(!
¤c_¡©s
->
š_comb©
) ;

1037 
¤c_¡©s
->
efãùs
.
Œigg”ed_jošcomb©
 = 
Œue
;

1039 ià(
Œigg”
 =ğ
TRIGGER_DEATH
 && !
¤c_¡©s
->
efãùs
.
Œigg”ed_d—th
) ;

1041 
	`aùiv©e
(
¤c_¡©s
->
pow”s_li¡_™ems
[
i
], src_¡©s, src_¡©s->
pos
);

1042 
¤c_¡©s
->
»äesh_¡©s
 = 
Œue
;

1046 ià(
Œigg”ed_Ùh”s
è
¤c_¡©s
->
efãùs
.Œigg”ed_Ùh” ğ
Œue
;

1050 
¤c_¡©s
->
efãùs
.
Œigg”ed_h™
 = 
çl£
;

1051 
¤c_¡©s
->
efãùs
.
Œigg”ed_d—th
 = 
çl£
;

1052 
	}
}

1058 
	gPow”Mªag”
::
	$aùiv©eSšgËPassive
(
StBlock
 *
¤c_¡©s
, 
id
) {

1059 ià(!
pow”s
[
id
].
·ssive
) ;

1061 ià(
pow”s
[
id
].
·ssive_Œigg”
 == -1) {

1062 
	`aùiv©e
(
id
, 
¤c_¡©s
, src_¡©s->
pos
);

1063 
¤c_¡©s
->
»äesh_¡©s
 = 
Œue
;

1064 
¤c_¡©s
->
efãùs
.
Œigg”ed_Ùh”s
 = 
Œue
;

1066 
	}
}

1072 
	gPow”Mªag”
::
g‘IdFromTag
(
¡d
::
¡ršg
 
g
) {

1073 ià(
g
 == "")  0;

1074 
	gi
=1; i<
	gpow”s
.
size
(); i++) {

1075 ià(
	gpow”s
[
i
].
	gg
 =ğ
g
)  i;

1080 
	gPow”Mªag”
::~
	$Pow”Mªag”
() {

1082 
i
=0; i<
sfx
.
	`size
(); i++) {

1083 
¢d
->
	`uÆßd
(
sfx
[
i
]);

1085 
sfx
.
	`ş—r
();

1086 
	}
}

	@PowerManager.h

28 #´agm¨
Úû


29 #iâdeà
POWER_MANAGER_H


30 
	#POWER_MANAGER_H


	)

32 
	~"M­R’d””.h
"

33 
	~"Uts.h
"

35 
	~<SDL.h
>

36 
	~<SDL_image.h
>

37 
	~<SDL_mix”.h
>

39 
	~<¡ršg
>

40 
	~<queue
>

41 
	~<ÿs£¹
>

42 
	~<veùÜ
>

44 
şass
 
	gAnim©iÚ
;

45 
şass
 
	gAnim©iÚS‘
;

46 
şass
 
	gHaz¬d
;

47 
şass
 
	gM­CŞlisiÚ
;

48 
şass
 
	gStBlock
;

50 cÚ¡ 
	gPOWER_COUNT
 = 1024;

52 cÚ¡ 
	gPOWTYPE_FIXED
 = 0;

53 cÚ¡ 
	gPOWTYPE_MISSILE
 = 1;

54 cÚ¡ 
	gPOWTYPE_REPEATER
 = 2;

55 cÚ¡ 
	gPOWTYPE_SPAWN
 = 3;

56 cÚ¡ 
	gPOWTYPE_TRANSFORM
 = 4;

57 cÚ¡ 
	gPOWTYPE_EFFECT
 = 5;

59 cÚ¡ 
	gPOWSTATE_SWING
 = 0;

60 cÚ¡ 
	gPOWSTATE_CAST
 = 1;

61 cÚ¡ 
	gPOWSTATE_SHOOT
 = 2;

62 cÚ¡ 
	gPOWSTATE_BLOCK
 = 3;

63 cÚ¡ 
	gPOWSTATE_INSTANT
 = 4;

65 cÚ¡ 
	gBASE_DAMAGE_NONE
 = 0;

66 cÚ¡ 
	gBASE_DAMAGE_MELEE
 = 1;

67 cÚ¡ 
	gBASE_DAMAGE_RANGED
 = 2;

68 cÚ¡ 
	gBASE_DAMAGE_MENT
 = 3;

73 cÚ¡ 
	gSTARTING_POS_SOURCE
 = 0;

74 cÚ¡ 
	gSTARTING_POS_TARGET
 = 1;

75 cÚ¡ 
	gSTARTING_POS_MELEE
 = 2;

77 cÚ¡ 
	gTRIGGER_BLOCK
 = 0;

78 cÚ¡ 
	gTRIGGER_HIT
 = 1;

79 cÚ¡ 
	gTRIGGER_HALFDEATH
 = 2;

80 cÚ¡ 
	gTRIGGER_JOINCOMBAT
 = 3;

81 cÚ¡ 
	gTRIGGER_DEATH
 = 4;

83 şas 
	cPo¡Efãù
 {

84 
	mpublic
:

85 
id
;

86 
	mmagn™ude
;

87 
	mdu¿tiÚ
;

89 
	$Po¡Efãù
() {

90 
id
 = 0;

91 
magn™ude
 = 0;

92 
du¿tiÚ
 = 0;

94 
	}
};

96 şas 
	cPow”
 {

97 
	mpublic
:

99 
ty³
;

100 
	m¡d
::
¡ršg
 
Çme
;

101 
	m¡d
::
¡ršg
 
desütiÚ
;

102 
	m¡d
::
¡ršg
 
g
;

103 
	micÚ
;

104 
	mÃw_¡©e
;

105 
boŞ
 
	mçû
;

106 
	msourû_ty³
;

107 
boŞ
 
	mb—cÚ
;

108 
	mcouÁ
;

109 
boŞ
 
	m·ssive
;

110 
	m·ssive_Œigg”
;

113 
boŞ
 
	m»quœes_physiÿl_w—pÚ
;

114 
boŞ
 
	m»quœes_ofãn£_w—pÚ
;

115 
boŞ
 
	m»quœes_m’l_w—pÚ
;

116 
	m»quœes_mp
;

117 
	m»quœes_hp
;

118 
boŞ
 
	m§üifiû
;

119 
boŞ
 
	m»quœes_los
;

120 
boŞ
 
	m»quœes_em±y_rg‘
;

121 
	m»quœes_™em
;

122 
	m»quœes_equ³d_™em
;

123 
boŞ
 
	mcÚsumabË
;

124 
boŞ
 
	m»quœes_rg‘šg
;

125 
	mcoŞdown
;

128 
	m¡d
::
¡ršg
 
ªim©iÚ_Çme
;

129 
	msfx_šdex
;

130 
boŞ
 
	mdœeùiÚ®
;

131 
	mvisu®_¿ndom
;

132 
	mvisu®_İtiÚ
;

133 
boŞ
 
	maim_assi¡
;

134 
	m¥“d
;

135 
	mliã¥ª
;

136 
boŞ
 
	mæoÜ
;

137 
boŞ
 
	mcom¶‘e_ªim©iÚ
;

140 
boŞ
 
	mu£_haz¬d
;

141 
boŞ
 
	mno_©ck
;

142 
	m¿dius
;

143 
	mba£_damage
;

144 
	mdamage_muÉl›r
;

145 
	m¡¬tšg_pos
;

146 
boŞ
 
	mmuÉ™¬g‘
;

147 
	m¿nge
;

150 
	mhp_¡—l
;

151 
	mmp_¡—l
;

154 
	mmisse_ªgË
;

155 
	mªgË_v¬Ÿnû
;

156 
	m¥“d_v¬Ÿnû
;

159 
	md–ay
;

161 
	mŒa™_–em’l
;

162 
boŞ
 
	mŒa™_¬mÜ_³ÃŒ©iÚ
;

163 
	mŒa™_ü™s_im·œed
;

165 
	mŒªsfÜm_du¿tiÚ
;

166 
boŞ
 
	mmªu®_uÁ¿nsfÜm
;

167 
boŞ
 
	mk“p_equm’t
;

170 
boŞ
 
	mbuff
;

171 
boŞ
 
	mbuff_‹ËpÜt
;

173 
	m¡d
::
veùÜ
<
Po¡Efãù
> 
po¡_efãùs
;

174 
	m¡d
::
¡ršg
 
efãù_ty³
;

175 
boŞ
 
	mefãù_add™ive
;

176 
boŞ
 
	mefãù_»nd”_above
;

178 
	mpo¡_pow”
;

179 
	mw®l_pow”
;

180 
boŞ
 
	m®low_pow”_mod
;

183 
	m¡d
::
¡ršg
 
¥awn_ty³
;

184 
	mrg‘_ÃighbÜ
;

186 
	$Pow”
()

187 : 
	`ty³
(-1)

188 , 
	`Çme
("")

189 , 
	`desütiÚ
("")

190 , 
	`g
("")

191 , 
	`icÚ
(-1)

192 , 
	`Ãw_¡©e
(-1)

193 , 
	`çû
(
çl£
)

194 , 
	`sourû_ty³
(-1)

195 , 
	`b—cÚ
(
çl£
)

196 , 
	`couÁ
(1)

197 , 
	`·ssive
(
çl£
)

198 , 
	`·ssive_Œigg”
(-1)

200 , 
	`»quœes_physiÿl_w—pÚ
(
çl£
)

201 , 
	`»quœes_ofãn£_w—pÚ
(
çl£
)

202 , 
	`»quœes_m’l_w—pÚ
(
çl£
)

204 , 
	`»quœes_mp
(0)

205 , 
	`»quœes_hp
(0)

206 , 
	`§üifiû
(
çl£
)

207 , 
	`»quœes_los
(
çl£
)

208 , 
	`»quœes_em±y_rg‘
(
çl£
)

209 , 
	`»quœes_™em
(-1)

210 , 
	`»quœes_equ³d_™em
(-1)

211 , 
	`cÚsumabË
(
çl£
)

212 , 
	`»quœes_rg‘šg
(
çl£
)

213 , 
	`coŞdown
(0)

215 , 
	`ªim©iÚ_Çme
("")

216 , 
	`sfx_šdex
(-1)

217 , 
	`dœeùiÚ®
(
çl£
)

218 , 
	`visu®_¿ndom
(0)

219 , 
	`visu®_İtiÚ
(0)

220 , 
	`aim_assi¡
(
çl£
)

221 , 
	`¥“d
(0)

222 , 
	`liã¥ª
(0)

223 , 
	`æoÜ
(
çl£
)

224 , 
	`com¶‘e_ªim©iÚ
(
çl£
)

226 , 
	`u£_haz¬d
(
çl£
)

227 , 
	`no_©ck
(
çl£
)

228 , 
	`¿dius
(0)

229 , 
	`ba£_damage
(
BASE_DAMAGE_NONE
)

230 , 
	`damage_muÉl›r
(100)

231 , 
	`¡¬tšg_pos
(
STARTING_POS_SOURCE
)

232 , 
	`muÉ™¬g‘
(
çl£
)

233 , 
	`¿nge
(0)

235 , 
	`hp_¡—l
(0)

236 , 
	`mp_¡—l
(0)

238 , 
	`misse_ªgË
(0)

239 , 
	`ªgË_v¬Ÿnû
(0)

240 , 
	`¥“d_v¬Ÿnû
(0)

242 , 
	`d–ay
(0)

244 , 
	`Œa™_–em’l
(-1)

245 , 
	`Œa™_¬mÜ_³ÃŒ©iÚ
(
çl£
)

246 , 
	`Œa™_ü™s_im·œed
(0)

248 , 
	`ŒªsfÜm_du¿tiÚ
(0)

249 , 
	`mªu®_uÁ¿nsfÜm
(
çl£
)

250 , 
	`k“p_equm’t
(
çl£
)

252 , 
	`buff
(
çl£
)

253 , 
	`buff_‹ËpÜt
(
çl£
)

255 , 
	`efãù_ty³
("")

256 , 
	`efãù_add™ive
(
çl£
)

257 , 
	`efãù_»nd”_above
(
çl£
)

259 , 
	`po¡_pow”
(0)

260 , 
	`w®l_pow”
(0)

262 , 
	`®low_pow”_mod
(
çl£
)

263 , 
	`¥awn_ty³
("")

264 , 
	$rg‘_ÃighbÜ
(0)

267 
	}
};

269 şas 
	cPow”Mªag”
 {

270 
	m´iv©e
:

272 
M­CŞlisiÚ
 *
cŞlid”
;

274 
lßdAÎ
();

275 
lßdPow”s
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

277 
lßdSFX
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

279 
ÿlcDœeùiÚ
(
Üigš_x
, 
Üigš_y
, 
rg‘_x
, 
rg‘_y
);

280 
Pošt
 
lim™Rªge
(
¿nge
, Pošˆ
¤c
, Pošˆ
rg‘
);

281 
Pošt
 
rg‘NeighbÜ
(Pošˆ
rg‘
, 
¿nge
);

282 
Pošt
 
rg‘NeighbÜ
(Pošˆ
rg‘
, 
¿nge
, 
boŞ
 
ignÜe_blocked
);

283 
š™Haz¬d
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
, 
Haz¬d
 *
haz
);

284 
buff
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

285 
¶aySound
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
);

287 
boŞ
 
fixed
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

288 
boŞ
 
misse
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

289 
boŞ
 
»³©”
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

290 
boŞ
 
¥awn
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

291 
boŞ
 
ŒªsfÜm
(
pow”num
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

293 
·yPow”Co¡
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
);

295 
	mpublic
:

296 
Pow”Mªag”
();

297 ~
Pow”Mªag”
();

299 
	m¡d
::
¡ršg
 
log_msg
;

301 
hªdËNewM­
(
M­CŞlisiÚ
 *
_cŞlid”
);

302 
boŞ
 
aùiv©e
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

303 
ÿlcTh‘a
(
x1
, 
y1
, 
x2
, 
y2
);

304 cÚ¡ 
	mPow”
 &
	$g‘Pow”
(
id
è{
	`as£¹
(id < 
pow”s
.
	`size
()); …owers[id];}

305 
boŞ
 
	$ÿnU£Pow”
(
id
) const;

306 
boŞ
 
	`hasV®idT¬g‘
(
pow”_šdex
, 
StBlock
 *
¤c_¡©s
, 
Pošt
 
rg‘
);

307 
boŞ
 
	`¥awn
(cÚ¡ 
¡d
::
¡ršg
& 
’emy_ty³
, 
Pošt
 
rg‘
);

308 
boŞ
 
	`efãù
(
StBlock
 *
¤c_¡©s
, 
pow”_šdex
);

309 
	`aùiv©ePassives
(
StBlock
 *
¤c_¡©s
);

310 
	`aùiv©eSšgËPassive
(
StBlock
 *
¤c_¡©s
, 
id
);

311 
	`g‘IdFromTag
(
¡d
::
¡ršg
 
g
);

313 
¡d
::
veùÜ
<
Pow”
> 
pow”s
;

314 
¡d
::
queue
<
Haz¬d
 *> 
haz¬ds
;

315 
¡d
::
queue
<
M­_EÃmy
> 
’em›s
;

318 
¡d
::
veùÜ
<
SoundMªag”
::
SoundID
> 
sfx
;

320 
¡d
::
veùÜ
<> 
u£d_™ems
;

321 
¡d
::
veùÜ
<> 
u£d_equ³d_™ems
;

322 
	}
};

	@QuestLog.cpp

25 
	~"Que¡Log.h
"

26 
	~"Cam·ignMªag”.h
"

27 
	~"M’u.h
"

28 
	~"M’uLog.h
"

29 
	~"Sh¬edResourûs.h
"

30 
	~"S‘tšgs.h
"

31 
	~"FeP¬£r.h
"

32 
	~"UtsFeSy¡em.h
"

33 
	~"UtsP¬sšg.h
"

35 
	~<f¡»am
>

37 
usšg
 
Çme¥aû
 
	g¡d
;

40 
	gQue¡Log
::
	$Que¡Log
(
Cam·ignMªag”
 *
_ÿmp
, 
M’uLog
 *
_log
) {

41 
ÿmp
 = 
_ÿmp
;

42 
log
 = 
_log
;

44 
ÃwQue¡NÙifiÿtiÚ
 = 
çl£
;

45 
»£tQue¡NÙifiÿtiÚ
 = 
çl£
;

46 
	`lßdAÎ
();

47 
	}
}

49 
	gQue¡Log
::~
	$Que¡Log
()

51 
	}
}

56 
Que¡Log
::
	$lßdAÎ
() {

57 
¡ršg
 
‹¡_·th
;

60 
i
 = 0; i < 
mods
->
mod_li¡
.
	`size
(); i++) {

62 
‹¡_·th
 = 
PATH_DATA
 + "mods/" + 
mods
->
mod_li¡
[
i
] + "/quests/index.txt";

64 ià(
	`feExi¡s
(
‹¡_·th
)) {

65 
this
->
	`lßdIndex
(
‹¡_·th
);

69 
	}
}

78 
	gQue¡Log
::
lßdIndex
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

79 
if¡»am
 
šfe
;

80 
¡ršg
 
	glše
;

82 
	gšfe
.
İ’
(
f’ame
.
c_¡r
(), 
ios
::
š
);

84 ià(
	gšfe
.
is_İ’
()) {

85 
	gšfe
.
good
()) {

86 
	glše
 = 
g‘Lše
(
šfe
);

87 ià(
	glše
.
Ëngth
() > 0) {

90 
lßd
(
lše
);

93 
	gšfe
.
şo£
();

103 
	gQue¡Log
::
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

104 
FeP¬£r
 
šfe
;

105 ià(!
	gšfe
.
İ’
(
mods
->
loÿ‹
("que¡s/" + 
f’ame
))) {

106 
årštf
(
¡d”r
, "UÇbËØİ’ que¡s/%s!\n", 
f’ame
.
c_¡r
());

110 
	gšfe
.
Ãxt
()) {

111 ià(
	gšfe
.
	gÃw_£ùiÚ
) {

112 ià(
	gšfe
.
	g£ùiÚ
 == "quest")

113 
que¡s
.
push_back
(
veùÜ
<
Ev’t_CompÚ’t
>());

115 
Ev’t_CompÚ’t
 
	gev
;

116 
	gev
.
	gty³
 = 
šfe
.
key
;

117 
	gev
.
	gs
 = 
msg
->
g‘
(
šfe
.
v®
);

118 
	gque¡s
.
back
().
push_back
(
ev
);

120 
	gšfe
.
şo£
();

123 
	gQue¡Log
::
	$logic
() {

124 ià(
ÿmp
->
que¡_upd©e
) {

125 
»£tQue¡NÙifiÿtiÚ
 = 
Œue
;

126 
ÿmp
->
que¡_upd©e
 = 
çl£
;

127 
	`ü—‹Que¡Li¡
();

129 
	}
}

134 
	gQue¡Log
::
	$ü—‹Que¡Li¡
() {

135 
log
->
	`ş—r
(
LOG_TYPE_QUESTS
);

137 
i
=0; i<
que¡s
.
	`size
(); i++) {

138 
j
=0; j<
que¡s
[
i
].
	`size
(); j++) {

144 ià(
que¡s
[
i
][
j
].
ty³
 == "requires_status") {

145 ià(!
ÿmp
->
	`checkStus
(
que¡s
[
i
][
j
].
s
)) ;

147 ià(
que¡s
[
i
][
j
].
ty³
 == "requires_not") {

148 ià(
ÿmp
->
	`checkStus
(
que¡s
[
i
][
j
].
s
)) ;

150 ià(
que¡s
[
i
][
j
].
ty³
 == "quest_text") {

151 
log
->
	`add
(
que¡s
[
i
][
j
].
s
, 
LOG_TYPE_QUESTS
);

152 
ÃwQue¡NÙifiÿtiÚ
 = 
Œue
;

155 ià(
que¡s
[
i
][
j
].
ty³
 == "") {

160 
	}
}

	@QuestLog.h

25 #´agm¨
Úû


26 #iâdeà
QUEST_LOG_H


27 
	#QUEST_LOG_H


	)

29 
	~<¡ršg
>

30 
	~<veùÜ
>

31 
	~"Uts.h
"

33 
şass
 
	gCam·ignMªag”
;

34 
şass
 
	gM’uLog
;

36 şas 
	cQue¡Log
 {

37 
	m´iv©e
:

38 
Cam·ignMªag”
 *
ÿmp
;

39 
M’uLog
 *
	mlog
;

43 
	m¡d
::
veùÜ
<
¡d
::veùÜ<
Ev’t_CompÚ’t
> >
que¡s
;

45 
	mpublic
:

46 
Que¡Log
(
Cam·ignMªag”
 *
_ÿmp
, 
M’uLog
 *
_log
);

47 ~
Que¡Log
();

48 
lßdAÎ
();

49 
lßdIndex
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

50 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

51 
logic
();

52 
ü—‹Que¡Li¡
();

53 
boŞ
 
	mÃwQue¡NÙifiÿtiÚ
;

54 
boŞ
 
	m»£tQue¡NÙifiÿtiÚ
;

	@SDL_gfxBlitFunc.c

30 
	~"SDL_gfxBl™Func.h
"

39 
	gGFX_ALPHA_ADJUST_ARRAY
[256] = {

306 
	$_SDL_gfxBl™Bl™‹rRGBA
(
SDL_gfxBl™Info
 * 
šfo
)

308 
width
 = 
šfo
->
d_width
;

309 
height
 = 
šfo
->
d_height
;

310 
Ušt8
 *
¤c
 = 
šfo
->
s_pix–s
;

311 
¤csk
 = 
šfo
->
s_sk
;

312 
Ušt8
 *
d¡
 = 
šfo
->
d_pix–s
;

313 
d¡sk
 = 
šfo
->
d_sk
;

314 
SDL_Pix–FÜm©
 *
¤cfmt
 = 
šfo
->
¤c
;

315 
SDL_Pix–FÜm©
 *
d¡fmt
 = 
šfo
->
d¡
;

316 
Ušt8
 
¤cbµ
 = 
¤cfmt
->
By‹sP”Pix–
;

317 
Ušt8
 
d¡bµ
 = 
d¡fmt
->
By‹sP”Pix–
;

319 
height
--) {

320 
	`GFX_DUFFS_LOOP4
( {

321 
Ušt32
 
pix–
;

322 
sR
;

323 
sG
;

324 
sB
;

325 
sA
;

326 
dR
;

327 
dG
;

328 
dB
;

329 
dA
;

330 
sAA
;

331 
	`GFX_DISASSEMBLE_RGBA
(
¤c
, 
¤cbµ
, 
¤cfmt
, 
pix–
, 
sR
, 
sG
, 
sB
, 
sA
);

332 
	`GFX_DISASSEMBLE_RGBA
(
d¡
, 
d¡bµ
, 
d¡fmt
, 
pix–
, 
dR
, 
dG
, 
dB
, 
dA
);

333 
sAA
=
GFX_ALPHA_ADJUST_ARRAY
[
sA
 & 255];

334 
	`GFX_ALPHA_BLEND
(
sR
, 
sG
, 
sB
, 
sAA
, 
dR
, 
dG
, 
dB
);

335 
dA
 |ğ
sAA
;

336 
	`GFX_ASSEMBLE_RGBA
(
d¡
, 
d¡bµ
, 
d¡fmt
, 
dR
, 
dG
, 
dB
, 
dA
);

337 
¤c
 +ğ
¤cbµ
; 
d¡
 +ğ
d¡bµ
;

338 }, 
width
);

339 
¤c
 +ğ
¤csk
;

340 
d¡
 +ğ
d¡sk
;

342 
	}
}

356 
	$_SDL_gfxBl™RGBAC®l
(
SDL_Surçû
 * 
¤c
, 
SDL_Reù
 * 
¤üeù
, SDL_Surçû * 
d¡
, SDL_Reù * 
d¡»ù
)

361 ià(
¤üeù
->
w
 && srüeù->
h
) {

362 
SDL_gfxBl™Info
 
šfo
;

367 #ià(
SDL_MINOR_VERSION
 == 3)

368 
šfo
.
s_pix–s
 = (
Ušt8
 *è
¤c
->
pix–s
 + (
Ušt16
è
¤üeù
->
y
 * src->
p™ch
 + (Ušt16è¤üeù->
x
 * src->
fÜm©
->
By‹sP”Pix–
;

370 
šfo
.
s_pix–s
 = (
Ušt8
 *è
¤c
->
pix–s
 + src->
off£t
 + (
Ušt16
è
¤üeù
->
y
 * src->
p™ch
 + (Ušt16è¤üeù->
x
 * src->
fÜm©
->
By‹sP”Pix–
;

372 
šfo
.
s_width
 = 
¤üeù
->
w
;

373 
šfo
.
s_height
 = 
¤üeù
->
h
;

374 
šfo
.
s_sk
 = ()(
¤c
->
p™ch
 - info.
s_width
 * src->
fÜm©
->
By‹sP”Pix–
);

375 #ià(
SDL_MINOR_VERSION
 == 3)

376 
šfo
.
d_pix–s
 = (
Ušt8
 *è
d¡
->
pix–s
 + (
Ušt16
è
d¡»ù
->
y
 * d¡->
p™ch
 + (Ušt16èd¡»ù->
x
 * d¡->
fÜm©
->
By‹sP”Pix–
;

378 
šfo
.
d_pix–s
 = (
Ušt8
 *è
d¡
->
pix–s
 + d¡->
off£t
 + (
Ušt16
è
d¡»ù
->
y
 * d¡->
p™ch
 + (Ušt16èd¡»ù->
x
 * d¡->
fÜm©
->
By‹sP”Pix–
;

380 
šfo
.
d_width
 = 
d¡»ù
->
w
;

381 
šfo
.
d_height
 = 
d¡»ù
->
h
;

382 
šfo
.
d_sk
 = ()(
d¡
->
p™ch
 - info.
d_width
 * d¡->
fÜm©
->
By‹sP”Pix–
);

383 
šfo
.
aux_d©a
 = 
NULL
;

384 
šfo
.
¤c
 = src->
fÜm©
;

385 
šfo
.
bË
 = 
NULL
;

386 
šfo
.
d¡
 = d¡->
fÜm©
;

391 
	`_SDL_gfxBl™Bl™‹rRGBA
(&
šfo
);

396 
	}
}

411 
	$SDL_gfxBl™RGBA
(
SDL_Surçû
 * 
¤c
, 
SDL_Reù
 * 
¤üeù
, SDL_Surçû * 
d¡
, SDL_Reù * 
d¡»ù
)

413 
SDL_Reù
 
¤
, 
dr
;

414 
¤cx
, 
¤cy
, 
w
, 
h
;

419 ià(!
¤c
 || !
d¡
) {

420 
	`SDL_S‘E¼Ü
("SDL_UpperBlit:…assed‡ NULL surface");

423 ià((
¤c
->
locked
è|| (
d¡
->locked)) {

424 
	`SDL_S‘E¼Ü
("Surfaces must‚ot be†ocked during blit");

431 ià(
d¡»ù
 =ğ
NULL
) {

432 
dr
.
x
 = dr.
y
 = 0;

433 
dr
.
w
 = 
d¡
->w;

434 
dr
.
h
 = 
d¡
->h;

436 
dr
 = *
d¡»ù
;

442 ià(
¤üeù
) {

443 
maxw
, 
maxh
;

445 
¤cx
 = 
¤üeù
->
x
;

446 
w
 = 
¤üeù
->w;

447 ià(
¤cx
 < 0) {

448 
w
 +ğ
¤cx
;

449 
dr
.
x
 -ğ
¤cx
;

450 
¤cx
 = 0;

452 
maxw
 = 
¤c
->
w
 - 
¤cx
;

453 ià(
maxw
 < 
w
)

454 
w
 = 
maxw
;

456 
¤cy
 = 
¤üeù
->
y
;

457 
h
 = 
¤üeù
->h;

458 ià(
¤cy
 < 0) {

459 
h
 +ğ
¤cy
;

460 
dr
.
y
 -ğ
¤cy
;

461 
¤cy
 = 0;

463 
maxh
 = 
¤c
->
h
 - 
¤cy
;

464 ià(
maxh
 < 
h
)

465 
h
 = 
maxh
;

468 
¤cx
 = 
¤cy
 = 0;

469 
w
 = 
¤c
->w;

470 
h
 = 
¤c
->h;

477 
SDL_Reù
 *
ş
 = &
d¡
->
ş_»ù
;

478 
dx
, 
dy
;

480 
dx
 = 
ş
->
x
 - 
dr
.x;

481 ià(
dx
 > 0) {

482 
w
 -ğ
dx
;

483 
dr
.
x
 +ğ
dx
;

484 
¤cx
 +ğ
dx
;

486 
dx
 = 
dr
.
x
 + 
w
 - 
ş
->x - clip->w;

487 ià(
dx
 > 0)

488 
w
 -ğ
dx
;

490 
dy
 = 
ş
->
y
 - 
dr
.y;

491 ià(
dy
 > 0) {

492 
h
 -ğ
dy
;

493 
dr
.
y
 +ğ
dy
;

494 
¤cy
 +ğ
dy
;

496 
dy
 = 
dr
.
y
 + 
h
 - 
ş
->y - clip->h;

497 ià(
dy
 > 0)

498 
h
 -ğ
dy
;

501 ià(
w
 > 0 && 
h
 > 0) {

502 
¤
.
x
 = 
¤cx
;

503 
¤
.
y
 = 
¤cy
;

504 
¤
.
w
 = 
dr
.w = w;

505 
¤
.
h
 = 
dr
.h = h;

506  (
	`_SDL_gfxBl™RGBAC®l
(
¤c
, &
¤
, 
d¡
, &
dr
));

510 
	}
}

524 
	$SDL_gfxS‘AÍha
(
SDL_Surçû
 *
¤c
, 
Ušt8
 
a
)

526 #ià
SDL_BYTEORDER
 =ğ
SDL_BIG_ENDIAN


527 cÚ¡ 
®pha_off£t
 = 0;

529 cÚ¡ 
®pha_off£t
 = 3;

531 
i
, 
j
, 
row_sk
;

532 
Ušt8
 *
pix–s
;

535 iàĞ(
¤c
==
NULL
) ||

536 (
¤c
->
fÜm©
==
NULL
) ||

537 (
¤c
->
fÜm©
->
By‹sP”Pix–
!=4) ) {

538 
	`SDL_S‘E¼Ü
("SDL_gfxSetAlpha: Invalid input surface.");

545 ià(
	`SDL_MUSTLOCK
(
¤c
)) {

546 ià(
	`SDL_LockSurçû
(
¤c
) < 0) {

552 
pix–s
 = (
Ušt8
 *)
¤c
->pixels;

553 
row_sk
 = (
¤c
->
p™ch
 - (4*¤c->
w
));

554 
pix–s
 +ğ
®pha_off£t
;

555  
i
=0; i<
¤c
->
h
; i++ ) {

556  
j
=0; j<
¤c
->
w
; j++ ) {

557 *
pix–s
 = 
a
;

558 
pix–s
 += 4;

560 
pix–s
 +ğ
row_sk
;

566 ià(
	`SDL_MUSTLOCK
(
¤c
)) {

567 
	`SDL_UÆockSurçû
(
¤c
);

571 
	}
}

587 
	$SDL_gfxMuÉlyAÍha
(
SDL_Surçû
 *
¤c
, 
Ušt8
 
a
)

589 #ià
SDL_BYTEORDER
 =ğ
SDL_BIG_ENDIAN


590 cÚ¡ 
®pha_off£t
 = 0;

592 cÚ¡ 
®pha_off£t
 = 3;

594 
i
, 
j
, 
row_sk
;

595 
Ušt8
 *
pix–s
;

598 iàĞ(
¤c
==
NULL
) ||

599 (
¤c
->
fÜm©
==
NULL
) ||

600 (
¤c
->
fÜm©
->
By‹sP”Pix–
!=4) ) {

601 
	`SDL_S‘E¼Ü
("SDL_gfxMultiplyAlpha: Invalid input surface.");

606 ià(
a
==255) {

613 ià(
	`SDL_MUSTLOCK
(
¤c
)) {

614 ià(
	`SDL_LockSurçû
(
¤c
) < 0) {

620 
pix–s
 = (
Ušt8
 *)
¤c
->pixels;

621 
row_sk
 = (
¤c
->
p™ch
 - (4*¤c->
w
));

622 
pix–s
 +ğ
®pha_off£t
;

623  
i
=0; i<
¤c
->
h
; i++ ) {

624  
j
=0; j<
¤c
->
w
; j++ ) {

625 *
pix–s
 = (
Ušt8
)((()(*pix–s)*
a
)>>8);

626 
pix–s
 += 4;

628 
pix–s
 +ğ
row_sk
;

634 ià(
	`SDL_MUSTLOCK
(
¤c
)) {

635 
	`SDL_UÆockSurçû
(
¤c
);

639 
	}
}

	@SDL_gfxBlitFunc.h

31 #´agm¨
Úû


32 #iâdeà
_SDL_gfxBl™Func_h


33 
	#_SDL_gfxBl™Func_h


	)

36 #ifdeà
__ılu¥lus


40 
	~<¡dio.h
>

41 
	~<¡dlib.h
>

43 
	~<SDL.h
>

44 
	~<SDL_video.h
>

48 #ifdeà
_MSC_VER


49 #ià
defšed
(
DLL_EXPORT
è&& !defšed(
LIBSDL_GFX_DLL_IMPORT
)

50 
	#SDL_GFXBLITFUNC_SCOPE
 
	`__deş¥ec
(
dÎexpÜt
)

	)

52 #ifdeà
LIBSDL_GFX_DLL_IMPORT


53 
	#SDL_GFXBLITFUNC_SCOPE
 
	`__deş¥ec
(
dÎimpÜt
)

	)

57 #iâdeà
SDL_GFXBLITFUNC_SCOPE


58 
	#SDL_GFXBLITFUNC_SCOPE
 

	)

62 
SDL_GFXBLITFUNC_SCOPE
 
SDL_gfxBl™RGBA
(
SDL_Surçû
 * 
¤c
, 
SDL_Reù
 * 
¤üeù
, SDL_Surçû * 
d¡
, SDL_Reù * 
d¡»ù
);

64 
SDL_GFXBLITFUNC_SCOPE
 
SDL_gfxS‘AÍha
(
SDL_Surçû
 * 
¤c
, 
Ušt8
 
a
);

66 
SDL_GFXBLITFUNC_SCOPE
 
SDL_gfxMuÉlyAÍha
(
SDL_Surçû
 * 
¤c
, 
Ušt8
 
a
);

77 
Ušt8
 *
	gs_pix–s
;

78 
	gs_width
;

79 
	gs_height
;

80 
	gs_sk
;

81 
Ušt8
 *
	gd_pix–s
;

82 
	gd_width
;

83 
	gd_height
;

84 
	gd_sk
;

85 *
	gaux_d©a
;

86 
SDL_Pix–FÜm©
 *
	g¤c
;

87 
Ušt8
 *
	gbË
;

88 
SDL_Pix–FÜm©
 *
	gd¡
;

89 } 
	tSDL_gfxBl™Info
;

94 
	#GFX_RGBA_FROM_PIXEL
(
pix–
, 
fmt
, 
r
, 
g
, 
b
, 
a
) \

96 
r
 = ((
pix–
&
fmt
->
Rmask
)>>fmt->
Rshiá
)<<fmt->
Rloss
; \

97 
g
 = ((
pix–
&
fmt
->
Gmask
)>>fmt->
Gshiá
)<<fmt->
Gloss
; \

98 
b
 = ((
pix–
&
fmt
->
Bmask
)>>fmt->
Bshiá
)<<fmt->
Bloss
; \

99 
a
 = ((
pix–
&
fmt
->
Amask
)>>fmt->
Ashiá
)<<fmt->
Aloss
; \

100 }

	)

105 
	#GFX_DISASSEMBLE_RGBA
(
buf
, 
bµ
, 
fmt
, 
pix–
, 
r
, 
g
, 
b
, 
a
) \

107 
pix–
 = *((
Ušt32
 *)(
buf
)); \

108 
	`GFX_RGBA_FROM_PIXEL
(
pix–
, 
fmt
, 
r
, 
g
, 
b
, 
a
); \

109 
pix–
 &ğ~
fmt
->
Amask
; \

110 } 0)

	)

115 
	#GFX_PIXEL_FROM_RGBA
(
pix–
, 
fmt
, 
r
, 
g
, 
b
, 
a
) \

117 
pix–
 = ((
r
>>
fmt
->
Rloss
)<<fmt->
Rshiá
)| \

118 ((
g
>>
fmt
->
Gloss
)<<fmt->
Gshiá
)| \

119 ((
b
>>
fmt
->
Bloss
)<<fmt->
Bshiá
)| \

120 ((
a
<<
fmt
->
Aloss
)<<fmt->
Ashiá
); \

121 }

	)

126 
	#GFX_ASSEMBLE_RGBA
(
buf
, 
bµ
, 
fmt
, 
r
, 
g
, 
b
, 
a
) \

128 
Ušt32
 
pix–
; \

130 
	`GFX_PIXEL_FROM_RGBA
(
pix–
, 
fmt
, 
r
, 
g
, 
b
, 
a
); \

131 *((
Ušt32
 *)(
buf
)èğ
pix–
; \

132 }

	)

137 
	#GFX_ALPHA_BLEND
(
sR
, 
sG
, 
sB
, 
A
, 
dR
, 
dG
, 
dB
) \

139 
dR
 = (((
sR
-dR)*(
A
))/255)+dR; \

140 
dG
 = (((
sG
-dG)*(
A
))/255)+dG; \

141 
dB
 = (((
sB
-dB)*(
A
))/255)+dB; \

142 } 0)

	)

149 
	#GFX_DUFFS_LOOP4
(
pix–_cİy_šüem’t
, 
width
) \

150 { 
n
 = (
width
+3)/4; \

151 
width
 & 3) { \

152 0: dØ{ 
pix–_cİy_šüem’t
; \

153 3: 
pix–_cİy_šüem’t
; \

154 2: 
pix–_cİy_šüem’t
; \

155 1: 
pix–_cİy_šüem’t
; \

156 }  --
n
 > 0 ); \

158 }

	)

163 #ifdeà
__ılu¥lus


	@SaveLoad.cpp

29 
	~"Av©¬.h
"

30 
	~"Cam·ignMªag”.h
"

31 
	~"FeP¬£r.h
"

32 
	~"GameS‹PÏy.h
"

33 
	~"M­R’d””.h
"

34 
	~"M’u.h
"

35 
	~"M’uAùiÚB¬.h
"

36 
	~"M’uCh¬aù”.h
"

37 
	~"M’uInv’tÜy.h
"

38 
	~"M’uMªag”.h
"

39 
	~"M’uSsh.h
"

40 
	~"M’uT®k”.h
"

41 
	~"Pow”Mªag”.h
"

42 
	~"S‘tšgs.h
"

43 
	~"UtsFeSy¡em.h
"

44 
	~"UtsP¬sšg.h
"

45 
	~<f¡»am
>

46 
	~<io¡»am
>

47 
	~<s¡»am
>

49 
usšg
 
Çme¥aû
 
	g¡d
;

54 
	gGameS‹PÏy
::
	$§veGame
() {

57 ià(
game_¦Ù
 == 0) ;

59 
of¡»am
 
outfe
;

61 
¡ršg¡»am
 
ss
;

62 
ss
.
	`¡r
("");

63 
ss
 << 
PATH_USER
;

64 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

65 
ss
 << 
GAME_PREFIX
 << "_";

66 
ss
 << "§ve" << 
game_¦Ù
 << ".txt";

68 
outfe
.
	`İ’
(
ss
.
	`¡r
().
	`c_¡r
(), 
ios
::
out
);

70 ià(
outfe
.
	`is_İ’
()) {

73 
outfe
 << "Çme=" << 
pc
->
¡©s
.
Çme
 << "\n";

76 
outfe
 << "³rmad—th=" << 
pc
->
¡©s
.
³rmad—th
 << "\n";

79 
outfe
 << "İtiÚ=" << 
pc
->
¡©s
.
ba£
 << "," <<…c->¡©s.
h—d
 << "," <<…c->¡©s.
pÜŒa™
 << "\n";

82 
outfe
 << "şass=" << 
pc
->
¡©s
.
ch¬aù”_şass
 << "\n";

85 
outfe
 << "xp=" << 
pc
->
¡©s
.
xp
 << "\n";

88 ià(
SAVE_HPMP
è
outfe
 << "hpmp=" << 
pc
->
¡©s
.
hp
 << "," <<…c->¡©s.
mp
 << "\n";

91 
outfe
 << "bud=" << 
pc
->
¡©s
.
physiÿl_ch¬aù”
 << "," <<…c->¡©s.
m’l_ch¬aù”
 << "," <<…c->¡©s.
ofãn£_ch¬aù”
 << "," <<…c->¡©s.
deãn£_ch¬aù”
 << "\n";

94 
outfe
 << "cu¼’cy=" << 
m’u
->
šv
->
cu¼’cy
 << "\n";

97 
outfe
 << "equ³d_quªt™y=" << 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`g‘Quªt™›s
() << "\n";

98 
outfe
 << "equ³d=" << 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`g‘I‹ms
() << "\n";

101 
outfe
 << "ÿ¼›d_quªt™y=" << 
m’u
->
šv
->
šv’tÜy
[
CARRIED
].
	`g‘Quªt™›s
() << "\n";

102 
outfe
 << "ÿ¼›d=" << 
m’u
->
šv
->
šv’tÜy
[
CARRIED
].
	`g‘I‹ms
() << "\n";

105 
outfe
 << "¥awn=" << 
m­
->
»¥awn_m­
 << "," << m­->
»¥awn_pošt
.
x
/
UNITS_PER_TILE
 << "," << m­->»¥awn_pošt.
y
/UNITS_PER_TILE << "\n";

108 
outfe
 << "actionbar=";

109 
i
=0; i<12; i++) {

110 ià(
pc
->
¡©s
.
ŒªsfÜmed
è
outfe
 << 
m’u
->
aù
->
aùiÚb¬
[
i
];

111 
outfe
 << 
m’u
->
aù
->
hÙkeys
[
i
];

112 ià(
i
<11è
outfe
 << ",";

114 
outfe
 << "\n";

117 ià(
pc
->
¡©s
.
ŒªsfÜm_ty³
 =ğ"uÁ¿nsfÜm" ||…c->¡©s.
ŒªsfÜm_du¿tiÚ
 !ğ-1è
outfe
 << "transformed=" << "\n";

118 
outfe
 << "ŒªsfÜmed=" << 
pc
->
¡©s
.
ŒªsfÜm_ty³
 << "," <<…c->¡©s.
mªu®_uÁ¿nsfÜm
 << "\n";

121 ià(
pc
->
¡©s
.
ŒªsfÜmed
 &&…c->
h”o_¡©s
) {

122 
pc
->
¡©s
.
pow”s_li¡
 =…c->
h”o_¡©s
->powers_list;

126 
outfe
 << "powers=";

127 
i
=0; i<
pc
->
¡©s
.
pow”s_li¡
.
	`size
(); i++) {

128 ià(
i
 < 
pc
->
¡©s
.
pow”s_li¡
.
	`size
()-1) {

129 ià(
pc
->
¡©s
.
pow”s_li¡
[
i
] > 0)

130 
outfe
 << 
pc
->
¡©s
.
pow”s_li¡
[
i
] << ",";

133 ià(
pc
->
¡©s
.
pow”s_li¡
[
i
] > 0)

134 
outfe
 << 
pc
->
¡©s
.
pow”s_li¡
[
i
];

137 
outfe
 << "\n";

140 ià(
pc
->
¡©s
.
ŒªsfÜmed
 &&…c->
ch¬med_¡©s
) {

141 
pc
->
¡©s
.
pow”s_li¡
 =…c->
ch¬med_¡©s
->powers_list;

145 
outfe
 << "campaign=";

146 
outfe
 << 
ÿmp
->
	`g‘AÎ
();

148 
outfe
 << 
’dl
;

150 ià(
outfe
.
	`bad
()è
	`årštf
(
¡d”r
, "Unableo savehe game. No write‡ccess or disk is full!\n");

151 
outfe
.
	`şo£
();

152 
outfe
.
	`ş—r
();

156 
ss
.
	`¡r
("");

157 
ss
 << 
PATH_USER
;

158 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

159 
ss
 << 
GAME_PREFIX
 << "_";

160 
ss
 << "stash.txt";

162 
outfe
.
	`İ’
(
ss
.
	`¡r
().
	`c_¡r
(), 
ios
::
out
);

164 ià(
outfe
.
	`is_İ’
()) {

165 
outfe
 << "quªt™y=" << 
m’u
->
¡ash
->
¡ock
.
	`g‘Quªt™›s
() << "\n";

166 
outfe
 << "™em=" << 
m’u
->
¡ash
->
¡ock
.
	`g‘I‹ms
() << "\n";

168 
outfe
 << 
’dl
;

170 ià(
outfe
.
	`bad
()è
	`årštf
(
¡d”r
, "Unableo save stash. No write‡ccess or disk is full!\n");

171 
outfe
.
	`şo£
();

172 
outfe
.
	`ş—r
();

174 
	}
}

179 
	gGameS‹PÏy
::
	$lßdGame
() {

180 
§ved_hp
 = 0;

181 
§ved_mp
 = 0;

184 ià(
game_¦Ù
 == 0) ;

186 
FeP¬£r
 
šfe
;

187 
hÙkeys
[12];

189 
i
=0; i<12; i++) {

190 
hÙkeys
[
i
] = -1;

193 
¡ršg¡»am
 
ss
;

194 
ss
.
	`¡r
("");

195 
ss
 << 
PATH_USER
;

196 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

197 
ss
 << 
GAME_PREFIX
 << "_";

198 
ss
 << "§ve" << 
game_¦Ù
 << ".txt";

200 ià(
šfe
.
	`İ’
(
ss
.
	`¡r
())) {

201 
šfe
.
	`Ãxt
()) {

202 ià(
šfe
.
key
 =ğ"Çme"è
pc
->
¡©s
.
Çme
 = infe.
v®
;

203 ià(
šfe
.
key
 == "permadeath") {

204 ià(
	`toIÁ
(
šfe
.
v®
) == 1)

205 
pc
->
¡©s
.
³rmad—th
 = 
Œue
;

207 
pc
->
¡©s
.
³rmad—th
 = 
çl£
;

209 ià(
šfe
.
key
 == "option") {

210 
pc
->
¡©s
.
ba£
 = 
šfe
.
	`ÃxtV®ue
();

211 
pc
->
¡©s
.
h—d
 = 
šfe
.
	`ÃxtV®ue
();

212 
pc
->
¡©s
.
pÜŒa™
 = 
šfe
.
	`ÃxtV®ue
();

214 ià(
šfe
.
key
 == "class") {

215 
pc
->
¡©s
.
ch¬aù”_şass
 = 
šfe
.
	`ÃxtV®ue
();

217 ià(
šfe
.
key
 == "xp") {

218 
pc
->
¡©s
.
xp
 = 
	`toIÁ
(
šfe
.
v®
);

219 ià(
pc
->
¡©s
.
xp
 < 0) {

220 
	`årštf
(
¡d”r
, "XP value is out of bounds, settingo zero\n");

221 
pc
->
¡©s
.
xp
 = 0;

224 ià(
šfe
.
key
 == "hpmp") {

225 
§ved_hp
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

226 
§ved_mp
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

228 ià(
šfe
.
key
 == "build") {

229 
pc
->
¡©s
.
physiÿl_ch¬aù”
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

230 
pc
->
¡©s
.
m’l_ch¬aù”
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

231 
pc
->
¡©s
.
ofãn£_ch¬aù”
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

232 
pc
->
¡©s
.
deãn£_ch¬aù”
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

233 ià(
pc
->
¡©s
.
physiÿl_ch¬aù”
 < 0 ||…c->¡©s.physiÿl_ch¬aù” >…c->¡©s.
max_pošts_³r_¡©
 ||

234 
pc
->
¡©s
.
m’l_ch¬aù”
 < 0 ||…c->¡©s.m’l_ch¬aù” >…c->¡©s.
max_pošts_³r_¡©
 ||

235 
pc
->
¡©s
.
ofãn£_ch¬aù”
 < 0 ||…c->¡©s.ofãn£_ch¬aù” >…c->¡©s.
max_pošts_³r_¡©
 ||

236 
pc
->
¡©s
.
deãn£_ch¬aù”
 < 0 ||…c->¡©s.deãn£_ch¬aù” >…c->¡©s.
max_pošts_³r_¡©
) {

238 
	`årštf
(
¡d”r
, "Some basic stats‡re out of bounds, settingo zero\n");

239 
pc
->
¡©s
.
physiÿl_ch¬aù”
 = 0;

240 
pc
->
¡©s
.
m’l_ch¬aù”
 = 0;

241 
pc
->
¡©s
.
ofãn£_ch¬aù”
 = 0;

242 
pc
->
¡©s
.
deãn£_ch¬aù”
 = 0;

245 ià(
šfe
.
key
 == "currency") {

246 
m’u
->
šv
->
cu¼’cy
 = 
	`toIÁ
(
šfe
.
v®
);

247 ià(
m’u
->
šv
->
cu¼’cy
 < 0) {

248 
	`årštf
(
¡d”r
, "Currency value out of bounds, settingo zero\n");

249 
m’u
->
šv
->
cu¼’cy
 = 0;

252 ià(
šfe
.
key
 == "equipped") {

253 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`£tI‹ms
(
šfe
.
v®
);

255 ià(
šfe
.
key
 == "equipped_quantity") {

256 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`£tQuªt™›s
(
šfe
.
v®
);

258 ià(
šfe
.
key
 == "carried") {

259 
m’u
->
šv
->
šv’tÜy
[
CARRIED
].
	`£tI‹ms
(
šfe
.
v®
);

261 ià(
šfe
.
key
 == "carried_quantity") {

262 
m’u
->
šv
->
šv’tÜy
[
CARRIED
].
	`£tQuªt™›s
(
šfe
.
v®
);

264 ià(
šfe
.
key
 == "spawn") {

265 
m­
->
‹ËpÜt_m­Çme
 = 
šfe
.
	`ÃxtV®ue
();

267 ià(
	`feExi¡s
(
mods
->
	`loÿ‹
("m­s/" + 
m­
->
‹ËpÜt_m­Çme
))) {

268 
m­
->
‹ËpÜt_de¡š©iÚ
.
x
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

269 
m­
->
‹ËpÜt_de¡š©iÚ
.
y
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
()è* 
UNITS_PER_TILE
 + UNITS_PER_TILE/2;

270 
m­
->
‹ËpÜtiÚ
 = 
Œue
;

273 
m­
->
	`ş—rEv’ts
();

276 
	`årštf
(
¡d”r
, "UÇbËØfšd m­s/%s,†ßdšg s·wn.txt\n", 
m­
->
‹ËpÜt_m­Çme
.
	`c_¡r
());

277 
m­
->
‹ËpÜt_m­Çme
 = "spawn.txt";

278 
m­
->
‹ËpÜt_de¡š©iÚ
.
x
 = 1;

279 
m­
->
‹ËpÜt_de¡š©iÚ
.
y
 = 1;

280 
m­
->
‹ËpÜtiÚ
 = 
Œue
;

284 ià(
šfe
.
key
 == "actionbar") {

285 
i
=0; i<12; i++) {

286 
hÙkeys
[
i
] = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

287 ià(
hÙkeys
[
i
] < 0) {

288 
	`årštf
(
¡d”r
, "HÙkey…ow” oÀpos™iÚ %d ha Ãg©ivid, skpšg\n", 
i
);

289 
hÙkeys
[
i
] = 0;

291 ià(()
hÙkeys
[
i
] > 
pow”s
->pow”s.
	`size
()-1) {

292 
	`årštf
(
¡d”r
, "HÙkey…ow” id (%dèouˆoàbound 1-%d, skpšg\n", 
hÙkeys
[
i
], ()
pow”s
->pow”s.
	`size
());

293 
hÙkeys
[
i
] = 0;

295 ià(
hÙkeys
[
i
] !ğ0 && 
pow”s
->pow”s[hÙkeys[i]].
Çme
 == "") {

296 
	`årštf
(
¡d”r
, "HÙkey…ow” w™h id=%d, found oÀpos™iÚ %d dÛ nÙƒxi¡, skpšg\n", 
hÙkeys
[
i
], i);

297 
hÙkeys
[
i
] = 0;

300 
m’u
->
aù
->
	`£t
(
hÙkeys
);

302 ià(
šfe
.
key
 == "transformed") {

303 
pc
->
¡©s
.
ŒªsfÜm_ty³
 = 
šfe
.
	`ÃxtV®ue
();

304 ià(
pc
->
¡©s
.
ŒªsfÜm_ty³
 != "") {

305 
pc
->
¡©s
.
ŒªsfÜm_du¿tiÚ
 = -1;

306 
pc
->
¡©s
.
mªu®_uÁ¿nsfÜm
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

309 ià(
šfe
.
key
 == "powers") {

310 
¡ršg
 
pow”
;

311  (
pow”
 = 
šfe
.
	`ÃxtV®ue
()) != "") {

312 ià(
	`toIÁ
(
pow”
) > 0)

313 
pc
->
¡©s
.
pow”s_li¡
.
	`push_back
(
	`toIÁ
(
pow”
));

316 ià(
šfe
.
key
 =ğ"ÿm·ign"è
ÿmp
->
	`£tAÎ
(šfe.
v®
);

319 
šfe
.
	`şo£
();

320 } 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
ss
.
	`¡r
().
	`c_¡r
());

323 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`flEqum’tSlÙs
();

326 
	`lßdSsh
();

329 
pc
->
¡©s
.
	`»ÿlc
();

330 
m’u
->
šv
->
	`­¶yEqum’t
(m’u->šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

333 
pc
->
¡©s
.
	`logic
();

334 ià(
SAVE_HPMP
) {

335 ià(
§ved_hp
 < 0 || saved_h°> 
pc
->
¡©s
.
maxhp
) {

336 
	`årštf
(
¡d”r
, "HP value is out of bounds, settingo maximum\n");

337 
pc
->
¡©s
.
hp
 =…c->¡©s.
maxhp
;

339 
pc
->
¡©s
.
hp
 = 
§ved_hp
;

341 ià(
§ved_mp
 < 0 || saved_m°> 
pc
->
¡©s
.
maxmp
) {

342 
	`årštf
(
¡d”r
, "MP value is out of bounds, settingo maximum\n");

343 
pc
->
¡©s
.
mp
 =…c->¡©s.
maxmp
;

345 
pc
->
¡©s
.
mp
 = 
§ved_mp
;

348 
pc
->
¡©s
.
hp
 =…c->¡©s.
maxhp
;

349 
pc
->
¡©s
.
mp
 =…c->¡©s.
maxmp
;

353 
m’u
->
chr
->
	`»äeshSts
();

356 
pc
->
¡©s
.
dœeùiÚ
 = 6;

359 
m’u
->
lk”
->
	`£tH”o
(
pc
->
¡©s
.
Çme
,…c->¡©s.
pÜŒa™
);

362 
pc
->
	`lßdSounds
();

363 
	}
}

368 
	gGameS‹PÏy
::
	$lßdCÏss
(
šdex
) {

370 ià(
game_¦Ù
 == 0) ;

372 
pc
->
¡©s
.
ch¬aù”_şass
 = 
HERO_CLASSES
[
šdex
].
Çme
;

373 
pc
->
¡©s
.
physiÿl_ch¬aù”
 +ğ
HERO_CLASSES
[
šdex
].
physiÿl
;

374 
pc
->
¡©s
.
m’l_ch¬aù”
 +ğ
HERO_CLASSES
[
šdex
].
m’l
;

375 
pc
->
¡©s
.
ofãn£_ch¬aù”
 +ğ
HERO_CLASSES
[
šdex
].
ofãn£
;

376 
pc
->
¡©s
.
deãn£_ch¬aù”
 +ğ
HERO_CLASSES
[
šdex
].
deãn£
;

377 
m’u
->
šv
->
cu¼’cy
 +ğ
HERO_CLASSES
[
šdex
].currency;

378 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`£tI‹ms
(
HERO_CLASSES
[
šdex
].
equm’t
);

379 
i
=0; i<
HERO_CLASSES
[
šdex
].
pow”s
.
	`size
(); i++) {

380 
pc
->
¡©s
.
pow”s_li¡
.
	`push_back
(
HERO_CLASSES
[
šdex
].
pow”s
[
i
]);

382 
i
=0; i<
HERO_CLASSES
[
šdex
].
¡©u£s
.
	`size
(); i++) {

383 
ÿmp
->
	`£tStus
(
HERO_CLASSES
[
šdex
].
¡©u£s
[
i
]);

385 
m’u
->
aù
->
	`£t
(
HERO_CLASSES
[
šdex
].
hÙkeys
);

387 
m’u
->
šv
->
šv’tÜy
[
EQUIPMENT
].
	`flEqum’tSlÙs
();

390 
pc
->
¡©s
.
	`»ÿlc
();

391 
m’u
->
šv
->
	`­¶yEqum’t
(m’u->šv->
šv’tÜy
[
EQUIPMENT
].
¡Üage
);

394 
m’u
->
chr
->
	`»äeshSts
();

396 
	}
}

401 
	gGameS‹PÏy
::
	$lßdSsh
() {

403 
FeP¬£r
 
šfe
;

404 
¡ršg¡»am
 
ss
;

405 
ss
.
	`¡r
("");

406 
ss
 << 
PATH_USER
;

407 ià(
GAME_PREFIX
.
	`Ëngth
() > 0)

408 
ss
 << 
GAME_PREFIX
 << "_";

409 
ss
 << "stash.txt";

411 ià(
šfe
.
	`İ’
(
ss
.
	`¡r
())) {

412 
šfe
.
	`Ãxt
()) {

413 ià(
šfe
.
key
 == "item") {

414 
m’u
->
¡ash
->
¡ock
.
	`£tI‹ms
(
šfe
.
v®
);

416 ià(
šfe
.
key
 == "quantity") {

417 
m’u
->
¡ash
->
¡ock
.
	`£tQuªt™›s
(
šfe
.
v®
);

420 
šfe
.
	`şo£
();

421 } 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
ss
.
	`¡r
().
	`c_¡r
());

422 
	}
}

	@Settings.cpp

24 
	~<f¡»am
>

25 
	~<c¡ršg
>

26 
	~<¡ršg
>

27 
	~<ty³šfo
>

28 
	~<cm©h
>

29 
usšg
 
Çme¥aû
 
	g¡d
;

31 
	~"FeP¬£r.h
"

32 
	~"S‘tšgs.h
"

33 
	~"Uts.h
"

34 
	~"UtsP¬sšg.h
"

35 
	~"UtsFeSy¡em.h
"

36 
	~"Sh¬edResourûs.h
"

38 #ifdeà
_MSC_VER


39 
	#log2
(
x
è
	`logf
(x)/logf(2)

	)

42 şas 
	cCÚfigEÁry


44 
	mpublic
:

45 cÚ¡ * 
Çme
;

46 cÚ¡ 
ty³_šfo
 * 
	mty³
;

47 cÚ¡ * 
	mdeçuÉ_v®
;

48 * 
	m¡Üage
;

49 cÚ¡ * 
	mcomm’t
;

52 
CÚfigEÁry
 
	gcÚfig
[] = {

53 { "fuÎsü“n", &
ty³id
(
FULLSCREEN
), "0", &FULLSCREEN, "fullscreen mode. 1ƒnable, 0 disable."},

54 { "»sŞutiÚ_w", &
ty³id
(
VIEW_W
), "640", &VIEW_W, "display„esolution. 640x480 minimum."},

55 { "»sŞutiÚ_h", &
ty³id
(
VIEW_H
), "480", &VIEW_H, 
NULL
},

56 { "audio", &
ty³id
(
AUDIO
), "1", &AUDIO, "Enable music‡nd sound subsystem."},

57 { "music_vŞume", &
ty³id
(
MUSIC_VOLUME
), "96", &MUSIC_VOLUME, "music‡nd sound volume (0 = silent, 128 = max)"},

58 { "sound_vŞume", &
ty³id
(
SOUND_VOLUME
), "128", &SOUND_VOLUME, 
NULL
},

59 { "comb©_‹xt", &
ty³id
(
COMBAT_TEXT
), "0", &COMBAT_TEXT, "display floating damageext. 1ƒnable, 0 disable."},

60 { "mou£_move", &
ty³id
(
MOUSE_MOVE
), "0", &MOUSE_MOVE, "use mouseo move (experimental). 1ƒnable, 0 disable."},

61 { "hwsurçû", &
ty³id
(
HWSURFACE
), "1", &HWSURFACE, "hardware surfaces, double buffering. Try disabling for…erformance. 1ƒnable, 0 disable."},

62 { "doubËbuf", &
ty³id
(
DOUBLEBUF
), "1", &DOUBLEBUF, 
NULL
},

63 { "ªim©ed_tes", &
ty³id
(
ANIMATED_TILES
), "1", &ANIMATED_TILES, "animatediles. Try disabling for…erformance. 1ƒnable, 0 disable."},

64 { "’abË_joy¡ick", &
ty³id
(
ENABLE_JOYSTICK
), "0", &ENABLE_JOYSTICK, "joystick settings."},

65 { "joy¡ick_deviû", &
ty³id
(
JOYSTICK_DEVICE
), "0", &JOYSTICK_DEVICE, 
NULL
},

66 { "Ïnguage", &
ty³id
(
LANGUAGE
), "en", &LANGUAGE, "2-letter†anguage code."},

67 { "chªge_gamma", &
ty³id
(
CHANGE_GAMMA
), "0", &CHANGE_GAMMA, "allow changing gamma (experimental). 1ƒnable, 0 disable."},

68 { "gamma", &
ty³id
(
GAMMA
), "1.0", &GAMMA, "screen gamma (0.5 = darkest, 2.0 =†ightest)"},

69 { "‹xtu»_qu®™y", &
ty³id
(
TEXTURE_QUALITY
), "1", &TEXTURE_QUALITY, "texture quality (0 =†ow quality, 1 = high quality)"},

70 { "mou£_aim", &
ty³id
(
MOUSE_AIM
), "1", &MOUSE_AIM, "use mouseo‡im. 1ƒnable, 0 disable."},

71 { "show_ås", &
ty³id
(
SHOW_FPS
), "0", &SHOW_FPS, "show frames…er second. 1ƒnable, 0 disable."}

73 cÚ¡ 
	gcÚfig_size
 = (
cÚfig
è/ (
CÚfigEÁry
);

76 
¡ršg
 
	gPATH_CONF
 = "";

77 
¡ršg
 
	gPATH_USER
 = "";

78 
¡ršg
 
	gPATH_DATA
 = "";

79 
¡ršg
 
	gUSER_PATH_DATA
 = "";

82 
¡ršg
 
	gFILE_SETTINGS
 = "settings.txt";

83 
¡ršg
 
	gFILE_KEYBINDINGS
 = "keybindings.txt";

86 
	gUNITS_PER_TILE
 = 64;

87 
	gTILE_SHIFT
 = 6;

88 
	gUNITS_PER_PIXEL_X
 = 2;

89 
	gUNITS_PER_PIXEL_Y
 = 4;

90 
	gTILE_W
 = 64;

91 
	gTILE_H
 = 32;

92 
	gTILE_W_HALF
 = 
TILE_W
/2;

93 
	gTILE_H_HALF
 = 
TILE_H
/2;

94 
	gTILESET_ISOMETRIC
 = 0;

95 
	gTILESET_ORTHOGONAL
 = 1;

96 
	gTILESET_ORIENTATION
 = 
TILESET_ISOMETRIC
;

99 
	gFRAME_W
;

100 
	gFRAME_H
;

102 
	gICON_SIZE
;

105 
boŞ
 
	gFULLSCREEN
;

106 
	gMAX_FRAMES_PER_SEC
 = 30;

107 
	gBITS_PER_PIXEL
 = 32;

108 
	gVIEW_W
;

109 
	gVIEW_H
;

110 
	gVIEW_W_HALF
 = 
VIEW_W
/2;

111 
	gVIEW_H_HALF
 = 
VIEW_H
/2;

112 
	gMIN_VIEW_W
 = -1;

113 
	gMIN_VIEW_H
 = -1;

114 
boŞ
 
	gDOUBLEBUF
;

115 
boŞ
 
	gHWSURFACE
;

116 
boŞ
 
	gCHANGE_GAMMA
;

117 
	gGAMMA
;

118 
boŞ
 
	gTEXTURE_QUALITY
;

119 
boŞ
 
	gANIMATED_TILES
;

122 
boŞ
 
	gAUDIO
;

123 
	gMUSIC_VOLUME
;

124 
	gSOUND_VOLUME
;

127 
boŞ
 
	gCOMBAT_TEXT
;

130 
boŞ
 
	gMOUSE_MOVE
;

131 
boŞ
 
	gENABLE_JOYSTICK
;

132 
	gJOYSTICK_DEVICE
;

133 
boŞ
 
	gMOUSE_AIM
;

136 
	g¡d
::
¡ršg
 
LANGUAGE
 = "en";

139 
	gAUTOPICKUP_RANGE
 = 0;

140 
boŞ
 
	gAUTOPICKUP_CURRENCY
 = 
çl£
;

143 
	gMAX_ABSORB
 = 90;

144 
	gMAX_RESIST
 = 90;

145 
	gMAX_BLOCK
 = 100;

146 
	gMAX_AVOIDANCE
 = 99;

149 
	g¡d
::
veùÜ
<
EËm’t
> 
ELEMENTS
;

152 
	g¡d
::
veùÜ
<
H”oCÏss
> 
HERO_CLASSES
;

155 
	g¡d
::
¡ršg
 
CURRENCY
 = "Gold";

156 
	gVENDOR_RATIO
 = 0.25;

159 
boŞ
 
	gMENUS_PAUSE
 = 
çl£
;

160 
boŞ
 
	gSAVE_HPMP
 = 
çl£
;

161 
boŞ
 
	gENABLE_PLAYGAME
 = 
çl£
;

162 
boŞ
 
	gSHOW_FPS
 = 
çl£
;

163 
	gCORPSE_TIMEOUT
 = 1800;

164 
boŞ
 
	gSELL_WITHOUT_VENDOR
 = 
Œue
;

165 
	gAIM_ASSIST
 = 0;

166 
	g¡d
::
¡ršg
 
GAME_PREFIX
 = "";

167 
	g¡d
::
¡ršg
 
WINDOW_TITLE
 = "Flare";

168 
	gSOUND_FALLOFF
 = 15;

177 #ifdeà
_WIN32


179 
	$£tP©hs
() {

182 
PATH_CONF
 = "config";

183 
PATH_USER
 = "saves";

184 
PATH_DATA
 = "";

185 ià(
	`dœExi¡s
(
USER_PATH_DATA
)è
PATH_DATA
 = USER_PATH_DATA;

186 ià(!
USER_PATH_DATA
.
	`em±y
()è
	`årštf
(
¡d”r
, "Error: Could‚ot find specified game data directory.\n");

189 
	`ü—‹Dœ
(
PATH_CONF
);

190 
	`ü—‹Dœ
(
PATH_USER
);

192 
PATH_CONF
 = PATH_CONF + "/";

193 
PATH_USER
 = PATH_USER + "/";

194 
	}
}

195 #–ià
__amigaos4__


197 
	$£tP©hs
() {

198 
PATH_CONF
 = "PROGDIR:";

199 
PATH_USER
 = "PROGDIR:";

200 
PATH_DATA
 = "PROGDIR:";

201 ià(
	`dœExi¡s
(
USER_PATH_DATA
)è
PATH_DATA
 = USER_PATH_DATA;

202 ià(!
USER_PATH_DATA
.
	`em±y
()è
	`årštf
(
¡d”r
, "Error: Could‚ot find specified game data directory.\n");

203 
	}
}

205 
	$£tP©hs
() {

207 
¡ršg
 
’gše_fŞd”
 = "flare";

214 ià(
	`g‘’v
("XDG_CONFIG_HOME"è!ğ
NULL
) {

215 
PATH_CONF
 = (
¡ršg
)
	`g‘’v
("XDG_CONFIG_HOME"è+ "/" + 
’gše_fŞd”
 + "/";

216 
	`ü—‹Dœ
(
PATH_CONF
);

219 ià(
	`g‘’v
("HOME"è!ğ
NULL
) {

220 
PATH_CONF
 = (
¡ršg
)
	`g‘’v
("HOME") + "/.config/";

221 
	`ü—‹Dœ
(
PATH_CONF
);

222 
PATH_CONF
 +ğ
’gše_fŞd”
 + "/";

223 
	`ü—‹Dœ
(
PATH_CONF
);

227 
PATH_CONF
 = "./config/";

228 
	`ü—‹Dœ
(
PATH_CONF
);

233 ià(
	`g‘’v
("XDG_DATA_HOME"è!ğ
NULL
) {

234 
PATH_USER
 = (
¡ršg
)
	`g‘’v
("XDG_DATA_HOME"è+ "/" + 
’gše_fŞd”
 + "/";

235 
	`ü—‹Dœ
(
PATH_USER
);

238 ià(
	`g‘’v
("HOME"è!ğ
NULL
) {

239 
PATH_USER
 = (
¡ršg
)
	`g‘’v
("HOME") + "/.local/";

240 
	`ü—‹Dœ
(
PATH_USER
);

241 
PATH_USER
 += "share/";

242 
	`ü—‹Dœ
(
PATH_USER
);

243 
PATH_USER
 +ğ
’gše_fŞd”
 + "/";

244 
	`ü—‹Dœ
(
PATH_USER
);

248 
PATH_USER
 = "./saves/";

249 
	`ü—‹Dœ
(
PATH_USER
);

264 ià(
	`dœExi¡s
(
USER_PATH_DATA
)) {

265 
PATH_DATA
 = 
USER_PATH_DATA
;

268 ià(!
USER_PATH_DATA
.
	`em±y
()è
	`årštf
(
¡d”r
, "Error: Could‚ot find specified game data directory.\n");

271 ià(
	`dœExi¡s
("./mods")) {

272 
PATH_DATA
 = "./";

278 ià(
	`g‘’v
("XDG_DATA_DIRS"è!ğ
NULL
) {

279 
¡ršg
 
·thli¡
 = (¡ršg)
	`g‘’v
("XDG_DATA_DIRS");

280 
¡ršg
 
·th‹¡
;

281 
·th‹¡
 = 
	`—tFœ¡SŒšg
(
·thli¡
,':');

282 
·th‹¡
 != "") {

283 
PATH_DATA
 = 
·th‹¡
 + "/" + 
’gše_fŞd”
 + "/";

284 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

285 
·th‹¡
 = 
	`—tFœ¡SŒšg
(
·thli¡
,':');

289 #ià
defšed
 
DATA_INSTALL_DIR


290 
PATH_DATA
 = 
DATA_INSTALL_DIR
 "/";

291 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

295 
PATH_DATA
 = "/u¤/loÿl/sh¬e/" + 
’gše_fŞd”
 + "/";

296 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

298 
PATH_DATA
 = "/u¤/sh¬e/" + 
’gše_fŞd”
 + "/";

299 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

302 
PATH_DATA
 = "/u¤/loÿl/sh¬e/games/" + 
’gše_fŞd”
 + "/";

303 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

305 
PATH_DATA
 = "/u¤/sh¬e/games/" + 
’gše_fŞd”
 + "/";

306 ià(
	`dœExi¡s
(
PATH_DATA
)) ;

309 
PATH_DATA
 = "./";

310 
	}
}

313 
CÚfigEÁry
 * 
	$g‘CÚfigEÁry
(cÚ¡ * 
Çme
) {

315 
i
 = 0; i < 
cÚfig_size
; i++) {

316 ià(
¡d
::
	`¡rcmp
(
cÚfig
[
i
].
Çme
,‚ame) == 0)  config + i;

318  
NULL
;

319 
	}
}

321 
CÚfigEÁry
 * 
g‘CÚfigEÁry
(cÚ¡ 
¡d
::
¡ršg
 & 
Çme
) {

322  
g‘CÚfigEÁry
(
Çme
.
c_¡r
());

325 
	$lßdTe£tS‘tšgs
() {

326 
FeP¬£r
 
šfe
;

328 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/te£t_cÚfig.txt").
	`c_¡r
())) {

329 
šfe
.
	`Ãxt
()) {

330 ià(
šfe
.
key
 == "units_per_tile") {

331 
UNITS_PER_TILE
 = 
	`toIÁ
(
šfe
.
v®
);

333 ià(
šfe
.
key
 == "tile_size") {

334 
TILE_W
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

335 
TILE_H
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

336 
TILE_W_HALF
 = 
TILE_W
 /2;

337 
TILE_H_HALF
 = 
TILE_H
 /2;

339 ià(
šfe
.
key
 == "orientation") {

340 ià(
šfe
.
v®
 == "isometric")

341 
TILESET_ORIENTATION
 = 
TILESET_ISOMETRIC
;

342 ià(
šfe
.
v®
 == "orthogonal")

343 
TILESET_ORIENTATION
 = 
TILESET_ORTHOGONAL
;

346 
šfe
.
	`şo£
();

347 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/tileset_config.txt! Defaultingo 64x32 isometriciles.\n");

350 
TILE_SHIFT
 = 
	`log2
(
UNITS_PER_TILE
);

351 
VIEW_W_HALF
 = 
VIEW_W
 / 2;

352 
VIEW_H_HALF
 = 
VIEW_H
 / 2;

353 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ISOMETRIC
) {

354 
UNITS_PER_PIXEL_X
 = 
UNITS_PER_TILE
 / 
TILE_W
 * 2;

355 
UNITS_PER_PIXEL_Y
 = 
UNITS_PER_TILE
 / 
TILE_H
 * 2;

358 
UNITS_PER_PIXEL_X
 = 
UNITS_PER_TILE
 / 
TILE_W
;

359 
UNITS_PER_PIXEL_Y
 = 
UNITS_PER_TILE
 / 
TILE_H
;

361 
	}
}

363 
	$lßdMiscS‘tšgs
() {

364 
FeP¬£r
 
šfe
;

367 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/misc.txt").
	`c_¡r
())) {

368 
šfe
.
	`Ãxt
()) {

369 ià(
šfe
.
key
 == "save_hpmp") {

370 ià(
	`toIÁ
(
šfe
.
v®
) == 1)

371 
SAVE_HPMP
 = 
Œue
;

372 } ià(
šfe
.
key
 == "corpse_timeout") {

373 
CORPSE_TIMEOUT
 = 
	`toIÁ
(
šfe
.
v®
);

374 } ià(
šfe
.
key
 == "sell_without_vendor") {

375 ià(
	`toIÁ
(
šfe
.
v®
) == 1)

376 
SELL_WITHOUT_VENDOR
 = 
Œue
;

378 
SELL_WITHOUT_VENDOR
 = 
çl£
;

379 } ià(
šfe
.
key
 == "aim_assist") {

380 
AIM_ASSIST
 = 
	`toIÁ
(
šfe
.
v®
);

381 } ià(
šfe
.
key
 == "window_title") {

382 
WINDOW_TITLE
 = 
šfe
.
v®
;

383 } ià(
šfe
.
key
 == "game_prefix") {

384 
GAME_PREFIX
 = 
šfe
.
v®
;

385 } ià(
šfe
.
key
 == "sound_falloff") {

386 
SOUND_FALLOFF
 = 
	`toIÁ
(
šfe
.
v®
);

390 
šfe
.
	`şo£
();

391 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/misc.txt!\n");

393 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/»sŞutiÚs.txt").
	`c_¡r
())) {

394 
šfe
.
	`Ãxt
()) {

395 ià(
šfe
.
key
 == "menu_frame_width")

396 
FRAME_W
 = 
	`toIÁ
(
šfe
.
v®
);

397 ià(
šfe
.
key
 == "menu_frame_height")

398 
FRAME_H
 = 
	`toIÁ
(
šfe
.
v®
);

399 ià(
šfe
.
key
 == "icon_size")

400 
ICON_SIZE
 = 
	`toIÁ
(
šfe
.
v®
);

401 ià(
šfe
.
key
 == "required_width") {

402 
MIN_VIEW_W
 = 
	`toIÁ
(
šfe
.
v®
);

403 ià(
VIEW_W
 < 
MIN_VIEW_W
) VIEW_W = MIN_VIEW_W;

404 
VIEW_W_HALF
 = 
VIEW_W
/2;

405 } ià(
šfe
.
key
 == "required_height") {

406 
MIN_VIEW_H
 = 
	`toIÁ
(
šfe
.
v®
);

407 ià(
VIEW_H
 < 
MIN_VIEW_H
) VIEW_H = MIN_VIEW_H;

408 
VIEW_H_HALF
 = 
VIEW_H
/2;

411 
šfe
.
	`şo£
();

412 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/resolutions.txt!\n");

414 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/gam•Ïy.txt").
	`c_¡r
())) {

415 
šfe
.
	`Ãxt
()) {

416 ià(
šfe
.
key
 == "enable_playgame") {

417 ià(
	`toIÁ
(
šfe
.
v®
) == 1)

418 
ENABLE_PLAYGAME
 = 
Œue
;

420 
ENABLE_PLAYGAME
 = 
çl£
;

423 
šfe
.
	`şo£
();

424 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/gameplay.txt!\n");

426 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/comb©.txt").
	`c_¡r
())) {

427 
šfe
.
	`Ãxt
()) {

428 ià(
šfe
.
key
 == "max_absorb_percent") {

429 
MAX_ABSORB
 = 
	`toIÁ
(
šfe
.
v®
);

430 } ià(
šfe
.
key
 == "max_resist_percent") {

431 
MAX_RESIST
 = 
	`toIÁ
(
šfe
.
v®
);

432 } ià(
šfe
.
key
 == "max_block_percent") {

433 
MAX_BLOCK
 = 
	`toIÁ
(
šfe
.
v®
);

434 } ià(
šfe
.
key
 == "max_avoidance_percent") {

435 
MAX_AVOIDANCE
 = 
	`toIÁ
(
šfe
.
v®
);

438 
šfe
.
	`şo£
();

439 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/combat.txt!\n");

441 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/–em’ts.txt").
	`c_¡r
())) {

442 
EËm’t
 
e
;

443 
ELEMENTS
.
	`ş—r
();

444 
šfe
.
	`Ãxt
()) {

445 ià(
šfe
.
key
 =ğ"Çme"è
e
.
Çme
 = infe.
v®
;

446 ià(
šfe
.
key
 =ğ"»si¡"è
e
.
»si¡
 = infe.
v®
;

448 ià(
e
.
Çme
 !ğ"" &&ƒ.
»si¡
 != "") {

449 
ELEMENTS
.
	`push_back
(
e
);

450 
e
.
Çme
 =ƒ.
»si¡
 = "";

453 
šfe
.
	`şo£
();

454 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/elements.txt!\n");

456 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/şas£s.txt").
	`c_¡r
())) {

457 
H”oCÏss
 
c
;

458 
HERO_CLASSES
.
	`ş—r
();

459 
šfe
.
	`Ãxt
()) {

460 ià(
šfe
.
key
 =ğ"Çme"è
c
.
Çme
 = infe.
v®
;

462 ià(
c
.
Çme
 != "") {

463 
HERO_CLASSES
.
	`push_back
(
c
);

464 
c
.
Çme
 = "";

467 ià(!
HERO_CLASSES
.
	`em±y
()) {

468 ià(
šfe
.
key
 =ğ"desütiÚ"è
HERO_CLASSES
.
	`back
().
desütiÚ
 = infe.
v®
;

469 ià(
šfe
.
key
 =ğ"cu¼’cy"è
HERO_CLASSES
.
	`back
().
cu¼’cy
 = 
	`toIÁ
(šfe.
v®
);

470 ià(
šfe
.
key
 =ğ"equm’t"è
HERO_CLASSES
.
	`back
().
equm’t
 = infe.
v®
;

471 ià(
šfe
.
key
 =ğ"physiÿl"è
HERO_CLASSES
.
	`back
().
physiÿl
 = 
	`toIÁ
(šfe.
v®
);

472 ià(
šfe
.
key
 =ğ"m’l"è
HERO_CLASSES
.
	`back
().
m’l
 = 
	`toIÁ
(šfe.
v®
);

473 ià(
šfe
.
key
 =ğ"ofãn£"è
HERO_CLASSES
.
	`back
().
ofãn£
 = 
	`toIÁ
(šfe.
v®
);

474 ià(
šfe
.
key
 =ğ"deãn£"è
HERO_CLASSES
.
	`back
().
deãn£
 = 
	`toIÁ
(šfe.
v®
);

475 ià(
šfe
.
key
 == "actionbar") {

476 
i
=0; i<12; i++) {

477 
HERO_CLASSES
.
	`back
().
hÙkeys
[
i
] = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

480 ià(
šfe
.
key
 == "powers") {

481 
¡ršg
 
pow”
;

482  (
pow”
 = 
šfe
.
	`ÃxtV®ue
()) != "") {

483 
HERO_CLASSES
.
	`back
().
pow”s
.
	`push_back
(
	`toIÁ
(
pow”
));

486 ià(
šfe
.
key
 == "campaign") {

487 
¡ršg
 
¡©us
;

488  (
¡©us
 = 
šfe
.
	`ÃxtV®ue
()) != "") {

489 
HERO_CLASSES
.
	`back
().
¡©u£s
.
	`push_back
(
¡©us
);

494 
šfe
.
	`şo£
();

495 } 
	`årštf
(
¡d”r
, "Unableo openƒngine/classes.txt!\n");

498 ià(
HERO_CLASSES
.
	`em±y
()) {

499 
H”oCÏss
 
c
;

500 
c
.
Çme
 = 
msg
->
	`g‘
("Adventurer");

501 
HERO_CLASSES
.
	`push_back
(
c
);

503 
	}
}

505 
boŞ
 
	$lßdS‘tšgs
() {

508 
i
 = 0; i < 
cÚfig_size
; i++) {

510 
CÚfigEÁry
 * 
’Œy
 = 
cÚfig
 + 
i
;

511 
	`ŒyP¬£V®ue
(*
’Œy
->
ty³
,ƒÁry->
deçuÉ_v®
,ƒÁry->
¡Üage
);

515 
FeP¬£r
 
šfe
;

516 ià(!
šfe
.
	`İ’
(
PATH_CONF
 + 
FILE_SETTINGS
)) {

517 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/deçuÉ_£‰šgs.txt").
	`c_¡r
())) {

518 
	`§veS‘tšgs
();

519  
Œue
;

520 } 
	`§veS‘tšgs
();

523 
šfe
.
	`Ãxt
()) {

525 
CÚfigEÁry
 * 
’Œy
 = 
	`g‘CÚfigEÁry
(
šfe
.
key
);

526 ià(
’Œy
) {

528 
	`ŒyP¬£V®ue
(*
’Œy
->
ty³
, 
šfe
.
v®
,ƒÁry->
¡Üage
);

531 
šfe
.
	`şo£
();

533  
Œue
;

534 
	}
}

539 
boŞ
 
	$§veS‘tšgs
() {

541 
of¡»am
 
outfe
;

542 
outfe
.
	`İ’
((
PATH_CONF
 + 
FILE_SETTINGS
).
	`c_¡r
(), 
ios
::
out
);

544 ià(
outfe
.
	`is_İ’
()) {

546 
i
 = 0; i < 
cÚfig_size
; i++) {

549 ià(
i
 !ğ0 && 
cÚfig
[i].
comm’t
 !ğ
NULL
)

550 
outfe
<<"\n";

552 ià(
cÚfig
[
i
].
comm’t
 !ğ
NULL
) {

553 
outfe
<<"# "<<
cÚfig
[
i
].
comm’t
<<"\n";

555 
outfe
<<
cÚfig
[
i
].
Çme
<<"="<<
	`toSŒšg
(*cÚfig[i].
ty³
, cÚfig[i].
¡Üage
)<<"\n";

558 ià(
outfe
.
	`bad
()è
	`årštf
(
¡d”r
, "Unableo write settings file. No write‡ccess or disk is full!\n");

559 
outfe
.
	`şo£
();

560 
outfe
.
	`ş—r
();

562  
Œue
;

563 
	}
}

568 
boŞ
 
	$lßdDeçuÉs
() {

571 
i
 = 3; i < 
cÚfig_size
; i++) {

573 
CÚfigEÁry
 * 
’Œy
 = 
cÚfig
 + 
i
;

574 
	`ŒyP¬£V®ue
(*
’Œy
->
ty³
,ƒÁry->
deçuÉ_v®
,ƒÁry->
¡Üage
);

578 
VIEW_W_HALF
 = 
VIEW_W
 / 2;

579 
VIEW_H_HALF
 = 
VIEW_H
 / 2;

581  
Œue
;

582 
	}
}

	@Settings.h

25 #´agm¨
Úû


26 #iâdeà
SETTINGS_H


27 
	#SETTINGS_H


	)

29 
	~<¡ršg
>

30 
	~<veùÜ
>

32 
	sEËm’t
{

33 
	m¡d
::
¡ršg
 
Çme
;

34 
	m¡d
::
¡ršg
 
»si¡
;

35 }
	tEËm’t
;

37 
	sH”oCÏss
{

38 
	m¡d
::
¡ršg
 
Çme
;

39 
	m¡d
::
¡ršg
 
desütiÚ
;

40 
	mcu¼’cy
;

41 
	m¡d
::
¡ršg
 
equm’t
;

42 
	mphysiÿl
;

43 
	mm’l
;

44 
	mofãn£
;

45 
	mdeãn£
;

46 
	mhÙkeys
[12];

47 
	m¡d
::
veùÜ
<> 
pow”s
;

48 
	m¡d
::
veùÜ
<
¡d
::
¡ršg
> 
¡©u£s
;

50 
H”oCÏss
()

51 : 
Çme
("")

52 , 
desütiÚ
("")

53 , 
cu¼’cy
(0)

54 , 
equm’t
("")

55 , 
physiÿl
(0)

56 , 
m’l
(0)

57 , 
ofãn£
(0)

58 , 
deãn£
(0)

60 
	mi
=0; i<12; i++) {

61 
	mhÙkeys
[
i
] = 0;

63 
	mpow”s
.
ş—r
();

65 }
	tH”oCÏss
;

68 
¡d
::
¡ršg
 
PATH_CONF
;

69 
¡d
::
¡ršg
 
PATH_USER
;

70 
¡d
::
¡ršg
 
PATH_DATA
;

71 
¡d
::
¡ršg
 
USER_PATH_DATA
;

74 
¡d
::
¡ršg
 
FILE_SETTINGS
;

75 
¡d
::
¡ršg
 
FILE_KEYBINDINGS
;

78 
FRAME_W
;

79 
FRAME_H
;

81 
ICON_SIZE
;

84 
boŞ
 
AUDIO
;

85 
MUSIC_VOLUME
;

86 
SOUND_VOLUME
;

87 
boŞ
 
FULLSCREEN
;

88 
BITS_PER_PIXEL
;

89 
MAX_FRAMES_PER_SEC
;

90 
VIEW_W
;

91 
VIEW_H
;

92 
VIEW_W_HALF
;

93 
VIEW_H_HALF
;

94 
MIN_VIEW_W
;

95 
MIN_VIEW_H
;

96 
boŞ
 
DOUBLEBUF
;

97 
boŞ
 
HWSURFACE
;

98 
boŞ
 
CHANGE_GAMMA
;

99 
GAMMA
;

100 
boŞ
 
TEXTURE_QUALITY
;

101 
boŞ
 
ANIMATED_TILES
;

104 
boŞ
 
MOUSE_MOVE
;

105 
boŞ
 
ENABLE_JOYSTICK
;

106 
JOYSTICK_DEVICE
;

107 
boŞ
 
MOUSE_AIM
;

110 
boŞ
 
COMBAT_TEXT
;

113 
boŞ
 
MENUS_PAUSE
;

114 
boŞ
 
SAVE_HPMP
;

115 
boŞ
 
ENABLE_PLAYGAME
;

116 
boŞ
 
SHOW_FPS
;

117 
CORPSE_TIMEOUT
;

118 
boŞ
 
SELL_WITHOUT_VENDOR
;

119 
AIM_ASSIST
;

120 
¡d
::
¡ršg
 
WINDOW_TITLE
;

121 
¡d
::
¡ršg
 
GAME_PREFIX
;

122 
SOUND_FALLOFF
;

125 
UNITS_PER_TILE
;

126 
TILE_SHIFT
;

127 
UNITS_PER_PIXEL_X
;

128 
UNITS_PER_PIXEL_Y
;

129 
TILE_W
;

130 
TILE_H
;

131 
TILE_W_HALF
;

132 
TILE_H_HALF
;

133 
TILESET_ORIENTATION
;

134 
TILESET_ISOMETRIC
;

135 
TILESET_ORTHOGONAL
;

138 
¡d
::
¡ršg
 
LANGUAGE
;

141 
AUTOPICKUP_RANGE
;

142 
boŞ
 
AUTOPICKUP_CURRENCY
;

145 
MAX_ABSORB
;

146 
MAX_RESIST
;

147 
MAX_BLOCK
;

148 
MAX_AVOIDANCE
;

151 
¡d
::
veùÜ
<
EËm’t
> 
ELEMENTS
;

154 
¡d
::
veùÜ
<
H”oCÏss
> 
HERO_CLASSES
;

157 
¡d
::
¡ršg
 
CURRENCY
;

158 
VENDOR_RATIO
;

160 
£tP©hs
();

161 
lßdTe£tS‘tšgs
();

162 
lßdMiscS‘tšgs
();

163 
boŞ
 
lßdS‘tšgs
();

164 
boŞ
 
§veS‘tšgs
();

165 
boŞ
 
lßdDeçuÉs
();

	@SharedResources.cpp

28 
	~"Sh¬edResourûs.h
"

30 
Anim©iÚMªag”
 *
	gªim
;

31 
ImageMªag”
 *
	gimag
;

32 
SDL_Surçû
 *
	gsü“n
;

33 
ModMªag”
 *
	gmods
;

34 
Mes§geEngše
 *
	gmsg
;

35 
IÅutS‹
 *
	gš±
;

36 
FÚtEngše
 *
	gfÚt
;

37 
Comb©Text
 *
	gcomb
;

38 
SoundMªag”
 *
	g¢d
;

39 
SDL_Joy¡ick
 *
	gjoy
;

	@SharedResources.h

29 #´agm¨
Úû


30 #iâdeà
SHARED_RESOURCES_H


31 
	#SHARED_RESOURCES_H


	)

33 
	~<SDL.h
>

35 
	~"Anim©iÚMªag”.h
"

36 
	~"Comb©Text.h
"

37 
	~"FÚtEngše.h
"

38 
	~"ImageMªag”.h
"

39 
	~"IÅutS‹.h
"

40 
	~"Mes§geEngše.h
"

41 
	~"ModMªag”.h
"

42 
	~"SoundMªag”.h
"

44 
SDL_Surçû
 *
sü“n
;

45 
SDL_Joy¡ick
 *
joy
;

47 
Anim©iÚMªag”
 *
ªim
;

48 
Comb©Text
 *
comb
;

49 
FÚtEngše
 *
fÚt
;

50 
ImageMªag”
 *
imag
;

51 
IÅutS‹
 *
š±
;

52 
Mes§geEngše
 *
msg
;

53 
ModMªag”
 *
mods
;

54 
SoundMªag”
 *
¢d
;

	@SoundManager.cpp

28 
	~<m­
>

29 
	~<loÿË
>

30 
	~<¡ršg
>

31 
	~<SDL_mix”.h
>

32 
	~<m©h.h
>

33 
	~"S‘tšgs.h
"

34 
	~"SoundMªag”.h
"

35 
	~"Sh¬edResourûs.h
"

37 
usšg
 
Çme¥aû
 
	g¡d
;

39 şas 
	cSound
 {

40 
	mpublic
:

41 
Mix_Chunk
 *
chunk
;

42 
	$Sound
(è: 
	`chunk
(0), 
	$»fCÁ
(0) {}

43 
´iv©e
:

44 
ä›nd
 
şass
 
SoundMªag”
;

45 
»fCÁ
;

46 
	}
};

48 şas 
	cPÏyback
 {

49 
	mpublic
:

50 
SoundMªag”
::
SoundID
 
sid
;

51 
	m¡d
::
¡ršg
 
vœtu®_chªÃl
;

52 
Pošt
 
	mloÿtiÚ
;

53 
boŞ
 
	mloİ
;

54 
boŞ
 
	mfšished
;

57 
	gSoundMªag”
::
	$SoundMªag”
() {

58 
	`Mix_AÎoÿ‹ChªÃls
(50);

59 
	}
}

61 
	gSoundMªag”
::~
	$SoundMªag”
() {

62 
SoundMªag”
::
SoundM­I‹¿tÜ
 
™
;

63 (
™
 = 
sounds
.
	`begš
()è!ğsounds.
	`’d
())

64 
	`uÆßd
(
™
->
fœ¡
);

65 
	}
}

67 
Ušt8
 
	gSoundMªag”
::
	$ÿlc_di¡ªû
(cÚ¡ 
Pošt
 *
s
, cÚ¡ Pošˆ*
d
) {

68 
dx
 = 
s
->
x
 - 
d
->x;

69 
dy
 = 
s
->
y
 - 
d
->y;

70 
di¡
 = 
	`sq¹
(
dx
*dx + 
dy
*dy);

71 
di¡
 = 255.0à* (di¡ / (
SOUND_FALLOFF
*
UNITS_PER_TILE
));

72  
	`max
(0.0f, 
	`mš
(
di¡
, 255.0f));

73 
	}
}

75 
	gSoundMªag”
::
	$logic
(
Pošt
 
c
) {

77 
PÏybackM­I‹¿tÜ
 
™
 = 
¶ayback
.
	`begš
();

78 ià(
™
 =ğ
¶ayback
.
	`’d
())

81 
Ï¡Pos
 = 
c
;

83 
¡d
::
veùÜ
<> 
ş—nup
;

85 
™
 !ğ
¶ayback
.
	`’d
()) {

88 ià(
™
->
£cÚd
.
fšished
) {

89 
ş—nup
.
	`push_back
(
™
->
fœ¡
);

90 ++
™
;

95 ià(
™
->
£cÚd
.
loÿtiÚ
.
x
 =ğ0 && it->£cÚd.loÿtiÚ.
y
 == 0) {

96 ++
™
;

101 
Ušt8
 
di¡
 = 
	`ÿlc_di¡ªû
(&
c
, &
™
->
£cÚd
.
loÿtiÚ
);

102 ià(
™
->
£cÚd
.
loİ
) {

103 ià(
di¡
 < (
SOUND_FALLOFF
*
UNITS_PER_TILE
))

104 
	`Mix_Resume
(
™
->
fœ¡
);

106 
	`Mix_Pau£
(
™
->
fœ¡
);

110 
	`Mix_S‘Pos™iÚ
(
™
->
fœ¡
, 0, 
di¡
);

111 ++
™
;

115 !
ş—nup
.
	`em±y
()) {

117 
™
 = 
¶ayback
.
	`fšd
(
ş—nup
.
	`back
());

119 
	`uÆßd
(
™
->
£cÚd
.
sid
);

122 
Vœtu®ChªÃlM­I‹¿tÜ
 
vc™
 = 
chªÃls
.
	`fšd
(
™
->
£cÚd
.
vœtu®_chªÃl
);

123 ià(
vc™
 !ğ
chªÃls
.
	`’d
())

124 
chªÃls
.
	`”a£
(
vc™
);

126 
¶ayback
.
	`”a£
(
™
);

128 
ş—nup
.
	`pİ_back
();

130 
	}
}

132 
	gSoundMªag”
::
	$»£t
() {

134 
PÏybackM­I‹¿tÜ
 
™
 = 
¶ayback
.
	`begš
();

135 ià(
™
 =ğ
¶ayback
.
	`’d
())

138 
™
 !ğ
¶ayback
.
	`’d
()) {

140 ià(
™
->
£cÚd
.
loİ
)

141 
	`Mix_H®tChªÃl
(
™
->
fœ¡
);

143 ++
™
;

145 
	`logic
(
	`Pošt
(0,0));

146 
	}
}

148 
	gSoundMªag”
::
SoundID
 
SoundMªag”
::
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ std::¡ršg& 
”rÜmes§ge
) {

150 
Sound
 
l¢d
;

151 
SoundID
 
	gsid
 = 0;

152 
SoundM­I‹¿tÜ
 
	g™
;

153 
	g¡d
::
loÿË
 
loc
;

155 ià(!
	gAUDIO
 || !
	gSOUND_VOLUME
)

158 cÚ¡ 
	gcŞÏ‹
<>& 
	gcŞl
 = 
u£_çût
<
cŞÏ‹
<> >(
loc
);

159 cÚ¡ 
¡ršg
 
	g»®f’ame
 = 
mods
->
loÿ‹
(
f’ame
);

162 
	gsid
 = 
cŞl
.
hash
(
»®f’ame
.
d©a
(),„—lf’ame.d©a()+»®f’ame.
Ëngth
());

163 
	g™
 = 
sounds
.
fšd
(
sid
);

164 ià(
	g™
 !ğ
sounds
.
’d
()) {

165 
™
->
£cÚd
->
»fCÁ
++;

166  
	gsid
;

170 
	gl¢d
.
	gchunk
 = 
Mix_LßdWAV
(
»®f’ame
.
c_¡r
());

171 
	gl¢d
.
	g»fCÁ
 = 1;

172 ià(!
	gl¢d
.
	gchunk
) {

182 
Sound
 *
	gp¢d
 = 
Ãw
 Sound;

183 *
	gp¢d
 = 
l¢d
;

184 
	gsounds
.
š£¹
(
·œ
<
SoundID
,
Sound
 *>(
sid
, 
p¢d
));

186  
	gsid
;

189 
	gSoundMªag”
::
uÆßd
(
SoundMªag”
::
SoundID
 
sid
) {

191 
SoundM­I‹¿tÜ
 
™
;

192 
	g™
 = 
sounds
.
fšd
(
sid
);

193 ià(
	g™
 =ğ
sounds
.
’d
())

196 ià(--
	g™
->
	g£cÚd
->
	g»fCÁ
 == 0) {

197 
Mix_F»eChunk
(
™
->
£cÚd
->
chunk
);

198 
d–‘e
 
	g™
->
	g£cÚd
;

199 
	gsounds
.
”a£
(
™
);

205 
	gSoundMªag”
::
¶ay
(
SoundMªag”
::
SoundID
 
sid
, 
¡d
::
¡ršg
 
chªÃl
, 
Pošt
 
pos
, 
boŞ
 
loİ
) {

207 
SoundM­I‹¿tÜ
 
	g™
;

208 
Vœtu®ChªÃlM­I‹¿tÜ
 
	gvc™
 = 
chªÃls
.
’d
();

210 ià(!
	gsid
 || !
	gAUDIO
 || !
	gSOUND_VOLUME
)

213 
	g™
 = 
sounds
.
fšd
(
sid
);

214 ià(
	g™
 =ğ
sounds
.
’d
())

218 
PÏyback
 
	gp
;

219 
	gp
.
	gsid
 = 
sid
;

220 
	gp
.
	gloÿtiÚ
 = 
pos
;

221 
	gp
.
	gvœtu®_chªÃl
 = 
chªÃl
;

222 
	gp
.
	gloİ
 = 
loİ
;

223 
	gp
.
	gfšished
 = 
çl£
;

225 ià(
	gp
.
	gvœtu®_chªÃl
 !ğ
GLOBAL_VIRTUAL_CHANNEL
) {

228 
vc™
 = 
chªÃls
.
fšd
(
p
.
vœtu®_chªÃl
);

229 ià(
	gvc™
 !ğ
chªÃls
.
’d
())

230 
Mix_H®tChªÃl
(
vc™
->
£cÚd
);

232 
	gvc™
 = 
chªÃls
.
š£¹
(
·œ
<
¡d
::
¡ršg
, >(
p
.
vœtu®_chªÃl
, -1)).
	gfœ¡
;

236 
	g™
->
	g£cÚd
->
	g»fCÁ
++;

238 
Mix_ChªÃlFšished
(&
chªÃl_fšished
);

239 
	gc
 = 
Mix_PÏyChªÃl
(-1, 
™
->
£cÚd
->
chunk
, (
loİ
 ? -1 : 0));

241 ià(
	gc
 == -1)

242 
årštf
(
¡d”r
,"Failedo…lay sound,‚o more channels‡vailable.\n");

245 
Ušt8
 
	gd
 = 0;

246 ià(
	gp
.
	gloÿtiÚ
.
	gx
 !ğ0 || 
p
.
loÿtiÚ
.
y
 != 0)

247 
d
 = 
ÿlc_di¡ªû
(&
Ï¡Pos
, &
p
.
loÿtiÚ
);

248 
Mix_S‘Pos™iÚ
(
c
, 0, 
d
);

250 ià(
	gvc™
 !ğ
chªÃls
.
’d
())

251 
vc™
->
£cÚd
 = 
c
;

253 
	g¶ayback
.
š£¹
(
·œ
<, 
PÏyback
>(
c
, 
p
));

256 
	gSoundMªag”
::
	$Ú_chªÃl_fšished
(
chªÃl
)

258 
PÏybackM­I‹¿tÜ
 
p™
 = 
¶ayback
.
	`fšd
(
chªÃl
);

259 ià(
p™
 =ğ
¶ayback
.
	`’d
())

262 
p™
->
£cÚd
.
fšished
 = 
Œue
;

264 
	`Mix_S‘Pos™iÚ
(
chªÃl
, 0, 0);

265 
	}
}

267 
	gSoundMªag”
::
	$chªÃl_fšished
(
chªÃl
)

269 
¢d
->
	`Ú_chªÃl_fšished
(
chªÃl
);

270 
	}
}

	@SoundManager.h

23 #´agm¨
Úû


24 #iâdeà
SOUND_MANAGER_H


25 
	#SOUND_MANAGER_H


	)

28 
	~<SDL.h
>

29 
	~<SDL_image.h
>

30 
	~<SDL_mix”.h
>

31 
	~"Uts.h
"

33 
	~<m­
>

34 
	~<¡ršg
>

35 
	~<¡dšt.h
>

36 
	~<veùÜ
>

38 cÚ¡ 
	g¡d
::
¡ršg
 
GLOBAL_VIRTUAL_CHANNEL
 = "__global__";

40 şas 
	cSoundMªag”
 {

41 
	mpublic
:

42 
	tSoundID
;

44 
SoundMªag”
();

45 ~
SoundMªag”
();

47 
	mSoundMªag”
::
SoundID
 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
, cÚ¡ std::¡ršg& 
”rÜmes§ge
);

48 
uÆßd
(
SoundMªag”
::
SoundID
);

49 
¶ay
(
SoundMªag”
::
SoundID
, 
¡d
::
¡ršg
 
chªÃl
 = 
GLOBAL_VIRTUAL_CHANNEL
, 
Pošt
 
pos
 = Pošt(0,0), 
boŞ
 
loİ
 = 
çl£
);

51 
logic
(
Pošt
 
ûÁ”
);

52 
»£t
();

54 
	m´iv©e
:

55 
¡d
::
	tm­
<
	t¡d
::
	t¡ršg
, > 
	tVœtu®ChªÃlM­
;

56 
	mVœtu®ChªÃlM­
::
	t™”©Ü
 
	tVœtu®ChªÃlM­I‹¿tÜ
;

58 
	m¡d
::
	tm­
<
	tSoundID
, 
	tşass
 
	tSound
 *> 
	tSoundM­
;

59 
	mSoundM­
::
	t™”©Ü
 
	tSoundM­I‹¿tÜ
;

61 
	m¡d
::
	tm­
<, 
	tşass
 
	tPÏyback
> 
	tPÏybackM­
;

62 
	mPÏybackM­
::
	t™”©Ü
 
	tPÏybackM­I‹¿tÜ
;

64 
chªÃl_fšished
(
chªÃl
);

65 
Ú_chªÃl_fšished
(
chªÃl
);

66 
Ušt8
 
ÿlc_di¡ªû
(cÚ¡ 
Pošt
 *
s
, cÚ¡ Pošˆ*
d
);

68 
SoundM­
 
	msounds
;

69 
Vœtu®ChªÃlM­
 
	mchªÃls
;

70 
PÏybackM­
 
	m¶ayback
;

71 
Pošt
 
	mÏ¡Pos
;

	@StatBlock.cpp

27 
	~"StBlock.h
"

28 
	~"FeP¬£r.h
"

29 
	~"Pow”Mªag”.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"S‘tšgs.h
"

32 
	~"UtsP¬sšg.h
"

33 
	~"M­CŞlisiÚ.h
"

34 
	~"M’uPow”s.h
"

35 
	~<lim™s
>

37 
usšg
 
Çme¥aû
 
	g¡d
;

39 
	gStBlock
::
	$StBlock
()

40 : 
	`¡©sLßded
(
çl£
)

41 , 
	`®ive
(
Œue
)

42 , 
	`cÜp£
(
çl£
)

43 , 
	`cÜp£_ticks
(0)

44 , 
	`h”o
(
çl£
)

45 , 
	`humªoid
(
çl£
)

46 , 
	`³rmad—th
(
çl£
)

47 , 
	`ŒªsfÜmed
(
çl£
)

48 , 
	`»äesh_¡©s
(
çl£
)

49 , 
	`movem’t_ty³
(
MOVEMENT_NORMAL
)

50 , 
	`æyšg
(
çl£
)

51 , 
	`šngibË
(
çl£
)

52 , 
	`çcšg
(
Œue
)

53 , 
	`Çme
("")

54 , 
	`sfx_´efix
("")

55 , 
	`Ëv–
(0)

56 , 
	`xp
(0)

58 , 
	`Ëv–_up
(
çl£
)

59 , 
	`check_t™Ë
(
çl£
)

60 , 
	`¡©_pošts_³r_Ëv–
(1)

61 , 
	`pow”_pošts_³r_Ëv–
(1)

62 , 
	`ofãn£_ch¬aù”
(0)

63 , 
	`deãn£_ch¬aù”
(0)

64 , 
	`physiÿl_ch¬aù”
(0)

65 , 
	`m’l_ch¬aù”
(0)

66 , 
	`ofãn£_add™iÚ®
(0)

67 , 
	`deãn£_add™iÚ®
(0)

68 , 
	`physiÿl_add™iÚ®
(0)

69 , 
	`m’l_add™iÚ®
(0)

70 , 
	`bÚus_³r_physiÿl
(0)

71 , 
	`bÚus_³r_m’l
(0)

72 , 
	`bÚus_³r_ofãn£
(0)

73 , 
	`bÚus_³r_deãn£
(0)

74 , 
	`ch¬aù”_şass
("")

75 , 
	`hp
(0)

76 , 
	`maxhp
(0)

77 , 
	`hp_³r_mšu‹
(0)

78 , 
	`hp_tick”
(0)

79 , 
	`mp
(0)

80 , 
	`maxmp
(0)

81 , 
	`mp_³r_mšu‹
(0)

82 , 
	`mp_tick”
(0)

83 , 
	`accu¿cy
(75)

84 , 
	`avoidªû
(0)

85 , 
	`ü™
(0)

86 , 
	`dmg_m–“_mš_deçuÉ
(1)

87 , 
	`dmg_m–“_max_deçuÉ
(4)

88 , 
	`dmg_m’t_mš_deçuÉ
(1)

89 , 
	`dmg_m’t_max_deçuÉ
(4)

90 , 
	`dmg_¿nged_mš_deçuÉ
(1)

91 , 
	`dmg_¿nged_max_deçuÉ
(4)

92 , 
	`absÜb_mš_deçuÉ
(0)

93 , 
	`absÜb_max_deçuÉ
(0)

94 , 
	`¥“d_deçuÉ
(14)

95 , 
	`d¥“d_deçuÉ
(10)

96 , 
	`dmg_m–“_mš
(1)

97 , 
	`dmg_m–“_max
(4)

98 , 
	`dmg_m’t_mš
(1)

99 , 
	`dmg_m’t_max
(4)

100 , 
	`dmg_¿nged_mš
(1)

101 , 
	`dmg_¿nged_max
(4)

102 , 
	`absÜb_mš
(0)

103 , 
	`absÜb_max
(0)

104 , 
	`¥“d
(14)

105 , 
	`d¥“d
(10)

106 , 
	`w›ldšg_physiÿl
(
çl£
)

107 , 
	`w›ldšg_m’l
(
çl£
)

108 , 
	`w›ldšg_ofãn£
(
çl£
)

109 , 
	`ŒªsfÜm_du¿tiÚ
(0)

110 , 
	`ŒªsfÜm_du¿tiÚ_tÙ®
(0)

111 , 
	`mªu®_uÁ¿nsfÜm
(
çl£
)

112 , 
	`ŒªsfÜm_w™h_equm’t
(
çl£
)

113 , 
	`efãùs
()

114 , 
	`pos
()

115 , 
	`fÜûd_¥“d
()

116 , 
	`dœeùiÚ
(0)

117 , 
	`h”o_coŞdown
(
POWER_COUNT
, 0)

118 , 
	`poi£
(0)

119 , 
	`poi£_ba£
(0)

120 , 
	`coŞdown_h™
(0)

121 , 
	`coŞdown_h™_ticks
(0)

122 , 
	`cur_¡©e
(0)

123 , 
	`waypošts
()

124 , 
	`waypošt_·u£
(0)

125 , 
	`waypošt_·u£_ticks
(0)

126 , 
	`wªd”
(
çl£
)

127 , 
	`wªd”_¬—
()

128 , 
	`wªd”_ticks
(0)

129 , 
	`wªd”_·u£_ticks
(0)

130 , 
	`chªû_pursue
(0)

131 , 
	`chªû_æ“
(0)

132 , 
	`pow”s_li¡
()

133 , 
	`pow”s_li¡_™ems
()

134 , 
	`pow”s_·ssive
()

135 , 
	`pow”_chªû
(
POWERSLOT_COUNT
, 0)

136 , 
	`pow”_šdex
(
POWERSLOT_COUNT
, 0)

137 , 
	`pow”_coŞdown
(
POWERSLOT_COUNT
, 0)

138 , 
	`pow”_ticks
(
POWERSLOT_COUNT
, 0)

139 , 
	`m–“_¿nge
(64)

140 , 
	`th»©_¿nge
(0)

141 , 
	`h”o_pos
(-1, -1)

142 , 
	`h”o_®ive
(
Œue
)

143 , 
	`h”o_¡—Éh
(0)

144 , 
	`Ï¡_£’
(-1, -1)

145 , 
	`tuº_d–ay
(0)

146 , 
	`tuº_ticks
(0)

147 , 
	`š_comb©
(
çl£
)

148 , 
	`još_comb©
(
çl£
)

149 , 
	`coŞdown_ticks
(0)

150 , 
	`coŞdown
(0)

151 , 
	`aùiv©ed_pow”¦Ù
(0)

152 , 
	`Ú_h®f_d—d_ÿ¡ed
(
çl£
)

153 , 
	`suµ»ss_hp
(
çl£
)

154 , 
	`‹ËpÜtiÚ
(
çl£
)

155 , 
	`‹ËpÜt_de¡š©iÚ
()

156 , 
	`m–“_w—pÚ_pow”
(0)

157 , 
	`m’l_w—pÚ_pow”
(0)

158 , 
	`¿nged_w—pÚ_pow”
(0)

159 , 
	`cu¼’cy
(0)

160 , 
	`d—th_³ÇÉy
(
çl£
)

161 , 
	`deã©_¡©us
("")

162 , 
	`que¡_loÙ_»quœes
("")

163 , 
	`que¡_loÙ_nÙ
("")

164 , 
	`que¡_loÙ_id
(0)

165 , 
	`fœ¡_deã©_loÙ
(0)

166 , 
	`ba£
("male")

167 , 
	`h—d
("head_short")

168 , 
	`pÜŒa™
("male01")

169 , 
	`ŒªsfÜm_ty³
("")

170 , 
	`ªim©iÚs
("")

171 , 
	`sfx_¡•
("cloth")

173 
max_¥’dabË_¡©_pošts
 = 0;

174 
max_pošts_³r_¡©
 = 0;

178 
i
=0; i<
MAX_CHARACTER_LEVEL
; i++) {

179 
xp_bË
[
i
] = 
¡d
::
num”ic_lim™s
<>::
	`max
();

182 
vuÊ”abË
 = 
¡d
::
veùÜ
<>(
ELEMENTS
.
	`size
(), 100);

183 
vuÊ”abË_ba£
 = 
¡d
::
veùÜ
<>(
ELEMENTS
.
	`size
(), 100);

186 
hp_ba£
 = 10;

187 
hp_³r_Ëv–
 = 2;

188 
hp_³r_physiÿl
 = 8;

189 
hp_»g’_ba£
 = 10;

190 
hp_»g’_³r_Ëv–
 = 1;

191 
hp_»g’_³r_physiÿl
 = 4;

192 
mp_ba£
 = 10;

193 
mp_³r_Ëv–
 = 2;

194 
mp_³r_m’l
 = 8;

195 
mp_»g’_ba£
 = 10;

196 
mp_»g’_³r_Ëv–
 = 1;

197 
mp_»g’_³r_m’l
 = 4;

198 
accu¿cy_ba£
 = 75;

199 
accu¿cy_³r_Ëv–
 = 1;

200 
accu¿cy_³r_ofãn£
 = 5;

201 
avoidªû_ba£
 = 25;

202 
avoidªû_³r_Ëv–
 = 1;

203 
avoidªû_³r_deãn£
 = 5;

204 
ü™_ba£
 = 5;

205 
ü™_³r_Ëv–
 = 1;

207 
aùiv©ed_pow”¦Ù
 = 0;

208 
Ú_h®f_d—d_ÿ¡ed
 = 
çl£
;

209 
	}
}

211 
boŞ
 
	$sÜtLoÙ
(cÚ¡ 
EÃmyLoÙ
 &
a
, cÚ¡ EÃmyLoÙ &
b
) {

212  
a
.
chªû
 < 
b
.chance;

213 
	}
}

218 
	gStBlock
::
	$lßd
(cÚ¡ 
¡ršg
& 
f’ame
) {

219 
FeP¬£r
 
šfe
;

220 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
(
f’ame
))) {

221 
	`årštf
(
¡d”r
, "UÇbËØİ’ %s!\n", 
f’ame
.
	`c_¡r
());

225 
num
 = 0;

226 
¡ršg
 
loÙ_tok’
;

228 
šfe
.
	`Ãxt
()) {

229 ià(
	`isIÁ
(
šfe
.
v®
)è
num
 = 
	`toIÁ
(infile.val);

230 
boŞ
 
v®id
 = 
çl£
;

232 
i
=0; i<
ELEMENTS
.
	`size
(); i++) {

233 ià(
šfe
.
key
 =ğ"vuÊ”abË_" + 
ELEMENTS
[
i
].
Çme
) {

234 
vuÊ”abË
[
i
] = 
vuÊ”abË_ba£
[i] = 
num
;

235 
v®id
 = 
Œue
;

239 ià(
šfe
.
key
 =ğ"Çme"è
Çme
 = 
msg
->
	`g‘
(šfe.
v®
);

240 ià(
šfe
.
key
 == "humanoid") {

241 ià(
šfe
.
v®
 =ğ"Œue"è
humªoid
 = 
Œue
;

243 ià(
šfe
.
key
 =ğ"sfx_´efix"è
sfx_´efix
 = infe.
v®
;

245 ià(
šfe
.
key
 =ğ"Ëv–"è
Ëv–
 = 
num
;

248 ià(
šfe
.
key
 =ğ"xp"è
xp
 = 
num
;

249 ià(
šfe
.
key
 == "loot") {

256 
EÃmyLoÙ
 
–
;

257 
¡d
::
¡ršg
 
loÙ_id
 = 
šfe
.
	`ÃxtV®ue
();

260 ià(
loÙ_id
 == "currency")

261 
–
.
id
 = 0;

263 
–
.
id
 = 
	`toIÁ
(
loÙ_id
);

264 
–
.
chªû
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

267 
loÙ_tok’
 = 
šfe
.
	`ÃxtV®ue
();

268 ià(
loÙ_tok’
 != "") {

269 
–
.
couÁ_mš
 = 
	`toIÁ
(
loÙ_tok’
);

270 
–
.
couÁ_max
 =ƒl.
couÁ_mš
;

272 
loÙ_tok’
 = 
šfe
.
	`ÃxtV®ue
();

273 ià(
loÙ_tok’
 != "") {

274 
–
.
couÁ_max
 = 
	`toIÁ
(
loÙ_tok’
);

277 
loÙ
.
	`push_back
(
–
);

279 ià(
šfe
.
key
 =ğ"deã©_¡©us"è
deã©_¡©us
 = infe.
v®
;

280 ià(
šfe
.
key
 =ğ"fœ¡_deã©_loÙ"è
fœ¡_deã©_loÙ
 = 
num
;

281 ià(
šfe
.
key
 == "quest_loot") {

282 
que¡_loÙ_»quœes
 = 
šfe
.
	`ÃxtV®ue
();

283 
que¡_loÙ_nÙ
 = 
šfe
.
	`ÃxtV®ue
();

284 
que¡_loÙ_id
 = 
	`toIÁ
(
šfe
.
	`ÃxtV®ue
());

287 ià(
šfe
.
key
 =ğ"hp"è
hp
 = 
hp_ba£
 = 
maxhp
 = 
num
;

288 ià(
šfe
.
key
 =ğ"mp"è
mp
 = 
mp_ba£
 = 
maxmp
 = 
num
;

289 ià(
šfe
.
key
 =ğ"coŞdown"è
coŞdown
 = 
	`·r£_du¿tiÚ
(šfe.
v®
);

290 ià(
šfe
.
key
 =ğ"accu¿cy"è
accu¿cy
 = 
accu¿cy_ba£
 = 
num
;

291 ià(
šfe
.
key
 =ğ"avoidªû"è
avoidªû
 = 
avoidªû_ba£
 = 
num
;

292 ià(
šfe
.
key
 =ğ"dmg_m–“_mš"è
dmg_m–“_mš
 = 
num
;

293 ià(
šfe
.
key
 =ğ"dmg_m–“_max"è
dmg_m–“_max
 = 
num
;

294 ià(
šfe
.
key
 =ğ"dmg_m’t_mš"è
dmg_m’t_mš
 = 
num
;

295 ià(
šfe
.
key
 =ğ"dmg_m’t_max"è
dmg_m’t_max
 = 
num
;

296 ià(
šfe
.
key
 =ğ"dmg_¿nged_mš"è
dmg_¿nged_mš
 = 
num
;

297 ià(
šfe
.
key
 =ğ"dmg_¿nged_max"è
dmg_¿nged_max
 = 
num
;

298 ià(
šfe
.
key
 =ğ"absÜb_mš"è
absÜb_mš
 = 
num
;

299 ià(
šfe
.
key
 =ğ"absÜb_max"è
absÜb_max
 = 
num
;

300 ià(
šfe
.
key
 =ğ"poi£"è
poi£
 = 
poi£_ba£
 = 
num
;

303 ià(
šfe
.
key
 == "flying") {

304 ià(
num
 =ğ1è
æyšg
 = 
Œue
;

306 ià(
šfe
.
key
 == "intangible") {

307 ià(
num
 =ğ1è
šngibË
 = 
Œue
;

309 ià(
šfe
.
key
 == "facing") {

310 ià(
num
 =ğ0è
çcšg
 = 
çl£
;

313 ià(
šfe
.
key
 =ğ"waypošt_·u£"è
waypošt_·u£
 = 
num
;

315 ià(
šfe
.
key
 =ğ"¥“d"è
¥“d
 = 
¥“d_deçuÉ
 = 
num
;

316 ià(
šfe
.
key
 =ğ"d¥“d"è
d¥“d
 = 
d¥“d_deçuÉ
 = 
num
;

317 ià(
šfe
.
key
 =ğ"tuº_d–ay"è
tuº_d–ay
 = 
num
;

318 ià(
šfe
.
key
 =ğ"chªû_pursue"è
chªû_pursue
 = 
num
;

319 ià(
šfe
.
key
 =ğ"chªû_æ“"è
chªû_æ“
 = 
num
;

321 ià(
šfe
.
key
 =ğ"chªû_m–“_phys"è
pow”_chªû
[
MELEE_PHYS
] = 
num
;

322 ià(
šfe
.
key
 =ğ"chªû_m–“_m’t"è
pow”_chªû
[
MELEE_MENT
] = 
num
;

323 ià(
šfe
.
key
 =ğ"chªû_¿nged_phys"è
pow”_chªû
[
RANGED_PHYS
] = 
num
;

324 ià(
šfe
.
key
 =ğ"chªû_¿nged_m’t"è
pow”_chªû
[
RANGED_MENT
] = 
num
;

325 ià(
šfe
.
key
 =ğ"pow”_m–“_phys"è
pow”_šdex
[
MELEE_PHYS
] = 
num
;

326 ià(
šfe
.
key
 =ğ"pow”_m–“_m’t"è
pow”_šdex
[
MELEE_MENT
] = 
num
;

327 ià(
šfe
.
key
 =ğ"pow”_¿nged_phys"è
pow”_šdex
[
RANGED_PHYS
] = 
num
;

328 ià(
šfe
.
key
 =ğ"pow”_¿nged_m’t"è
pow”_šdex
[
RANGED_MENT
] = 
num
;

329 ià(
šfe
.
key
 =ğ"pow”_b—cÚ"è
pow”_šdex
[
BEACON
] = 
num
;

330 ià(
šfe
.
key
 =ğ"coŞdown_m–“_phys"è
pow”_coŞdown
[
MELEE_PHYS
] = 
	`·r£_du¿tiÚ
(šfe.
v®
);

331 ià(
šfe
.
key
 =ğ"coŞdown_m–“_m’t"è
pow”_coŞdown
[
MELEE_MENT
] = 
	`·r£_du¿tiÚ
(šfe.
v®
);

332 ià(
šfe
.
key
 =ğ"coŞdown_¿nged_phys"è
pow”_coŞdown
[
RANGED_PHYS
] = 
	`·r£_du¿tiÚ
(šfe.
v®
);

333 ià(
šfe
.
key
 =ğ"coŞdown_¿nged_m’t"è
pow”_coŞdown
[
RANGED_MENT
] = 
	`·r£_du¿tiÚ
(šfe.
v®
);

334 ià(
šfe
.
key
 =ğ"pow”_Ú_h™"è
pow”_šdex
[
ON_HIT
] = 
num
;

335 ià(
šfe
.
key
 =ğ"pow”_Ú_d—th"è
pow”_šdex
[
ON_DEATH
] = 
num
;

336 ià(
šfe
.
key
 =ğ"pow”_Ú_h®f_d—d"è
pow”_šdex
[
ON_HALF_DEAD
] = 
num
;

337 ià(
šfe
.
key
 =ğ"pow”_Ú_debuff"è
pow”_šdex
[
ON_DEBUFF
] = 
num
;

338 ià(
šfe
.
key
 =ğ"pow”_Ú_još_comb©"è
pow”_šdex
[
ON_JOIN_COMBAT
] = 
num
;

339 ià(
šfe
.
key
 =ğ"chªû_Ú_h™"è
pow”_chªû
[
ON_HIT
] = 
num
;

340 ià(
šfe
.
key
 =ğ"chªû_Ú_d—th"è
pow”_chªû
[
ON_DEATH
] = 
num
;

341 ià(
šfe
.
key
 =ğ"chªû_Ú_h®f_d—d"è
pow”_chªû
[
ON_HALF_DEAD
] = 
num
;

342 ià(
šfe
.
key
 =ğ"chªû_Ú_debuff"è
pow”_chªû
[
ON_DEBUFF
] = 
num
;

343 ià(
šfe
.
key
 =ğ"chªû_Ú_još_comb©"è
pow”_chªû
[
ON_JOIN_COMBAT
] = 
num
;

344 ià(
šfe
.
key
 =ğ"coŞdown_h™"è
coŞdown_h™
 = 
num
;

346 ià(
šfe
.
key
 == "passive_powers") {

347 
¡d
::
¡ršg
 
p
 = 
šfe
.
	`ÃxtV®ue
();

348 
p
 != "") {

349 
pow”s_·ssive
.
	`push_back
(
	`toIÁ
(
p
));

350 
p
 = 
šfe
.
	`ÃxtV®ue
();

354 ià(
šfe
.
key
 =ğ"m–“_¿nge"è
m–“_¿nge
 = 
num
;

355 ià(
šfe
.
key
 =ğ"th»©_¿nge"è
th»©_¿nge
 = 
num
;

358 ià(
šfe
.
key
 =ğ"m–“_w—pÚ_pow”"è
m–“_w—pÚ_pow”
 = 
num
;

359 ià(
šfe
.
key
 =ğ"m’l_w—pÚ_pow”"è
m’l_w—pÚ_pow”
 = 
num
;

360 ià(
šfe
.
key
 =ğ"¿nged_w—pÚ_pow”"è
¿nged_w—pÚ_pow”
 = 
num
;

362 ià(
šfe
.
key
 =ğ"ªim©iÚs"è
ªim©iÚs
 = infe.
v®
;

365 ià(
šfe
.
key
 == "suppress_hp") {

366 ià(
num
 == 1)

367 
suµ»ss_hp
 = 
Œue
;

369 
suµ»ss_hp
 = 
çl£
;

374 ià(
šfe
.
key
 =ğ"ÿ‹gÜ›s"è
v®id
 = 
Œue
;

375 ià(
šfe
.
key
 =ğ"¿r™y"è
v®id
 = 
Œue
;

377 ià(!
v®id
) {

378 
	`årštf
(
¡d”r
, "%s=% nÙ‡ v®id StBlock…¬am‘”\n", 
šfe
.
key
.
	`c_¡r
(), infe.
v®
.c_str());

381 
šfe
.
	`şo£
();

384 
¡d
::
	`sÜt
(
loÙ
.
	`begš
(),†oÙ.
	`’d
(), 
sÜtLoÙ
);

385 
	}
}

390 
	gStBlock
::
	$keDamage
(
dmg
) {

391 
hp
 -ğ
efãùs
.
	`damageSh›lds
(
dmg
);

392 ià(
hp
 <= 0) {

393 
hp
 = 0;

395 
	}
}

402 
	gStBlock
::
	$»ÿlc
() {

404 ià(!
¡©sLßded
è
	`lßdH”oSts
();

406 
»äesh_¡©s
 = 
Œue
;

408 
Ëv–
 = 0;

409 
i
=0; i<
MAX_CHARACTER_LEVEL
; i++) {

410 ià(
xp
 >ğ
xp_bË
[
i
]) {

411 
Ëv–
=
i
+1;

412 
check_t™Ë
 = 
Œue
;

416 
	`»ÿlc_®t
();

418 
hp
 = 
maxhp
;

419 
mp
 = 
maxmp
;

420 
	}
}

426 
	gStBlock
::
	$ÿlcBa£DmgAndAbs
() {

429 
phys0
 = 
	`g‘_physiÿl
() -1;

430 
m’t0
 = 
	`g‘_m’l
() -1;

431 
off0
 = 
	`g‘_ofãn£
() -1;

432 
def0
 = 
	`g‘_deãn£
() -1;

434 
dmg_m–“_mš
 = 
dmg_m–“_max
 = 
bÚus_³r_physiÿl
 * 
phys0
;

435 
dmg_m’t_mš
 = 
dmg_m’t_max
 = 
bÚus_³r_m’l
 * 
m’t0
;

436 
dmg_¿nged_mš
 = 
dmg_¿nged_max
 = 
bÚus_³r_ofãn£
 * 
off0
;

437 
absÜb_mš
 = 
absÜb_max
 = 
bÚus_³r_deãn£
 * 
def0
;

439 
	}
}

444 
	gStBlock
::
	$»ÿlc_®t
() {

446 
Ëv0
 = 
Ëv–
 -1;

448 ià(
h”o
) {

450 
ofãn£_add™iÚ®
 = 
efãùs
.
bÚus_ofãn£
;

451 
deãn£_add™iÚ®
 = 
efãùs
.
bÚus_deãn£
;

452 
physiÿl_add™iÚ®
 = 
efãùs
.
bÚus_physiÿl
;

453 
m’l_add™iÚ®
 = 
efãùs
.
bÚus_m’l
;

454 
phys0
 = 
	`g‘_physiÿl
() -1;

455 
m’t0
 = 
	`g‘_m’l
() -1;

456 
off0
 = 
	`g‘_ofãn£
() -1;

457 
def0
 = 
	`g‘_deãn£
() -1;

460 
maxhp
 = 
hp_ba£
 + (
hp_³r_Ëv–
 * 
Ëv0
è+ (
hp_³r_physiÿl
 * 
phys0
è+ 
efãùs
.
bÚus_hp
 + (efãùs.
bÚus_hp_³rûÁ
 * (hp_base + (hp_per_level *†ev0) + (hp_per_physical *…hys0)) / 100);

461 
maxmp
 = 
mp_ba£
 + (
mp_³r_Ëv–
 * 
Ëv0
è+ (
mp_³r_m’l
 * 
m’t0
è+ 
efãùs
.
bÚus_mp
 + (efãùs.
bÚus_mp_³rûÁ
 * (mp_ba£ + (mp_³r_Ëv– *†ev0è+ (mp_³r_m’È* 
phys0
)) / 100);

462 
hp_³r_mšu‹
 = 
hp_»g’_ba£
 + (
hp_»g’_³r_Ëv–
 * 
Ëv0
è+ (
hp_»g’_³r_physiÿl
 * 
phys0
è+ 
efãùs
.
bÚus_hp_»g’
;

463 
mp_³r_mšu‹
 = 
mp_»g’_ba£
 + (
mp_»g’_³r_Ëv–
 * 
Ëv0
è+ (
mp_»g’_³r_m’l
 * 
m’t0
è+ 
efãùs
.
bÚus_mp_»g’
;

464 
accu¿cy
 = 
accu¿cy_ba£
 + (
accu¿cy_³r_Ëv–
 * 
Ëv0
è+ (
accu¿cy_³r_ofãn£
 * 
off0
è+ 
efãùs
.
bÚus_accu¿cy
;

465 
avoidªû
 = 
avoidªû_ba£
 + (
avoidªû_³r_Ëv–
 * 
Ëv0
è+ (
avoidªû_³r_deãn£
 * 
def0
è+ 
efãùs
.
bÚus_avoidªû
;

466 
ü™
 = 
ü™_ba£
 + (
ü™_³r_Ëv–
 * 
Ëv0
è+ 
efãùs
.
bÚus_ü™
;

469 
maxhp
 = 
hp_ba£
 + 
efãùs
.
bÚus_hp
;

470 
maxmp
 = 
mp_ba£
 + 
efãùs
.
bÚus_mp
;

471 
accu¿cy
 = 
accu¿cy_ba£
 + 
efãùs
.
bÚus_accu¿cy
;

472 
avoidªû
 = 
avoidªû_ba£
 + 
efãùs
.
bÚus_avoidªû
;

475 
¥“d
 = 
¥“d_deçuÉ
;

476 
d¥“d
 = 
d¥“d_deçuÉ
;

478 
poi£
 = 
poi£_ba£
 + 
efãùs
.
bÚus_poi£
;

480 
i
=0; i<
efãùs
.
bÚus_»si¡
.
	`size
(); i++) {

481 
vuÊ”abË
[
i
] = 
vuÊ”abË_ba£
[i] - 
efãùs
.
bÚus_»si¡
[i];

484 ià(
hp
 > 
maxhp
) hp = maxhp;

485 ià(
mp
 > 
maxmp
) mp = maxmp;

486 
	}
}

491 
	gStBlock
::
	$logic
() {

492 ià(
hp
 <ğ0 && !
efãùs
.
Œigg”ed_d—th
 && !efãùs.
»vive
è
®ive
 = 
çl£
;

493 
®ive
 = 
Œue
;

496 
efãùs
.
	`logic
();

499 
	`»ÿlc_®t
();

502 ià(
coŞdown_ticks
 > 0) cooldown_ticks--;

504 
i
=0; i<
POWERSLOT_COUNT
; i++) {

505 ià(
pow”_ticks
[
i
] > 0)…ower_ticks[i]--;

509 ià(
hp_³r_mšu‹
 > 0 && 
hp
 < 
maxhp
 && hp > 0) {

510 
hp_tick”
++;

511 ià(
hp_tick”
 >ğ(60 * 
MAX_FRAMES_PER_SEC
)/
hp_³r_mšu‹
) {

512 
hp
++;

513 
hp_tick”
 = 0;

518 ià(
mp_³r_mšu‹
 > 0 && 
mp
 < 
maxmp
 && 
hp
 > 0) {

519 
mp_tick”
++;

520 ià(
mp_tick”
 >ğ(60 * 
MAX_FRAMES_PER_SEC
)/
mp_³r_mšu‹
) {

521 
mp
++;

522 
mp_tick”
 = 0;

527 ià(
ŒªsfÜm_du¿tiÚ
 > 0)

528 
ŒªsfÜm_du¿tiÚ
--;

531 ià(
efãùs
.
damage
 > 0) {

532 
	`keDamage
(
efãùs
.
damage
);

535 if(
coŞdown_h™_ticks
 > 0)

536 
coŞdown_h™_ticks
--;

539 ià(
efãùs
.
hpÙ
 > 0) {

540 
comb
->
	`addMes§ge
(
msg
->
	`g‘
("+%d HP",
efãùs
.
hpÙ
), 
pos
, 
COMBAT_MESSAGE_BUFF
);

541 
hp
 +ğ
efãùs
.
hpÙ
;

542 ià(
hp
 > 
maxhp
) hp = maxhp;

544 ià(
efãùs
.
mpÙ
 > 0) {

545 
comb
->
	`addMes§ge
(
msg
->
	`g‘
("+%d MP",
efãùs
.
mpÙ
), 
pos
, 
COMBAT_MESSAGE_BUFF
);

546 
mp
 +ğ
efãùs
.
mpÙ
;

547 ià(
mp
 > 
maxmp
) mp = maxmp;

552 ià(
šngibË
è
movem’t_ty³
 = 
MOVEMENT_INTANGIBLE
;

553 ià(
æyšg
è
movem’t_ty³
 = 
MOVEMENT_FLYING
;

554 
movem’t_ty³
 = 
MOVEMENT_NORMAL
;

555 
	}
}

557 
	gStBlock
::~
	$StBlock
() {

558 
	}
}

560 
boŞ
 
StBlock
::
	$ÿnU£Pow”
(cÚ¡ 
Pow”
 &
pow”
, 
pow”id
) const {

561 
M’uPow”s
 *
m’u_pow”s
 = M’uPow”s::
	`g‘In¡ªû
();

564 ià(
ŒªsfÜmed
è 
mp
 >ğ
pow”
.
»quœes_mp
;

567 ià(
pow”
.
¥awn_ty³
 =ğ"uÁ¿nsfÜm" && !
ŒªsfÜmed
è 
çl£
;

569  (!
pow”
.
»quœes_m’l_w—pÚ
 || 
w›ldšg_m’l
)

570 && (!
pow”
.
»quœes_ofãn£_w—pÚ
 || 
w›ldšg_ofãn£
)

571 && (!
pow”
.
»quœes_physiÿl_w—pÚ
 || 
w›ldšg_physiÿl
)

572 && 
mp
 >ğ
pow”
.
»quœes_mp


573 && (!
pow”
.
§üifiû
 =ğ
çl£
 || 
hp
 >…ow”.
»quœes_hp
)

574 && 
m’u_pow”s
->
	`m“tsU§geSts
(
pow”id
)

575 && !
pow”
.
·ssive
;

577 
	}
}

579 
	gStBlock
::
	$lßdH”oSts
() {

581 
FeP¬£r
 
šfe
;

582 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/stats.txt"))) {

583 
	`årštf
(
¡d”r
, "Unableo openƒngine/stats.txt!\n");

587 
šfe
.
	`Ãxt
()) {

588 
v®ue
 = 
	`toIÁ
(
šfe
.
v®
);

590 ià(
šfe
.
key
 == "max_points_per_stat") {

591 
max_pošts_³r_¡©
 = 
v®ue
;

592 } ià(
šfe
.
key
 == "hp_base") {

593 
hp_ba£
 = 
v®ue
;

594 } ià(
šfe
.
key
 == "hp_per_level") {

595 
hp_³r_Ëv–
 = 
v®ue
;

596 } ià(
šfe
.
key
 == "hp_per_physical") {

597 
hp_³r_physiÿl
 = 
v®ue
;

598 } ià(
šfe
.
key
 == "hp_regen_base") {

599 
hp_»g’_ba£
 = 
v®ue
;

600 } ià(
šfe
.
key
 == "hp_regen_per_level") {

601 
hp_»g’_³r_Ëv–
 = 
v®ue
;

602 } ià(
šfe
.
key
 == "hp_regen_per_physical") {

603 
hp_»g’_³r_physiÿl
 = 
v®ue
;

604 } ià(
šfe
.
key
 == "mp_base") {

605 
mp_ba£
 = 
v®ue
;

606 } ià(
šfe
.
key
 == "mp_per_level") {

607 
mp_³r_Ëv–
 = 
v®ue
;

608 } ià(
šfe
.
key
 == "mp_per_mental") {

609 
mp_³r_m’l
 = 
v®ue
;

610 } ià(
šfe
.
key
 == "mp_regen_base") {

611 
mp_»g’_ba£
 = 
v®ue
;

612 } ià(
šfe
.
key
 == "mp_regen_per_level") {

613 
mp_»g’_³r_Ëv–
 = 
v®ue
;

614 } ià(
šfe
.
key
 == "mp_regen_per_mental") {

615 
mp_»g’_³r_m’l
 = 
v®ue
;

616 } ià(
šfe
.
key
 == "accuracy_base") {

617 
accu¿cy_ba£
 = 
v®ue
;

618 } ià(
šfe
.
key
 == "accuracy_per_level") {

619 
accu¿cy_³r_Ëv–
 = 
v®ue
;

620 } ià(
šfe
.
key
 == "accuracy_per_offense") {

621 
accu¿cy_³r_ofãn£
 = 
v®ue
;

622 } ià(
šfe
.
key
 == "avoidance_base") {

623 
avoidªû_ba£
 = 
v®ue
;

624 } ià(
šfe
.
key
 == "avoidance_per_level") {

625 
avoidªû_³r_Ëv–
 = 
v®ue
;

626 } ià(
šfe
.
key
 == "avoidance_per_defense") {

627 
avoidªû_³r_deãn£
 = 
v®ue
;

628 } ià(
šfe
.
key
 == "crit_base") {

629 
ü™_ba£
 = 
v®ue
;

630 } ià(
šfe
.
key
 == "crit_per_level") {

631 
ü™_³r_Ëv–
 = 
v®ue
;

632 } ià(
šfe
.
key
 == "dmg_melee_min") {

633 
dmg_m–“_mš
 = 
dmg_m–“_mš_deçuÉ
 = 
v®ue
;

634 } ià(
šfe
.
key
 == "dmg_melee_max") {

635 
dmg_m–“_max
 = 
dmg_m–“_max_deçuÉ
 = 
v®ue
;

636 } ià(
šfe
.
key
 == "dmg_ranged_min") {

637 
dmg_¿nged_mš
 = 
dmg_¿nged_mš_deçuÉ
 = 
v®ue
;

638 } ià(
šfe
.
key
 == "dmg_ranged_max") {

639 
dmg_¿nged_max
 = 
dmg_¿nged_max_deçuÉ
 = 
v®ue
;

640 } ià(
šfe
.
key
 == "dmg_ment_min") {

641 
dmg_m’t_mš
 = 
dmg_m’t_mš_deçuÉ
 = 
v®ue
;

642 } ià(
šfe
.
key
 == "dmg_ment_max") {

643 
dmg_m’t_max
 = 
dmg_m’t_max_deçuÉ
 = 
v®ue
;

644 } ià(
šfe
.
key
 == "absorb_min") {

645 
absÜb_mš
 = 
absÜb_mš_deçuÉ
 = 
v®ue
;

646 } ià(
šfe
.
key
 == "absorb_max") {

647 
absÜb_max
 = 
absÜb_max_deçuÉ
 = 
v®ue
;

648 } ià(
šfe
.
key
 == "speed") {

649 
¥“d
 = 
¥“d_deçuÉ
 = 
v®ue
;

650 } ià(
šfe
.
key
 == "dspeed") {

651 
d¥“d
 = 
d¥“d_deçuÉ
 = 
v®ue
;

652 } ià(
šfe
.
key
 == "bonus_per_physical") {

653 
bÚus_³r_physiÿl
 = 
v®ue
;

654 } ià(
šfe
.
key
 == "bonus_per_mental") {

655 
bÚus_³r_m’l
 = 
v®ue
;

656 } ià(
šfe
.
key
 == "bonus_per_offense") {

657 
bÚus_³r_ofãn£
 = 
v®ue
;

658 } ià(
šfe
.
key
 == "bonus_per_defense") {

659 
bÚus_³r_deãn£
 = 
v®ue
;

660 } ià(
šfe
.
key
 == "sfx_step") {

661 
sfx_¡•
 = 
šfe
.
v®
;

662 } ià(
šfe
.
key
 == "stat_points_per_level") {

663 
¡©_pošts_³r_Ëv–
 = 
v®ue
;

664 } ià(
šfe
.
key
 == "power_points_per_level") {

665 
pow”_pošts_³r_Ëv–
 = 
v®ue
;

666 } ià(
šfe
.
key
 == "cooldown_hit") {

667 
coŞdown_h™
 = 
v®ue
;

670 
šfe
.
	`şo£
();

671 ià(
max_pošts_³r_¡©
 =ğ0èmax_pošts_³r_¡© = 
max_¥’dabË_¡©_pošts
 / 4 + 1;

672 
¡©sLßded
 = 
Œue
;

675 ià(!
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("engine/xp_table.txt"))) {

676 
	`årštf
(
¡d”r
, "Unableo openƒngine/xp_table.txt!\n");

679 
šfe
.
	`Ãxt
()) {

680 
xp_bË
[
	`toIÁ
(
šfe
.
key
è- 1] =oIÁ(šfe.
v®
);

682 
max_¥’dabË_¡©_pošts
 = 
	`toIÁ
(
šfe
.
key
è* 
¡©_pošts_³r_Ëv–
;

683 
šfe
.
	`şo£
();

684 
	}
}

	@StatBlock.h

26 #´agm¨
Úû


27 #iâdeà
STAT_BLOCK_H


28 
	#STAT_BLOCK_H


	)

30 
	~"EfãùMªag”.h
"

31 
	~"Uts.h
"

32 
	~<¡ršg
>

33 
	~<queue
>

35 
şass
 
	gPow”
;

37 cÚ¡ 
	gPOWERSLOT_COUNT
 = 10;

38 cÚ¡ 
	gMELEE_PHYS
 = 0;

39 cÚ¡ 
	gMELEE_MENT
 = 1;

40 cÚ¡ 
	gRANGED_PHYS
 = 2;

41 cÚ¡ 
	gRANGED_MENT
 = 3;

42 cÚ¡ 
	gBEACON
 = 4;

43 cÚ¡ 
	gON_HIT
 = 5;

44 cÚ¡ 
	gON_DEATH
 = 6;

45 cÚ¡ 
	gON_HALF_DEAD
 = 7;

46 cÚ¡ 
	gON_DEBUFF
 = 8;

47 cÚ¡ 
	gON_JOIN_COMBAT
 = 9;

50 cÚ¡ 
	gENEMY_STANCE
 = 0;

51 cÚ¡ 
	gENEMY_MOVE
 = 1;

52 cÚ¡ 
	gENEMY_CHARGE
 = 2;

53 cÚ¡ 
	gENEMY_MELEE_PHYS
 = 3;

54 cÚ¡ 
	gENEMY_MELEE_MENT
 = 4;

55 cÚ¡ 
	gENEMY_RANGED_PHYS
 = 5;

56 cÚ¡ 
	gENEMY_RANGED_MENT
 = 6;

57 cÚ¡ 
	gENEMY_SPAWN
 = 7;

59 cÚ¡ 
	gENEMY_BLOCK
 = 9;

60 cÚ¡ 
	gENEMY_HIT
 = 10;

61 cÚ¡ 
	gENEMY_DEAD
 = 11;

62 cÚ¡ 
	gENEMY_CRITDEAD
 = 12;

63 cÚ¡ 
	gENEMY_HALF_DEAD
 = 13;

64 cÚ¡ 
	gENEMY_JOIN_COMBAT
 = 14;

67 cÚ¡ 
	gENEMY_POWER
 = 15;

70 cÚ¡ 
	gMAX_CHARACTER_LEVEL
 = 32;

72 şas 
	cEÃmyLoÙ
 {

73 
	mpublic
:

74 
id
;

75 
	mchªû
;

76 
	mcouÁ_mš
;

77 
	mcouÁ_max
;

79 
	$EÃmyLoÙ
()

80 : 
	`id
(0)

81 , 
	`chªû
(0)

82 , 
	`couÁ_mš
(1)

83 , 
	$couÁ_max
(1)

85 
	}
};

87 şas 
	cStBlock
 {

88 
	m´iv©e
:

89 
lßdH”oSts
();

90 
boŞ
 
	m¡©sLßded
;

92 
	mpublic
:

93 
StBlock
();

94 ~
StBlock
();

96 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

97 
keDamage
(
dmg
);

98 
»ÿlc
();

99 
»ÿlc_®t
();

100 
ÿlcBa£DmgAndAbs
();

101 
logic
();

103 
boŞ
 
	m®ive
;

104 
boŞ
 
	mcÜp£
;

105 
	mcÜp£_ticks
;

106 
boŞ
 
	mh”o
;

107 
boŞ
 
	mhumªoid
;

108 
boŞ
 
	m³rmad—th
;

109 
boŞ
 
	mŒªsfÜmed
;

110 
boŞ
 
	m»äesh_¡©s
;

112 
	mmovem’t_ty³
;

113 
boŞ
 
	mæyšg
;

114 
boŞ
 
	mšngibË
;

115 
boŞ
 
	mçcšg
;

117 
	m¡d
::
¡ršg
 
Çme
;

118 
	m¡d
::
¡ršg
 
sfx_´efix
;

120 
	mËv–
;

121 
	mxp
;

122 
	mxp_bË
[
MAX_CHARACTER_LEVEL
+1];

123 
boŞ
 
	mËv–_up
;

124 
boŞ
 
	mcheck_t™Ë
;

125 
	m¡©_pošts_³r_Ëv–
;

126 
	mpow”_pošts_³r_Ëv–
;

129 
	mofãn£_ch¬aù”
;

130 
	mdeãn£_ch¬aù”
;

131 
	mphysiÿl_ch¬aù”
;

132 
	mm’l_ch¬aù”
;

135 
	mofãn£_add™iÚ®
;

136 
	mdeãn£_add™iÚ®
;

137 
	mphysiÿl_add™iÚ®
;

138 
	mm’l_add™iÚ®
;

141 
	mbÚus_³r_physiÿl
;

142 
	mbÚus_³r_m’l
;

143 
	mbÚus_³r_ofãn£
;

144 
	mbÚus_³r_deãn£
;

147 
	$g‘_ofãn£
(ècÚ¡ {  
ofãn£_ch¬aù”
 + 
ofãn£_add™iÚ®
; }

148 
	$g‘_deãn£
(ècÚ¡ {  
deãn£_ch¬aù”
 + 
deãn£_add™iÚ®
; 
	}
}

149 
	$g‘_physiÿl
(ècÚ¡ {  
physiÿl_ch¬aù”
 + 
physiÿl_add™iÚ®
; 
	}
}

150 
	$g‘_m’l
(ècÚ¡ {  
m’l_ch¬aù”
 + 
m’l_add™iÚ®
; 
	}
}

153 
	$physoff
(è{  
	`g‘_physiÿl
(è+ 
	`g‘_ofãn£
(); 
	}
}

154 
	$physdef
(è{  
	`g‘_physiÿl
(è+ 
	`g‘_deãn£
(); 
	}
}

155 
	$m’toff
(è{  
	`g‘_m’l
(è+ 
	`g‘_ofãn£
(); 
	}
}

156 
	$m’tdef
(è{  
	`g‘_m’l
(è+ 
	`g‘_deãn£
(); 
	}
}

157 
	$physm’t
(è{  
	`g‘_physiÿl
(è+ 
	`g‘_m’l
(); 
	}
}

158 
	$offdef
(è{  
	`g‘_ofãn£
(è+ 
	`g‘_deãn£
(); 
	}
}

162 
	g¡d
::
¡ršg
 
ch¬aù”_şass
;

165 
	ghp
;

166 
	gmaxhp
;

167 
	ghp_³r_mšu‹
;

168 
	ghp_tick”
;

171 
	gmp
;

172 
	gmaxmp
;

173 
	gmp_³r_mšu‹
;

174 
	gmp_tick”
;

177 
	gaccu¿cy
;

180 
	gavoidªû
;

183 
	gü™
;

186 
	gdmg_m–“_mš_deçuÉ
;

187 
	gdmg_m–“_max_deçuÉ
;

188 
	gdmg_m’t_mš_deçuÉ
;

189 
	gdmg_m’t_max_deçuÉ
;

190 
	gdmg_¿nged_mš_deçuÉ
;

191 
	gdmg_¿nged_max_deçuÉ
;

192 
	gabsÜb_mš_deçuÉ
;

193 
	gabsÜb_max_deçuÉ
;

195 
	g¥“d_deçuÉ
;

196 
	gd¥“d_deçuÉ
;

199 
	gdmg_m–“_mš
;

200 
	gdmg_m–“_max
;

201 
	gdmg_m’t_mš
;

202 
	gdmg_m’t_max
;

203 
	gdmg_¿nged_mš
;

204 
	gdmg_¿nged_max
;

205 
	gabsÜb_mš
;

206 
	gabsÜb_max
;

208 
	g¥“d
;

209 
	gd¥“d
;

211 
boŞ
 
	gw›ldšg_physiÿl
;

212 
boŞ
 
	gw›ldšg_m’l
;

213 
boŞ
 
	gw›ldšg_ofãn£
;

214 
	g¡d
::
veùÜ
<> 
vuÊ”abË
;

215 
	g¡d
::
veùÜ
<> 
vuÊ”abË_ba£
;

218 
	gŒªsfÜm_du¿tiÚ
;

219 
	gŒªsfÜm_du¿tiÚ_tÙ®
;

220 
boŞ
 
	gmªu®_uÁ¿nsfÜm
;

221 
boŞ
 
	gŒªsfÜm_w™h_equm’t
;

222 
EfãùMªag”
 
	gefãùs
;

224 
Pošt
 
	gpos
;

225 
Pošt
 
	gfÜûd_¥“d
;

226 
	gdœeùiÚ
;

227 
	g¡d
::
veùÜ
<> 
h”o_coŞdown
;

229 
	gpoi£
;

230 
	gpoi£_ba£
;

232 
	gcoŞdown_h™
;

233 
	gcoŞdown_h™_ticks
;

236 
	gcur_¡©e
;

239 
	g¡d
::
queue
<
Pošt
> 
waypošts
;

240 
	gwaypošt_·u£
;

241 
	gwaypošt_·u£_ticks
;

244 
boŞ
 
	gwªd”
;

245 
SDL_Reù
 
	gwªd”_¬—
;

246 
	gwªd”_ticks
;

247 
	gwªd”_·u£_ticks
;

250 
	gchªû_pursue
;

251 
	gchªû_æ“
;

253 
	g¡d
::
veùÜ
<> 
pow”s_li¡
;

254 
	g¡d
::
veùÜ
<> 
pow”s_li¡_™ems
;

255 
	g¡d
::
veùÜ
<> 
pow”s_·ssive
;

256 
	g¡d
::
veùÜ
<> 
pow”_chªû
;

257 
	g¡d
::
veùÜ
<> 
pow”_šdex
;

258 
	g¡d
::
veùÜ
<> 
pow”_coŞdown
;

259 
	g¡d
::
veùÜ
<> 
pow”_ticks
;

261 
boŞ
 
	$ÿnU£Pow”
(cÚ¡ 
Pow”
 &
pow”
, 
pow”id
) const;

263 
m–“_¿nge
;

264 
th»©_¿nge
;

265 
Pošt
 
h”o_pos
;

266 
boŞ
 
h”o_®ive
;

267 
h”o_¡—Éh
;

268 
Pošt
 
Ï¡_£’
;

269 
tuº_d–ay
;

270 
tuº_ticks
;

271 
boŞ
 
š_comb©
;

272 
boŞ
 
još_comb©
;

273 
coŞdown_ticks
;

274 
coŞdown
;

275 
aùiv©ed_pow”¦Ù
;

276 
boŞ
 
Ú_h®f_d—d_ÿ¡ed
;

277 
boŞ
 
suµ»ss_hp
;

279 
¡d
::
veùÜ
<
EÃmyLoÙ
> 
loÙ
;

282 
boŞ
 
‹ËpÜtiÚ
;

283 
Pošt
 
‹ËpÜt_de¡š©iÚ
;

286 
m–“_w—pÚ_pow”
;

287 
m’l_w—pÚ_pow”
;

288 
¿nged_w—pÚ_pow”
;

291 
cu¼’cy
;

294 
boŞ
 
d—th_³ÇÉy
;

297 
¡d
::
¡ršg
 
deã©_¡©us
;

298 
¡d
::
¡ršg
 
que¡_loÙ_»quœes
;

299 
¡d
::
¡ršg
 
que¡_loÙ_nÙ
;

300 
que¡_loÙ_id
;

301 
fœ¡_deã©_loÙ
;

304 
¡d
::
¡ršg
 
ba£
;

305 
¡d
::
¡ršg
 
h—d
;

306 
¡d
::
¡ršg
 
pÜŒa™
;

307 
¡d
::
¡ršg
 
ŒªsfÜm_ty³
;

309 
¡d
::
¡ršg
 
ªim©iÚs
;

312 
¡d
::
¡ršg
 
sfx_¡•
;

315 
max_¥’dabË_¡©_pošts
;

316 
max_pošts_³r_¡©
;

317 
hp_ba£
;

318 
hp_³r_Ëv–
;

319 
hp_³r_physiÿl
;

320 
hp_»g’_ba£
;

321 
hp_»g’_³r_Ëv–
;

322 
hp_»g’_³r_physiÿl
;

323 
mp_ba£
;

324 
mp_³r_Ëv–
;

325 
mp_³r_m’l
;

326 
mp_»g’_ba£
;

327 
mp_»g’_³r_Ëv–
;

328 
mp_»g’_³r_m’l
;

329 
accu¿cy_ba£
;

330 
accu¿cy_³r_Ëv–
;

331 
accu¿cy_³r_ofãn£
;

332 
avoidªû_ba£
;

333 
avoidªû_³r_Ëv–
;

334 
avoidªû_³r_deãn£
;

335 
ü™_ba£
;

336 
ü™_³r_Ëv–
;

337 
	}
};

	@TileSet.cpp

25 
	~"TeS‘.h
"

26 
	~"Sh¬edResourûs.h
"

27 
	~"FeP¬£r.h
"

28 
	~"UtsP¬sšg.h
"

29 
	~"S‘tšgs.h
"

31 
	~<c¡dio
>

32 
	~<io¡»am
>

34 
usšg
 
Çme¥aû
 
	g¡d
;

36 
	gTeS‘
::
	$TeS‘
() {

37 
¥r™es
 = 
NULL
;

38 
	`»£t
();

39 
	}
}

41 
	gTeS‘
::
	$»£t
() {

43 
	`SDL_F»eSurçû
(
¥r™es
);

45 
®pha_background
 = 
Œue
;

46 
Œªs_r
 = 255;

47 
Œªs_g
 = 0;

48 
Œªs_b
 = 255;

50 
¥r™es
 = 
NULL
;

51 
tes
.
	`ş—r
();

52 
ªim
.
	`ş—r
();

54 
max_size_x
 = 0;

55 
max_size_y
 = 0;

56 
	}
}

58 
	gTeS‘
::
lßdG¿phics
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

59 ià(
¥r™es
è
SDL_F»eSurçû
(sprites);

61 ià(
	gTEXTURE_QUALITY
 =ğ
çl£
)

62 
¥r™es
 = 
IMG_Lßd
((
mods
->
loÿ‹
("images/te£ts/nßÍha/" + 
f’ame
)).
c_¡r
());

64 ià(!
	g¥r™es
) {

65 
	g¥r™es
 = 
IMG_Lßd
((
mods
->
loÿ‹
("images/te£ts/" + 
f’ame
)).
c_¡r
());

66 ià(!
	g¥r™es
) {

67 
årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
IMG_G‘E¼Ü
());

70 
	g®pha_background
 = 
çl£
;

73 ià(
	g¥r™es
) {

77 ià(!
	g®pha_background
) {

78 
SDL_S‘CŞÜKey
Ğ
¥r™es
, 
SDL_SRCCOLORKEY
, 
SDL_M­RGB
(¥r™es->
fÜm©
, 
Œªs_r
, 
Œªs_g
, 
Œªs_b
) );

82 
SDL_Surçû
 *
	gş—nup
 = 
¥r™es
;

83 
	g¥r™es
 = 
SDL_Di¥ÏyFÜm©AÍha
(
¥r™es
);

84 
SDL_F»eSurçû
(
ş—nup
);

88 
	gTeS‘
::
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
) {

89 ià(
cu¼’t_m­
 =ğ
f’ame
) ;

91 
»£t
();

93 
FeP¬£r
 
	gšfe
;

94 
¡ršg
 
	gimg
;

96 ià(
	gšfe
.
İ’
(
mods
->
loÿ‹
("te£tdefs/" + 
f’ame
))) {

97 
	gšfe
.
Ãxt
()) {

98 ià(
	gšfe
.
	gkey
 == "tile") {

100 
šfe
.
v®
 = infile.val + ',';

101 
	gšdex
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

103 ià(
	gšdex
 >ğ
tes
.
size
())

104 
tes
.
»size
(
šdex
 + 1);

106 
	gtes
[
šdex
].
	g¤c
.
	gx
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

107 
	gtes
[
šdex
].
	g¤c
.
	gy
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

108 
	gtes
[
šdex
].
	g¤c
.
	gw
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

109 
	gtes
[
šdex
].
	g¤c
.
	gh
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

110 
	gtes
[
šdex
].
	goff£t
.
	gx
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

111 
	gtes
[
šdex
].
	goff£t
.
	gy
 = 
—tFœ¡IÁ
(
šfe
.
v®
, ',');

112 
	gmax_size_x
 = 
¡d
::
max
(
max_size_x
, (
tes
[
šdex
].
¤c
.
w
 / 
TILE_W
) + 1);

113 
	gmax_size_y
 = 
¡d
::
max
(
max_size_y
, (
tes
[
šdex
].
¤c
.
h
 / 
TILE_H
) + 1);

115 ià(
	gšfe
.
	gkey
 == "img") {

116 
img
 = 
šfe
.
v®
;

118 ià(
	gšfe
.
	gkey
 == "transparency") {

119 
®pha_background
 = 
çl£
;

121 
	gšfe
.
	gv®
 = 
šfe
.
v®
 + ',';

122 
	gŒªs_r
 = (
Ušt8
)
—tFœ¡IÁ
(
šfe
.
v®
, ',');

123 
	gŒªs_g
 = (
Ušt8
)
—tFœ¡IÁ
(
šfe
.
v®
, ',');

124 
	gŒªs_b
 = (
Ušt8
)
—tFœ¡IÁ
(
šfe
.
v®
, ',');

127 ià(
	gšfe
.
	gkey
 == "animation") {

128 
äame
 = 0;

129 
	gTILE_ID
 = 
toIÁ
(
šfe
.
ÃxtV®ue
());

131 ià(
	gTILE_ID
 >ğ
ªim
.
size
())

132 
ªim
.
»size
(
TILE_ID
 + 1);

134 
¡ršg
 
	g»³©_v®
 = 
šfe
.
ÃxtV®ue
();

135 
	g»³©_v®
 != "") {

136 
ªim
[
TILE_ID
].
äames
++;

137 
	gªim
[
TILE_ID
].
	gpos
.
»size
(
äame
 + 1);

138 
	gªim
[
TILE_ID
].
	gäame_du¿tiÚ
.
»size
(
äame
 + 1);

139 
	gªim
[
TILE_ID
].
	gpos
[
äame
].
	gx
 = 
toIÁ
(
»³©_v®
);

140 
	gªim
[
TILE_ID
].
	gpos
[
äame
].
	gy
 = 
toIÁ
(
šfe
.
ÃxtV®ue
());

141 
	gªim
[
TILE_ID
].
	gäame_du¿tiÚ
[
äame
] = 
toIÁ
(
šfe
.
ÃxtV®ue
());

143 
	gäame
++;

144 
	g»³©_v®
 = 
šfe
.
ÃxtV®ue
();

148 
	gšfe
.
şo£
();

149 
lßdG¿phics
(
img
);

150 } 
årštf
(
¡d”r
, "UÇbËØİ’e£tdefs/%s!\n", 
f’ame
.
c_¡r
());

152 
	gcu¼’t_m­
 = 
f’ame
;

155 
	gTeS‘
::
	$logic
() {

157 ià(
ANIMATED_TILES
) {

158 
i
 = 0; i < 
ªim
.
	`size
() ; i++) {

159 
Te_Anim
 &
ª
 = 
ªim
[
i
];

160 ià(!
ª
.
äames
)

162 ià(
ª
.
du¿tiÚ
 >ğª.
äame_du¿tiÚ
[ª.
cu¼’t_äame
]) {

163 
tes
[
i
].
¤c
.
x
 = 
ª
.
pos
[ª.
cu¼’t_äame
].x;

164 
tes
[
i
].
¤c
.
y
 = 
ª
.
pos
[ª.
cu¼’t_äame
].y;

165 
ª
.
du¿tiÚ
 = 0;

166 
ª
.
cu¼’t_äame
 = (ª.cu¼’t_äam+ 1è%‡n.
äames
;

168 
ª
.
du¿tiÚ
++;

171 
	}
}

173 
	gTeS‘
::~
	$TeS‘
() {

174 
	`SDL_F»eSurçû
(
¥r™es
);

175 
	}
}

	@TileSet.h

25 #´agm¨
Úû


26 #iâdeà
TILE_SET_H


27 
	#TILE_SET_H


	)

29 
	~"Uts.h
"

31 
	~<SDL.h
>

32 
	~<SDL_image.h
>

34 
	~<¡ršg
>

35 
	~<veùÜ
>

43 şas 
	cTe_Def
 {

44 
	mpublic
:

45 
SDL_Reù
 
¤c
;

46 
Pošt
 
	moff£t
;

47 
	$Te_Def
() {

48 
¤c
.
x
 = src.
y
 = src.
w
 = src.
h
 = 0;

49 
off£t
.
x
 = off£t.
y
 = 0;

51 
	}
};

53 şas 
	cTe_Anim
 {

54 
	mpublic
:

57 
äames
;

58 
	mcu¼’t_äame
;

59 
	mdu¿tiÚ
;

60 
	m¡d
::
veùÜ
<
Pošt
> 
pos
;

61 
	m¡d
::
veùÜ
<> 
äame_du¿tiÚ
;

62 
	$Te_Anim
() {

63 
äames
 = 0;

64 
cu¼’t_äame
 = 0;

65 
du¿tiÚ
 = 0;

67 
	}
};

69 şas 
	cTeS‘
 {

70 
	m´iv©e
:

71 
lßdG¿phics
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

72 
»£t
();

74 
Ušt8
 
	mŒªs_r
;

75 
Ušt8
 
	mŒªs_g
;

76 
Ušt8
 
	mŒªs_b
;

77 
boŞ
 
	m®pha_background
;

78 
	m¡d
::
¡ršg
 
cu¼’t_m­
;

80 
	mpublic
:

82 
TeS‘
();

83 ~
TeS‘
();

84 
lßd
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

85 
logic
();

87 
	m¡d
::
veùÜ
<
Te_Def
> 
tes
;

88 
	m¡d
::
veùÜ
<
Te_Anim
> 
ªim
;

89 
SDL_Surçû
 *
	m¥r™es
;

92 
	mmax_size_x
;

93 
	mmax_size_y
;

	@Utils.cpp

19 
	~"S‘tšgs.h
"

20 
	~"Sh¬edResourûs.h
"

21 
	~"Uts.h
"

23 
	~<cm©h
>

25 
usšg
 
Çme¥aû
 
	g¡d
;

28 
	$round
(
f
) {

29  ()(
f
 + 0.5);

30 
	}
}

32 
Pošt
 
	$round
(
FPošt
 
å
) {

33 
Pošt
 
»suÉ
;

34 
»suÉ
.
x
 = 
	`round
(
å
.x);

35 
»suÉ
.
y
 = 
	`round
(
å
.y);

36  
»suÉ
;

37 
	}
}

39 
Pošt
 
	$sü“n_to_m­
(
x
, 
y
, 
ÿmx
, 
ÿmy
) {

40 
Pošt
 
r
;

41 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ISOMETRIC
) {

42 
süx
 = 
x
 - 
VIEW_W_HALF
;

43 
süy
 = 
y
 - 
VIEW_H_HALF
;

45 
cx
 = 
UNITS_PER_PIXEL_X
 /2;

46 
cy
 = 
UNITS_PER_PIXEL_Y
 /2;

48 
r
.
x
 = (
cx
 * 
süx
è+ (
cy
 * 
süy
è+ 
ÿmx
;

49 
r
.
y
 = (
cy
 * 
süy
è- (
cx
 * 
süx
è+ 
ÿmy
;

52 
r
.
x
 = (x - 
VIEW_W_HALF
è* (
UNITS_PER_PIXEL_X
 ) + 
ÿmx
;

53 
r
.
y
 = (y - 
VIEW_H_HALF
è* (
UNITS_PER_PIXEL_Y
 ) + 
ÿmy
;

55  
r
;

56 
	}
}

62 
Pošt
 
	$m­_to_sü“n
(
x
, 
y
, 
ÿmx
, 
ÿmy
) {

63 
Pošt
 
r
;

67 
adju¡_x
 = 
VIEW_W_HALF
 * 
UNITS_PER_PIXEL_X
;

68 
adju¡_y
 = 
VIEW_H_HALF
 * 
UNITS_PER_PIXEL_Y
;

70 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ISOMETRIC
) {

71 
r
.
x
 = (x - 
ÿmx
 - 
y
 + 
ÿmy
 + 
adju¡_x
)/
UNITS_PER_PIXEL_X
;

72 
r
.
y
 = (
x
 - 
ÿmx
 + y - 
ÿmy
 + 
adju¡_y
)/
UNITS_PER_PIXEL_Y
;

75 
r
.
x
 = (x - 
ÿmx
 + 
adju¡_x
)/
UNITS_PER_PIXEL_X
;

76 
r
.
y
 = (y - 
ÿmy
 + 
adju¡_y
)/
UNITS_PER_PIXEL_Y
;

78  
r
;

79 
	}
}

81 
Pošt
 
	$ûÁ”_te
(
Pošt
 
p
) {

82 ià(
TILESET_ORIENTATION
 =ğ
TILESET_ORTHOGONAL
) {

83 
p
.
x
 +ğ
TILE_W_HALF
;

84 
p
.
y
 +ğ
TILE_H_HALF
;

87 
p
.
y
 +ğ
TILE_H_HALF
;

88  
p
;

89 
	}
}

91 
Pošt
 
	$cŞlisiÚ_to_m­
(
Pošt
 
p
) {

92 
p
.
x
 = (p.x << 
TILE_SHIFT
è+ 
UNITS_PER_TILE
/2;

93 
p
.
y
 = (p.y << 
TILE_SHIFT
è+ 
UNITS_PER_TILE
/2;

94  
p
;

95 
	}
}

97 
Pošt
 
	$m­_to_cŞlisiÚ
(
Pošt
 
p
) {

98 
p
.
x
 =….x >> 
TILE_SHIFT
;

99 
p
.
y
 =….y >> 
TILE_SHIFT
;

100  
p
;

101 
	}
}

106 
FPošt
 
	$ÿlcVeùÜ
(
Pošt
 
pos
, 
dœeùiÚ
, 
di¡
) {

107 
FPošt
 
p
;

108 
p
.
x
 = ()(
pos
.x);

109 
p
.
y
 = ()(
pos
.y);

111 
di¡_¡¿ight
 = ()
di¡
;

112 
di¡_dŸg
 = (()
di¡
) * ()(0.7071);

114 
dœeùiÚ
) {

116 
p
.
x
 -ğ
di¡_dŸg
;

117 
p
.
y
 +ğ
di¡_dŸg
;

120 
p
.
x
 -ğ
di¡_¡¿ight
;

123 
p
.
x
 -ğ
di¡_dŸg
;

124 
p
.
y
 -ğ
di¡_dŸg
;

127 
p
.
y
 -ğ
di¡_¡¿ight
;

130 
p
.
x
 +ğ
di¡_dŸg
;

131 
p
.
y
 -ğ
di¡_dŸg
;

134 
p
.
x
 +ğ
di¡_¡¿ight
;

137 
p
.
x
 +ğ
di¡_dŸg
;

138 
p
.
y
 +ğ
di¡_dŸg
;

141 
p
.
y
 +ğ
di¡_¡¿ight
;

144  
p
;

145 
	}
}

147 
	$ÿlcDi¡
(
Pošt
 
p1
, Pošˆ
p2
) {

148 
x
 = 
p2
.x - 
p1
.x;

149 
y
 = 
p2
.y - 
p1
.y;

150 
¡•1
 = 
x
*x + 
y
*y;

151  
	`sq¹
(
¡•1
);

152 
	}
}

157 
boŞ
 
	$isW™hš
(
Pošt
 
ûÁ”
, 
¿dius
, Pošˆ
rg‘
) {

158  (
	`ÿlcDi¡
(
ûÁ”
, 
rg‘
è< 
¿dius
);

159 
	}
}

164 
boŞ
 
	$isW™hš
(
SDL_Reù
 
r
, 
Pošt
 
rg‘
) {

165  
rg‘
.
x
 >ğ
r
.x &&¬g‘.
y
 >ğr.y &&¬g‘.x <„.x+r.
w
 &&¬g‘.y <„.y+r.
h
;

166 
	}
}

175 
	$d¿wPix–
(
SDL_Surçû
 *
surçû
, 
x
, 
y
, 
Ušt32
 
pix–
)

177 
bµ
 = 
surçû
->
fÜm©
->
By‹sP”Pix–
;

179 
Ušt8
 *
p
 = (Ušt8 *)
surçû
->
pix–s
 + 
y
 * surçû->
p™ch
 + 
x
 * 
bµ
;

181 
bµ
) {

183 *
p
 = 
pix–
;

187 *(
Ušt16
 *)
p
 = 
pix–
;

191 #ià(
SDL_BYTEORDER
 =ğ
SDL_BIG_ENDIAN
)

192 
p
[0] = (
pix–
 >> 16) & 0xff;

193 
p
[1] = (
pix–
 >> 8) & 0xff;

194 
p
[2] = 
pix–
 & 0xff;

196 
p
[0] = 
pix–
 & 0xff;

197 
p
[1] = (
pix–
 >> 8) & 0xff;

198 
p
[2] = (
pix–
 >> 16) & 0xff;

203 *(
Ušt32
 *)
p
 = 
pix–
;

206 
	}
}

214 
	$d¿wLše
(
SDL_Surçû
 *
surçû
, 
x0
, 
y0
, 
x1
, 
y1
, 
Ušt32
 
cŞÜ
) {

215 cÚ¡ 
dx
 = 
	`abs
(
x1
-
x0
);

216 cÚ¡ 
dy
 = 
	`abs
(
y1
-
y0
);

217 cÚ¡ 
sx
 = 
x0
 < 
x1
 ? 1 : -1;

218 cÚ¡ 
sy
 = 
y0
 < 
y1
 ? 1 : -1;

219 
”r
 = 
dx
-
dy
;

223 ià(
x0
 > 0 && 
y0
 > 0 && x0 < 
VIEW_W
 && y0 < 
VIEW_H
)

224 
	`d¿wPix–
(
surçû
,
x0
,
y0
,
cŞÜ
);

226 
e2
 = 2*
”r
;

227 ià(
e2
 > -
dy
) {

228 
”r
 =ƒ¼ - 
dy
;

229 
x0
 = x0 + 
sx
;

231 ià(
e2
 < 
dx
) {

232 
”r
 =ƒ¼ + 
dx
;

233 
y0
 = y0 + 
sy
;

235 } 
x0
 !ğ
x1
 || 
y0
 !ğ
y1
);

236 
	}
}

238 
	$d¿wLše
(
SDL_Surçû
 *
surçû
, 
Pošt
 
pos0
, Pošˆ
pos1
, 
Ušt32
 
cŞÜ
) {

239 
	`d¿wLše
(
surçû
, 
pos0
.
x
,…os0.
y
, 
pos1
.x,…os1.y, 
cŞÜ
);

240 
	}
}

242 
	$£tSDL_RGBA
(
Ušt32
 *
rmask
, Ušt32 *
gmask
, Ušt32 *
bmask
, Ušt32 *
amask
) {

243 #ià
SDL_BYTEORDER
 =ğ
SDL_BIG_ENDIAN


244 *
rmask
 = 0xff000000;

245 *
gmask
 = 0x00ff0000;

246 *
bmask
 = 0x0000ff00;

247 *
amask
 = 0x000000ff;

249 *
rmask
 = 0x000000ff;

250 *
gmask
 = 0x0000ff00;

251 *
bmask
 = 0x00ff0000;

252 *
amask
 = 0xff000000;

254 
	}
}

260 
SDL_Surçû
* 
	$ü—‹AÍhaSurçû
(
width
, 
height
) {

262 
SDL_Surçû
 *
surçû
;

263 
Ušt32
 
rmask
, 
gmask
, 
bmask
, 
amask
;

265 
	`£tSDL_RGBA
(&
rmask
, &
gmask
, &
bmask
, &
amask
);

267 ià(
HWSURFACE
)

268 
surçû
 = 
	`SDL_C»©eRGBSurçû
(
SDL_HWSURFACE
|
SDL_SRCALPHA
, 
width
, 
height
, 
BITS_PER_PIXEL
, 
rmask
, 
gmask
, 
bmask
, 
amask
);

270 
surçû
 = 
	`SDL_C»©eRGBSurçû
(
SDL_SWSURFACE
|
SDL_SRCALPHA
, 
width
, 
height
, 
BITS_PER_PIXEL
, 
rmask
, 
gmask
, 
bmask
, 
amask
);

272 if(
surçû
 =ğ
NULL
) {

273 
	`årštf
(
¡d”r
, "C»©eRGBSurçû faed: %s\n", 
	`SDL_G‘E¼Ü
());

277 
SDL_Surçû
 *
ş—nup
 = 
surçû
;

278 
surçû
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(surface);

279 
	`SDL_F»eSurçû
(
ş—nup
);

281  
surçû
;

282 
	}
}

284 
SDL_Surçû
* 
	$ü—‹Surçû
(
width
, 
height
) {

286 
SDL_Surçû
 *
surçû
;

287 
Ušt32
 
rmask
, 
gmask
, 
bmask
, 
amask
;

289 
	`£tSDL_RGBA
(&
rmask
, &
gmask
, &
bmask
, &
amask
);

291 ià(
HWSURFACE
)

292 
surçû
 = 
	`SDL_C»©eRGBSurçû
(
SDL_HWSURFACE
, 
width
, 
height
, 
BITS_PER_PIXEL
, 
rmask
, 
gmask
, 
bmask
, 
amask
);

294 
surçû
 = 
	`SDL_C»©eRGBSurçû
(
SDL_SWSURFACE
, 
width
, 
height
, 
BITS_PER_PIXEL
, 
rmask
, 
gmask
, 
bmask
, 
amask
);

296 if(
surçû
 =ğ
NULL
) {

297 
	`årštf
(
¡d”r
, "C»©eRGBSurçû faed: %s\n", 
	`SDL_G‘E¼Ü
());

300 
	`SDL_S‘CŞÜKey
(
surçû
, 
SDL_SRCCOLORKEY
, 
	`SDL_M­RGB
(surçû->
fÜm©
,255,0,255));

302 
SDL_Surçû
 *
ş—nup
 = 
surçû
;

303 
surçû
 = 
	`SDL_Di¥ÏyFÜm©
(surface);

304 
	`SDL_F»eSurçû
(
ş—nup
);

306  
surçû
;

307 
	}
}

315 
boŞ
 
	$checkPix–
(
Pošt
 
px
, 
SDL_Surçû
 *
surçû
) {

316 
	`SDL_LockSurçû
(
surçû
);

318 
bµ
 = 
surçû
->
fÜm©
->
By‹sP”Pix–
;

320 
Ušt8
 *
p
 = (Ušt8 *)
surçû
->
pix–s
 + 
px
.
y
 * surçû->
p™ch
 +…x.
x
 * 
bµ
;

321 
Ušt32
 
pix–
;

323 
bµ
) {

325 
pix–
 = *
p
;

329 
pix–
 = *(
Ušt16
 *)
p
;

333 #ià(
SDL_BYTEORDER
 =ğ
SDL_BIG_ENDIAN
)

334 
pix–
 = 
p
[0] << 16 |…[1] << 8 |…[2];

336 
pix–
 = 
p
[0] |…[1] << 8 |…[2] << 16;

341 
pix–
 = *(
Ušt32
 *)
p
;

345 
	`SDL_UÆockSurçû
(
surçû
);

346  
çl£
;

349 
Ušt8
 
r
,
g
,
b
,
a
;

350 
	`SDL_G‘RGBA
(
pix–
, 
surçû
->
fÜm©
, &
r
, &
g
, &
b
, &
a
);

352 ià(
r
 =ğ255 && 
g
 =ğ0 && 
b
 ==255 && 
a
 == 255) {

353 
	`SDL_UÆockSurçû
(
surçû
);

354  
çl£
;

356 ià(
a
 == 0) {

357 
	`SDL_UÆockSurçû
(
surçû
);

358  
çl£
;

361 
	`SDL_UÆockSurçû
(
surçû
);

363  
Œue
;

364 
	}
}

	@Utils.h

25 #´agm¨
Úû


26 #iâdeà
UTILS_H


27 
	#UTILS_H


	)

29 
	~<SDL.h
>

30 
	~<SDL_image.h
>

31 
	~<SDL_mix”.h
>

33 
	~<¡ršg
>

34 
	~<¡dšt.h
>

36 şas 
	cPošt
 {

37 
	mpublic
:

38 
x
,
	my
;

39 
	$Pošt
(è: 
	`x
(0), 
	$y
(0) {}

40 
	$Pošt
(
_x
, 
_y
è: 
	`x
(_x), 
	$y
(
_y
è{
	}
}

43 şas 
	cFPošt
 {

44 
	mpublic
:

45 
x
,
	my
;

49 şas 
	cR’d”abË
 {

50 
	mpublic
:

51 
SDL_Surçû
 *
¥r™e
;

52 
SDL_Reù
 
	m¤c
;

54 
Pošt
 
	mm­_pos
;

55 
Pošt
 
	moff£t
;

56 
ušt64_t
 
	m´io
;

57 
	$R’d”abË
()

58 : 
	`¥r™e
(0)

59 , 
	`¤c
(
	`SDL_Reù
())

60 , 
	`m­_pos
(
	`Pošt
())

61 , 
	`off£t
(
	`Pošt
())

62 , 
	$´io
(0)

64 
	}
};

66 şas 
	cEv’t_CompÚ’t
 {

67 
	mpublic
:

68 
¡d
::
¡ršg
 
ty³
;

69 
	m¡d
::
¡ršg
 
s
;

70 
	mx
;

71 
	my
;

72 
	mz
;

73 
	ma
;

74 
	mb
;

76 
	$Ev’t_CompÚ’t
()

77 : 
	`ty³
("")

78 , 
	`s
("")

79 , 
	`x
(0)

80 , 
	`y
(0)

81 , 
	`z
(0)

82 , 
	`a
(0)

83 , 
	$b
(0)

85 
	}
};

88 
round
(
f
);

89 
Pošt
 
round
(
FPošt
 
å
);

90 
Pošt
 
sü“n_to_m­
(
x
, 
y
, 
ÿmx
, 
ÿmy
);

91 
Pošt
 
m­_to_sü“n
(
x
, 
y
, 
ÿmx
, 
ÿmy
);

92 
Pošt
 
ûÁ”_te
(Pošˆ
p
);

93 
Pošt
 
m­_to_cŞlisiÚ
(Pošˆ
p
);

94 
Pošt
 
cŞlisiÚ_to_m­
(Pošˆ
p
);

95 
FPošt
 
ÿlcVeùÜ
(
Pošt
 
pos
, 
dœeùiÚ
, 
di¡
);

96 
ÿlcDi¡
(
Pošt
 
p1
, Pošˆ
p2
);

97 
boŞ
 
isW™hš
(
Pošt
 
ûÁ”
, 
¿dius
, Pošˆ
rg‘
);

98 
boŞ
 
isW™hš
(
SDL_Reù
 
r
, 
Pošt
 
rg‘
);

99 
d¿wPix–
(
SDL_Surçû
 *
sü“n
, 
x
, 
y
, 
Ušt32
 
cŞÜ
);

100 
d¿wLše
(
SDL_Surçû
 *
sü“n
, 
x0
, 
y0
, 
x1
, 
y1
, 
Ušt32
 
cŞÜ
);

101 
d¿wLše
(
SDL_Surçû
 *
sü“n
, 
Pošt
 
pos0
, Pošˆ
pos1
, 
Ušt32
 
cŞÜ
);

102 
boŞ
 
checkPix–
(
Pošt
 
px
, 
SDL_Surçû
 *
surçû
);

111 
SDL_Surçû
* 
ü—‹AÍhaSurçû
(
width
, 
height
);

120 
SDL_Surçû
* 
ü—‹Surçû
(
width
, 
height
);

	@UtilsDebug.cpp

17 
	~<o¡»am
>

18 
	~<SDL.h
>

20 
	~"Uts.h
"

21 
	~"UtsDebug.h
"

23 
usšg
 
Çme¥aû
 
	g¡d
;

26 
	go¡»am
 &

27 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

28 cÚ¡ 
	gSDL_Ev’t
 & 
	gevt
)

30 
	gevt
.
	gty³
) {

31 
	gSDL_ACTIVEEVENT
:

32 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_AùiveEv’t
&>(
evt
);

34 
	gSDL_KEYUP
:

35 
SDL_KEYDOWN
:

36 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_KeybßrdEv’t
&>(
evt
);

38 
	gSDL_MOUSEMOTION
:

39 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_Mou£MÙiÚEv’t
&>(
evt
);

41 
	gSDL_MOUSEBUTTONUP
:

42 
SDL_MOUSEBUTTONDOWN
:

43 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_Mou£Bu‰ÚEv’t
&>(
evt
);

45 
	gSDL_JOYAXISMOTION
:

46 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_JoyAxisEv’t
&>(
evt
);

48 
	gSDL_JOYBALLMOTION
:

49 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_JoyB®lEv’t
&>(
evt
);

51 
	gSDL_JOYHATMOTION
:

52 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_JoyH©Ev’t
&>(
evt
);

54 
	gSDL_JOYBUTTONUP
:

55 
SDL_JOYBUTTONDOWN
:

56 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_JoyBu‰ÚEv’t
&>(
evt
);

58 
	gSDL_QUIT
:

59 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_Qu™Ev’t
&>(
evt
);

61 
	gSDL_SYSWMEVENT
:

62 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_SysWMEv’t
&>(
evt
);

64 
	gSDL_VIDEORESIZE
:

65 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_ResizeEv’t
&>(
evt
);

67 
	gSDL_VIDEOEXPOSE
:

68 
os
 << 
»š‹½»t_ÿ¡
<cÚ¡ 
SDL_Expo£Ev’t
&>(
evt
);

70 
	gSDL_USEREVENT
:

71 
os
 << "User Event";

74 
os
 << "UnknowÀev’t: " << 
evt
.
ty³
;

75  
	gos
;

78  
	gos
;

82 
	go¡»am
 &

83 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

84 cÚ¡ 
	gSDL_AùiveEv’t
 & 
	gevt
)

86 
	gos
 << "{SDL_ACTIVE_EVENT, gaš = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	ggaš
)

87 << ", s‹ = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	g¡©e
) << "}";

88  
	gos
;

92 
	go¡»am
 &

93 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

94 cÚ¡ 
	gSDL_KeybßrdEv’t
 & 
	gevt
)

96 
	gos
 << "{";

97 ià(
	gSDL_KEYDOWN
 =ğ
evt
.
ty³
) {

98 
os
 << "SDL_KEYDOWN";

99 } ià(
	gSDL_KEYUP
 =ğ
evt
.
ty³
) {

100 
os
 << "SDL_KEYUP";

102 
	gos
 << "UÃx³ùed v®uty³: " << 
	gevt
.
	gty³
 << "}";

103  
	gos
;

105 
	gos
 << ", state";

106 ià(
	gSDL_PRESSED
 =ğ
evt
.
¡©e
) {

107 
os
 << " = SDL_PRESSED";

108 } ià(
	gSDL_RELEASED
 =ğ
evt
.
¡©e
) {

109 
os
 << " = SDL_RELEASED";

111 
	gos
 << " = ??" << 
	gevt
.
	g¡©e
;

113 
	gos
 << ", SDL_keysym: " << 
	gevt
.
	gkeysym
 << "}";

114  
	gos
;

118 
	go¡»am
 &

119 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

120 cÚ¡ 
	gSDL_keysym
 & 
	gks
)

123 
	gos
 << "{sÿncodğ" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gks
.
	gsÿncode
)

124 << ", sym = " << 
	gks
.
	gsym
 << ", mod = " << ks.
	gmod
 << ", unicodğ" << ks.
	gunicode
 << "}";

125  
	gos
;

129 
	go¡»am
 &

130 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

131 cÚ¡ 
	gSDL_Mou£MÙiÚEv’t
 & 
	gevt
)

133 
	gos
 << "{SDL_MOUSEMOTION, s‹ = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	g¡©e
)

134 << ", (x,yèğ(" << 
	gevt
.
	gx
 << "," <<ƒvt.
	gy
 << ")"

135 << ", (x»l,y»lèğ(" << 
	gevt
.
	gx»l
 << "," <<ƒvt.
	gy»l
 << ")}";

136  
	gos
;

140 
	go¡»am
 &

141 
	gİ”©Ü
 << (
	go¡»am
 & 
	gos
,

142 cÚ¡ 
	gSDL_Mou£Bu‰ÚEv’t
 & 
	gevt
)

144 
	gos
 << "{SDL_MOUSEBUTTON,ype = ";

145 ià(
	gSDL_MOUSEBUTTONDOWN
 =ğ
evt
.
ty³
) {

146 
os
 << "DOWN";

147 } ià(
	gSDL_MOUSEBUTTONUP
 =ğ
evt
.
ty³
) {

148 
os
 << "UP";

150 
	gos
 << "??" << 
	gevt
.
	gty³
 << "}";

151  
	gos
;

153 
	gos
 << ", bu‰Ú = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gbu‰Ú
) << ", state = ";

154 ià(
	gSDL_PRESSED
 =ğ
evt
.
¡©e
) {

155 
os
 << "SDL_PRESSED";

156 } ià(
	gSDL_RELEASED
 =ğ
evt
.
¡©e
) {

157 
os
 << "SDL_RELEASED";

159 
	gos
 << "??" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	g¡©e
);

161 
	gos
 << ", (x,yèğ(" << 
	gevt
.
	gx
 << "," <<ƒvt.
	gy
 << ")}";

162  
	gos
;

166 
	go¡»am
 &

167 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

168 cÚ¡ 
	gSDL_JoyAxisEv’t
 & 
	gevt
)

170 
	gos
 << "{SDL_JOYAXIS, which = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gwhich
)

171 << ",‡xi ğ" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gaxis
è<< ", v®uğ" <<ƒvt.
	gv®ue
 << "}";

172  
	gos
;

176 
	go¡»am
 &

177 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

178 cÚ¡ 
	gSDL_JoyB®lEv’t
 & 
	gevt
)

180 
	gos
 << "{SDL_JOYBALLMOTION, which = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gwhich
)

181 << ", b®Èğ" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gb®l
)

182 << ", (x»l,y»lèğ" << "(" << 
	gevt
.
	gx»l
 << "," <<ƒvt.
	gy»l
 << ")}";

183  
	gos
;

187 
	go¡»am
 &

188 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

189 cÚ¡ 
	gSDL_JoyH©Ev’t
 & 
	gevt
)

191 
	gos
 << "{SDL_JOYHATEVENT, which = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gwhich
)

192 << ", h© = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gh©
)

193 << ", v®uğ" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gv®ue
) << "}";

194  
	gos
;

198 
	go¡»am
 &

199 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
,

200 cÚ¡ 
	gSDL_JoyBu‰ÚEv’t
 & 
	gevt
)

202 ià(
	gSDL_JOYBUTTONDOWN
 =ğ
evt
.
ty³
) {

203 
os
 << "{SDL_JOYBUTTONDOWN, ";

204 } ià(
	gSDL_JOYBUTTONUP
 =ğ
evt
.
ty³
) {

205 
os
 << "{SDL_JOYBUTTONUP, ";

207 
	gos
 << "{??unknowÀ" << 
	gevt
.
	gty³
;

208  
	gos
;

210 
	gos
 << "{SDL_JOYBUTTONEVENT, which = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gwhich
)

211 << ", bu‰Ú = " << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	gbu‰Ú
) << ", state = ";

212 ià(
	gSDL_PRESSED
 =ğ
evt
.
¡©e
) {

213 
os
 << "SDL_PRESSED}";

214 } ià(
	gSDL_RELEASED
 =ğ
evt
.
¡©e
) {

215 
os
 << "SDL_RELEASED}";

217 
	gos
 << "??" << 
	g¡©ic_ÿ¡
<
	gušt16_t
>(
	gevt
.
	g¡©e
) << "}";

219  
	gos
;

223 
	go¡»am
 &

224 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gSDL_Qu™Ev’t
 &)

226 
	gos
 << "{SDL_QUITEVENT}";

227  
	gos
;

230 
	go¡»am
 &

231 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gSDL_SysWMEv’t
 &)

233 
	gos
 << "{SDL_SYSWMEVENT}";

234  
	gos
;

237 
	go¡»am
 &

238 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gSDL_ResizeEv’t
 &
	gevt
)

240 
	gos
 << "{SDL_RESIZE_EVENT, (w,hèğ(" << 
	gevt
.
	gw
 << "," <<ƒvt.
	gh
 << ")}";

241  
	gos
;

244 
	go¡»am
 &

245 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gSDL_Expo£Ev’t
 &)

247 
	gos
 << "{SDL_EXPOSEEVENT}";

248  
	gos
;

251 
	go¡»am
 &

252 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gSDL_Reù
 & 
	g»ù
)

254 
	gos
 << "(x,y,h,wèğ(" << 
	g»ù
.
	gx
 << "," <<„eù.
	gy
 << "," <<„eù.
	gh
 << "," <<„eù.
	gw
 << ")";

255  
	gos
;

258 
	go¡»am
 &

259 
	gİ”©Ü
<< (
	go¡»am
 & 
	gos
, cÚ¡ 
	gPošt
 & 
	gp
)

261 
	gos
 << "(x,yèğ(" << 
	gp
.
	gx
 << "," <<….
	gy
 << ")";

262  
	gos
;

	@UtilsDebug.h

18 #´agm¨
Úû


19 #iâdeà
UTILS_DEBUG_H


20 
	#UTILS_DEBUG_H


	)

22 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Ev’t
 &);

23 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_AùiveEv’t
 &);

24 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_KeybßrdEv’t
 &);

25 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_keysym
 &);

26 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Mou£MÙiÚEv’t
 &);

27 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Mou£Bu‰ÚEv’t
 &);

28 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_JoyAxisEv’t
 &);

29 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_JoyB®lEv’t
 &);

30 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_JoyH©Ev’t
 &);

31 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_JoyBu‰ÚEv’t
 &);

32 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Qu™Ev’t
 &);

33 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_SysWMEv’t
 &);

34 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_ResizeEv’t
 &);

35 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Expo£Ev’t
 &);

36 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
SDL_Reù
 &);

37 
¡d
::
o¡»am
 & 
İ”©Ü
<< (¡d::o¡»am &, cÚ¡ 
Pošt
 &);

	@UtilsFileSystem.cpp

24 
	~"UtsFeSy¡em.h
"

26 
	~<sys/ty³s.h
>

27 
	~<sys/¡©.h
>

28 
	~<dœ’t.h
>

29 
	~<”ºo.h
>

30 
	~<f¡»am
>

31 
	~<¡dlib.h
>

33 #iâdeà
_WIN32


34 
	~<uni¡d.h
>

40 
boŞ
 
dœExi¡s
(
¡d
::
¡ršg
 
·th
) {

41 
¡©
 
¡
;

42  (
¡©
(
·th
.
c_¡r
(), &
¡
) == 0);

49 
ü—‹Dœ
(
¡d
::
¡ršg
 
·th
) {

51 #iâdeà
_WIN32


53 
mkdœ
(
·th
.
c_¡r
(), 
S_IRWXU
 | 
S_IRWXG
 | 
S_IRWXO
);

56 #ifdeà
_WIN32


58 
	g¡d
::
¡ršg
 
syscmd
 = "mkdœ " + 
·th
;

59 
sy¡em
(
syscmd
.
c_¡r
());

67 
boŞ
 
feExi¡s
(
¡d
::
¡ršg
 
f’ame
) {

68 
boŞ
 
exi¡s
;

70 
	g¡d
::
if¡»am
 
šfe
(
f’ame
.
c_¡r
());

71 
	gexi¡s
 = 
šfe
.
is_İ’
();

72 ià(
	gšfe
.
is_İ’
()èšfe.
şo£
();

74  
	gexi¡s
;

80 
g‘FeLi¡
(
¡d
::
¡ršg
 
dœ
, std::¡ršg 
ext
, std::
veùÜ
<¡d::¡ršg> &
fes
) {

82 
DIR
 *
dp
;

83 
dœ’t
 *
	gdœp
;

85 if((
	gdp
 = 
İ’dœ
(
dœ
.
c_¡r
())è=ğ
NULL
) {

87  
”ºo
;

90 
size_t
 
	gex’
 = 
ext
.
Ëngth
();

91 (
	gdœp
 = 
»addœ
(
dp
)è!ğ
NULL
) {

93 
¡d
::
¡ršg
 
f’ame
 = std::¡ršg(
dœp
->
d_Çme
);

94 if(
	gf’ame
.
Ëngth
(è> 
	gex’
) {

95 if(
	gf’ame
.
sub¡r
(
f’ame
.
Ëngth
()-
ex’
,ex’è=ğ
ext
) {

96 
fes
.
push_back
(
f’ame
);

100 
şo£dœ
(
dp
);

107 
g‘DœLi¡
(
¡d
::
¡ršg
 
dœ
, std::
veùÜ
<¡d::¡ršg> &
dœs
) {

109 
DIR
 *
dp
;

110 
dœ’t
 *
	gdœp
;

111 
¡©
 
	g¡
;

113 if((
	gdp
 = 
İ’dœ
(
dœ
.
c_¡r
())è=ğ
NULL
) {

115  
”ºo
;

118 (
	gdœp
 = 
»addœ
(
dp
)è!ğ
NULL
) {

120 
¡d
::
¡ršg
 
dœeùÜy
 = std::¡ršg(
dœp
->
d_Çme
);

121 
	g¡d
::
¡ršg
 
mod_dœ
 = 
dœ
 + "/" + 
dœeùÜy
;

122 ià((
¡©
(
mod_dœ
.
c_¡r
(), &
¡
) != -1)

123 && 
S_ISDIR
(
¡
.
¡_mode
)

124 && 
dœeùÜy
 != "."

125 && 
dœeùÜy
 != ".."

128 
dœs
.
push_back
(
dœeùÜy
);

131 
şo£dœ
(
dp
);

	@UtilsFileSystem.h

25 #´agm¨
Úû


26 #iâdeà
UTILS_FILE_SYSTEM_H


27 
	#UTILS_FILE_SYSTEM_H


	)

29 
	~<¡ršg
>

30 
	~<veùÜ
>

32 
boŞ
 
dœExi¡s
(
¡d
::
¡ršg
 
·th
);

33 
ü—‹Dœ
(
¡d
::
¡ršg
 
·th
);

34 
boŞ
 
feExi¡s
(
¡d
::
¡ršg
 
f’ame
);

35 
g‘FeLi¡
(
¡d
::
¡ršg
 
dœ
, std::¡ršg 
ext
, std::
veùÜ
<¡d::¡ršg> &
fes
);

36 
g‘DœLi¡
(
¡d
::
¡ršg
 
dœ
, std::
veùÜ
<¡d::¡ršg> &
dœs
);

	@UtilsMath.h

18 #´agm¨
Úû


19 #iâdeà
UTILS_MATH_H


20 
	#UTILS_MATH_H
 1

	)

22 
	~<ÿs£¹
>

23 
	~<c¡dlib
>

24 
	~<®gÜ™hm
>

31 
	g‹m¶©e
 <
ty³Çme
 
	gTy1_
,y³Çm
	gTy2_
>

32 
šlše
 
	$şampFloÜ
(
Ty1_
& 
v®ue
, 
Ty2_
 
æoÜ
) {

33 
v®ue
 = 
¡d
::
max
<
Ty1_
>(v®ue, 
æoÜ
);

34 
	}
}

41 
	g‹m¶©e
 <
ty³Çme
 
	gTy1_
,y³Çm
	gTy2_
>

42 
šlše
 
	$şampCe
(
Ty1_
& 
v®ue
, 
Ty2_
 
ûšg
) {

43 
v®ue
 = 
¡d
::
mš
<
Ty1_
>(v®ue, 
ûšg
);

44 
	}
}

51 
	g‹m¶©e
 <
ty³Çme
 
	gTy1_
,y³Çm
	gTy2_
>

52 
šlše
 
	$şamp
(
Ty1_
& 
v®ue
, 
Ty2_
 
æoÜ
, Ty2_ 
ûšg
) {

53 
	`şampFloÜ
(
v®ue
, 
æoÜ
);

54 
	`şampCe
(
v®ue
, 
ûšg
);

55 
	}
}

60 
	g‹m¶©e
 <
ty³Çme
 
	gTy_
>

61 
šlše
 
Ty_
 
	$signum
(
Ty_
 
v®ue
)

63  (
	`Ty_
(0è< 
v®ue
) - (value < Ty_(0));

64 
	}
}

69 
šlše
 
	$¿ndB‘w“n
(
mšV®
, 
maxV®
)

71 ià(
mšV®
 =ğ
maxV®
)  minVal;

72 
d
 = 
maxV®
 - 
mšV®
;

73  
mšV®
 + (
	`¿nd
(è% (
d
 + 
	`signum
(d)));

74 
	}
}

79 
šlše
 
boŞ
 
	$³rûÁChªû
(
³rûÁ
)

81  
	`¿nd
(è% 100 < 
³rûÁ
;

82 
	}
}

	@UtilsParsing.cpp

20 
	~"UtsP¬sšg.h
"

21 
	~"S‘tšgs.h
"

22 
	~<c¡dlib
>

23 
	~<f¡»am
>

24 
	~<s¡»am
>

25 
	~<io¡»am
>

26 
	~<®gÜ™hm
>

27 
	~<¡ršg
>

29 
usšg
 
Çme¥aû
 
	g¡d
;

35 
boŞ
 
	$isIÁ
(cÚ¡ 
¡ršg
& 
s
) {

36 ià(
s
 =ğ""è 
çl£
;

38 
¡¬t
=0;

41 ià(
s
.
	`©
(0è=ğ'-'è
¡¬t
=1;

43 
i
=
¡¬t
; i<
s
.
	`Ëngth
(); i++) {

45 ià(
s
.
	`©
(
i
è< 48 || s.©(iè> 57è 
çl£
;

47  
Œue
;

48 
	}
}

53 
¡ršg
 
	$Œim
(cÚ¡ 
¡ršg
& 
s
, 
c
) {

54 ià(
s
.
	`Ëngth
() == 0)  "";

56 
fœ¡
 = 0;

57 
Ï¡
 = 
s
.
	`Ëngth
()-1;

59 
s
.
	`©
(
fœ¡
è=ğ
c
 && fœ¡ < s.
	`Ëngth
()-1) {

60 
fœ¡
++;

62 
s
.
	`©
(
Ï¡
è=ğ
c
 &&†a¡ >ğ
fœ¡
 &&†ast > 0) {

63 
Ï¡
--;

65 ià(
fœ¡
 <ğ
Ï¡
è 
s
.
	`sub¡r
(first,last-first+1);

67 
	}
}

72 
·r£_du¿tiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
s
) {

73 
v®
 = 0;

74 
	g¡d
::
¡ršg
 
suffix
 = "";

75 
	g¡d
::
¡ršg¡»am
 
ss
;

76 
	gss
.
¡r
(
s
);

77 
	gss
 >> 
	gv®
;

78 
	gss
 >> 
	gsuffix
;

80 ià(
	gsuffix
 == "s")

81 
v®
 *ğ
MAX_FRAMES_PER_SEC
;

82 ià(
	gsuffix
 == "ms")

83 
v®
 = (v®/1000.0f)*
MAX_FRAMES_PER_SEC
;

85  
	gv®
;

88 
¡ršg
 
	$·r£_£ùiÚ_t™Ë
(cÚ¡ 
¡ršg
& 
s
) {

89 
size_t
 
b¿ck‘
 = 
s
.
	`fšd_fœ¡_of
(']');

90 ià(
b¿ck‘
 =ğ
¡ršg
::
Åos
)  "";

91  
s
.
	`sub¡r
(1, 
b¿ck‘
-1);

92 
	}
}

94 
	$·r£_key_·œ
(cÚ¡ 
¡ršg
& 
s
, sŒšg &
key
, sŒšg &
v®
) {

95 
size_t
 
£·¿tÜ
 = 
s
.
	`fšd_fœ¡_of
('=');

96 ià(
£·¿tÜ
 =ğ
¡ršg
::
Åos
) {

97 
key
 = "";

98 
v®
 = "";

101 
key
 = 
s
.
	`sub¡r
(0, 
£·¿tÜ
);

102 
v®
 = 
s
.
	`sub¡r
(
£·¿tÜ
+1, s.
	`Ëngth
());

103 
key
 = 
	`Œim
(key, ' ');

104 
v®
 = 
	`Œim
(val, ' ');

105 
	}
}

113 
	$—tFœ¡IÁ
(
¡ršg
 &
s
, 
£·¿tÜ
) {

114 
size_t
 
£µos
 = 
s
.
	`fšd_fœ¡_of
(
£·¿tÜ
);

115 ià(
£µos
 =ğ
¡ršg
::
Åos
) {

116 
s
 = "";

119 
num
 = 
	`toIÁ
(
s
.
	`sub¡r
(0, 
£µos
));

120 
s
 = s.
	`sub¡r
(
£µos
+1, s.
	`Ëngth
());

121  
num
;

122 
	}
}

124 
¡ršg
 
	$—tFœ¡SŒšg
(
¡ršg
 &
s
, 
£·¿tÜ
) {

125 
size_t
 
£µos
 = 
s
.
	`fšd_fœ¡_of
(
£·¿tÜ
);

126 ià(
£µos
 =ğ
¡ršg
::
Åos
)  "";

127 
¡ršg
 
outs
 = 
s
.
	`sub¡r
(0, 
£µos
);

128 
s
 = s.
	`sub¡r
(
£µos
+1, s.
	`Ëngth
());

129  
outs
;

130 
	}
}

133 
¡ršg
 
	$g‘NextTok’
(cÚ¡ 
¡ršg
& 
s
, 
size_t
 &
cursÜ
, 
£·¿tÜ
) {

134 
size_t
 
£µos
 = 
s
.
	`fšd_fœ¡_of
(
£·¿tÜ
, 
cursÜ
);

135 ià(
£µos
 =ğ
¡ršg
::
Åos
) {

136 
cursÜ
 = 
¡ršg
::
Åos
;

139 
¡ršg
 
outs
 = 
s
.
	`sub¡r
(
cursÜ
, 
£µos
-cursor);

140 
cursÜ
 = 
£µos
+1;

141  
outs
;

142 
	}
}

145 
¡ršg
 
	$¡rC¬rŸgeR‘uº
(cÚ¡ 
¡ršg
& 
lše
) {

146 ià(
lše
.
	`Ëngth
() > 0) {

147 ià('\r' =ğ
lše
.
	`©
Öše.
	`Ëngth
()-1)) {

148  
lše
.
	`sub¡r
(0,†še.
	`Ëngth
()-1);

151  
lše
;

152 
	}
}

154 
¡ršg
 
	$g‘Lše
(
if¡»am
 &
šfe
) {

155 
¡ršg
 
lše
;

157 ià(!
	`g‘lše
(
šfe
, 
lše
))

159 
lše
 = 
	`¡rC¬rŸgeR‘uº
(line);

160  
lše
;

161 
	}
}

163 
boŞ
 
	$ŒyP¬£V®ue
(cÚ¡ 
ty³_šfo
 & 
ty³
, cÚ¡ * 
v®ue
, * 
ouut
) {

164  
	`ŒyP¬£V®ue
(
ty³
, 
	`¡ršg
(
v®ue
), 
ouut
);

165 
	}
}

167 
boŞ
 
ŒyP¬£V®ue
(cÚ¡ 
ty³_šfo
 & 
ty³
, cÚ¡ 
¡d
::
¡ršg
 & 
v®ue
, * 
ouut
) {

169 
¡ršg¡»am
 
¡»am
(
v®ue
);

172 ià(
	gty³
 =ğ
ty³id
(
boŞ
)) {

173 
¡»am
>>(
boŞ
&)*((boŞ*)
ouut
);

174 } ià(
	gty³
 =ğ
ty³id
()) {

175 
¡»am
>>(&)*((*)
ouut
);

176 } ià(
	gty³
 =ğ
ty³id
()) {

177 
¡»am
>>(&)*((*)
ouut
);

178 } ià(
	gty³
 =ğ
ty³id
()) {

179 
¡»am
>>(&)*((*)
ouut
);

180 } ià(
	gty³
 =ğ
ty³id
()) {

181 
¡»am
>>(&)*((*)
ouut
);

182 } ià(
	gty³
 =ğ
ty³id
()) {

183 
¡»am
>>(&)*((*)
ouut
);

184 } ià(
	gty³
 =ğ
ty³id
()) {

185 
¡»am
>>(&)*((*)
ouut
);

186 } ià(
	gty³
 =ğ
ty³id
()) {

187 
¡»am
>>(&)*((*)
ouut
);

188 } ià(
	gty³
 =ğ
ty³id
(
¡d
::
¡ršg
)) {

189 *((
¡ršg
 *)
ouut
èğ
v®ue
;

191 
	gcout
 << 
	g__FUNCTION__
 << ":‡„equœedy³ i nÙ defšed!" << 
	g’dl
;

192  
	gçl£
;

195  !
	g¡»am
.
ç
();

198 
	g¡d
::
¡ršg
 
	$toSŒšg
(cÚ¡ 
ty³_šfo
 & 
ty³
, * 
v®ue
) {

200 
¡ršg¡»am
 
¡»am
;

203 ià(
ty³
 =ğ
	`ty³id
(
boŞ
)) {

204 
¡»am
<<*((
boŞ
*)
v®ue
);

205 } ià(
ty³
 =ğ
	`ty³id
()) {

206 
¡»am
<<*((*)
v®ue
);

207 } ià(
ty³
 =ğ
	`ty³id
()) {

208 
¡»am
<<*((*)
v®ue
);

209 } ià(
ty³
 =ğ
	`ty³id
()) {

210 
¡»am
<<*((*)
v®ue
);

211 } ià(
ty³
 =ğ
	`ty³id
()) {

212 
¡»am
<<*((*)
v®ue
);

213 } ià(
ty³
 =ğ
	`ty³id
()) {

214 
¡»am
<<*((*)
v®ue
);

215 } ià(
ty³
 =ğ
	`ty³id
()) {

216 
¡»am
<<*((*)
v®ue
);

217 } ià(
ty³
 =ğ
	`ty³id
()) {

218 
¡»am
<<*((*)
v®ue
);

219 } ià(
ty³
 =ğ
	`ty³id
(
¡d
::
¡ršg
)) {

220  (
¡ršg
 &)*((¡ršg *)
v®ue
);

222 
cout
 << 
__FUNCTION__
 << ":‡„equœedy³ i nÙ defšed!" << 
’dl
;

226  
¡»am
.
	`¡r
();

227 
	}
}

229 
	$toIÁ
(cÚ¡ 
¡ršg
& 
s
, 
deçuÉ_v®ue
) {

230 
»suÉ
;

231 ià(!(
	`¡ršg¡»am
(
s
è>> 
»suÉ
))

232 
»suÉ
 = 
deçuÉ_v®ue
;

233  
»suÉ
;

234 
	}
}

236 
	g¡ršg
 &
Œim_right_š¶aû
(
¡ršg
 &
s
, cÚ¡ sŒšg& 
d–im™”s
 = " \f\n\r\t\v") {

237  
s
.
”a£
(s.
fšd_Ï¡_nÙ_of
(
d–im™”s
) + 1);

240 
	g¡ršg
& 
Œim_Ëá_š¶aû
(
¡ršg
 &
s
, cÚ¡ sŒšg& 
d–im™”s
 = " \f\n\r\t\v" ) {

241  
s
.
”a£
(0, s.
fšd_fœ¡_nÙ_of
(
d–im™”s
));

244 
	g¡ršg
 &
Œim
(
¡ršg
 &
s
, cÚ¡ sŒšg& 
d–im™”s
 = " \f\n\r\t\v") {

245  
Œim_Ëá_š¶aû
(
Œim_right_š¶aû
(
s
, 
d–im™”s
), delimiters);

248 
boŞ
 
toBoŞ
(
¡d
::
¡ršg
 
v®ue
) {

249 
Œim
(
v®ue
);

251 
	g¡d
::
ŒªsfÜm
(
v®ue
.
begš
(), v®ue.
’d
(), v®ue.begš(), ::
tŞow”
);

252 ià(
	gv®ue
 =ğ"Œue"è 
Œue
;

253 ià(
	gv®ue
 =ğ"yes"è 
Œue
;

254 ià(
	gv®ue
 =ğ"çl£"è 
çl£
;

255 ià(
	gv®ue
 =ğ"no"è 
çl£
;

257 
årštf
(
¡d”r
, "% % dÛ¢'ˆknow howØhªdË %s\n", 
__FILE__
, 
__FUNCTION__
, 
v®ue
.
c_¡r
());

258  
	gçl£
;

	@UtilsParsing.h

20 #´agm¨
Úû


21 #iâdeà
UTILS_PARSING_H


22 
	#UTILS_PARSING_H


	)

24 
	~<¡ršg
>

25 
	~<ty³šfo
>

26 
	~<io¡»am
>

28 
boŞ
 
isIÁ
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

29 
	g¡d
::
¡ršg
 
Œim
(cÚ¡ 
¡d
::¡ršg& 
s
, 
c
);

30 
·r£_du¿tiÚ
(cÚ¡ 
¡d
::
¡ršg
& 
s
);

31 
	g¡d
::
¡ršg
 
·r£_£ùiÚ_t™Ë
(cÚ¡ 
¡d
::¡ršg& 
s
);

32 
·r£_key_·œ
(cÚ¡ 
¡d
::
¡ršg
& 
s
, std::¡ršg& 
key
, std::¡ršg& 
v®
);

33 
—tFœ¡IÁ
(
¡d
::
¡ršg
& 
s
, 
£·¿tÜ
);

34 
	g¡d
::
¡ršg
 
—tFœ¡SŒšg
(
¡d
::¡ršg& 
s
, 
£·¿tÜ
);

35 
	g¡d
::
¡ršg
 
g‘NextTok’
(cÚ¡ 
¡d
::¡ršg& 
s
, 
size_t
& 
cursÜ
, 
£·¿tÜ
);

36 
	g¡d
::
¡ršg
 
¡rC¬rŸgeR‘uº
(cÚ¡ 
¡d
::¡ršg& 
lše
);

37 
	g¡d
::
¡ršg
 
g‘Lše
(
¡d
::
if¡»am
& 
šfe
);

38 
boŞ
 
ŒyP¬£V®ue
(cÚ¡ 
¡d
::
ty³_šfo
 & 
ty³
, cÚ¡ * 
v®ue
, * 
ouut
);

39 
boŞ
 
ŒyP¬£V®ue
(cÚ¡ 
¡d
::
ty³_šfo
 & 
ty³
, cÚ¡ std::
¡ršg
 & 
v®ue
, * 
ouut
);

40 
	g¡d
::
¡ršg
 
toSŒšg
(cÚ¡ 
¡d
::
ty³_šfo
 & 
ty³
, * 
v®ue
);

41 
toIÁ
(cÚ¡ 
¡d
::
¡ršg
& 
s
, 
deçuÉ_v®ue
 = 0);

42 
boŞ
 
toBoŞ
(
¡d
::
¡ršg
 
v®ue
);

	@Widget.cpp

18 
	~"Widg‘.h
"

20 
	gWidg‘
::
	$Widg‘
()

21 : 
	`»nd”_to_®pha
(
çl£
)

22 , 
	$pos
()

24 
pos
.
x
 =…os.
y
 =…os.
w
 =…os.
h
 = 0;

25 
	}
}

27 
	gWidg‘
::~
	$Widg‘
()

28 {
	}
}

	@Widget.h

19 #´agm¨
Úû


20 #iâdeà
WIDGET_H


21 
	#WIDGET_H


	)

26 
	~<SDL.h
>

28 şas 
	cWidg‘
 {

29 
	mpublic
:

30 
Widg‘
();

32 
	mvœtu®
 ~
Widg‘
();

33 
vœtu®
 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
) = 0;

34 
boŞ
 
	m»nd”_to_®pha
;

35 
SDL_Reù
 
	mpos
;

36 
	m´iv©e
:

	@WidgetButton.cpp

23 
	~"Widg‘Bu‰Ú.h
"

24 
	~"Sh¬edResourûs.h
"

25 
	~"SDL_gfxBl™Func.h
"

27 
usšg
 
Çme¥aû
 
	g¡d
;

29 
	gWidg‘Bu‰Ú
::
Widg‘Bu‰Ú
(cÚ¡ 
¡d
::
¡ršg
& 
_feName
)

30 : 
Widg‘
()

31 , 
feName
(
_feName
)

32 , 
bu‰Ús
(
NULL
)

33 , 
şick
(
NULL
)

34 , 
wÏb–
()

35 , 
cŞÜ_nÜm®
(
fÚt
->
g‘CŞÜ
("widget_normal"))

36 , 
cŞÜ_di§bËd
(
fÚt
->
g‘CŞÜ
("widget_disabled"))

37 , 
t_buf
()

38 , 
t_Ãw
()

39 , 
t
(
Ãw
 
Widg‘ToŞt
())

40 , 
Ïb–
("")

41 , 
toŞt
("")

42 , 
’abËd
(
Œue
)

43 , 
´es£d
(
çl£
)

44 , 
	$hov”
(
çl£
)

46 
pos
.
x
 =…os.
y
 =…os.
w
 =…os.
h
 = 0;

47 
	`lßdA¹
();

48 
pos
.
w
 = 
bu‰Ús
->w;

49 
pos
.
h
 = (
bu‰Ús
->h / 4);

50 
	}
}

52 
	gWidg‘Bu‰Ú
::
	$lßdA¹
() {

55 
SDL_Surçû
 *
ş—nup
 = 
	`IMG_Lßd
(
feName
.
	`c_¡r
());

57 if(!
ş—nup
) {

58 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

59 
	`SDL_Qu™
();

60 
	`ex™
(1);

64 
bu‰Ús
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(
ş—nup
);

65 
	`SDL_F»eSurçû
(
ş—nup
);

66 
	}
}

68 
boŞ
 
	gWidg‘Bu‰Ú
::
	$checkClick
() {

69 ià(
	`checkClick
(
š±
->
mou£
.
x
,š±->mou£.
y
))

70  
Œue
;

72  
çl£
;

73 
	}
}

79 
boŞ
 
	gWidg‘Bu‰Ú
::
	$checkClick
(
x
, 
y
) {

80 
Pošt
 
	`mou£
(
x
,
y
);

83 ià(
	`isW™hš
(
pos
, 
mou£
)) {

84 
hov”
 = 
Œue
;

86 
hov”
 = 
çl£
;

90 
t_Ãw
 = 
	`checkToŞt
(
mou£
);

93 ià(!
’abËd
è 
çl£
;

96 ià(
š±
->
lock
[
MAIN1
]è 
çl£
;

99 ià(
´es£d
 && !
š±
->
lock
[
MAIN1
]) {

100 
´es£d
 = 
çl£
;

102 ià(
	`isW™hš
(
pos
, 
mou£
)) {

105  
Œue
;

109 
´es£d
 = 
çl£
;

112 ià(
š±
->
´essšg
[
MAIN1
]) {

113 ià(
	`isW™hš
(
pos
, 
mou£
)) {

115 
š±
->
lock
[
MAIN1
] = 
Œue
;

116 
´es£d
 = 
Œue
;

120  
çl£
;

122 
	}
}

124 
	gWidg‘Bu‰Ú
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

125 ià(
rg‘
 =ğ
NULL
) {

126 
rg‘
 = 
sü“n
;

128 
SDL_Reù
 
¤c
;

129 
¤c
.
x
 = 0;

130 
¤c
.
w
 = 
pos
.w;

131 
¤c
.
h
 = 
pos
.h;

135 ià(!
’abËd
)

136 
¤c
.
y
 = 
BUTTON_GFX_DISABLED
 * 
pos
.
h
;

137 ià(
´es£d
)

138 
¤c
.
y
 = 
BUTTON_GFX_PRESSED
 * 
pos
.
h
;

139 ià(
hov”
)

140 
¤c
.
y
 = 
BUTTON_GFX_HOVER
 * 
pos
.
h
;

142 
¤c
.
y
 = 
BUTTON_GFX_NORMAL
 * 
pos
.
h
;

145 
SDL_Reù
 
off£t
 = 
pos
;

147 ià(
»nd”_to_®pha
)

148 
	`SDL_gfxBl™RGBA
(
bu‰Ús
, &
¤c
, 
rg‘
, &
off£t
);

150 
	`SDL_Bl™Surçû
(
bu‰Ús
, &
¤c
, 
rg‘
, &
off£t
);

152 
wÏb–
.
	`»nd”
(
rg‘
);

156 ià(!
t_Ãw
.
	`isEm±y
()) {

157 ià(!
t_Ãw
.
	`com·»
(&
t_buf
)) {

158 
t_buf
.
	`ş—r
();

159 
t_buf
 = 
t_Ãw
;

161 
t
->
	`»nd”
(
t_buf
, 
š±
->
mou£
, 
STYLE_FLOAT
, 
rg‘
);

163 
	}
}

168 
	gWidg‘Bu‰Ú
::
	$»äesh
() {

169 ià(
Ïb–
 != "") {

171 
fÚt_x
 = 
pos
.
x
 + (pos.
w
/2);

172 
fÚt_y
 = 
pos
.
y
 + (pos.
h
/2);

174 ià(
’abËd
)

175 
wÏb–
.
	`£t
(
fÚt_x
, 
fÚt_y
, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
Ïb–
, 
cŞÜ_nÜm®
);

177 
wÏb–
.
	`£t
(
fÚt_x
, 
fÚt_y
, 
JUSTIFY_CENTER
, 
VALIGN_CENTER
, 
Ïb–
, 
cŞÜ_di§bËd
);

179 
	}
}

186 
ToŞtD©a
 
	gWidg‘Bu‰Ú
::
	$checkToŞt
(
Pošt
 
mou£
) {

187 
ToŞtD©a
 
_t
;

189 ià(
	`isW™hš
(
pos
, 
mou£
è&& 
toŞt
 != "") {

190 
_t
.
	`addText
(
toŞt
);

193  
_t
;

194 
	}
}

196 
	gWidg‘Bu‰Ú
::~
	$Widg‘Bu‰Ú
() {

197 
	`SDL_F»eSurçû
(
bu‰Ús
);

198 
t_buf
.
	`ş—r
();

199 
d–‘e
 
t
;

200 
	}
}

	@WidgetButton.h

23 #´agm¨
Úû


24 #iâdeà
WIDGET_BUTTON_H


25 
	#WIDGET_BUTTON_H


	)

27 
	~"Widg‘.h
"

28 
	~"Widg‘Lab–.h
"

29 
	~"Widg‘ToŞt.h
"

31 
	~<SDL.h
>

32 
	~<SDL_image.h
>

33 
	~<SDL_mix”.h
>

35 
	~<¡ršg
>

38 cÚ¡ 
	gBUTTON_GFX_NORMAL
 = 0;

39 cÚ¡ 
	gBUTTON_GFX_PRESSED
 = 1;

40 cÚ¡ 
	gBUTTON_GFX_HOVER
 = 2;

41 cÚ¡ 
	gBUTTON_GFX_DISABLED
 = 3;

43 şas 
	cWidg‘Bu‰Ú
 : 
public
 
Widg‘
 {

44 
´iv©e
:

46 
¡d
::
¡ršg
 
feName
;

48 
SDL_Surçû
 *
	mbu‰Ús
;

49 
Mix_Chunk
 *
	mşick
;

51 
Widg‘Lab–
 
	mwÏb–
;

53 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

54 
SDL_CŞÜ
 
	mcŞÜ_di§bËd
;

56 
ToŞtD©a
 
	mt_buf
;

57 
ToŞtD©a
 
	mt_Ãw
;

58 
Widg‘ToŞt
 *
	mt
;

59 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

61 
	mpublic
:

62 
Widg‘Bu‰Ú
(cÚ¡ 
¡d
::
¡ršg
& 
_feName
);

63 ~
Widg‘Bu‰Ú
();

65 
lßdA¹
();

66 
boŞ
 
checkClick
();

67 
boŞ
 
checkClick
(
x
, 
y
);

68 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

69 
»äesh
();

71 
	m¡d
::
¡ršg
 
Ïb–
;

72 
	m¡d
::
¡ršg
 
toŞt
;

73 
boŞ
 
	m’abËd
;

74 
boŞ
 
	m´es£d
;

75 
boŞ
 
	mhov”
;

	@WidgetCheckBox.cpp

23 
	~<io¡»am
>

24 
	~<¡ršg
>

25 
	~<SDL.h
>

26 
	~<SDL_image.h
>

28 
	~"Widg‘.h
"

29 
	~"Widg‘CheckBox.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"SDL_gfxBl™Func.h
"

33 
usšg
 
Çme¥aû
 
	g¡d
;

35 
	gWidg‘CheckBox
::
	$Widg‘CheckBox
 (cÚ¡ 
¡ršg
 & 
âame
)

36 : 
	`imgFeName
(
âame
),

37 
	`cb
(
NULL
),

38 
	`checked
(
çl£
),

39 
	$´es£d
(
çl£
)

41 
SDL_Surçû
 * 
tmp
 = 
	`IMG_Lßd
(
imgFeName
.
	`c_¡r
());

42 ià(
NULL
 =ğ
tmp
) {

43 
	`årštf
(
¡d”r
, "Could‚ot†oad image \"%s\"ƒrror \"%s\"\n",

44 
imgFeName
.
	`c_¡r
(), 
	`IMG_G‘E¼Ü
());

45 
	`SDL_Qu™
();

46 
	`ex™
(1);

48 
cb
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(
tmp
);

49 
	`SDL_F»eSurçû
(
tmp
);

51 
pos
.
w
 = 
cb
->w;

52 
pos
.
h
 = 
cb
->h / 2;

54 
»nd”_to_®pha
 = 
çl£
;

55 
	}
}

57 
	gWidg‘CheckBox
::~
	$Widg‘CheckBox
 ()

59 
	`SDL_F»eSurçû
(
cb
);

60 
	}
}

62 
	gWidg‘CheckBox
::
	$Check
 ()

64 
checked
 = 
Œue
;

65 
	}
}

67 
	gWidg‘CheckBox
::
	$unCheck
 ()

69 
checked
 = 
çl£
;

70 
	}
}

72 
boŞ
 
	gWidg‘CheckBox
::
	$checkClick
()

74 ià(
	`checkClick
(
š±
->
mou£
.
x
,š±->mou£.
y
))

75  
Œue
;

77  
çl£
;

78 
	}
}

80 
boŞ
 
	gWidg‘CheckBox
::
	$checkClick
 (
x
, 
y
) {

82 
Pošt
 
	`mou£
(
x
,
y
);

85 ià(
š±
->
lock
[
MAIN1
]è 
çl£
;

87 ià(
´es£d
 && !
š±
->
lock
[
MAIN1
]) {

88 
´es£d
 = 
çl£
;

89 ià(
	`isW™hš
(
pos
, 
mou£
)) {

91 
checked
 = !checked;

93  
Œue
;

97 ià(
š±
->
´essšg
[
MAIN1
]) {

98 ià(
	`isW™hš
(
pos
, 
mou£
)) {

99 
´es£d
 = 
Œue
;

100 
š±
->
lock
[
MAIN1
] = 
Œue
;

103  
çl£
;

104 
	}
}

107 
boŞ
 
	gWidg‘CheckBox
::
	$isChecked
 () const

109  
checked
;

110 
	}
}

113 
	gWidg‘CheckBox
::
	$»nd”
 (
SDL_Surçû
 *
rg‘
)

115 ià(
rg‘
 =ğ
NULL
) {

116 
rg‘
 = 
sü“n
;

119 
SDL_Reù
 
¤c
;

120 
¤c
.
x
 = 0;

121 
¤c
.
y
 = 
checked
 ? 
pos
.
h
 : 0;

122 
¤c
.
h
 = 
pos
.h;

123 
¤c
.
w
 = 
pos
.w;

125 ià(
»nd”_to_®pha
)

126 
	`SDL_gfxBl™RGBA
(
cb
, &
¤c
, 
rg‘
, &
pos
);

128 
	`SDL_Bl™Surçû
(
cb
, &
¤c
, 
rg‘
, &
pos
);

129 
	}
}

	@WidgetCheckBox.h

24 #´agm¨
Úû


25 #iâdeà
WIDGET_CHECKBOX_H


26 
	#WIDGET_CHECKBOX_H


	)

28 
şass
 
	gWidg‘
;

30 şas 
	cWidg‘CheckBox
 : 
public
 
Widg‘
 {

31 
public
:

32 
Widg‘CheckBox
 (cÚ¡ 
¡d
::
¡ršg
 & 
âame
);

33 ~
Widg‘CheckBox
 ();

35 
Check
 ();

36 
unCheck
 ();

37 
boŞ
 
checkClick
 ();

38 
boŞ
 
checkClick
 (
x
, 
y
);

39 
boŞ
 
	$isChecked
 () const;

40 
	`»nd”
 (
SDL_Surçû
 *
rg‘
 = 
NULL
);

42 
´iv©e
:

43 
¡d
::
¡ršg
 
imgFeName
;

44 
SDL_Surçû
 * 
cb
;

45 
boŞ
 
checked
;

46 
boŞ
 
´es£d
;

	@WidgetInput.cpp

19 
	~"Widg‘IÅut.h
"

20 
	~"Sh¬edResourûs.h
"

21 
	~"S‘tšgs.h
"

22 
	~"SDL_gfxBl™Func.h
"

24 
usšg
 
Çme¥aû
 
	g¡d
;

27 
	gWidg‘IÅut
::
	$Widg‘IÅut
() {

29 
’abËd
 = 
Œue
;

30 
šFocus
 = 
çl£
;

31 
´es£d
 = 
çl£
;

32 
hov”
 = 
çl£
;

33 
max_ch¬aù”s
 = 20;

35 
	`lßdG¿phics
(
mods
->
	`loÿ‹
("images/menus/input.png"));

38 
pos
.
w
 = 
background
->w;

39 
pos
.
h
 = 
background
->h/2;

41 
cursÜ_äame
 = 0;

43 
»nd”_to_®pha
 = 
çl£
;

45 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("widget_normal");

46 
	}
}

48 
	gWidg‘IÅut
::
	$lßdG¿phics
(cÚ¡ 
¡ršg
& 
f’ame
) {

51 
background
 = 
	`IMG_Lßd
(
f’ame
.
	`c_¡r
());

53 if(!
background
) {

54 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

55 
	`SDL_Qu™
();

56 
	`ex™
(1);

60 
SDL_Surçû
 *
ş—nup
 = 
background
;

61 
background
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(background);

62 
	`SDL_F»eSurçû
(
ş—nup
);

64 
	}
}

66 
	gWidg‘IÅut
::
	$logic
() {

67 ià(
	`logic
(
š±
->
mou£
.
x
,š±->mou£.
y
))

69 
	}
}

71 
boŞ
 
	gWidg‘IÅut
::
	$logic
(
x
, 
y
) {

72 
Pošt
 
	`mou£
(
x
, 
y
);

75 ià(
	`isW™hš
(
pos
, 
mou£
)) {

76 
hov”
 = 
Œue
;

78 
hov”
 = 
çl£
;

81 ià(
	`checkClick
()) {

82 
šFocus
 = 
Œue
;

86 ià(
š±
->
´essšg
[
MAIN1
]) {

87 ià(!
	`isW™hš
(
pos
, 
š±
->
mou£
)) {

88 
šFocus
 = 
çl£
;

92 ià(
šFocus
) {

94 ià(
š±
->
škeys
 != "") {

96 
‹xt
 +ğ
š±
->
škeys
;

97 ià(
‹xt
.
	`Ëngth
(è> 
max_ch¬aù”s
) {

98 
‹xt
 =ext.
	`sub¡r
(0, 
max_ch¬aù”s
);

103 ià(!
š±
->
lock
[
DEL
] && iÅt->
´essšg
[DEL]) {

104 
š±
->
lock
[
DEL
] = 
Œue
;

106 
n
 = 
‹xt
.
	`Ëngth
()-1;

107 
n
 > 0 && ((
‹xt
[n] & 0xc0) == 0x80) )‚--;

108 
‹xt
 =ext.
	`sub¡r
(0, 
n
);

113 
cursÜ_äame
++;

114 ià(
cursÜ_äame
 =ğ
MAX_FRAMES_PER_SEC
+MAX_FRAMES_PER_SEC) cursor_frame = 0;

117  
Œue
;

118 
	}
}

120 
	gWidg‘IÅut
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

121 ià(
rg‘
 =ğ
NULL
) {

122 
rg‘
 = 
sü“n
;

125 
SDL_Reù
 
¤c
;

126 
¤c
.
x
 = 0;

127 
¤c
.
y
 = 0;

128 
¤c
.
w
 = 
pos
.w;

129 
¤c
.
h
 = 
pos
.h;

131 ià(!
šFocus
)

132 
¤c
.
y
 = 0;

134 
¤c
.
y
 = 
pos
.
h
;

136 ià(
»nd”_to_®pha
)

137 
	`SDL_gfxBl™RGBA
(
background
, &
¤c
, 
rg‘
, &
pos
);

139 
	`SDL_Bl™Surçû
(
background
, &
¤c
, 
rg‘
, &
pos
);

141 
fÚt
->
	`£tFÚt
("font_regular");

143 ià(!
šFocus
) {

144 
fÚt
->
	`»nd”
(
‹xt
, 
fÚt_pos
.
x
, fÚt_pos.
y
, 
JUSTIFY_LEFT
, 
rg‘
, 
cŞÜ_nÜm®
);

147 ià(
cursÜ_äame
 < 
MAX_FRAMES_PER_SEC
) {

148 
fÚt
->
	`»nd”Shadowed
(
‹xt
 + "|", 
fÚt_pos
.
x
, fÚt_pos.
y
, 
JUSTIFY_LEFT
, 
rg‘
, 
cŞÜ_nÜm®
);

151 
fÚt
->
	`»nd”Shadowed
(
‹xt
, 
fÚt_pos
.
x
, fÚt_pos.
y
, 
JUSTIFY_LEFT
, 
rg‘
, 
cŞÜ_nÜm®
);

154 
	}
}

156 
	gWidg‘IÅut
::
	$£tPos™iÚ
(
x
, 
y
) {

157 
pos
.
x
 = x;

158 
pos
.
y
 = y;

160 
fÚt
->
	`£tFÚt
("font_regular");

161 
fÚt_pos
.
x
 = 
pos
.x + (
fÚt
->
	`g‘FÚtHeight
()/2);

162 
fÚt_pos
.
y
 = 
pos
.y + (pos.
h
/2è- (
fÚt
->
	`g‘FÚtHeight
()/2);

163 
	}
}

165 
boŞ
 
	gWidg‘IÅut
::
	$checkClick
() {

168 ià(!
’abËd
è 
çl£
;

171 ià(
š±
->
lock
[
MAIN1
]è 
çl£
;

174 ià(
´es£d
 && !
š±
->
lock
[
MAIN1
]) {

175 
´es£d
 = 
çl£
;

177 ià(
	`isW™hš
(
pos
, 
š±
->
mou£
)) {

180  
Œue
;

184 
´es£d
 = 
çl£
;

187 ià(
š±
->
´essšg
[
MAIN1
]) {

188 ià(
	`isW™hš
(
pos
, 
š±
->
mou£
)) {

190 
š±
->
lock
[
MAIN1
] = 
Œue
;

191 
´es£d
 = 
Œue
;

195  
çl£
;

196 
	}
}

198 
	gWidg‘IÅut
::~
	$Widg‘IÅut
() {

199 
	`SDL_F»eSurçû
(
background
);

200 
	}
}

	@WidgetInput.h

26 #´agm¨
Úû


27 #iâdeà
WIDGETINPUT_H


28 
	#WIDGETINPUT_H


	)

30 
	~"Uts.h
"

31 
	~"Widg‘.h
"

32 
	~<SDL.h
>

33 
	~<¡ršg
>

35 şas 
	cWidg‘IÅut
 : 
public
 
Widg‘
 {

37 
´Ùeùed
:

39 
lßdG¿phics
(cÚ¡ 
¡d
::
¡ršg
& 
f’ame
);

41 
SDL_Surçû
 *
	mbackground
;

43 
boŞ
 
	m’abËd
;

44 
boŞ
 
	m´es£d
;

45 
boŞ
 
	mhov”
;

47 
	m¡d
::
¡ršg
 
‹xt
;

48 
	mmax_ch¬aù”s
;

49 
	mcursÜ_äame
;

51 
Pošt
 
	mfÚt_pos
;

53 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

55 
	mpublic
:

56 
Widg‘IÅut
();

57 ~
Widg‘IÅut
();

59 
logic
();

60 
boŞ
 
logic
(
x
, 
y
);

61 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

62 
boŞ
 
checkClick
();

63 
	m¡d
::
¡ršg
 
	$g‘Text
(è{  
‹xt
; }

64 
	`£tText
(
¡d
::
¡ršg
 
_‹xt
è{ 
‹xt
 = _‹xt; 
	}
}

65 
£tPos™iÚ
(
x
, 
y
);

67 
boŞ
 
	gšFocus
;

	@WidgetLabel.cpp

24 
	~"Widg‘Lab–.h
"

25 
	~"Sh¬edResourûs.h
"

26 
	~"SDL_gfxBl™Func.h
"

27 
	~"UtsP¬sšg.h
"

29 
usšg
 
Çme¥aû
 
	g¡d
;

31 
	gLab–Info
::
	$Lab–Info
(è: 
	`x
(0), 
	`y
(0), 
	`ju¡ify
(
JUSTIFY_LEFT
), 
	`v®ign
(
VALIGN_TOP
), 
	`hidd’
(
çl£
), 
	`fÚt_¡yË
("font_regular") {

32 
	}
}

37 
Lab–Info
 
	$—tLab–Info
(
¡ršg
 
v®
) {

38 
Lab–Info
 
šfo
;

39 
¡ršg
 
ju¡ify
,
v®ign
,
¡yË
;

41 
¡d
::
¡ršg
 
tmp
 = 
	`—tFœ¡SŒšg
(
v®
,',');

42 ià(
tmp
 == "hidden") {

43 
šfo
.
hidd’
 = 
Œue
;

45 
šfo
.
hidd’
 = 
çl£
;

46 
šfo
.
x
 = 
	`©oi
(
tmp
.
	`c_¡r
());

47 
šfo
.
y
 = 
	`—tFœ¡IÁ
(
v®
,',');

48 
ju¡ify
 = 
	`—tFœ¡SŒšg
(
v®
,',');

49 
v®ign
 = 
	`—tFœ¡SŒšg
(
v®
,',');

50 
¡yË
 = 
	`—tFœ¡SŒšg
(
v®
,',');

52 ià(
ju¡ify
 =ğ"Ëá"è
šfo
.ju¡ify = 
JUSTIFY_LEFT
;

53 ià(
ju¡ify
 =ğ"ûÁ”"è
šfo
.ju¡ify = 
JUSTIFY_CENTER
;

54 ià(
ju¡ify
 =ğ"right"è
šfo
.ju¡ify = 
JUSTIFY_RIGHT
;

56 ià(
v®ign
 =ğ"tİ"è
šfo
.v®igÀğ
VALIGN_TOP
;

57 ià(
v®ign
 =ğ"ûÁ”"è
šfo
.v®igÀğ
VALIGN_CENTER
;

58 ià(
v®ign
 =ğ"bÙtom"è
šfo
.v®igÀğ
VALIGN_BOTTOM
;

60 ià(
¡yË
 !ğ""è
šfo
.
fÚt_¡yË
 = style;

63  
šfo
;

64 
	}
}

66 
	gWidg‘Lab–
::
	$Widg‘Lab–
()

67 : 
	`‹xt
("")

68 , 
	`cŞÜ
(
fÚt
->
	`g‘CŞÜ
("widget_normal"))

69 , 
	`x_Üigš
(0)

70 , 
	`y_Üigš
(0)

71 , 
	`ju¡ify
(
JUSTIFY_LEFT
)

72 , 
	`v®ign
(
VALIGN_TOP
)

73 , 
	`fÚt_¡yË
("font_regular")

74 , 
	$‹xt_bufãr
(
NULL
)

77 
bounds
.
x
 = bounds.
y
 = 0;

78 
bounds
.
w
 = bounds.
h
 = 0;

80 
»nd”_to_®pha
 = 
çl£
;

81 
	}
}

86 
	gWidg‘Lab–
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

87 ià(
rg‘
 =ğ
NULL
) {

88 
rg‘
 = 
sü“n
;

91 
SDL_Reù
 
de¡
;

92 
de¡
.
x
 = 
bounds
.x;

93 
de¡
.
y
 = 
bounds
.y;

94 
de¡
.
w
 = 
bounds
.w;

95 
de¡
.
h
 = 
bounds
.h;

97 ià(
‹xt_bufãr
 !ğ
NULL
) {

98 ià(
»nd”_to_®pha
)

99 
	`SDL_gfxBl™RGBA
(
‹xt_bufãr
, 
NULL
, 
rg‘
, &
de¡
);

101 
	`SDL_Bl™Surçû
(
‹xt_bufãr
, 
NULL
, 
rg‘
, &
de¡
);

103 
	}
}

106 
	gWidg‘Lab–
::
	$£t
(
_x
, 
_y
, 
_ju¡ify
, 
_v®ign
, cÚ¡ 
¡ršg
& 
_‹xt
, 
SDL_CŞÜ
 
_cŞÜ
) {

107 
	`£t
(
_x
, 
_y
, 
_ju¡ify
, 
_v®ign
, 
_‹xt
, 
_cŞÜ
, "font_regular");

108 
	}
}

113 
	gWidg‘Lab–
::
£t
(
_x
, 
_y
, 
_ju¡ify
, 
_v®ign
, cÚ¡ 
¡ršg
& 
_‹xt
, 
SDL_CŞÜ
 
_cŞÜ
, 
¡d
::¡ršg 
_fÚt
) {

115 
boŞ
 
chªged
 = 
çl£
;

117 ià(
	gju¡ify
 !ğ
_ju¡ify
) {

118 
ju¡ify
 = 
_ju¡ify
;

119 
	gchªged
 = 
Œue
;

121 ià(
	gv®ign
 !ğ
_v®ign
) {

122 
v®ign
 = 
_v®ign
;

123 
	gchªged
 = 
Œue
;

125 ià(
	g‹xt
 !ğ
_‹xt
) {

126 
‹xt
 = 
_‹xt
;

127 
	gchªged
 = 
Œue
;

129 ià(
	gcŞÜ
.
	gr
 !ğ
_cŞÜ
.
r
 || 
cŞÜ
.
g
 !ğ_cŞÜ.g || cŞÜ.
b
 != _color.b) {

130 
cŞÜ
 = 
_cŞÜ
;

131 
	gchªged
 = 
Œue
;

133 ià(
	gx_Üigš
 !ğ
_x
) {

134 
x_Üigš
 = 
_x
;

135 
	gchªged
 = 
Œue
;

137 ià(
	gy_Üigš
 !ğ
_y
) {

138 
y_Üigš
 = 
_y
;

139 
	gchªged
 = 
Œue
;

141 ià(
	gfÚt_¡yË
 !ğ
_fÚt
) {

142 
fÚt_¡yË
 = 
_fÚt
;

143 
	gchªged
 = 
Œue
;

146 ià(
	gchªged
) {

147 
­¶yOff£ts
();

148 
»äesh
();

155 
	gWidg‘Lab–
::
	$£tX
(
_x
) {

156 ià(
x_Üigš
 !ğ
_x
) {

157 
x_Üigš
 = 
_x
;

158 
	`­¶yOff£ts
();

159 
	`»äesh
();

161 
	}
}

166 
	gWidg‘Lab–
::
	$£tY
(
_y
) {

167 ià(
y_Üigš
 !ğ
_y
) {

168 
y_Üigš
 = 
_y
;

169 
	`­¶yOff£ts
();

170 
	`»äesh
();

172 
	}
}

177 
	gWidg‘Lab–
::
	$g‘X
() {

178  
x_Üigš
;

179 
	}
}

184 
	gWidg‘Lab–
::
	$g‘Y
() {

185  
y_Üigš
;

186 
	}
}

191 
	gWidg‘Lab–
::
	$£tJu¡ify
(
_ju¡ify
) {

192 ià(
ju¡ify
 !ğ
_ju¡ify
) {

193 
ju¡ify
 = 
_ju¡ify
;

194 
	`­¶yOff£ts
();

195 
	`»äesh
();

197 
	}
}

202 
	gWidg‘Lab–
::
	$­¶yOff£ts
() {

204 
fÚt
->
	`£tFÚt
(
fÚt_¡yË
);

206 
bounds
.
w
 = 
fÚt
->
	`ÿlc_width
(
‹xt
);

207 
bounds
.
h
 = 
fÚt
->
	`g‘FÚtHeight
();

210 ià(
ju¡ify
 =ğ
JUSTIFY_LEFT
)

211 
bounds
.
x
 = 
x_Üigš
;

212 ià(
ju¡ify
 =ğ
JUSTIFY_RIGHT
)

213 
bounds
.
x
 = 
x_Üigš
 - bounds.
w
;

214 ià(
ju¡ify
 =ğ
JUSTIFY_CENTER
)

215 
bounds
.
x
 = 
x_Üigš
 - bounds.
w
/2;

218 ià(
v®ign
 =ğ
VALIGN_TOP
) {

219 
bounds
.
y
 = 
y_Üigš
;

221 ià(
v®ign
 =ğ
VALIGN_BOTTOM
) {

222 
bounds
.
y
 = 
y_Üigš
 - bounds.
h
;;

224 ià(
v®ign
 =ğ
VALIGN_CENTER
) {

225 
bounds
.
y
 = 
y_Üigš
 - bounds.
h
/2;

228 
	}
}

233 
	gWidg‘Lab–
::
	$£t
(cÚ¡ 
¡ršg
& 
_‹xt
) {

234 ià(
‹xt
 !ğ
_‹xt
) {

235 
this
->
‹xt
 = 
_‹xt
;

236 
	`­¶yOff£ts
();

237 
	`»äesh
();

239 
	}
}

245 
	gWidg‘Lab–
::
	$»äesh
() {

247 
	`SDL_F»eSurçû
(
‹xt_bufãr
);

248 
‹xt_bufãr
 = 
	`ü—‹AÍhaSurçû
(
bounds
.
w
, bounds.
h
);

249 
fÚt
->
	`£tFÚt
(
fÚt_¡yË
);

250 
fÚt
->
	`»nd”Shadowed
(
‹xt
, 0, 0, 
JUSTIFY_LEFT
, 
‹xt_bufãr
, 
cŞÜ
);

252 
	}
}

255 
	gWidg‘Lab–
::~
	$Widg‘Lab–
() {

256 
	`SDL_F»eSurçû
(
‹xt_bufãr
);

257 
	}
}

	@WidgetLabel.h

26 #´agm¨
Úû


27 #iâdeà
WIDGET_LABEL_H


28 
	#WIDGET_LABEL_H


	)

30 
	~"Widg‘.h
"

31 
	~<SDL.h
>

32 
	~<¡ršg
>

34 cÚ¡ 
	gVALIGN_CENTER
 = 0;

35 cÚ¡ 
	gVALIGN_TOP
 = 1;

36 cÚ¡ 
	gVALIGN_BOTTOM
 = 2;

38 şas 
	cLab–Info
 {

39 
	mpublic
:

40 
x
,
	my
;

41 
	mju¡ify
,
	mv®ign
;

42 
boŞ
 
	mhidd’
;

43 
	m¡d
::
¡ršg
 
fÚt_¡yË
;

45 
Lab–Info
();

48 
Lab–Info
 
—tLab–Info
(
¡d
::
¡ršg
 
v®
);

50 şas 
	cWidg‘Lab–
 : 
public
 
Widg‘
 {

51 
´iv©e
:

53 
»äesh
();

54 
­¶yOff£ts
();

56 
	m¡d
::
¡ršg
 
‹xt
;

57 
SDL_CŞÜ
 
	mcŞÜ
;

58 
	mx_Üigš
;

59 
	my_Üigš
;

60 
	mju¡ify
;

61 
	mv®ign
;

62 
	m¡d
::
¡ršg
 
fÚt_¡yË
;

63 
SDL_Surçû
 *
	m‹xt_bufãr
;

65 
	mpublic
:

66 
Widg‘Lab–
();

67 ~
Widg‘Lab–
();

68 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

69 
£t
(
_x
, 
_y
, 
_ju¡ify
, 
_v®ign
, cÚ¡ 
¡d
::
¡ršg
& 
_‹xt
, 
SDL_CŞÜ
 
_cŞÜ
);

70 
£t
(
_x
, 
_y
, 
_ju¡ify
, 
_v®ign
, cÚ¡ 
¡d
::
¡ršg
& 
_‹xt
, 
SDL_CŞÜ
 
_cŞÜ
, std::¡ršg 
_fÚt
);

71 
£tX
(
_x
);

72 
£tY
(
_y
);

73 
g‘X
();

74 
g‘Y
();

75 
£tJu¡ify
(
_ju¡ify
);

77 
£t
(cÚ¡ 
¡d
::
¡ršg
& 
_‹xt
);

78 
	m¡d
::
¡ršg
 
	$g‘
(è{ 
‹xt
;}

80 
SDL_Reù
 
bounds
;

81 
	}
};

	@WidgetListBox.cpp

23 
	~"Widg‘Li¡Box.h
"

24 
	~"Sh¬edResourûs.h
"

25 
	~"SDL_gfxBl™Func.h
"

27 
usšg
 
Çme¥aû
 
	g¡d
;

29 
	gWidg‘Li¡Box
::
Widg‘Li¡Box
(
amouÁ
, 
height
, cÚ¡ 
¡d
::
¡ršg
& 
_feName
)

30 : 
Widg‘
()

31 , 
feName
(
_feName
)

32 , 
li¡_amouÁ
(
amouÁ
)

33 , 
li¡_height
(
height
)

34 , 
cursÜ
(0)

35 , 
has_süŞl_b¬
(
çl£
)

36 , 
nÚ_em±y_¦Ùs
(0)

37 , 
ªy_£Ëùed
(
çl£
)

38 , 
v®ues
(
Ãw
 
¡d
::
¡ršg
[
li¡_amouÁ
])

39 , 
toŞts
(
Ãw
 
¡d
::
¡ršg
[
li¡_amouÁ
])

40 , 
vÏb–s
(
Ãw
 
Widg‘Lab–
[
li¡_height
])

41 , 
rows
(
Ãw
 
SDL_Reù
[
li¡_height
])

42 , 
t
Ğ
Ãw
 
Widg‘ToŞt
())

43 , 
süŞlb¬
(
Ãw
 
Widg‘SüŞlB¬
(
mods
->
loÿ‹
("images/menus/buttons/scrollbar_default.png")))

44 , 
cŞÜ_nÜm®
(
fÚt
->
g‘CŞÜ
("widget_normal"))

45 , 
cŞÜ_di§bËd
(
fÚt
->
g‘CŞÜ
("widget_disabled"))

46 , 
pos_süŞl
()

47 , 
´es£d
(
çl£
)

48 , 
£Ëùed
(
Ãw
 
boŞ
[
li¡_amouÁ
])

49 , 
muÉi_£Ëù
(
çl£
)

50 , 
ÿn_de£Ëù
(
Œue
)

51 , 
ÿn_£Ëù
(
Œue
)

52 , 
	$süŞlb¬_off£t
(0)

54 
li¡boxs
 = 
NULL
;

55 
şick
 = 
NULL
;

58 
i
=0; i<
li¡_amouÁ
; i++) {

59 
£Ëùed
[
i
] = 
çl£
;

60 
v®ues
[
i
] = "";

63 
	`lßdA¹
();

65 
pos
.
w
 = 
li¡boxs
->w;

66 
pos
.
h
 = (
li¡boxs
->h / 3);

67 
	}
}

69 
	gWidg‘Li¡Box
::
	$lßdA¹
() {

72 
li¡boxs
 = 
	`IMG_Lßd
(
feName
.
	`c_¡r
());

74 if(!
li¡boxs
) {

75 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

76 
	`SDL_Qu™
();

77 
	`ex™
(1);

81 
SDL_Surçû
 *
ş—nup
 = 
li¡boxs
;

82 
li¡boxs
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(listboxs);

83 
	`SDL_F»eSurçû
(
ş—nup
);

84 
	}
}

86 
boŞ
 
	gWidg‘Li¡Box
::
	$checkClick
() {

87 ià(
	`checkClick
(
š±
->
mou£
.
x
,š±->mou£.
y
))

88  
Œue
;

90  
çl£
;

91 
	}
}

97 
boŞ
 
	gWidg‘Li¡Box
::
	$checkClick
(
x
, 
y
) {

99 
Pošt
 
	`mou£
(
x
, 
y
);

101 
	`»äesh
();

104 
SDL_Reù
 
süŞl_¬—
;

105 
süŞl_¬—
.
x
 = 
rows
[0].x;

106 
süŞl_¬—
.
y
 = 
rows
[0].y;

107 
süŞl_¬—
.
w
 = 
rows
[0].w;

108 
süŞl_¬—
.
h
 = 
rows
[0].h * 
li¡_height
;

109 ià(
	`isW™hš
(
süŞl_¬—
,
mou£
)) {

110 ià(
š±
->
süŞl_up
) {

111 
	`süŞlUp
();

112 
š±
->
	`»£tSüŞl
();

114 ià(
š±
->
süŞl_down
) {

115 
	`süŞlDown
();

116 
š±
->
	`»£tSüŞl
();

119 
š±
->
	`»£tSüŞl
();

123 ià(
has_süŞl_b¬
) {

124 
süŞlb¬
->
	`checkClick
(
mou£
.
x
,mou£.
y
)) {

126 
	`süŞlUp
();

129 
	`süŞlDown
();

132 
cursÜ
 = 
süŞlb¬
->
	`g‘V®ue
();

133 
	`»äesh
();

141 ià(
š±
->
lock
[
MAIN1
]è 
çl£
;

144 ià(
´es£d
 && !
š±
->
lock
[
MAIN1
] && 
ÿn_£Ëù
) {

145 
´es£d
 = 
çl£
;

147 
i
=0; i<
li¡_height
; i++) {

148 ià(
i
<
li¡_amouÁ
) {

149 ià(
	`isW™hš
(
rows
[
i
], 
mou£
è&& 
v®ues
[i+
cursÜ
] != "") {

151 ià(!
muÉi_£Ëù
) {

152 
j
=0; j<
li¡_amouÁ
; j++) {

153 ià(
j
!=
i
+
cursÜ
)

154 
£Ëùed
[
j
] = 
çl£
;

158 ià(
£Ëùed
[
i
+
cursÜ
]) {

159 ià(
ÿn_de£Ëù
è
£Ëùed
[
i
+
cursÜ
] = 
çl£
;

161 
£Ëùed
[
i
+
cursÜ
] = 
Œue
;

163 
	`»äesh
();

164  
Œue
;

170 
´es£d
 = 
çl£
;

173 ià(
š±
->
´essšg
[
MAIN1
]) {

174 
i
=0; i<
li¡_height
;i++) {

175 ià(
	`isW™hš
(
rows
[
i
], 
mou£
)) {

177 
š±
->
lock
[
MAIN1
] = 
Œue
;

178 
´es£d
 = 
Œue
;

183  
çl£
;

185 
	}
}

192 
ToŞtD©a
 
	gWidg‘Li¡Box
::
	$checkToŞt
(
Pošt
 
mou£
) {

193 
ToŞtD©a
 
_t
;

195 
i
=0; i<
li¡_height
; i++) {

196 ià(
i
<
li¡_amouÁ
) {

197 ià(
	`isW™hš
(
rows
[
i
], 
mou£
è&& 
toŞts
[i+
cursÜ
] != "") {

198 
_t
.
	`addText
(
toŞts
[
i
+
cursÜ
]);

204  
_t
;

205 
	}
}

210 
	gWidg‘Li¡Box
::
­³nd
(
¡d
::
¡ršg
 
v®ue
, std::¡ršg 
toŞt
) {

211 
i
=0;
	gi
<
	gli¡_amouÁ
;i++) {

212 ià(
	gv®ues
[
i
] == "") {

213 
v®ues
[
i
] = 
v®ue
;

214 
	gtoŞts
[
i
] = 
toŞt
;

215 
»äesh
();

224 
	gWidg‘Li¡Box
::
£t
(
šdex
, 
¡d
::
¡ršg
 
v®ue
, std::¡ršg 
toŞt
) {

225 ià(
šdex
 > 
li¡_amouÁ
 || index < 0) ;

227 
	gv®ues
[
šdex
] = 
v®ue
;

228 
	gtoŞts
[
šdex
] = 
toŞt
;

234 
	gWidg‘Li¡Box
::
	$»move
(
šdex
) {

235 
i
=
šdex
;i<
li¡_amouÁ
;i++) {

236 ià(
i
==
li¡_amouÁ
-1) {

237 
£Ëùed
[
i
] = 
çl£
;

238 
v®ues
[
i
] = "";

239 
toŞts
[
i
] = "";

241 
£Ëùed
[
i
] = selected[i+1];

242 
v®ues
[
i
] = values[i+1];

243 
toŞts
[
i
] =ooltips[i+1];

246 
	`süŞlUp
();

247 
	`»äesh
();

248 
	}
}

253 
	gWidg‘Li¡Box
::
	$ş—r
() {

254 
i
=0; i<
li¡_amouÁ
; i++) {

255 
£Ëùed
[
i
] = 
çl£
;

256 
v®ues
[
i
] = "";

257 
toŞts
[
i
] = "";

259 
	`»äesh
();

260 
	}
}

265 
	gWidg‘Li¡Box
::
	$shiáUp
() {

266 
ªy_£Ëùed
 = 
çl£
;

267 ià(!
£Ëùed
[0]) {

268 
i
=1; i < 
nÚ_em±y_¦Ùs
; i++) {

269 ià(
£Ëùed
[
i
]) {

270 
ªy_£Ëùed
 = 
Œue
;

271 
boŞ
 
tmp_£Ëùed
 = 
£Ëùed
[
i
];

272 
¡d
::
¡ršg
 
tmp_v®ue
 = 
v®ues
[
i
];

273 
¡d
::
¡ršg
 
tmp_toŞt
 = 
toŞts
[
i
];

275 
£Ëùed
[
i
] = selected[i-1];

276 
v®ues
[
i
] = values[i-1];

277 
toŞts
[
i
] =ooltips[i-1];

279 
£Ëùed
[
i
-1] = 
tmp_£Ëùed
;

280 
v®ues
[
i
-1] = 
tmp_v®ue
;

281 
toŞts
[
i
-1] = 
tmp_toŞt
;

284 ià(
ªy_£Ëùed
) {

285 
	`süŞlUp
();

288 
	}
}

293 
	gWidg‘Li¡Box
::
	$shiáDown
() {

294 
ªy_£Ëùed
 = 
çl£
;

295 ià(!
£Ëùed
[
nÚ_em±y_¦Ùs
-1]) {

296 
i
=
nÚ_em±y_¦Ùs
-2; i >= 0; i--) {

297 ià(
£Ëùed
[
i
]) {

298 
ªy_£Ëùed
 = 
Œue
;

299 
boŞ
 
tmp_£Ëùed
 = 
£Ëùed
[
i
];

300 
¡d
::
¡ršg
 
tmp_v®ue
 = 
v®ues
[
i
];

301 
¡d
::
¡ršg
 
tmp_toŞt
 = 
toŞts
[
i
];

303 
£Ëùed
[
i
] = selected[i+1];

304 
v®ues
[
i
] = values[i+1];

305 
toŞts
[
i
] =ooltips[i+1];

307 
£Ëùed
[
i
+1] = 
tmp_£Ëùed
;

308 
v®ues
[
i
+1] = 
tmp_v®ue
;

309 
toŞts
[
i
+1] = 
tmp_toŞt
;

312 ià(
ªy_£Ëùed
) {

313 
	`süŞlDown
();

316 
	}
}

318 
	gWidg‘Li¡Box
::
	$g‘S–eùed
() {

320 
i
=0; i<
nÚ_em±y_¦Ùs
; i++) {

321 ià(
£Ëùed
[
i
])  i;

324 
	}
}

326 
	g¡d
::
¡ršg
 
Widg‘Li¡Box
::
	$g‘V®ue
() {

327 
i
=0; i<
nÚ_em±y_¦Ùs
; i++) {

328 ià(
£Ëùed
[
i
]è 
v®ues
[i];

331 
	}
}

336 
	g¡d
::
¡ršg
 
Widg‘Li¡Box
::
	$g‘V®ue
(
šdex
) {

337  
v®ues
[
šdex
];

338 
	}
}

343 
	g¡d
::
¡ršg
 
Widg‘Li¡Box
::
	$g‘ToŞt
(
šdex
) {

344  
toŞts
[
šdex
];

345 
	}
}

350 
	gWidg‘Li¡Box
::
	$g‘Size
() {

351  
li¡_amouÁ
;

352 
	}
}

357 
	gWidg‘Li¡Box
::
	$süŞlUp
() {

358 ià(
cursÜ
 > 0)

359 
cursÜ
 -= 1;

360 
	`»äesh
();

361 
	}
}

366 
	gWidg‘Li¡Box
::
	$süŞlDown
() {

367 ià(
cursÜ
+
li¡_height
 < 
nÚ_em±y_¦Ùs
)

368 
cursÜ
 += 1;

369 
	`»äesh
();

370 
	}
}

372 
	gWidg‘Li¡Box
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

373 ià(
rg‘
 =ğ
NULL
) {

374 
rg‘
 = 
sü“n
;

377 
SDL_Reù
 
¤c
;

378 
¤c
.
x
 = 0;

379 
¤c
.
w
 = 
pos
.w;

380 
¤c
.
h
 = 
pos
.h;

382 
i
=0; i<
li¡_height
; i++) {

383 if(
i
==0)

384 
¤c
.
y
 = 0;

385 if(
i
==
li¡_height
-1)

386 
¤c
.
y
 = 
pos
.
h
*2;

388 
¤c
.
y
 = 
pos
.
h
;

390 ià(
»nd”_to_®pha
)

391 
	`SDL_gfxBl™RGBA
(
li¡boxs
, &
¤c
, 
rg‘
, &
rows
[
i
]);

393 
	`SDL_Bl™Surçû
(
li¡boxs
, &
¤c
, 
rg‘
, &
rows
[
i
]);

394 ià(
i
<
li¡_amouÁ
) {

395 
vÏb–s
[
i
].
	`»nd”
(
rg‘
);

399 ià(
has_süŞl_b¬
)

400 
süŞlb¬
->
	`»nd”
(
rg‘
);

401 
	}
}

407 
	gWidg‘Li¡Box
::
	$»äesh
() {

409 
¡d
::
¡ršg
 
‹mp
;

410 
right_m¬gš
 = 0;

413 
nÚ_em±y_¦Ùs
 = 0;

414 
i
=0;i<
li¡_amouÁ
;i++) {

415 ià(
v®ues
[
i
] != "")

416 
nÚ_em±y_¦Ùs
 = 
i
+1;

420 ià(
nÚ_em±y_¦Ùs
 > 
li¡_height
) {

421 
has_süŞl_b¬
 = 
Œue
;

422 
pos_süŞl
.
x
 = 
pos
.x+pos.
w
-
süŞlb¬
->
pos_up
.w-
süŞlb¬_off£t
;

423 
pos_süŞl
.
y
 = 
pos
.y+
süŞlb¬_off£t
;

424 
pos_süŞl
.
w
 = 
süŞlb¬
->
pos_up
.w;

425 
pos_süŞl
.
h
 = (
pos
.h*
li¡_height
)-
süŞlb¬
->
pos_down
.h-(
süŞlb¬_off£t
*2);

426 
süŞlb¬
->
	`»äesh
(
pos_süŞl
.
x
,…os_süŞl.
y
,…os_süŞl.
h
, 
cursÜ
, 
nÚ_em±y_¦Ùs
-
li¡_height
);

427 
right_m¬gš
 = 
süŞlb¬
->
pos_knob
.
w
 + 8;

429 
has_süŞl_b¬
 = 
çl£
;

430 
right_m¬gš
 = 8;

434 
i
=0;i<
li¡_height
;i++)

436 
rows
[
i
].
x
 = 
pos
.x;

437 
rows
[
i
].
y
 = (
pos
.
h
*i)+pos.y;

438 ià(
has_süŞl_b¬
) {

439 
rows
[
i
].
w
 = 
pos
.w - 
pos_süŞl
.w;

441 
rows
[
i
].
w
 = 
pos
.w;

443 
rows
[
i
].
h
 = 
pos
.h;

445 
fÚt_x
 = 
rows
[
i
].
x
 + 8;

446 
fÚt_y
 = 
rows
[
i
].
y
 + (rows[i].
h
/2);

448 ià(
i
<
li¡_amouÁ
) {

451 
max_Ëngth
 = ()(
pos
.
w
-
right_m¬gš
)/
fÚt
->
	`ÿlc_width
("X");

452 ià(
fÚt
->
	`ÿlc_width
(
v®ues
[
i
+
cursÜ
]è> 
pos
.
w
-
right_m¬gš
) {

453 
‹mp
 = 
v®ues
[
i
+
cursÜ
].
	`sub¡r
(0,
max_Ëngth
);

454 
‹mp
.
	`­³nd
("...");

456 
‹mp
 = 
v®ues
[
i
+
cursÜ
];

459 if(
£Ëùed
[
i
+
cursÜ
]) {

460 
vÏb–s
[
i
].
	`£t
(
fÚt_x
, 
fÚt_y
, 
JUSTIFY_LEFT
, 
VALIGN_CENTER
, 
‹mp
, 
cŞÜ_nÜm®
);

462 
vÏb–s
[
i
].
	`£t
(
fÚt_x
, 
fÚt_y
, 
JUSTIFY_LEFT
, 
VALIGN_CENTER
, 
‹mp
, 
cŞÜ_di§bËd
);

467 
	}
}

469 
	gWidg‘Li¡Box
::~
	$Widg‘Li¡Box
() {

470 
	`SDL_F»eSurçû
(
li¡boxs
);

471 
d–‘e
[] 
v®ues
;

472 
d–‘e
[] 
toŞts
;

473 
d–‘e
[] 
vÏb–s
;

474 
d–‘e
[] 
rows
;

475 
d–‘e
[] 
£Ëùed
;

476 
d–‘e
 
t
;

477 
d–‘e
 
süŞlb¬
;

478 
	}
}

	@WidgetListBox.h

24 #´agm¨
Úû


25 #iâdeà
WIDGET_Li¡Box_H


26 
	#WIDGET_Li¡Box_H


	)

28 
	~"Widg‘.h
"

29 
	~"Widg‘Lab–.h
"

30 
	~"Widg‘SüŞlB¬.h
"

31 
	~"Widg‘ToŞt.h
"

33 
	~<SDL.h
>

34 
	~<SDL_image.h
>

35 
	~<SDL_mix”.h
>

37 
	~<¡ršg
>

40 şas 
	cWidg‘Li¡Box
 : 
public
 
Widg‘
 {

41 
´iv©e
:

43 
¡d
::
¡ršg
 
feName
;

45 
SDL_Surçû
 *
	mli¡boxs
;

46 
Mix_Chunk
 *
	mşick
;

48 
	mli¡_amouÁ
;

49 
	mli¡_height
;

50 
	mcursÜ
;

51 
boŞ
 
	mhas_süŞl_b¬
;

52 
	mnÚ_em±y_¦Ùs
;

53 
boŞ
 
	mªy_£Ëùed
;

54 
	m¡d
::
¡ršg
 *
v®ues
;

55 
	m¡d
::
¡ršg
 *
toŞts
;

56 
Widg‘Lab–
 *
	mvÏb–s
;

57 
SDL_Reù
 *
	mrows
;

58 
Widg‘ToŞt
 *
	mt
;

59 
Widg‘SüŞlB¬
 *
	msüŞlb¬
;

60 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

61 
SDL_CŞÜ
 
	mcŞÜ_di§bËd
;

63 
	mpublic
:

64 
Widg‘Li¡Box
(
amouÁ
, 
height
, cÚ¡ 
¡d
::
¡ršg
& 
_feName
);

65 ~
Widg‘Li¡Box
();

67 
lßdA¹
();

68 
boŞ
 
checkClick
();

69 
boŞ
 
checkClick
(
x
, 
y
);

70 
ToŞtD©a
 
checkToŞt
(
Pošt
 
mou£
);

71 
­³nd
(
¡d
::
¡ršg
 
v®ue
, std::¡ršg 
toŞt
);

72 
£t
(
šdex
, 
¡d
::
¡ršg
 
v®ue
, std::¡ršg 
toŞt
);

73 
»move
(
šdex
);

74 
ş—r
();

75 
shiáUp
();

76 
shiáDown
();

77 
g‘S–eùed
();

78 
	m¡d
::
¡ršg
 
g‘V®ue
();

79 
	m¡d
::
¡ršg
 
g‘V®ue
(
šdex
);

80 
	m¡d
::
¡ršg
 
g‘ToŞt
(
šdex
);

81 
g‘Size
();

82 
süŞlUp
();

83 
süŞlDown
();

84 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

85 
»äesh
();

87 
SDL_Reù
 
	mpos_süŞl
;

88 
boŞ
 
	m´es£d
;

89 
boŞ
 *
	m£Ëùed
;

90 
boŞ
 
	mmuÉi_£Ëù
;

91 
boŞ
 
	mÿn_de£Ëù
;

92 
boŞ
 
	mÿn_£Ëù
;

93 
	msüŞlb¬_off£t
;

	@WidgetScrollBar.cpp

23 
	~"Widg‘SüŞlB¬.h
"

24 
	~"Sh¬edResourûs.h
"

25 
	~"SDL_gfxBl™Func.h
"

27 
usšg
 
Çme¥aû
 
	g¡d
;

29 
	gWidg‘SüŞlB¬
::
Widg‘SüŞlB¬
(cÚ¡ 
¡d
::
¡ršg
& 
_feName
)

30 : 
Widg‘
()

31 , 
feName
(
_feName
)

32 , 
v®ue
(0)

33 , 
b¬_height
(0)

34 , 
maximum
(0)

35 , 
´es£d_up
(
çl£
)

36 , 
´es£d_down
(
çl£
)

37 , 
	$´es£d_knob
(
çl£
)

39 
süŞlb¬s
 = 
NULL
;

40 
şick
 = 
NULL
;

42 
	`lßdA¹
();

44 
pos_up
.
w
 = 
pos_down
.w = 
pos_knob
.w = 
süŞlb¬s
->w;

45 
pos_up
.
h
 = 
pos_down
.h = 
pos_knob
.h = (
süŞlb¬s
->h / 5);

46 
	}
}

48 
	gWidg‘SüŞlB¬
::
	$lßdA¹
() {

51 
süŞlb¬s
 = 
	`IMG_Lßd
(
feName
.
	`c_¡r
());

53 if(!
süŞlb¬s
) {

54 
	`årštf
(
¡d”r
, "Couldn'ˆlßd image: %s\n", 
	`IMG_G‘E¼Ü
());

55 
	`SDL_Qu™
();

56 
	`ex™
(1);

60 
SDL_Surçû
 *
ş—nup
 = 
süŞlb¬s
;

61 
süŞlb¬s
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(scrollbars);

62 
	`SDL_F»eSurçû
(
ş—nup
);

63 
	}
}

65 
	gWidg‘SüŞlB¬
::
	$checkClick
() {

66 
r
 = 
	`checkClick
(
š±
->
mou£
.
x
,š±->mou£.
y
);

67  
r
;

68 
	}
}

74 
	gWidg‘SüŞlB¬
::
	$checkClick
(
x
, 
y
) {

75 
Pošt
 
mou£
 = 
	`Pošt
(
x
,
y
);

81 ià(
´es£d_up
 && !
š±
->
lock
[
MAIN1
]) {

82 
´es£d_up
 = 
çl£
;

83 ià(
	`isW™hš
(
pos_up
, 
mou£
)) {

88 ià(
´es£d_down
 && !
š±
->
lock
[
MAIN1
]) {

89 
´es£d_down
 = 
çl£
;

90 ià(
	`isW™hš
(
pos_down
, 
mou£
)) {

95 ià(
´es£d_knob
) {

96 ià(!
š±
->
lock
[
MAIN1
]) {

97 
´es£d_knob
 = 
çl£
;

99 
tmp
 = 
mou£
.
y
 - 
pos_up
.y -…os_up.
h
;

101 
pos_knob
.
y
 = 
pos_up
.y + 
tmp
;

102 ià(
b¬_height
 < 1) bar_height = 1;

103 
v®ue
 = (
tmp
 * 
maximum
)/
b¬_height
;

104 
	`£t
();

109 
´es£d_up
 = 
çl£
;

110 
´es£d_down
 = 
çl£
;

111 
´es£d_knob
 = 
çl£
;

114 ià(
š±
->
´essšg
[
MAIN1
]) {

115 ià(
	`isW™hš
(
pos_up
, 
mou£
)) {

116 
š±
->
lock
[
MAIN1
] = 
Œue
;

117 
´es£d_up
 = 
Œue
;

118 } ià(
	`isW™hš
(
pos_down
, 
mou£
)) {

119 
š±
->
lock
[
MAIN1
] = 
Œue
;

120 
´es£d_down
 = 
Œue
;

121 } ià(
	`isW™hš
(
pos_knob
, 
mou£
)) {

122 
š±
->
lock
[
MAIN1
] = 
Œue
;

123 
´es£d_knob
 = 
Œue
;

129 
	}
}

131 
	gWidg‘SüŞlB¬
::
	$£t
() {

132 ià(
maximum
 < 1) maximum = 1;

133 
v®ue
 = 
	`max
(0, 
	`mš
(
maximum
, value));

134 
pos_knob
.
y
 = 
pos_up
.y +…os_up.
h
 + (
v®ue
 * (
b¬_height
 -…os_up.hè/ 
maximum
);

135 
	}
}

137 
	gWidg‘SüŞlB¬
::
	$g‘V®ue
() {

138  
v®ue
;

139 
	}
}

141 
	gWidg‘SüŞlB¬
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

142 ià(
rg‘
 =ğ
NULL
) {

143 
rg‘
 = 
sü“n
;

146 
SDL_Reù
 
¤c_up
, 
¤c_down
, 
¤c_knob
;

148 
¤c_up
.
x
 = 0;

149 
¤c_up
.
w
 = 
pos_up
.w;

150 
¤c_up
.
h
 = 
pos_up
.h;

152 
¤c_down
.
x
 = 0;

153 
¤c_down
.
w
 = 
pos_down
.w;

154 
¤c_down
.
h
 = 
pos_down
.h;

156 
¤c_knob
.
x
 = 0;

157 
¤c_knob
.
y
 = 
pos_knob
.
h
 * 4;

158 
¤c_knob
.
w
 = 
pos_knob
.w;

159 
¤c_knob
.
h
 = 
pos_knob
.h;

161 ià(
´es£d_up
)

162 
¤c_up
.
y
 = 
pos_up
.
h
;

164 
¤c_up
.
y
 = 0;

166 ià(
´es£d_down
)

167 
¤c_down
.
y
 = 
pos_down
.
h
*3;

169 
¤c_down
.
y
 = 
pos_down
.
h
*2;

171 ià(
»nd”_to_®pha
) {

172 
	`SDL_gfxBl™RGBA
(
süŞlb¬s
, &
¤c_up
, 
rg‘
, &
pos_up
);

173 
	`SDL_gfxBl™RGBA
(
süŞlb¬s
, &
¤c_down
, 
rg‘
, &
pos_down
);

174 
	`SDL_gfxBl™RGBA
(
süŞlb¬s
, &
¤c_knob
, 
rg‘
, &
pos_knob
);

176 
	`SDL_Bl™Surçû
(
süŞlb¬s
, &
¤c_up
, 
rg‘
, &
pos_up
);

177 
	`SDL_Bl™Surçû
(
süŞlb¬s
, &
¤c_down
, 
rg‘
, &
pos_down
);

178 
	`SDL_Bl™Surçû
(
süŞlb¬s
, &
¤c_knob
, 
rg‘
, &
pos_knob
);

180 
	}
}

185 
	gWidg‘SüŞlB¬
::
	$»äesh
(
x
, 
y
, 
h
, 
v®
, 
max
) {

186 
maximum
 = 
max
;

187 
v®ue
 = 
v®
;

188 
pos_up
.
x
 = 
pos_down
.x = 
pos_knob
.x = x;

189 
pos_up
.
y
 = y;

190 
pos_down
.
y
 = y+
h
;

191 
b¬_height
 = 
pos_down
.
y
-pos_down.
h
-pos_down.h-
pos_up
.y+pos_up.h;

192 
	`£t
();

193 
	}
}

195 
	gWidg‘SüŞlB¬
::~
	$Widg‘SüŞlB¬
() {

196 
	`SDL_F»eSurçû
(
süŞlb¬s
);

197 
	}
}

	@WidgetScrollBar.h

24 #´agm¨
Úû


25 #iâdeà
WIDGET_SüŞlB¬_H


26 
	#WIDGET_SüŞlB¬_H


	)

28 
	~"Widg‘.h
"

30 
	~<SDL.h
>

31 
	~<SDL_image.h
>

32 
	~<SDL_mix”.h
>

34 
	~<¡ršg
>

37 şas 
	cWidg‘SüŞlB¬
 : 
public
 
Widg‘
 {

38 
´iv©e
:

40 
¡d
::
¡ršg
 
feName
;

42 
SDL_Surçû
 *
	msüŞlb¬s
;

43 
Mix_Chunk
 *
	mşick
;

45 
	mv®ue
;

46 
	mb¬_height
;

47 
	mmaximum
;

49 
	mpublic
:

50 
Widg‘SüŞlB¬
(cÚ¡ 
¡d
::
¡ršg
& 
_feName
);

51 ~
Widg‘SüŞlB¬
();

53 
lßdA¹
();

54 
checkClick
();

55 
checkClick
(
x
, 
y
);

56 
£t
();

57 
g‘V®ue
();

58 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

59 
»äesh
(
x
, 
y
, 
h
, 
v®
, 
max
);

61 
SDL_Reù
 
	mpos_up
;

62 
SDL_Reù
 
	mpos_down
;

63 
SDL_Reù
 
	mpos_knob
;

64 
boŞ
 
	m´es£d_up
;

65 
boŞ
 
	m´es£d_down
;

66 
boŞ
 
	m´es£d_knob
;

	@WidgetScrollBox.cpp

23 
	~"Widg‘SüŞlBox.h
"

24 
	~"SDL_gfxBl™Func.h
"

26 
usšg
 
Çme¥aû
 
	g¡d
;

28 
	gWidg‘SüŞlBox
::
	$Widg‘SüŞlBox
(
width
, 
height
) {

29 
pos
.
x
 =…os.
y
 = 0;

30 
pos
.
w
 = 
width
;

31 
pos
.
h
 = 
height
;

32 
cursÜ
 = 0;

33 
bg
.
r
 = bg.
g
 = bg.
b
 = 0;

34 
cÚ‹Ás
 = 
NULL
;

35 
süŞlb¬
 = 
Ãw
 
	`Widg‘SüŞlB¬
(
mods
->
	`loÿ‹
("images/menus/buttons/scrollbar_default.png"));

36 
upd©e
 = 
Œue
;

37 
»nd”_to_®pha
 = 
çl£
;

38 
	`»size
(
height
);

39 
	}
}

41 
	gWidg‘SüŞlBox
::~
	$Widg‘SüŞlBox
() {

42 ià(
cÚ‹Ás
 !ğ
NULL
è
	`SDL_F»eSurçû
(contents);

43 
d–‘e
 
süŞlb¬
;

44 
	}
}

46 
	gWidg‘SüŞlBox
::
	$süŞl
(
amouÁ
) {

47 
cursÜ
 +ğ
amouÁ
;

48 ià(
cursÜ
 < 0) {

49 
cursÜ
 = 0;

50 } ià(
cursÜ
 > 
cÚ‹Ás
->
h
-
pos
.h) {

51 
cursÜ
 = 
cÚ‹Ás
->
h
-
pos
.h;

53 
	`»äesh
();

54 
	}
}

56 
Pošt
 
	gWidg‘SüŞlBox
::
	$šput_assi¡
(
Pošt
 
mou£
) {

57 
Pošt
 
Ãw_mou£
;

58 
Ãw_mou£
.
x
 = 
mou£
.x-
pos
.x;

59 
Ãw_mou£
.
y
 = 
mou£
.y-
pos
.y+
cursÜ
;

60  
Ãw_mou£
;

61 
	}
}

63 
	gWidg‘SüŞlBox
::
	$logic
() {

64 
	`logic
(
š±
->
mou£
.
x
,š±->mou£.
y
);

65 
	}
}

67 
	gWidg‘SüŞlBox
::
	$logic
(
x
, 
y
) {

68 
Pošt
 
	`mou£
(
x
, 
y
);

70 ià(
	`isW™hš
(
pos
,
mou£
)) {

71 ià(
š±
->
süŞl_up
) {

72 
	`süŞl
(-20);

73 
š±
->
	`»£tSüŞl
();

75 ià(
š±
->
süŞl_down
) {

76 
	`süŞl
(20);

77 
š±
->
	`»£tSüŞl
();

80 
š±
->
	`»£tSüŞl
();

84 ià(
cÚ‹Ás
->
h
 > 
pos
.h) {

85 
süŞlb¬
->
	`checkClick
(
mou£
.
x
,mou£.
y
)) {

87 
	`süŞl
(-20);

90 
	`süŞl
(20);

93 
cursÜ
 = 
süŞlb¬
->
	`g‘V®ue
();

99 
	}
}

101 
	gWidg‘SüŞlBox
::
	$»size
(
h
) {

102 ià(
cÚ‹Ás
 !ğ
NULL
è
	`SDL_F»eSurçû
(contents);

104 ià(
pos
.
h
 > h) h =…os.h;

105 
cÚ‹Ás
 = 
	`ü—‹AÍhaSurçû
(
pos
.
w
,
h
);

106 
	`SDL_FlReù
(
cÚ‹Ás
,
NULL
,
	`SDL_M­RGB
(cÚ‹Ás->
fÜm©
,
bg
.
r
,bg.
g
,bg.
b
));

107 
	`SDL_S‘AÍha
(
cÚ‹Ás
, 0, 0);

109 
cursÜ
 = 0;

110 
	`»äesh
();

111 
	}
}

113 
	gWidg‘SüŞlBox
::
	$»äesh
() {

114 ià(
upd©e
) {

115 
h
 = 
pos
.h;

116 ià(
cÚ‹Ás
 !ğ
NULL
) {

117 
h
 = 
cÚ‹Ás
->h;

118 
	`SDL_F»eSurçû
(
cÚ‹Ás
);

121 
cÚ‹Ás
 = 
	`ü—‹AÍhaSurçû
(
pos
.
w
,
h
);

122 
	`SDL_FlReù
(
cÚ‹Ás
,
NULL
,
	`SDL_M­RGB
(cÚ‹Ás->
fÜm©
,
bg
.
r
,bg.
g
,bg.
b
));

123 
	`SDL_S‘AÍha
(
cÚ‹Ás
, 0, 0);

126 
süŞlb¬
->
	`»äesh
(
pos
.
x
+pos.
w
,…os.
y
,…os.
h
-süŞlb¬->
pos_down
.h, 
cursÜ
, 
cÚ‹Ás
->h-pos.h-süŞlb¬->
pos_knob
.h);

127 
	}
}

129 
	gWidg‘SüŞlBox
::
	$»nd”
(
SDL_Surçû
 *
rg‘
) {

130 ià(
rg‘
 =ğ
NULL
) {

131 
rg‘
 = 
sü“n
;

134 
SDL_Reù
 
¤c
,
de¡
;

135 
de¡
 = 
pos
;

136 
¤c
.
x
 = 0;

137 
¤c
.
y
 = 
cursÜ
;

138 
¤c
.
w
 = 
cÚ‹Ás
->w;

139 
¤c
.
h
 = 
pos
.h;

141 ià(
»nd”_to_®pha
)

142 
	`SDL_gfxBl™RGBA
(
cÚ‹Ás
, &
¤c
, 
rg‘
, &
de¡
);

144 
	`SDL_Bl™Surçû
(
cÚ‹Ás
, &
¤c
, 
rg‘
, &
de¡
);

145 ià(
cÚ‹Ás
->
h
 > 
pos
.hè
süŞlb¬
->
	`»nd”
(
rg‘
);

146 
upd©e
 = 
çl£
;

147 
	}
}

	@WidgetScrollBox.h

24 #´agm¨
Úû


25 #iâdeà
WIDGET_SCROLLBOX_H


26 
	#WIDGET_SCROLLBOX_H


	)

28 
	~"Sh¬edResourûs.h
"

29 
	~"Widg‘.h
"

30 
	~"Widg‘SüŞlB¬.h
"

32 
şass
 
	gWidg‘
;

34 şas 
	cWidg‘SüŞlBox
 : 
public
 
Widg‘
 {

35 
public
:

36 
Widg‘SüŞlBox
 (
width
, 
height
);

37 ~
Widg‘SüŞlBox
 ();

39 
Pošt
 
šput_assi¡
(Pošˆ
mou£
);

40 
logic
();

41 
logic
(
x
, 
y
);

42 
»size
(
h
);

43 
»äesh
();

44 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

46 
SDL_Surçû
 * 
	mcÚ‹Ás
;

47 
boŞ
 
	mupd©e
;

48 
SDL_CŞÜ
 
	mbg
;

50 
	m´iv©e
:

51 
süŞl
(
amouÁ
);

53 
	mcursÜ
;

54 
Widg‘SüŞlB¬
 * 
	msüŞlb¬
;

	@WidgetSlider.cpp

22 
	~<®gÜ™hm
>

23 
	~<io¡»am
>

24 
	~<¡ršg
>

25 
	~<SDL.h
>

26 
	~<SDL_image.h
>

28 
	~"Widg‘.h
"

29 
	~"Widg‘Slid”.h
"

30 
	~"Sh¬edResourûs.h
"

31 
	~"UtsDebug.h
"

32 
	~"SDL_gfxBl™Func.h
"

34 
usšg
 
Çme¥aû
 
	g¡d
;

36 
	gWidg‘Slid”
::
	$Widg‘Slid”
 (cÚ¡ 
¡ršg
 & 
âame
)

37 : 
	`imgFeName
(
âame
)

38 , 
	`¦
(
NULL
)

39 , 
	`´es£d
(
çl£
)

40 , 
	`mšimum
(0)

41 , 
	`maximum
(0)

42 , 
	$v®ue
(0)

44 
SDL_Surçû
 * 
tmp
 = 
	`IMG_Lßd
(
imgFeName
.
	`c_¡r
());

45 ià(
NULL
 =ğ
tmp
) {

46 
	`årštf
(
¡d”r
, "Could‚ot†oad image \"%s\"ƒrror \"%s\"\n",

47 
imgFeName
.
	`c_¡r
(), 
	`IMG_G‘E¼Ü
());

48 
	`SDL_Qu™
();

49 
	`ex™
(1);

51 
¦
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(
tmp
);

52 
	`SDL_F»eSurçû
(
tmp
);

54 
pos
.
w
 = 
¦
->w;

55 
pos
.
h
 = 
¦
->h / 2;

57 
pos_knob
.
w
 = 
¦
->w / 8;

58 
pos_knob
.
h
 = 
¦
->h / 2;

60 
»nd”_to_®pha
 = 
çl£
;

61 
	}
}

63 
	gWidg‘Slid”
::~
	$Widg‘Slid”
 ()

65 
	`SDL_F»eSurçû
(
¦
);

66 
	}
}

69 
boŞ
 
	gWidg‘Slid”
::
	$checkClick
() {

70 ià(
	`checkClick
(
š±
->
mou£
.
x
,š±->mou£.
y
))

71  
Œue
;

73  
çl£
;

74 
	}
}

77 
boŞ
 
	gWidg‘Slid”
::
	$checkClick
 (
x
, 
y
)

79 
Pošt
 
	`mou£
(
x
, 
y
);

83 ià(!
´es£d
 && 
š±
->
´essšg
[
MAIN1
] && !š±->
lock
[MAIN1]) {

84 ià(
	`isW™hš
(
pos_knob
, 
mou£
)) {

85 
´es£d
 = 
Œue
;

86 
š±
->
lock
[
MAIN1
] = 
Œue
;

87  
Œue
;

89  
çl£
;

91 ià(
´es£d
) {

96 
SDL_Reù
 
tmp_pos
;

97 
tmp_pos
.
x
 = 
pos
.x - (
pos_knob
.
w
*2);

98 
tmp_pos
.
y
 = 
pos
.y;

99 
tmp_pos
.
w
 = 
pos
.w + (
pos_knob
.w*4);

100 
tmp_pos
.
h
 = 
pos
.h;

102 ià(!
	`isW™hš
(
tmp_pos
, 
mou£
)) {

103 
´es£d
 = 
çl£
;

104  
çl£
;

106 ià(!
š±
->
lock
[
MAIN1
]) {

107 
´es£d
 = 
çl£
;

111 
tmp
 = 
¡d
::
	`max
(0, std::
	`mš
(
mou£
.
x
 - 
pos
.x, 
¡©ic_ÿ¡
<>Õos.
w
)));

113 
pos_knob
.
x
 = 
pos
.x + 
tmp
 - (pos_knob.
w
/2);

114 
v®ue
 = 
mšimum
 + (
tmp
*(
maximum
-mšimum))/
pos
.
w
;

116  
Œue
;

118  
çl£
;

119 
	}
}

122 
	gWidg‘Slid”
::
	$£t
 (
mš
, 
max
, 
v®
)

124 
mšimum
 = 
mš
;

125 
maximum
 = 
max
;

126 
v®ue
 = 
v®
;

128 
pos_knob
.
x
 = 
pos
.x + ((
v®
-
mš
)*…os.
w
)/(
max
-min) - (pos_knob.w/2);

129 
pos_knob
.
y
 = 
pos
.y;

130 
	}
}

133 
	gWidg‘Slid”
::
	$g‘V®ue
 () const

135  
v®ue
;

136 
	}
}

139 
	gWidg‘Slid”
::
	$»nd”
 (
SDL_Surçû
 *
rg‘
)

141 ià(
rg‘
 =ğ
NULL
) {

142 
rg‘
 = 
sü“n
;

145 
SDL_Reù
 
ba£
;

146 
ba£
.
x
 = 0;

147 
ba£
.
y
 = 0;

148 
ba£
.
h
 = 
pos
.h;

149 
ba£
.
w
 = 
pos
.w;

151 
SDL_Reù
 
knob
;

152 
knob
.
x
 = 0;

153 
knob
.
y
 = 
pos
.
h
;

154 
knob
.
h
 = 
pos_knob
.h;

155 
knob
.
w
 = 
pos_knob
.w;

157 ià(
»nd”_to_®pha
) {

158 
	`SDL_gfxBl™RGBA
(
¦
, &
ba£
, 
rg‘
, &
pos
);

159 
	`SDL_gfxBl™RGBA
(
¦
, &
knob
, 
rg‘
, &
pos_knob
);

161 
	`SDL_Bl™Surçû
(
¦
, &
ba£
, 
rg‘
, &
pos
);

162 
	`SDL_Bl™Surçû
(
¦
, &
knob
, 
rg‘
, &
pos_knob
);

164 
	}
}

	@WidgetSlider.h

23 #´agm¨
Úû


24 #iâdeà
WIDGET_SLIDER_H


25 
	#WIDGET_SLIDER_H


	)

27 
şass
 
	gWidg‘
;

29 şas 
	cWidg‘Slid”
 : 
public
 
Widg‘
 {

30 
public
:

31 
Widg‘Slid”
 (cÚ¡ 
¡d
::
¡ršg
 & 
âame
);

32 ~
Widg‘Slid”
 ();

34 
boŞ
 
checkClick
 ();

35 
boŞ
 
checkClick
 (
x
, 
y
);

36 
£t
 (
mš
, 
max
, 
v®
);

37 
	$g‘V®ue
 () const;

38 
	`»nd”
 (
SDL_Surçû
 *
rg‘
 = 
NULL
);

40 
SDL_Reù
 
pos_knob
;

42 
´iv©e
:

43 
¡d
::
¡ršg
 
imgFeName
;

44 
SDL_Surçû
 * 
¦
;

45 
boŞ
 
´es£d
;

46 
mšimum
;

47 
maximum
;

48 
v®ue
;

	@WidgetTabControl.cpp

18 
	~"Widg‘TabCÚŒŞ.h
"

19 
	~"Widg‘Lab–.h
"

21 
usšg
 
Çme¥aû
 
	g¡d
;

28 
	gWidg‘TabCÚŒŞ
::
	$Widg‘TabCÚŒŞ
(
amouÁ
) {

31 
bsAmouÁ
 = 
amouÁ
;

32 
t™Ës
 = 
Ãw
 
¡d
::
¡ršg
[
bsAmouÁ
];

33 
bs
 = 
Ãw
 
SDL_Reù
[
bsAmouÁ
];

36 
aùiveTab
 = 0;

37 
bPaddšg
.
x
 = 8;

38 
bPaddšg
.
y
 = 4;

41 
	`lßdG¿phics
();

43 
cŞÜ_nÜm®
 = 
fÚt
->
	`g‘CŞÜ
("widget_normal");

44 
cŞÜ_di§bËd
 = 
fÚt
->
	`g‘CŞÜ
("widget_disabled");

45 
	}
}

49 
	gWidg‘TabCÚŒŞ
::~
	$Widg‘TabCÚŒŞ
() {

50 
	`SDL_F»eSurçû
(
aùiveTabSurçû
);

51 
	`SDL_F»eSurçû
(
šaùiveTabSurçû
);

52 
d–‘e
[] 
t™Ës
;

53 
d–‘e
[] 
bs
;

54 
	}
}

63 
	gWidg‘TabCÚŒŞ
::
£tTabT™Ë
(
numb”
, cÚ¡ 
¡d
::
¡ršg
& 
t™Ë
) {

64 
t™Ës
[
numb”
] = 
t™Ë
;

72 
	gWidg‘TabCÚŒŞ
::
	$g‘AùiveTab
() {

73  
aùiveTab
;

74 
	}
}

84 
	gWidg‘TabCÚŒŞ
::
	$£tMašA»a
(
x
, 
y
, 
width
, 
height
)

87 
bsA»a
.
x
 = x;

88 
bsA»a
.
y
 = y;

89 
bsA»a
.
w
 = 
width
;

90 
bsA»a
.
h
 = 
aùiveTabSurçû
->h;

93 
cÚ‹ÁA»a
.
x
 = x + 8;

94 
cÚ‹ÁA»a
.
y
 = y + 
bsA»a
.
h
+8;

95 
cÚ‹ÁA»a
.
w
 = 
width
 - 16;

96 
cÚ‹ÁA»a
.
h
 = 
height
 - 
bsA»a
.h;

97 
	}
}

104 
	gWidg‘TabCÚŒŞ
::
	$upd©eH—d”
()

106 
i
=0; i<
bsAmouÁ
; i++) {

107 
bs
[
i
].
y
 = 
bsA»a
.y;

108 
bs
[
i
].
h
 = 
bsA»a
.h;

110 ià(
i
==0è
bs
[i].
x
 = 
bsA»a
.x;

111 
bs
[
i
].
x
 =abs[i-1].x +abs[i-1].
w
;

113 
bs
[
i
].
w
 = 
bPaddšg
.
x
 + 
fÚt
->
	`ÿlc_width
(
t™Ës
[i]) +abPadding.x;

116 
	}
}

121 
	gWidg‘TabCÚŒŞ
::
	$lßdG¿phics
()

123 
aùiveTabSurçû
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/b_aùive.²g").
	`c_¡r
());

124 
šaùiveTabSurçû
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/m’us/b_šaùive.²g").
	`c_¡r
());

126 if(!
aùiveTabSurçû
 || !
šaùiveTabSurçû
) {

127 
	`årštf
(
¡d”r
, "Could‚Ù†ßd image: %s\n", 
	`IMG_G‘E¼Ü
());

128 
	`SDL_Qu™
();

129 
	`ex™
(1);

132 
SDL_Surçû
 *
ş—nup
;

134 
ş—nup
 = 
aùiveTabSurçû
;

135 
aùiveTabSurçû
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(activeTabSurface);

136 
	`SDL_F»eSurçû
(
ş—nup
);

138 
ş—nup
 = 
šaùiveTabSurçû
;

139 
šaùiveTabSurçû
 = 
	`SDL_Di¥ÏyFÜm©AÍha
(inactiveTabSurface);

140 
	`SDL_F»eSurçû
(
ş—nup
);

141 
	}
}

143 
	gWidg‘TabCÚŒŞ
::
	$logic
()

145 
	`logic
(
š±
->
mou£
.
x
,š±->mou£.
y
);

146 
	}
}

153 
	gWidg‘TabCÚŒŞ
::
	$logic
(
x
, 
y
)

155 
Pošt
 
	`mou£
(
x
, 
y
);

157 if(
	`isW™hš
(
bsA»a
, 
mou£
è&& 
š±
->
´essšg
[
MAIN1
]) {

159 
i
=0; i<
bsAmouÁ
; i++) {

160 if(
	`isW™hš
(
bs
[
i
], 
mou£
)) {

161 
aùiveTab
 = 
i
;

166 
	}
}

173 
	gWidg‘TabCÚŒŞ
::
	$»nd”
(
SDL_Surçû
 *
rg‘
)

175 ià(
rg‘
 =ğ
NULL
) {

176 
rg‘
 = 
sü“n
;

178 
i
=0; i<
bsAmouÁ
; i++) {

179 
	`»nd”Tab
(
i
,
rg‘
);

181 
	}
}

186 
	gWidg‘TabCÚŒŞ
::
	$»nd”Tab
(
numb”
, 
SDL_Surçû
 *
rg‘
)

188 
i
 = 
numb”
;

189 
SDL_Reù
 
¤c
;

190 
SDL_Reù
 
de¡
;

193 
¤c
.
x
 = src.
y
 = 0;

194 
de¡
.
x
 = 
bs
[
i
].x;

195 
de¡
.
y
 = 
bs
[
i
].y;

196 
¤c
.
w
 = 
bs
[
i
].w;

197 
¤c
.
h
 = 
bs
[
i
].h;

199 ià(
i
 =ğ
aùiveTab
)

200 
	`SDL_Bl™Surçû
(
aùiveTabSurçû
, &
¤c
, 
rg‘
, &
de¡
);

202 
	`SDL_Bl™Surçû
(
šaùiveTabSurçû
, &
¤c
, 
rg‘
, &
de¡
);

205 
¤c
.
x
 = 
aùiveTabSurçû
->
w
 - 
bPaddšg
.x;

206 
¤c
.
w
 = 
bPaddšg
.
x
;

207 
de¡
.
x
 = 
bs
[
i
].x +abs[i].
w
 - 
bPaddšg
.x;

209 ià(
i
 =ğ
aùiveTab
)

210 
	`SDL_Bl™Surçû
(
aùiveTabSurçû
, &
¤c
, 
rg‘
, &
de¡
);

212 
	`SDL_Bl™Surçû
(
šaùiveTabSurçû
, &
¤c
, 
rg‘
, &
de¡
);

215 
SDL_CŞÜ
 
fÚtCŞÜ
;

216 ià(
i
 =ğ
aùiveTab
è
fÚtCŞÜ
 = 
cŞÜ_nÜm®
;

217 
fÚtCŞÜ
 = 
cŞÜ_di§bËd
;

220 
Widg‘Lab–
 
Ïb–
;

221 
Ïb–
.
	`£t
(
bs
[
i
].
x
 + 
bPaddšg
.x,abs[i].
y
 +abs[i].
h
/2, 
JUSTIFY_LEFT
, 
VALIGN_CENTER
, 
t™Ës
[i], 
fÚtCŞÜ
);

222 
Ïb–
.
	`»nd”
(
rg‘
);

223 
	}
}

228 
SDL_Reù
 
	gWidg‘TabCÚŒŞ
::
	$g‘CÚ‹ÁA»a
()

230  
cÚ‹ÁA»a
;

231 
	}
}

	@WidgetTabControl.h

19 #´agm¨
Úû


20 #iâdeà
MENU_TAB_CONTROL_H


21 
	#MENU_TAB_CONTROL_H


	)

23 
	~"Sh¬edResourûs.h
"

25 
	~<SDL.h
>

26 
	~<SDL_image.h
>

28 
	~<¡ršg
>

30 şas 
	cWidg‘TabCÚŒŞ
 {

32 
	m´iv©e
:

34 
SDL_Surçû
 *
aùiveTabSurçû
;

35 
SDL_Surçû
 *
	mšaùiveTabSurçû
;

37 
	m¡d
::
¡ršg
 *
t™Ës
;

38 
	maùiveTab
;

39 
	mbsAmouÁ
;

41 
SDL_Reù
 *
	mbs
;

42 
SDL_Reù
 
	mbsA»a
;

43 
SDL_Reù
 
	mcÚ‹ÁA»a
;

44 
Pošt
 
	mbPaddšg
;

45 
SDL_CŞÜ
 
	mcŞÜ_nÜm®
;

46 
SDL_CŞÜ
 
	mcŞÜ_di§bËd
;

48 
lßdG¿phics
();

50 
»nd”Tab
(
numb”
, 
SDL_Surçû
 *
rg‘
);

52 
	mpublic
:

54 
Widg‘TabCÚŒŞ
(
amouÁ
);

55 
Widg‘TabCÚŒŞ
(cÚ¡ Widg‘TabCÚŒŞ &
cİy
);

56 ~
Widg‘TabCÚŒŞ
();

58 
£tTabT™Ë
(
numb”
, cÚ¡ 
¡d
::
¡ršg
& 
t™Ë
);

59 
£tMašA»a
(
x
, 
y
, 
width
, 
height
);

61 
g‘AùiveTab
();

62 
	$£tAùiveTab
(
b
è{ 
aùiveTab
 =ab; }

63 
SDL_Reù
 
	`g‘CÚ‹ÁA»a
();

64 
	$g‘TabHeight
(è{  
aùiveTabSurçû
->
h
; 
	}
}

66 
upd©eH—d”
();

68 
logic
();

69 
logic
(
x
, 
y
);

70 
»nd”
(
SDL_Surçû
 *
rg‘
 = 
NULL
);

	@WidgetTooltip.cpp

23 
	~"FeP¬£r.h
"

24 
	~"Widg‘ToŞt.h
"

25 
	~"S‘tšgs.h
"

26 
	~"Uts.h
"

27 
	~"UtsP¬sšg.h
"

29 
usšg
 
Çme¥aû
 
	g¡d
;

31 
	gTOOLTIP_CONTEXT
 = 
TOOLTIP_NONE
;

33 
	gWidg‘ToŞt
::
	$Widg‘ToŞt
() {

35 
FeP¬£r
 
šfe
;

37 ià(
šfe
.
	`İ’
(
mods
->
	`loÿ‹
("’gše/toŞts.txt").
	`c_¡r
())) {

38 
šfe
.
	`Ãxt
()) {

39 ià(
šfe
.
key
 == "tooltip_offset")

40 
off£t
 = 
	`toIÁ
(
šfe
.
v®
);

41 ià(
šfe
.
key
 == "tooltip_width")

42 
width
 = 
	`toIÁ
(
šfe
.
v®
);

43 ià(
šfe
.
key
 == "tooltip_margin")

44 
m¬gš
 = 
	`toIÁ
(
šfe
.
v®
);

46 
šfe
.
	`şo£
();

48 
	`årštf
(
¡d”r
, "Unableo openƒngine/tooltips.txt!\n");

50 
	}
}

56 
Pošt
 
	gWidg‘ToŞt
::
	$ÿlcPos™iÚ
(
¡yË
, 
Pošt
 
pos
, Pošˆ
size
) {

58 
Pošt
 
t_pos
;

61 ià(
¡yË
 =ğ
STYLE_TOPLABEL
) {

62 
t_pos
.
x
 = 
pos
.x - 
size
.x/2;

63 
t_pos
.
y
 = 
pos
.y - 
off£t
;

68 ià(
¡yË
 =ğ
STYLE_FLOAT
) {

70 ià(
pos
.
x
 < 
VIEW_W_HALF
 &&…os.
y
 < 
VIEW_H_HALF
) {

71 
t_pos
.
x
 = 
pos
.x + 
off£t
;

72 
t_pos
.
y
 = 
pos
.y + 
off£t
;

75 ià(
pos
.
x
 >ğ
VIEW_W_HALF
 &&…os.
y
 < 
VIEW_H_HALF
) {

76 
t_pos
.
x
 = 
pos
.x - 
off£t
 - 
size
.x;

77 
t_pos
.
y
 = 
pos
.y + 
off£t
;

80 ià(
pos
.
x
 < 
VIEW_W_HALF
 &&…os.
y
 >ğ
VIEW_H_HALF
) {

81 
t_pos
.
x
 = 
pos
.x + 
off£t
;

82 
t_pos
.
y
 = 
pos
.y - 
off£t
 - 
size
.y;

85 ià(
pos
.
x
 >ğ
VIEW_W_HALF
 &&…os.
y
 >ğ
VIEW_H_HALF
) {

86 
t_pos
.
x
 = 
pos
.x - 
off£t
 - 
size
.x;

87 
t_pos
.
y
 = 
pos
.y - 
off£t
 - 
size
.y;

91  
t_pos
;

92 
	}
}

98 
	gWidg‘ToŞt
::
	$»nd”
(
ToŞtD©a
 &
t
, 
Pošt
 
pos
, 
¡yË
, 
SDL_Surçû
 *
rg‘
) {

99 ià(
rg‘
 =ğ
NULL
) {

100 
rg‘
 = 
sü“n
;

103 ià(
t
.
t_bufãr
 =ğ
NULL
) {

104 
	`ü—‹Bufãr
(
t
);

107 
Pošt
 
size
;

108 
size
.
x
 = 
t
.
t_bufãr
->
w
;

109 
size
.
y
 = 
t
.
t_bufãr
->
h
;

111 
Pošt
 
t_pos
 = 
	`ÿlcPos™iÚ
(
¡yË
, 
pos
, 
size
);

113 
SDL_Reù
 
de¡
;

114 
de¡
.
x
 = 
t_pos
.x;

115 
de¡
.
y
 = 
t_pos
.y;

117 
	`SDL_Bl™Surçû
(
t
.
t_bufãr
, 
NULL
, 
rg‘
, &
de¡
);

118 
	}
}

124 
	gWidg‘ToŞt
::
	$ü—‹Bufãr
(
ToŞtD©a
 &
t
) {

126 ià(
t
.
lšes
.
	`em±y
()) {

127 
t
.
lšes
.
	`»size
(1);

128 
t
.
cŞÜs
.
	`»size
(1);

132 
¡ršg
 
fuÎ‹xt
;

133 
fuÎ‹xt
 = 
t
.
lšes
[0];

134 
i
=1; i<
t
.
lšes
.
	`size
(); i++) {

135 
fuÎ‹xt
 = fuÎ‹xˆ+ "\n" + 
t
.
lšes
[
i
];

138 
fÚt
->
	`£tFÚt
("font_regular");

141 
Pošt
 
size
 = 
fÚt
->
	`ÿlc_size
(
fuÎ‹xt
, 
width
);

144 
t
.
t_bufãr
 = 
	`ü—‹AÍhaSurçû
(
size
.
x
 + 
m¬gš
+m¬gš, size.
y
 + margin+margin);

147 
	`SDL_S‘AÍha
(
t
.
t_bufãr
, 0, 0);

151 
	`SDL_FlReù
(
t
.
t_bufãr
, 
NULL
, 0);

153 
cursÜ_y
 = 
m¬gš
;

155 
i
=0; i<
t
.
lšes
.
	`size
(); i++) {

156 
fÚt
->
	`»nd”
(
t
.
lšes
[
i
], 
m¬gš
, 
cursÜ_y
, 
JUSTIFY_LEFT
,.
t_bufãr
, 
size
.
x
,.
cŞÜs
[i]);

157 
cursÜ_y
 = 
fÚt
->cursor_y;

160 
	}
}

	@WidgetTooltip.h

24 #´agm¨
Úû


25 #iâdeà
WIDGET_TOOLTIP_H


26 
	#WIDGET_TOOLTIP_H


	)

28 
	~"Sh¬edResourûs.h
"

29 
	~"Uts.h
"

31 
	~<SDL.h
>

32 
	~<SDL_image.h
>

34 
	~<veùÜ
>

36 cÚ¡ 
	gSTYLE_FLOAT
 = 0;

37 cÚ¡ 
	gSTYLE_TOPLABEL
 = 1;

39 
TOOLTIP_CONTEXT
;

40 cÚ¡ 
	gTOOLTIP_NONE
 = 0;

41 cÚ¡ 
	gTOOLTIP_MAP
 = 1;

42 cÚ¡ 
	gTOOLTIP_MENU
 = 2;

54 şas 
	cToŞtD©a
 {

55 
	mpublic
:

56 
¡d
::
veùÜ
<¡d::
¡ršg
> 
lšes
;

57 
	m¡d
::
veùÜ
<
SDL_CŞÜ
> 
cŞÜs
;

58 
SDL_Surçû
 *
	mt_bufãr
;

59 
SDL_CŞÜ
 
	mdeçuÉ_cŞÜ
;

62 
	$ToŞtD©a
() {

63 
t_bufãr
 = 
NULL
;

64 
deçuÉ_cŞÜ
 = 
fÚt
->
	`g‘CŞÜ
("widget_normal");

68 ~
	$ToŞtD©a
() {

69 
	`SDL_F»eSurçû
(
t_bufãr
);

70 
	}
}

73 
	$ToŞtD©a
(cÚ¡ 
ToŞtD©a
 &
tdSourû
) {

78 
t_bufãr
 = 
NULL
;

80 
lšes
.
	`ş—r
();

81 
cŞÜs
.
	`ş—r
();

83 
i
=0; i<
tdSourû
.
lšes
.
	`size
(); i++) {

84 
lšes
.
	`push_back
(
tdSourû
.lšes[
i
]);

85 
cŞÜs
.
	`push_back
(
tdSourû
.cŞÜs[
i
]);

87 
	}
}

90 
	gToŞtD©a
& 
	gİ”©Ü
ğ(cÚ¡ 
ToŞtD©a
 &
tdSourû
) {

92 
ş—r
();

94 
	gi
=0; i<
	gtdSourû
.
	glšes
.
size
(); i++) {

95 
	glšes
.
push_back
(
tdSourû
.
lšes
[
i
]);

96 
	gcŞÜs
.
push_back
(
tdSourû
.
cŞÜs
[
i
]);

99  *
	gthis
;

103 
	$ş—r
() {

104 
lšes
.
	`ş—r
();

105 
cŞÜs
.
	`ş—r
();

106 
	`SDL_F»eSurçû
(
t_bufãr
);

107 
t_bufãr
 = 
NULL
;

108 
	}
}

111 
addText
(cÚ¡ 
¡d
::
¡ršg
 &
‹xt
, 
SDL_CŞÜ
 
cŞÜ
) {

112 
	glšes
.
push_back
("");

113 
	gcŞÜs
.
push_back
(
cŞÜ
);

114 
	gi
=0; i<
	glšes
.
size
(); i++) {

115 ià(
	glšes
[
i
] == "") {

116 
cŞÜs
[
i
] = 
cŞÜ
;

117 
	gj
=0; j<
	g‹xt
.
Ëngth
(); j++) {

118 ià(
	g‹xt
[
j
] == '\n') {

120 ià(
lšes
.
back
() == "")†ines.back() += ' ';

121 
	glšes
.
push_back
("");

122 
	gcŞÜs
.
push_back
(
cŞÜ
);

124 
	glšes
.
back
(è+ğ
‹xt
[
j
];

132 
addText
(cÚ¡ 
¡d
::
¡ršg
 &
‹xt
) {

133 
addText
(
‹xt
,
deçuÉ_cŞÜ
);

137 
boŞ
 
	$isEm±y
() {

138 ià(!
lšes
.
	`em±y
()è 
çl£
;

139  
Œue
;

140 
	}
}

143 
boŞ
 
com·»Fœ¡Lše
(cÚ¡ 
¡d
::
¡ršg
 &
‹xt
) {

144 ià(
lšes
.
em±y
()è 
çl£
;

145 ià(
	glšes
[0] !ğ
‹xt
è 
çl£
;

146  
	gŒue
;

150 
boŞ
 
	$com·»
(cÚ¡ 
ToŞtD©a
 *
t
) {

151 ià(
lšes
.
	`size
(è!ğ
t
->lšes.size()è 
çl£
;

152 
i
=0; i<
lšes
.
	`size
(); i++) {

153 ià(
lšes
[
i
] !ğ
t
->lšes[i]è 
çl£
;

155  
Œue
;

156 
	}
}

160 şas 
	cWidg‘ToŞt
 {

161 
	m´iv©e
:

162 
off£t
;

163 
	mwidth
;

164 
	mm¬gš
;

165 
	mpublic
:

166 
Widg‘ToŞt
();

167 
Pošt
 
ÿlcPos™iÚ
(
¡yË
, Pošˆ
pos
, Pošˆ
size
);

168 
»nd”
(
ToŞtD©a
 &
t
, 
Pošt
 
pos
, 
¡yË
, 
SDL_Surçû
 *
rg‘
 = 
NULL
);

169 
ü—‹Bufãr
(
ToŞtD©a
 &
t
);

	@main.cpp

19 
	~<io¡»am
>

20 
	~<c¡dio
>

21 
	~<c¡dlib
>

22 
	~<c¡ršg
>

23 
	~<cm©h
>

24 
	~<ùime
>

25 
	~<®gÜ™hm
>

26 
	~<SDL.h
>

27 
	~<SDL_image.h
>

28 
	~<SDL_mix”.h
>

30 
usšg
 
Çme¥aû
 
	g¡d
;

32 
	~"S‘tšgs.h
"

33 
	~"GameSw™ch”.h
"

34 
	~"Sh¬edResourûs.h
"

36 
GameSw™ch”
 *
	ggsw™ch
;

37 
SDL_Surçû
 *
	gt™Ëb¬_icÚ
;

42 
	$š™
() {

44 
	`£tP©hs
();

47 iàĞ
	`SDL_In™
 (
SDL_INIT_VIDEO
 | 
SDL_INIT_AUDIO
 | 
SDL_INIT_JOYSTICK
) < 0 ) {

48 
	`årštf
(
¡d”r
, "Could‚Ù in™ŸlizSDL: %s\n", 
	`SDL_G‘E¼Ü
());

49 
	`ex™
(1);

54 
mods
 = 
Ãw
 
	`ModMªag”
();

56 ià(!
	`lßdS‘tšgs
()) {

57 
	`årštf
(
¡d”r
, "%s",

58 ("Could‚Ù†ßd s‘tšg fe: â€˜" + 
PATH_CONF
 + 
FILE_SETTINGS
 + "â€™.\n").
	`c_¡r
());

59 
	`ex™
(1);

62 
msg
 = 
Ãw
 
	`Mes§geEngše
();

63 
fÚt
 = 
Ãw
 
	`FÚtEngše
();

64 
ªim
 = 
Ãw
 
	`Anim©iÚMªag”
();

65 
comb
 = 
Ãw
 
	`Comb©Text
();

66 
imag
 = 
Ãw
 
	`ImageMªag”
();

67 
š±
 = 
Ãw
 
	`IÅutS‹
();

70 
	`lßdTe£tS‘tšgs
();

73 
	`lßdMiscS‘tšgs
();

76 
t™Ëb¬_icÚ
 = 
	`IMG_Lßd
(
mods
->
	`loÿ‹
("images/logo/icÚ.²g").
	`c_¡r
());

77 
	`SDL_WM_S‘IcÚ
(
t™Ëb¬_icÚ
, 
NULL
);

80 
Ušt32
 
æags
 = 0;

82 ià(
FULLSCREEN
è
æags
 = fÏg | 
SDL_FULLSCREEN
;

83 ià(
DOUBLEBUF
è
æags
 = fÏg | 
SDL_DOUBLEBUF
;

84 ià(
HWSURFACE
)

85 
æags
 = fÏg | 
SDL_HWSURFACE
 | 
SDL_HWACCEL
;

87 
æags
 = fÏg | 
SDL_SWSURFACE
;

89 
sü“n
 = 
	`SDL_S‘VideoMode
 (
VIEW_W
, 
VIEW_H
, 0, 
æags
);

90 ià(
sü“n
 =ğ
NULL
) {

92 
	`årštf
 (
¡d”r
, "E¼Ü duršg SDL_S‘VideoMode: %s\n", 
	`SDL_G‘E¼Ü
());

93 
	`SDL_Qu™
();

94 
	`ex™
(1);

98 ià(
CHANGE_GAMMA
)

99 
	`SDL_S‘Gamma
(
GAMMA
,GAMMA,GAMMA);

101 ià(
AUDIO
 && 
	`Mix_O³nAudio
(22050, 
AUDIO_S16SYS
, 2, 1024)) {

102 
	`årštf
 (
¡d”r
, "E¼Ü duršg Mix_O³nAudio: %s\n", 
	`SDL_G‘E¼Ü
());

103 
AUDIO
 = 
çl£
;

106 
¢d
 = 
Ãw
 
	`SoundMªag”
();

109 if(
	`SDL_NumJoy¡icks
() == 1) {

110 
	`´štf
("1 joystick was found:\n");

112 if(
	`SDL_NumJoy¡icks
() > 1) {

113 
	`´štf
("%d joy¡ick w”found:\n", 
	`SDL_NumJoy¡icks
());

116 
	`´štf
("No joysticks were found.\n");

118 
i
 = 0; i < 
	`SDL_NumJoy¡icks
(); i++)

120 
	`´štf
(" Joy %dè%s\n", 
i
, 
	`SDL_Joy¡ickName
(i));

122 ià((
ENABLE_JOYSTICK
è&& (
	`SDL_NumJoy¡icks
(è> 0)è
joy
 = 
	`SDL_Joy¡ickO³n
(
JOYSTICK_DEVICE
);

123 
	`´štf
("Usšg joy¡ick #%d.\n", 
JOYSTICK_DEVICE
);

126 ià(
AUDIO
)

127 
	`Mix_VŞume
(-1, 
SOUND_VOLUME
);

130 cÚ¡ * 
t™Ë
 = 
msg
->
	`g‘
(
WINDOW_TITLE
).
	`c_¡r
();

131 
	`SDL_WM_S‘C­tiÚ
(
t™Ë
,itle);

134 
gsw™ch
 = 
Ãw
 
	`GameSw™ch”
();

135 
	}
}

137 
	$mašLoİ
 (
boŞ
 
debug_ev’t
) {

139 
boŞ
 
dÚe
 = 
çl£
;

140 
max_ås
 = 
MAX_FRAMES_PER_SEC
;

141 
d–ay
 = 1000/
max_ås
;

142 
´evTicks
 = 
	`SDL_G‘Ticks
();

144  !
dÚe
 ) {

146 
	`SDL_PumpEv’ts
();

147 
š±
->
	`hªdË
(
debug_ev’t
);

148 
gsw™ch
->
	`logic
();

151 
	`SDL_FlReù
(
sü“n
, 
NULL
, 0);

153 
gsw™ch
->
	`»nd”
();

157 
dÚe
 = 
gsw™ch
->dÚ|| 
š±
->done;

159 
nowTicks
 = 
	`SDL_G‘Ticks
();

160 ià(
nowTicks
 - 
´evTicks
 < 
d–ay
è
	`SDL_D–ay
(delay - (nowTicks -…revTicks));

161 
gsw™ch
->
	`showFPS
(1000 / (
	`SDL_G‘Ticks
(è- 
´evTicks
));

162 
´evTicks
 = 
	`SDL_G‘Ticks
();

164 
	`SDL_Fl
(
sü“n
);

166 
	}
}

168 
	$ş—nup
() {

169 
d–‘e
 
gsw™ch
;

171 
d–‘e
 
ªim
;

172 
d–‘e
 
comb
;

173 
d–‘e
 
fÚt
;

174 
d–‘e
 
imag
;

175 
d–‘e
 
š±
;

176 
d–‘e
 
mods
;

177 
d–‘e
 
msg
;

178 
d–‘e
 
¢d
;

180 
	`SDL_F»eSurçû
(
t™Ëb¬_icÚ
);

182 
	`Mix_Clo£Audio
();

183 
	`SDL_Qu™
();

184 
	}
}

186 
¡ršg
 
	$·r£Arg
(cÚ¡ 
¡ršg
 &
¬g
)

188 
¡ršg
 
»suÉ
 = "";

191 ià(
¬g
.
	`Ëngth
() > 2 &&‡rg[0] == '-' &&‡rg[1] == '-') {

192 
i
 = 2; i < 
¬g
.
	`Ëngth
(); ++i) {

193 ià(
¬g
[
i
] == '=') ;

194 
»suÉ
 +ğ
¬g
[
i
];

198  
»suÉ
;

199 
	}
}

201 
¡ršg
 
	$·r£ArgV®ue
(cÚ¡ 
¡ršg
 &
¬g
)

203 
¡ršg
 
»suÉ
 = "";

204 
boŞ
 
found_equ®s
 = 
çl£
;

206 
i
 = 0; i < 
¬g
.
	`Ëngth
(); ++i) {

207 ià(
found_equ®s
) {

208 
»suÉ
 +ğ
¬g
[
i
];

210 ià(
¬g
[
i
] =ğ'='è
found_equ®s
 = 
Œue
;

213  
»suÉ
;

214 
	}
}

216 
	$maš
(
¬gc
, *
¬gv
[])

218 
boŞ
 
debug_ev’t
 = 
çl£
;

220 
i
 = 1 ; i < 
¬gc
; i++) {

221 
¡ršg
 
¬g
 = 
	`¡ršg
(
¬gv
[
i
]);

222 ià(
	`·r£Arg
(
¬g
) == "debug_event") {

223 
debug_ev’t
 = 
Œue
;

224 } ià(
	`·r£Arg
(
¬g
) == "game_data") {

225 
USER_PATH_DATA
 = 
	`·r£ArgV®ue
(
¬g
);

226 ià(!
USER_PATH_DATA
.
	`em±y
(è&& USER_PATH_DATA.
	`©
(USER_PATH_DATA.
	`Ëngth
()-1) != '/')

227 
USER_PATH_DATA
 += "/";

231 
	`¤ªd
(()
	`time
(
NULL
));

233 
	`š™
();

234 
	`mašLoİ
(
debug_ev’t
);

235 
	`ş—nup
();

238 
	}
}

	@resource.h

1 
	#IDI_FLARE_APP_ICON
 101

	)

	@/usr/include/assert.h

24 #ifdef 
_ASSERT_H


26 #undeà
_ASSERT_H


27 #undeà
as£¹


28 #undeà
__ASSERT_VOID_CAST


30 #ifdef 
__USE_GNU


31 #undeà
as£¹_³¼Ü


36 
	#_ASSERT_H
 1

	)

37 
	~<ã©u»s.h
>

39 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,95)

40 
	#__ASSERT_VOID_CAST
 
¡©ic_ÿ¡
<>

	)

42 
	#__ASSERT_VOID_CAST
 ()

	)

50 #ifdef 
NDEBUG


52 
	#as£¹
(
ex´
è(
	`__ASSERT_VOID_CAST
 (0))

	)

60 #ifdef 
__USE_GNU


61 
	#as£¹_³¼Ü
(
”ºum
è(
	`__ASSERT_VOID_CAST
 (0))

	)

66 #iâdeà
_ASSERT_H_DECLS


67 
	#_ASSERT_H_DECLS


	)

68 
__BEGIN_DECLS


71 
	$__as£¹_ç
 (
__cÚ¡
 *
__as£¹iÚ
, __cÚ¡ *
__fe
,

72 
__lše
, 
__cÚ¡
 *
__funùiÚ
)

73 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

76 
	$__as£¹_³¼Ü_ç
 (
__”ºum
, 
__cÚ¡
 *
__fe
,

77 
__lše
,

78 
__cÚ¡
 *
__funùiÚ
)

79 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

84 
	$__as£¹
 (cÚ¡ *
__as£¹iÚ
, cÚ¡ *
__fe
, 
__lše
)

85 
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

88 
__END_DECLS


91 
	#as£¹
(
ex´
) \

92 ((
ex´
) \

93 ? 
	`__ASSERT_VOID_CAST
 (0) \

94 : 
	`__as£¹_ç
 (
	`__STRING
(
ex´
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

96 #ifdef 
__USE_GNU


97 
	#as£¹_³¼Ü
(
”ºum
) \

98 (!(
”ºum
) \

99 ? 
	`__ASSERT_VOID_CAST
 (0) \

100 : 
	`__as£¹_³¼Ü_ç
 ((
”ºum
), 
__FILE__
, 
__LINE__
, 
__ASSERT_FUNCTION
))

	)

108 #ià
defšed
 
__ılu¥lus
 ? 
	`__GNUC_PREREQ
 (2, 6) : __GNUC_PREREQ (2, 4)

109 
	#__ASSERT_FUNCTION
 
__PRETTY_FUNCTION__


	)

111 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

112 
	#__ASSERT_FUNCTION
 
__func__


	)

114 
	#__ASSERT_FUNCTION
 ((
__cÚ¡
 *è0)

	)

	@/usr/include/dirent.h

23 #iâdef 
_DIRENT_H


24 
	#_DIRENT_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


30 
	~<b™s/ty³s.h
>

32 #ifdeà
__USE_XOPEN


33 #iâdeà
__šo_t_defšed


34 #iâdeà
__USE_FILE_OFFSET64


35 
__šo_t
 
	tšo_t
;

37 
__šo64_t
 
	tšo_t
;

39 
	#__šo_t_defšed


	)

41 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


42 
__šo64_t
 
	tšo64_t
;

43 
	#__šo64_t_defšed


	)

62 
	~<b™s/dœ’t.h
>

64 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
è&& !defšed 
d_f’o


65 
	#d_šo
 
d_f’o


	)

82 #ifdeà
_DIRENT_HAVE_D_NAMLEN


83 
	#_D_EXACT_NAMLEN
(
d
è((d)->
d_ÇmËn
)

	)

84 
	#_D_ALLOC_NAMLEN
(
d
è(
	`_D_EXACT_NAMLEN
 (dè+ 1)

	)

86 
	#_D_EXACT_NAMLEN
(
d
è(
	`¡¾’
 ((d)->
d_Çme
))

	)

87 #ifdeà
_DIRENT_HAVE_D_RECLEN


88 
	#_D_ALLOC_NAMLEN
(
d
è(((*è(dè+ (d)->
d_»ş’
è- &(d)->
d_Çme
[0])

	)

90 
	#_D_ALLOC_NAMLEN
(
d
è( (d)->
d_Çme
 > 1 ?  (d)->d_name : \

91 
	`_D_EXACT_NAMLEN
 (
d
è+ 1)

	)

96 #ifdeà
__USE_BSD


100 
	mDT_UNKNOWN
 = 0,

101 
	#DT_UNKNOWN
 
DT_UNKNOWN


	)

102 
	mDT_FIFO
 = 1,

103 
	#DT_FIFO
 
DT_FIFO


	)

104 
	mDT_CHR
 = 2,

105 
	#DT_CHR
 
DT_CHR


	)

106 
	mDT_DIR
 = 4,

107 
	#DT_DIR
 
DT_DIR


	)

108 
	mDT_BLK
 = 6,

109 
	#DT_BLK
 
DT_BLK


	)

110 
	mDT_REG
 = 8,

111 
	#DT_REG
 
DT_REG


	)

112 
	mDT_LNK
 = 10,

113 
	#DT_LNK
 
DT_LNK


	)

114 
	mDT_SOCK
 = 12,

115 
	#DT_SOCK
 
DT_SOCK


	)

116 
	mDT_WHT
 = 14

117 
	#DT_WHT
 
DT_WHT


	)

121 
	#IFTODT
(
mode
è(((modeè& 0170000è>> 12)

	)

122 
	#DTTOIF
(
dœty³
è((dœty³è<< 12)

	)

128 
__dœ¡»am
 
	tDIR
;

135 
DIR
 *
	$İ’dœ
 (
__cÚ¡
 *
__Çme
è
	`__nÚnuÎ
 ((1));

137 #ifdeà
__USE_XOPEN2K8


142 
DIR
 *
	`fdİ’dœ
 (
__fd
);

150 
	$şo£dœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

162 #iâdeà
__USE_FILE_OFFSET64


163 
dœ’t
 *
	$»addœ
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

165 #ifdeà
__REDIRECT


166 
dœ’t
 *
	`__REDIRECT
 (
»addœ
, (
DIR
 *
__dœp
), 
»addœ64
)

167 
	`__nÚnuÎ
 ((1));

169 
	#»addœ
 
»addœ64


	)

173 #ifdeà
__USE_LARGEFILE64


174 
dœ’t64
 *
	$»addœ64
 (
DIR
 *
__dœp
è
	`__nÚnuÎ
 ((1));

177 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


183 #iâdeà
__USE_FILE_OFFSET64


184 
	$»addœ_r
 (
DIR
 *
__»¡riù
 
__dœp
,

185 
dœ’t
 *
__»¡riù
 
__’Œy
,

186 
dœ’t
 **
__»¡riù
 
__»suÉ
)

187 
	`__nÚnuÎ
 ((1, 2, 3));

189 #ifdeà
__REDIRECT


190 
	`__REDIRECT
 (
»addœ_r
,

191 (
DIR
 *
__»¡riù
 
__dœp
,

192 
dœ’t
 *
__»¡riù
 
__’Œy
,

193 
dœ’t
 **
__»¡riù
 
__»suÉ
),

194 
»addœ64_r
è
	`__nÚnuÎ
 ((1, 2, 3));

196 
	#»addœ_r
 
»addœ64_r


	)

200 #ifdeà
__USE_LARGEFILE64


201 
	$»addœ64_r
 (
DIR
 *
__»¡riù
 
__dœp
,

202 
dœ’t64
 *
__»¡riù
 
__’Œy
,

203 
dœ’t64
 **
__»¡riù
 
__»suÉ
)

204 
	`__nÚnuÎ
 ((1, 2, 3));

209 
	$»wšddœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

211 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


212 
	~<b™s/ty³s.h
>

215 
	$£ekdœ
 (
DIR
 *
__dœp
, 
__pos
è
__THROW
 
	`__nÚnuÎ
 ((1));

218 
	$‹Îdœ
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

221 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__XOPEN2K8


224 
	$dœfd
 (
DIR
 *
__dœp
è
__THROW
 
	`__nÚnuÎ
 ((1));

226 #ià
defšed
 
__OPTIMIZE__
 && defšed 
_DIR_dœfd


227 
	#dœfd
(
dœp
è
	`_DIR_dœfd
 (dœp)

	)

230 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


231 #iâdeà
MAXNAMLEN


233 
	~<b™s/posix1_lim.h
>

236 #ifdeà
NAME_MAX


237 
	#MAXNAMLEN
 
NAME_MAX


	)

239 
	#MAXNAMLEN
 255

	)

244 
	#__Ãed_size_t


	)

245 
	~<¡ddef.h
>

251 #iâdeà
__USE_FILE_OFFSET64


252 
	`sÿndœ
 (
__cÚ¡
 *
__»¡riù
 
__dœ
,

253 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

254 (*
__£ËùÜ
è(
__cÚ¡
 
dœ’t
 *),

255 (*
__cmp
è(
__cÚ¡
 
dœ’t
 **,

256 
__cÚ¡
 
dœ’t
 **))

257 
	`__nÚnuÎ
 ((1, 2));

259 #ifdeà
__REDIRECT


260 
	`__REDIRECT
 (
sÿndœ
,

261 (
__cÚ¡
 *
__»¡riù
 
__dœ
,

262 
dœ’t
 ***
__»¡riù
 
__Çm–i¡
,

263 (*
__£ËùÜ
è(
__cÚ¡
 
dœ’t
 *),

264 (*
__cmp
è(
__cÚ¡
 
dœ’t
 **,

265 
__cÚ¡
 
dœ’t
 **)),

266 
sÿndœ64
è
	`__nÚnuÎ
 ((1, 2));

268 
	#sÿndœ
 
sÿndœ64


	)

272 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


275 
	`sÿndœ64
 (
__cÚ¡
 *
__»¡riù
 
__dœ
,

276 
dœ’t64
 ***
__»¡riù
 
__Çm–i¡
,

277 (*
__£ËùÜ
è(
__cÚ¡
 
dœ’t64
 *),

278 (*
__cmp
è(
__cÚ¡
 
dœ’t64
 **,

279 
__cÚ¡
 
dœ’t64
 **))

280 
	`__nÚnuÎ
 ((1, 2));

284 #iâdeà
__USE_FILE_OFFSET64


285 
	$®phasÜt
 (
__cÚ¡
 
dœ’t
 **
__e1
,

286 
__cÚ¡
 
dœ’t
 **
__e2
)

287 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

289 #ifdeà
__REDIRECT


290 
	`__REDIRECT_NTH
 (
®phasÜt
,

291 (
__cÚ¡
 
dœ’t
 **
__e1
,

292 
__cÚ¡
 
dœ’t
 **
__e2
),

293 
®phasÜt64
è
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

295 
	#®phasÜt
 
®phasÜt64


	)

299 #ià
defšed
 
__USE_GNU
 && defšed 
__USE_LARGEFILE64


300 
	$®phasÜt64
 (
__cÚ¡
 
dœ’t64
 **
__e1
,

301 
__cÚ¡
 
dœ’t64
 **
__e2
)

302 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

307 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC


312 #iâdeà
__USE_FILE_OFFSET64


313 
__ssize_t
 
	$g‘dœ’Œ›s
 (
__fd
, *
__»¡riù
 
__buf
,

314 
size_t
 
__nby‹s
,

315 
__off_t
 *
__»¡riù
 
__ba£p
)

316 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

318 #ifdeà
__REDIRECT


319 
__ssize_t
 
	`__REDIRECT_NTH
 (
g‘dœ’Œ›s
,

320 (
__fd
, *
__»¡riù
 
__buf
,

321 
size_t
 
__nby‹s
,

322 
__off64_t
 *
__»¡riù
 
__ba£p
),

323 
g‘dœ’Œ›s64
è
	`__nÚnuÎ
 ((2, 4));

325 
	#g‘dœ’Œ›s
 
g‘dœ’Œ›s64


	)

329 #ifdeà
__USE_LARGEFILE64


330 
__ssize_t
 
	$g‘dœ’Œ›s64
 (
__fd
, *
__»¡riù
 
__buf
,

331 
size_t
 
__nby‹s
,

332 
__off64_t
 *
__»¡riù
 
__ba£p
)

333 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

337 #ifdeà
__USE_GNU


339 #iâdeà
__USE_FILE_OFFSET64


340 
	$v”siÚsÜt
 (
__cÚ¡
 
dœ’t
 **
__e1
,

341 
__cÚ¡
 
dœ’t
 **
__e2
)

342 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

344 #ifdeà
__REDIRECT


345 
	`__REDIRECT_NTH
 (
v”siÚsÜt
,

346 (
__cÚ¡
 
dœ’t
 **
__e1
,

347 
__cÚ¡
 
dœ’t
 **
__e2
),

348 
v”siÚsÜt64
)

349 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

351 
	#v”siÚsÜt
 
v”siÚsÜt64


	)

355 #ifdeà
__USE_LARGEFILE64


356 
	$v”siÚsÜt64
 (
__cÚ¡
 
dœ’t64
 **
__e1
,

357 
__cÚ¡
 
dœ’t64
 **
__e2
)

358 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1, 2));

362 
__END_DECLS


	@/usr/include/errno.h

23 #iâdef 
_ERRNO_H


27 #iâdef 
__Ãed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<ã©u»s.h
>

32 
	g__BEGIN_DECLS


36 
	~<b™s/”ºo.h
>

37 #undeà
__Ãed_Em©h


39 #ifdef 
_ERRNO_H


46 #iâdef 
”ºo


47 
”ºo
;

50 #ifdeà
__USE_GNU


55 *
´og¿m_švoÿtiÚ_Çme
, *
´og¿m_švoÿtiÚ_shÜt_Çme
;

59 
	g__END_DECLS


67 #ià
defšed
 
__USE_GNU
 || defšed 
__Ãed_”rÜ_t


68 #iâdeà
__”rÜ_t_defšed


69 
	t”rÜ_t
;

70 
	#__”rÜ_t_defšed
 1

	)

72 #undeà
__Ãed_”rÜ_t


	@/usr/include/math.h

25 #iâdef 
_MATH_H


26 
	#_MATH_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 
	~<b™s/huge_v®.h
>

35 #ifdeà
__USE_ISOC99


36 
	~<b™s/huge_v®f.h
>

37 
	~<b™s/huge_v®l.h
>

40 
	~<b™s/šf.h
>

43 
	~<b™s/Çn.h
>

47 
	~<b™s/m©hdef.h
>

54 
	#__MATHCALL
(
funùiÚ
,
suffix
, 
¬gs
) \

55 
	`__MATHDECL
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
)

	)

56 
	#__MATHDECL
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

57 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
); \

58 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
)

	)

59 
	#__MATHCALLX
(
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

60 
	`__MATHDECLX
 (
_MdoubË_
,
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
)

	)

61 
	#__MATHDECLX
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
©Œib
) \

62 
	`__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
); \

63 
	`__MATHDECL_1
(
ty³
, 
	`__CONCAT
(
__
,
funùiÚ
),
suffix
, 
¬gs
è
	`__©Œibu‹__
 (
©Œib
)

	)

64 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

65 
ty³
 
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
è
¬gs
 
__THROW


	)

67 
	#_MdoubË_
 

	)

68 
	#__MATH_PRECNAME
(
Çme
,
r
è
	`__CONCAT
Òame,r)

	)

69 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_STD


	)

70 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_STD


	)

71 
	~<b™s/m©hÿÎs.h
>

72 #undeà
_MdoubË_


73 #undeà
_MdoubË_BEGIN_NAMESPACE


74 #undeà
_MdoubË_END_NAMESPACE


75 #undeà
__MATH_PRECNAME


77 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


83 #iâdeà
_Mæßt_


84 
	#_Mæßt_
 

	)

86 
	#_MdoubË_
 
_Mæßt_


	)

87 #ifdeà
__STDC__


88 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
f
##
	)
r

90 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
f
 
	)
r

92 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

93 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

94 
	~<b™s/m©hÿÎs.h
>

95 #undeà
_MdoubË_


96 #undeà
_MdoubË_BEGIN_NAMESPACE


97 #undeà
_MdoubË_END_NAMESPACE


98 #undeà
__MATH_PRECNAME


100 #ià(
__STDC__
 - 0 || 
__GNUC__
 - 0) \

101 && (!
defšed
 
__NO_LONG_DOUBLE_MATH
 \

102 || 
defšed
 
__LDBL_COMPAT
 \

103 || !
defšed
 
_LIBC
)

104 #ifdeà
__LDBL_COMPAT


106 #ifdeà
__USE_ISOC99


107 
	$__Ædbl_Ãx‰ow¬df
 (
__x
, 
__y
)

108 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

109 #ifdeà
__REDIRECT_NTH


110 
	`__REDIRECT_NTH
 (
Ãx‰ow¬df
, (
__x
, 
__y
),

111 
__Ædbl_Ãx‰ow¬df
)

112 
	`__©Œibu‹__
 ((
__cÚ¡__
));

113 
	`__REDIRECT_NTH
 (
Ãx‰ow¬d
, (
__x
, 
__y
),

114 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

115 
	`__REDIRECT_NTH
 (
Ãx‰ow¬dl
,

116 (
__x
, 
__y
),

117 
Ãxá”
è
	`__©Œibu‹__
 ((
__cÚ¡__
));

122 #ià
defšed
 
__LDBL_COMPAT
 || defšed 
__NO_LONG_DOUBLE_MATH


124 #undeà
__MATHDECL_1


125 
	#__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
®Ÿs
) \

126 
ty³
 
	`__REDIRECT_NTH
(
	`__MATH_PRECNAME
(
funùiÚ
,
suffix
), \

127 
¬gs
, 
®Ÿs
)

	)

128 
	#__MATHDECL_1
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
) \

129 
	`__MATHDECL_2
(
ty³
, 
funùiÚ
,
suffix
, 
¬gs
, 
	`__CONCAT
(funùiÚ,suffix))

	)

134 #iâdeà
_MlÚg_doubË_


135 
	#_MlÚg_doubË_
 

	)

137 
	#_MdoubË_
 
_MlÚg_doubË_


	)

138 #ifdeà
__STDC__


139 
	#__MATH_PRECNAME
(
Çme
,
r
èÇme##
l
##
	)
r

141 
	#__MATH_PRECNAME
(
Çme
,
r
èÇm
l
 
	)
r

143 
	#_MdoubË_BEGIN_NAMESPACE
 
__BEGIN_NAMESPACE_C99


	)

144 
	#_MdoubË_END_NAMESPACE
 
__END_NAMESPACE_C99


	)

145 
	~<b™s/m©hÿÎs.h
>

146 #undeà
_MdoubË_


147 #undeà
_MdoubË_BEGIN_NAMESPACE


148 #undeà
_MdoubË_END_NAMESPACE


149 #undeà
__MATH_PRECNAME


154 #undeà
__MATHDECL_1


155 #undeà
__MATHDECL


156 #undeà
__MATHCALL


159 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


161 
signgam
;

166 #ifdeà
__USE_ISOC99


204 
FP_NAN
,

205 
	#FP_NAN
 
FP_NAN


	)

206 
FP_INFINITE
,

207 
	#FP_INFINITE
 
FP_INFINITE


	)

208 
FP_ZERO
,

209 
	#FP_ZERO
 
FP_ZERO


	)

210 
FP_SUBNORMAL
,

211 
	#FP_SUBNORMAL
 
FP_SUBNORMAL


	)

212 
FP_NORMAL


213 
	#FP_NORMAL
 
FP_NORMAL


	)

217 #ifdeà
__NO_LONG_DOUBLE_MATH


218 
	#åşassify
(
x
) \

219 ( (
x
è=ğ (è? 
	`__åşassifyf
 (xè: 
	`__åşassify
 (x))

	)

221 
	#åşassify
(
x
) \

222 ( (
x
) ==  () \

223 ? 
	`__åşassifyf
 (
x
) \

224 :  (
x
) ==  () \

225 ? 
	`__åşassify
 (
x
è: 
	`__åşassifyl
 (x))

	)

229 #ifdeà
__NO_LONG_DOUBLE_MATH


230 
	#signb™
(
x
) \

231 ( (
x
è=ğ (è? 
	`__signb™f
 (xè: 
	`__signb™
 (x))

	)

233 
	#signb™
(
x
) \

234 ( (
x
) ==  () \

235 ? 
	`__signb™f
 (
x
) \

236 :  (
x
) ==  () \

237 ? 
	`__signb™
 (
x
è: 
	`__signb™l
 (x))

	)

241 #ifdeà
__NO_LONG_DOUBLE_MATH


242 
	#isfš™e
(
x
) \

243 ( (
x
è=ğ (è? 
	`__fš™ef
 (xè: 
	`__fš™e
 (x))

	)

245 
	#isfš™e
(
x
) \

246 ( (
x
) ==  () \

247 ? 
	`__fš™ef
 (
x
) \

248 :  (
x
) ==  () \

249 ? 
	`__fš™e
 (
x
è: 
	`__fš™–
 (x))

	)

253 
	#i¢Üm®
(
x
è(
	`åşassify
 (xè=ğ
FP_NORMAL
)

	)

257 #ifdeà
__NO_LONG_DOUBLE_MATH


258 
	#i¢ª
(
x
) \

259 ( (
x
è=ğ (è? 
	`__i¢ªf
 (xè: 
	`__i¢ª
 (x))

	)

261 
	#i¢ª
(
x
) \

262 ( (
x
) ==  () \

263 ? 
	`__i¢ªf
 (
x
) \

264 :  (
x
) ==  () \

265 ? 
	`__i¢ª
 (
x
è: 
	`__i¢ªl
 (x))

	)

269 #ifdeà
__NO_LONG_DOUBLE_MATH


270 
	#isšf
(
x
) \

271 ( (
x
è=ğ (è? 
	`__isšff
 (xè: 
	`__isšf
 (x))

	)

273 
	#isšf
(
x
) \

274 ( (
x
) ==  () \

275 ? 
	`__isšff
 (
x
) \

276 :  (
x
) ==  () \

277 ? 
	`__isšf
 (
x
è: 
	`__isšæ
 (x))

	)

281 
	#MATH_ERRNO
 1

	)

282 
	#MATH_ERREXCEPT
 2

	)

287 #iâdeà
__FAST_MATH__


288 
	#m©h_”rhªdlšg
 (
MATH_ERRNO
 | 
MATH_ERREXCEPT
)

	)

293 #ifdef 
__USE_MISC


297 
_IEEE_
 = -1,

298 
_SVID_
,

299 
_XOPEN_
,

300 
_POSIX_
,

301 
_ISOC_


302 } 
	t_LIB_VERSION_TYPE
;

307 
_LIB_VERSION_TYPE
 
_LIB_VERSION
;

311 #ifdeà
__USE_SVID


317 #ifdeà
__ılu¥lus


318 
__exû±iÚ


320 
exû±iÚ


323 
ty³
;

324 *
Çme
;

325 
¬g1
;

326 
¬g2
;

327 
»tv®
;

328 
	}
};

330 #ifdeà
__ılu¥lus


331 
	$m©h”r
 (
__exû±iÚ
 *
__exc
è
	`throw
 ();

333 
	`m©h”r
 (
exû±iÚ
 *
__exc
);

336 
	#X_TLOSS
 1.41484755040568800000e+16

	)

339 
	#DOMAIN
 1

	)

340 
	#SING
 2

	)

341 
	#OVERFLOW
 3

	)

342 
	#UNDERFLOW
 4

	)

343 
	#TLOSS
 5

	)

344 
	#PLOSS
 6

	)

347 
	#HUGE
 3.40282347e+38F

	)

351 #ifdeà
__USE_XOPEN


353 
	#MAXFLOAT
 3.40282347e+38F

	)

360 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


361 
	#M_E
 2.7182818284590452354

	)

362 
	#M_LOG2E
 1.4426950408889634074

	)

363 
	#M_LOG10E
 0.43429448190325182765

	)

364 
	#M_LN2
 0.69314718055994530942

	)

365 
	#M_LN10
 2.30258509299404568402

	)

366 
	#M_PI
 3.14159265358979323846

	)

367 
	#M_PI_2
 1.57079632679489661923

	)

368 
	#M_PI_4
 0.78539816339744830962

	)

369 
	#M_1_PI
 0.31830988618379067154

	)

370 
	#M_2_PI
 0.63661977236758134308

	)

371 
	#M_2_SQRTPI
 1.12837916709551257390

	)

372 
	#M_SQRT2
 1.41421356237309504880

	)

373 
	#M_SQRT1_2
 0.70710678118654752440

	)

379 #ifdeà
__USE_GNU


380 
	#M_El
 2.7182818284590452353602874713526625L

	)

381 
	#M_LOG2El
 1.4426950408889634073599246810018921L

	)

382 
	#M_LOG10El
 0.4342944819032518276511289189166051L

	)

383 
	#M_LN2l
 0.6931471805599453094172321214581766L

	)

384 
	#M_LN10l
 2.3025850929940456840179914546843642L

	)

385 
	#M_PIl
 3.1415926535897932384626433832795029L

	)

386 
	#M_PI_2l
 1.5707963267948966192313216916397514L

	)

387 
	#M_PI_4l
 0.7853981633974483096156608458198757L

	)

388 
	#M_1_PIl
 0.3183098861837906715377675267450287L

	)

389 
	#M_2_PIl
 0.6366197723675813430755350534900574L

	)

390 
	#M_2_SQRTPIl
 1.1283791670955125738961589031215452L

	)

391 
	#M_SQRT2l
 1.4142135623730950488016887242096981L

	)

392 
	#M_SQRT1_2l
 0.7071067811865475244008443621048490L

	)

399 #ià
defšed
 
__STRICT_ANSI__
 && !defšed 
__NO_MATH_INLINES


400 
	#__NO_MATH_INLINES
 1

	)

403 #ià
defšed
 
__USE_ISOC99
 && 
	`__GNUC_PREREQ
(2,97)

410 
	#isg»©”
(
x
, 
y
è
	`__butš_isg»©”
(x, y)

	)

411 
	#isg»©”equ®
(
x
, 
y
è
	`__butš_isg»©”equ®
(x, y)

	)

412 
	#i¦ess
(
x
, 
y
è
	`__butš_i¦ess
(x, y)

	)

413 
	#i¦es£qu®
(
x
, 
y
è
	`__butš_i¦es£qu®
(x, y)

	)

414 
	#i¦essg»©”
(
x
, 
y
è
	`__butš_i¦essg»©”
(x, y)

	)

415 
	#isunÜd”ed
(
u
, 
v
è
	`__butš_isunÜd”ed
(u, v)

	)

419 #ifdeà
__USE_EXTERN_INLINES


420 
	~<b™s/m©hšlše.h
>

423 #ifdeà
__USE_ISOC99


427 #iâdeà
isg»©”


428 
	#isg»©”
(
x
, 
y
) \

429 (
__ex‹nsiÚ__
 \

430 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

431 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x > __y; 
	}
}))

	)

435 #iâdeà
isg»©”equ®


436 
	#isg»©”equ®
(
x
, 
y
) \

437 (
__ex‹nsiÚ__
 \

438 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

439 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x >ğ__y; }))

	)

443 #iâdeà
i¦ess


444 
	#i¦ess
(
x
, 
y
) \

445 (
__ex‹nsiÚ__
 \

446 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

447 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x < __y; }))

	)

451 #iâdeà
i¦es£qu®


452 
	#i¦es£qu®
(
x
, 
y
) \

453 (
__ex‹nsiÚ__
 \

454 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

455 !
	`isunÜd”ed
 (
__x
, 
__y
è&& __x <ğ__y; }))

	)

459 #iâdeà
i¦essg»©”


460 
	#i¦essg»©”
(
x
, 
y
) \

461 (
__ex‹nsiÚ__
 \

462 ({ 
	`__ty³of__
(
x
è
__x
 = (x); __ty³of__(
y
è
__y
 = (y); \

463 !
	`isunÜd”ed
 (
__x
, 
__y
è&& (__x < __y || __y < __x); }))

	)

467 #iâdeà
isunÜd”ed


468 
	#isunÜd”ed
(
u
, 
v
) \

469 (
__ex‹nsiÚ__
 \

470 ({ 
	`__ty³of__
(
u
è
__u
 = (u); __ty³of__(
v
è
__v
 = (v); \

471 
	`åşassify
 (
__u
è=ğ
FP_NAN
 || fpşassify (
__v
è=ğFP_NAN; }))

	)

476 
	g__END_DECLS


	@/usr/include/stdint.h

23 #iâdeà
_STDINT_H


24 
	#_STDINT_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	~<b™s/wch¬.h
>

28 
	~<b™s/wÜdsize.h
>

35 #iâdeà
__št8_t_defšed


36 
	#__št8_t_defšed


	)

37 sigÃd 
	tšt8_t
;

38 
	tšt16_t
;

39 
	tšt32_t
;

40 #ià
__WORDSIZE
 == 64

41 
	tšt64_t
;

43 
__ex‹nsiÚ__


44 
	tšt64_t
;

49 
	tušt8_t
;

50 
	tušt16_t
;

51 #iâdeà
__ušt32_t_defšed


52 
	tušt32_t
;

53 
	#__ušt32_t_defšed


	)

55 #ià
__WORDSIZE
 == 64

56 
	tušt64_t
;

58 
__ex‹nsiÚ__


59 
	tušt64_t
;

66 sigÃd 
	tšt_Ëa¡8_t
;

67 
	tšt_Ëa¡16_t
;

68 
	tšt_Ëa¡32_t
;

69 #ià
__WORDSIZE
 == 64

70 
	tšt_Ëa¡64_t
;

72 
__ex‹nsiÚ__


73 
	tšt_Ëa¡64_t
;

77 
	tušt_Ëa¡8_t
;

78 
	tušt_Ëa¡16_t
;

79 
	tušt_Ëa¡32_t
;

80 #ià
__WORDSIZE
 == 64

81 
	tušt_Ëa¡64_t
;

83 
__ex‹nsiÚ__


84 
	tušt_Ëa¡64_t
;

91 sigÃd 
	tšt_ç¡8_t
;

92 #ià
__WORDSIZE
 == 64

93 
	tšt_ç¡16_t
;

94 
	tšt_ç¡32_t
;

95 
	tšt_ç¡64_t
;

97 
	tšt_ç¡16_t
;

98 
	tšt_ç¡32_t
;

99 
__ex‹nsiÚ__


100 
	tšt_ç¡64_t
;

104 
	tušt_ç¡8_t
;

105 #ià
__WORDSIZE
 == 64

106 
	tušt_ç¡16_t
;

107 
	tušt_ç¡32_t
;

108 
	tušt_ç¡64_t
;

110 
	tušt_ç¡16_t
;

111 
	tušt_ç¡32_t
;

112 
__ex‹nsiÚ__


113 
	tušt_ç¡64_t
;

118 #ià
__WORDSIZE
 == 64

119 #iâdeà
__šŒ_t_defšed


120 
	tšŒ_t
;

121 
	#__šŒ_t_defšed


	)

123 
	tušŒ_t
;

125 #iâdeà
__šŒ_t_defšed


126 
	tšŒ_t
;

127 
	#__šŒ_t_defšed


	)

129 
	tušŒ_t
;

134 #ià
__WORDSIZE
 == 64

135 
	tštmax_t
;

136 
	tuštmax_t
;

138 
__ex‹nsiÚ__


139 
	tštmax_t
;

140 
__ex‹nsiÚ__


141 
	tuštmax_t
;

147 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_LIMIT_MACROS


149 #ià
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
èø## 
L


	)

151 
	#__UINT64_C
(
c
èø## 
UL


	)

153 
	#__INT64_C
(
c
èø## 
LL


	)

154 
	#__UINT64_C
(
c
èø## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

178 
	#INT_LEAST8_MIN
 (-128)

	)

179 
	#INT_LEAST16_MIN
 (-32767-1)

	)

180 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

181 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

183 
	#INT_LEAST8_MAX
 (127)

	)

184 
	#INT_LEAST16_MAX
 (32767)

	)

185 
	#INT_LEAST32_MAX
 (2147483647)

	)

186 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

189 
	#UINT_LEAST8_MAX
 (255)

	)

190 
	#UINT_LEAST16_MAX
 (65535)

	)

191 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

192 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

196 
	#INT_FAST8_MIN
 (-128)

	)

197 #ià
__WORDSIZE
 == 64

198 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

199 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

201 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

202 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

204 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

206 
	#INT_FAST8_MAX
 (127)

	)

207 #ià
__WORDSIZE
 == 64

208 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

209 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

211 
	#INT_FAST16_MAX
 (2147483647)

	)

212 
	#INT_FAST32_MAX
 (2147483647)

	)

214 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

217 
	#UINT_FAST8_MAX
 (255)

	)

218 #ià
__WORDSIZE
 == 64

219 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

220 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

222 
	#UINT_FAST16_MAX
 (4294967295U)

	)

223 
	#UINT_FAST32_MAX
 (4294967295U)

	)

225 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

229 #ià
__WORDSIZE
 == 64

230 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

231 
	#INTPTR_MAX
 (9223372036854775807L)

	)

232 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

234 
	#INTPTR_MIN
 (-2147483647-1)

	)

235 
	#INTPTR_MAX
 (2147483647)

	)

236 
	#UINTPTR_MAX
 (4294967295U)

	)

241 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

243 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

246 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

252 #ià
__WORDSIZE
 == 64

253 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

254 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

256 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

257 
	#PTRDIFF_MAX
 (2147483647)

	)

261 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

262 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

265 #ià
__WORDSIZE
 == 64

266 
	#SIZE_MAX
 (18446744073709551615UL)

	)

268 
	#SIZE_MAX
 (4294967295U)

	)

272 #iâdeà
WCHAR_MIN


274 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

275 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

279 
	#WINT_MIN
 (0u)

	)

280 
	#WINT_MAX
 (4294967295u)

	)

287 #ià!
defšed
 
__ılu¥lus
 || defšed 
__STDC_CONSTANT_MACROS


290 
	#INT8_C
(
c
è
	)
c

291 
	#INT16_C
(
c
è
	)
c

292 
	#INT32_C
(
c
è
	)
c

293 #ià
__WORDSIZE
 == 64

294 
	#INT64_C
(
c
èø## 
L


	)

296 
	#INT64_C
(
c
èø## 
LL


	)

300 
	#UINT8_C
(
c
è
	)
c

301 
	#UINT16_C
(
c
è
	)
c

302 
	#UINT32_C
(
c
èø## 
U


	)

303 #ià
__WORDSIZE
 == 64

304 
	#UINT64_C
(
c
èø## 
UL


	)

306 
	#UINT64_C
(
c
èø## 
ULL


	)

310 #ià
__WORDSIZE
 == 64

311 
	#INTMAX_C
(
c
èø## 
L


	)

312 
	#UINTMAX_C
(
c
èø## 
UL


	)

314 
	#INTMAX_C
(
c
èø## 
LL


	)

315 
	#UINTMAX_C
(
c
èø## 
ULL


	)

	@/usr/include/stdio.h

24 #iâdeà
_STDIO_H


26 #ià!
defšed
 
__Ãed_FILE
 && !defšed 
__Ãed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


32 
	#__Ãed_size_t


	)

33 
	#__Ãed_NULL


	)

34 
	~<¡ddef.h
>

36 
	~<b™s/ty³s.h
>

37 
	#__Ãed_FILE


	)

38 
	#__Ãed___FILE


	)

42 #ià!
defšed
 
__FILE_defšed
 && defšed 
__Ãed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #ià
defšed
 
__USE_LARGEFILE64
 || defšed 
__USE_SVID
 || defšed 
__USE_POSIX
 \

52 || 
defšed
 
	g__USE_BSD
 || defšed 
	g__USE_ISOC99
 || defšed 
	g__USE_XOPEN
 \

53 || 
defšed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_defšed
 1

	)

59 #undeà
__Ãed_FILE


62 #ià!
defšed
 
____FILE_defšed
 && defšed 
__Ãed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_defšed
 1

	)

69 #undeà
__Ãed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #ifdeà
__USE_XOPEN


78 #ifdeà
__GNUC__


79 #iâdeà
_VA_LIST_DEFINED


80 
_G_va_li¡
 
	tva_li¡
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<¡d¬g.h
>

89 
__BEGIN_NAMESPACE_STD


90 #iâdeà
__USE_FILE_OFFSET64


91 
_G_åos_t
 
	tåos_t
;

93 
_G_åos64_t
 
	tåos_t
;

95 
__END_NAMESPACE_STD


96 #ifdeà
__USE_LARGEFILE64


97 
_G_åos64_t
 
	tåos64_t
;

101 
	#_IOFBF
 0

	)

102 
	#_IOLBF
 1

	)

103 
	#_IONBF
 2

	)

107 #iâdeà
BUFSIZ


108 
	#BUFSIZ
 
_IO_BUFSIZ


	)

114 #iâdeà
EOF


115 
	#EOF
 (-1)

	)

121 
	#SEEK_SET
 0

	)

122 
	#SEEK_CUR
 1

	)

123 
	#SEEK_END
 2

	)

126 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


128 
	#P_tmpdœ
 "/tmp"

	)

141 
	~<b™s/¡dio_lim.h
>

145 
_IO_FILE
 *
¡dš
;

146 
_IO_FILE
 *
¡dout
;

147 
_IO_FILE
 *
¡d”r
;

149 
	#¡dš
 
¡dš


	)

150 
	#¡dout
 
¡dout


	)

151 
	#¡d”r
 
¡d”r


	)

153 
__BEGIN_NAMESPACE_STD


155 
	$»move
 (
__cÚ¡
 *
__f’ame
è
__THROW
;

157 
	$»Çme
 (
__cÚ¡
 *
__Şd
, __cÚ¡ *
__Ãw
è
__THROW
;

158 
__END_NAMESPACE_STD


160 #ifdeà
__USE_ATFILE


162 
	$»Çm—t
 (
__Şdfd
, 
__cÚ¡
 *
__Şd
, 
__Ãwfd
,

163 
__cÚ¡
 *
__Ãw
è
__THROW
;

166 
__BEGIN_NAMESPACE_STD


171 #iâdeà
__USE_FILE_OFFSET64


172 
FILE
 *
	$tmpfe
 (è
__wur
;

174 #ifdeà
__REDIRECT


175 
FILE
 *
	`__REDIRECT
 (
tmpfe
, (), 
tmpfe64
è
__wur
;

177 
	#tmpfe
 
tmpfe64


	)

181 #ifdeà
__USE_LARGEFILE64


182 
FILE
 *
	$tmpfe64
 (è
__wur
;

186 *
	$tm²am
 (*
__s
è
__THROW
 
__wur
;

187 
__END_NAMESPACE_STD


189 #ifdeà
__USE_MISC


192 *
	$tm²am_r
 (*
__s
è
__THROW
 
__wur
;

196 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


204 *
	$‹m²am
 (
__cÚ¡
 *
__dœ
, __cÚ¡ *
__pfx
)

205 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

209 
__BEGIN_NAMESPACE_STD


214 
	`fşo£
 (
FILE
 *
__¡»am
);

219 
	`fæush
 (
FILE
 *
__¡»am
);

220 
__END_NAMESPACE_STD


222 #ifdeà
__USE_MISC


229 
	`fæush_uÆocked
 (
FILE
 *
__¡»am
);

232 #ifdeà
__USE_GNU


239 
	`fşo£®l
 ();

243 
__BEGIN_NAMESPACE_STD


244 #iâdeà
__USE_FILE_OFFSET64


249 
FILE
 *
	$fİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

250 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

255 
FILE
 *
	$äeİ’
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

256 
__cÚ¡
 *
__»¡riù
 
__modes
,

257 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

259 #ifdeà
__REDIRECT


260 
FILE
 *
	`__REDIRECT
 (
fİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

261 
__cÚ¡
 *
__»¡riù
 
__modes
), 
fİ’64
)

262 
__wur
;

263 
FILE
 *
	`__REDIRECT
 (
äeİ’
, (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

264 
__cÚ¡
 *
__»¡riù
 
__modes
,

265 
FILE
 *
__»¡riù
 
__¡»am
), 
äeİ’64
)

266 
__wur
;

268 
	#fİ’
 
fİ’64


	)

269 
	#äeİ’
 
äeİ’64


	)

272 
__END_NAMESPACE_STD


273 #ifdeà
__USE_LARGEFILE64


274 
FILE
 *
	$fİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

275 
__cÚ¡
 *
__»¡riù
 
__modes
è
__wur
;

276 
FILE
 *
	$äeİ’64
 (
__cÚ¡
 *
__»¡riù
 
__f’ame
,

277 
__cÚ¡
 *
__»¡riù
 
__modes
,

278 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

281 #ifdef 
__USE_POSIX


283 
FILE
 *
	$fdİ’
 (
__fd
, 
__cÚ¡
 *
__modes
è
__THROW
 
__wur
;

286 #ifdef 
__USE_GNU


289 
FILE
 *
	$fİ’cook›
 (*
__»¡riù
 
__magic_cook›
,

290 
__cÚ¡
 *
__»¡riù
 
__modes
,

291 
_IO_cook›_io_funùiÚs_t
 
__io_funcs
è
__THROW
 
__wur
;

294 #ifdeà
__USE_XOPEN2K8


296 
FILE
 *
	$fmemİ’
 (*
__s
, 
size_t
 
__Ën
, 
__cÚ¡
 *
__modes
)

297 
__THROW
 
__wur
;

302 
FILE
 *
	$İ’_mem¡»am
 (**
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
 
__wur
;

306 
__BEGIN_NAMESPACE_STD


309 
	$£tbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
è
__THROW
;

313 
	$£tvbuf
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

314 
__modes
, 
size_t
 
__n
è
__THROW
;

315 
__END_NAMESPACE_STD


317 #ifdef 
__USE_BSD


320 
	$£tbufãr
 (
FILE
 *
__»¡riù
 
__¡»am
, *__»¡riù 
__buf
,

321 
size_t
 
__size
è
__THROW
;

324 
	$£šebuf
 (
FILE
 *
__¡»am
è
__THROW
;

328 
__BEGIN_NAMESPACE_STD


333 
	`årštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

334 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

339 
	`´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

341 
	$¥rštf
 (*
__»¡riù
 
__s
,

342 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

348 
	`vårštf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

349 
_G_va_li¡
 
__¬g
);

354 
	`v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
);

356 
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

357 
_G_va_li¡
 
__¬g
è
__THROW
;

358 
__END_NAMESPACE_STD


360 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


361 
__BEGIN_NAMESPACE_C99


363 
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

364 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

365 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

367 
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__maxËn
,

368 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

369 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

370 
__END_NAMESPACE_C99


373 #ifdeà
__USE_GNU


376 
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__f
,

377 
_G_va_li¡
 
__¬g
)

378 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 0))è
__wur
;

379 
	$__a¥rštf
 (**
__»¡riù
 
__±r
,

380 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

381 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

382 
	$a¥rštf
 (**
__»¡riù
 
__±r
,

383 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

384 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 2, 3))è
__wur
;

387 #ifdeà
__USE_XOPEN2K8


394 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

395 
_G_va_li¡
 
__¬g
)

396 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

397 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

398 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

402 
__BEGIN_NAMESPACE_STD


407 
	$fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

408 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

413 
	$sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

415 
	$ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

416 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

418 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

419 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

420 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

421 #ifdeà
__REDIRECT


425 
	`__REDIRECT
 (
fsÿnf
, (
FILE
 *
__»¡riù
 
__¡»am
,

426 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

427 
__isoc99_fsÿnf
è
__wur
;

428 
	`__REDIRECT
 (
sÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

429 
__isoc99_sÿnf
è
__wur
;

430 
	`__REDIRECT_NTH
 (
ssÿnf
, (
__cÚ¡
 *
__»¡riù
 
__s
,

431 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...),

432 
__isoc99_ssÿnf
);

434 
	$__isoc99_fsÿnf
 (
FILE
 *
__»¡riù
 
__¡»am
,

435 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

436 
	$__isoc99_sÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__wur
;

437 
	$__isoc99_ssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

438 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

439 
	#fsÿnf
 
__isoc99_fsÿnf


	)

440 
	#sÿnf
 
__isoc99_sÿnf


	)

441 
	#ssÿnf
 
__isoc99_ssÿnf


	)

445 
__END_NAMESPACE_STD


447 #ifdef 
__USE_ISOC99


448 
__BEGIN_NAMESPACE_C99


453 
	$vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fÜm©
,

454 
_G_va_li¡
 
__¬g
)

455 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

461 
	$vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

462 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

465 
	$vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

466 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
)

467 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

469 #ià!
defšed
 
__USE_GNU
 \

470 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

471 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

472 #ifdeà
__REDIRECT


476 
	`__REDIRECT
 (
vfsÿnf
,

477 (
FILE
 *
__»¡riù
 
__s
,

478 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__¬g
),

479 
__isoc99_vfsÿnf
)

480 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 2, 0))è
__wur
;

481 
	`__REDIRECT
 (
vsÿnf
, (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

482 
_G_va_li¡
 
__¬g
), 
__isoc99_vsÿnf
)

483 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__sÿnf__
, 1, 0))è
__wur
;

484 
	`__REDIRECT_NTH
 (
vssÿnf
,

485 (
__cÚ¡
 *
__»¡riù
 
__s
,

486 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

487 
_G_va_li¡
 
__¬g
), 
__isoc99_vssÿnf
)

488 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__sÿnf__
, 2, 0)));

490 
	$__isoc99_vfsÿnf
 (
FILE
 *
__»¡riù
 
__s
,

491 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

492 
_G_va_li¡
 
__¬g
è
__wur
;

493 
	$__isoc99_vsÿnf
 (
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

494 
_G_va_li¡
 
__¬g
è
__wur
;

495 
	$__isoc99_vssÿnf
 (
__cÚ¡
 *
__»¡riù
 
__s
,

496 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

497 
_G_va_li¡
 
__¬g
è
__THROW
;

498 
	#vfsÿnf
 
__isoc99_vfsÿnf


	)

499 
	#vsÿnf
 
__isoc99_vsÿnf


	)

500 
	#vssÿnf
 
__isoc99_vssÿnf


	)

504 
__END_NAMESPACE_C99


508 
__BEGIN_NAMESPACE_STD


513 
	`fg‘c
 (
FILE
 *
__¡»am
);

514 
	`g‘c
 (
FILE
 *
__¡»am
);

520 
	`g‘ch¬
 ();

521 
__END_NAMESPACE_STD


525 
	#g‘c
(
_å
è
	`_IO_g‘c
 (_å)

	)

527 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


532 
	`g‘c_uÆocked
 (
FILE
 *
__¡»am
);

533 
	`g‘ch¬_uÆocked
 ();

536 #ifdeà
__USE_MISC


543 
	`fg‘c_uÆocked
 (
FILE
 *
__¡»am
);

547 
__BEGIN_NAMESPACE_STD


555 
	`åutc
 (
__c
, 
FILE
 *
__¡»am
);

556 
	`putc
 (
__c
, 
FILE
 *
__¡»am
);

562 
	`putch¬
 (
__c
);

563 
__END_NAMESPACE_STD


567 
	#putc
(
_ch
, 
_å
è
	`_IO_putc
 (_ch, _å)

	)

569 #ifdeà
__USE_MISC


576 
	`åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

579 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


584 
	`putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
);

585 
	`putch¬_uÆocked
 (
__c
);

589 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 \

590 || (
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

592 
	`g‘w
 (
FILE
 *
__¡»am
);

595 
	`putw
 (
__w
, 
FILE
 *
__¡»am
);

599 
__BEGIN_NAMESPACE_STD


604 *
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

605 
__wur
;

612 *
	$g‘s
 (*
__s
è
__wur
;

613 
__END_NAMESPACE_STD


615 #ifdeà
__USE_GNU


622 *
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
,

623 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

627 #ifdef 
__USE_XOPEN2K8


638 
_IO_ssize_t
 
	$__g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

639 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

640 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

641 
_IO_ssize_t
 
	$g‘d–im
 (**
__»¡riù
 
__lš•Œ
,

642 
size_t
 *
__»¡riù
 
__n
, 
__d–im™”
,

643 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

651 
_IO_ssize_t
 
	$g‘lše
 (**
__»¡riù
 
__lš•Œ
,

652 
size_t
 *
__»¡riù
 
__n
,

653 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

657 
__BEGIN_NAMESPACE_STD


662 
	`åuts
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
FILE
 *__»¡riù 
__¡»am
);

668 
	`puts
 (
__cÚ¡
 *
__s
);

675 
	`ung‘c
 (
__c
, 
FILE
 *
__¡»am
);

682 
size_t
 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

683 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

688 
size_t
 
	$fwr™e
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

689 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__s
è
__wur
;

690 
__END_NAMESPACE_STD


692 #ifdeà
__USE_GNU


699 
	`åuts_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__s
,

700 
FILE
 *
__»¡riù
 
__¡»am
);

703 #ifdeà
__USE_MISC


710 
size_t
 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

711 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

712 
size_t
 
	$fwr™e_uÆocked
 (
__cÚ¡
 *
__»¡riù
 
__±r
, 
size_t
 
__size
,

713 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

717 
__BEGIN_NAMESPACE_STD


722 
	`f£ek
 (
FILE
 *
__¡»am
, 
__off
, 
__wh’û
);

727 
	$á–l
 (
FILE
 *
__¡»am
è
__wur
;

732 
	`»wšd
 (
FILE
 *
__¡»am
);

733 
__END_NAMESPACE_STD


740 #ià
defšed
 
__USE_LARGEFILE
 || defšed 
__USE_XOPEN2K


741 #iâdeà
__USE_FILE_OFFSET64


746 
	`f£eko
 (
FILE
 *
__¡»am
, 
__off_t
 
__off
, 
__wh’û
);

751 
__off_t
 
	$á–lo
 (
FILE
 *
__¡»am
è
__wur
;

753 #ifdeà
__REDIRECT


754 
	`__REDIRECT
 (
f£eko
,

755 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
),

756 
f£eko64
);

757 
__off64_t
 
	`__REDIRECT
 (
á–lo
, (
FILE
 *
__¡»am
), 
á–lo64
);

759 
	#f£eko
 
f£eko64


	)

760 
	#á–lo
 
á–lo64


	)

765 
__BEGIN_NAMESPACE_STD


766 #iâdeà
__USE_FILE_OFFSET64


771 
	`fg‘pos
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos_t
 *__»¡riù 
__pos
);

776 
	`f£os
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
);

778 #ifdeà
__REDIRECT


779 
	`__REDIRECT
 (
fg‘pos
, (
FILE
 *
__»¡riù
 
__¡»am
,

780 
åos_t
 *
__»¡riù
 
__pos
), 
fg‘pos64
);

781 
	`__REDIRECT
 (
f£os
,

782 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos_t
 *
__pos
), 
f£os64
);

784 
	#fg‘pos
 
fg‘pos64


	)

785 
	#f£os
 
f£os64


	)

788 
__END_NAMESPACE_STD


790 #ifdeà
__USE_LARGEFILE64


791 
	`f£eko64
 (
FILE
 *
__¡»am
, 
__off64_t
 
__off
, 
__wh’û
);

792 
__off64_t
 
	$á–lo64
 (
FILE
 *
__¡»am
è
__wur
;

793 
	`fg‘pos64
 (
FILE
 *
__»¡riù
 
__¡»am
, 
åos64_t
 *__»¡riù 
__pos
);

794 
	`f£os64
 (
FILE
 *
__¡»am
, 
__cÚ¡
 
åos64_t
 *
__pos
);

797 
__BEGIN_NAMESPACE_STD


799 
	$ş—»¼
 (
FILE
 *
__¡»am
è
__THROW
;

801 
	$ãof
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

803 
	$ã¼Ü
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

804 
__END_NAMESPACE_STD


806 #ifdeà
__USE_MISC


808 
	$ş—»¼_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
;

809 
	$ãof_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

810 
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

814 
__BEGIN_NAMESPACE_STD


819 
	`³¼Ü
 (
__cÚ¡
 *
__s
);

820 
__END_NAMESPACE_STD


826 
	~<b™s/sys_”¾i¡.h
>

829 #ifdef 
__USE_POSIX


831 
	$f’o
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

834 #ifdeà
__USE_MISC


836 
	$f’o_uÆocked
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

840 #ià(
defšed
 
__USE_POSIX2
 || defšed 
__USE_SVID
 || defšed 
__USE_BSD
 || \

841 
defšed
 
__USE_MISC
)

846 
FILE
 *
	$pİ’
 (
__cÚ¡
 *
__commªd
, __cÚ¡ *
__modes
è
__wur
;

852 
	`pşo£
 (
FILE
 *
__¡»am
);

856 #ifdef 
__USE_POSIX


858 *
	$ù”mid
 (*
__s
è
__THROW
;

862 #ifdeà
__USE_XOPEN


864 *
	`cu£rid
 (*
__s
);

868 #ifdef 
__USE_GNU


869 
ob¡ack
;

872 
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

873 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...)

874 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 3)));

875 
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

876 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

877 
_G_va_li¡
 
__¬gs
)

878 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 2, 0)));

882 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


886 
	$æockfe
 (
FILE
 *
__¡»am
è
__THROW
;

890 
	$árylockfe
 (
FILE
 *
__¡»am
è
__THROW
 
__wur
;

893 
	$fuÆockfe
 (
FILE
 *
__¡»am
è
__THROW
;

896 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
 && !defšed 
__USE_GNU


900 
	#__Ãed_g‘İt


	)

901 
	~<g‘İt.h
>

906 #ifdeà
__USE_EXTERN_INLINES


907 
	~<b™s/¡dio.h
>

909 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


910 
	~<b™s/¡dio2.h
>

912 #ifdeà
__LDBL_COMPAT


913 
	~<b™s/¡dio-ldbl.h
>

916 
__END_DECLS


	@/usr/include/stdlib.h

23 #iâdef 
_STDLIB_H


25 
	~<ã©u»s.h
>

28 
	#__Ãed_size_t


	)

29 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


30 
	#__Ãed_wch¬_t


	)

31 
	#__Ãed_NULL


	)

33 
	~<¡ddef.h
>

35 
	g__BEGIN_DECLS


37 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


38 
	#_STDLIB_H
 1

	)

40 #ià
defšed
 
__USE_XOPEN
 && !defšed 
_SYS_WAIT_H


42 
	~<b™s/wa™æags.h
>

43 
	~<b™s/wa™¡©us.h
>

45 #ifdeà
__USE_BSD


50 #ià
defšed
 
__GNUC__
 && !defšed 
__ılu¥lus


51 
	#__WAIT_INT
(
¡©us
) \

52 (
	`__ex‹nsiÚ__
 (((uniÚ { 
	`__ty³of
(
¡©us
è
__š
; 
__i
; }) \

53 { .
__š
 = (
¡©us
è}).
__i
))

	)

55 
	#__WAIT_INT
(
¡©us
è(*(*è&(¡©us))

	)

63 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2 || defšed 
__ılu¥lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
wa™
 *
	m__u±r
;

71 *
	m__Œ
;

72 } 
	t__WAIT_STATUS
 
	t__©Œibu‹__
 ((
	t__Œª¥¬’t_uniÚ__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
¡©us
è(¡©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
¡©us
è
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (¡©us))

	)

86 
	#WTERMSIG
(
¡©us
è
	`__WTERMSIG
 (
	`__WAIT_INT
 (¡©us))

	)

87 
	#WSTOPSIG
(
¡©us
è
	`__WSTOPSIG
 (
	`__WAIT_INT
 (¡©us))

	)

88 
	#WIFEXITED
(
¡©us
è
	`__WIFEXITED
 (
	`__WAIT_INT
 (¡©us))

	)

89 
	#WIFSIGNALED
(
¡©us
è
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (¡©us))

	)

90 
	#WIFSTOPPED
(
¡©us
è
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (¡©us))

	)

91 #ifdeà
__WIFCONTINUED


92 
	#WIFCONTINUED
(
¡©us
è
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (¡©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquÙ
;

101 
	m»m
;

102 } 
	tdiv_t
;

105 #iâdeà
__ldiv_t_defšed


108 
	mquÙ
;

109 
	m»m
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_defšed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__Îdiv_t_defšed


116 
__BEGIN_NAMESPACE_C99


118 
__ex‹nsiÚ__
 struct

120 
	mquÙ
;

121 
	m»m
;

122 } 
	tÎdiv_t
;

123 
	#__Îdiv_t_defšed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__ùy³_g‘_mb_cur_max
 ())

	)

140 
size_t
 
	$__ùy³_g‘_mb_cur_max
 (è
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__cÚ¡
 *
__ÅŒ
)

146 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

148 
	$©oi
 (
__cÚ¡
 *
__ÅŒ
)

149 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

151 
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
)

152 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

153 
__END_NAMESPACE_STD


155 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__ex‹nsiÚ__
 
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
)

159 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$¡¹od
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

166 **
__»¡riù
 
__’d±r
)

167 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$¡¹of
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

174 **
__»¡riù
 
__’d±r
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

176 
	$¡¹Şd
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

177 **
__»¡riù
 
__’d±r
)

178 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$¡¹Ş
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

185 **
__»¡riù
 
__’d±r
, 
__ba£
)

186 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

188 
	$¡¹oul
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

189 **
__»¡riù
 
__’d±r
, 
__ba£
)

190 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

191 
__END_NAMESPACE_STD


193 #ià
defšed
 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_BSD


195 
__ex‹nsiÚ__


196 
	$¡¹oq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

197 **
__»¡riù
 
__’d±r
, 
__ba£
)

198 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

200 
__ex‹nsiÚ__


201 
	$¡¹ouq
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

202 **
__»¡riù
 
__’d±r
, 
__ba£
)

203 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

206 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GLIBC_HAVE_LONG_LONG
 && defšed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__ex‹nsiÚ__


210 
	$¡¹Şl
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

211 **
__»¡riù
 
__’d±r
, 
__ba£
)

212 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

214 
__ex‹nsiÚ__


215 
	$¡¹ouÎ
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

216 **
__»¡riù
 
__’d±r
, 
__ba£
)

217 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

218 
__END_NAMESPACE_C99


222 #ifdeà
__USE_GNU


236 
	~<xloÿË.h
>

240 
	$¡¹Ş_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

241 **
__»¡riù
 
__’d±r
, 
__ba£
,

242 
__loÿË_t
 
__loc
è
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

244 
	$¡¹oul_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

245 **
__»¡riù
 
__’d±r
,

246 
__ba£
, 
__loÿË_t
 
__loc
)

247 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

249 
__ex‹nsiÚ__


250 
	$¡¹Şl_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

251 **
__»¡riù
 
__’d±r
, 
__ba£
,

252 
__loÿË_t
 
__loc
)

253 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

255 
__ex‹nsiÚ__


256 
	$¡¹ouÎ_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

257 **
__»¡riù
 
__’d±r
,

258 
__ba£
, 
__loÿË_t
 
__loc
)

259 
__THROW
 
	`__nÚnuÎ
 ((1, 4)è
__wur
;

261 
	$¡¹od_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

262 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

263 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

265 
	$¡¹of_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

266 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

267 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

269 
	$¡¹Şd_l
 (
__cÚ¡
 *
__»¡riù
 
__ÅŒ
,

270 **
__»¡riù
 
__’d±r
,

271 
__loÿË_t
 
__loc
)

272 
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

276 #ifdeà
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__ex‹º_šlše
 

279 
	`__NTH
 (
	$©of
 (
__cÚ¡
 *
__ÅŒ
))

281  
	`¡¹od
 (
__ÅŒ
, (**è
NULL
);

282 
	}
}

283 
__ex‹º_šlše
 

284 
__NTH
 (
	$©oi
 (
__cÚ¡
 *
__ÅŒ
))

286  (è
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

287 
	}
}

288 
__ex‹º_šlše
 

289 
__NTH
 (
	$©Ş
 (
__cÚ¡
 *
__ÅŒ
))

291  
	`¡¹Ş
 (
__ÅŒ
, (**è
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

298 
__NTH
 (
	$©Şl
 (
__cÚ¡
 *
__ÅŒ
))

300  
	`¡¹Şl
 (
__ÅŒ
, (**è
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
è
__THROW
 
__wur
;

314 
	$a64l
 (
__cÚ¡
 *
__s
)

315 
__THROW
 
__©Œibu‹_pu»__
 
	`__nÚnuÎ
 ((1)è
__wur
;

319 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_BSD


320 
	~<sys/ty³s.h
>

327 
	$¿ndom
 (è
__THROW
;

330 
	$¤ªdom
 (
__£ed
è
__THROW
;

336 *
	$š™¡©e
 (
__£ed
, *
__¡©ebuf
,

337 
size_t
 
__¡©–’
è
__THROW
 
	`__nÚnuÎ
 ((2));

341 *
	$£t¡©e
 (*
__¡©ebuf
è
__THROW
 
	`__nÚnuÎ
 ((1));

344 #ifdeà
__USE_MISC


349 
	s¿ndom_d©a


351 
št32_t
 *
åŒ
;

352 
št32_t
 *
½Œ
;

353 
št32_t
 *
¡©e
;

354 
¿nd_ty³
;

355 
¿nd_deg
;

356 
¿nd_£p
;

357 
št32_t
 *
’d_±r
;

360 
	$¿ndom_r
 (
¿ndom_d©a
 *
__»¡riù
 
__buf
,

361 
št32_t
 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

363 
	$¤ªdom_r
 (
__£ed
, 
¿ndom_d©a
 *
__buf
)

364 
__THROW
 
	`__nÚnuÎ
 ((2));

366 
	$š™¡©e_r
 (
__£ed
, *
__»¡riù
 
__¡©ebuf
,

367 
size_t
 
__¡©–’
,

368 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

369 
__THROW
 
	`__nÚnuÎ
 ((2, 4));

371 
	$£t¡©e_r
 (*
__»¡riù
 
__¡©ebuf
,

372 
¿ndom_d©a
 *
__»¡riù
 
__buf
)

373 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$¿nd
 (è
__THROW
;

382 
	$¤ªd
 (
__£ed
è
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifdeà
__USE_POSIX


387 
	$¿nd_r
 (*
__£ed
è
__THROW
;

391 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


395 
	$d¿nd48
 (è
__THROW
;

396 
	$”ªd48
 (
__xsubi
[3]è
__THROW
 
	`__nÚnuÎ
 ((1));

399 
	$Ìªd48
 (è
__THROW
;

400 
	$Äªd48
 (
__xsubi
[3])

401 
__THROW
 
	`__nÚnuÎ
 ((1));

404 
	$m¿nd48
 (è
__THROW
;

405 
	$j¿nd48
 (
__xsubi
[3])

406 
__THROW
 
	`__nÚnuÎ
 ((1));

409 
	$¤ªd48
 (
__£edv®
è
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__nÚnuÎ
 ((1));

412 
	$lcÚg48
 (
__·¿m
[7]è
__THROW
 
	`__nÚnuÎ
 ((1));

414 #ifdeà
__USE_MISC


418 
	sd¿nd48_d©a


420 
__x
[3];

421 
__Şd_x
[3];

422 
__c
;

423 
__š™
;

424 
__a
;

428 
	$d¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

429 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

430 
	$”ªd48_r
 (
__xsubi
[3],

431 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

432 *
__»¡riù
 
__»suÉ
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

435 
	$Ìªd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

436 *
__»¡riù
 
__»suÉ
)

437 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

438 
	$Äªd48_r
 (
__xsubi
[3],

439 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

440 *
__»¡riù
 
__»suÉ
)

441 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

444 
	$m¿nd48_r
 (
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

445 *
__»¡riù
 
__»suÉ
)

446 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

447 
	$j¿nd48_r
 (
__xsubi
[3],

448 
d¿nd48_d©a
 *
__»¡riù
 
__bufãr
,

449 *
__»¡riù
 
__»suÉ
)

450 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

453 
	$¤ªd48_r
 (
__£edv®
, 
d¿nd48_d©a
 *
__bufãr
)

454 
__THROW
 
	`__nÚnuÎ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
d¿nd48_d©a
 *
__bufãr
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

459 
	$lcÚg48_r
 (
__·¿m
[7],

460 
d¿nd48_d©a
 *
__bufãr
)

461 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

467 #iâdeà
__m®loc_ªd_ÿÎoc_defšed


468 
	#__m®loc_ªd_ÿÎoc_defšed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$m®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

473 *
	$ÿÎoc
 (
size_t
 
__nmemb
, size_ˆ
__size
)

474 
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #iâdeà
__Ãed_m®loc_ªd_ÿÎoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$»®loc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©Œibu‹_w¬n_unu£d_»suÉ__
;

488 
	$ä“
 (*
__±r
è
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$cä“
 (*
__±r
è
__THROW
;

496 #ià
defšed
 
__USE_GNU
 || defšed 
__USE_BSD
 || defšed 
__USE_MISC


497 
	~<®loÿ.h
>

500 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


502 *
	$v®loc
 (
size_t
 
__size
è
__THROW
 
__©Œibu‹_m®loc__
 
__wur
;

505 #ifdeà
__USE_XOPEN2K


507 
	$posix_mem®ign
 (**
__mem±r
, 
size_t
 
__®ignm’t
, size_ˆ
__size
)

508 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

511 
__BEGIN_NAMESPACE_STD


513 
	$abÜt
 (è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

517 
	`©ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

519 #ifdeà
__USE_GNU


523 #ifdeà
__ılu¥lus


524 "C++" 
	`©_quick_ex™
 ((*
__func
) ())

525 
__THROW
 
	`__asm
 ("©_quick_ex™"è
	`__nÚnuÎ
 ((1));

527 
	`©_quick_ex™
 ((*
__func
è()è
__THROW
 
	`__nÚnuÎ
 ((1));

530 
__END_NAMESPACE_STD


532 #ifdef 
__USE_MISC


535 
	`Ú_ex™
 ((*
__func
è(
__¡©us
, *
__¬g
), *__arg)

536 
__THROW
 
	`__nÚnuÎ
 ((1));

539 
__BEGIN_NAMESPACE_STD


543 
	$ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

545 #ifdeà
__USE_GNU


551 
	$quick_ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

553 
__END_NAMESPACE_STD


555 #ifdeà
__USE_ISOC99


556 
__BEGIN_NAMESPACE_C99


559 
	$_Ex™
 (
__¡©us
è
__THROW
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

560 
__END_NAMESPACE_C99


564 
__BEGIN_NAMESPACE_STD


566 *
	$g‘’v
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

567 
__END_NAMESPACE_STD


571 *
	$__£cu»_g‘’v
 (
__cÚ¡
 *
__Çme
)

572 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

574 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


578 
	$pu‹nv
 (*
__¡ršg
è
__THROW
 
	`__nÚnuÎ
 ((1));

581 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


584 
	$£‹nv
 (
__cÚ¡
 *
__Çme
, __cÚ¡ *
__v®ue
, 
__»¶aû
)

585 
__THROW
 
	`__nÚnuÎ
 ((2));

588 
	$un£‹nv
 (
__cÚ¡
 *
__Çme
è
__THROW
;

591 #ifdef 
__USE_MISC


595 
	$ş—»nv
 (è
__THROW
;

599 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


604 *
	$mk‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

614 #iâdeà
__USE_FILE_OFFSET64


615 
	$mk¡emp
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

617 #ifdeà
__REDIRECT


618 
	`__REDIRECT
 (
mk¡emp
, (*
__‹m¶©e
), 
mk¡emp64
)

619 
	`__nÚnuÎ
 ((1)è
__wur
;

621 
	#mk¡emp
 
mk¡emp64


	)

624 #ifdeà
__USE_LARGEFILE64


625 
	$mk¡emp64
 (*
__‹m¶©e
è
	`__nÚnuÎ
 ((1)è
__wur
;

629 #ifdeà
__USE_MISC


636 #iâdeà
__USE_FILE_OFFSET64


637 
	$mk¡emps
 (*
__‹m¶©e
, 
__suffixËn
è
	`__nÚnuÎ
 ((1)è
__wur
;

639 #ifdeà
__REDIRECT


640 
	`__REDIRECT
 (
mk¡emps
, (*
__‹m¶©e
, 
__suffixËn
),

641 
mk¡emps64
è
	`__nÚnuÎ
 ((1)è
__wur
;

643 
	#mk¡emps
 
mk¡emps64


	)

646 #ifdeà
__USE_LARGEFILE64


647 
	$mk¡emps64
 (*
__‹m¶©e
, 
__suffixËn
)

648 
	`__nÚnuÎ
 ((1)è
__wur
;

652 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K8


658 *
	$mkd‹mp
 (*
__‹m¶©e
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

661 #ifdeà
__USE_GNU


668 #iâdeà
__USE_FILE_OFFSET64


669 
	$mko¡emp
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

671 #ifdeà
__REDIRECT


672 
	`__REDIRECT
 (
mko¡emp
, (*
__‹m¶©e
, 
__æags
), 
mko¡emp64
)

673 
	`__nÚnuÎ
 ((1)è
__wur
;

675 
	#mko¡emp
 
mko¡emp64


	)

678 #ifdeà
__USE_LARGEFILE64


679 
	$mko¡emp64
 (*
__‹m¶©e
, 
__æags
è
	`__nÚnuÎ
 ((1)è
__wur
;

688 #iâdeà
__USE_FILE_OFFSET64


689 
	$mko¡emps
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

690 
	`__nÚnuÎ
 ((1)è
__wur
;

692 #ifdeà
__REDIRECT


693 
	`__REDIRECT
 (
mko¡emps
, (*
__‹m¶©e
, 
__suffixËn
,

694 
__æags
), 
mko¡emps64
)

695 
	`__nÚnuÎ
 ((1)è
__wur
;

697 
	#mko¡emps
 
mko¡emps64


	)

700 #ifdeà
__USE_LARGEFILE64


701 
	$mko¡emps64
 (*
__‹m¶©e
, 
__suffixËn
, 
__æags
)

702 
	`__nÚnuÎ
 ((1)è
__wur
;

707 
__BEGIN_NAMESPACE_STD


712 
	$sy¡em
 (
__cÚ¡
 *
__commªd
è
__wur
;

713 
__END_NAMESPACE_STD


716 #ifdef 
__USE_GNU


719 *
	$ÿnÚiÿlize_fe_Çme
 (
__cÚ¡
 *
__Çme
)

720 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

723 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


729 *
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

730 *
__»¡riù
 
__»sŞved
è
__THROW
 
__wur
;

735 #iâdeà
__COMPAR_FN_T


736 
	#__COMPAR_FN_T


	)

737 (*
	t__com·r_â_t
è(
	t__cÚ¡
 *, __const *);

739 #ifdef 
__USE_GNU


740 
__com·r_â_t
 
	tcom·risÚ_â_t
;

743 #ifdeà
__USE_GNU


744 (*
	t__com·r_d_â_t
è(
	t__cÚ¡
 *, __const *, *);

747 
__BEGIN_NAMESPACE_STD


750 *
	$b£¬ch
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__ba£
,

751 
size_t
 
__nmemb
, size_ˆ
__size
, 
__com·r_â_t
 
__com·r
)

752 
	`__nÚnuÎ
 ((1, 2, 5)è
__wur
;

756 
	$qsÜt
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

757 
__com·r_â_t
 
__com·r
è
	`__nÚnuÎ
 ((1, 4));

758 #ifdeà
__USE_GNU


759 
	$qsÜt_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_ˆ
__size
,

760 
__com·r_d_â_t
 
__com·r
, *
__¬g
)

761 
	`__nÚnuÎ
 ((1, 4));

766 
	$abs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

767 
	$Ïbs
 (
__x
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

768 
__END_NAMESPACE_STD


770 #ifdeà
__USE_ISOC99


771 
__ex‹nsiÚ__
 
	$Îabs
 (
__x
)

772 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

776 
__BEGIN_NAMESPACE_STD


780 
div_t
 
	$div
 (
__num”
, 
__d’om
)

781 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

782 
ldiv_t
 
	$ldiv
 (
__num”
, 
__d’om
)

783 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

784 
__END_NAMESPACE_STD


786 #ifdeà
__USE_ISOC99


787 
__BEGIN_NAMESPACE_C99


788 
__ex‹nsiÚ__
 
Îdiv_t
 
	$Îdiv
 (
__num”
,

789 
__d’om
)

790 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
)è
__wur
;

791 
__END_NAMESPACE_C99


795 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


802 *
	$ecvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

803 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

808 *
	$fcvt
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

809 *
__»¡riù
 
__sign
è
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

814 *
	$gcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

815 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

818 #ifdeà
__USE_MISC


820 *
	$qecvt
 (
__v®ue
, 
__ndig™
,

821 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

822 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

823 *
	$qfcvt
 (
__v®ue
, 
__ndig™
,

824 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
)

825 
__THROW
 
	`__nÚnuÎ
 ((3, 4)è
__wur
;

826 *
	$qgcvt
 (
__v®ue
, 
__ndig™
, *
__buf
)

827 
__THROW
 
	`__nÚnuÎ
 ((3)è
__wur
;

832 
	$ecvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

833 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

834 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

835 
	$fcvt_r
 (
__v®ue
, 
__ndig™
, *
__»¡riù
 
__deıt
,

836 *
__»¡riù
 
__sign
, *__»¡riù 
__buf
,

837 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

839 
	$qecvt_r
 (
__v®ue
, 
__ndig™
,

840 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

841 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

842 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

843 
	$qfcvt_r
 (
__v®ue
, 
__ndig™
,

844 *
__»¡riù
 
__deıt
, *__»¡riù 
__sign
,

845 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

846 
__THROW
 
	`__nÚnuÎ
 ((3, 4, 5));

851 
__BEGIN_NAMESPACE_STD


854 
	$mbËn
 (
__cÚ¡
 *
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

857 
	$mbtowc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

858 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
 
__wur
;

861 
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
è
__THROW
 
__wur
;

865 
size_t
 
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__pwcs
,

866 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
è
__THROW
;

868 
size_t
 
	$wc¡ombs
 (*
__»¡riù
 
__s
,

869 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__pwcs
, 
size_t
 
__n
)

870 
__THROW
;

871 
__END_NAMESPACE_STD


874 #ifdeà
__USE_SVID


879 
	$½m©ch
 (
__cÚ¡
 *
__»¥Ú£
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

883 #ifdeà
__USE_XOPEN_EXTENDED


890 
	$g‘subİt
 (**
__»¡riù
 
__İtiÚp
,

891 *
__cÚ¡
 *
__»¡riù
 
__tok’s
,

892 **
__»¡riù
 
__v®u•
)

893 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3)è
__wur
;

897 #ifdeà
__USE_XOPEN


899 
	$£tkey
 (
__cÚ¡
 *
__key
è
__THROW
 
	`__nÚnuÎ
 ((1));

905 #ifdeà
__USE_XOPEN2K


907 
	$posix_İ’±
 (
__oæag
è
__wur
;

910 #ifdeà
__USE_XOPEN


915 
	$g¿Á±
 (
__fd
è
__THROW
;

919 
	$uÆock±
 (
__fd
è
__THROW
;

924 *
	$±¢ame
 (
__fd
è
__THROW
 
__wur
;

927 #ifdeà
__USE_GNU


931 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

932 
__THROW
 
	`__nÚnuÎ
 ((2));

935 
	`g‘±
 ();

938 #ifdeà
__USE_BSD


942 
	$g‘lßdavg
 (
__lßdavg
[], 
__ÃËm
)

943 
__THROW
 
	`__nÚnuÎ
 ((1));

948 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


949 
	~<b™s/¡dlib.h
>

951 #ifdeà
__LDBL_COMPAT


952 
	~<b™s/¡dlib-ldbl.h
>

956 #undeà
__Ãed_m®loc_ªd_ÿÎoc


958 
__END_DECLS


	@/usr/include/sys/stat.h

24 #iâdef 
_SYS_STAT_H


25 
	#_SYS_STAT_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	~<b™s/ty³s.h
>

31 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K
 || defšed 
__USE_MISC
 \

32 || 
defšed
 
	g__USE_ATFILE


33 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


34 
	#__Ãed_time_t


	)

36 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ATFILE


37 
	#__Ãed_time¥ec


	)

39 
	~<time.h
>

42 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


45 #iâdeà
__dev_t_defšed


46 
__dev_t
 
	tdev_t
;

47 
	#__dev_t_defšed


	)

50 #iâdeà
__gid_t_defšed


51 
__gid_t
 
	tgid_t
;

52 
	#__gid_t_defšed


	)

55 #iâdeà
__šo_t_defšed


56 #iâdeà
__USE_FILE_OFFSET64


57 
__šo_t
 
	tšo_t
;

59 
__šo64_t
 
	tšo_t
;

61 
	#__šo_t_defšed


	)

64 #iâdeà
__mode_t_defšed


65 
__mode_t
 
	tmode_t
;

66 
	#__mode_t_defšed


	)

69 #iâdeà
__Æšk_t_defšed


70 
__Æšk_t
 
	tÆšk_t
;

71 
	#__Æšk_t_defšed


	)

74 #iâdeà
__off_t_defšed


75 #iâdeà
__USE_FILE_OFFSET64


76 
__off_t
 
	toff_t
;

78 
__off64_t
 
	toff_t
;

80 
	#__off_t_defšed


	)

83 #iâdeà
__uid_t_defšed


84 
__uid_t
 
	tuid_t
;

85 
	#__uid_t_defšed


	)

89 #ifdeà
__USE_UNIX98


90 #iâdeà
__blkút_t_defšed


91 #iâdeà
__USE_FILE_OFFSET64


92 
__blkút_t
 
	tblkút_t
;

94 
__blkút64_t
 
	tblkút_t
;

96 
	#__blkút_t_defšed


	)

99 #iâdeà
__blksize_t_defšed


100 
__blksize_t
 
	tblksize_t
;

101 
	#__blksize_t_defšed


	)

105 
	g__BEGIN_DECLS


107 
	~<b™s/¡©.h
>

109 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


110 
	#S_IFMT
 
__S_IFMT


	)

111 
	#S_IFDIR
 
__S_IFDIR


	)

112 
	#S_IFCHR
 
__S_IFCHR


	)

113 
	#S_IFBLK
 
__S_IFBLK


	)

114 
	#S_IFREG
 
__S_IFREG


	)

115 #ifdeà
__S_IFIFO


116 
	#S_IFIFO
 
__S_IFIFO


	)

118 #ifdeà
__S_IFLNK


119 
	#S_IFLNK
 
__S_IFLNK


	)

121 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_UNIX98
) \

122 && 
defšed
 
	g__S_IFSOCK


123 
	#S_IFSOCK
 
__S_IFSOCK


	)

129 
	#__S_ISTYPE
(
mode
, 
mask
è(((modeè& 
__S_IFMT
è=ğ(mask))

	)

131 
	#S_ISDIR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFDIR
)

	)

132 
	#S_ISCHR
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFCHR
)

	)

133 
	#S_ISBLK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFBLK
)

	)

134 
	#S_ISREG
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFREG
)

	)

135 #ifdeà
__S_IFIFO


136 
	#S_ISFIFO
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFIFO
)

	)

138 #ifdeà
__S_IFLNK


139 
	#S_ISLNK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFLNK
)

	)

142 #ià
defšed
 
__USE_BSD
 && !defšed 
__S_IFLNK


143 
	#S_ISLNK
(
mode
è0

	)

146 #ià(
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K
) \

147 && 
defšed
 
	g__S_IFSOCK


148 
	#S_ISSOCK
(
mode
è
	`__S_ISTYPE
((mode), 
__S_IFSOCK
)

	)

149 #–ià
defšed
 
__USE_XOPEN2K


150 
	#S_ISSOCK
(
mode
è0

	)

157 #ifdef 
__USE_POSIX199309


158 
	#S_TYPEISMQ
(
buf
è
	`__S_TYPEISMQ
(buf)

	)

159 
	#S_TYPEISSEM
(
buf
è
	`__S_TYPEISSEM
(buf)

	)

160 
	#S_TYPEISSHM
(
buf
è
	`__S_TYPEISSHM
(buf)

	)

166 
	#S_ISUID
 
__S_ISUID


	)

167 
	#S_ISGID
 
__S_ISGID


	)

169 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


171 
	#S_ISVTX
 
__S_ISVTX


	)

174 
	#S_IRUSR
 
__S_IREAD


	)

175 
	#S_IWUSR
 
__S_IWRITE


	)

176 
	#S_IXUSR
 
__S_IEXEC


	)

178 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

180 #ià
defšed
 
__USE_MISC
 && defšed 
__USE_BSD


181 
	#S_IREAD
 
S_IRUSR


	)

182 
	#S_IWRITE
 
S_IWUSR


	)

183 
	#S_IEXEC
 
S_IXUSR


	)

186 
	#S_IRGRP
 (
S_IRUSR
 >> 3è

	)

187 
	#S_IWGRP
 (
S_IWUSR
 >> 3è

	)

188 
	#S_IXGRP
 (
S_IXUSR
 >> 3è

	)

190 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

192 
	#S_IROTH
 (
S_IRGRP
 >> 3è

	)

193 
	#S_IWOTH
 (
S_IWGRP
 >> 3è

	)

194 
	#S_IXOTH
 (
S_IXGRP
 >> 3è

	)

196 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

199 #ifdef 
__USE_BSD


201 
	#ACCESSPERMS
 (
S_IRWXU
|
S_IRWXG
|
S_IRWXO
è

	)

202 
	#ALLPERMS
 (
S_ISUID
|
S_ISGID
|
S_ISVTX
|
S_IRWXU
|
S_IRWXG
|
S_IRWXO
)

	)

203 
	#DEFFILEMODE
 (
S_IRUSR
|
S_IWUSR
|
S_IRGRP
|
S_IWGRP
|
S_IROTH
|
S_IWOTH
)

	)

205 
	#S_BLKSIZE
 512

	)

209 #iâdeà
__USE_FILE_OFFSET64


211 
	$¡©
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

212 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

216 
	$f¡©
 (
__fd
, 
¡©
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

218 #ifdeà
__REDIRECT_NTH


219 
	`__REDIRECT_NTH
 (
¡©
, (
__cÚ¡
 *
__»¡riù
 
__fe
,

220 
¡©
 *
__»¡riù
 
__buf
), 
¡©64
)

221 
	`__nÚnuÎ
 ((1, 2));

222 
	`__REDIRECT_NTH
 (
f¡©
, (
__fd
, 
¡©
 *
__buf
), 
f¡©64
)

223 
	`__nÚnuÎ
 ((2));

225 
	#¡©
 
¡©64


	)

226 
	#f¡©
 
f¡©64


	)

229 #ifdeà
__USE_LARGEFILE64


230 
	$¡©64
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

231 
¡©64
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

232 
	$f¡©64
 (
__fd
, 
¡©64
 *
__buf
è
__THROW
 
	`__nÚnuÎ
 ((2));

235 #ifdeà
__USE_ATFILE


239 #iâdeà
__USE_FILE_OFFSET64


240 
	$f¡©©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

241 
¡©
 *
__»¡riù
 
__buf
, 
__æag
)

242 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

244 #ifdeà
__REDIRECT_NTH


245 
	`__REDIRECT_NTH
 (
f¡©©
, (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

246 
¡©
 *
__»¡riù
 
__buf
,

247 
__æag
),

248 
f¡©©64
è
	`__nÚnuÎ
 ((2, 3));

250 
	#f¡©©
 
f¡©©64


	)

254 #ifdeà
__USE_LARGEFILE64


255 
	$f¡©©64
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fe
,

256 
¡©64
 *
__»¡riù
 
__buf
, 
__æag
)

257 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

261 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


262 #iâdeà
__USE_FILE_OFFSET64


265 
	$l¡©
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

266 
¡©
 *
__»¡riù
 
__buf
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

268 #ifdeà
__REDIRECT_NTH


269 
	`__REDIRECT_NTH
 (
l¡©
,

270 (
__cÚ¡
 *
__»¡riù
 
__fe
,

271 
¡©
 *
__»¡riù
 
__buf
), 
l¡©64
)

272 
	`__nÚnuÎ
 ((1, 2));

274 
	#l¡©
 
l¡©64


	)

277 #ifdeà
__USE_LARGEFILE64


278 
	$l¡©64
 (
__cÚ¡
 *
__»¡riù
 
__fe
,

279 
¡©64
 *
__»¡riù
 
__buf
)

280 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

286 
	$chmod
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
)

287 
__THROW
 
	`__nÚnuÎ
 ((1));

289 #ifdeà
__USE_BSD


293 
	$lchmod
 (
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

298 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


299 
	$fchmod
 (
__fd
, 
__mode_t
 
__mode
è
__THROW
;

302 #ifdeà
__USE_ATFILE


305 
	$fchmod©
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__mode_t
 
__mode
,

306 
__æag
)

307 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

314 
__mode_t
 
	$umask
 (
__mode_t
 
__mask
è
__THROW
;

316 #ifdef 
__USE_GNU


319 
__mode_t
 
	$g‘umask
 (è
__THROW
;

323 
	$mkdœ
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

324 
__THROW
 
	`__nÚnuÎ
 ((1));

326 #ifdeà
__USE_ATFILE


330 
	$mkdœ©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

331 
__THROW
 
	`__nÚnuÎ
 ((2));

337 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


338 
	$mknod
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
)

339 
__THROW
 
	`__nÚnuÎ
 ((1));

341 #ifdeà
__USE_ATFILE


345 
	$mknod©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

346 
__dev_t
 
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2));

352 
	$mkfifo
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

353 
__THROW
 
	`__nÚnuÎ
 ((1));

355 #ifdeà
__USE_ATFILE


359 
	$mkfifßt
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
)

360 
__THROW
 
	`__nÚnuÎ
 ((2));

363 #ifdeà
__USE_ATFILE


366 
	$utim’§t
 (
__fd
, 
__cÚ¡
 *
__·th
,

367 
__cÚ¡
 
time¥ec
 
__times
[2],

368 
__æags
)

369 
__THROW
 
	`__nÚnuÎ
 ((2));

372 #ifdeà
__USE_XOPEN2K8


374 
	$futim’s
 (
__fd
, 
__cÚ¡
 
time¥ec
 
__times
[2]è
__THROW
;

392 #iâdeà
_STAT_VER


393 
	#_STAT_VER
 0

	)

395 #iâdeà
_MKNOD_VER


396 
	#_MKNOD_VER
 0

	)

400 #iâdeà
__USE_FILE_OFFSET64


401 
	$__fx¡©
 (
__v”
, 
__fdes
, 
¡©
 *
__¡©_buf
)

402 
__THROW
 
	`__nÚnuÎ
 ((3));

403 
	$__x¡©
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

404 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

405 
	$__lx¡©
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

406 
¡©
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

407 
	$__fx¡©©
 (
__v”
, 
__fdes
, 
__cÚ¡
 *
__f’ame
,

408 
¡©
 *
__¡©_buf
, 
__æag
)

409 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

411 #ifdeà
__REDIRECT_NTH


412 
	`__REDIRECT_NTH
 (
__fx¡©
, (
__v”
, 
__fdes
,

413 
¡©
 *
__¡©_buf
), 
__fx¡©64
)

414 
	`__nÚnuÎ
 ((3));

415 
	`__REDIRECT_NTH
 (
__x¡©
, (
__v”
, 
__cÚ¡
 *
__f’ame
,

416 
¡©
 *
__¡©_buf
), 
__x¡©64
)

417 
	`__nÚnuÎ
 ((2, 3));

418 
	`__REDIRECT_NTH
 (
__lx¡©
, (
__v”
, 
__cÚ¡
 *
__f’ame
,

419 
¡©
 *
__¡©_buf
), 
__lx¡©64
)

420 
	`__nÚnuÎ
 ((2, 3));

421 
	`__REDIRECT_NTH
 (
__fx¡©©
, (
__v”
, 
__fdes
,

422 
__cÚ¡
 *
__f’ame
,

423 
¡©
 *
__¡©_buf
, 
__æag
),

424 
__fx¡©©64
è
	`__nÚnuÎ
 ((3, 4));

427 
	#__fx¡©
 
__fx¡©64


	)

428 
	#__x¡©
 
__x¡©64


	)

429 
	#__lx¡©
 
__lx¡©64


	)

433 #ifdeà
__USE_LARGEFILE64


434 
	$__fx¡©64
 (
__v”
, 
__fdes
, 
¡©64
 *
__¡©_buf
)

435 
__THROW
 
	`__nÚnuÎ
 ((3));

436 
	$__x¡©64
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

437 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

438 
	$__lx¡©64
 (
__v”
, 
__cÚ¡
 *
__f’ame
,

439 
¡©64
 *
__¡©_buf
è
__THROW
 
	`__nÚnuÎ
 ((2, 3));

440 
	$__fx¡©©64
 (
__v”
, 
__fdes
, 
__cÚ¡
 *
__f’ame
,

441 
¡©64
 *
__¡©_buf
, 
__æag
)

442 
__THROW
 
	`__nÚnuÎ
 ((3, 4));

444 
	$__xmknod
 (
__v”
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

445 
__dev_t
 *
__dev
è
__THROW
 
	`__nÚnuÎ
 ((2, 4));

447 
	$__xmknod©
 (
__v”
, 
__fd
, 
__cÚ¡
 *
__·th
,

448 
__mode_t
 
__mode
, 
__dev_t
 *
__dev
)

449 
__THROW
 
	`__nÚnuÎ
 ((3, 5));

451 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES_IN_LIBC


454 
__ex‹º_šlše
 

455 
	`__NTH
 (
	$¡©
 (
__cÚ¡
 *
__·th
, 
¡©
 *
__¡©buf
))

457  
	`__x¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

458 
	}
}

460 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


461 
__ex‹º_šlše
 

462 
__NTH
 (
	$l¡©
 (
__cÚ¡
 *
__·th
, 
¡©
 *
__¡©buf
))

464  
	`__lx¡©
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

465 
	}
}

468 
__ex‹º_šlše
 

469 
__NTH
 (
	$f¡©
 (
__fd
, 
¡©
 *
__¡©buf
))

471  
	`__fx¡©
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

472 
	}
}

474 #ifdeà
__USE_ATFILE


475 
__ex‹º_šlše
 

476 
__NTH
 (
	$f¡©©
 (
__fd
, 
__cÚ¡
 *
__f’ame
, 
¡©
 *
__¡©buf
,

477 
__æag
))

479  
	`__fx¡©©
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

480 
	}
}

483 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_BSD


484 
__ex‹º_šlše
 

485 
__NTH
 (
	$mknod
 (
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
, 
__dev_t
 
__dev
))

487  
	`__xmknod
 (
_MKNOD_VER
, 
__·th
, 
__mode
, &
__dev
);

488 
	}
}

491 #ifdeà
__USE_ATFILE


492 
__ex‹º_šlše
 

493 
__NTH
 (
	$mknod©
 (
__fd
, 
__cÚ¡
 *
__·th
, 
__mode_t
 
__mode
,

494 
__dev_t
 
__dev
))

496  
	`__xmknod©
 (
_MKNOD_VER
, 
__fd
, 
__·th
, 
__mode
, &
__dev
);

497 
	}
}

500 #ià
defšed
 
__USE_LARGEFILE64
 \

501 && (! 
defšed
 
	g__USE_FILE_OFFSET64
 \

502 || (
defšed
 
	g__REDIRECT_NTH
 && defšed 
	g__OPTIMIZE__
))

503 
__ex‹º_šlše
 

504 
__NTH
 (
	$¡©64
 (
__cÚ¡
 *
__·th
, 
¡©64
 *
__¡©buf
))

506  
	`__x¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

507 
	}
}

509 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


510 
__ex‹º_šlše
 

511 
__NTH
 (
	$l¡©64
 (
__cÚ¡
 *
__·th
, 
¡©64
 *
__¡©buf
))

513  
	`__lx¡©64
 (
_STAT_VER
, 
__·th
, 
__¡©buf
);

514 
	}
}

517 
__ex‹º_šlše
 

518 
__NTH
 (
	$f¡©64
 (
__fd
, 
¡©64
 *
__¡©buf
))

520  
	`__fx¡©64
 (
_STAT_VER
, 
__fd
, 
__¡©buf
);

521 
	}
}

523 #ifdeà
__USE_ATFILE


524 
__ex‹º_šlše
 

525 
__NTH
 (
	$f¡©©64
 (
__fd
, 
__cÚ¡
 *
__f’ame
, 
¡©64
 *
__¡©buf
,

526 
__æag
))

528  
	`__fx¡©©64
 (
_STAT_VER
, 
__fd
, 
__f’ame
, 
__¡©buf
, 
__æag
);

529 
	}
}

536 
	g__END_DECLS


	@/usr/include/sys/types.h

24 #iâdef 
_SYS_TYPES_H


25 
	#_SYS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

29 
	g__BEGIN_DECLS


31 
	~<b™s/ty³s.h
>

33 #ifdef 
__USE_BSD


34 #iâdeà
__u_ch¬_defšed


35 
__u_ch¬
 
	tu_ch¬
;

36 
__u_shÜt
 
	tu_shÜt
;

37 
__u_št
 
	tu_št
;

38 
__u_lÚg
 
	tu_lÚg
;

39 
__quad_t
 
	tquad_t
;

40 
__u_quad_t
 
	tu_quad_t
;

41 
__fsid_t
 
	tfsid_t
;

42 
	#__u_ch¬_defšed


	)

46 
__loff_t
 
	tloff_t
;

48 #iâdeà
__šo_t_defšed


49 #iâdeà
__USE_FILE_OFFSET64


50 
__šo_t
 
	tšo_t
;

52 
__šo64_t
 
	tšo_t
;

54 
	#__šo_t_defšed


	)

56 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__šo64_t_defšed


57 
__šo64_t
 
	tšo64_t
;

58 
	#__šo64_t_defšed


	)

61 #iâdeà
__dev_t_defšed


62 
__dev_t
 
	tdev_t
;

63 
	#__dev_t_defšed


	)

66 #iâdeà
__gid_t_defšed


67 
__gid_t
 
	tgid_t
;

68 
	#__gid_t_defšed


	)

71 #iâdeà
__mode_t_defšed


72 
__mode_t
 
	tmode_t
;

73 
	#__mode_t_defšed


	)

76 #iâdeà
__Æšk_t_defšed


77 
__Æšk_t
 
	tÆšk_t
;

78 
	#__Æšk_t_defšed


	)

81 #iâdeà
__uid_t_defšed


82 
__uid_t
 
	tuid_t
;

83 
	#__uid_t_defšed


	)

86 #iâdeà
__off_t_defšed


87 #iâdeà
__USE_FILE_OFFSET64


88 
__off_t
 
	toff_t
;

90 
__off64_t
 
	toff_t
;

92 
	#__off_t_defšed


	)

94 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


95 
__off64_t
 
	toff64_t
;

96 
	#__off64_t_defšed


	)

99 #iâdeà
__pid_t_defšed


100 
__pid_t
 
	tpid_t
;

101 
	#__pid_t_defšed


	)

104 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__id_t_defšed


105 
__id_t
 
	tid_t
;

106 
	#__id_t_defšed


	)

109 #iâdeà
__ssize_t_defšed


110 
__ssize_t
 
	tssize_t
;

111 
	#__ssize_t_defšed


	)

114 #ifdef 
__USE_BSD


115 #iâdeà
__daddr_t_defšed


116 
__daddr_t
 
	tdaddr_t
;

117 
__ÿddr_t
 
	tÿddr_t
;

118 
	#__daddr_t_defšed


	)

122 #ià(
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN
è&& !defšed 
__key_t_defšed


123 
__key_t
 
	tkey_t
;

124 
	#__key_t_defšed


	)

127 #ifdeà
__USE_XOPEN


128 
	#__Ãed_şock_t


	)

130 
	#__Ãed_time_t


	)

131 
	#__Ãed_tim”_t


	)

132 
	#__Ãed_şockid_t


	)

133 
	~<time.h
>

135 #ifdeà
__USE_XOPEN


136 #iâdeà
__u£cÚds_t_defšed


137 
__u£cÚds_t
 
	tu£cÚds_t
;

138 
	#__u£cÚds_t_defšed


	)

140 #iâdeà
__su£cÚds_t_defšed


141 
__su£cÚds_t
 
	tsu£cÚds_t
;

142 
	#__su£cÚds_t_defšed


	)

146 
	#__Ãed_size_t


	)

147 
	~<¡ddef.h
>

149 #ifdeà
__USE_MISC


151 
	tulÚg
;

152 
	tushÜt
;

153 
	tušt
;

158 #ià!
__GNUC_PREREQ
 (2, 7)

161 #iâdeà
__št8_t_defšed


162 
	#__št8_t_defšed


	)

163 
	tšt8_t
;

164 
	tšt16_t
;

165 
	tšt32_t
;

166 #ià
__WORDSIZE
 == 64

167 
	tšt64_t
;

168 #–ià
__GLIBC_HAVE_LONG_LONG


169 
__ex‹nsiÚ__
 
	tšt64_t
;

174 
	tu_št8_t
;

175 
	tu_št16_t
;

176 
	tu_št32_t
;

177 #ià
__WORDSIZE
 == 64

178 
	tu_št64_t
;

179 #–ià
__GLIBC_HAVE_LONG_LONG


180 
__ex‹nsiÚ__
 
	tu_št64_t
;

183 
	t»gi¡”_t
;

188 
	#__štN_t
(
N
, 
MODE
) \

189 ##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

190 
	t__u_štN_t
(
	tN
, 
	tMODE
) \

191 
	tu_št
##
	tN
##
	t_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	tMODE
)))

	)

193 #iâdeà
	t__št8_t_defšed


194 
	t__št8_t_defšed


	)

195 
	t__štN_t
 (8, 
	t__QI__
);

196 
__štN_t
 (16, 
__HI__
);

197 
__štN_t
 (32, 
__SI__
);

198 
__štN_t
 (64, 
__DI__
);

201 
__u_štN_t
 (8, 
__QI__
);

202 
__u_štN_t
 (16, 
__HI__
);

203 
__u_štN_t
 (32, 
__SI__
);

204 
__u_štN_t
 (64, 
__DI__
);

206 
	t»gi¡”_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__wÜd__
)));

212 
	#__BIT_TYPES_DEFINED__
 1

	)

215 #ifdef 
__USE_BSD


217 
	~<’dŸn.h
>

220 
	~<sys/£Ëù.h
>

223 
	~<sys/sysmaüos.h
>

227 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__blksize_t_defšed


228 
__blksize_t
 
	tblksize_t
;

229 
	#__blksize_t_defšed


	)

233 #iâdeà
__USE_FILE_OFFSET64


234 #iâdeà
__blkút_t_defšed


235 
__blkút_t
 
	tblkút_t
;

236 
	#__blkút_t_defšed


	)

238 #iâdeà
__fsblkút_t_defšed


239 
__fsblkút_t
 
	tfsblkút_t
;

240 
	#__fsblkút_t_defšed


	)

242 #iâdeà
__fsfút_t_defšed


243 
__fsfút_t
 
	tfsfút_t
;

244 
	#__fsfút_t_defšed


	)

247 #iâdeà
__blkút_t_defšed


248 
__blkút64_t
 
	tblkút_t
;

249 
	#__blkút_t_defšed


	)

251 #iâdeà
__fsblkút_t_defšed


252 
__fsblkút64_t
 
	tfsblkút_t
;

253 
	#__fsblkút_t_defšed


	)

255 #iâdeà
__fsfút_t_defšed


256 
__fsfút64_t
 
	tfsfút_t
;

257 
	#__fsfút_t_defšed


	)

261 #ifdeà
__USE_LARGEFILE64


262 
__blkút64_t
 
	tblkút64_t
;

263 
__fsblkút64_t
 
	tfsblkút64_t
;

264 
__fsfút64_t
 
	tfsfút64_t
;

269 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


270 
	~<b™s/±h»adty³s.h
>

273 
	g__END_DECLS


	@/usr/include/unistd.h

23 #iâdef 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<ã©u»s.h
>

28 
	g__BEGIN_DECLS


33 #ifdeà
__USE_XOPEN2K8


35 
	#_POSIX_VERSION
 200809L

	)

36 #–ià
defšed
 
__USE_XOPEN2K


38 
	#_POSIX_VERSION
 200112L

	)

39 #–ià
defšed
 
__USE_POSIX199506


41 
	#_POSIX_VERSION
 199506L

	)

42 #–ià
defšed
 
__USE_POSIX199309


44 
	#_POSIX_VERSION
 199309L

	)

47 
	#_POSIX_VERSION
 199009L

	)

53 #ifdeà
__USE_XOPEN2K8


54 
	#__POSIX2_THIS_VERSION
 200809L

	)

56 #–ià
defšed
 
__USE_XOPEN2K


58 
	#__POSIX2_THIS_VERSION
 200112L

	)

59 #–ià
defšed
 
__USE_POSIX199506


61 
	#__POSIX2_THIS_VERSION
 199506L

	)

64 
	#__POSIX2_THIS_VERSION
 199209L

	)

68 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

72 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

76 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

80 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

84 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

87 #ifdeà
__USE_XOPEN2K8


88 
	#_XOPEN_VERSION
 700

	)

89 #–ià
defšed
 
__USE_XOPEN2K


90 
	#_XOPEN_VERSION
 600

	)

91 #–ià
defšed
 
__USE_UNIX98


92 
	#_XOPEN_VERSION
 500

	)

94 
	#_XOPEN_VERSION
 4

	)

98 
	#_XOPEN_XCU_VERSION
 4

	)

101 
	#_XOPEN_XPG2
 1

	)

102 
	#_XOPEN_XPG3
 1

	)

103 
	#_XOPEN_XPG4
 1

	)

106 
	#_XOPEN_UNIX
 1

	)

109 
	#_XOPEN_CRYPT
 1

	)

113 
	#_XOPEN_ENH_I18N
 1

	)

116 
	#_XOPEN_LEGACY
 1

	)

203 
	~<b™s/posix_İt.h
>

206 #ifdeà
__USE_UNIX98


207 
	~<b™s/’vœÚm’ts.h
>

211 
	#STDIN_FILENO
 0

	)

212 
	#STDOUT_FILENO
 1

	)

213 
	#STDERR_FILENO
 2

	)

218 
	~<b™s/ty³s.h
>

220 #iâdef 
__ssize_t_defšed


221 
__ssize_t
 
	tssize_t
;

222 
	#__ssize_t_defšed


	)

225 
	#__Ãed_size_t


	)

226 
	#__Ãed_NULL


	)

227 
	~<¡ddef.h
>

229 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


232 #iâdeà
__gid_t_defšed


233 
__gid_t
 
	tgid_t
;

234 
	#__gid_t_defšed


	)

237 #iâdeà
__uid_t_defšed


238 
__uid_t
 
	tuid_t
;

239 
	#__uid_t_defšed


	)

242 #iâdeà
__off_t_defšed


243 #iâdeà
__USE_FILE_OFFSET64


244 
__off_t
 
	toff_t
;

246 
__off64_t
 
	toff_t
;

248 
	#__off_t_defšed


	)

250 #ià
defšed
 
__USE_LARGEFILE64
 && !defšed 
__off64_t_defšed


251 
__off64_t
 
	toff64_t
;

252 
	#__off64_t_defšed


	)

255 #iâdeà
__u£cÚds_t_defšed


256 
__u£cÚds_t
 
	tu£cÚds_t
;

257 
	#__u£cÚds_t_defšed


	)

260 #iâdeà
__pid_t_defšed


261 
__pid_t
 
	tpid_t
;

262 
	#__pid_t_defšed


	)

266 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


267 #iâdeà
__šŒ_t_defšed


268 
__šŒ_t
 
	tšŒ_t
;

269 
	#__šŒ_t_defšed


	)

273 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN


274 #iâdeà
__sockËn_t_defšed


275 
__sockËn_t
 
	tsockËn_t
;

276 
	#__sockËn_t_defšed


	)

282 
	#R_OK
 4

	)

283 
	#W_OK
 2

	)

284 
	#X_OK
 1

	)

285 
	#F_OK
 0

	)

288 
	$acûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
è
__THROW
 
	`__nÚnuÎ
 ((1));

290 #ifdeà
__USE_GNU


293 
	$euidacûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

297 
	$—cûss
 (
__cÚ¡
 *
__Çme
, 
__ty³
)

298 
__THROW
 
	`__nÚnuÎ
 ((1));

301 #ifdeà
__USE_ATFILE


305 
	$çcûs§t
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__ty³
, 
__æag
)

306 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

311 #iâdef 
_STDIO_H


312 
	#SEEK_SET
 0

	)

313 
	#SEEK_CUR
 1

	)

314 
	#SEEK_END
 2

	)

317 #ià
defšed
 
__USE_BSD
 && !defšed 
L_SET


319 
	#L_SET
 
SEEK_SET


	)

320 
	#L_INCR
 
SEEK_CUR


	)

321 
	#L_XTND
 
SEEK_END


	)

330 #iâdeà
__USE_FILE_OFFSET64


331 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__wh’û
è
__THROW
;

333 #ifdeà
__REDIRECT_NTH


334 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

335 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
),

336 
l£ek64
);

338 
	#l£ek
 
l£ek64


	)

341 #ifdeà
__USE_LARGEFILE64


342 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__wh’û
)

343 
__THROW
;

350 
	`şo£
 (
__fd
);

357 
ssize_t
 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
è
__wur
;

363 
ssize_t
 
	$wr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
è
__wur
;

365 #ifdeà
__USE_UNIX98


366 #iâdeà
__USE_FILE_OFFSET64


373 
ssize_t
 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

374 
__off_t
 
__off£t
è
__wur
;

381 
ssize_t
 
	$pwr™e
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

382 
__off_t
 
__off£t
è
__wur
;

384 #ifdeà
__REDIRECT


385 
ssize_t
 
	`__REDIRECT
 (
´—d
, (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

386 
__off64_t
 
__off£t
),

387 
´—d64
è
__wur
;

388 
ssize_t
 
	`__REDIRECT
 (
pwr™e
, (
__fd
, 
__cÚ¡
 *
__buf
,

389 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
),

390 
pwr™e64
è
__wur
;

392 
	#´—d
 
´—d64


	)

393 
	#pwr™e
 
pwr™e64


	)

397 #ifdeà
__USE_LARGEFILE64


401 
ssize_t
 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

402 
__off64_t
 
__off£t
è
__wur
;

405 
ssize_t
 
	$pwr™e64
 (
__fd
, 
__cÚ¡
 *
__buf
, 
size_t
 
__n
,

406 
__off64_t
 
__off£t
è
__wur
;

414 
	$pe
 (
__pedes
[2]è
__THROW
 
__wur
;

416 #ifdeà
__USE_GNU


419 
	$pe2
 (
__pedes
[2], 
__æags
è
__THROW
 
__wur
;

429 
	$®¬m
 (
__£cÚds
è
__THROW
;

441 
	`¦“p
 (
__£cÚds
);

443 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


448 
__u£cÚds_t
 
	$u®¬m
 (
__u£cÚds_t
 
__v®ue
, __u£cÚds_ˆ
__š‹rv®
)

449 
__THROW
;

456 
	`u¦“p
 (
__u£cÚds_t
 
__u£cÚds
);

465 
	`·u£
 ();

469 
	$chown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

470 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

472 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


474 
	$fchown
 (
__fd
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
è
__THROW
 
__wur
;

479 
	$lchown
 (
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
, 
__gid_t
 
__group
)

480 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

484 #ifdeà
__USE_ATFILE


487 
	$fchowÇt
 (
__fd
, 
__cÚ¡
 *
__fe
, 
__uid_t
 
__owÃr
,

488 
__gid_t
 
__group
, 
__æag
)

489 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

493 
	$chdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

495 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


497 
	$fchdœ
 (
__fd
è
__THROW
 
__wur
;

507 *
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
è
__THROW
 
__wur
;

509 #ifdef 
__USE_GNU


513 *
	$g‘_cu¼’t_dœ_Çme
 (è
__THROW
;

516 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


520 *
	$g‘wd
 (*
__buf
)

521 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
;

526 
	$dup
 (
__fd
è
__THROW
 
__wur
;

529 
	$dup2
 (
__fd
, 
__fd2
è
__THROW
;

531 #ifdeà
__USE_GNU


534 
	$dup3
 (
__fd
, 
__fd2
, 
__æags
è
__THROW
;

538 **
__’vœÚ
;

539 #ifdeà
__USE_GNU


540 **
’vœÚ
;

546 
	$execve
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[],

547 *
__cÚ¡
 
__’vp
[]è
__THROW
 
	`__nÚnuÎ
 ((1));

549 #ifdeà
__USE_XOPEN2K8


552 
	$ãxecve
 (
__fd
, *
__cÚ¡
 
__¬gv
[], *__cÚ¡ 
__’vp
[])

553 
__THROW
;

558 
	$execv
 (
__cÚ¡
 *
__·th
, *__cÚ¡ 
__¬gv
[])

559 
__THROW
 
	`__nÚnuÎ
 ((1));

563 
	$exeşe
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

564 
__THROW
 
	`__nÚnuÎ
 ((1));

568 
	$exeş
 (
__cÚ¡
 *
__·th
, __cÚ¡ *
__¬g
, ...)

569 
__THROW
 
	`__nÚnuÎ
 ((1));

573 
	$execvp
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[])

574 
__THROW
 
	`__nÚnuÎ
 ((1));

579 
	$exeşp
 (
__cÚ¡
 *
__fe
, __cÚ¡ *
__¬g
, ...)

580 
__THROW
 
	`__nÚnuÎ
 ((1));

582 #ifdeà
__USE_GNU


585 
	$execv³
 (
__cÚ¡
 *
__fe
, *__cÚ¡ 
__¬gv
[],

586 *
__cÚ¡
 
__’vp
[])

587 
__THROW
 
	`__nÚnuÎ
 ((1));

591 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


593 
	$niû
 (
__šc
è
__THROW
 
__wur
;

598 
	$_ex™
 (
__¡©us
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

604 
	~<b™s/cÚâame.h
>

607 
	$·thcÚf
 (
__cÚ¡
 *
__·th
, 
__Çme
)

608 
__THROW
 
	`__nÚnuÎ
 ((1));

611 
	$å©hcÚf
 (
__fd
, 
__Çme
è
__THROW
;

614 
	$syscÚf
 (
__Çme
è
__THROW
;

616 #ifdef 
__USE_POSIX2


618 
size_t
 
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
è
__THROW
;

623 
__pid_t
 
	$g‘pid
 (è
__THROW
;

626 
__pid_t
 
	$g‘µid
 (è
__THROW
;

630 #iâdeà
__FAVOR_BSD


631 
__pid_t
 
	$g‘pg½
 (è
__THROW
;

633 #ifdeà
__REDIRECT_NTH


634 
__pid_t
 
	`__REDIRECT_NTH
 (
g‘pg½
, (__pid_ˆ
__pid
), 
__g‘pgid
);

636 
	#g‘pg½
 
__g‘pgid


	)

641 
__pid_t
 
	$__g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

642 #ifdeà
__USE_XOPEN_EXTENDED


643 
__pid_t
 
	$g‘pgid
 (
__pid_t
 
__pid
è
__THROW
;

650 
	$£gid
 (
__pid_t
 
__pid
, __pid_ˆ
__pgid
è
__THROW
;

652 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


663 #iâdeà
__FAVOR_BSD


667 
	$£g½
 (è
__THROW
;

672 #ifdeà
__REDIRECT_NTH


673 
	`__REDIRECT_NTH
 (
£g½
, (
__pid_t
 
__pid
, __pid_ˆ
__pg½
), 
£gid
);

675 
	#£g½
 
£gid


	)

684 
__pid_t
 
	$£tsid
 (è
__THROW
;

686 #ifdeà
__USE_XOPEN_EXTENDED


688 
__pid_t
 
	$g‘sid
 (
__pid_t
 
__pid
è
__THROW
;

692 
__uid_t
 
	$g‘uid
 (è
__THROW
;

695 
__uid_t
 
	$g‘euid
 (è
__THROW
;

698 
__gid_t
 
	$g‘gid
 (è
__THROW
;

701 
__gid_t
 
	$g‘egid
 (è
__THROW
;

706 
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]è
__THROW
 
__wur
;

708 #ifdef 
__USE_GNU


710 
	$group_memb”
 (
__gid_t
 
__gid
è
__THROW
;

717 
	$£tuid
 (
__uid_t
 
__uid
è
__THROW
;

719 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


722 
	$£Œeuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
è
__THROW
;

725 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


727 
	$£‹uid
 (
__uid_t
 
__uid
è
__THROW
;

734 
	$£tgid
 (
__gid_t
 
__gid
è
__THROW
;

736 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


739 
	$£Œegid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
è
__THROW
;

742 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN2K


744 
	$£‹gid
 (
__gid_t
 
__gid
è
__THROW
;

747 #ifdeà
__USE_GNU


750 
	$g‘»suid
 (
__uid_t
 *
__ruid
, __uid_ˆ*
__euid
, __uid_ˆ*
__suid
)

751 
__THROW
;

755 
	$g‘»sgid
 (
__gid_t
 *
__rgid
, __gid_ˆ*
__egid
, __gid_ˆ*
__sgid
)

756 
__THROW
;

760 
	$£Œesuid
 (
__uid_t
 
__ruid
, __uid_ˆ
__euid
, __uid_ˆ
__suid
)

761 
__THROW
;

765 
	$£Œesgid
 (
__gid_t
 
__rgid
, __gid_ˆ
__egid
, __gid_ˆ
__sgid
)

766 
__THROW
;

773 
__pid_t
 
	$fÜk
 (è
__THROW
;

775 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


780 
__pid_t
 
	$vfÜk
 (è
__THROW
;

786 *
	$‰yÇme
 (
__fd
è
__THROW
;

790 
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
)

791 
__THROW
 
	`__nÚnuÎ
 ((2)è
__wur
;

795 
	$i§‰y
 (
__fd
è
__THROW
;

797 #ià
defšed
 
__USE_BSD
 \

798 || (
defšed
 
__USE_XOPEN_EXTENDED
 && !defšed 
__USE_UNIX98
)

801 
	$‰y¦Ù
 (è
__THROW
;

806 
	$lšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

807 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

809 #ifdeà
__USE_ATFILE


812 
	$lšk©
 (
__äomfd
, 
__cÚ¡
 *
__äom
, 
__tofd
,

813 
__cÚ¡
 *
__to
, 
__æags
)

814 
__THROW
 
	`__nÚnuÎ
 ((2, 4)è
__wur
;

817 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


819 
	$symlšk
 (
__cÚ¡
 *
__äom
, __cÚ¡ *
__to
)

820 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

825 
ssize_t
 
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

826 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

827 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

830 #ifdeà
__USE_ATFILE


832 
	$symlšk©
 (
__cÚ¡
 *
__äom
, 
__tofd
,

833 
__cÚ¡
 *
__to
è
__THROW
 
	`__nÚnuÎ
 ((1, 3)è
__wur
;

836 
ssize_t
 
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

837 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
)

838 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

842 
	$uÆšk
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

844 #ifdeà
__USE_ATFILE


846 
	$uÆšk©
 (
__fd
, 
__cÚ¡
 *
__Çme
, 
__æag
)

847 
__THROW
 
	`__nÚnuÎ
 ((2));

851 
	$rmdœ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1));

855 
__pid_t
 
	$tcg‘pg½
 (
__fd
è
__THROW
;

858 
	$tc£g½
 (
__fd
, 
__pid_t
 
__pg½_id
è
__THROW
;

865 *
	`g‘logš
 ();

866 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


873 
	$g‘logš_r
 (*
__Çme
, 
size_t
 
__Çme_Ën
è
	`__nÚnuÎ
 ((1));

876 #ifdef 
__USE_BSD


878 
	$£ogš
 (
__cÚ¡
 *
__Çme
è
__THROW
 
	`__nÚnuÎ
 ((1));

882 #ifdef 
__USE_POSIX2


886 
	#__Ãed_g‘İt


	)

887 
	~<g‘İt.h
>

891 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


895 
	$g‘ho¡Çme
 (*
__Çme
, 
size_t
 
__Ën
è
__THROW
 
	`__nÚnuÎ
 ((1));

899 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

902 
	$£tho¡Çme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

903 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

907 
	$£tho¡id
 (
__id
è
__THROW
 
__wur
;

913 
	$g‘domašÇme
 (*
__Çme
, 
size_t
 
__Ën
)

914 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

915 
	$£tdomašÇme
 (
__cÚ¡
 *
__Çme
, 
size_t
 
__Ën
)

916 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

922 
	$vhªgup
 (è
__THROW
;

925 
	$»voke
 (
__cÚ¡
 *
__fe
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

933 
	$´of
 (*
__§m¶e_bufãr
, 
size_t
 
__size
,

934 
size_t
 
__off£t
, 
__sÿË
)

935 
__THROW
 
	`__nÚnuÎ
 ((1));

941 
	$acù
 (
__cÚ¡
 *
__Çme
è
__THROW
;

945 *
	$g‘u£rsh–l
 (è
__THROW
;

946 
	$’du£rsh–l
 (è
__THROW
;

947 
	$£tu£rsh–l
 (è
__THROW
;

953 
	$d«mÚ
 (
__nochdœ
, 
__noşo£
è
__THROW
 
__wur
;

957 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_XOPEN2K
)

960 
	$chroÙ
 (
__cÚ¡
 *
__·th
è
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

964 *
	$g‘·ss
 (
__cÚ¡
 *
__´om±
è
	`__nÚnuÎ
 ((1));

968 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


973 
	`fsync
 (
__fd
);

977 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


980 
	`g‘ho¡id
 ();

983 
	$sync
 (è
__THROW
;

988 
	$g‘·gesize
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

993 
	$g‘dbËsize
 (è
__THROW
;

997 #iâdeà
__USE_FILE_OFFSET64


998 
	$Œunÿ‹
 (
__cÚ¡
 *
__fe
, 
__off_t
 
__Ëngth
)

999 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1001 #ifdeà
__REDIRECT_NTH


1002 
	`__REDIRECT_NTH
 (
Œunÿ‹
,

1003 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
),

1004 
Œunÿ‹64
è
	`__nÚnuÎ
 ((1)è
__wur
;

1006 
	#Œunÿ‹
 
Œunÿ‹64


	)

1009 #ifdeà
__USE_LARGEFILE64


1010 
	$Œunÿ‹64
 (
__cÚ¡
 *
__fe
, 
__off64_t
 
__Ëngth
)

1011 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

1016 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


1019 #iâdeà
__USE_FILE_OFFSET64


1020 
	$árunÿ‹
 (
__fd
, 
__off_t
 
__Ëngth
è
__THROW
 
__wur
;

1022 #ifdeà
__REDIRECT_NTH


1023 
	`__REDIRECT_NTH
 (
árunÿ‹
, (
__fd
, 
__off64_t
 
__Ëngth
),

1024 
árunÿ‹64
è
__wur
;

1026 
	#árunÿ‹
 
árunÿ‹64


	)

1029 #ifdeà
__USE_LARGEFILE64


1030 
	$árunÿ‹64
 (
__fd
, 
__off64_t
 
__Ëngth
è
__THROW
 
__wur
;

1036 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


1040 
	$brk
 (*
__addr
è
__THROW
 
__wur
;

1046 *
	$sbrk
 (
šŒ_t
 
__d–
è
__THROW
;

1050 #ifdeà
__USE_MISC


1061 
	$sysÿÎ
 (
__sy¢o
, ...è
__THROW
;

1066 #ià(
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
è&& !defšed 
F_LOCK


1078 
	#F_ULOCK
 0

	)

1079 
	#F_LOCK
 1

	)

1080 
	#F_TLOCK
 2

	)

1081 
	#F_TEST
 3

	)

1083 #iâdeà
__USE_FILE_OFFSET64


1084 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Ën
è
__wur
;

1086 #ifdeà
__REDIRECT


1087 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
),

1088 
lockf64
è
__wur
;

1090 
	#lockf
 
lockf64


	)

1093 #ifdeà
__USE_LARGEFILE64


1094 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Ën
è
__wur
;

1099 #ifdeà
__USE_GNU


1104 
	#TEMP_FAILURE_RETRY
(
ex´essiÚ
) \

1105 (
__ex‹nsiÚ__
 \

1106 ({ 
__»suÉ
; \

1107 dØ
__»suÉ
 = (è(
ex´essiÚ
); \

1108 
__»suÉ
 =ğ-1L && 
”ºo
 =ğ
EINTR
); \

1109 
__»suÉ
; 
	}
}))

	)

1112 #ià
defšed
 
__USE_POSIX199309
 || defšed 
__USE_UNIX98


1115 
fd©async
 (
__fdes
);

1121 #ifdef 
__USE_XOPEN


1123 *
	$üy±
 (
__cÚ¡
 *
__key
, __cÚ¡ *
__§É
)

1124 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1128 
	$’üy±
 (*
__libc_block
, 
__edæag
è
__THROW
 
	`__nÚnuÎ
 ((1));

1135 
	$swab
 (
__cÚ¡
 *
__»¡riù
 
__äom
, *__»¡riù 
__to
,

1136 
ssize_t
 
__n
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1142 #ifdeà
__USE_XOPEN


1144 *
	$ù”mid
 (*
__s
è
__THROW
;

1149 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


1150 
	~<b™s/uni¡d.h
>

1153 
__END_DECLS


	@/usr/include/alloca.h

19 #iâdef 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<ã©u»s.h
>

24 
	#__Ãed_size_t


	)

25 
	~<¡ddef.h
>

27 
	g__BEGIN_DECLS


30 #undeà
®loÿ


33 *
	$®loÿ
 (
size_t
 
__size
è
__THROW
;

35 #ifdef 
__GNUC__


36 
	#®loÿ
(
size
è
	`__butš_®loÿ
 (size)

	)

39 
__END_DECLS


	@/usr/include/bits/confname.h

21 #iâdeà
_UNISTD_H


28 
	m_PC_LINK_MAX
,

29 
	#_PC_LINK_MAX
 
_PC_LINK_MAX


	)

30 
	m_PC_MAX_CANON
,

31 
	#_PC_MAX_CANON
 
_PC_MAX_CANON


	)

32 
	m_PC_MAX_INPUT
,

33 
	#_PC_MAX_INPUT
 
_PC_MAX_INPUT


	)

34 
	m_PC_NAME_MAX
,

35 
	#_PC_NAME_MAX
 
_PC_NAME_MAX


	)

36 
	m_PC_PATH_MAX
,

37 
	#_PC_PATH_MAX
 
_PC_PATH_MAX


	)

38 
	m_PC_PIPE_BUF
,

39 
	#_PC_PIPE_BUF
 
_PC_PIPE_BUF


	)

40 
	m_PC_CHOWN_RESTRICTED
,

41 
	#_PC_CHOWN_RESTRICTED
 
_PC_CHOWN_RESTRICTED


	)

42 
	m_PC_NO_TRUNC
,

43 
	#_PC_NO_TRUNC
 
_PC_NO_TRUNC


	)

44 
	m_PC_VDISABLE
,

45 
	#_PC_VDISABLE
 
_PC_VDISABLE


	)

46 
	m_PC_SYNC_IO
,

47 
	#_PC_SYNC_IO
 
_PC_SYNC_IO


	)

48 
	m_PC_ASYNC_IO
,

49 
	#_PC_ASYNC_IO
 
_PC_ASYNC_IO


	)

50 
	m_PC_PRIO_IO
,

51 
	#_PC_PRIO_IO
 
_PC_PRIO_IO


	)

52 
	m_PC_SOCK_MAXBUF
,

53 
	#_PC_SOCK_MAXBUF
 
_PC_SOCK_MAXBUF


	)

54 
	m_PC_FILESIZEBITS
,

55 
	#_PC_FILESIZEBITS
 
_PC_FILESIZEBITS


	)

56 
	m_PC_REC_INCR_XFER_SIZE
,

57 
	#_PC_REC_INCR_XFER_SIZE
 
_PC_REC_INCR_XFER_SIZE


	)

58 
	m_PC_REC_MAX_XFER_SIZE
,

59 
	#_PC_REC_MAX_XFER_SIZE
 
_PC_REC_MAX_XFER_SIZE


	)

60 
	m_PC_REC_MIN_XFER_SIZE
,

61 
	#_PC_REC_MIN_XFER_SIZE
 
_PC_REC_MIN_XFER_SIZE


	)

62 
	m_PC_REC_XFER_ALIGN
,

63 
	#_PC_REC_XFER_ALIGN
 
_PC_REC_XFER_ALIGN


	)

64 
	m_PC_ALLOC_SIZE_MIN
,

65 
	#_PC_ALLOC_SIZE_MIN
 
_PC_ALLOC_SIZE_MIN


	)

66 
	m_PC_SYMLINK_MAX
,

67 
	#_PC_SYMLINK_MAX
 
_PC_SYMLINK_MAX


	)

68 
	m_PC_2_SYMLINKS


69 
	#_PC_2_SYMLINKS
 
_PC_2_SYMLINKS


	)

75 
	m_SC_ARG_MAX
,

76 
	#_SC_ARG_MAX
 
_SC_ARG_MAX


	)

77 
	m_SC_CHILD_MAX
,

78 
	#_SC_CHILD_MAX
 
_SC_CHILD_MAX


	)

79 
	m_SC_CLK_TCK
,

80 
	#_SC_CLK_TCK
 
_SC_CLK_TCK


	)

81 
	m_SC_NGROUPS_MAX
,

82 
	#_SC_NGROUPS_MAX
 
_SC_NGROUPS_MAX


	)

83 
	m_SC_OPEN_MAX
,

84 
	#_SC_OPEN_MAX
 
_SC_OPEN_MAX


	)

85 
	m_SC_STREAM_MAX
,

86 
	#_SC_STREAM_MAX
 
_SC_STREAM_MAX


	)

87 
	m_SC_TZNAME_MAX
,

88 
	#_SC_TZNAME_MAX
 
_SC_TZNAME_MAX


	)

89 
	m_SC_JOB_CONTROL
,

90 
	#_SC_JOB_CONTROL
 
_SC_JOB_CONTROL


	)

91 
	m_SC_SAVED_IDS
,

92 
	#_SC_SAVED_IDS
 
_SC_SAVED_IDS


	)

93 
	m_SC_REALTIME_SIGNALS
,

94 
	#_SC_REALTIME_SIGNALS
 
_SC_REALTIME_SIGNALS


	)

95 
	m_SC_PRIORITY_SCHEDULING
,

96 
	#_SC_PRIORITY_SCHEDULING
 
_SC_PRIORITY_SCHEDULING


	)

97 
	m_SC_TIMERS
,

98 
	#_SC_TIMERS
 
_SC_TIMERS


	)

99 
	m_SC_ASYNCHRONOUS_IO
,

100 
	#_SC_ASYNCHRONOUS_IO
 
_SC_ASYNCHRONOUS_IO


	)

101 
	m_SC_PRIORITIZED_IO
,

102 
	#_SC_PRIORITIZED_IO
 
_SC_PRIORITIZED_IO


	)

103 
	m_SC_SYNCHRONIZED_IO
,

104 
	#_SC_SYNCHRONIZED_IO
 
_SC_SYNCHRONIZED_IO


	)

105 
	m_SC_FSYNC
,

106 
	#_SC_FSYNC
 
_SC_FSYNC


	)

107 
	m_SC_MAPPED_FILES
,

108 
	#_SC_MAPPED_FILES
 
_SC_MAPPED_FILES


	)

109 
	m_SC_MEMLOCK
,

110 
	#_SC_MEMLOCK
 
_SC_MEMLOCK


	)

111 
	m_SC_MEMLOCK_RANGE
,

112 
	#_SC_MEMLOCK_RANGE
 
_SC_MEMLOCK_RANGE


	)

113 
	m_SC_MEMORY_PROTECTION
,

114 
	#_SC_MEMORY_PROTECTION
 
_SC_MEMORY_PROTECTION


	)

115 
	m_SC_MESSAGE_PASSING
,

116 
	#_SC_MESSAGE_PASSING
 
_SC_MESSAGE_PASSING


	)

117 
	m_SC_SEMAPHORES
,

118 
	#_SC_SEMAPHORES
 
_SC_SEMAPHORES


	)

119 
	m_SC_SHARED_MEMORY_OBJECTS
,

120 
	#_SC_SHARED_MEMORY_OBJECTS
 
_SC_SHARED_MEMORY_OBJECTS


	)

121 
	m_SC_AIO_LISTIO_MAX
,

122 
	#_SC_AIO_LISTIO_MAX
 
_SC_AIO_LISTIO_MAX


	)

123 
	m_SC_AIO_MAX
,

124 
	#_SC_AIO_MAX
 
_SC_AIO_MAX


	)

125 
	m_SC_AIO_PRIO_DELTA_MAX
,

126 
	#_SC_AIO_PRIO_DELTA_MAX
 
_SC_AIO_PRIO_DELTA_MAX


	)

127 
	m_SC_DELAYTIMER_MAX
,

128 
	#_SC_DELAYTIMER_MAX
 
_SC_DELAYTIMER_MAX


	)

129 
	m_SC_MQ_OPEN_MAX
,

130 
	#_SC_MQ_OPEN_MAX
 
_SC_MQ_OPEN_MAX


	)

131 
	m_SC_MQ_PRIO_MAX
,

132 
	#_SC_MQ_PRIO_MAX
 
_SC_MQ_PRIO_MAX


	)

133 
	m_SC_VERSION
,

134 
	#_SC_VERSION
 
_SC_VERSION


	)

135 
	m_SC_PAGESIZE
,

136 
	#_SC_PAGESIZE
 
_SC_PAGESIZE


	)

137 
	#_SC_PAGE_SIZE
 
_SC_PAGESIZE


	)

138 
	m_SC_RTSIG_MAX
,

139 
	#_SC_RTSIG_MAX
 
_SC_RTSIG_MAX


	)

140 
	m_SC_SEM_NSEMS_MAX
,

141 
	#_SC_SEM_NSEMS_MAX
 
_SC_SEM_NSEMS_MAX


	)

142 
	m_SC_SEM_VALUE_MAX
,

143 
	#_SC_SEM_VALUE_MAX
 
_SC_SEM_VALUE_MAX


	)

144 
	m_SC_SIGQUEUE_MAX
,

145 
	#_SC_SIGQUEUE_MAX
 
_SC_SIGQUEUE_MAX


	)

146 
	m_SC_TIMER_MAX
,

147 
	#_SC_TIMER_MAX
 
_SC_TIMER_MAX


	)

151 
	m_SC_BC_BASE_MAX
,

152 
	#_SC_BC_BASE_MAX
 
_SC_BC_BASE_MAX


	)

153 
	m_SC_BC_DIM_MAX
,

154 
	#_SC_BC_DIM_MAX
 
_SC_BC_DIM_MAX


	)

155 
	m_SC_BC_SCALE_MAX
,

156 
	#_SC_BC_SCALE_MAX
 
_SC_BC_SCALE_MAX


	)

157 
	m_SC_BC_STRING_MAX
,

158 
	#_SC_BC_STRING_MAX
 
_SC_BC_STRING_MAX


	)

159 
	m_SC_COLL_WEIGHTS_MAX
,

160 
	#_SC_COLL_WEIGHTS_MAX
 
_SC_COLL_WEIGHTS_MAX


	)

161 
	m_SC_EQUIV_CLASS_MAX
,

162 
	#_SC_EQUIV_CLASS_MAX
 
_SC_EQUIV_CLASS_MAX


	)

163 
	m_SC_EXPR_NEST_MAX
,

164 
	#_SC_EXPR_NEST_MAX
 
_SC_EXPR_NEST_MAX


	)

165 
	m_SC_LINE_MAX
,

166 
	#_SC_LINE_MAX
 
_SC_LINE_MAX


	)

167 
	m_SC_RE_DUP_MAX
,

168 
	#_SC_RE_DUP_MAX
 
_SC_RE_DUP_MAX


	)

169 
	m_SC_CHARCLASS_NAME_MAX
,

170 
	#_SC_CHARCLASS_NAME_MAX
 
_SC_CHARCLASS_NAME_MAX


	)

172 
	m_SC_2_VERSION
,

173 
	#_SC_2_VERSION
 
_SC_2_VERSION


	)

174 
	m_SC_2_C_BIND
,

175 
	#_SC_2_C_BIND
 
_SC_2_C_BIND


	)

176 
	m_SC_2_C_DEV
,

177 
	#_SC_2_C_DEV
 
_SC_2_C_DEV


	)

178 
	m_SC_2_FORT_DEV
,

179 
	#_SC_2_FORT_DEV
 
_SC_2_FORT_DEV


	)

180 
	m_SC_2_FORT_RUN
,

181 
	#_SC_2_FORT_RUN
 
_SC_2_FORT_RUN


	)

182 
	m_SC_2_SW_DEV
,

183 
	#_SC_2_SW_DEV
 
_SC_2_SW_DEV


	)

184 
	m_SC_2_LOCALEDEF
,

185 
	#_SC_2_LOCALEDEF
 
_SC_2_LOCALEDEF


	)

187 
	m_SC_PII
,

188 
	#_SC_PII
 
_SC_PII


	)

189 
	m_SC_PII_XTI
,

190 
	#_SC_PII_XTI
 
_SC_PII_XTI


	)

191 
	m_SC_PII_SOCKET
,

192 
	#_SC_PII_SOCKET
 
_SC_PII_SOCKET


	)

193 
	m_SC_PII_INTERNET
,

194 
	#_SC_PII_INTERNET
 
_SC_PII_INTERNET


	)

195 
	m_SC_PII_OSI
,

196 
	#_SC_PII_OSI
 
_SC_PII_OSI


	)

197 
	m_SC_POLL
,

198 
	#_SC_POLL
 
_SC_POLL


	)

199 
	m_SC_SELECT
,

200 
	#_SC_SELECT
 
_SC_SELECT


	)

201 
	m_SC_UIO_MAXIOV
,

202 
	#_SC_UIO_MAXIOV
 
_SC_UIO_MAXIOV


	)

203 
	m_SC_IOV_MAX
 = 
_SC_UIO_MAXIOV
,

204 
	#_SC_IOV_MAX
 
_SC_IOV_MAX


	)

205 
	m_SC_PII_INTERNET_STREAM
,

206 
	#_SC_PII_INTERNET_STREAM
 
_SC_PII_INTERNET_STREAM


	)

207 
	m_SC_PII_INTERNET_DGRAM
,

208 
	#_SC_PII_INTERNET_DGRAM
 
_SC_PII_INTERNET_DGRAM


	)

209 
	m_SC_PII_OSI_COTS
,

210 
	#_SC_PII_OSI_COTS
 
_SC_PII_OSI_COTS


	)

211 
	m_SC_PII_OSI_CLTS
,

212 
	#_SC_PII_OSI_CLTS
 
_SC_PII_OSI_CLTS


	)

213 
	m_SC_PII_OSI_M
,

214 
	#_SC_PII_OSI_M
 
_SC_PII_OSI_M


	)

215 
	m_SC_T_IOV_MAX
,

216 
	#_SC_T_IOV_MAX
 
_SC_T_IOV_MAX


	)

219 
	m_SC_THREADS
,

220 
	#_SC_THREADS
 
_SC_THREADS


	)

221 
	m_SC_THREAD_SAFE_FUNCTIONS
,

222 
	#_SC_THREAD_SAFE_FUNCTIONS
 
_SC_THREAD_SAFE_FUNCTIONS


	)

223 
	m_SC_GETGR_R_SIZE_MAX
,

224 
	#_SC_GETGR_R_SIZE_MAX
 
_SC_GETGR_R_SIZE_MAX


	)

225 
	m_SC_GETPW_R_SIZE_MAX
,

226 
	#_SC_GETPW_R_SIZE_MAX
 
_SC_GETPW_R_SIZE_MAX


	)

227 
	m_SC_LOGIN_NAME_MAX
,

228 
	#_SC_LOGIN_NAME_MAX
 
_SC_LOGIN_NAME_MAX


	)

229 
	m_SC_TTY_NAME_MAX
,

230 
	#_SC_TTY_NAME_MAX
 
_SC_TTY_NAME_MAX


	)

231 
	m_SC_THREAD_DESTRUCTOR_ITERATIONS
,

232 
	#_SC_THREAD_DESTRUCTOR_ITERATIONS
 
_SC_THREAD_DESTRUCTOR_ITERATIONS


	)

233 
	m_SC_THREAD_KEYS_MAX
,

234 
	#_SC_THREAD_KEYS_MAX
 
_SC_THREAD_KEYS_MAX


	)

235 
	m_SC_THREAD_STACK_MIN
,

236 
	#_SC_THREAD_STACK_MIN
 
_SC_THREAD_STACK_MIN


	)

237 
	m_SC_THREAD_THREADS_MAX
,

238 
	#_SC_THREAD_THREADS_MAX
 
_SC_THREAD_THREADS_MAX


	)

239 
	m_SC_THREAD_ATTR_STACKADDR
,

240 
	#_SC_THREAD_ATTR_STACKADDR
 
_SC_THREAD_ATTR_STACKADDR


	)

241 
	m_SC_THREAD_ATTR_STACKSIZE
,

242 
	#_SC_THREAD_ATTR_STACKSIZE
 
_SC_THREAD_ATTR_STACKSIZE


	)

243 
	m_SC_THREAD_PRIORITY_SCHEDULING
,

244 
	#_SC_THREAD_PRIORITY_SCHEDULING
 
_SC_THREAD_PRIORITY_SCHEDULING


	)

245 
	m_SC_THREAD_PRIO_INHERIT
,

246 
	#_SC_THREAD_PRIO_INHERIT
 
_SC_THREAD_PRIO_INHERIT


	)

247 
	m_SC_THREAD_PRIO_PROTECT
,

248 
	#_SC_THREAD_PRIO_PROTECT
 
_SC_THREAD_PRIO_PROTECT


	)

249 
	m_SC_THREAD_PROCESS_SHARED
,

250 
	#_SC_THREAD_PROCESS_SHARED
 
_SC_THREAD_PROCESS_SHARED


	)

252 
	m_SC_NPROCESSORS_CONF
,

253 
	#_SC_NPROCESSORS_CONF
 
_SC_NPROCESSORS_CONF


	)

254 
	m_SC_NPROCESSORS_ONLN
,

255 
	#_SC_NPROCESSORS_ONLN
 
_SC_NPROCESSORS_ONLN


	)

256 
	m_SC_PHYS_PAGES
,

257 
	#_SC_PHYS_PAGES
 
_SC_PHYS_PAGES


	)

258 
	m_SC_AVPHYS_PAGES
,

259 
	#_SC_AVPHYS_PAGES
 
_SC_AVPHYS_PAGES


	)

260 
	m_SC_ATEXIT_MAX
,

261 
	#_SC_ATEXIT_MAX
 
_SC_ATEXIT_MAX


	)

262 
	m_SC_PASS_MAX
,

263 
	#_SC_PASS_MAX
 
_SC_PASS_MAX


	)

265 
	m_SC_XOPEN_VERSION
,

266 
	#_SC_XOPEN_VERSION
 
_SC_XOPEN_VERSION


	)

267 
	m_SC_XOPEN_XCU_VERSION
,

268 
	#_SC_XOPEN_XCU_VERSION
 
_SC_XOPEN_XCU_VERSION


	)

269 
	m_SC_XOPEN_UNIX
,

270 
	#_SC_XOPEN_UNIX
 
_SC_XOPEN_UNIX


	)

271 
	m_SC_XOPEN_CRYPT
,

272 
	#_SC_XOPEN_CRYPT
 
_SC_XOPEN_CRYPT


	)

273 
	m_SC_XOPEN_ENH_I18N
,

274 
	#_SC_XOPEN_ENH_I18N
 
_SC_XOPEN_ENH_I18N


	)

275 
	m_SC_XOPEN_SHM
,

276 
	#_SC_XOPEN_SHM
 
_SC_XOPEN_SHM


	)

278 
	m_SC_2_CHAR_TERM
,

279 
	#_SC_2_CHAR_TERM
 
_SC_2_CHAR_TERM


	)

280 
	m_SC_2_C_VERSION
,

281 
	#_SC_2_C_VERSION
 
_SC_2_C_VERSION


	)

282 
	m_SC_2_UPE
,

283 
	#_SC_2_UPE
 
_SC_2_UPE


	)

285 
	m_SC_XOPEN_XPG2
,

286 
	#_SC_XOPEN_XPG2
 
_SC_XOPEN_XPG2


	)

287 
	m_SC_XOPEN_XPG3
,

288 
	#_SC_XOPEN_XPG3
 
_SC_XOPEN_XPG3


	)

289 
	m_SC_XOPEN_XPG4
,

290 
	#_SC_XOPEN_XPG4
 
_SC_XOPEN_XPG4


	)

292 
	m_SC_CHAR_BIT
,

293 
	#_SC_CHAR_BIT
 
_SC_CHAR_BIT


	)

294 
	m_SC_CHAR_MAX
,

295 
	#_SC_CHAR_MAX
 
_SC_CHAR_MAX


	)

296 
	m_SC_CHAR_MIN
,

297 
	#_SC_CHAR_MIN
 
_SC_CHAR_MIN


	)

298 
	m_SC_INT_MAX
,

299 
	#_SC_INT_MAX
 
_SC_INT_MAX


	)

300 
	m_SC_INT_MIN
,

301 
	#_SC_INT_MIN
 
_SC_INT_MIN


	)

302 
	m_SC_LONG_BIT
,

303 
	#_SC_LONG_BIT
 
_SC_LONG_BIT


	)

304 
	m_SC_WORD_BIT
,

305 
	#_SC_WORD_BIT
 
_SC_WORD_BIT


	)

306 
	m_SC_MB_LEN_MAX
,

307 
	#_SC_MB_LEN_MAX
 
_SC_MB_LEN_MAX


	)

308 
	m_SC_NZERO
,

309 
	#_SC_NZERO
 
_SC_NZERO


	)

310 
	m_SC_SSIZE_MAX
,

311 
	#_SC_SSIZE_MAX
 
_SC_SSIZE_MAX


	)

312 
	m_SC_SCHAR_MAX
,

313 
	#_SC_SCHAR_MAX
 
_SC_SCHAR_MAX


	)

314 
	m_SC_SCHAR_MIN
,

315 
	#_SC_SCHAR_MIN
 
_SC_SCHAR_MIN


	)

316 
	m_SC_SHRT_MAX
,

317 
	#_SC_SHRT_MAX
 
_SC_SHRT_MAX


	)

318 
	m_SC_SHRT_MIN
,

319 
	#_SC_SHRT_MIN
 
_SC_SHRT_MIN


	)

320 
	m_SC_UCHAR_MAX
,

321 
	#_SC_UCHAR_MAX
 
_SC_UCHAR_MAX


	)

322 
	m_SC_UINT_MAX
,

323 
	#_SC_UINT_MAX
 
_SC_UINT_MAX


	)

324 
	m_SC_ULONG_MAX
,

325 
	#_SC_ULONG_MAX
 
_SC_ULONG_MAX


	)

326 
	m_SC_USHRT_MAX
,

327 
	#_SC_USHRT_MAX
 
_SC_USHRT_MAX


	)

329 
	m_SC_NL_ARGMAX
,

330 
	#_SC_NL_ARGMAX
 
_SC_NL_ARGMAX


	)

331 
	m_SC_NL_LANGMAX
,

332 
	#_SC_NL_LANGMAX
 
_SC_NL_LANGMAX


	)

333 
	m_SC_NL_MSGMAX
,

334 
	#_SC_NL_MSGMAX
 
_SC_NL_MSGMAX


	)

335 
	m_SC_NL_NMAX
,

336 
	#_SC_NL_NMAX
 
_SC_NL_NMAX


	)

337 
	m_SC_NL_SETMAX
,

338 
	#_SC_NL_SETMAX
 
_SC_NL_SETMAX


	)

339 
	m_SC_NL_TEXTMAX
,

340 
	#_SC_NL_TEXTMAX
 
_SC_NL_TEXTMAX


	)

342 
	m_SC_XBS5_ILP32_OFF32
,

343 
	#_SC_XBS5_ILP32_OFF32
 
_SC_XBS5_ILP32_OFF32


	)

344 
	m_SC_XBS5_ILP32_OFFBIG
,

345 
	#_SC_XBS5_ILP32_OFFBIG
 
_SC_XBS5_ILP32_OFFBIG


	)

346 
	m_SC_XBS5_LP64_OFF64
,

347 
	#_SC_XBS5_LP64_OFF64
 
_SC_XBS5_LP64_OFF64


	)

348 
	m_SC_XBS5_LPBIG_OFFBIG
,

349 
	#_SC_XBS5_LPBIG_OFFBIG
 
_SC_XBS5_LPBIG_OFFBIG


	)

351 
	m_SC_XOPEN_LEGACY
,

352 
	#_SC_XOPEN_LEGACY
 
_SC_XOPEN_LEGACY


	)

353 
	m_SC_XOPEN_REALTIME
,

354 
	#_SC_XOPEN_REALTIME
 
_SC_XOPEN_REALTIME


	)

355 
	m_SC_XOPEN_REALTIME_THREADS
,

356 
	#_SC_XOPEN_REALTIME_THREADS
 
_SC_XOPEN_REALTIME_THREADS


	)

358 
	m_SC_ADVISORY_INFO
,

359 
	#_SC_ADVISORY_INFO
 
_SC_ADVISORY_INFO


	)

360 
	m_SC_BARRIERS
,

361 
	#_SC_BARRIERS
 
_SC_BARRIERS


	)

362 
	m_SC_BASE
,

363 
	#_SC_BASE
 
_SC_BASE


	)

364 
	m_SC_C_LANG_SUPPORT
,

365 
	#_SC_C_LANG_SUPPORT
 
_SC_C_LANG_SUPPORT


	)

366 
	m_SC_C_LANG_SUPPORT_R
,

367 
	#_SC_C_LANG_SUPPORT_R
 
_SC_C_LANG_SUPPORT_R


	)

368 
	m_SC_CLOCK_SELECTION
,

369 
	#_SC_CLOCK_SELECTION
 
_SC_CLOCK_SELECTION


	)

370 
	m_SC_CPUTIME
,

371 
	#_SC_CPUTIME
 
_SC_CPUTIME


	)

372 
	m_SC_THREAD_CPUTIME
,

373 
	#_SC_THREAD_CPUTIME
 
_SC_THREAD_CPUTIME


	)

374 
	m_SC_DEVICE_IO
,

375 
	#_SC_DEVICE_IO
 
_SC_DEVICE_IO


	)

376 
	m_SC_DEVICE_SPECIFIC
,

377 
	#_SC_DEVICE_SPECIFIC
 
_SC_DEVICE_SPECIFIC


	)

378 
	m_SC_DEVICE_SPECIFIC_R
,

379 
	#_SC_DEVICE_SPECIFIC_R
 
_SC_DEVICE_SPECIFIC_R


	)

380 
	m_SC_FD_MGMT
,

381 
	#_SC_FD_MGMT
 
_SC_FD_MGMT


	)

382 
	m_SC_FIFO
,

383 
	#_SC_FIFO
 
_SC_FIFO


	)

384 
	m_SC_PIPE
,

385 
	#_SC_PIPE
 
_SC_PIPE


	)

386 
	m_SC_FILE_ATTRIBUTES
,

387 
	#_SC_FILE_ATTRIBUTES
 
_SC_FILE_ATTRIBUTES


	)

388 
	m_SC_FILE_LOCKING
,

389 
	#_SC_FILE_LOCKING
 
_SC_FILE_LOCKING


	)

390 
	m_SC_FILE_SYSTEM
,

391 
	#_SC_FILE_SYSTEM
 
_SC_FILE_SYSTEM


	)

392 
	m_SC_MONOTONIC_CLOCK
,

393 
	#_SC_MONOTONIC_CLOCK
 
_SC_MONOTONIC_CLOCK


	)

394 
	m_SC_MULTI_PROCESS
,

395 
	#_SC_MULTI_PROCESS
 
_SC_MULTI_PROCESS


	)

396 
	m_SC_SINGLE_PROCESS
,

397 
	#_SC_SINGLE_PROCESS
 
_SC_SINGLE_PROCESS


	)

398 
	m_SC_NETWORKING
,

399 
	#_SC_NETWORKING
 
_SC_NETWORKING


	)

400 
	m_SC_READER_WRITER_LOCKS
,

401 
	#_SC_READER_WRITER_LOCKS
 
_SC_READER_WRITER_LOCKS


	)

402 
	m_SC_SPIN_LOCKS
,

403 
	#_SC_SPIN_LOCKS
 
_SC_SPIN_LOCKS


	)

404 
	m_SC_REGEXP
,

405 
	#_SC_REGEXP
 
_SC_REGEXP


	)

406 
	m_SC_REGEX_VERSION
,

407 
	#_SC_REGEX_VERSION
 
_SC_REGEX_VERSION


	)

408 
	m_SC_SHELL
,

409 
	#_SC_SHELL
 
_SC_SHELL


	)

410 
	m_SC_SIGNALS
,

411 
	#_SC_SIGNALS
 
_SC_SIGNALS


	)

412 
	m_SC_SPAWN
,

413 
	#_SC_SPAWN
 
_SC_SPAWN


	)

414 
	m_SC_SPORADIC_SERVER
,

415 
	#_SC_SPORADIC_SERVER
 
_SC_SPORADIC_SERVER


	)

416 
	m_SC_THREAD_SPORADIC_SERVER
,

417 
	#_SC_THREAD_SPORADIC_SERVER
 
_SC_THREAD_SPORADIC_SERVER


	)

418 
	m_SC_SYSTEM_DATABASE
,

419 
	#_SC_SYSTEM_DATABASE
 
_SC_SYSTEM_DATABASE


	)

420 
	m_SC_SYSTEM_DATABASE_R
,

421 
	#_SC_SYSTEM_DATABASE_R
 
_SC_SYSTEM_DATABASE_R


	)

422 
	m_SC_TIMEOUTS
,

423 
	#_SC_TIMEOUTS
 
_SC_TIMEOUTS


	)

424 
	m_SC_TYPED_MEMORY_OBJECTS
,

425 
	#_SC_TYPED_MEMORY_OBJECTS
 
_SC_TYPED_MEMORY_OBJECTS


	)

426 
	m_SC_USER_GROUPS
,

427 
	#_SC_USER_GROUPS
 
_SC_USER_GROUPS


	)

428 
	m_SC_USER_GROUPS_R
,

429 
	#_SC_USER_GROUPS_R
 
_SC_USER_GROUPS_R


	)

430 
	m_SC_2_PBS
,

431 
	#_SC_2_PBS
 
_SC_2_PBS


	)

432 
	m_SC_2_PBS_ACCOUNTING
,

433 
	#_SC_2_PBS_ACCOUNTING
 
_SC_2_PBS_ACCOUNTING


	)

434 
	m_SC_2_PBS_LOCATE
,

435 
	#_SC_2_PBS_LOCATE
 
_SC_2_PBS_LOCATE


	)

436 
	m_SC_2_PBS_MESSAGE
,

437 
	#_SC_2_PBS_MESSAGE
 
_SC_2_PBS_MESSAGE


	)

438 
	m_SC_2_PBS_TRACK
,

439 
	#_SC_2_PBS_TRACK
 
_SC_2_PBS_TRACK


	)

440 
	m_SC_SYMLOOP_MAX
,

441 
	#_SC_SYMLOOP_MAX
 
_SC_SYMLOOP_MAX


	)

442 
	m_SC_STREAMS
,

443 
	#_SC_STREAMS
 
_SC_STREAMS


	)

444 
	m_SC_2_PBS_CHECKPOINT
,

445 
	#_SC_2_PBS_CHECKPOINT
 
_SC_2_PBS_CHECKPOINT


	)

447 
	m_SC_V6_ILP32_OFF32
,

448 
	#_SC_V6_ILP32_OFF32
 
_SC_V6_ILP32_OFF32


	)

449 
	m_SC_V6_ILP32_OFFBIG
,

450 
	#_SC_V6_ILP32_OFFBIG
 
_SC_V6_ILP32_OFFBIG


	)

451 
	m_SC_V6_LP64_OFF64
,

452 
	#_SC_V6_LP64_OFF64
 
_SC_V6_LP64_OFF64


	)

453 
	m_SC_V6_LPBIG_OFFBIG
,

454 
	#_SC_V6_LPBIG_OFFBIG
 
_SC_V6_LPBIG_OFFBIG


	)

456 
	m_SC_HOST_NAME_MAX
,

457 
	#_SC_HOST_NAME_MAX
 
_SC_HOST_NAME_MAX


	)

458 
	m_SC_TRACE
,

459 
	#_SC_TRACE
 
_SC_TRACE


	)

460 
	m_SC_TRACE_EVENT_FILTER
,

461 
	#_SC_TRACE_EVENT_FILTER
 
_SC_TRACE_EVENT_FILTER


	)

462 
	m_SC_TRACE_INHERIT
,

463 
	#_SC_TRACE_INHERIT
 
_SC_TRACE_INHERIT


	)

464 
	m_SC_TRACE_LOG
,

465 
	#_SC_TRACE_LOG
 
_SC_TRACE_LOG


	)

467 
	m_SC_LEVEL1_ICACHE_SIZE
,

468 
	#_SC_LEVEL1_ICACHE_SIZE
 
_SC_LEVEL1_ICACHE_SIZE


	)

469 
	m_SC_LEVEL1_ICACHE_ASSOC
,

470 
	#_SC_LEVEL1_ICACHE_ASSOC
 
_SC_LEVEL1_ICACHE_ASSOC


	)

471 
	m_SC_LEVEL1_ICACHE_LINESIZE
,

472 
	#_SC_LEVEL1_ICACHE_LINESIZE
 
_SC_LEVEL1_ICACHE_LINESIZE


	)

473 
	m_SC_LEVEL1_DCACHE_SIZE
,

474 
	#_SC_LEVEL1_DCACHE_SIZE
 
_SC_LEVEL1_DCACHE_SIZE


	)

475 
	m_SC_LEVEL1_DCACHE_ASSOC
,

476 
	#_SC_LEVEL1_DCACHE_ASSOC
 
_SC_LEVEL1_DCACHE_ASSOC


	)

477 
	m_SC_LEVEL1_DCACHE_LINESIZE
,

478 
	#_SC_LEVEL1_DCACHE_LINESIZE
 
_SC_LEVEL1_DCACHE_LINESIZE


	)

479 
	m_SC_LEVEL2_CACHE_SIZE
,

480 
	#_SC_LEVEL2_CACHE_SIZE
 
_SC_LEVEL2_CACHE_SIZE


	)

481 
	m_SC_LEVEL2_CACHE_ASSOC
,

482 
	#_SC_LEVEL2_CACHE_ASSOC
 
_SC_LEVEL2_CACHE_ASSOC


	)

483 
	m_SC_LEVEL2_CACHE_LINESIZE
,

484 
	#_SC_LEVEL2_CACHE_LINESIZE
 
_SC_LEVEL2_CACHE_LINESIZE


	)

485 
	m_SC_LEVEL3_CACHE_SIZE
,

486 
	#_SC_LEVEL3_CACHE_SIZE
 
_SC_LEVEL3_CACHE_SIZE


	)

487 
	m_SC_LEVEL3_CACHE_ASSOC
,

488 
	#_SC_LEVEL3_CACHE_ASSOC
 
_SC_LEVEL3_CACHE_ASSOC


	)

489 
	m_SC_LEVEL3_CACHE_LINESIZE
,

490 
	#_SC_LEVEL3_CACHE_LINESIZE
 
_SC_LEVEL3_CACHE_LINESIZE


	)

491 
	m_SC_LEVEL4_CACHE_SIZE
,

492 
	#_SC_LEVEL4_CACHE_SIZE
 
_SC_LEVEL4_CACHE_SIZE


	)

493 
	m_SC_LEVEL4_CACHE_ASSOC
,

494 
	#_SC_LEVEL4_CACHE_ASSOC
 
_SC_LEVEL4_CACHE_ASSOC


	)

495 
	m_SC_LEVEL4_CACHE_LINESIZE
,

496 
	#_SC_LEVEL4_CACHE_LINESIZE
 
_SC_LEVEL4_CACHE_LINESIZE


	)

499 
	m_SC_IPV6
 = 
_SC_LEVEL1_ICACHE_SIZE
 + 50,

500 
	#_SC_IPV6
 
_SC_IPV6


	)

501 
	m_SC_RAW_SOCKETS
,

502 
	#_SC_RAW_SOCKETS
 
_SC_RAW_SOCKETS


	)

504 
	m_SC_V7_ILP32_OFF32
,

505 
	#_SC_V7_ILP32_OFF32
 
_SC_V7_ILP32_OFF32


	)

506 
	m_SC_V7_ILP32_OFFBIG
,

507 
	#_SC_V7_ILP32_OFFBIG
 
_SC_V7_ILP32_OFFBIG


	)

508 
	m_SC_V7_LP64_OFF64
,

509 
	#_SC_V7_LP64_OFF64
 
_SC_V7_LP64_OFF64


	)

510 
	m_SC_V7_LPBIG_OFFBIG
,

511 
	#_SC_V7_LPBIG_OFFBIG
 
_SC_V7_LPBIG_OFFBIG


	)

513 
	m_SC_SS_REPL_MAX
,

514 
	#_SC_SS_REPL_MAX
 
_SC_SS_REPL_MAX


	)

516 
	m_SC_TRACE_EVENT_NAME_MAX
,

517 
	#_SC_TRACE_EVENT_NAME_MAX
 
_SC_TRACE_EVENT_NAME_MAX


	)

518 
	m_SC_TRACE_NAME_MAX
,

519 
	#_SC_TRACE_NAME_MAX
 
_SC_TRACE_NAME_MAX


	)

520 
	m_SC_TRACE_SYS_MAX
,

521 
	#_SC_TRACE_SYS_MAX
 
_SC_TRACE_SYS_MAX


	)

522 
	m_SC_TRACE_USER_EVENT_MAX
,

523 
	#_SC_TRACE_USER_EVENT_MAX
 
_SC_TRACE_USER_EVENT_MAX


	)

525 
	m_SC_XOPEN_STREAMS
,

526 
	#_SC_XOPEN_STREAMS
 
_SC_XOPEN_STREAMS


	)

528 
	m_SC_THREAD_ROBUST_PRIO_INHERIT
,

529 
	#_SC_THREAD_ROBUST_PRIO_INHERIT
 
_SC_THREAD_ROBUST_PRIO_INHERIT


	)

530 
	m_SC_THREAD_ROBUST_PRIO_PROTECT


531 
	#_SC_THREAD_ROBUST_PRIO_PROTECT
 
_SC_THREAD_ROBUST_PRIO_PROTECT


	)

537 
	m_CS_PATH
,

538 
	#_CS_PATH
 
_CS_PATH


	)

540 
	m_CS_V6_WIDTH_RESTRICTED_ENVS
,

541 
	#_CS_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

542 
	#_CS_POSIX_V6_WIDTH_RESTRICTED_ENVS
 
_CS_V6_WIDTH_RESTRICTED_ENVS


	)

544 
	m_CS_GNU_LIBC_VERSION
,

545 
	#_CS_GNU_LIBC_VERSION
 
_CS_GNU_LIBC_VERSION


	)

546 
	m_CS_GNU_LIBPTHREAD_VERSION
,

547 
	#_CS_GNU_LIBPTHREAD_VERSION
 
_CS_GNU_LIBPTHREAD_VERSION


	)

549 
	m_CS_V5_WIDTH_RESTRICTED_ENVS
,

550 
	#_CS_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

551 
	#_CS_POSIX_V5_WIDTH_RESTRICTED_ENVS
 
_CS_V5_WIDTH_RESTRICTED_ENVS


	)

553 
	m_CS_V7_WIDTH_RESTRICTED_ENVS
,

554 
	#_CS_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

555 
	#_CS_POSIX_V7_WIDTH_RESTRICTED_ENVS
 
_CS_V7_WIDTH_RESTRICTED_ENVS


	)

557 
	m_CS_LFS_CFLAGS
 = 1000,

558 
	#_CS_LFS_CFLAGS
 
_CS_LFS_CFLAGS


	)

559 
	m_CS_LFS_LDFLAGS
,

560 
	#_CS_LFS_LDFLAGS
 
_CS_LFS_LDFLAGS


	)

561 
	m_CS_LFS_LIBS
,

562 
	#_CS_LFS_LIBS
 
_CS_LFS_LIBS


	)

563 
	m_CS_LFS_LINTFLAGS
,

564 
	#_CS_LFS_LINTFLAGS
 
_CS_LFS_LINTFLAGS


	)

565 
	m_CS_LFS64_CFLAGS
,

566 
	#_CS_LFS64_CFLAGS
 
_CS_LFS64_CFLAGS


	)

567 
	m_CS_LFS64_LDFLAGS
,

568 
	#_CS_LFS64_LDFLAGS
 
_CS_LFS64_LDFLAGS


	)

569 
	m_CS_LFS64_LIBS
,

570 
	#_CS_LFS64_LIBS
 
_CS_LFS64_LIBS


	)

571 
	m_CS_LFS64_LINTFLAGS
,

572 
	#_CS_LFS64_LINTFLAGS
 
_CS_LFS64_LINTFLAGS


	)

574 
	m_CS_XBS5_ILP32_OFF32_CFLAGS
 = 1100,

575 
	#_CS_XBS5_ILP32_OFF32_CFLAGS
 
_CS_XBS5_ILP32_OFF32_CFLAGS


	)

576 
	m_CS_XBS5_ILP32_OFF32_LDFLAGS
,

577 
	#_CS_XBS5_ILP32_OFF32_LDFLAGS
 
_CS_XBS5_ILP32_OFF32_LDFLAGS


	)

578 
	m_CS_XBS5_ILP32_OFF32_LIBS
,

579 
	#_CS_XBS5_ILP32_OFF32_LIBS
 
_CS_XBS5_ILP32_OFF32_LIBS


	)

580 
	m_CS_XBS5_ILP32_OFF32_LINTFLAGS
,

581 
	#_CS_XBS5_ILP32_OFF32_LINTFLAGS
 
_CS_XBS5_ILP32_OFF32_LINTFLAGS


	)

582 
	m_CS_XBS5_ILP32_OFFBIG_CFLAGS
,

583 
	#_CS_XBS5_ILP32_OFFBIG_CFLAGS
 
_CS_XBS5_ILP32_OFFBIG_CFLAGS


	)

584 
	m_CS_XBS5_ILP32_OFFBIG_LDFLAGS
,

585 
	#_CS_XBS5_ILP32_OFFBIG_LDFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LDFLAGS


	)

586 
	m_CS_XBS5_ILP32_OFFBIG_LIBS
,

587 
	#_CS_XBS5_ILP32_OFFBIG_LIBS
 
_CS_XBS5_ILP32_OFFBIG_LIBS


	)

588 
	m_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
,

589 
	#_CS_XBS5_ILP32_OFFBIG_LINTFLAGS
 
_CS_XBS5_ILP32_OFFBIG_LINTFLAGS


	)

590 
	m_CS_XBS5_LP64_OFF64_CFLAGS
,

591 
	#_CS_XBS5_LP64_OFF64_CFLAGS
 
_CS_XBS5_LP64_OFF64_CFLAGS


	)

592 
	m_CS_XBS5_LP64_OFF64_LDFLAGS
,

593 
	#_CS_XBS5_LP64_OFF64_LDFLAGS
 
_CS_XBS5_LP64_OFF64_LDFLAGS


	)

594 
	m_CS_XBS5_LP64_OFF64_LIBS
,

595 
	#_CS_XBS5_LP64_OFF64_LIBS
 
_CS_XBS5_LP64_OFF64_LIBS


	)

596 
	m_CS_XBS5_LP64_OFF64_LINTFLAGS
,

597 
	#_CS_XBS5_LP64_OFF64_LINTFLAGS
 
_CS_XBS5_LP64_OFF64_LINTFLAGS


	)

598 
	m_CS_XBS5_LPBIG_OFFBIG_CFLAGS
,

599 
	#_CS_XBS5_LPBIG_OFFBIG_CFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_CFLAGS


	)

600 
	m_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
,

601 
	#_CS_XBS5_LPBIG_OFFBIG_LDFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LDFLAGS


	)

602 
	m_CS_XBS5_LPBIG_OFFBIG_LIBS
,

603 
	#_CS_XBS5_LPBIG_OFFBIG_LIBS
 
_CS_XBS5_LPBIG_OFFBIG_LIBS


	)

604 
	m_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
,

605 
	#_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS
 
_CS_XBS5_LPBIG_OFFBIG_LINTFLAGS


	)

607 
	m_CS_POSIX_V6_ILP32_OFF32_CFLAGS
,

608 
	#_CS_POSIX_V6_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_CFLAGS


	)

609 
	m_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
,

610 
	#_CS_POSIX_V6_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LDFLAGS


	)

611 
	m_CS_POSIX_V6_ILP32_OFF32_LIBS
,

612 
	#_CS_POSIX_V6_ILP32_OFF32_LIBS
 
_CS_POSIX_V6_ILP32_OFF32_LIBS


	)

613 
	m_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
,

614 
	#_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFF32_LINTFLAGS


	)

615 
	m_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
,

616 
	#_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_CFLAGS


	)

617 
	m_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
,

618 
	#_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LDFLAGS


	)

619 
	m_CS_POSIX_V6_ILP32_OFFBIG_LIBS
,

620 
	#_CS_POSIX_V6_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V6_ILP32_OFFBIG_LIBS


	)

621 
	m_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
,

622 
	#_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_ILP32_OFFBIG_LINTFLAGS


	)

623 
	m_CS_POSIX_V6_LP64_OFF64_CFLAGS
,

624 
	#_CS_POSIX_V6_LP64_OFF64_CFLAGS
 
_CS_POSIX_V6_LP64_OFF64_CFLAGS


	)

625 
	m_CS_POSIX_V6_LP64_OFF64_LDFLAGS
,

626 
	#_CS_POSIX_V6_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LDFLAGS


	)

627 
	m_CS_POSIX_V6_LP64_OFF64_LIBS
,

628 
	#_CS_POSIX_V6_LP64_OFF64_LIBS
 
_CS_POSIX_V6_LP64_OFF64_LIBS


	)

629 
	m_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
,

630 
	#_CS_POSIX_V6_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V6_LP64_OFF64_LINTFLAGS


	)

631 
	m_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
,

632 
	#_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_CFLAGS


	)

633 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
,

634 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LDFLAGS


	)

635 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
,

636 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LIBS


	)

637 
	m_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
,

638 
	#_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V6_LPBIG_OFFBIG_LINTFLAGS


	)

640 
	m_CS_POSIX_V7_ILP32_OFF32_CFLAGS
,

641 
	#_CS_POSIX_V7_ILP32_OFF32_CFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_CFLAGS


	)

642 
	m_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
,

643 
	#_CS_POSIX_V7_ILP32_OFF32_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LDFLAGS


	)

644 
	m_CS_POSIX_V7_ILP32_OFF32_LIBS
,

645 
	#_CS_POSIX_V7_ILP32_OFF32_LIBS
 
_CS_POSIX_V7_ILP32_OFF32_LIBS


	)

646 
	m_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
,

647 
	#_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFF32_LINTFLAGS


	)

648 
	m_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
,

649 
	#_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_CFLAGS


	)

650 
	m_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
,

651 
	#_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LDFLAGS


	)

652 
	m_CS_POSIX_V7_ILP32_OFFBIG_LIBS
,

653 
	#_CS_POSIX_V7_ILP32_OFFBIG_LIBS
 
_CS_POSIX_V7_ILP32_OFFBIG_LIBS


	)

654 
	m_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
,

655 
	#_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_ILP32_OFFBIG_LINTFLAGS


	)

656 
	m_CS_POSIX_V7_LP64_OFF64_CFLAGS
,

657 
	#_CS_POSIX_V7_LP64_OFF64_CFLAGS
 
_CS_POSIX_V7_LP64_OFF64_CFLAGS


	)

658 
	m_CS_POSIX_V7_LP64_OFF64_LDFLAGS
,

659 
	#_CS_POSIX_V7_LP64_OFF64_LDFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LDFLAGS


	)

660 
	m_CS_POSIX_V7_LP64_OFF64_LIBS
,

661 
	#_CS_POSIX_V7_LP64_OFF64_LIBS
 
_CS_POSIX_V7_LP64_OFF64_LIBS


	)

662 
	m_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
,

663 
	#_CS_POSIX_V7_LP64_OFF64_LINTFLAGS
 
_CS_POSIX_V7_LP64_OFF64_LINTFLAGS


	)

664 
	m_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
,

665 
	#_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_CFLAGS


	)

666 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
,

667 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LDFLAGS


	)

668 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
,

669 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LIBS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LIBS


	)

670 
	m_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


671 
	#_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS
 
_CS_POSIX_V7_LPBIG_OFFBIG_LINTFLAGS


	)

	@/usr/include/bits/dirent.h

19 #iâdeà
_DIRENT_H


23 
	sdœ’t


25 #iâdeà
__USE_FILE_OFFSET64


26 
__šo_t
 
	md_šo
;

27 
__off_t
 
	md_off
;

29 
__šo64_t
 
	md_šo
;

30 
__off64_t
 
	md_off
;

32 
	md_»ş’
;

33 
	md_ty³
;

34 
	md_Çme
[256];

37 #ifdeà
__USE_LARGEFILE64


38 
	sdœ’t64


40 
__šo64_t
 
	md_šo
;

41 
__off64_t
 
	md_off
;

42 
	md_»ş’
;

43 
	md_ty³
;

44 
	md_Çme
[256];

48 
	#d_f’o
 
d_šo


	)

50 #undeà
_DIRENT_HAVE_D_NAMLEN


51 
	#_DIRENT_HAVE_D_RECLEN


	)

52 
	#_DIRENT_HAVE_D_OFF


	)

53 
	#_DIRENT_HAVE_D_TYPE


	)

	@/usr/include/bits/environments.h

19 #iâdeà
_UNISTD_H


23 
	~<b™s/wÜdsize.h
>

43 #ià
__WORDSIZE
 == 64

57 
	#_POSIX_V7_LPBIG_OFFBIG
 -1

	)

58 
	#_POSIX_V6_LPBIG_OFFBIG
 -1

	)

59 
	#_XBS5_LPBIG_OFFBIG
 -1

	)

62 
	#_POSIX_V7_LP64_OFF64
 1

	)

63 
	#_POSIX_V6_LP64_OFF64
 1

	)

64 
	#_XBS5_LP64_OFF64
 1

	)

70 
	#_POSIX_V7_ILP32_OFF32
 1

	)

71 
	#_POSIX_V7_ILP32_OFFBIG
 1

	)

72 
	#_POSIX_V6_ILP32_OFF32
 1

	)

73 
	#_POSIX_V6_ILP32_OFFBIG
 1

	)

74 
	#_XBS5_ILP32_OFF32
 1

	)

75 
	#_XBS5_ILP32_OFFBIG
 1

	)

92 
	#__ILP32_OFF32_CFLAGS
 "-m32"

	)

93 
	#__ILP32_OFFBIG_CFLAGS
 "-m32 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64"

	)

94 
	#__ILP32_OFF32_LDFLAGS
 "-m32"

	)

95 
	#__ILP32_OFFBIG_LDFLAGS
 "-m32"

	)

96 
	#__LP64_OFF64_CFLAGS
 "-m64"

	)

97 
	#__LP64_OFF64_LDFLAGS
 "-m64"

	)

	@/usr/include/bits/errno.h

20 #ifdeà
_ERRNO_H


22 #undeà
EDOM


23 #undeà
EILSEQ


24 #undeà
ERANGE


25 
	~<lšux/”ºo.h
>

28 
	#ENOTSUP
 
EOPNOTSUPP


	)

31 #iâdeà
ECANCELED


32 
	#ECANCELED
 125

	)

36 #iâdeà
EOWNERDEAD


37 
	#EOWNERDEAD
 130

	)

38 
	#ENOTRECOVERABLE
 131

	)

41 #iâdeà
__ASSEMBLER__


43 *
	$__”ºo_loÿtiÚ
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

45 #ià!
defšed
 
_LIBC
 || defšed 
_LIBC_REENTRANT


47 
	#”ºo
 (*
	`__”ºo_loÿtiÚ
 ())

	)

52 #ià!
defšed
 
_ERRNO_H
 && defšed 
__Ãed_Em©h


56 
	#EDOM
 33

	)

57 
	#EILSEQ
 84

	)

58 
	#ERANGE
 34

	)

	@/usr/include/bits/huge_val.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VAL
 (
	`__butš_huge_v®
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VAL
 (
__ex‹nsiÚ__
 0x1.0
p2047
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VAL
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__DI__
))); 
__d
; }) \

37 { 
__l
: 0x7ff0000000000000ULL }).
__d
)

	)

41 
	~<’dŸn.h
>

43 uniÚ { 
	m__c
[8]; 
	m__d
; } 
	t__huge_v®_t
;

45 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


46 
	#__HUGE_VAL_by‹s
 { 0x7f, 0xf0, 0, 0, 0, 0, 0, 0 }

	)

48 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


49 
	#__HUGE_VAL_by‹s
 { 0, 0, 0, 0, 0, 0, 0xf0, 0x7à}

	)

52 
__huge_v®_t
 
	g__huge_v®
 = { 
__HUGE_VAL_by‹s
 };

53 
	#HUGE_VAL
 (
__huge_v®
.
__d
)

	)

	@/usr/include/bits/huge_valf.h

22 #iâdeà
_MATH_H


28 #ià
__GNUC_PREREQ
(3,3)

29 
	#HUGE_VALF
 (
	`__butš_huge_v®f
())

	)

30 #–ià
__GNUC_PREREQ
(2,96)

31 
	#HUGE_VALF
 (
__ex‹nsiÚ__
 0x1.0
p255f
)

	)

32 #–ià
defšed
 
__GNUC__


34 
	#HUGE_VALF
 \

35 (
__ex‹nsiÚ__
 \

36 ((uniÚ { 
__l
 
	`__©Œibu‹__
((
	`__mode__
(
__SI__
))); 
__d
; }) \

37 { 
__l
: 0x7f800000UL }).
__d
)

	)

41 uniÚ { 
	m__c
[4]; 
	m__f
; } 
	t__huge_v®f_t
;

43 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


44 
	#__HUGE_VALF_by‹s
 { 0x7f, 0x80, 0, 0 }

	)

46 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


47 
	#__HUGE_VALF_by‹s
 { 0, 0, 0x80, 0x7à}

	)

50 
__huge_v®f_t
 
	g__huge_v®f
 = { 
__HUGE_VALF_by‹s
 };

51 
	#HUGE_VALF
 (
__huge_v®f
.
__f
)

	)

	@/usr/include/bits/huge_vall.h

21 #iâdeà
_MATH_H


25 #ià
__GNUC_PREREQ
(3,3)

26 
	#HUGE_VALL
 (
	`__butš_huge_v®l
())

	)

28 
	#HUGE_VALL
 ((è
HUGE_VAL
)

	)

	@/usr/include/bits/inf.h

20 #iâdeà
_MATH_H


26 #ià
__GNUC_PREREQ
(3,3)

27 
	#INFINITY
 (
	`__butš_šff
())

	)

29 
	#INFINITY
 
HUGE_VALF


	)

	@/usr/include/bits/mathcalls.h

46 #iâdeà
_MATH_H


53 
_MdoubË_BEGIN_NAMESPACE


55 
__MATHCALL
 (
acos
,, (
_MdoubË_
 
__x
));

57 
__MATHCALL
 (
asš
,, (
_MdoubË_
 
__x
));

59 
__MATHCALL
 (
©ª
,, (
_MdoubË_
 
__x
));

61 
__MATHCALL
 (
©ª2
,, (
_MdoubË_
 
__y
, _MdoubË_ 
__x
));

64 
__MATHCALL
 (
cos
,, (
_MdoubË_
 
__x
));

66 
__MATHCALL
 (
sš
,, (
_MdoubË_
 
__x
));

68 
__MATHCALL
 (
n
,, (
_MdoubË_
 
__x
));

73 
__MATHCALL
 (
cosh
,, (
_MdoubË_
 
__x
));

75 
__MATHCALL
 (
sšh
,, (
_MdoubË_
 
__x
));

77 
__MATHCALL
 (
nh
,, (
_MdoubË_
 
__x
));

78 
	g_MdoubË_END_NAMESPACE


80 #ifdeà
__USE_GNU


82 
__MATHDECL
 (,
sšcos
,,

83 (
_MdoubË_
 
__x
, _MdoubË_ *
__sšx
, _MdoubË_ *
__cosx
));

86 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


87 
__BEGIN_NAMESPACE_C99


89 
__MATHCALL
 (
acosh
,, (
_MdoubË_
 
__x
));

91 
__MATHCALL
 (
asšh
,, (
_MdoubË_
 
__x
));

93 
__MATHCALL
 (
©ªh
,, (
_MdoubË_
 
__x
));

94 
	g__END_NAMESPACE_C99


99 
_MdoubË_BEGIN_NAMESPACE


101 
__MATHCALL
 (
exp
,, (
_MdoubË_
 
__x
));

104 
__MATHCALL
 (
äexp
,, (
_MdoubË_
 
__x
, *
__expÚ’t
));

107 
__MATHCALL
 (
ldexp
,, (
_MdoubË_
 
__x
, 
__expÚ’t
));

110 
__MATHCALL
 (
log
,, (
_MdoubË_
 
__x
));

113 
__MATHCALL
 (
log10
,, (
_MdoubË_
 
__x
));

116 
__MATHCALL
 (
modf
,, (
_MdoubË_
 
__x
, _MdoubË_ *
__Œ
));

117 
	g_MdoubË_END_NAMESPACE


119 #ifdeà
__USE_GNU


121 
__MATHCALL
 (
exp10
,, (
_MdoubË_
 
__x
));

123 
__MATHCALL
 (
pow10
,, (
_MdoubË_
 
__x
));

126 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


127 
__BEGIN_NAMESPACE_C99


129 
__MATHCALL
 (
expm1
,, (
_MdoubË_
 
__x
));

132 
__MATHCALL
 (
log1p
,, (
_MdoubË_
 
__x
));

135 
__MATHCALL
 (
logb
,, (
_MdoubË_
 
__x
));

136 
	g__END_NAMESPACE_C99


139 #ifdeà
__USE_ISOC99


140 
__BEGIN_NAMESPACE_C99


142 
__MATHCALL
 (
exp2
,, (
_MdoubË_
 
__x
));

145 
__MATHCALL
 (
log2
,, (
_MdoubË_
 
__x
));

146 
	g__END_NAMESPACE_C99


152 
_MdoubË_BEGIN_NAMESPACE


154 
__MATHCALL
 (
pow
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

157 
__MATHCALL
 (
sq¹
,, (
_MdoubË_
 
__x
));

158 
	g_MdoubË_END_NAMESPACE


160 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


161 
__BEGIN_NAMESPACE_C99


163 
__MATHCALL
 (
hypÙ
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

164 
	g__END_NAMESPACE_C99


167 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


168 
__BEGIN_NAMESPACE_C99


170 
__MATHCALL
 (
cb¹
,, (
_MdoubË_
 
__x
));

171 
	g__END_NAMESPACE_C99


177 
_MdoubË_BEGIN_NAMESPACE


179 
__MATHCALLX
 (
û
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

182 
__MATHCALLX
 (
çbs
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

185 
__MATHCALLX
 (
æoÜ
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

188 
__MATHCALL
 (
fmod
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

193 
__MATHDECL_1
 (,
__isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

196 
__MATHDECL_1
 (,
__fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

197 
	g_MdoubË_END_NAMESPACE


199 #ifdeà
__USE_MISC


202 
__MATHDECL_1
 (,
isšf
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

205 
__MATHDECL_1
 (,
fš™e
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

208 
__MATHCALL
 (
d»m
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

212 
__MATHCALL
 (
signifiÿnd
,, (
_MdoubË_
 
__x
));

215 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


216 
__BEGIN_NAMESPACE_C99


218 
__MATHCALLX
 (
cİysign
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

219 
	g__END_NAMESPACE_C99


222 #ifdeà
__USE_ISOC99


223 
__BEGIN_NAMESPACE_C99


225 
__MATHCALLX
 (
Çn
,, (
__cÚ¡
 *
__gb
), (
__cÚ¡__
));

226 
	g__END_NAMESPACE_C99


231 
__MATHDECL_1
 (,
__i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

233 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


235 
__MATHDECL_1
 (,
i¢ª
,, (
_MdoubË_
 
__v®ue
)è
__©Œibu‹__
 ((
__cÚ¡__
));

238 
__MATHCALL
 (
j0
,, (
_MdoubË_
));

239 
__MATHCALL
 (
j1
,, (
_MdoubË_
));

240 
__MATHCALL
 (
jn
,, (, 
_MdoubË_
));

241 
__MATHCALL
 (
y0
,, (
_MdoubË_
));

242 
__MATHCALL
 (
y1
,, (
_MdoubË_
));

243 
__MATHCALL
 (
yn
,, (, 
_MdoubË_
));

247 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN
 || defšed 
__USE_ISOC99


248 
__BEGIN_NAMESPACE_C99


250 
__MATHCALL
 (
”f
,, (
_MdoubË_
));

251 
__MATHCALL
 (
”fc
,, (
_MdoubË_
));

252 
__MATHCALL
 (
lgamma
,, (
_MdoubË_
));

253 
	g__END_NAMESPACE_C99


256 #ifdeà
__USE_ISOC99


257 
__BEGIN_NAMESPACE_C99


259 
__MATHCALL
 (
tgamma
,, (
_MdoubË_
));

260 
	g__END_NAMESPACE_C99


263 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN


265 
__MATHCALL
 (
gamma
,, (
_MdoubË_
));

268 #ifdeà
__USE_MISC


272 
__MATHCALL
 (
lgamma
,
_r
, (
_MdoubË_
, *
__signgamp
));

276 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


277 
__BEGIN_NAMESPACE_C99


280 
__MATHCALL
 (
ršt
,, (
_MdoubË_
 
__x
));

283 
__MATHCALLX
 (
Ãxá”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
), (
__cÚ¡__
));

284 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__LDBL_COMPAT


285 
__MATHCALLX
 (
Ãx‰ow¬d
,, (
_MdoubË_
 
__x
, 
__y
), (
__cÚ¡__
));

289 
__MATHCALL
 (
»mašd”
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

291 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_ISOC99


293 
__MATHCALL
 (
sÿlbn
,, (
_MdoubË_
 
__x
, 
__n
));

297 
__MATHDECL
 (,
ogb
,, (
_MdoubË_
 
__x
));

300 #ifdeà
__USE_ISOC99


302 
__MATHCALL
 (
sÿlbÊ
,, (
_MdoubË_
 
__x
, 
__n
));

306 
__MATHCALL
 (
Ã¬byšt
,, (
_MdoubË_
 
__x
));

310 
__MATHCALLX
 (
round
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

314 
__MATHCALLX
 (
Œunc
,, (
_MdoubË_
 
__x
), (
__cÚ¡__
));

319 
__MATHCALL
 (
»mquo
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, *
__quo
));

326 
__MATHDECL
 (,
Ìšt
,, (
_MdoubË_
 
__x
));

327 
__MATHDECL
 (,
Îršt
,, (
_MdoubË_
 
__x
));

331 
__MATHDECL
 (,
Ìound
,, (
_MdoubË_
 
__x
));

332 
__MATHDECL
 (,
Îround
,, (
_MdoubË_
 
__x
));

336 
__MATHCALL
 (
fdim
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

339 
__MATHCALL
 (
fmax
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

342 
__MATHCALL
 (
fmš
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
));

346 
__MATHDECL_1
 (, 
__åşassify
,, (
_MdoubË_
 
__v®ue
))

347 
__©Œibu‹__
 ((
__cÚ¡__
));

350 
__MATHDECL_1
 (, 
__signb™
,, (
_MdoubË_
 
__v®ue
))

351 
__©Œibu‹__
 ((
__cÚ¡__
));

355 
__MATHCALL
 (
fma
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__y
, _MdoubË_ 
__z
));

358 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_ISOC99


359 
	g__END_NAMESPACE_C99


362 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN_EXTENDED


364 
__MATHCALL
 (
sÿlb
,, (
_MdoubË_
 
__x
, _MdoubË_ 
__n
));

	@/usr/include/bits/mathdef.h

19 #ià!
defšed
 
_MATH_H
 && !defšed 
_COMPLEX_H


23 #ià
defšed
 
__USE_ISOC99
 && defšed 
_MATH_H
 && !defšed 
_MATH_H_MATHDEF


24 
	#_MATH_H_MATHDEF
 1

	)

26 
	~<b™s/wÜdsize.h
>

28 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__FLT_EVAL_METHOD__
 && __FLT_EVAL_METHOD__ == 0)

31 
	tæßt_t
;

32 
	tdoubË_t
;

38 
	tæßt_t
;

40 
	tdoubË_t
;

45 
	#FP_ILOGB0
 (-2147483647 - 1)

	)

46 
	#FP_ILOGBNAN
 (-2147483647 - 1)

	)

	@/usr/include/bits/mathinline.h

21 #iâdeà
_MATH_H


25 
	~<b™s/wÜdsize.h
>

27 #iâdeà
__ex‹º_šlše


28 
	#__MATH_INLINE
 
__šlše


	)

30 
	#__MATH_INLINE
 
__ex‹º_šlše


	)

34 #ià
defšed
 
__USE_ISOC99
 && defšed 
__GNUC__
 && __GNUC__ >= 2

37 
__MATH_INLINE
 

38 
__NTH
 (
	$__signb™f
 (
__x
))

40 #ià
__WORDSIZE
 == 32

41 
__ex‹nsiÚ__
 uniÚ { 
__f
; 
__i
; } 
__u
 = { __f: 
__x
 };

42  
__u
.
__i
 < 0;

44 
__m
;

45 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

46  
__m
 & 0x8;

48 
	}
}

49 
__MATH_INLINE
 

50 
__NTH
 (
	$__signb™
 (
__x
))

52 #ià
__WORDSIZE
 == 32

53 
__ex‹nsiÚ__
 uniÚ { 
__d
; 
__i
[2]; } 
__u
 = { __d: 
__x
 };

54  
__u
.
__i
[1] < 0;

56 
__m
;

57 
	`__asm
 ("pmovmskb %1, %0" : "ô" (
__m
è: "x" (
__x
));

58  
__m
 & 0x80;

60 
	}
}

61 
__MATH_INLINE
 

62 
__NTH
 (
	$__signb™l
 (
__x
))

64 
__ex‹nsiÚ__
 uniÚ { 
__l
; 
__i
[3]; } 
__u
 = { __l: 
__x
 };

65  (
__u
.
__i
[2] & 0x8000) != 0;

66 
	}
}

	@/usr/include/bits/nan.h

20 #iâdeà
_MATH_H


27 #ià
__GNUC_PREREQ
(3,3)

29 
	#NAN
 (
	`__butš_Çnf
 (""))

	)

31 #–ià
defšed
 
__GNUC__


33 
	#NAN
 \

34 (
__ex‹nsiÚ__
 \

35 ((uniÚ { 
__l
 
	`__©Œibu‹__
 ((
	`__mode__
 (
__SI__
))); 
__d
; }) \

36 { 
__l
: 0x7fc00000UL }).
__d
)

	)

40 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#__Çn_by‹s
 { 0x7f, 0xc0, 0, 0 }

	)

45 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


46 
	#__Çn_by‹s
 { 0, 0, 0xc0, 0x7à}

	)

49 uniÚ { 
	m__c
[4]; 
	m__d
; } 
__Çn_uniÚ


50 
	g__©Œibu‹_u£d__
 = { 
__Çn_by‹s
 };

51 
	#NAN
 (
__Çn_uniÚ
.
__d
)

	)

	@/usr/include/bits/posix1_lim.h

25 #iâdef 
_BITS_POSIX1_LIM_H


26 
	#_BITS_POSIX1_LIM_H
 1

	)

32 
	#_POSIX_AIO_LISTIO_MAX
 2

	)

35 
	#_POSIX_AIO_MAX
 1

	)

38 
	#_POSIX_ARG_MAX
 4096

	)

41 #ifdeà
__USE_XOPEN2K


42 
	#_POSIX_CHILD_MAX
 25

	)

44 
	#_POSIX_CHILD_MAX
 6

	)

48 
	#_POSIX_DELAYTIMER_MAX
 32

	)

52 
	#_POSIX_HOST_NAME_MAX
 255

	)

55 
	#_POSIX_LINK_MAX
 8

	)

58 
	#_POSIX_LOGIN_NAME_MAX
 9

	)

61 
	#_POSIX_MAX_CANON
 255

	)

65 
	#_POSIX_MAX_INPUT
 255

	)

68 
	#_POSIX_MQ_OPEN_MAX
 8

	)

71 
	#_POSIX_MQ_PRIO_MAX
 32

	)

74 
	#_POSIX_NAME_MAX
 14

	)

77 #ifdeà
__USE_XOPEN2K


78 
	#_POSIX_NGROUPS_MAX
 8

	)

80 
	#_POSIX_NGROUPS_MAX
 0

	)

84 #ifdeà
__USE_XOPEN2K


85 
	#_POSIX_OPEN_MAX
 20

	)

87 
	#_POSIX_OPEN_MAX
 16

	)

90 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


93 
	#_POSIX_FD_SETSIZE
 
_POSIX_OPEN_MAX


	)

97 
	#_POSIX_PATH_MAX
 256

	)

100 
	#_POSIX_PIPE_BUF
 512

	)

104 
	#_POSIX_RE_DUP_MAX
 255

	)

107 
	#_POSIX_RTSIG_MAX
 8

	)

110 
	#_POSIX_SEM_NSEMS_MAX
 256

	)

113 
	#_POSIX_SEM_VALUE_MAX
 32767

	)

116 
	#_POSIX_SIGQUEUE_MAX
 32

	)

119 
	#_POSIX_SSIZE_MAX
 32767

	)

122 
	#_POSIX_STREAM_MAX
 8

	)

125 
	#_POSIX_SYMLINK_MAX
 255

	)

129 
	#_POSIX_SYMLOOP_MAX
 8

	)

132 
	#_POSIX_TIMER_MAX
 32

	)

135 
	#_POSIX_TTY_NAME_MAX
 9

	)

138 
	#_POSIX_TZNAME_MAX
 6

	)

140 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


142 
	#_POSIX_QLIMIT
 1

	)

146 
	#_POSIX_HIWAT
 
_POSIX_PIPE_BUF


	)

149 
	#_POSIX_UIO_MAXIOV
 16

	)

153 
	#_POSIX_CLOCKRES_MIN
 20000000

	)

157 
	~<b™s/loÿl_lim.h
>

160 #iâdef 
SSIZE_MAX


161 
	#SSIZE_MAX
 
LONG_MAX


	)

168 #iâdef 
NGROUPS_MAX


169 
	#NGROUPS_MAX
 8

	)

	@/usr/include/bits/posix_opt.h

20 #iâdef 
_BITS_POSIX_OPT_H


21 
	#_BITS_POSIX_OPT_H
 1

	)

24 
	#_POSIX_JOB_CONTROL
 1

	)

27 
	#_POSIX_SAVED_IDS
 1

	)

30 
	#_POSIX_PRIORITY_SCHEDULING
 200809L

	)

33 
	#_POSIX_SYNCHRONIZED_IO
 200809L

	)

36 
	#_POSIX_FSYNC
 200809L

	)

39 
	#_POSIX_MAPPED_FILES
 200809L

	)

42 
	#_POSIX_MEMLOCK
 200809L

	)

45 
	#_POSIX_MEMLOCK_RANGE
 200809L

	)

48 
	#_POSIX_MEMORY_PROTECTION
 200809L

	)

51 
	#_POSIX_CHOWN_RESTRICTED
 0

	)

55 
	#_POSIX_VDISABLE
 '\0'

	)

58 
	#_POSIX_NO_TRUNC
 1

	)

61 
	#_XOPEN_REALTIME
 1

	)

64 
	#_XOPEN_REALTIME_THREADS
 1

	)

67 
	#_XOPEN_SHM
 1

	)

70 
	#_POSIX_THREADS
 200809L

	)

73 
	#_POSIX_REENTRANT_FUNCTIONS
 1

	)

74 
	#_POSIX_THREAD_SAFE_FUNCTIONS
 200809L

	)

77 
	#_POSIX_THREAD_PRIORITY_SCHEDULING
 200809L

	)

80 
	#_POSIX_THREAD_ATTR_STACKSIZE
 200809L

	)

83 
	#_POSIX_THREAD_ATTR_STACKADDR
 200809L

	)

86 
	#_POSIX_THREAD_PRIO_INHERIT
 200809L

	)

90 
	#_POSIX_THREAD_PRIO_PROTECT
 200809L

	)

92 #ifdeà
__USE_XOPEN2K8


94 
	#_POSIX_THREAD_ROBUST_PRIO_INHERIT
 200809L

	)

97 
	#_POSIX_THREAD_ROBUST_PRIO_PROTECT
 -1

	)

101 
	#_POSIX_SEMAPHORES
 200809L

	)

104 
	#_POSIX_REALTIME_SIGNALS
 200809L

	)

107 
	#_POSIX_ASYNCHRONOUS_IO
 200809L

	)

108 
	#_POSIX_ASYNC_IO
 1

	)

110 
	#_LFS_ASYNCHRONOUS_IO
 1

	)

112 
	#_POSIX_PRIORITIZED_IO
 200809L

	)

115 
	#_LFS64_ASYNCHRONOUS_IO
 1

	)

118 
	#_LFS_LARGEFILE
 1

	)

119 
	#_LFS64_LARGEFILE
 1

	)

120 
	#_LFS64_STDIO
 1

	)

123 
	#_POSIX_SHARED_MEMORY_OBJECTS
 200809L

	)

126 
	#_POSIX_CPUTIME
 0

	)

129 
	#_POSIX_THREAD_CPUTIME
 0

	)

132 
	#_POSIX_REGEXP
 1

	)

135 
	#_POSIX_READER_WRITER_LOCKS
 200809L

	)

138 
	#_POSIX_SHELL
 1

	)

141 
	#_POSIX_TIMEOUTS
 200809L

	)

144 
	#_POSIX_SPIN_LOCKS
 200809L

	)

147 
	#_POSIX_SPAWN
 200809L

	)

150 
	#_POSIX_TIMERS
 200809L

	)

153 
	#_POSIX_BARRIERS
 200809L

	)

156 
	#_POSIX_MESSAGE_PASSING
 200809L

	)

159 
	#_POSIX_THREAD_PROCESS_SHARED
 200809L

	)

162 
	#_POSIX_MONOTONIC_CLOCK
 0

	)

165 
	#_POSIX_CLOCK_SELECTION
 200809L

	)

168 
	#_POSIX_ADVISORY_INFO
 200809L

	)

171 
	#_POSIX_IPV6
 200809L

	)

174 
	#_POSIX_RAW_SOCKETS
 200809L

	)

177 
	#_POSIX2_CHAR_TERM
 200809L

	)

180 
	#_POSIX_SPORADIC_SERVER
 -1

	)

181 
	#_POSIX_THREAD_SPORADIC_SERVER
 -1

	)

184 
	#_POSIX_TRACE
 -1

	)

185 
	#_POSIX_TRACE_EVENT_FILTER
 -1

	)

186 
	#_POSIX_TRACE_INHERIT
 -1

	)

187 
	#_POSIX_TRACE_LOG
 -1

	)

190 
	#_POSIX_TYPED_MEMORY_OBJECTS
 -1

	)

	@/usr/include/bits/pthreadtypes.h

20 #iâdeà
_BITS_PTHREADTYPES_H


21 
	#_BITS_PTHREADTYPES_H
 1

	)

23 
	~<b™s/wÜdsize.h
>

25 #ià
__WORDSIZE
 == 64

26 
	#__SIZEOF_PTHREAD_ATTR_T
 56

	)

27 
	#__SIZEOF_PTHREAD_MUTEX_T
 40

	)

28 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

29 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

30 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

31 
	#__SIZEOF_PTHREAD_RWLOCK_T
 56

	)

32 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

33 
	#__SIZEOF_PTHREAD_BARRIER_T
 32

	)

34 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

36 
	#__SIZEOF_PTHREAD_ATTR_T
 36

	)

37 
	#__SIZEOF_PTHREAD_MUTEX_T
 24

	)

38 
	#__SIZEOF_PTHREAD_MUTEXATTR_T
 4

	)

39 
	#__SIZEOF_PTHREAD_COND_T
 48

	)

40 
	#__SIZEOF_PTHREAD_CONDATTR_T
 4

	)

41 
	#__SIZEOF_PTHREAD_RWLOCK_T
 32

	)

42 
	#__SIZEOF_PTHREAD_RWLOCKATTR_T
 8

	)

43 
	#__SIZEOF_PTHREAD_BARRIER_T
 20

	)

44 
	#__SIZEOF_PTHREAD_BARRIERATTR_T
 4

	)

50 
	t±h»ad_t
;

55 
	m__size
[
__SIZEOF_PTHREAD_ATTR_T
];

56 
	m__®ign
;

57 } 
	t±h»ad_©Œ_t
;

60 #ià
__WORDSIZE
 == 64

61 
	s__±h»ad_š‹º®_li¡


63 
__±h»ad_š‹º®_li¡
 *
	m__´ev
;

64 
__±h»ad_š‹º®_li¡
 *
	m__Ãxt
;

65 } 
	t__±h»ad_li¡_t
;

67 
	s__±h»ad_š‹º®_¦i¡


69 
__±h»ad_š‹º®_¦i¡
 *
	m__Ãxt
;

70 } 
	t__±h»ad_¦i¡_t
;

78 
	s__±h»ad_mu‹x_s


80 
	m__lock
;

81 
	m__couÁ
;

82 
	m__owÃr
;

83 #ià
__WORDSIZE
 == 64

84 
	m__nu£rs
;

88 
	m__kšd
;

89 #ià
__WORDSIZE
 == 64

90 
	m__¥šs
;

91 
__±h»ad_li¡_t
 
	m__li¡
;

92 
	#__PTHREAD_MUTEX_HAVE_PREV
 1

	)

94 
	m__nu£rs
;

95 
__ex‹nsiÚ__
 union

97 
	m__¥šs
;

98 
__±h»ad_¦i¡_t
 
	m__li¡
;

101 } 
	m__d©a
;

102 
	m__size
[
__SIZEOF_PTHREAD_MUTEX_T
];

103 
	m__®ign
;

104 } 
	t±h»ad_mu‹x_t
;

108 
	m__size
[
__SIZEOF_PTHREAD_MUTEXATTR_T
];

109 
	m__®ign
;

110 } 
	t±h»ad_mu‹x©Œ_t
;

119 
	m__lock
;

120 
	m__fu‹x
;

121 
__ex‹nsiÚ__
 
	m__tÙ®_£q
;

122 
__ex‹nsiÚ__
 
	m__wakeup_£q
;

123 
__ex‹nsiÚ__
 
	m__wok’_£q
;

124 *
	m__mu‹x
;

125 
	m__nwa™”s
;

126 
	m__brßdÿ¡_£q
;

127 } 
	m__d©a
;

128 
	m__size
[
__SIZEOF_PTHREAD_COND_T
];

129 
__ex‹nsiÚ__
 
	m__®ign
;

130 } 
	t±h»ad_cÚd_t
;

134 
	m__size
[
__SIZEOF_PTHREAD_CONDATTR_T
];

135 
	m__®ign
;

136 } 
	t±h»ad_cÚd©Œ_t
;

140 
	t±h»ad_key_t
;

144 
	t±h»ad_Úû_t
;

147 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


152 #ià
__WORDSIZE
 == 64

155 
	m__lock
;

156 
	m__Ä_»ad”s
;

157 
	m__»ad”s_wakeup
;

158 
	m__wr™”_wakeup
;

159 
	m__Ä_»ad”s_queued
;

160 
	m__Ä_wr™”s_queued
;

161 
	m__wr™”
;

162 
	m__sh¬ed
;

163 
	m__·d1
;

164 
	m__·d2
;

167 
	m__æags
;

168 } 
	m__d©a
;

172 
	m__lock
;

173 
	m__Ä_»ad”s
;

174 
	m__»ad”s_wakeup
;

175 
	m__wr™”_wakeup
;

176 
	m__Ä_»ad”s_queued
;

177 
	m__Ä_wr™”s_queued
;

180 
	m__æags
;

181 
	m__sh¬ed
;

182 
	m__·d1
;

183 
	m__·d2
;

184 
	m__wr™”
;

185 } 
	m__d©a
;

187 
	m__size
[
__SIZEOF_PTHREAD_RWLOCK_T
];

188 
	m__®ign
;

189 } 
	t±h»ad_rwlock_t
;

193 
	m__size
[
__SIZEOF_PTHREAD_RWLOCKATTR_T
];

194 
	m__®ign
;

195 } 
	t±h»ad_rwlock©Œ_t
;

199 #ifdeà
__USE_XOPEN2K


201 vŞ©
	t±h»ad_¥šlock_t
;

208 
	m__size
[
__SIZEOF_PTHREAD_BARRIER_T
];

209 
	m__®ign
;

210 } 
	t±h»ad_b¬r›r_t
;

214 
	m__size
[
__SIZEOF_PTHREAD_BARRIERATTR_T
];

215 
	m__®ign
;

216 } 
	t±h»ad_b¬r›¿‰r_t
;

220 #ià
__WORDSIZE
 == 32

222 
	#__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
	`__»g·rm__
 (1)))

	)

	@/usr/include/bits/stat.h

19 #iâdeà
_SYS_STAT_H


24 
	#_STAT_VER_KERNEL
 0

	)

26 #ià
__WORDSIZE
 == 32

27 
	#_STAT_VER_SVR4
 2

	)

28 
	#_STAT_VER_LINUX
 3

	)

31 
	#_MKNOD_VER_LINUX
 1

	)

32 
	#_MKNOD_VER_SVR4
 2

	)

33 
	#_MKNOD_VER
 
_MKNOD_VER_LINUX


	)

35 
	#_STAT_VER_LINUX
 1

	)

38 
	#_MKNOD_VER_LINUX
 0

	)

41 
	#_STAT_VER
 
_STAT_VER_LINUX


	)

43 
	s¡©


45 
__dev_t
 
	m¡_dev
;

46 #ià
__WORDSIZE
 == 32

47 
	m__·d1
;

49 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


50 
__šo_t
 
	m¡_šo
;

52 
__šo_t
 
	m__¡_šo
;

54 #ià
__WORDSIZE
 == 32

55 
__mode_t
 
	m¡_mode
;

56 
__Æšk_t
 
	m¡_Æšk
;

58 
__Æšk_t
 
	m¡_Æšk
;

59 
__mode_t
 
	m¡_mode
;

61 
__uid_t
 
	m¡_uid
;

62 
__gid_t
 
	m¡_gid
;

63 #ià
__WORDSIZE
 == 64

64 
	m__·d0
;

66 
__dev_t
 
	m¡_rdev
;

67 #ià
__WORDSIZE
 == 32

68 
	m__·d2
;

70 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


71 
__off_t
 
	m¡_size
;

73 
__off64_t
 
	m¡_size
;

75 
__blksize_t
 
	m¡_blksize
;

76 #ià
__WORDSIZE
 =ğ64 || !
defšed
 
__USE_FILE_OFFSET64


77 
__blkút_t
 
	m¡_blocks
;

79 
__blkút64_t
 
	m¡_blocks
;

81 #ifdeà
__USE_MISC


88 
time¥ec
 
	m¡_©im
;

89 
time¥ec
 
	m¡_mtim
;

90 
time¥ec
 
	m¡_ùim
;

91 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

92 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

93 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

95 
__time_t
 
	m¡_©ime
;

96 
	m¡_©im’£c
;

97 
__time_t
 
	m¡_mtime
;

98 
	m¡_mtim’£c
;

99 
__time_t
 
	m¡_ùime
;

100 
	m¡_ùim’£c
;

102 #ià
__WORDSIZE
 == 64

103 
	m__unu£d
[3];

105 #iâdeà
__USE_FILE_OFFSET64


106 
	m__unu£d4
;

107 
	m__unu£d5
;

109 
__šo64_t
 
	m¡_šo
;

114 #ifdeà
__USE_LARGEFILE64


116 
	s¡©64


118 
__dev_t
 
	m¡_dev
;

119 #ià
__WORDSIZE
 == 64

120 
__šo64_t
 
	m¡_šo
;

121 
__Æšk_t
 
	m¡_Æšk
;

122 
__mode_t
 
	m¡_mode
;

124 
	m__·d1
;

125 
__šo_t
 
	m__¡_šo
;

126 
__mode_t
 
	m¡_mode
;

127 
__Æšk_t
 
	m¡_Æšk
;

129 
__uid_t
 
	m¡_uid
;

130 
__gid_t
 
	m¡_gid
;

131 #ià
__WORDSIZE
 == 64

132 
	m__·d0
;

133 
__dev_t
 
	m¡_rdev
;

134 
__off_t
 
	m¡_size
;

136 
__dev_t
 
	m¡_rdev
;

137 
	m__·d2
;

138 
__off64_t
 
	m¡_size
;

140 
__blksize_t
 
	m¡_blksize
;

141 
__blkút64_t
 
	m¡_blocks
;

142 #ifdeà
__USE_MISC


149 
time¥ec
 
	m¡_©im
;

150 
time¥ec
 
	m¡_mtim
;

151 
time¥ec
 
	m¡_ùim
;

152 
	#¡_©ime
 
¡_©im
.
tv_£c


	)

153 
	#¡_mtime
 
¡_mtim
.
tv_£c


	)

154 
	#¡_ùime
 
¡_ùim
.
tv_£c


	)

156 
__time_t
 
	m¡_©ime
;

157 
	m¡_©im’£c
;

158 
__time_t
 
	m¡_mtime
;

159 
	m¡_mtim’£c
;

160 
__time_t
 
	m¡_ùime
;

161 
	m¡_ùim’£c
;

163 #ià
__WORDSIZE
 == 64

164 
	m__unu£d
[3];

166 
__šo64_t
 
	m¡_šo
;

172 
	#_STATBUF_ST_BLKSIZE


	)

173 
	#_STATBUF_ST_RDEV


	)

175 
	#_STATBUF_ST_NSEC


	)

179 
	#__S_IFMT
 0170000

	)

182 
	#__S_IFDIR
 0040000

	)

183 
	#__S_IFCHR
 0020000

	)

184 
	#__S_IFBLK
 0060000

	)

185 
	#__S_IFREG
 0100000

	)

186 
	#__S_IFIFO
 0010000

	)

187 
	#__S_IFLNK
 0120000

	)

188 
	#__S_IFSOCK
 0140000

	)

192 
	#__S_TYPEISMQ
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

193 
	#__S_TYPEISSEM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

194 
	#__S_TYPEISSHM
(
buf
è((buf)->
¡_mode
 - (buf)->¡_mode)

	)

198 
	#__S_ISUID
 04000

	)

199 
	#__S_ISGID
 02000

	)

200 
	#__S_ISVTX
 01000

	)

201 
	#__S_IREAD
 0400

	)

202 
	#__S_IWRITE
 0200

	)

203 
	#__S_IEXEC
 0100

	)

205 #ifdeà
__USE_ATFILE


206 
	#UTIME_NOW
 ((1È<< 30è- 1l)

	)

207 
	#UTIME_OMIT
 ((1È<< 30è- 2l)

	)

	@/usr/include/bits/stdio-ldbl.h

20 #iâdeà
_STDIO_H


24 
__BEGIN_NAMESPACE_STD


25 
	$__LDBL_REDIR_DECL
 (
årštf
)

26 
	$__LDBL_REDIR_DECL
 (
´štf
)

27 
	$__LDBL_REDIR_DECL
 (
¥rštf
)

28 
	$__LDBL_REDIR_DECL
 (
vårštf
)

29 
	$__LDBL_REDIR_DECL
 (
v´štf
)

30 
	$__LDBL_REDIR_DECL
 (
v¥rštf
)

31 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

32 && !
defšed
 
__REDIRECT
 \

33 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

34 
	$__LDBL_REDIR1_DECL
 (
fsÿnf
, 
__Ædbl___isoc99_fsÿnf
)

35 
	$__LDBL_REDIR1_DECL
 (
sÿnf
, 
__Ædbl___isoc99_sÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
ssÿnf
, 
__Ædbl___isoc99_ssÿnf
)

38 
	$__LDBL_REDIR_DECL
 (
fsÿnf
)

39 
	$__LDBL_REDIR_DECL
 (
sÿnf
)

40 
	$__LDBL_REDIR_DECL
 (
ssÿnf
)

42 
__END_NAMESPACE_STD


44 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


45 
__BEGIN_NAMESPACE_C99


46 
	$__LDBL_REDIR_DECL
 (
¢´štf
)

47 
	$__LDBL_REDIR_DECL
 (
v¢´štf
)

48 
__END_NAMESPACE_C99


51 #ifdef 
__USE_ISOC99


52 
__BEGIN_NAMESPACE_C99


53 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

54 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

55 
	$__LDBL_REDIR1_DECL
 (
vfsÿnf
, 
__Ædbl___isoc99_vfsÿnf
)

56 
	$__LDBL_REDIR1_DECL
 (
vsÿnf
, 
__Ædbl___isoc99_vsÿnf
)

57 
	$__LDBL_REDIR1_DECL
 (
vssÿnf
, 
__Ædbl___isoc99_vssÿnf
)

59 
	$__LDBL_REDIR_DECL
 (
vfsÿnf
)

60 
	$__LDBL_REDIR_DECL
 (
vssÿnf
)

61 
	$__LDBL_REDIR_DECL
 (
vsÿnf
)

63 
__END_NAMESPACE_C99


66 #ifdeà
__USE_GNU


67 
	$__LDBL_REDIR_DECL
 (
vd´štf
)

68 
	$__LDBL_REDIR_DECL
 (
d´štf
)

69 
	$__LDBL_REDIR_DECL
 (
va¥rštf
)

70 
	$__LDBL_REDIR_DECL
 (
__a¥rštf
)

71 
	$__LDBL_REDIR_DECL
 (
a¥rštf
)

72 
	$__LDBL_REDIR_DECL
 (
ob¡ack_´štf
)

73 
	$__LDBL_REDIR_DECL
 (
ob¡ack_v´štf
)

76 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


77 
	$__LDBL_REDIR_DECL
 (
__¥rštf_chk
)

78 
	$__LDBL_REDIR_DECL
 (
__v¥rštf_chk
)

79 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


80 
	$__LDBL_REDIR_DECL
 (
__¢´štf_chk
)

81 
	$__LDBL_REDIR_DECL
 (
__v¢´štf_chk
)

83 #ià
__USE_FORTIFY_LEVEL
 > 1

84 
	$__LDBL_REDIR_DECL
 (
__årštf_chk
)

85 
	$__LDBL_REDIR_DECL
 (
__´štf_chk
)

86 
	$__LDBL_REDIR_DECL
 (
__vårštf_chk
)

87 
	$__LDBL_REDIR_DECL
 (
__v´štf_chk
)

88 #ifdeà
__USE_GNU


89 
	$__LDBL_REDIR_DECL
 (
__a¥rštf_chk
)

90 
	$__LDBL_REDIR_DECL
 (
__va¥rštf_chk
)

91 
	$__LDBL_REDIR_DECL
 (
__d´štf_chk
)

92 
	$__LDBL_REDIR_DECL
 (
__vd´štf_chk
)

93 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_´štf_chk
)

94 
	$__LDBL_REDIR_DECL
 (
__ob¡ack_v´štf_chk
)

	@/usr/include/bits/stdio.h

20 #iâdeà
_STDIO_H


24 #iâdeà
__ex‹º_šlše


25 
	#__STDIO_INLINE
 
šlše


	)

27 
	#__STDIO_INLINE
 
__ex‹º_šlše


	)

31 #ifdeà
__USE_EXTERN_INLINES


34 #ià!(
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše
)

36 
__STDIO_INLINE
 

37 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

39  
	`vårštf
 (
¡dout
, 
__fmt
, 
__¬g
);

40 
	}
}

44 
__STDIO_INLINE
 

45 
	$g‘ch¬
 ()

47  
	`_IO_g‘c
 (
¡dš
);

48 
	}
}

51 #ifdeà
__USE_MISC


53 
__STDIO_INLINE
 

54 
	$fg‘c_uÆocked
 (
FILE
 *
__å
)

56  
	`_IO_g‘c_uÆocked
 (
__å
);

57 
	}
}

61 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


63 
__STDIO_INLINE
 

64 
	$g‘c_uÆocked
 (
FILE
 *
__å
)

66  
	`_IO_g‘c_uÆocked
 (
__å
);

67 
	}
}

70 
__STDIO_INLINE
 

71 
	$g‘ch¬_uÆocked
 ()

73  
	`_IO_g‘c_uÆocked
 (
¡dš
);

74 
	}
}

79 
__STDIO_INLINE
 

80 
	$putch¬
 (
__c
)

82  
	`_IO_putc
 (
__c
, 
¡dout
);

83 
	}
}

86 #ifdeà
__USE_MISC


88 
__STDIO_INLINE
 

89 
	$åutc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

91  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

92 
	}
}

96 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


98 
__STDIO_INLINE
 

99 
	$putc_uÆocked
 (
__c
, 
FILE
 *
__¡»am
)

101  
	`_IO_putc_uÆocked
 (
__c
, 
__¡»am
);

102 
	}
}

105 
__STDIO_INLINE
 

106 
	$putch¬_uÆocked
 (
__c
)

108  
	`_IO_putc_uÆocked
 (
__c
, 
¡dout
);

109 
	}
}

113 #ifdef 
__USE_GNU


115 
__STDIO_INLINE
 
_IO_ssize_t


116 
	$g‘lše
 (**
__lš•Œ
, 
size_t
 *
__n
, 
FILE
 *
__¡»am
)

118  
	`__g‘d–im
 (
__lš•Œ
, 
__n
, '\n', 
__¡»am
);

119 
	}
}

123 #ifdeà
__USE_MISC


125 
__STDIO_INLINE
 

126 
__NTH
 (
	$ãof_uÆocked
 (
FILE
 *
__¡»am
))

128  
	`_IO_ãof_uÆocked
 (
__¡»am
);

129 
	}
}

132 
__STDIO_INLINE
 

133 
__NTH
 (
	$ã¼Ü_uÆocked
 (
FILE
 *
__¡»am
))

135  
	`_IO_ã¼Ü_uÆocked
 (
__¡»am
);

136 
	}
}

142 #ià
defšed
 
__USE_MISC
 && defšed 
__GNUC__
 && defšed 
__OPTIMIZE__
 \

143 && !
defšed
 
	g__ılu¥lus


145 
	#ä—d_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

146 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

147 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

148 && (
size_t
è(
size
) != 0) \

149 ? ({ *
__±r
 = (*è(
±r
); \

150 
FILE
 *
__¡»am
 = (
¡»am
); \

151 
size_t
 
__út
; \

152 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

153 
__út
 > 0; --__cnt) \

155 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
); \

156 ià(
__c
 =ğ
EOF
) \

158 *
__±r
++ = 
__c
; \

160 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

161 / (
size_t
è(
size
); }) \

162 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

163 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

165 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

166 (è(
n
), (
size_t
) 0) \

167 : 
	`ä—d_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

169 
	#fwr™e_uÆocked
(
±r
, 
size
, 
n
, 
¡»am
) \

170 (
	`__ex‹nsiÚ__
 ((
	`__butš_cÚ¡ªt_p
 (
size
è&& __butš_cÚ¡ªt_°(
n
) \

171 && (
size_t
è(
size
è* (size_tè(
n
) <= 8 \

172 && (
size_t
è(
size
) != 0) \

173 ? ({ cÚ¡ *
__±r
 = (cÚ¡ *è(
±r
); \

174 
FILE
 *
__¡»am
 = (
¡»am
); \

175 
size_t
 
__út
; \

176 
__út
 = (
size_t
è(
size
è* (size_tè(
n
); \

177 
__út
 > 0; --__cnt) \

178 ià(
	`_IO_putc_uÆocked
 (*
__±r
++, 
__¡»am
è=ğ
EOF
) \

180 ((
size_t
è(
size
è* (size_tè(
n
è- 
__út
) \

181 / (
size_t
è(
size
); }) \

182 : (((
	`__butš_cÚ¡ªt_p
 (
size
è&& (
size_t
) (size) == 0) \

183 || (
	`__butš_cÚ¡ªt_p
 (
n
è&& (
size_t
) (n) == 0)) \

185 ? ((è(
±r
), (è(
¡»am
), (è(
size
), \

186 (è(
n
), (
size_t
) 0) \

187 : 
	`fwr™e_uÆocked
 (
±r
, 
size
, 
n
, 
¡»am
))))

	)

191 #undeà
__STDIO_INLINE


	@/usr/include/bits/stdio2.h

20 #iâdeà
_STDIO_H


24 
	$__¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

25 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...è
__THROW
;

26 
	$__v¥rštf_chk
 (*
__»¡riù
 
__s
, 
__æag
, 
size_t
 
__¦’
,

27 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

28 
_G_va_li¡
 
__­
è
__THROW
;

30 #ifdeà
__va_¬g_·ck


31 
__ex‹º_®ways_šlše
 

32 
	`__NTH
 (
	$¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

34  
	`__butš___¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

35 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

36 
	}
}

37 #–ià!
defšed
 
__ılu¥lus


38 
	#¥rštf
(
¡r
, ...) \

39 
	`__butš___¥rštf_chk
 (
¡r
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

40 
__VA_ARGS__
)

	)

43 
__ex‹º_®ways_šlše
 

44 
__NTH
 (
	$v¥rštf
 (*
__»¡riù
 
__s
, 
__cÚ¡
 *__»¡riù 
__fmt
,

45 
_G_va_li¡
 
__­
))

47  
	`__butš___v¥rštf_chk
 (
__s
, 
__USE_FORTIFY_LEVEL
 - 1,

48 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

49 
	}
}

51 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_ISOC99
 || defšed 
__USE_UNIX98


53 
	$__¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

54 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

55 ...è
__THROW
;

56 
	$__v¢´štf_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__n
, 
__æag
,

57 
size_t
 
__¦’
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

58 
_G_va_li¡
 
__­
è
__THROW
;

60 #ifdeà
__va_¬g_·ck


61 
__ex‹º_®ways_šlše
 

62 
	`__NTH
 (
	$¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

63 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

65  
	`__butš___¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

66 
	`__bos
 (
__s
), 
__fmt
, 
	`__va_¬g_·ck
 ());

67 
	}
}

68 #–ià!
defšed
 
__ılu¥lus


69 
	#¢´štf
(
¡r
, 
Ën
, ...) \

70 
	`__butš___¢´štf_chk
 (
¡r
, 
Ën
, 
__USE_FORTIFY_LEVEL
 - 1, 
	`__bos
 (str), \

71 
__VA_ARGS__
)

	)

74 
__ex‹º_®ways_šlše
 

75 
__NTH
 (
	$v¢´štf
 (*
__»¡riù
 
__s
, 
size_t
 
__n
,

76 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

78  
	`__butš___v¢´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

79 
	`__bos
 (
__s
), 
__fmt
, 
__­
);

80 
	}
}

84 #ià
__USE_FORTIFY_LEVEL
 > 1

86 
__årštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

87 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

88 
__´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, ...);

89 
__vårštf_chk
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

90 
__cÚ¡
 *
__»¡riù
 
__fÜm©
, 
_G_va_li¡
 
__­
);

91 
__v´štf_chk
 (
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

92 
_G_va_li¡
 
__­
);

94 #ifdeà
__va_¬g_·ck


95 
__ex‹º_®ways_šlše
 

96 
	$årštf
 (
FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...)

98  
	`__årštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

99 
	`__va_¬g_·ck
 ());

100 
	}
}

102 
__ex‹º_®ways_šlše
 

103 
	$´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

105  
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

106 
	}
}

107 #–ià!
defšed
 
__ılu¥lus


108 
	#´štf
(...) \

109 
	`__´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

110 
	#årštf
(
¡»am
, ...) \

111 
	`__årštf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

114 
__ex‹º_®ways_šlše
 

115 
	$v´štf
 (
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

117 #ifdeà
__USE_EXTERN_INLINES


118  
	`__vårštf_chk
 (
¡dout
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

120  
	`__v´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

122 
	}
}

124 
__ex‹º_®ways_šlše
 

125 
	$vårštf
 (
FILE
 *
__»¡riù
 
__¡»am
,

126 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

128  
	`__vårštf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

129 
	}
}

131 #ifdeà
__USE_GNU


133 
	$__a¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

134 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

135 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 4))è
__wur
;

136 
	$__va¥rštf_chk
 (**
__»¡riù
 
__±r
, 
__æag
,

137 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

138 
__THROW
 
	`__©Œibu‹__
 ((
	$__fÜm©__
 (
__´štf__
, 3, 0))è
__wur
;

139 
	$__d´štf_chk
 (
__fd
, 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fmt
,

140 ...è
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

141 
	$__vd´štf_chk
 (
__fd
, 
__æag
,

142 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__¬g
)

143 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

144 
	$__ob¡ack_´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

145 
__æag
, 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

147 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 4)));

148 
	$__ob¡ack_v´štf_chk
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

149 
__æag
,

150 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

151 
_G_va_li¡
 
__¬gs
)

152 
__THROW
 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__´štf__
, 3, 0)));

154 #ifdeà
__va_¬g_·ck


155 
__ex‹º_®ways_šlše
 

156 
	`__NTH
 (
	$a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
, ...))

158  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

159 
	`__va_¬g_·ck
 ());

160 
	}
}

162 
__ex‹º_®ways_šlše
 

163 
__NTH
 (
	$__a¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

166  
	`__a¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

167 
	`__va_¬g_·ck
 ());

168 
	}
}

170 
__ex‹º_®ways_šlše
 

171 
	$d´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...)

173  
	`__d´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

174 
	`__va_¬g_·ck
 ());

175 
	}
}

177 
__ex‹º_®ways_šlše
 

178 
__NTH
 (
	$ob¡ack_´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

179 
__cÚ¡
 *
__»¡riù
 
__fmt
, ...))

181  
	`__ob¡ack_´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

182 
	`__va_¬g_·ck
 ());

183 
	}
}

184 #–ià!
defšed
 
__ılu¥lus


185 
	#a¥rštf
(
±r
, ...) \

186 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

187 
	#__a¥rštf
(
±r
, ...) \

188 
	`__a¥rštf_chk
 (
±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

189 
	#d´štf
(
fd
, ...) \

190 
	`__d´štf_chk
 (
fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

191 
	#ob¡ack_´štf
(
ob¡ack
, ...) \

192 
	`__ob¡ack_´štf_chk
 (
ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

195 
__ex‹º_®ways_šlše
 

196 
__NTH
 (
	$va¥rštf
 (**
__»¡riù
 
__±r
, 
__cÚ¡
 *__»¡riù 
__fmt
,

197 
_G_va_li¡
 
__­
))

199  
	`__va¥rštf_chk
 (
__±r
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

200 
	}
}

202 
__ex‹º_®ways_šlše
 

203 
	$vd´štf
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
)

205  
	`__vd´štf_chk
 (
__fd
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

206 
	}
}

208 
__ex‹º_®ways_šlše
 

209 
__NTH
 (
	$ob¡ack_v´štf
 (
ob¡ack
 *
__»¡riù
 
__ob¡ack
,

210 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
_G_va_li¡
 
__­
))

212  
	`__ob¡ack_v´štf_chk
 (
__ob¡ack
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

213 
__­
);

214 
	}
}

220 *
	$__g‘s_chk
 (*
__¡r
, 
size_t
è
__wur
;

221 *
	`__REDIRECT
 (
__g‘s_w¬n
, (*
__¡r
), 
g‘s
)

222 
__wur
 
	`__w¬Ç‰r
 ("please use fgets or getline instead, gets can't "

225 
__ex‹º_®ways_šlše
 
__wur
 *

226 
	$g‘s
 (*
__¡r
)

228 ià(
	`__bos
 (
__¡r
è!ğ(
size_t
) -1)

229  
	`__g‘s_chk
 (
__¡r
, 
	`__bos
 (__str));

230  
	`__g‘s_w¬n
 (
__¡r
);

231 
	}
}

233 *
	$__fg‘s_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

234 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

235 *
	`__REDIRECT
 (
__fg‘s_®Ÿs
,

236 (*
__»¡riù
 
__s
, 
__n
,

237 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s
è
__wur
;

238 *
	`__REDIRECT
 (
__fg‘s_chk_w¬n
,

239 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

240 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_chk
)

241 
__wur
 
	`__w¬Ç‰r
 ("fgets called with bigger sizehan†ength "

244 
__ex‹º_®ways_šlše
 
__wur
 *

245 
	$fg‘s
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

247 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

249 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

250  
	`__fg‘s_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

252 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

253  
	`__fg‘s_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

255  
	`__fg‘s_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

256 
	}
}

258 
size_t
 
	$__ä—d_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

259 
size_t
 
__size
, size_ˆ
__n
,

260 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

261 
size_t
 
	`__REDIRECT
 (
__ä—d_®Ÿs
,

262 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

263 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

264 
ä—d
è
__wur
;

265 
size_t
 
	`__REDIRECT
 (
__ä—d_chk_w¬n
,

266 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

267 
size_t
 
__size
, size_ˆ
__n
,

268 
FILE
 *
__»¡riù
 
__¡»am
),

269 
__ä—d_chk
)

270 
__wur
 
	`__w¬Ç‰r
 ("fread called with bigger size *‚membhan†ength "

273 
__ex‹º_®ways_šlše
 
__wur
 
size_t


274 
	$ä—d
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

275 
FILE
 *
__»¡riù
 
__¡»am
)

277 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

279 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

280 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

281 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

282  
	`__ä—d_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

284 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

285  
	`__ä—d_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
, 
__¡»am
);

287  
	`__ä—d_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

288 
	}
}

290 #ifdeà
__USE_GNU


291 *
	$__fg‘s_uÆocked_chk
 (*
__»¡riù
 
__s
, 
size_t
 
__size
,

292 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

293 *
	`__REDIRECT
 (
__fg‘s_uÆocked_®Ÿs
,

294 (*
__»¡riù
 
__s
, 
__n
,

295 
FILE
 *
__»¡riù
 
__¡»am
), 
fg‘s_uÆocked
è
__wur
;

296 *
	`__REDIRECT
 (
__fg‘s_uÆocked_chk_w¬n
,

297 (*
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

298 
FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘s_uÆocked_chk
)

299 
__wur
 
	`__w¬Ç‰r
 ("fgets_unlocked called with bigger sizehan†ength "

302 
__ex‹º_®ways_šlše
 
__wur
 *

303 
	$fg‘s_uÆocked
 (*
__»¡riù
 
__s
, 
__n
, 
FILE
 *__»¡riù 
__¡»am
)

305 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

307 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

308  
	`__fg‘s_uÆocked_chk
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

310 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
))

311  
	`__fg‘s_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__s), 
__n
, 
__¡»am
);

313  
	`__fg‘s_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

314 
	}
}

317 #ifdeà
__USE_MISC


318 #undeà
ä—d_uÆocked


319 
size_t
 
	$__ä—d_uÆocked_chk
 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

320 
size_t
 
__size
, size_ˆ
__n
,

321 
FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

322 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_®Ÿs
,

323 (*
__»¡riù
 
__±r
, 
size_t
 
__size
,

324 
size_t
 
__n
, 
FILE
 *
__»¡riù
 
__¡»am
),

325 
ä—d_uÆocked
è
__wur
;

326 
size_t
 
	`__REDIRECT
 (
__ä—d_uÆocked_chk_w¬n
,

327 (*
__»¡riù
 
__±r
, 
size_t
 
__±¾’
,

328 
size_t
 
__size
, size_ˆ
__n
,

329 
FILE
 *
__»¡riù
 
__¡»am
),

330 
__ä—d_uÆocked_chk
)

331 
__wur
 
	`__w¬Ç‰r
 ("fread_unlocked called with bigger size *‚membhan "

334 
__ex‹º_®ways_šlše
 
__wur
 
size_t


335 
	$ä—d_uÆocked
 (*
__»¡riù
 
__±r
, 
size_t
 
__size
, size_ˆ
__n
,

336 
FILE
 *
__»¡riù
 
__¡»am
)

338 ià(
	`__bos0
 (
__±r
è!ğ(
size_t
) -1)

340 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
)

341 || !
	`__butš_cÚ¡ªt_p
 (
__n
)

342 || (
__size
 | 
__n
è>ğ(((
size_t
) 1) << (8 *  (size_t) / 2)))

343  
	`__ä—d_uÆocked_chk
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

344 
__¡»am
);

346 ià(
__size
 * 
__n
 > 
	`__bos0
 (
__±r
))

347  
	`__ä—d_uÆocked_chk_w¬n
 (
__±r
, 
	`__bos0
 (__±r), 
__size
, 
__n
,

348 
__¡»am
);

351 #ifdeà
__USE_EXTERN_INLINES


352 ià(
	`__butš_cÚ¡ªt_p
 (
__size
)

353 && 
	`__butš_cÚ¡ªt_p
 (
__n
)

354 && (
__size
 | 
__n
è< (((
size_t
) 1) << (8 *  (size_t) / 2))

355 && 
__size
 * 
__n
 <= 8)

357 
size_t
 
__út
 = 
__size
 * 
__n
;

358 *
__ıŒ
 = (*è
__±r
;

359 ià(
__út
 == 0)

362 ; 
__út
 > 0; --__cnt)

364 
__c
 = 
	`_IO_g‘c_uÆocked
 (
__¡»am
);

365 ià(
__c
 =ğ
EOF
)

367 *
__ıŒ
++ = 
__c
;

369  (
__ıŒ
 - (*è
__±r
è/ 
__size
;

372  
	`__ä—d_uÆocked_®Ÿs
 (
__±r
, 
__size
, 
__n
, 
__¡»am
);

373 
	}
}

	@/usr/include/bits/stdio_lim.h

19 #ià!
defšed
 
_STDIO_H
 && !defšed 
__Ãed_FOPEN_MAX
 && !defšed 
__Ãed_IOV_MAX


23 #ifdeà
_STDIO_H


24 
	#L_tm²am
 20

	)

25 
	#TMP_MAX
 238328

	)

26 
	#FILENAME_MAX
 4096

	)

28 #ifdeà
__USE_POSIX


29 
	#L_ù”mid
 9

	)

30 #ià!
defšed
 
__USE_XOPEN2K
 || defšed 
__USE_GNU


31 
	#L_cu£rid
 9

	)

36 #ià
defšed
 
__Ãed_FOPEN_MAX
 || defšed 
_STDIO_H


37 #undeà
FOPEN_MAX


38 
	#FOPEN_MAX
 16

	)

41 #ià
defšed
 
__Ãed_IOV_MAX
 && !defšed 
IOV_MAX


42 
	#IOV_MAX
 1024

	)

	@/usr/include/bits/stdlib-ldbl.h

20 #iâdeà
_STDLIB_H


24 #ifdef 
__USE_ISOC99


25 
__BEGIN_NAMESPACE_C99


26 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd
, 
¡¹od
)

27 
__END_NAMESPACE_C99


30 #ifdeà
__USE_GNU


31 
	$__LDBL_REDIR1_DECL
 (
¡¹Şd_l
, 
¡¹od_l
)

34 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN_EXTENDED


35 #ifdeà
__USE_MISC


36 
	$__LDBL_REDIR1_DECL
 (
qecvt
, 
ecvt
)

37 
	$__LDBL_REDIR1_DECL
 (
qfcvt
, 
fcvt
)

38 
	$__LDBL_REDIR1_DECL
 (
qgcvt
, 
gcvt
)

39 
	$__LDBL_REDIR1_DECL
 (
qecvt_r
, 
ecvt_r
)

40 
	$__LDBL_REDIR1_DECL
 (
qfcvt_r
, 
fcvt_r
)

	@/usr/include/bits/stdlib.h

20 #iâdeà
_STDLIB_H


24 *
	$__»®·th_chk
 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

25 *
__»¡riù
 
__»sŞved
,

26 
size_t
 
__»sŞvedËn
è
__THROW
 
__wur
;

27 *
	`__REDIRECT_NTH
 (
__»®·th_®Ÿs
,

28 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

29 *
__»¡riù
 
__»sŞved
), 
»®·th
è
__wur
;

30 *
	`__REDIRECT_NTH
 (
__»®·th_chk_w¬n
,

31 (
__cÚ¡
 *
__»¡riù
 
__Çme
,

32 *
__»¡riù
 
__»sŞved
,

33 
size_t
 
__»sŞvedËn
), 
__»®·th_chk
è
__wur


34 
	`__w¬Ç‰r
 ("second‡rgument of„ealpath must beƒither NULL or‡t "

37 
__ex‹º_®ways_šlše
 
__wur
 *

38 
	`__NTH
 (
	$»®·th
 (
__cÚ¡
 *
__»¡riù
 
__Çme
, *__»¡riù 
__»sŞved
))

40 ià(
	`__bos
 (
__»sŞved
è!ğ(
size_t
) -1)

42 #ià
defšed
 
_LIBC_LIMITS_H_
 && defšed 
PATH_MAX


43 ià(
	`__bos
 (
__»sŞved
è< 
PATH_MAX
)

44  
	`__»®·th_chk_w¬n
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

46  
	`__»®·th_chk
 (
__Çme
, 
__»sŞved
, 
	`__bos
 (__resolved));

49  
	`__»®·th_®Ÿs
 (
__Çme
, 
__»sŞved
);

50 
	}
}

53 
	$__±¢ame_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

54 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

55 
	`__REDIRECT_NTH
 (
__±¢ame_r_®Ÿs
, (
__fd
, *
__buf
,

56 
size_t
 
__buæ’
), 
±¢ame_r
)

57 
	`__nÚnuÎ
 ((2));

58 
	`__REDIRECT_NTH
 (
__±¢ame_r_chk_w¬n
,

59 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

60 
size_t
 
__Ä—l
), 
__±¢ame_r_chk
)

61 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ptsname_r called with buflen biggerhan "

64 
__ex‹º_®ways_šlše
 

65 
	`__NTH
 (
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

67 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

69 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

70  
	`__±¢ame_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

71 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

72  
	`__±¢ame_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

74  
	`__±¢ame_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

75 
	}
}

78 
	$__wùomb_chk
 (*
__s
, 
wch¬_t
 
__wch¬
, 
size_t
 
__buæ’
)

79 
__THROW
 
__wur
;

80 
	`__REDIRECT_NTH
 (
__wùomb_®Ÿs
, (*
__s
, 
wch¬_t
 
__wch¬
),

81 
wùomb
è
__wur
;

83 
__ex‹º_®ways_šlše
 
__wur
 

84 
	`__NTH
 (
	$wùomb
 (*
__s
, 
wch¬_t
 
__wch¬
))

89 
	#__STDLIB_MB_LEN_MAX
 16

	)

90 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__STDLIB_MB_LEN_MAX


93 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__STDLIB_MB_LEN_MAX
 > __bos (__s))

94  
	`__wùomb_chk
 (
__s
, 
__wch¬
, 
	`__bos
 (__s));

95  
	`__wùomb_®Ÿs
 (
__s
, 
__wch¬
);

96 
	}
}

99 
size_t
 
	$__mb¡owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

100 
__cÚ¡
 *
__»¡riù
 
__¤c
,

101 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

102 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_®Ÿs
,

103 (
wch¬_t
 *
__»¡riù
 
__d¡
,

104 
__cÚ¡
 *
__»¡riù
 
__¤c
,

105 
size_t
 
__Ën
), 
mb¡owcs
);

106 
size_t
 
	`__REDIRECT_NTH
 (
__mb¡owcs_chk_w¬n
,

107 (
wch¬_t
 *
__»¡riù
 
__d¡
,

108 
__cÚ¡
 *
__»¡riù
 
__¤c
,

109 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__mb¡owcs_chk
)

110 
	`__w¬Ç‰r
 ("mbstowcs called with dst buffer smallerhan†en "

113 
__ex‹º_®ways_šlše
 
size_t


114 
	`__NTH
 (
	$mb¡owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 *__»¡riù 
__¤c
,

115 
size_t
 
__Ën
))

117 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

119 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

120  
	`__mb¡owcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
,

121 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

123 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

124  
	`__mb¡owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
,

125 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

127  
	`__mb¡owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

128 
	}
}

131 
size_t
 
	$__wc¡ombs_chk
 (*
__»¡riù
 
__d¡
,

132 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

133 
size_t
 
__Ën
, size_ˆ
__d¡Ën
è
__THROW
;

134 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_®Ÿs
,

135 (*
__»¡riù
 
__d¡
,

136 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

137 
size_t
 
__Ën
), 
wc¡ombs
);

138 
size_t
 
	`__REDIRECT_NTH
 (
__wc¡ombs_chk_w¬n
,

139 (*
__»¡riù
 
__d¡
,

140 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

141 
size_t
 
__Ën
, size_ˆ
__d¡Ën
), 
__wc¡ombs_chk
)

142 
	`__w¬Ç‰r
 ("wcstombs called with dst buffer smallerhan†en");

144 
__ex‹º_®ways_šlše
 
size_t


145 
	`__NTH
 (
	$wc¡ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__¤c
,

146 
size_t
 
__Ën
))

148 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

150 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

151  
	`__wc¡ombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

152 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

153  
	`__wc¡ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
	`__bos
 (__dst));

155  
	`__wc¡ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
);

156 
	}
}

	@/usr/include/bits/sys_errlist.h

20 #iâdeà
_STDIO_H


26 #ifdeà 
__USE_BSD


27 
sys_Ã¼
;

28 
__cÚ¡
 *__cÚ¡ 
sys_”¾i¡
[];

30 #ifdeà 
__USE_GNU


31 
_sys_Ã¼
;

32 
__cÚ¡
 *__cÚ¡ 
_sys_”¾i¡
[];

	@/usr/include/bits/types.h

24 #iâdef 
_BITS_TYPES_H


25 
	#_BITS_TYPES_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/wÜdsize.h
>

31 
	t__u_ch¬
;

32 
	t__u_shÜt
;

33 
	t__u_št
;

34 
	t__u_lÚg
;

37 sigÃd 
	t__št8_t
;

38 
	t__ušt8_t
;

39 sigÃd 
	t__št16_t
;

40 
	t__ušt16_t
;

41 sigÃd 
	t__št32_t
;

42 
	t__ušt32_t
;

43 #ià
__WORDSIZE
 == 64

44 sigÃd 
	t__št64_t
;

45 
	t__ušt64_t
;

46 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


47 
__ex‹nsiÚ__
 sigÃd 
	t__št64_t
;

48 
__ex‹nsiÚ__
 
	t__ušt64_t
;

52 #ià
__WORDSIZE
 == 64

53 
	t__quad_t
;

54 
	t__u_quad_t
;

55 #–ià
defšed
 
__GLIBC_HAVE_LONG_LONG


56 
__ex‹nsiÚ__
 
	t__quad_t
;

57 
__ex‹nsiÚ__
 
	t__u_quad_t
;

61 
	m__v®
[2];

62 } 
	t__quad_t
;

65 
__u_lÚg
 
	m__v®
[2];

66 } 
	t__u_quad_t
;

99 
	#__S16_TYPE
 

	)

100 
	#__U16_TYPE
 

	)

101 
	#__S32_TYPE
 

	)

102 
	#__U32_TYPE
 

	)

103 
	#__SLONGWORD_TYPE
 

	)

104 
	#__ULONGWORD_TYPE
 

	)

105 #ià
__WORDSIZE
 == 32

106 
	#__SQUAD_TYPE
 
__quad_t


	)

107 
	#__UQUAD_TYPE
 
__u_quad_t


	)

108 
	#__SWORD_TYPE
 

	)

109 
	#__UWORD_TYPE
 

	)

110 
	#__SLONG32_TYPE
 

	)

111 
	#__ULONG32_TYPE
 

	)

112 
	#__S64_TYPE
 
__quad_t


	)

113 
	#__U64_TYPE
 
__u_quad_t


	)

116 
	#__STD_TYPE
 
__ex‹nsiÚ__
 

	)

117 #–ià
__WORDSIZE
 == 64

118 
	t__SQUAD_TYPE
 

	)

119 
	t__UQUAD_TYPE
 

	)

120 
	t__SWORD_TYPE
 

	)

121 
	t__UWORD_TYPE
 

	)

122 
	t__SLONG32_TYPE
 

	)

123 
	t__ULONG32_TYPE
 

	)

124 
	t__S64_TYPE
 

	)

125 
	t__U64_TYPE
 

	)

127 
	t__STD_TYPE
 

	)

131 
	~<b™s/ty³sizes.h
>

134 
__STD_TYPE
 
	t__DEV_T_TYPE
 
	t__dev_t
;

135 
__STD_TYPE
 
__UID_T_TYPE
 
	g__uid_t
;

136 
__STD_TYPE
 
__GID_T_TYPE
 
	g__gid_t
;

137 
__STD_TYPE
 
__INO_T_TYPE
 
	g__šo_t
;

138 
__STD_TYPE
 
__INO64_T_TYPE
 
	g__šo64_t
;

139 
__STD_TYPE
 
__MODE_T_TYPE
 
	g__mode_t
;

140 
__STD_TYPE
 
__NLINK_T_TYPE
 
	g__Æšk_t
;

141 
__STD_TYPE
 
__OFF_T_TYPE
 
	g__off_t
;

142 
__STD_TYPE
 
__OFF64_T_TYPE
 
	g__off64_t
;

143 
__STD_TYPE
 
__PID_T_TYPE
 
	g__pid_t
;

144 
__STD_TYPE
 
__FSID_T_TYPE
 
	g__fsid_t
;

145 
__STD_TYPE
 
__CLOCK_T_TYPE
 
	g__şock_t
;

146 
__STD_TYPE
 
__RLIM_T_TYPE
 
	g__¾im_t
;

147 
__STD_TYPE
 
__RLIM64_T_TYPE
 
	g__¾im64_t
;

148 
__STD_TYPE
 
__ID_T_TYPE
 
	g__id_t
;

149 
__STD_TYPE
 
__TIME_T_TYPE
 
	g__time_t
;

150 
__STD_TYPE
 
__USECONDS_T_TYPE
 
	g__u£cÚds_t
;

151 
__STD_TYPE
 
__SUSECONDS_T_TYPE
 
	g__su£cÚds_t
;

153 
__STD_TYPE
 
__DADDR_T_TYPE
 
	g__daddr_t
;

154 
__STD_TYPE
 
__SWBLK_T_TYPE
 
	g__swblk_t
;

155 
__STD_TYPE
 
__KEY_T_TYPE
 
	g__key_t
;

158 
__STD_TYPE
 
__CLOCKID_T_TYPE
 
	g__şockid_t
;

161 
__STD_TYPE
 
__TIMER_T_TYPE
 
	g__tim”_t
;

164 
__STD_TYPE
 
__BLKSIZE_T_TYPE
 
	g__blksize_t
;

169 
__STD_TYPE
 
__BLKCNT_T_TYPE
 
	g__blkút_t
;

170 
__STD_TYPE
 
__BLKCNT64_T_TYPE
 
	g__blkút64_t
;

173 
__STD_TYPE
 
__FSBLKCNT_T_TYPE
 
	g__fsblkút_t
;

174 
__STD_TYPE
 
__FSBLKCNT64_T_TYPE
 
	g__fsblkút64_t
;

177 
__STD_TYPE
 
__FSFILCNT_T_TYPE
 
	g__fsfút_t
;

178 
__STD_TYPE
 
__FSFILCNT64_T_TYPE
 
	g__fsfút64_t
;

180 
__STD_TYPE
 
__SSIZE_T_TYPE
 
	g__ssize_t
;

184 
__off64_t
 
	t__loff_t
;

185 
__quad_t
 *
	t__qaddr_t
;

186 *
	t__ÿddr_t
;

189 
__STD_TYPE
 
__SWORD_TYPE
 
	g__šŒ_t
;

192 
__STD_TYPE
 
__U32_TYPE
 
	g__sockËn_t
;

195 #undeà
__STD_TYPE


	@/usr/include/bits/unistd.h

20 #iâdeà
_UNISTD_H


24 
ssize_t
 
	$__»ad_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

25 
size_t
 
__buæ’
è
__wur
;

26 
ssize_t
 
	`__REDIRECT
 (
__»ad_®Ÿs
, (
__fd
, *
__buf
,

27 
size_t
 
__nby‹s
), 
»ad
è
__wur
;

28 
ssize_t
 
	`__REDIRECT
 (
__»ad_chk_w¬n
,

29 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

30 
size_t
 
__buæ’
), 
__»ad_chk
)

31 
__wur
 
	`__w¬Ç‰r
 ("read called with bigger†engthhan size of "

34 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


35 
	$»ad
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
)

37 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

39 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

40  
	`__»ad_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

42 ià(
__nby‹s
 > 
	`__bos0
 (
__buf
))

43  
	`__»ad_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
	`__bos0
 (__buf));

45  
	`__»ad_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
);

46 
	}
}

48 #ifdeà
__USE_UNIX98


49 
ssize_t
 
	$__´—d_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

50 
__off_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

51 
ssize_t
 
	$__´—d64_chk
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

52 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
è
__wur
;

53 
ssize_t
 
	`__REDIRECT
 (
__´—d_®Ÿs
,

54 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

55 
__off_t
 
__off£t
), 
´—d
è
__wur
;

56 
ssize_t
 
	`__REDIRECT
 (
__´—d64_®Ÿs
,

57 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

58 
__off64_t
 
__off£t
), 
´—d64
è
__wur
;

59 
ssize_t
 
	`__REDIRECT
 (
__´—d_chk_w¬n
,

60 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

61 
__off_t
 
__off£t
, 
size_t
 
__bufsize
), 
__´—d_chk
)

62 
__wur
 
	`__w¬Ç‰r
 ("pread called with bigger†engthhan size of "

64 
ssize_t
 
	`__REDIRECT
 (
__´—d64_chk_w¬n
,

65 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
,

66 
__off64_t
 
__off£t
, 
size_t
 
__bufsize
),

67 
__´—d64_chk
)

68 
__wur
 
	`__w¬Ç‰r
 ("pread64 called with bigger†engthhan size of "

71 #iâdeà
__USE_FILE_OFFSET64


72 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


73 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off_t
 
__off£t
)

75 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

77 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

78  
	`__´—d_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

80 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

81  
	`__´—d_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

82 
	`__bos0
 (
__buf
));

84  
	`__´—d_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

85 
	}
}

87 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


88 
	$´—d
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

90 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

92 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

93  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

95 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

96  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

97 
	`__bos0
 (
__buf
));

100  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

101 
	}
}

104 #ifdeà
__USE_LARGEFILE64


105 
__ex‹º_®ways_šlše
 
__wur
 
ssize_t


106 
	$´—d64
 (
__fd
, *
__buf
, 
size_t
 
__nby‹s
, 
__off64_t
 
__off£t
)

108 ià(
	`__bos0
 (
__buf
è!ğ(
size_t
) -1)

110 ià(!
	`__butš_cÚ¡ªt_p
 (
__nby‹s
))

111  
	`__´—d64_chk
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
, 
	`__bos0
 (__buf));

113 iàĞ
__nby‹s
 > 
	`__bos0
 (
__buf
))

114  
	`__´—d64_chk_w¬n
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
,

115 
	`__bos0
 (
__buf
));

118  
	`__´—d64_®Ÿs
 (
__fd
, 
__buf
, 
__nby‹s
, 
__off£t
);

119 
	}
}

123 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED
 || defšed 
__USE_XOPEN2K


124 
ssize_t
 
	$__»adlšk_chk
 (
__cÚ¡
 *
__»¡riù
 
__·th
,

125 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

126 
size_t
 
__buæ’
)

127 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

128 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_®Ÿs
,

129 (
__cÚ¡
 *
__»¡riù
 
__·th
,

130 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
), 
»adlšk
)

131 
	`__nÚnuÎ
 ((1, 2)è
__wur
;

132 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk_chk_w¬n
,

133 (
__cÚ¡
 *
__»¡riù
 
__·th
,

134 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

135 
size_t
 
__buæ’
), 
__»adlšk_chk
)

136 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
	`__w¬Ç‰r
 ("readlink called with bigger†ength "

139 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1, 2)è
__wur
 
ssize_t


140 
	`__NTH
 (
	$»adlšk
 (
__cÚ¡
 *
__»¡riù
 
__·th
, *__»¡riù 
__buf
,

141 
size_t
 
__Ën
))

143 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

145 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

146  
	`__»adlšk_chk
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

148 iàĞ
__Ën
 > 
	`__bos
 (
__buf
))

149  
	`__»adlšk_chk_w¬n
 (
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

151  
	`__»adlšk_®Ÿs
 (
__·th
, 
__buf
, 
__Ën
);

152 
	}
}

155 #ifdeà
__USE_ATFILE


156 
ssize_t
 
	$__»adlšk©_chk
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

157 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

158 
size_t
 
__buæ’
)

159 
__THROW
 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

160 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_®Ÿs
,

161 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

162 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
),

163 
»adlšk©
)

164 
	`__nÚnuÎ
 ((2, 3)è
__wur
;

165 
ssize_t
 
	`__REDIRECT_NTH
 (
__»adlšk©_chk_w¬n
,

166 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

167 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
,

168 
size_t
 
__buæ’
), 
__»adlšk©_chk
)

169 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
	`__w¬Ç‰r
 ("readlinkat called with bigger "

173 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((2, 3)è
__wur
 
ssize_t


174 
	`__NTH
 (
	$»adlšk©
 (
__fd
, 
__cÚ¡
 *
__»¡riù
 
__·th
,

175 *
__»¡riù
 
__buf
, 
size_t
 
__Ën
))

177 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

179 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

180  
	`__»adlšk©_chk
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

182 ià(
__Ën
 > 
	`__bos
 (
__buf
))

183  
	`__»adlšk©_chk_w¬n
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
,

184 
	`__bos
 (
__buf
));

186  
	`__»adlšk©_®Ÿs
 (
__fd
, 
__·th
, 
__buf
, 
__Ën
);

187 
	}
}

190 *
	$__g‘cwd_chk
 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
)

191 
__THROW
 
__wur
;

192 *
	`__REDIRECT_NTH
 (
__g‘cwd_®Ÿs
,

193 (*
__buf
, 
size_t
 
__size
), 
g‘cwd
è
__wur
;

194 *
	`__REDIRECT_NTH
 (
__g‘cwd_chk_w¬n
,

195 (*
__buf
, 
size_t
 
__size
, size_ˆ
__buæ’
),

196 
__g‘cwd_chk
)

197 
__wur
 
	`__w¬Ç‰r
 ("getcwd caller with bigger†engthhan size of "

200 
__ex‹º_®ways_šlše
 
__wur
 *

201 
	`__NTH
 (
	$g‘cwd
 (*
__buf
, 
size_t
 
__size
))

203 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

205 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
))

206  
	`__g‘cwd_chk
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

208 ià(
__size
 > 
	`__bos
 (
__buf
))

209  
	`__g‘cwd_chk_w¬n
 (
__buf
, 
__size
, 
	`__bos
 (__buf));

211  
	`__g‘cwd_®Ÿs
 (
__buf
, 
__size
);

212 
	}
}

214 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


215 *
	$__g‘wd_chk
 (*
__buf
, 
size_t
 
buæ’
)

216 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

217 *
	`__REDIRECT_NTH
 (
__g‘wd_w¬n
, (*
__buf
), 
g‘wd
)

218 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("please use getcwd instead,‡s getwd "

221 
__ex‹º_®ways_šlše
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
 
__wur
 *

222 
	`__NTH
 (
	$g‘wd
 (*
__buf
))

224 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

225  
	`__g‘wd_chk
 (
__buf
, 
	`__bos
 (__buf));

226  
	`__g‘wd_w¬n
 (
__buf
);

227 
	}
}

230 
size_t
 
	$__cÚf¡r_chk
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

231 
size_t
 
__buæ’
è
__THROW
;

232 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_®Ÿs
, (
__Çme
, *
__buf
,

233 
size_t
 
__Ën
), 
cÚf¡r
);

234 
size_t
 
	`__REDIRECT_NTH
 (
__cÚf¡r_chk_w¬n
,

235 (
__Çme
, *
__buf
, 
size_t
 
__Ën
,

236 
size_t
 
__buæ’
), 
__cÚf¡r_chk
)

237 
	`__w¬Ç‰r
 ("confstr called with bigger†engthhan size of destination "

240 
__ex‹º_®ways_šlše
 
size_t


241 
	`__NTH
 (
	$cÚf¡r
 (
__Çme
, *
__buf
, 
size_t
 
__Ën
))

243 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

245 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

246  
	`__cÚf¡r_chk
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

248 ià(
	`__bos
 (
__buf
è< 
__Ën
)

249  
	`__cÚf¡r_chk_w¬n
 (
__Çme
, 
__buf
, 
__Ën
, 
	`__bos
 (__buf));

251  
	`__cÚf¡r_®Ÿs
 (
__Çme
, 
__buf
, 
__Ën
);

252 
	}
}

255 
	$__g‘groups_chk
 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
)

256 
__THROW
 
__wur
;

257 
	`__REDIRECT_NTH
 (
__g‘groups_®Ÿs
, (
__size
, 
__gid_t
 
__li¡
[]),

258 
g‘groups
è
__wur
;

259 
	`__REDIRECT_NTH
 (
__g‘groups_chk_w¬n
,

260 (
__size
, 
__gid_t
 
__li¡
[], 
size_t
 
__li¡Ën
),

261 
__g‘groups_chk
)

262 
__wur
 
	`__w¬Ç‰r
 ("getgroups called with bigger group counthan what "

265 
__ex‹º_®ways_šlše
 

266 
	`__NTH
 (
	$g‘groups
 (
__size
, 
__gid_t
 
__li¡
[]))

268 ià(
	`__bos
 (
__li¡
è!ğ(
size_t
) -1)

270 ià(!
	`__butš_cÚ¡ªt_p
 (
__size
) || __size < 0)

271  
	`__g‘groups_chk
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

273 ià(
__size
 *  (
__gid_t
è> 
	`__bos
 (
__li¡
))

274  
	`__g‘groups_chk_w¬n
 (
__size
, 
__li¡
, 
	`__bos
 (__list));

276  
	`__g‘groups_®Ÿs
 (
__size
, 
__li¡
);

277 
	}
}

280 
	$__‰yÇme_r_chk
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

281 
size_t
 
__Ä—l
è
__THROW
 
	`__nÚnuÎ
 ((2));

282 
	`__REDIRECT_NTH
 (
__‰yÇme_r_®Ÿs
, (
__fd
, *
__buf
,

283 
size_t
 
__buæ’
), 
‰yÇme_r
)

284 
	`__nÚnuÎ
 ((2));

285 
	`__REDIRECT_NTH
 (
__‰yÇme_r_chk_w¬n
,

286 (
__fd
, *
__buf
, 
size_t
 
__buæ’
,

287 
size_t
 
__Ä—l
), 
__‰yÇme_r_chk
)

288 
	`__nÚnuÎ
 ((2)è
	`__w¬Ç‰r
 ("ttyname_r called with bigger buflenhan "

291 
__ex‹º_®ways_šlše
 

292 
	`__NTH
 (
	$‰yÇme_r
 (
__fd
, *
__buf
, 
size_t
 
__buæ’
))

294 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

296 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

297  
	`__‰yÇme_r_chk
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

299 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

300  
	`__‰yÇme_r_chk_w¬n
 (
__fd
, 
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

302  
	`__‰yÇme_r_®Ÿs
 (
__fd
, 
__buf
, 
__buæ’
);

303 
	}
}

306 #ià
defšed
 
__USE_REENTRANT
 || defšed 
__USE_POSIX199506


307 
	$__g‘logš_r_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

308 
	`__nÚnuÎ
 ((1));

309 
	`__REDIRECT
 (
__g‘logš_r_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

310 
g‘logš_r
è
	`__nÚnuÎ
 ((1));

311 
	`__REDIRECT
 (
__g‘logš_r_chk_w¬n
,

312 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

313 
__g‘logš_r_chk
)

314 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("getlogin_r called with bigger buflenhan "

317 
__ex‹º_®ways_šlše
 

318 
	$g‘logš_r
 (*
__buf
, 
size_t
 
__buæ’
)

320 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

322 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

323  
	`__g‘logš_r_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

325 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

326  
	`__g‘logš_r_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

328  
	`__g‘logš_r_®Ÿs
 (
__buf
, 
__buæ’
);

329 
	}
}

333 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_UNIX98


334 
	$__g‘ho¡Çme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

335 
__THROW
 
	`__nÚnuÎ
 ((1));

336 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_®Ÿs
, (*
__buf
, 
size_t
 
__buæ’
),

337 
g‘ho¡Çme
è
	`__nÚnuÎ
 ((1));

338 
	`__REDIRECT_NTH
 (
__g‘ho¡Çme_chk_w¬n
,

339 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

340 
__g‘ho¡Çme_chk
)

341 
	`__nÚnuÎ
 ((1)è
	`__w¬Ç‰r
 ("gethostname called with bigger buflenhan "

344 
__ex‹º_®ways_šlše
 

345 
	`__NTH
 (
	$g‘ho¡Çme
 (*
__buf
, 
size_t
 
__buæ’
))

347 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

349 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

350  
	`__g‘ho¡Çme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

352 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

353  
	`__g‘ho¡Çme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

355  
	`__g‘ho¡Çme_®Ÿs
 (
__buf
, 
__buæ’
);

356 
	}
}

360 #ià
defšed
 
__USE_BSD
 || (defšed 
__USE_XOPEN
 && !defšed 
__USE_UNIX98
)

361 
	$__g‘domašÇme_chk
 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
)

362 
__THROW
 
	`__nÚnuÎ
 ((1)è
__wur
;

363 
	`__REDIRECT_NTH
 (
__g‘domašÇme_®Ÿs
, (*
__buf
,

364 
size_t
 
__buæ’
),

365 
g‘domašÇme
è
	`__nÚnuÎ
 ((1)è
__wur
;

366 
	`__REDIRECT_NTH
 (
__g‘domašÇme_chk_w¬n
,

367 (*
__buf
, 
size_t
 
__buæ’
, size_ˆ
__Ä—l
),

368 
__g‘domašÇme_chk
)

369 
	`__nÚnuÎ
 ((1)è
__wur
 
	`__w¬Ç‰r
 ("getdomainname called with bigger "

373 
__ex‹º_®ways_šlše
 

374 
	`__NTH
 (
	$g‘domašÇme
 (*
__buf
, 
size_t
 
__buæ’
))

376 ià(
	`__bos
 (
__buf
è!ğ(
size_t
) -1)

378 ià(!
	`__butš_cÚ¡ªt_p
 (
__buæ’
))

379  
	`__g‘domašÇme_chk
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

381 ià(
__buæ’
 > 
	`__bos
 (
__buf
))

382  
	`__g‘domašÇme_chk_w¬n
 (
__buf
, 
__buæ’
, 
	`__bos
 (__buf));

384  
	`__g‘domašÇme_®Ÿs
 (
__buf
, 
__buæ’
);

385 
	}
}

	@/usr/include/bits/waitflags.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


26 
	#WNOHANG
 1

	)

27 
	#WUNTRACED
 2

	)

30 
	#WSTOPPED
 2

	)

31 
	#WEXITED
 4

	)

32 
	#WCONTINUED
 8

	)

33 
	#WNOWAIT
 0x01000000

	)

35 
	#__WNOTHREAD
 0x20000000

	)

37 
	#__WALL
 0x40000000

	)

38 
	#__WCLONE
 0x80000000

	)

	@/usr/include/bits/waitstatus.h

20 #ià!
defšed
 
_SYS_WAIT_H
 && !defšed 
_STDLIB_H


29 
	#__WEXITSTATUS
(
¡©us
è(((¡©usè& 0xff00è>> 8)

	)

32 
	#__WTERMSIG
(
¡©us
è((¡©usè& 0x7f)

	)

35 
	#__WSTOPSIG
(
¡©us
è
	`__WEXITSTATUS
(¡©us)

	)

38 
	#__WIFEXITED
(
¡©us
è(
	`__WTERMSIG
(¡©usè=ğ0)

	)

41 
	#__WIFSIGNALED
(
¡©us
) \

42 (((sigÃd è(((
¡©us
è& 0x7fè+ 1è>> 1è> 0)

	)

45 
	#__WIFSTOPPED
(
¡©us
è(((¡©usè& 0xffè=ğ0x7f)

	)

49 #ifdeà
WCONTINUED


50 
	#__WIFCONTINUED
(
¡©us
è((¡©usè=ğ
__W_CONTINUED
)

	)

54 
	#__WCOREDUMP
(
¡©us
è((¡©usè& 
__WCOREFLAG
)

	)

57 
	#__W_EXITCODE
(
»t
, 
sig
è(Ô‘è<< 8 | (sig))

	)

58 
	#__W_STOPCODE
(
sig
è((sigè<< 8 | 0x7f)

	)

59 
	#__W_CONTINUED
 0xffff

	)

60 
	#__WCOREFLAG
 0x80

	)

63 #ifdef 
__USE_BSD


65 
	~<’dŸn.h
>

67 
	uwa™


69 
	mw_¡©us
;

72 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


73 
	m__w_‹rmsig
:7;

74 
	m__w_cÜedump
:1;

75 
	m__w_»tcode
:8;

78 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


80 
	m__w_»tcode
:8;

81 
	m__w_cÜedump
:1;

82 
	m__w_‹rmsig
:7;

84 } 
	m__wa™_‹rmš©ed
;

87 #if 
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


88 
	m__w_¡İv®
:8;

89 
	m__w_¡İsig
:8;

92 #if 
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


94 
	m__w_¡İsig
:8;

95 
	m__w_¡İv®
:8;

97 } 
	m__wa™_¡İ³d
;

100 
	#w_‹rmsig
 
__wa™_‹rmš©ed
.
__w_‹rmsig


	)

101 
	#w_cÜedump
 
__wa™_‹rmš©ed
.
__w_cÜedump


	)

102 
	#w_»tcode
 
__wa™_‹rmš©ed
.
__w_»tcode


	)

103 
	#w_¡İsig
 
__wa™_¡İ³d
.
__w_¡İsig


	)

104 
	#w_¡İv®
 
__wa™_¡İ³d
.
__w_¡İv®


	)

	@/usr/include/bits/wchar.h

20 #iâdeà
_BITS_WCHAR_H


21 
	#_BITS_WCHAR_H
 1

	)

24 #ifdeà
__WCHAR_MAX__


25 
	#__WCHAR_MAX
 
__WCHAR_MAX__


	)

27 
	#__WCHAR_MAX
 (2147483647)

	)

32 #ifdeà
__WCHAR_UNSIGNED__


33 
	#__WCHAR_MIN
 
L
'\0'

	)

37 #–ià
L
'\0' - 1 > 0

38 
	#__WCHAR_MIN
 
L
'\0'

	)

40 
	#__WCHAR_MIN
 (-
__WCHAR_MAX
 - 1)

	)

	@/usr/include/bits/wordsize.h

3 #ià
defšed
 
__x86_64__


4 
	#__WORDSIZE
 64

	)

5 
	#__WORDSIZE_COMPAT32
 1

	)

7 
	#__WORDSIZE
 32

	)

	@/usr/include/endian.h

19 #iâdef 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<ã©u»s.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<b™s/’dŸn.h
>

41 #iâdeà
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èLO, 
	)
HI

54 #–ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
èHI, 
	)
LO

59 #ifdeà
__USE_BSD


61 
	~<b™s/by‹sw­.h
>

63 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


64 
	#htobe16
(
x
è
	`__bsw­_16
 (x)

	)

65 
	#htŞe16
(
x
è(x)

	)

66 
	#be16toh
(
x
è
	`__bsw­_16
 (x)

	)

67 
	#Ë16toh
(
x
è(x)

	)

69 
	#htobe32
(
x
è
	`__bsw­_32
 (x)

	)

70 
	#htŞe32
(
x
è(x)

	)

71 
	#be32toh
(
x
è
	`__bsw­_32
 (x)

	)

72 
	#Ë32toh
(
x
è(x)

	)

74 
	#htobe64
(
x
è
	`__bsw­_64
 (x)

	)

75 
	#htŞe64
(
x
è(x)

	)

76 
	#be64toh
(
x
è
	`__bsw­_64
 (x)

	)

77 
	#Ë64toh
(
x
è(x)

	)

79 
	#htobe16
(
x
è(x)

	)

80 
	#htŞe16
(
x
è
	`__bsw­_16
 (x)

	)

81 
	#be16toh
(
x
è(x)

	)

82 
	#Ë16toh
(
x
è
	`__bsw­_16
 (x)

	)

84 
	#htobe32
(
x
è(x)

	)

85 
	#htŞe32
(
x
è
	`__bsw­_32
 (x)

	)

86 
	#be32toh
(
x
è(x)

	)

87 
	#Ë32toh
(
x
è
	`__bsw­_32
 (x)

	)

89 
	#htobe64
(
x
è(x)

	)

90 
	#htŞe64
(
x
è
	`__bsw­_64
 (x)

	)

91 
	#be64toh
(
x
è(x)

	)

92 
	#Ë64toh
(
x
è
	`__bsw­_64
 (x)

	)

	@/usr/include/features.h

19 #iâdef 
_FEATURES_H


20 
	#_FEATURES_H
 1

	)

95 #undeà
__USE_ISOC99


96 #undeà
__USE_ISOC95


97 #undeà
__USE_POSIX


98 #undeà
__USE_POSIX2


99 #undeà
__USE_POSIX199309


100 #undeà
__USE_POSIX199506


101 #undeà
__USE_XOPEN


102 #undeà
__USE_XOPEN_EXTENDED


103 #undeà
__USE_UNIX98


104 #undeà
__USE_XOPEN2K


105 #undeà
__USE_XOPEN2K8


106 #undeà
__USE_LARGEFILE


107 #undeà
__USE_LARGEFILE64


108 #undeà
__USE_FILE_OFFSET64


109 #undeà
__USE_BSD


110 #undeà
__USE_SVID


111 #undeà
__USE_MISC


112 #undeà
__USE_ATFILE


113 #undeà
__USE_GNU


114 #undeà
__USE_REENTRANT


115 #undeà
__USE_FORTIFY_LEVEL


116 #undeà
__FAVOR_BSD


117 #undeà
__KERNEL_STRICT_NAMES


121 #iâdeà
_LOOSE_KERNEL_NAMES


122 
	#__KERNEL_STRICT_NAMES


	)

126 
	#__USE_ANSI
 1

	)

135 #ià
defšed
 
__GNUC__
 && defšed 
__GNUC_MINOR__


136 
	#__GNUC_PREREQ
(
maj
, 
mš
) \

137 ((
__GNUC__
 << 16è+ 
__GNUC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

139 
	#__GNUC_PREREQ
(
maj
, 
mš
è0

	)

144 #ià
defšed
 
_BSD_SOURCE
 && \

145 !(
defšed
 
	g_POSIX_SOURCE
 || defšed 
	g_POSIX_C_SOURCE
 || \

146 
defšed
 
	g_XOPEN_SOURCE
 || defšed 
	g_XOPEN_SOURCE_EXTENDED
 || \

147 
defšed
 
	g_GNU_SOURCE
 || defšed 
	g_SVID_SOURCE
)

148 
	#__FAVOR_BSD
 1

	)

152 #ifdeà
_GNU_SOURCE


153 #undeà
_ISOC99_SOURCE


154 
	#_ISOC99_SOURCE
 1

	)

155 #undeà
_POSIX_SOURCE


156 
	#_POSIX_SOURCE
 1

	)

157 #undeà
_POSIX_C_SOURCE


158 
	#_POSIX_C_SOURCE
 200809L

	)

159 #undeà
_XOPEN_SOURCE


160 
	#_XOPEN_SOURCE
 700

	)

161 #undeà
_XOPEN_SOURCE_EXTENDED


162 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

163 #undeà
_LARGEFILE64_SOURCE


164 
	#_LARGEFILE64_SOURCE
 1

	)

165 #undeà
_BSD_SOURCE


166 
	#_BSD_SOURCE
 1

	)

167 #undeà
_SVID_SOURCE


168 
	#_SVID_SOURCE
 1

	)

169 #undeà
_ATFILE_SOURCE


170 
	#_ATFILE_SOURCE
 1

	)

175 #ià(!
defšed
 
__STRICT_ANSI__
 && !defšed 
_ISOC99_SOURCE
 && \

176 !
defšed
 
	g_POSIX_SOURCE
 && !defšed 
	g_POSIX_C_SOURCE
 && \

177 !
defšed
 
	g_XOPEN_SOURCE
 && !defšed 
	g_XOPEN_SOURCE_EXTENDED
 && \

178 !
defšed
 
	g_BSD_SOURCE
 && !defšed 
	g_SVID_SOURCE
)

179 
	#_BSD_SOURCE
 1

	)

180 
	#_SVID_SOURCE
 1

	)

187 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

188 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

189 
	#__USE_ISOC99
 1

	)

193 #ià(
defšed
 
_ISOC99_SOURCE
 || defšed 
_ISOC9X_SOURCE
 \

194 || (
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

195 
	#__USE_ISOC95
 1

	)

200 #ià((!
defšed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

201 !
defšed
 
_POSIX_SOURCE
 && !defšed 
_POSIX_C_SOURCE
)

202 
	#_POSIX_SOURCE
 1

	)

203 #ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

204 
	#_POSIX_C_SOURCE
 2

	)

205 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

206 
	#_POSIX_C_SOURCE
 199506L

	)

207 #–ià
defšed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

208 
	#_POSIX_C_SOURCE
 200112L

	)

210 
	#_POSIX_C_SOURCE
 200809L

	)

212 
	#__USE_POSIX_IMPLICITLY
 1

	)

215 #ià
defšed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >ğ1 || defšed 
_XOPEN_SOURCE


216 
	#__USE_POSIX
 1

	)

219 #ià
defšed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >ğ2 || defšed 
_XOPEN_SOURCE


220 
	#__USE_POSIX2
 1

	)

223 #ià(
_POSIX_C_SOURCE
 - 0) >= 199309L

224 
	#__USE_POSIX199309
 1

	)

227 #ià(
_POSIX_C_SOURCE
 - 0) >= 199506L

228 
	#__USE_POSIX199506
 1

	)

231 #ià(
_POSIX_C_SOURCE
 - 0) >= 200112L

232 
	#__USE_XOPEN2K
 1

	)

233 #undeà
__USE_ISOC99


234 
	#__USE_ISOC99
 1

	)

237 #ià(
_POSIX_C_SOURCE
 - 0) >= 200809L

238 
	#__USE_XOPEN2K8
 1

	)

239 #undeà
_ATFILE_SOURCE


240 
	#_ATFILE_SOURCE
 1

	)

243 #ifdef 
_XOPEN_SOURCE


244 
	#__USE_XOPEN
 1

	)

245 #ià(
_XOPEN_SOURCE
 - 0) >= 500

246 
	#__USE_XOPEN_EXTENDED
 1

	)

247 
	#__USE_UNIX98
 1

	)

248 #undeà
_LARGEFILE_SOURCE


249 
	#_LARGEFILE_SOURCE
 1

	)

250 #ià(
_XOPEN_SOURCE
 - 0) >= 600

251 #ià(
_XOPEN_SOURCE
 - 0) >= 700

252 
	#__USE_XOPEN2K8
 1

	)

254 
	#__USE_XOPEN2K
 1

	)

255 #undeà
__USE_ISOC99


256 
	#__USE_ISOC99
 1

	)

259 #ifdeà
_XOPEN_SOURCE_EXTENDED


260 
	#__USE_XOPEN_EXTENDED
 1

	)

265 #ifdeà
_LARGEFILE_SOURCE


266 
	#__USE_LARGEFILE
 1

	)

269 #ifdeà
_LARGEFILE64_SOURCE


270 
	#__USE_LARGEFILE64
 1

	)

273 #ià
defšed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

274 
	#__USE_FILE_OFFSET64
 1

	)

277 #ià
defšed
 
_BSD_SOURCE
 || defšed 
_SVID_SOURCE


278 
	#__USE_MISC
 1

	)

281 #ifdef 
_BSD_SOURCE


282 
	#__USE_BSD
 1

	)

285 #ifdef 
_SVID_SOURCE


286 
	#__USE_SVID
 1

	)

289 #ifdef 
_ATFILE_SOURCE


290 
	#__USE_ATFILE
 1

	)

293 #ifdef 
_GNU_SOURCE


294 
	#__USE_GNU
 1

	)

297 #ià
defšed
 
_REENTRANT
 || defšed 
_THREAD_SAFE


298 
	#__USE_REENTRANT
 1

	)

301 #ià
defšed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

302 && 
__GNUC_PREREQ
 (4, 1è&& 
defšed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

303 #ià
_FORTIFY_SOURCE
 > 1

304 
	#__USE_FORTIFY_LEVEL
 2

	)

306 
	#__USE_FORTIFY_LEVEL
 1

	)

309 
	#__USE_FORTIFY_LEVEL
 0

	)

313 
	~<b™s/´edefs.h
>

316 
	#__STDC_ISO_10646__
 200009L

	)

324 #undeà
__GNU_LIBRARY__


325 
	#__GNU_LIBRARY__
 6

	)

329 
	#__GLIBC__
 2

	)

330 
	#__GLIBC_MINOR__
 11

	)

332 
	#__GLIBC_PREREQ
(
maj
, 
mš
) \

333 ((
__GLIBC__
 << 16è+ 
__GLIBC_MINOR__
 >ğ((
maj
è<< 16è+ (
mš
))

	)

336 #ià
defšed
 
__GNUC__
 \

337 || (
defšed
 
	g__PGI
 && defšed 
	g__i386__
 ) \

338 || (
defšed
 
	g__INTEL_COMPILER
 && (defšed 
	g__i386__
 || defšed 
	g__Ÿ64__
)) \

339 || (
defšed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

340 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

344 #iâdeà
__ASSEMBLER__


345 #iâdeà
_SYS_CDEFS_H


346 
	~<sys/cdefs.h
>

351 #ià
defšed
 
__USE_FILE_OFFSET64
 && !defšed 
__REDIRECT


352 
	#__USE_LARGEFILE
 1

	)

353 
	#__USE_LARGEFILE64
 1

	)

359 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

360 && !
defšed
 
	g__OPTIMIZE_SIZE__
 && !defšed 
	g__NO_INLINE__
 \

361 && 
defšed
 
	g__ex‹º_šlše


362 
	#__USE_EXTERN_INLINES
 1

	)

367 #ià
__GNUC_PREREQ
 (2, 7è&& 
defšed
 
__OPTIMIZE__
 \

368 && (
defšed
 
	g_LIBC
 || !defšed 
	g__OPTIMIZE_SIZE__
è&& !defšed 
	g__NO_INLINE__
 \

369 && 
defšed
 
	g__ex‹º_šlše


370 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

378 
	~<gnu/¡ubs.h
>

	@/usr/include/getopt.h

21 #iâdeà
_GETOPT_H


23 #iâdeà
__Ãed_g‘İt


24 
	#_GETOPT_H
 1

	)

34 #ià!
defšed
 
__GNU_LIBRARY__


35 
	~<ùy³.h
>

38 #iâdeà
__THROW


39 #iâdeà
__GNUC_PREREQ


40 
	#__GNUC_PREREQ
(
maj
, 
mš
è(0)

	)

42 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

43 
	#__THROW
 
	`throw
 ()

	)

45 
	#__THROW


	)

49 #ifdef 
__ılu¥lus


59 *
İrg
;

73 
İtšd
;

78 
İ‹¼
;

82 
İtİt
;

84 #iâdeà
__Ãed_g‘İt


106 
	sİtiÚ


108 cÚ¡ *
	gÇme
;

111 
	ghas_¬g
;

112 *
	gæag
;

113 
	gv®
;

118 
	#no_¬gum’t
 0

	)

119 
	#»quœed_¬gum’t
 1

	)

120 
	#İtiÚ®_¬gum’t
 2

	)

148 #ifdeà
__GNU_LIBRARY__


152 
g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
, cÚ¡ *
__shÜtİts
)

153 
__THROW
;

155 #ià
defšed
 
__Ãed_g‘İt
 && defšed 
__USE_POSIX2
 \

156 && !
defšed
 
	g__USE_POSIX_IMPLICITLY
 && !defšed 
	g__USE_GNU


160 #ifdeà
__REDIRECT


161 
__REDIRECT_NTH
 (
g‘İt
, (
___¬gc
, *cÚ¡ *
___¬gv
,

162 cÚ¡ *
__shÜtİts
),

163 
__posix_g‘İt
);

165 
__posix_g‘İt
 (
___¬gc
, *cÚ¡ *
___¬gv
,

166 cÚ¡ *
__shÜtİts
è
__THROW
;

167 
	#g‘İt
 
__posix_g‘İt


	)

171 
g‘İt
 ();

174 #iâdeà
__Ãed_g‘İt


175 
g‘İt_lÚg
 (
___¬gc
, *cÚ¡ *
___¬gv
,

176 cÚ¡ *
__shÜtİts
,

177 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

178 
__THROW
;

179 
g‘İt_lÚg_Úly
 (
___¬gc
, *cÚ¡ *
___¬gv
,

180 cÚ¡ *
__shÜtİts
,

181 cÚ¡ 
İtiÚ
 *
__lÚgİts
, *
__lÚgšd
)

182 
__THROW
;

186 #ifdef 
__ılu¥lus


191 #undeà
__Ãed_g‘İt


	@/usr/include/libio.h

29 #iâdeà
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_cÚfig.h
>

34 
	#_IO_pos_t
 
_G_åos_t


	)

35 
	#_IO_åos_t
 
_G_åos_t


	)

36 
	#_IO_åos64_t
 
_G_åos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_icÚv_t
 
_G_icÚv_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li¡
 
_G_va_li¡


	)

48 
	#_IO_wšt_t
 
_G_wšt_t


	)

50 #ifdeà
_G_NEED_STDARG_H


52 
	#__Ãed___va_li¡


	)

53 
	~<¡d¬g.h
>

54 #ifdeà
__GNUC_VA_LIST


55 #undeà
_IO_va_li¡


56 
	#_IO_va_li¡
 
__gnuc_va_li¡


	)

60 #iâdeà
__P


61 #ià
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifdeà
__STDC__


65 
	#__P
(
p
è
	)
p

66 
	#__PMT
(
p
è
	)
p

68 
	#__P
(
p
è()

	)

69 
	#__PMT
(
p
è()

	)

75 #iâdeà
_PARAMS


76 
	#_PARAMS
(
´Ùos
è
	`__P
ÕrÙos)

	)

79 #iâdeà
__STDC__


81 cÚ¡

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #iâdeà
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #iâdeà
EOF


90 
	#EOF
 (-1)

	)

92 #iâdeà
NULL


93 #ià
defšed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =ğ2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuÎ
)

	)

97 #ià!
defšed
(
__ılu¥lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifdeà
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifdeà
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

151 
	#_IO_SKIPWS
 01

	)

152 
	#_IO_LEFT
 02

	)

153 
	#_IO_RIGHT
 04

	)

154 
	#_IO_INTERNAL
 010

	)

155 
	#_IO_DEC
 020

	)

156 
	#_IO_OCT
 040

	)

157 
	#_IO_HEX
 0100

	)

158 
	#_IO_SHOWBASE
 0200

	)

159 
	#_IO_SHOWPOINT
 0400

	)

160 
	#_IO_UPPERCASE
 01000

	)

161 
	#_IO_SHOWPOS
 02000

	)

162 
	#_IO_SCIENTIFIC
 04000

	)

163 
	#_IO_FIXED
 010000

	)

164 
	#_IO_UNITBUF
 020000

	)

165 
	#_IO_STDIO
 040000

	)

166 
	#_IO_DONT_CLOSE
 0100000

	)

167 
	#_IO_BOOLALPHA
 0200000

	)

170 
_IO_jump_t
; 
	g_IO_FILE
;

173 #ifdeà
_IO_MTSAFE_IO


174 #ià
defšed
 
__GLIBC__
 && __GLIBC__ >= 2

175 
	~<b™s/¡dio-lock.h
>

180 
	t_IO_lock_t
;

186 
	s_IO_m¬k”
 {

187 
_IO_m¬k”
 *
	m_Ãxt
;

188 
_IO_FILE
 *
	m_sbuf
;

192 
	m_pos
;

194 
£t_¡»ampos
(
¡»ampos
 
¥
è{ 
	m_¥os
 = sp; }

195 
£t_off£t
(
off£t
è{ 
	m_pos
 = off£t; 
	m_¥os
 = (
¡»ampos
)(-2); }

196 
	mpublic
:

197 
¡»amm¬k”
(
¡»ambuf
 *
sb
);

198 ~
¡»amm¬k”
();

199 
§všg
(è{  
	m_¥os
 == -2; }

200 
d–
(
¡»amm¬k”
&);

201 
d–
();

206 
	e__codecvt_»suÉ


208 
	m__codecvt_ok
,

209 
	m__codecvt_·¹Ÿl
,

210 
	m__codecvt_”rÜ
,

211 
	m__codecvt_nocÚv


214 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


217 
	s_IO_codecvt


219 (*
	m__codecvt_de¡r
è(
	m_IO_codecvt
 *);

220 
__codecvt_»suÉ
 (*
__codecvt_do_out
è(
	m_IO_codecvt
 *,

221 
	m__mb¡©e_t
 *,

222 cÚ¡ 
	mwch¬_t
 *,

223 cÚ¡ 
	mwch¬_t
 *,

224 cÚ¡ 
	mwch¬_t
 **, *,

226 
__codecvt_»suÉ
 (*
__codecvt_do_unshiá
è(
	m_IO_codecvt
 *,

227 
	m__mb¡©e_t
 *, *,

229 
__codecvt_»suÉ
 (*
__codecvt_do_š
è(
	m_IO_codecvt
 *,

230 
	m__mb¡©e_t
 *,

232 cÚ¡ **, 
	mwch¬_t
 *,

233 
	mwch¬_t
 *, wchar_t **);

234 (*
	m__codecvt_do_’codšg
è(
	m_IO_codecvt
 *);

235 (*
	m__codecvt_do_®ways_nocÚv
è(
	m_IO_codecvt
 *);

236 (*
	m__codecvt_do_Ëngth
è(
	m_IO_codecvt
 *, 
	m__mb¡©e_t
 *,

237 cÚ¡ *, cÚ¡ *, 
	m_IO_size_t
);

238 (*
	m__codecvt_do_max_Ëngth
è(
	m_IO_codecvt
 *);

240 
_IO_icÚv_t
 
	m__cd_š
;

241 
_IO_icÚv_t
 
	m__cd_out
;

245 
	s_IO_wide_d©a


247 
wch¬_t
 *
	m_IO_»ad_±r
;

248 
wch¬_t
 *
	m_IO_»ad_’d
;

249 
wch¬_t
 *
	m_IO_»ad_ba£
;

250 
wch¬_t
 *
	m_IO_wr™e_ba£
;

251 
wch¬_t
 *
	m_IO_wr™e_±r
;

252 
wch¬_t
 *
	m_IO_wr™e_’d
;

253 
wch¬_t
 *
	m_IO_buf_ba£
;

254 
wch¬_t
 *
	m_IO_buf_’d
;

256 
wch¬_t
 *
	m_IO_§ve_ba£
;

257 
wch¬_t
 *
	m_IO_backup_ba£
;

259 
wch¬_t
 *
	m_IO_§ve_’d
;

261 
__mb¡©e_t
 
	m_IO_¡©e
;

262 
__mb¡©e_t
 
	m_IO_Ï¡_¡©e
;

263 
_IO_codecvt
 
	m_codecvt
;

265 
wch¬_t
 
	m_shÜtbuf
[1];

267 cÚ¡ 
_IO_jump_t
 *
	m_wide_vbË
;

271 
	s_IO_FILE
 {

272 
	m_æags
;

273 
	#_IO_fe_æags
 
_æags


	)

277 * 
	m_IO_»ad_±r
;

278 * 
	m_IO_»ad_’d
;

279 * 
	m_IO_»ad_ba£
;

280 * 
	m_IO_wr™e_ba£
;

281 * 
	m_IO_wr™e_±r
;

282 * 
	m_IO_wr™e_’d
;

283 * 
	m_IO_buf_ba£
;

284 * 
	m_IO_buf_’d
;

286 *
	m_IO_§ve_ba£
;

287 *
	m_IO_backup_ba£
;

288 *
	m_IO_§ve_’d
;

290 
_IO_m¬k”
 *
	m_m¬k”s
;

292 
_IO_FILE
 *
	m_chaš
;

294 
	m_f’o
;

296 
	m_blksize
;

298 
	m_æags2
;

300 
_IO_off_t
 
	m_Şd_off£t
;

302 
	#__HAVE_COLUMN


	)

304 
	m_cur_cŞumn
;

305 sigÃd 
	m_vbË_off£t
;

306 
	m_shÜtbuf
[1];

310 
_IO_lock_t
 *
	m_lock
;

311 #ifdeà
_IO_USE_OLD_IO_FILE


314 
	s_IO_FILE_com¶‘e


316 
_IO_FILE
 
	m_fe
;

318 #ià
defšed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

319 
_IO_off64_t
 
	m_off£t
;

320 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


322 
_IO_codecvt
 *
	m_codecvt
;

323 
_IO_wide_d©a
 *
	m_wide_d©a
;

324 
_IO_FILE
 *
	m_ä“»s_li¡
;

325 *
	m_ä“»s_buf
;

326 
size_t
 
	m_ä“»s_size
;

328 *
	m__·d1
;

329 *
	m__·d2
;

330 *
	m__·d3
;

331 *
	m__·d4
;

332 
size_t
 
	m__·d5
;

334 
	m_mode
;

336 
	m_unu£d2
[15 *  (è- 4 *  (*è-  (
size_t
)];

340 #iâdeà
__ılu¥lus


341 
_IO_FILE
 
	t_IO_FILE
;

344 
	g_IO_FILE_¶us
;

346 
_IO_FILE_¶us
 
_IO_2_1_¡dš_
;

347 
_IO_FILE_¶us
 
_IO_2_1_¡dout_
;

348 
_IO_FILE_¶us
 
_IO_2_1_¡d”r_
;

349 #iâdeà
_LIBC


350 
	#_IO_¡dš
 ((
_IO_FILE
*)(&
_IO_2_1_¡dš_
))

	)

351 
	#_IO_¡dout
 ((
_IO_FILE
*)(&
_IO_2_1_¡dout_
))

	)

352 
	#_IO_¡d”r
 ((
_IO_FILE
*)(&
_IO_2_1_¡d”r_
))

	)

354 
_IO_FILE
 *
_IO_¡dš
 
©Œibu‹_hidd’
;

355 
_IO_FILE
 *
_IO_¡dout
 
©Œibu‹_hidd’
;

356 
_IO_FILE
 *
_IO_¡d”r
 
©Œibu‹_hidd’
;

364 
__ssize_t
 
	t__io_»ad_â
 (*
	t__cook›
, *
	t__buf
, 
	tsize_t
 
	t__nby‹s
);

372 
__ssize_t
 
	t__io_wr™e_â
 (*
	t__cook›
, 
	t__cÚ¡
 *
	t__buf
,

373 
	tsize_t
 
	t__n
);

381 
	t__io_£ek_â
 (*
	t__cook›
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

384 
	t__io_şo£_â
 (*
	t__cook›
);

387 #ifdeà
_GNU_SOURCE


389 
__io_»ad_â
 
	tcook›_»ad_funùiÚ_t
;

390 
__io_wr™e_â
 
	tcook›_wr™e_funùiÚ_t
;

391 
__io_£ek_â
 
	tcook›_£ek_funùiÚ_t
;

392 
__io_şo£_â
 
	tcook›_şo£_funùiÚ_t
;

397 
__io_»ad_â
 *
	m»ad
;

398 
__io_wr™e_â
 *
	mwr™e
;

399 
__io_£ek_â
 *
	m£ek
;

400 
__io_şo£_â
 *
	mşo£
;

401 } 
	t_IO_cook›_io_funùiÚs_t
;

402 
_IO_cook›_io_funùiÚs_t
 
	tcook›_io_funùiÚs_t
;

404 
	g_IO_cook›_fe
;

407 
_IO_cook›_š™
 (
_IO_cook›_fe
 *
__cfe
, 
__»ad_wr™e
,

408 *
__cook›
, 
_IO_cook›_io_funùiÚs_t
 
__âs
);

412 #ifdeà
__ılu¥lus


416 
__und”æow
 (
_IO_FILE
 *);

417 
__uæow
 (
_IO_FILE
 *);

418 
__ov”æow
 (
_IO_FILE
 *, );

419 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


420 
_IO_wšt_t
 
__wund”æow
 (
_IO_FILE
 *);

421 
_IO_wšt_t
 
__wuæow
 (
_IO_FILE
 *);

422 
_IO_wšt_t
 
__wov”æow
 (
_IO_FILE
 *, _IO_wint_t);

425 #ià 
__GNUC__
 >= 3

426 
	#_IO_BE
(
ex´
, 
»s
è
	`__butš_ex³ù
 (Óx´),„es)

	)

428 
	#_IO_BE
(
ex´
, 
»s
èÓx´)

	)

431 
	#_IO_g‘c_uÆocked
(
_å
) \

432 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

433 ? 
	`__uæow
 (
_å
è: *(*è(_å)->
_IO_»ad_±r
++)

	)

434 
	#_IO_³ekc_uÆocked
(
_å
) \

435 (
	`_IO_BE
 ((
_å
)->
_IO_»ad_±r
 >ğ(_å)->
_IO_»ad_’d
, 0) \

436 && 
	`__und”æow
 (
_å
è=ğ
EOF
 ? EOF \

437 : *(*è(
_å
)->
_IO_»ad_±r
)

	)

438 
	#_IO_putc_uÆocked
(
_ch
, 
_å
) \

439 (
	`_IO_BE
 ((
_å
)->
_IO_wr™e_±r
 >ğ(_å)->
_IO_wr™e_’d
, 0) \

440 ? 
	`__ov”æow
 (
_å
, (è(
_ch
)) \

441 : (è(*(
_å
)->
_IO_wr™e_±r
++ = (
_ch
)))

	)

443 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


444 
	#_IO_g‘wc_uÆocked
(
_å
) \

445 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

446 || ((
_å
)->
_wide_d©a
->
_IO_»ad_±r
 \

447 >ğ(
_å
)->
_wide_d©a
->
_IO_»ad_’d
), 0) \

448 ? 
	`__wuæow
 (
_å
è: (
_IO_wšt_t
è*(_å)->
_wide_d©a
->
_IO_»ad_±r
++)

	)

449 
	#_IO_putwc_uÆocked
(
_wch
, 
_å
) \

450 (
	`_IO_BE
 ((
_å
)->
_wide_d©a
 =ğ
NULL
 \

451 || ((
_å
)->
_wide_d©a
->
_IO_wr™e_±r
 \

452 >ğ(
_å
)->
_wide_d©a
->
_IO_wr™e_’d
), 0) \

453 ? 
	`__wov”æow
 (
_å
, 
_wch
) \

454 : (
_IO_wšt_t
è(*(
_å
)->
_wide_d©a
->
_IO_wr™e_±r
++ = (
_wch
)))

	)

457 
	#_IO_ãof_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_EOF_SEEN
è!ğ0)

	)

458 
	#_IO_ã¼Ü_uÆocked
(
__å
è(((__å)->
_æags
 & 
_IO_ERR_SEEN
è!ğ0)

	)

460 
_IO_g‘c
 (
_IO_FILE
 *
__å
);

461 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__å
);

462 
_IO_ãof
 (
_IO_FILE
 *
__å
è
__THROW
;

463 
_IO_ã¼Ü
 (
_IO_FILE
 *
__å
è
__THROW
;

465 
_IO_³ekc_locked
 (
_IO_FILE
 *
__å
);

468 
	#_IO_PENDING_OUTPUT_COUNT
(
_å
) \

469 ((
_å
)->
_IO_wr™e_±r
 - (_å)->
_IO_wr™e_ba£
)

	)

471 
_IO_æockfe
 (
_IO_FILE
 *è
__THROW
;

472 
_IO_fuÆockfe
 (
_IO_FILE
 *è
__THROW
;

473 
_IO_árylockfe
 (
_IO_FILE
 *è
__THROW
;

475 #ifdeà
_IO_MTSAFE_IO


476 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_locked
 (_å)

	)

477 
	#_IO_æockfe
(
_å
) \

478 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_æockfe
 (_å)

	)

479 
	#_IO_fuÆockfe
(
_å
) \

480 ià(((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0è
	`_IO_fuÆockfe
 (_å)

	)

482 
	#_IO_³ekc
(
_å
è
	`_IO_³ekc_uÆocked
 (_å)

	)

483 
	#_IO_æockfe
(
_å
è

	)

484 
	#_IO_fuÆockfe
(
_å
è

	)

485 
	#_IO_árylockfe
(
_å
è

	)

486 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
è

	)

487 
	#_IO_ş—nup_»giÚ_’d
(
_Do™
è

	)

490 
_IO_vfsÿnf
 (
_IO_FILE
 * 
__»¡riù
, const * __restrict,

491 
_IO_va_li¡
, *
__»¡riù
);

492 
_IO_vårštf
 (
_IO_FILE
 *
__»¡riù
, const *__restrict,

493 
_IO_va_li¡
);

494 
_IO_ssize_t
 
_IO_·dn
 (
_IO_FILE
 *, , _IO_ssize_t);

495 
_IO_size_t
 
_IO_sg‘n
 (
_IO_FILE
 *, *, _IO_size_t);

497 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

498 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

500 
_IO_ä“_backup_¬—
 (
_IO_FILE
 *è
__THROW
;

502 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


503 
_IO_wšt_t
 
_IO_g‘wc
 (
_IO_FILE
 *
__å
);

504 
_IO_wšt_t
 
_IO_putwc
 (
wch¬_t
 
__wc
, 
_IO_FILE
 *
__å
);

505 
_IO_fwide
 (
_IO_FILE
 *
__å
, 
__mode
è
__THROW
;

506 #ià
__GNUC__
 >= 2

509 #ià
defšed
 
_LIBC
 && defšed 
SHARED


510 
	~<shlib-com·t.h
>

511 #ià
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

512 
	#_IO_fwide_maybe_šcom·tibË
 \

513 (
	`__butš_ex³ù
 (&
_IO_¡dš_u£d
 =ğ
NULL
, 0))

	)

514 cÚ¡ 
_IO_¡dš_u£d
;

515 
w—k_ex‹º
 (
_IO_¡dš_u£d
);

518 #iâdeà
_IO_fwide_maybe_šcom·tibË


519 
	#_IO_fwide_maybe_šcom·tibË
 (0)

	)

523 
	#_IO_fwide
(
__å
, 
__mode
) \

524 ({ 
__»suÉ
 = (
__mode
); \

525 ià(
__»suÉ
 < 0 && ! 
_IO_fwide_maybe_šcom·tibË
) \

527 ià((
__å
)->
_mode
 == 0) \

529 (
__å
)->
_mode
 = -1; \

530 
__»suÉ
 = (
__å
)->
_mode
; \

532 ià(
	`__butš_cÚ¡ªt_p
 (
__mode
) && (__mode) == 0) \

533 
__»suÉ
 = 
_IO_fwide_maybe_šcom·tibË
 ? -1 : (
__å
)->
_mode
; \

535 
__»suÉ
 = 
	`_IO_fwide
 (
__å
, __result); \

536 
__»suÉ
; })

	)

539 
_IO_vfwsÿnf
 (
_IO_FILE
 * 
__»¡riù
, cÚ¡ 
wch¬_t
 * __restrict,

540 
_IO_va_li¡
, *
__»¡riù
);

541 
_IO_vfw´štf
 (
_IO_FILE
 *
__»¡riù
, cÚ¡ 
wch¬_t
 *__restrict,

542 
_IO_va_li¡
);

543 
_IO_ssize_t
 
_IO_w·dn
 (
_IO_FILE
 *, 
wšt_t
, _IO_ssize_t);

544 
_IO_ä“_wbackup_¬—
 (
_IO_FILE
 *è
__THROW
;

547 #ifdeà
__LDBL_COMPAT


548 
	~<b™s/libio-ldbl.h
>

551 #ifdeà
__ılu¥lus


	@/usr/include/sys/select.h

22 #iâdeà
_SYS_SELECT_H


23 
	#_SYS_SELECT_H
 1

	)

25 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

31 
	~<b™s/£Ëù.h
>

34 
	~<b™s/sig£t.h
>

36 #iâdeà
__sig£t_t_defšed


37 
	#__sig£t_t_defšed


	)

38 
__sig£t_t
 
	tsig£t_t
;

42 
	#__Ãed_time_t


	)

43 
	#__Ãed_time¥ec


	)

44 
	~<time.h
>

45 
	#__Ãed_timev®


	)

46 
	~<b™s/time.h
>

48 #iâdeà
__su£cÚds_t_defšed


49 
__su£cÚds_t
 
	tsu£cÚds_t
;

50 
	#__su£cÚds_t_defšed


	)

55 
	t__fd_mask
;

58 #undeà
__NFDBITS


59 #undeà
__FDELT


60 #undeà
__FDMASK


62 
	#__NFDBITS
 (8 * (è (
__fd_mask
))

	)

63 
	#__FDELT
(
d
è((dè/ 
__NFDBITS
)

	)

64 
	#__FDMASK
(
d
è((
__fd_mask
è1 << ((dè% 
__NFDBITS
))

	)

71 #ifdeà
__USE_XOPEN


72 
__fd_mask
 
	mfds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

73 
	#__FDS_BITS
(
£t
è((£t)->
fds_b™s
)

	)

75 
__fd_mask
 
	m__fds_b™s
[
__FD_SETSIZE
 / 
__NFDBITS
];

76 
	#__FDS_BITS
(
£t
è((£t)->
__fds_b™s
)

	)

78 } 
	tfd_£t
;

81 
	#FD_SETSIZE
 
__FD_SETSIZE


	)

83 #ifdeà
__USE_MISC


85 
__fd_mask
 
	tfd_mask
;

88 
	#NFDBITS
 
__NFDBITS


	)

93 
	#FD_SET
(
fd
, 
fd£
è
	`__FD_SET
 (fd, fd£)

	)

94 
	#FD_CLR
(
fd
, 
fd£
è
	`__FD_CLR
 (fd, fd£)

	)

95 
	#FD_ISSET
(
fd
, 
fd£
è
	`__FD_ISSET
 (fd, fd£)

	)

96 
	#FD_ZERO
(
fd£
è
	`__FD_ZERO
 (fd£)

	)

99 
__BEGIN_DECLS


109 
£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

110 
fd_£t
 *
__»¡riù
 
__wr™efds
,

111 
fd_£t
 *
__»¡riù
 
__exû±fds
,

112 
timev®
 *
__»¡riù
 
__timeout
);

114 #ifdeà
__USE_XOPEN2K


121 
p£Ëù
 (
__nfds
, 
fd_£t
 *
__»¡riù
 
__»adfds
,

122 
fd_£t
 *
__»¡riù
 
__wr™efds
,

123 
fd_£t
 *
__»¡riù
 
__exû±fds
,

124 cÚ¡ 
time¥ec
 *
__»¡riù
 
__timeout
,

125 cÚ¡ 
__sig£t_t
 *
__»¡riù
 
__sigmask
);

128 
	g__END_DECLS


	@/usr/include/sys/sysmacros.h

21 #iâdeà
_SYS_SYSMACROS_H


22 
	#_SYS_SYSMACROS_H
 1

	)

24 
	~<ã©u»s.h
>

29 #ifdeà
__GLIBC_HAVE_LONG_LONG


30 
__ex‹nsiÚ__


31 
	$gnu_dev_majÜ
 (
__dev
)

32 
__THROW
;

33 
__ex‹nsiÚ__


34 
	$gnu_dev_mšÜ
 (
__dev
)

35 
__THROW
;

36 
__ex‹nsiÚ__


37 
	$gnu_dev_makedev
 (
__majÜ
,

38 
__mšÜ
)

39 
__THROW
;

41 #ià
defšed
 
__GNUC__
 && __GNUC__ >ğ2 && defšed 
__USE_EXTERN_INLINES


42 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

43 
	`__NTH
 (
	$gnu_dev_majÜ
 (
__dev
))

45  ((
__dev
 >> 8) & 0xfff) | (() (__dev >> 32) & ~0xfff);

46 
	}
}

48 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

49 
__NTH
 (
	$gnu_dev_mšÜ
 (
__dev
))

51  (
__dev
 & 0xff) | (() (__dev >> 12) & ~0xff);

52 
	}
}

54 
__ex‹nsiÚ__
 
__ex‹º_šlše
 

55 
__NTH
 (
	$gnu_dev_makedev
 (
__majÜ
, 
__mšÜ
))

57  ((
__mšÜ
 & 0xffè| ((
__majÜ
 & 0xfff) << 8)

58 | (((è(
__mšÜ
 & ~0xff)) << 12)

59 | (((è(
__majÜ
 & ~0xfff)) << 32));

60 
	}
}

65 
	#majÜ
(
dev
è
	`gnu_dev_majÜ
 (dev)

	)

66 
	#mšÜ
(
dev
è
	`gnu_dev_mšÜ
 (dev)

	)

67 
	#makedev
(
maj
, 
mš
è
	`gnu_dev_makedev
 (maj, mš)

	)

	@/usr/include/time.h

23 #iâdef 
_TIME_H


25 #ià(! 
defšed
 
__Ãed_time_t
 && !defšed 
__Ãed_şock_t
 && \

26 ! 
defšed
 
	g__Ãed_time¥ec
)

27 
	#_TIME_H
 1

	)

28 
	~<ã©u»s.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__Ãed_size_t


	)

37 
	#__Ãed_NULL


	)

38 
	~<¡ddef.h
>

42 
	~<b™s/time.h
>

45 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


46 #iâdeà
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #ià!
defšed
 
__şock_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_şock_t
)

54 
	#__şock_t_defšed
 1

	)

56 
	~<b™s/ty³s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__şock_t
 
	tşock_t
;

61 
	g__END_NAMESPACE_STD


62 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
şock_t
)

67 #undeà
__Ãed_şock_t


69 #ià!
defšed
 
__time_t_defšed
 && (defšed 
_TIME_H
 || defšed 
__Ãed_time_t
)

70 
	#__time_t_defšed
 1

	)

72 
	~<b™s/ty³s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC
 || defšed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #undeà
__Ãed_time_t


85 #ià!
defšed
 
__şockid_t_defšed
 && \

86 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_şockid_t
)

87 
	#__şockid_t_defšed
 1

	)

89 
	~<b™s/ty³s.h
>

92 
__şockid_t
 
	tşockid_t
;

95 #undeà
__şockid_time_t


97 #ià!
defšed
 
__tim”_t_defšed
 && \

98 ((
defšed
 
_TIME_H
 && defšed 
__USE_POSIX199309
è|| defšed 
__Ãed_tim”_t
)

99 
	#__tim”_t_defšed
 1

	)

101 
	~<b™s/ty³s.h
>

104 
__tim”_t
 
	ttim”_t
;

107 #undeà
__Ãed_tim”_t


110 #ià!
defšed
 
__time¥ec_defšed
 && \

111 ((
defšed
 
_TIME_H
 && \

112 (
defšed
 
__USE_POSIX199309
 || defšed 
__USE_MISC
)) || \

113 
defšed
 
__Ãed_time¥ec
)

114 
	#__time¥ec_defšed
 1

	)

116 
	~<b™s/ty³s.h
>

120 
	stime¥ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #undeà
__Ãed_time¥ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mš
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_mÚ
;

140 
tm_y—r
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd¡
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__cÚ¡
 *
tm_zÚe
;

149 
__tm_gmtoff
;

150 
__cÚ¡
 *
__tm_zÚe
;

153 
__END_NAMESPACE_STD


154 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_POSIX
 || defšed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifdeà
__USE_POSIX199309


161 
	s™im”¥ec


163 
time¥ec
 
™_š‹rv®
;

164 
time¥ec
 
™_v®ue
;

168 
sigev’t
;

172 #ifdeà
__USE_XOPEN2K


173 #iâdeà
__pid_t_defšed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_defšed


	)

180 
__BEGIN_NAMESPACE_STD


183 
şock_t
 
	$şock
 (è
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__tim”
è
__THROW
;

189 
	$difáime
 (
time_t
 
__time1
,ime_ˆ
__time0
)

190 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

193 
time_t
 
	$mktime
 (
tm
 *
__
è
__THROW
;

199 
size_t
 
	$¡ráime
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

200 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

201 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifdeà
__USE_XOPEN


207 *
	$¡½time
 (
__cÚ¡
 *
__»¡riù
 
__s
,

208 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
)

209 
__THROW
;

212 #ifdeà
__USE_XOPEN2K8


215 
	~<xloÿË.h
>

217 
size_t
 
	$¡ráime_l
 (*
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

218 
__cÚ¡
 *
__»¡riù
 
__fÜm©
,

219 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

220 
__loÿË_t
 
__loc
è
__THROW
;

223 #ifdeà
__USE_GNU


224 *
	$¡½time_l
 (
__cÚ¡
 *
__»¡riù
 
__s
,

225 
__cÚ¡
 *
__»¡riù
 
__fmt
, 
tm
 *
__
,

226 
__loÿË_t
 
__loc
è
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

237 
tm
 *
	$loÿÉime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

238 
__END_NAMESPACE_STD


240 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

244 
tm
 *
__»¡riù
 
__
è
__THROW
;

248 
tm
 *
	$loÿÉime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

249 
tm
 *
__»¡riù
 
__
è
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$asùime
 (
__cÚ¡
 
tm
 *
__
è
__THROW
;

258 *
	$ùime
 (
__cÚ¡
 
time_t
 *
__tim”
è
__THROW
;

259 
__END_NAMESPACE_STD


261 #ià
defšed
 
__USE_POSIX
 || defšed 
__USE_MISC


266 *
	$asùime_r
 (
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

267 *
__»¡riù
 
__buf
è
__THROW
;

270 *
	$ùime_r
 (
__cÚ¡
 
time_t
 *
__»¡riù
 
__tim”
,

271 *
__»¡riù
 
__buf
è
__THROW
;

276 *
__tzÇme
[2];

277 
__daylight
;

278 
__timezÚe
;

281 #ifdef 
__USE_POSIX


283 *
tzÇme
[2];

287 
	$tz£t
 (è
__THROW
;

290 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_XOPEN


291 
daylight
;

292 
timezÚe
;

295 #ifdeà
__USE_SVID


298 
	$¡ime
 (
__cÚ¡
 
time_t
 *
__wh’
è
__THROW
;

304 
	#__i¦—p
(
y—r
) \

305 ((
y—r
è% 4 =ğ0 && ((y—rè% 100 !ğ0 || (y—rè% 400 =ğ0))

	)

308 #ifdeà
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__
è
__THROW
;

316 
time_t
 
	$tim–oÿl
 (
tm
 *
__
è
__THROW
;

319 
	$dysize
 (
__y—r
è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

323 #ifdeà
__USE_POSIX199309


328 
	`Çno¦“p
 (
__cÚ¡
 
time¥ec
 *
__»que¡ed_time
,

329 
time¥ec
 *
__»maššg
);

333 
	$şock_g‘»s
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__»s
è
__THROW
;

336 
	$şock_g‘time
 (
şockid_t
 
__şock_id
, 
time¥ec
 *
__
è
__THROW
;

339 
	$şock_£‰ime
 (
şockid_t
 
__şock_id
, 
__cÚ¡
 
time¥ec
 *
__
)

340 
__THROW
;

342 #ifdeà
__USE_XOPEN2K


347 
	`şock_Çno¦“p
 (
şockid_t
 
__şock_id
, 
__æags
,

348 
__cÚ¡
 
time¥ec
 *
__»q
,

349 
time¥ec
 *
__»m
);

352 
	$şock_g‘ıuşockid
 (
pid_t
 
__pid
, 
şockid_t
 *
__şock_id
è
__THROW
;

357 
	$tim”_ü—‹
 (
şockid_t
 
__şock_id
,

358 
sigev’t
 *
__»¡riù
 
__evp
,

359 
tim”_t
 *
__»¡riù
 
__tim”id
è
__THROW
;

362 
	$tim”_d–‘e
 (
tim”_t
 
__tim”id
è
__THROW
;

365 
	$tim”_£‰ime
 (
tim”_t
 
__tim”id
, 
__æags
,

366 
__cÚ¡
 
™im”¥ec
 *
__»¡riù
 
__v®ue
,

367 
™im”¥ec
 *
__»¡riù
 
__ov®ue
è
__THROW
;

370 
	$tim”_g‘time
 (
tim”_t
 
__tim”id
, 
™im”¥ec
 *
__v®ue
)

371 
__THROW
;

374 
	$tim”_g‘ov”run
 (
tim”_t
 
__tim”id
è
__THROW
;

378 #ifdeà
__USE_XOPEN_EXTENDED


390 
g‘d©e_”r
;

399 
tm
 *
	`g‘d©e
 (
__cÚ¡
 *
__¡ršg
);

402 #ifdeà
__USE_GNU


413 
	`g‘d©e_r
 (
__cÚ¡
 *
__»¡riù
 
__¡ršg
,

414 
tm
 *
__»¡riù
 
__»sbuå
);

417 
__END_DECLS


	@/usr/include/xlocale.h

21 #iâdeà
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loÿË_¡ruù


31 
loÿË_d©a
 *
	m__loÿËs
[13];

34 cÚ¡ *
	m__ùy³_b
;

35 cÚ¡ *
	m__ùy³_tŞow”
;

36 cÚ¡ *
	m__ùy³_touµ”
;

39 cÚ¡ *
	m__Çmes
[13];

40 } *
	t__loÿË_t
;

43 
__loÿË_t
 
	tloÿË_t
;

	@/usr/include/_G_config.h

4 #iâdeà
_G_cÚfig_h


5 
	#_G_cÚfig_h
 1

	)

9 
	~<b™s/ty³s.h
>

10 
	#__Ãed_size_t


	)

11 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


12 
	#__Ãed_wch¬_t


	)

14 
	#__Ãed_NULL


	)

15 
	~<¡ddef.h
>

16 
	#__Ãed_mb¡©e_t


	)

17 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


18 
	#__Ãed_wšt_t


	)

20 
	~<wch¬.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb¡©e_t
 
	m__¡©e
;

26 } 
	t_G_åos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb¡©e_t
 
	m__¡©e
;

31 } 
	t_G_åos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¬_t
 
wch¬_t


	)

38 
	#_G_wšt_t
 
wšt_t


	)

39 
	#_G_¡©64
 
¡©64


	)

40 #ià
defšed
 
_LIBC
 || defšed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gcÚv.h
>

44 
__gcÚv_šfo
 
	m__cd
;

47 
__gcÚv_šfo
 
	m__cd
;

48 
__gcÚv_¡•_d©a
 
	m__d©a
;

49 } 
	m__combšed
;

50 } 
	t_G_icÚv_t
;

53 
	t_G_št16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_št32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_ušt16_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_ušt32_t
 
	t__©Œibu‹__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li¡
 
__gnuc_va_li¡


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__İ’64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm­64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
è
	`__fx¡©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`defšed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #ià
defšed
 
__ılu¥lus
 || defšed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
è
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
è()

	)

	@/usr/include/bits/byteswap.h

21 #ià!
defšed
 
_BYTESWAP_H
 && !defšed 
_NETINET_IN_H
 && !defšed 
_ENDIAN_H


25 #iâdeà
_BITS_BYTESWAP_H


26 
	#_BITS_BYTESWAP_H
 1

	)

28 
	~<b™s/wÜdsize.h
>

31 
	#__bsw­_cÚ¡ªt_16
(
x
) \

32 ((è((((
x
è>> 8è& 0xffè| (((xè& 0xffè<< 8)))

	)

34 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

35 
	#__bsw­_16
(
x
) \

36 (
__ex‹nsiÚ__
 \

37 ({ 
__v
, 
__x
 = (è(
x
); \

38 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

39 
__v
 = 
	`__bsw­_cÚ¡ªt_16
 (
__x
); \

41 
	`__asm__
 ("rorw $8, %w0" \

42 : "ô" (
__v
) \

43 : "0" (
__x
) \

45 
__v
; }))

	)

48 
	#__bsw­_16
(
x
) \

49 (
__ex‹nsiÚ__
 \

50 ({ 
__x
 = (è(
x
); \

51 
	`__bsw­_cÚ¡ªt_16
 (
__x
); }))

	)

56 
	#__bsw­_cÚ¡ªt_32
(
x
) \

57 ((((
x
) & 0xff000000) >> 24) | (((x) & 0x00ff0000) >> 8) | \

58 (((
x
è& 0x0000ff00è<< 8è| (((xè& 0x000000ffè<< 24))

	)

60 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

61 #ià
__WORDSIZE
 =ğ64 || (
defšed
 
__i486__
 || defšed 
__³Áium__
 \

62 || 
defšed
 
	g__³Áium´o__
 || defšed 
	g__³Áium4__
 \

63 || 
defšed
 
	g__k8__
 || defšed 
	g__©hlÚ__
 \

64 || 
defšed
 
	g__k6__
 || defšed 
	g__nocÚa__
 \

65 || 
defšed
 
	g__cÜe2__
 || defšed 
	g__geode__
 \

66 || 
defšed
 
	g__amdçm10__
)

69 
	#__bsw­_32
(
x
) \

70 (
__ex‹nsiÚ__
 \

71 ({ 
__v
, 
__x
 = (
x
); \

72 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

73 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

75 
	`__asm__
 ("bsw­ %0" : "ô" (
__v
è: "0" (
__x
)); \

76 
__v
; }))

	)

78 
	#__bsw­_32
(
x
) \

79 (
__ex‹nsiÚ__
 \

80 ({ 
__v
, 
__x
 = (
x
); \

81 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

82 
__v
 = 
	`__bsw­_cÚ¡ªt_32
 (
__x
); \

84 
	`__asm__
 ("rorw $8, %w0;" \

87 : "ô" (
__v
) \

88 : "0" (
__x
) \

90 
__v
; }))

	)

93 
	#__bsw­_32
(
x
) \

94 (
__ex‹nsiÚ__
 \

95 ({ 
__x
 = (
x
); 
	`__bsw­_cÚ¡ªt_32
 (__x); }))

	)

99 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

101 
	#__bsw­_cÚ¡ªt_64
(
x
) \

102 ((((
x
) & 0xff00000000000000ull) >> 56) \

103 | (((
x
) & 0x00ff000000000000ull) >> 40) \

104 | (((
x
) & 0x0000ff0000000000ull) >> 24) \

105 | (((
x
) & 0x000000ff00000000ull) >> 8) \

106 | (((
x
) & 0x00000000ff000000ull) << 8) \

107 | (((
x
) & 0x0000000000ff0000ull) << 24) \

108 | (((
x
) & 0x000000000000ff00ull) << 40) \

109 | (((
x
è& 0x00000000000000ffuÎè<< 56))

	)

111 #ià
__WORDSIZE
 == 64

112 
	#__bsw­_64
(
x
) \

113 (
__ex‹nsiÚ__
 \

114 ({ 
__v
, 
__x
 = (
x
); \

115 ià(
	`__butš_cÚ¡ªt_p
 (
__x
)) \

116 
__v
 = 
	`__bsw­_cÚ¡ªt_64
 (
__x
); \

118 
	`__asm__
 ("bsw­ %q0" : "ô" (
__v
è: "0" (
__x
)); \

119 
__v
; }))

	)

121 
	#__bsw­_64
(
x
) \

122 (
__ex‹nsiÚ__
 \

123 ({ uniÚ { 
__ex‹nsiÚ__
 
__Î
; \

124 
__l
[2]; } 
__w
, 
__r
; \

125 ià(
	`__butš_cÚ¡ªt_p
 (
x
)) \

126 
__r
.
__Î
 = 
	`__bsw­_cÚ¡ªt_64
 (
x
); \

129 
__w
.
__Î
 = (
x
); \

130 
__r
.
__l
[0] = 
	`__bsw­_32
 (
__w
.__l[1]); \

131 
__r
.
__l
[1] = 
	`__bsw­_32
 (
__w
.__l[0]); \

133 
__r
.
__Î
; }))

	)

	@/usr/include/bits/endian.h

3 #iâdeà
_ENDIAN_H


7 
	#__BYTE_ORDER
 
__LITTLE_ENDIAN


	)

	@/usr/include/bits/libio-ldbl.h

20 #iâdeà
_IO_STDIO_H


24 
	$__LDBL_REDIR_DECL
 (
_IO_vfsÿnf
)

25 
	`__LDBL_REDIR_DECL
 (
_IO_vårštf
)

	@/usr/include/bits/local_lim.h

25 #iâdeà
NR_OPEN


26 
	#__undef_NR_OPEN


	)

28 #iâdeà
LINK_MAX


29 
	#__undef_LINK_MAX


	)

31 #iâdeà
OPEN_MAX


32 
	#__undef_OPEN_MAX


	)

34 #iâdeà
ARG_MAX


35 
	#__undef_ARG_MAX


	)

39 
	~<lšux/lim™s.h
>

42 #ifdeà
__undef_NR_OPEN


43 #undeà
NR_OPEN


44 #undeà
__undef_NR_OPEN


47 #ifdeà
__undef_LINK_MAX


48 #undeà
LINK_MAX


49 #undeà
__undef_LINK_MAX


52 #ifdeà
__undef_OPEN_MAX


53 #undeà
OPEN_MAX


54 #undeà
__undef_OPEN_MAX


57 #ifdeà
__undef_ARG_MAX


58 #undeà
ARG_MAX


59 #undeà
__undef_ARG_MAX


63 
	#_POSIX_THREAD_KEYS_MAX
 128

	)

65 
	#PTHREAD_KEYS_MAX
 1024

	)

68 
	#_POSIX_THREAD_DESTRUCTOR_ITERATIONS
 4

	)

70 
	#PTHREAD_DESTRUCTOR_ITERATIONS
 
_POSIX_THREAD_DESTRUCTOR_ITERATIONS


	)

73 
	#_POSIX_THREAD_THREADS_MAX
 64

	)

75 #undeà
PTHREAD_THREADS_MAX


79 
	#AIO_PRIO_DELTA_MAX
 20

	)

82 
	#PTHREAD_STACK_MIN
 16384

	)

85 
	#DELAYTIMER_MAX
 2147483647

	)

88 
	#TTY_NAME_MAX
 32

	)

91 
	#LOGIN_NAME_MAX
 256

	)

94 
	#HOST_NAME_MAX
 64

	)

97 
	#MQ_PRIO_MAX
 32768

	)

100 
	#SEM_VALUE_MAX
 (2147483647)

	)

	@/usr/include/bits/predefs.h

19 #iâdeà
_FEATURES_H


23 #iâdeà
_PREDEFS_H


24 
	#_PREDEFS_H


	)

27 
	#__STDC_IEC_559__
 1

	)

28 
	#__STDC_IEC_559_COMPLEX__
 1

	)

	@/usr/include/bits/select.h

19 #iâdeà
_SYS_SELECT_H


23 
	~<b™s/wÜdsize.h
>

26 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

28 #ià
__WORDSIZE
 == 64

29 
	#__FD_ZERO_STOS
 "¡osq"

	)

31 
	#__FD_ZERO_STOS
 "¡o¦"

	)

34 
	#__FD_ZERO
(
fd¥
) \

36 
__d0
, 
__d1
; \

37 
__asm__
 
	`__vŞ©e__
 ("şd;„•; " 
__FD_ZERO_STOS
 \

38 : "=c" (
__d0
), "=D" (
__d1
) \

39 : "a" (0), "0" ( (
fd_£t
) \

40 /  (
__fd_mask
)), \

41 "1" (&
	`__FDS_BITS
 (
fd¥
)[0]) \

43 } 0)

	)

49 
	#__FD_ZERO
(
£t
) \

51 
__i
; \

52 
fd_£t
 *
__¬r
 = (
£t
); \

53 
__i
 = 0; __˜<  (
fd_£t
è/  (
__fd_mask
); ++__i) \

54 
	`__FDS_BITS
 (
__¬r
)[
__i
] = 0; \

55 } 0)

	)

59 
	#__FD_SET
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] |ğ
	`__FDMASK
 (d))

	)

60 
	#__FD_CLR
(
d
, 
£t
è(
	`__FDS_BITS
 (£t)[
	`__FDELT
 (d)] &ğ~
	`__FDMASK
 (d))

	)

61 
	#__FD_ISSET
(
d
, 
£t
) \

62 ((
	`__FDS_BITS
 (
£t
)[
	`__FDELT
 (
d
)] & 
	`__FDMASK
 (d)è!ğ0)

	)

	@/usr/include/bits/sigset.h

21 #iâdef 
_SIGSET_H_ty³s


22 
	#_SIGSET_H_ty³s
 1

	)

24 
	t__sig_©omic_t
;

28 
	#_SIGSET_NWORDS
 (1024 / (8 *  ()))

	)

31 
	m__v®
[
_SIGSET_NWORDS
];

32 } 
	t__sig£t_t
;

43 #ià!
defšed
 
_SIGSET_H_âs
 && defšed 
_SIGNAL_H


44 
	#_SIGSET_H_âs
 1

	)

46 #iâdeà
_EXTERN_INLINE


47 
	#_EXTERN_INLINE
 
__ex‹º_šlše


	)

51 
	#__sigmask
(
sig
) \

52 (((è1è<< (((
sig
è- 1è% (8 *  ())))

	)

55 
	#__sigwÜd
(
sig
è(((sigè- 1è/ (8 *  ()))

	)

57 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

58 
	#__sigem±y£t
(
£t
) \

59 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

60 
sig£t_t
 *
__£t
 = (
£t
); \

61 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = 0; \

62 0; }))

	)

63 
	#__sigfl£t
(
£t
) \

64 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

65 
sig£t_t
 *
__£t
 = (
£t
); \

66 --
__út
 >ğ0è
__£t
->
__v®
[__cnt] = ~0UL; \

67 0; }))

	)

69 #ifdeà
__USE_GNU


73 
	#__sigi£m±y£t
(
£t
) \

74 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

75 cÚ¡ 
sig£t_t
 *
__£t
 = (
£t
); \

76 
__»t
 = 
__£t
->
__v®
[--
__út
]; \

77 !
__»t
 && --
__út
 >= 0) \

78 
__»t
 = 
__£t
->
__v®
[
__út
]; \

79 
__»t
 =ğ0; }))

	)

80 
	#__sigªd£t
(
de¡
, 
Ëá
, 
right
) \

81 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

82 
sig£t_t
 *
__de¡
 = (
de¡
); \

83 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

84 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

85 --
__út
 >= 0) \

86 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

87 & 
__right
->
__v®
[
__út
]); \

88 0; }))

	)

89 
	#__sigÜ£t
(
de¡
, 
Ëá
, 
right
) \

90 (
	`__ex‹nsiÚ__
 ({ 
__út
 = 
_SIGSET_NWORDS
; \

91 
sig£t_t
 *
__de¡
 = (
de¡
); \

92 cÚ¡ 
sig£t_t
 *
__Ëá
 = (
Ëá
); \

93 cÚ¡ 
sig£t_t
 *
__right
 = (
right
); \

94 --
__út
 >= 0) \

95 
__de¡
->
__v®
[
__út
] = (
__Ëá
->__val[__cnt] \

96 | 
__right
->
__v®
[
__út
]); \

97 0; }))

	)

104 
__sigismemb”
 (
__cÚ¡
 
__sig£t_t
 *, );

105 
__sigadd£t
 (
__sig£t_t
 *, );

106 
__sigd–£t
 (
__sig£t_t
 *, );

108 #ifdeà
__USE_EXTERN_INLINES


109 
	#__SIGSETFN
(
NAME
, 
BODY
, 
CONST
) \

110 
_EXTERN_INLINE
 \

111 
	`NAME
 (
CONST
 
__sig£t_t
 *
__£t
, 
__sig
) \

113 
__mask
 = 
	`__sigmask
 (
__sig
); \

114 
__wÜd
 = 
	`__sigwÜd
 (
__sig
); \

115  
BODY
; \

116 }

	)

118 
__SIGSETFN
 (
__sigismemb”
, (
__£t
->
__v®
[
__wÜd
] & 
__mask
è? 1 : 0, 
__cÚ¡
)

119 
__SIGSETFN
 (
__sigadd£t
, ((
__£t
->
__v®
[
__wÜd
] |ğ
__mask
), 0), )

120 
__SIGSETFN
 (
__sigd–£t
, ((
__£t
->
__v®
[
__wÜd
] &ğ~
__mask
), 0), )

122 #undeà
__SIGSETFN


	@/usr/include/bits/stdio-lock.h

20 #iâdeà
_BITS_STDIO_LOCK_H


21 
	#_BITS_STDIO_LOCK_H
 1

	)

23 
	~<b™s/libc-lock.h
>

24 
	~<lowËv–lock.h
>

28 
	#_IO_lock_šex³nsive
 1

	)

30 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t_IO_lock_t
;

32 
	#_IO_lock_š™Ÿliz”
 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

34 
	#_IO_lock_š™
(
_Çme
) \

35 ((
_Çme
èğ(
_IO_lock_t
è
_IO_lock_š™Ÿliz”
 , 0)

	)

37 
	#_IO_lock_fši
(
_Çme
) \

38 ((è0)

	)

40 
	#_IO_lock_lock
(
_Çme
) \

42 *
__£lf
 = 
THREAD_SELF
; \

43 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

45 
	`Îl_lock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

46 (
_Çme
).
owÃr
 = 
__£lf
; \

48 ++(
_Çme
).
út
; \

49 } 0)

	)

51 
	#_IO_lock_Œylock
(
_Çme
) \

53 
__»suÉ
 = 0; \

54 *
__£lf
 = 
THREAD_SELF
; \

55 ià((
_Çme
).
owÃr
 !ğ
__£lf
) \

57 ià(
	`Îl_Œylock
 ((
_Çme
).
lock
) == 0) \

59 (
_Çme
).
owÃr
 = 
__£lf
; \

60 (
_Çme
).
út
 = 1; \

63 
__»suÉ
 = 
EBUSY
; \

66 ++(
_Çme
).
út
; \

67 
__»suÉ
; \

68 })

	)

70 
	#_IO_lock_uÆock
(
_Çme
) \

72 ià(--(
_Çme
).
út
 == 0) \

74 (
_Çme
).
owÃr
 = 
NULL
; \

75 
	`Îl_uÆock
 ((
_Çme
).
lock
, 
LLL_PRIVATE
); \

77 } 0)

	)

81 
	#_IO_ş—nup_»giÚ_¡¬t
(
_fù
, 
_å
) \

82 
	`__libc_ş—nup_»giÚ_¡¬t
 (((
_å
)->
_æags
 & 
_IO_USER_LOCK
è=ğ0, 
_fù
, _å)

	)

83 
	#_IO_ş—nup_»giÚ_¡¬t_nßrg
(
_fù
) \

84 
	`__libc_ş—nup_»giÚ_¡¬t
 (1, 
_fù
, 
NULL
)

	)

85 
	#_IO_ş—nup_»giÚ_’d
(
_do™
) \

86 
	`__libc_ş—nup_»giÚ_’d
 (
_do™
)

	)

88 #ià
defšed
 
_LIBC
 && !defšed 
NOT_IN_libc


90 #ifdeà
__EXCEPTIONS


91 
	#_IO_acquœe_lock
(
_å
) \

93 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

94 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_fù
))) \

95 ğ(
_å
); \

96 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

97 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
) \

99 
_IO_FILE
 *
_IO_acquœe_lock_fe
 \

100 
	`__©Œibu‹__
((
	`ş—nup
 (
_IO_acquœe_lock_ş—r_æags2_fù
))) \

101 ğ(
_å
); \

102 
	`_IO_æockfe
 (
_IO_acquœe_lock_fe
);

	)

104 
	#_IO_acquœe_lock
(
_å
è
_IO_acquœe_lock_Ãeds_exû±iÚs_’abËd


	)

105 
	#_IO_acquœe_lock_ş—r_æags2
(
_å
è
	`_IO_acquœe_lock
 (_å)

	)

107 
	#_IO_»Ëa£_lock
(
_å
è; } 0)

	)

	@/usr/include/bits/time.h

24 #iâdeà
__Ãed_timev®


25 #iâdeà
_BITS_TIME_H


26 
	#_BITS_TIME_H
 1

	)

34 
	#CLOCKS_PER_SEC
 1000000l

	)

36 #ià!
defšed
 
__STRICT_ANSI__
 && !defšed 
__USE_XOPEN2K


39 
	~<b™s/ty³s.h
>

40 
__syscÚf
 ();

41 
	#CLK_TCK
 ((
__şock_t
è
	`__syscÚf
 (2)è

	)

44 #ifdeà
__USE_POSIX199309


46 
	#CLOCK_REALTIME
 0

	)

48 
	#CLOCK_MONOTONIC
 1

	)

50 
	#CLOCK_PROCESS_CPUTIME_ID
 2

	)

52 
	#CLOCK_THREAD_CPUTIME_ID
 3

	)

55 
	#TIMER_ABSTIME
 1

	)

61 #ifdeà
__Ãed_timev®


62 #undeà
__Ãed_timev®


63 #iâdeà
_STRUCT_TIMEVAL


64 
	#_STRUCT_TIMEVAL
 1

	)

65 
	~<b™s/ty³s.h
>

69 
	stimev®


71 
__time_t
 
	mtv_£c
;

72 
__su£cÚds_t
 
	mtv_u£c
;

	@/usr/include/bits/typesizes.h

20 #iâdeà
_BITS_TYPES_H


24 #iâdef 
_BITS_TYPESIZES_H


25 
	#_BITS_TYPESIZES_H
 1

	)

30 
	#__DEV_T_TYPE
 
__UQUAD_TYPE


	)

31 
	#__UID_T_TYPE
 
__U32_TYPE


	)

32 
	#__GID_T_TYPE
 
__U32_TYPE


	)

33 
	#__INO_T_TYPE
 
__ULONGWORD_TYPE


	)

34 
	#__INO64_T_TYPE
 
__UQUAD_TYPE


	)

35 
	#__MODE_T_TYPE
 
__U32_TYPE


	)

36 
	#__NLINK_T_TYPE
 
__UWORD_TYPE


	)

37 
	#__OFF_T_TYPE
 
__SLONGWORD_TYPE


	)

38 
	#__OFF64_T_TYPE
 
__SQUAD_TYPE


	)

39 
	#__PID_T_TYPE
 
__S32_TYPE


	)

40 
	#__RLIM_T_TYPE
 
__ULONGWORD_TYPE


	)

41 
	#__RLIM64_T_TYPE
 
__UQUAD_TYPE


	)

42 
	#__BLKCNT_T_TYPE
 
__SLONGWORD_TYPE


	)

43 
	#__BLKCNT64_T_TYPE
 
__SQUAD_TYPE


	)

44 
	#__FSBLKCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

45 
	#__FSBLKCNT64_T_TYPE
 
__UQUAD_TYPE


	)

46 
	#__FSFILCNT_T_TYPE
 
__ULONGWORD_TYPE


	)

47 
	#__FSFILCNT64_T_TYPE
 
__UQUAD_TYPE


	)

48 
	#__ID_T_TYPE
 
__U32_TYPE


	)

49 
	#__CLOCK_T_TYPE
 
__SLONGWORD_TYPE


	)

50 
	#__TIME_T_TYPE
 
__SLONGWORD_TYPE


	)

51 
	#__USECONDS_T_TYPE
 
__U32_TYPE


	)

52 
	#__SUSECONDS_T_TYPE
 
__SLONGWORD_TYPE


	)

53 
	#__DADDR_T_TYPE
 
__S32_TYPE


	)

54 
	#__SWBLK_T_TYPE
 
__SLONGWORD_TYPE


	)

55 
	#__KEY_T_TYPE
 
__S32_TYPE


	)

56 
	#__CLOCKID_T_TYPE
 
__S32_TYPE


	)

57 
	#__TIMER_T_TYPE
 *

	)

58 
	#__BLKSIZE_T_TYPE
 
__SLONGWORD_TYPE


	)

59 
	#__FSID_T_TYPE
 sŒuù { 
__v®
[2]; }

	)

60 
	#__SSIZE_T_TYPE
 
__SWORD_TYPE


	)

63 
	#__FD_SETSIZE
 1024

	)

	@/usr/include/ctype.h

24 #iâdef 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<ã©u»s.h
>

28 
	~<b™s/ty³s.h
>

30 
	g__BEGIN_DECLS


32 #iâdeà
_ISb™


41 
	~<’dŸn.h
>

42 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


43 
	#_ISb™
(
b™
è(1 << (b™))

	)

45 
	#_ISb™
(
b™
è((b™è< 8 ? ((1 << (b™)è<< 8è: ((1 << (b™)è>> 8))

	)

50 
	m_ISuµ”
 = 
_ISb™
 (0),

51 
	m_ISlow”
 = 
_ISb™
 (1),

52 
	m_IS®pha
 = 
_ISb™
 (2),

53 
	m_ISdig™
 = 
_ISb™
 (3),

54 
	m_ISxdig™
 = 
_ISb™
 (4),

55 
	m_IS¥aû
 = 
_ISb™
 (5),

56 
	m_IS´št
 = 
_ISb™
 (6),

57 
	m_ISg¿ph
 = 
_ISb™
 (7),

58 
	m_ISbÏnk
 = 
_ISb™
 (8),

59 
	m_ISúŒl
 = 
_ISb™
 (9),

60 
	m_ISpunù
 = 
_ISb™
 (10),

61 
	m_IS®num
 = 
_ISb™
 (11)

81 
__cÚ¡
 **
	$__ùy³_b_loc
 ()

82 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

83 
__cÚ¡
 
__št32_t
 **
	$__ùy³_tŞow”_loc
 ()

84 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

85 
__cÚ¡
 
__št32_t
 **
	$__ùy³_touµ”_loc
 ()

86 
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡
));

88 
	#__isùy³
(
c
, 
ty³
) \

89 ((*
	`__ùy³_b_loc
 ())[(è(
c
)] & (è
ty³
)

	)

91 
	#__i§scii
(
c
è(((cè& ~0x7fè=ğ0è

	)

92 
	#__tßscii
(
c
è((cè& 0x7fè

	)

94 
	#__exùy³
(
Çme
è
	`Çme
 (è
__THROW


	)

96 
__BEGIN_NAMESPACE_STD


102 
	`__exùy³
 (
i§Êum
);

103 
	`__exùy³
 (
i§Íha
);

104 
	`__exùy³
 (
isúŒl
);

105 
	`__exùy³
 (
isdig™
);

106 
	`__exùy³
 (
i¦ow”
);

107 
	`__exùy³
 (
isg¿ph
);

108 
	`__exùy³
 (
i¥ršt
);

109 
	`__exùy³
 (
i¥unù
);

110 
	`__exùy³
 (
is¥aû
);

111 
	`__exùy³
 (
isuµ”
);

112 
	`__exùy³
 (
isxdig™
);

116 
	$tŞow”
 (
__c
è
__THROW
;

119 
	$touµ”
 (
__c
è
__THROW
;

121 
__END_NAMESPACE_STD


125 #ifdef 
__USE_ISOC99


126 
__BEGIN_NAMESPACE_C99


128 
	`__exùy³
 (
isbÏnk
);

130 
__END_NAMESPACE_C99


133 #ifdeà
__USE_GNU


135 
	$isùy³
 (
__c
, 
__mask
è
__THROW
;

138 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


142 
	$i§scii
 (
__c
è
__THROW
;

146 
	$tßscii
 (
__c
è
__THROW
;

150 
	`__exùy³
 (
_touµ”
);

151 
	`__exùy³
 (
_tŞow”
);

155 
	#__tobody
(
c
, 
f
, 
a
, 
¬gs
) \

156 (
__ex‹nsiÚ__
 \

157 ({ 
__»s
; \

158 ià( (
c
) > 1) \

160 ià(
	`__butš_cÚ¡ªt_p
 (
c
)) \

162 
__c
 = (
c
); \

163 
__»s
 = 
__c
 < -128 || __ø> 255 ? __ø: (
a
)[__c]; \

166 
__»s
 = 
f
 
¬gs
; \

169 
__»s
 = (
a
)[(è(
c
)]; \

170 
__»s
; 
	}
}))

	)

172 #ià!
defšed
 
__NO_CTYPE
 && !defšed 
__ılu¥lus


173 
	#i§Êum
(
c
è
	`__isùy³
((c), 
_IS®num
)

	)

174 
	#i§Íha
(
c
è
	`__isùy³
((c), 
_IS®pha
)

	)

175 
	#isúŒl
(
c
è
	`__isùy³
((c), 
_ISúŒl
)

	)

176 
	#isdig™
(
c
è
	`__isùy³
((c), 
_ISdig™
)

	)

177 
	#i¦ow”
(
c
è
	`__isùy³
((c), 
_ISlow”
)

	)

178 
	#isg¿ph
(
c
è
	`__isùy³
((c), 
_ISg¿ph
)

	)

179 
	#i¥ršt
(
c
è
	`__isùy³
((c), 
_IS´št
)

	)

180 
	#i¥unù
(
c
è
	`__isùy³
((c), 
_ISpunù
)

	)

181 
	#is¥aû
(
c
è
	`__isùy³
((c), 
_IS¥aû
)

	)

182 
	#isuµ”
(
c
è
	`__isùy³
((c), 
_ISuµ”
)

	)

183 
	#isxdig™
(
c
è
	`__isùy³
((c), 
_ISxdig™
)

	)

185 #ifdeà
__USE_ISOC99


186 
	#isbÏnk
(
c
è
	`__isùy³
((c), 
_ISbÏnk
)

	)

189 #ifdeà
__USE_EXTERN_INLINES


190 
__ex‹º_šlše
 

191 
__NTH
 (
	$tŞow”
 (
__c
))

193  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_tŞow”_loc
 ())[__c] : __c;

194 
	}
}

196 
__ex‹º_šlše
 

197 
__NTH
 (
	$touµ”
 (
__c
))

199  
__c
 >ğ-128 && __ø< 256 ? (*
	`__ùy³_touµ”_loc
 ())[__c] : __c;

200 
	}
}

203 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


204 
	#tŞow”
(
c
è
	`__tobody
 (c, 
tŞow”
, *
	`__ùy³_tŞow”_loc
 (), (c))

	)

205 
	#touµ”
(
c
è
	`__tobody
 (c, 
touµ”
, *
	`__ùy³_touµ”_loc
 (), (c))

	)

208 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC
 || defšed 
__USE_XOPEN


209 
	#i§scii
(
c
è
	`__i§scii
 (c)

	)

210 
	#tßscii
(
c
è
	`__tßscii
 (c)

	)

212 
	#_tŞow”
(
c
è((è(*
	`__ùy³_tŞow”_loc
 ())[(è(c)])

	)

213 
	#_touµ”
(
c
è((è(*
	`__ùy³_touµ”_loc
 ())[(è(c)])

	)

219 #ifdeà
__USE_XOPEN2K8


233 
	~<xloÿË.h
>

237 
	#__isùy³_l
(
c
, 
ty³
, 
loÿË
) \

238 ((
loÿË
)->
__ùy³_b
[(è(
c
)] & (è
ty³
)

	)

240 
	#__exùy³_l
(
Çme
) \

241 
	`Çme
 (, 
__loÿË_t
è
__THROW


	)

247 
__exùy³_l
 (
i§Êum_l
);

248 
__exùy³_l
 (
i§Íha_l
);

249 
__exùy³_l
 (
isúŒl_l
);

250 
__exùy³_l
 (
isdig™_l
);

251 
__exùy³_l
 (
i¦ow”_l
);

252 
__exùy³_l
 (
isg¿ph_l
);

253 
__exùy³_l
 (
i¥ršt_l
);

254 
__exùy³_l
 (
i¥unù_l
);

255 
__exùy³_l
 (
is¥aû_l
);

256 
__exùy³_l
 (
isuµ”_l
);

257 
__exùy³_l
 (
isxdig™_l
);

259 
__exùy³_l
 (
isbÏnk_l
);

263 
	$__tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

264 
	$tŞow”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

267 
	$__touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

268 
	$touµ”_l
 (
__c
, 
__loÿË_t
 
__l
è
__THROW
;

270 #ià
__GNUC__
 >ğ2 && 
defšed
 
__OPTIMIZE__
 && !defšed 
__ılu¥lus


271 
	#__tŞow”_l
(
c
, 
loÿË
) \

272 
	`__tobody
 (
c
, 
__tŞow”_l
, (
loÿË
)->
__ùy³_tŞow”
, (c,†oÿË))

	)

273 
	#__touµ”_l
(
c
, 
loÿË
) \

274 
	`__tobody
 (
c
, 
__touµ”_l
, (
loÿË
)->
__ùy³_touµ”
, (c,†oÿË))

	)

275 
	#tŞow”_l
(
c
, 
loÿË
è
	`__tŞow”_l
 ((c), (loÿË))

	)

276 
	#touµ”_l
(
c
, 
loÿË
è
	`__touµ”_l
 ((c), (loÿË))

	)

280 #iâdeà
__NO_CTYPE


281 
	#__i§Êum_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®num
, (l))

	)

282 
	#__i§Íha_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS®pha
, (l))

	)

283 
	#__isúŒl_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISúŒl
, (l))

	)

284 
	#__isdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISdig™
, (l))

	)

285 
	#__i¦ow”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISlow”
, (l))

	)

286 
	#__isg¿ph_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISg¿ph
, (l))

	)

287 
	#__i¥ršt_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS´št
, (l))

	)

288 
	#__i¥unù_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISpunù
, (l))

	)

289 
	#__is¥aû_l
(
c
,
l
è
	`__isùy³_l
((c), 
_IS¥aû
, (l))

	)

290 
	#__isuµ”_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISuµ”
, (l))

	)

291 
	#__isxdig™_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISxdig™
, (l))

	)

293 
	#__isbÏnk_l
(
c
,
l
è
	`__isùy³_l
((c), 
_ISbÏnk
, (l))

	)

295 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


296 
	#__i§scii_l
(
c
,
l
è(Ö), 
	`__i§scii
 (c))

	)

297 
	#__tßscii_l
(
c
,
l
è(Ö), 
	`__tßscii
 (c))

	)

300 
	#i§Êum_l
(
c
,
l
è
	`__i§Êum_l
 ((c), (l))

	)

301 
	#i§Íha_l
(
c
,
l
è
	`__i§Íha_l
 ((c), (l))

	)

302 
	#isúŒl_l
(
c
,
l
è
	`__isúŒl_l
 ((c), (l))

	)

303 
	#isdig™_l
(
c
,
l
è
	`__isdig™_l
 ((c), (l))

	)

304 
	#i¦ow”_l
(
c
,
l
è
	`__i¦ow”_l
 ((c), (l))

	)

305 
	#isg¿ph_l
(
c
,
l
è
	`__isg¿ph_l
 ((c), (l))

	)

306 
	#i¥ršt_l
(
c
,
l
è
	`__i¥ršt_l
 ((c), (l))

	)

307 
	#i¥unù_l
(
c
,
l
è
	`__i¥unù_l
 ((c), (l))

	)

308 
	#is¥aû_l
(
c
,
l
è
	`__is¥aû_l
 ((c), (l))

	)

309 
	#isuµ”_l
(
c
,
l
è
	`__isuµ”_l
 ((c), (l))

	)

310 
	#isxdig™_l
(
c
,
l
è
	`__isxdig™_l
 ((c), (l))

	)

312 
	#isbÏnk_l
(
c
,
l
è
	`__isbÏnk_l
 ((c), (l))

	)

314 #ià
defšed
 
__USE_SVID
 || defšed 
__USE_MISC


315 
	#i§scii_l
(
c
,
l
è
	`__i§scii_l
 ((c), (l))

	)

316 
	#tßscii_l
(
c
,
l
è
	`__tßscii_l
 ((c), (l))

	)

323 
__END_DECLS


	@/usr/include/gnu/stubs.h

4 
	~<b™s/wÜdsize.h
>

6 #ià
__WORDSIZE
 == 32

7 
	~<gnu/¡ubs-32.h
>

8 #–ià
__WORDSIZE
 == 64

9 
	~<gnu/¡ubs-64.h
>

	@/usr/include/linux/errno.h

1 #iâdeà
_LINUX_ERRNO_H


2 
	#_LINUX_ERRNO_H


	)

4 
	~<asm/”ºo.h
>

	@/usr/include/sys/cdefs.h

20 #iâdef 
_SYS_CDEFS_H


21 
	#_SYS_CDEFS_H
 1

	)

24 #iâdeà
_FEATURES_H


25 
	~<ã©u»s.h
>

31 #ià
defšed
 
__GNUC__
 && !defšed 
__STDC__


36 #undeà
__P


37 #undeà
__PMT


39 #ifdeà
__GNUC__


46 #ià!
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (3, 3)

47 
	#__THROW
 
	`__©Œibu‹__
 ((
__nÙhrow__
))

	)

48 
	#__NTH
(
fù
è
	`__©Œibu‹__
 ((
__nÙhrow__
)è
	)
fct

50 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (2,8)

51 
	#__THROW
 
	`throw
 ()

	)

52 
	#__NTH
(
fù
èfù 
	`throw
 ()

	)

54 
	#__THROW


	)

55 
	#__NTH
(
fù
è
	)
fct

61 
	#__šlše


	)

63 
	#__THROW


	)

64 
	#__NTH
(
fù
è
	)
fct

66 
	#__cÚ¡
 cÚ¡

	)

67 
	#__sigÃd
 sigÃd

	)

68 
	#__vŞ©e
 vŞ©e

	)

74 
	#__P
(
¬gs
è
	)
args

75 
	#__PMT
(
¬gs
è
	)
args

80 
	#__CONCAT
(
x
,
y
èx ## 
	)
y

81 
	#__STRING
(
x
è#x

	)

84 
	#__±r_t
 *

	)

85 
	#__lÚg_doubË_t
 

	)

89 #ifdef 
__ılu¥lus


90 
	#__BEGIN_DECLS
 "C" {

	)

91 
	#__END_DECLS
 }

	)

93 
	#__BEGIN_DECLS


	)

94 
	#__END_DECLS


	)

103 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES


104 
	#__BEGIN_NAMESPACE_STD
 
Çme¥aû
 
¡d
 {

	)

105 
	#__END_NAMESPACE_STD
 }

	)

106 
	#__USING_NAMESPACE_STD
(
Çme
è
usšg
 
¡d
::Çme;

	)

107 
	#__BEGIN_NAMESPACE_C99
 
Çme¥aû
 
__c99
 {

	)

108 
	#__END_NAMESPACE_C99
 }

	)

109 
	#__USING_NAMESPACE_C99
(
Çme
è
usšg
 
__c99
::Çme;

	)

114 
	#__BEGIN_NAMESPACE_STD


	)

115 
	#__END_NAMESPACE_STD


	)

116 
	#__USING_NAMESPACE_STD
(
Çme
)

	)

117 
	#__BEGIN_NAMESPACE_C99


	)

118 
	#__END_NAMESPACE_C99


	)

119 
	#__USING_NAMESPACE_C99
(
Çme
)

	)

124 #iâdeà
__BOUNDED_POINTERS__


125 
	#__bounded


	)

126 
	#__unbounded


	)

127 
	#__±rv®ue


	)

132 
	#__bos
(
±r
è
	`__butš_objeù_size
 (±r, 
__USE_FORTIFY_LEVEL
 > 1)

	)

133 
	#__bos0
(
±r
è
	`__butš_objeù_size
 (±r, 0)

	)

135 #ià
__GNUC_PREREQ
 (4,3)

136 
	#__w¬ndeş
(
Çme
, 
msg
) \

137 
	`Çme
 (è
	`__©Œibu‹__
((
	`__w¬nšg__
 (
msg
)))

	)

138 
	#__w¬Ç‰r
(
msg
è
	`__©Œibu‹__
((
	`__w¬nšg__
 (msg)))

	)

139 
	#__”rÜdeş
(
Çme
, 
msg
) \

140 
	`Çme
 (è
	`__©Œibu‹__
((
	`__”rÜ__
 (
msg
)))

	)

142 
	#__w¬ndeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

143 
	#__w¬Ç‰r
(
msg
)

	)

144 
	#__”rÜdeş
(
Çme
, 
msg
è
	`Çme
 ()

	)

148 #ià
__GNUC_PREREQ
 (2,97)

150 
	#__æex¬r
 []

	)

152 #ifdeà
__GNUC__


153 
	#__æex¬r
 [0]

	)

155 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

156 
	#__æex¬r
 []

	)

159 
	#__æex¬r
 [1]

	)

175 #ià
defšed
 
__GNUC__
 && __GNUC__ >= 2

177 
	#__REDIRECT
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

178 #ifdeà
__ılu¥lus


179 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

180 
Çme
 
´Ùo
 
__THROW
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs))

	)

182 
	#__REDIRECT_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
) \

183 
Çme
 
´Ùo
 
	`__asm__
 (
	`__ASMNAME
 (#®Ÿs)è
__THROW


	)

185 
	#__ASMNAME
(
úame
è
	`__ASMNAME2
 (
__USER_LABEL_PREFIX__
, cÇme)

	)

186 
	#__ASMNAME2
(
´efix
, 
úame
è
	`__STRING
 (´efixè
	)
cname

199 #ià!
defšed
 
__GNUC__
 || __GNUC__ < 2

200 
	#__©Œibu‹__
(
xyz
è

	)

206 #ià
__GNUC_PREREQ
 (2,96)

207 
	#__©Œibu‹_m®loc__
 
	`__©Œibu‹__
 ((
__m®loc__
))

	)

209 
	#__©Œibu‹_m®loc__


	)

215 #ià
__GNUC_PREREQ
 (2,96)

216 
	#__©Œibu‹_pu»__
 
	`__©Œibu‹__
 ((
__pu»__
))

	)

218 
	#__©Œibu‹_pu»__


	)

224 #ià
__GNUC_PREREQ
 (3,1)

225 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__u£d__
))

	)

226 
	#__©Œibu‹_nošlše__
 
	`__©Œibu‹__
 ((
__nošlše__
))

	)

228 
	#__©Œibu‹_u£d__
 
	`__©Œibu‹__
 ((
__unu£d__
))

	)

229 
	#__©Œibu‹_nošlše__


	)

233 #ià
__GNUC_PREREQ
 (3,2)

234 
	#__©Œibu‹_d•»ÿ‹d__
 
	`__©Œibu‹__
 ((
__d•»ÿ‹d__
))

	)

236 
	#__©Œibu‹_d•»ÿ‹d__


	)

245 #ià
__GNUC_PREREQ
 (2,8)

246 
	#__©Œibu‹_fÜm©_¬g__
(
x
è
	`__©Œibu‹__
 ((
	`__fÜm©_¬g__
 (x)))

	)

248 
	#__©Œibu‹_fÜm©_¬g__
(
x
è

	)

255 #ià
__GNUC_PREREQ
 (2,97)

256 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
) \

257 
	`__©Œibu‹__
 ((
	`__fÜm©__
 (
__¡rfmÚ__
, 
a
, 
b
)))

	)

259 
	#__©Œibu‹_fÜm©_¡rfmÚ__
(
a
,
b
è

	)

264 #ià
__GNUC_PREREQ
 (3,3)

265 
	#__nÚnuÎ
(
·¿ms
è
	`__©Œibu‹__
 ((
__nÚnuÎ__
…¬ams))

	)

267 
	#__nÚnuÎ
(
·¿ms
)

	)

272 #ià
__GNUC_PREREQ
 (3,4)

273 
	#__©Œibu‹_w¬n_unu£d_»suÉ__
 \

274 
	`__©Œibu‹__
 ((
__w¬n_unu£d_»suÉ__
))

	)

275 #ià
__USE_FORTIFY_LEVEL
 > 0

276 
	#__wur
 
__©Œibu‹_w¬n_unu£d_»suÉ__


	)

279 
	#__©Œibu‹_w¬n_unu£d_»suÉ__


	)

281 #iâdeà
__wur


282 
	#__wur


	)

286 #ià
__GNUC_PREREQ
 (3,2)

287 
	#__®ways_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__®ways_šlše__
))

	)

289 
	#__®ways_šlše
 
__šlše


	)

294 #ià!
defšed
 
__ılu¥lus
 || 
__GNUC_PREREQ
 (4,3)

295 #ià
defšed
 
__GNUC_STDC_INLINE__
 || defšed 
__ılu¥lus


296 
	#__ex‹º_šlše
 
__šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

297 #ià
__GNUC_PREREQ
 (4,3)

298 
	#__ex‹º_®ways_šlše
 \

299 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
, 
__¬tificŸl__
))

	)

301 
	#__ex‹º_®ways_šlše
 \

302 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__gnu_šlše__
))

	)

305 
	#__ex‹º_šlše
 
__šlše


	)

306 #ià
__GNUC_PREREQ
 (4,3)

307 
	#__ex‹º_®ways_šlše
 \

308 
__®ways_šlše
 
	`__©Œibu‹__
 ((
__¬tificŸl__
))

	)

310 
	#__ex‹º_®ways_šlše
 
__®ways_šlše


	)

317 #ià
__GNUC_PREREQ
 (4,3)

318 
	#__va_¬g_·ck
(è
	`__butš_va_¬g_·ck
 ()

	)

319 
	#__va_¬g_·ck_Ën
(è
	`__butš_va_¬g_·ck_Ën
 ()

	)

326 #ià!
__GNUC_PREREQ
 (2,8)

327 
	#__ex‹nsiÚ__


	)

331 #ià!
__GNUC_PREREQ
 (2,92)

332 
	#__»¡riù


	)

338 #ià
__GNUC_PREREQ
 (3,1è&& !
defšed
 
__GNUG__


339 
	#__»¡riù_¬r
 
__»¡riù


	)

341 #ifdeà
__GNUC__


342 
	#__»¡riù_¬r


	)

344 #ià
defšed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L

345 
	#__»¡riù_¬r
 
»¡riù


	)

348 
	#__»¡riù_¬r


	)

353 
	~<b™s/wÜdsize.h
>

355 #ià
defšed
 
__LONG_DOUBLE_MATH_OPTIONAL
 && defšed 
__NO_LONG_DOUBLE_MATH


356 
	#__LDBL_COMPAT
 1

	)

357 #ifdeà
__REDIRECT


358 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

359 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
) \

360 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

361 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT_NTH
 (Çme,…rÙo,‡lŸs)

	)

362 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
) \

363 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##Çme)

	)

364 
	#__LDBL_REDIR1_DECL
(
Çme
, 
®Ÿs
) \

365 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 (#®Ÿs));

	)

366 
	#__LDBL_REDIR_DECL
(
Çme
) \

367 
	`__ty³of
 (
Çme
èÇm
	`__asm
 (
	`__ASMNAME
 ("__Ædbl_" #Çme));

	)

368 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

369 
	`__LDBL_REDIR1
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

370 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

371 
	`__LDBL_REDIR1_NTH
 (
Çme
, 
´Ùo
, 
__Ædbl_
##
®Ÿs
)

	)

374 #ià!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT


375 
	#__LDBL_REDIR1
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm
	)
proto

376 
	#__LDBL_REDIR
(
Çme
, 
´Ùo
èÇm
	)
proto

377 
	#__LDBL_REDIR1_NTH
(
Çme
, 
´Ùo
, 
®Ÿs
èÇm´ÙØ
__THROW


	)

378 
	#__LDBL_REDIR_NTH
(
Çme
, 
´Ùo
èÇm´ÙØ
__THROW


	)

379 
	#__LDBL_REDIR_DECL
(
Çme
)

	)

380 #ifdeà
__REDIRECT


381 
	#__REDIRECT_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
è
	`__REDIRECT
 (Çme,…rÙo,‡lŸs)

	)

382 
	#__REDIRECT_NTH_LDBL
(
Çme
, 
´Ùo
, 
®Ÿs
) \

383 
	`__REDIRECT_NTH
 (
Çme
, 
´Ùo
, 
®Ÿs
)

	)

	@/usr/include/asm/errno.h

1 
	~<asm-g’”ic/”ºo.h
>

	@/usr/include/bits/libc-lock.h

20 #iâdeà
_BITS_LIBC_LOCK_H


21 
	#_BITS_LIBC_LOCK_H
 1

	)

23 
	~<±h»ad.h
>

24 
	#__Ãed_NULL


	)

25 
	~<¡ddef.h
>

34 #ifdeà
_LIBC


35 
	~<lowËv–lock.h
>

36 
	~<s.h
>

37 
	~<±h»ad-funùiÚs.h
>

38 
	~<”ºo.h
>

39 
	~<gnu/İtiÚ-groups.h
>

43 #ià
defšed
 
_LIBC
 || defšed 
_IO_MTSAFE_IO


44 #ià(
defšed
 
NOT_IN_libc
 && !defšed 
IS_IN_lib±h»ad
è|| !defšed 
_LIBC


45 
±h»ad_mu‹x_t
 
	t__libc_lock_t
;

46 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__libc_lock_»cursive_t
;

48 
	t__libc_lock_t
;

49 ¡ruù { 
	mlock
; 
	mút
; *
	mowÃr
; } 
	t__libc_lock_»cursive_t
;

51 ¡ruù { 
±h»ad_mu‹x_t
 
	mmu‹x
; } 
	t__¹ld_lock_»cursive_t
;

52 #ifdeà
__USE_UNIX98


53 
±h»ad_rwlock_t
 
	t__libc_rwlock_t
;

55 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

58 
__libc_lock_İaque__
 
	t__libc_lock_t
;

59 
__libc_lock_»cursive_İaque__
 
	t__libc_lock_»cursive_t
;

60 
__libc_rwlock_İaque__
 
	t__libc_rwlock_t
;

64 
±h»ad_key_t
 
	t__libc_key_t
;

73 
	#__libc_lock_defše
(
CLASS
,
NAME
) \

74 
CLASS
 
__libc_lock_t
 
NAME
;

	)

75 
	#__libc_rwlock_defše
(
CLASS
,
NAME
) \

76 
CLASS
 
__libc_rwlock_t
 
NAME
;

	)

77 
	#__libc_lock_defše_»cursive
(
CLASS
,
NAME
) \

78 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

79 
	#__¹ld_lock_defše_»cursive
(
CLASS
,
NAME
) \

80 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
;

	)

91 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

92 #ià
LLL_LOCK_INITIALIZER
 == 0

93 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

94 
CLASS
 
__libc_lock_t
 
NAME
;

	)

96 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

97 
CLASS
 
__libc_lock_t
 
NAME
 = 
LLL_LOCK_INITIALIZER
;

	)

100 #ià
__LT_SPINLOCK_INIT
 == 0

101 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

102 
CLASS
 
__libc_lock_t
 
NAME
;

	)

104 
	#__libc_lock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

105 
CLASS
 
__libc_lock_t
 
NAME
 = 
PTHREAD_MUTEX_INITIALIZER
;

	)

109 
	#__libc_rwlock_defše_š™Ÿlized
(
CLASS
,
NAME
) \

110 
CLASS
 
__libc_rwlock_t
 
NAME
 = 
PTHREAD_RWLOCK_INITIALIZER
;

	)

114 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

115 #ià
LLL_LOCK_INITIALIZER
 == 0

116 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

117 
CLASS
 
__libc_lock_»cursive_t
 
NAME
;

	)

119 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

120 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

122 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

123 { 
LLL_LOCK_INITIALIZER
, 0, 
NULL
 }

	)

125 
	#__libc_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

126 
CLASS
 
__libc_lock_»cursive_t
 
NAME
 = 
_LIBC_LOCK_RECURSIVE_INITIALIZER
;

	)

127 
	#_LIBC_LOCK_RECURSIVE_INITIALIZER
 \

128 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

131 
	#__¹ld_lock_defše_š™Ÿlized_»cursive
(
CLASS
,
NAME
) \

132 
CLASS
 
__¹ld_lock_»cursive_t
 
NAME
 = 
_RTLD_LOCK_RECURSIVE_INITIALIZER
;

	)

133 
	#_RTLD_LOCK_RECURSIVE_INITIALIZER
 \

134 {
PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
}

	)

136 
	#__¹ld_lock_š™Ÿlize
(
NAME
) \

137 (è((
NAME
èğ(
__¹ld_lock_»cursive_t
è
_RTLD_LOCK_RECURSIVE_INITIALIZER
)

	)

144 #ifdeà
__PIC__


145 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

146 (
	`__ex‹nsiÚ__
 ({ 
	`__ty³of
 (
FUNC
è*
_â
 = (FUNC); \

147 
_â
 !ğ
NULL
 ? (*_âè
ARGS
 : 
ELSE
; }))

	)

149 
	#__libc_maybe_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

150 (
FUNC
 !ğ
NULL
 ? FUNC 
ARGS
 : 
ELSE
)

	)

154 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


155 
	#PTFAVAIL
(
NAME
è
__libc_±h»ad_funùiÚs_š™


	)

156 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

157 (
__libc_±h»ad_funùiÚs_š™
 ? 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
è: 
ELSE
)

	)

158 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

159 
	`PTHFCT_CALL
 (
±r_
##
FUNC
, 
ARGS
)

	)

161 
	#PTFAVAIL
(
NAME
è(NAME !ğ
NULL
)

	)

162 
	#__libc_±f_ÿÎ
(
FUNC
, 
ARGS
, 
ELSE
) \

163 
	`__libc_maybe_ÿÎ
 (
FUNC
, 
ARGS
, 
ELSE
)

	)

164 
	#__libc_±f_ÿÎ_®ways
(
FUNC
, 
ARGS
) \

165 
FUNC
 
ARGS


	)

171 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

172 
	#__libc_lock_š™
(
NAME
è((NAMEèğ
LLL_LOCK_INITIALIZER
, 0)

	)

174 
	#__libc_lock_š™
(
NAME
) \

175 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_š™
, (&(
NAME
), 
NULL
), 0)

	)

177 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


180 
	#__libc_rwlock_š™
(
NAME
) \

181 (
	`__butš_mem£t
 (&(
NAME
), '\0',  (NAME)), 0)

	)

183 
	#__libc_rwlock_š™
(
NAME
) \

184 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_š™
, (&(
NAME
), 
NULL
), 0)

	)

188 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

189 
	#__libc_lock_š™_»cursive
(
NAME
) \

190 ((
NAME
èğ(
__libc_lock_»cursive_t
è
_LIBC_LOCK_RECURSIVE_INITIALIZER
, 0)

	)

192 
	#__libc_lock_š™_»cursive
(
NAME
) \

194 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

196 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

197 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

198 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

199 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

200 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

202 } 0)

	)

205 
	#__¹ld_lock_š™_»cursive
(
NAME
) \

207 ià(
__±h»ad_mu‹x_š™
 !ğ
NULL
) \

209 
±h»ad_mu‹x©Œ_t
 
__©Œ
; \

210 
	`__±h»ad_mu‹x©Œ_š™
 (&
__©Œ
); \

211 
	`__±h»ad_mu‹x©Œ_£‰y³
 (&
__©Œ
, 
PTHREAD_MUTEX_RECURSIVE_NP
); \

212 
	`__±h»ad_mu‹x_š™
 (&(
NAME
).
mu‹x
, &
__©Œ
); \

213 
	`__±h»ad_mu‹x©Œ_de¡roy
 (&
__©Œ
); \

215 } 0)

	)

220 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

221 
	#__libc_lock_fši
(
NAME
è((è0)

	)

223 
	#__libc_lock_fši
(
NAME
) \

224 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

226 #ià
defšed
 
SHARED
 && !defšed 
NOT_IN_libc


227 
	#__libc_rwlock_fši
(
NAME
è((è0)

	)

229 
	#__libc_rwlock_fši
(
NAME
) \

230 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_de¡roy
, (&(
NAME
)), 0)

	)

234 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

235 
	#__libc_lock_fši_»cursive
(
NAME
è((è0)

	)

237 
	#__libc_lock_fši_»cursive
(
NAME
) \

238 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_de¡roy
, (&(
NAME
)), 0)

	)

242 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

243 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

247 
__libc_lock_lock_â
 (
__libc_lock_t
 *);

248 
libc_hidd’_´Ùo
 (
__libc_lock_lock_â
);

250 #ià
__OPTION_EGLIBC_BIG_MACROS


251 
	#__libc_lock_lock
(
NAME
) \

252 ({ 
	`Îl_lock
 (
NAME
, 
LLL_PRIVATE
); 0; })

	)

254 
	#__libc_lock_lock
(
NAME
) \

255 
	`__libc_lock_lock_â
 (&(
NAME
))

	)

258 
	#__libc_lock_lock
(
NAME
) \

259 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
)), 0)

	)

261 
	#__libc_rwlock_rdlock
(
NAME
) \

262 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_rdlock
, (&(
NAME
)), 0)

	)

263 
	#__libc_rwlock_w¾ock
(
NAME
) \

264 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_w¾ock
, (&(
NAME
)), 0)

	)

267 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

268 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

272 
__libc_lock_lock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

273 
libc_hidd’_´Ùo
 (
__libc_lock_lock_»cursive_â
);

275 #ià
__OPTION_EGLIBC_BIG_MACROS


276 
	#__libc_lock_lock_»cursive
(
NAME
) \

278 *
£lf
 = 
THREAD_SELF
; \

279 ià((
NAME
).
owÃr
 !ğ
£lf
) \

281 
	`Îl_lock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

282 (
NAME
).
owÃr
 = 
£lf
; \

284 ++(
NAME
).
út
; \

285 } 0)

	)

287 
	#__libc_lock_lock_»cursive
(
NAME
) \

288 
	`__libc_lock_lock_»cursive_â
 (&(
NAME
))

	)

291 
	#__libc_lock_lock_»cursive
(
NAME
) \

292 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

296 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

297 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

301 
__libc_lock_Œylock_â
 (
__libc_lock_t
 *);

302 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_â
);

304 #ià
__OPTION_EGLIBC_BIG_MACROS


305 
	#__libc_lock_Œylock
(
NAME
) \

306 
	`Îl_Œylock
 (
NAME
)

	)

308 
	#__libc_lock_Œylock
(
NAME
) \

309 
	`__libc_lock_Œylock_â
 (&(
NAME
))

	)

312 
	#__libc_lock_Œylock
(
NAME
) \

313 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

315 
	#__libc_rwlock_Œyrdlock
(
NAME
) \

316 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyrdlock
, (&(
NAME
)), 0)

	)

317 
	#__libc_rwlock_Œyw¾ock
(
NAME
) \

318 
	`__libc_maybe_ÿÎ
 (
__±h»ad_rwlock_Œyw¾ock
, (&(
NAME
)), 0)

	)

321 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

322 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

326 
__libc_lock_Œylock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

327 
libc_hidd’_´Ùo
 (
__libc_lock_Œylock_»cursive_â
);

329 #ià
__OPTION_EGLIBC_BIG_MACROS


330 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

332 
»suÉ
 = 0; \

333 *
£lf
 = 
THREAD_SELF
; \

334 ià((
NAME
).
owÃr
 !ğ
£lf
) \

336 ià(
	`Îl_Œylock
 ((
NAME
).
lock
) == 0) \

338 (
NAME
).
owÃr
 = 
£lf
; \

339 (
NAME
).
út
 = 1; \

342 
»suÉ
 = 
EBUSY
; \

345 ++(
NAME
).
út
; \

346 
»suÉ
; \

347 })

	)

349 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

350 
	`__libc_lock_Œylock_»cursive_â
 (&(
NAME
))

	)

353 
	#__libc_lock_Œylock_»cursive
(
NAME
) \

354 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
)), 0)

	)

357 
	#__¹ld_lock_Œylock_»cursive
(
NAME
) \

358 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_Œylock
, (&(
NAME
).
mu‹x
), 0)

	)

361 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

362 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

366 
__libc_lock_uÆock_â
 (
__libc_lock_t
 *);

367 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_â
);

369 #ià
__OPTION_EGLIBC_BIG_MACROS


370 
	#__libc_lock_uÆock
(
NAME
) \

371 
	`Îl_uÆock
 (
NAME
, 
LLL_PRIVATE
)

	)

373 
	#__libc_lock_uÆock
(
NAME
) \

374 
	`__libc_lock_uÆock_â
 (&(
NAME
))

	)

377 
	#__libc_lock_uÆock
(
NAME
) \

378 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

380 
	#__libc_rwlock_uÆock
(
NAME
) \

381 
	`__libc_±f_ÿÎ
 (
__±h»ad_rwlock_uÆock
, (&(
NAME
)), 0)

	)

384 #ià
defšed
 
_LIBC
 && (!defšed 
NOT_IN_libc
 || defšed 
IS_IN_lib±h»ad
)

385 #ià
__OPTION_EGLIBC_BIG_MACROS
 != 1

389 
__libc_lock_uÆock_»cursive_â
 (
__libc_lock_»cursive_t
 *);

390 
libc_hidd’_´Ùo
 (
__libc_lock_uÆock_»cursive_â
);

392 #ià
__OPTION_EGLIBC_BIG_MACROS


394 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

396 ià(--(
NAME
).
út
 == 0) \

398 (
NAME
).
owÃr
 = 
NULL
; \

399 
	`Îl_uÆock
 ((
NAME
).
lock
, 
LLL_PRIVATE
); \

401 } 0)

	)

403 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

404 
	`__libc_lock_uÆock_»cursive_â
 (&(
NAME
))

	)

407 
	#__libc_lock_uÆock_»cursive
(
NAME
) \

408 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
)), 0)

	)

411 #ià
defšed
 
_LIBC
 && defšed 
SHARED


412 
	#__¹ld_lock_deçuÉ_lock_»cursive
(
lock
) \

413 ++((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

415 
	#__¹ld_lock_deçuÉ_uÆock_»cursive
(
lock
) \

416 --((
±h»ad_mu‹x_t
 *)(
lock
))->
__d©a
.
__couÁ
;

	)

418 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

419 
	`GL
(
dl_¹ld_lock_»cursive
è(&(
NAME
).
mu‹x
)

	)

421 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

422 
	`GL
(
dl_¹ld_uÆock_»cursive
è(&(
NAME
).
mu‹x
)

	)

424 
	#__¹ld_lock_lock_»cursive
(
NAME
) \

425 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_lock
, (&(
NAME
).
mu‹x
), 0)

	)

427 
	#__¹ld_lock_uÆock_»cursive
(
NAME
) \

428 
	`__libc_maybe_ÿÎ
 (
__±h»ad_mu‹x_uÆock
, (&(
NAME
).
mu‹x
), 0)

	)

432 #ià
PTHREAD_ONCE_INIT
 == 0

435 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

436 
CLASS
 
±h»ad_Úû_t
 
NAME


	)

438 
	#__libc_Úû_defše
(
CLASS
, 
NAME
) \

439 
CLASS
 
±h»ad_Úû_t
 
NAME
 = 
PTHREAD_ONCE_INIT


	)

443 
	#__libc_Úû
(
ONCE_CONTROL
, 
INIT_FUNCTION
) \

445 ià(
	`PTFAVAIL
 (
__±h»ad_Úû
)) \

446 
	`__libc_±f_ÿÎ_®ways
 (
__±h»ad_Úû
, (&(
ONCE_CONTROL
), \

447 
INIT_FUNCTION
)); \

448 ià((
ONCE_CONTROL
è=ğ
PTHREAD_ONCE_INIT
) { \

449 
	`INIT_FUNCTION
 (); \

450 (
ONCE_CONTROL
) |= 2; \

452 } 0)

	)

455 
	#__libc_Úû_g‘
(
ONCE_CONTROL
) \

456 ((
ONCE_CONTROL
è!ğ
PTHREAD_ONCE_INIT
)

	)

462 
_±h»ad_ş—nup_push
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

463 (*
routše
è(*), *
¬g
);

464 
	`_±h»ad_ş—nup_pİ
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

465 
execu‹
);

466 
	`_±h»ad_ş—nup_push_deãr
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

467 (*
routše
è(*), *
¬g
);

468 
	`_±h»ad_ş—nup_pİ_»¡Üe
 (
_±h»ad_ş—nup_bufãr
 *
bufãr
,

469 
execu‹
);

472 
	#__libc_ş—nup_»giÚ_¡¬t
(
DOIT
, 
FCT
, 
ARG
) \

473 { 
_±h»ad_ş—nup_bufãr
 
_bufãr
; \

474 
_ava
; \

475 ià(
DOIT
) { \

476 
_ava
 = 
	`PTFAVAIL
 (
_±h»ad_ş—nup_push_deãr
); \

477 ià(
_ava
) { \

478 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_push_deãr
, (&
_bufãr
, 
FCT
, \

479 
ARG
)); \

481 
_bufãr
.
__routše
 = (
FCT
); \

482 
_bufãr
.
__¬g
 = (
ARG
); \

485 
_ava
 = 0; \

486 }

	)

489 
	#__libc_ş—nup_»giÚ_’d
(
DOIT
) \

490 ià(
_ava
) { \

491 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

492 } ià(
DOIT
) \

493 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
); \

494 
	}

	)
}

497 
	#__libc_ş—nup_’d
(
DOIT
) \

498 ià(
_ava
) { \

499 
	`__libc_±f_ÿÎ_®ways
 (
_±h»ad_ş—nup_pİ_»¡Üe
, (&
_bufãr
, 
DOIT
));\

500 } ià(
DOIT
) \

501 
_bufãr
.
	`__routše
 (_bufãr.
__¬g
)

	)

505 
__ex‹º_šlše
 

506 
	$__libc_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
f
)

508 ià(
f
->
__do_™
)

509 
f
->
	`__ÿnûl_routše
 (f->
__ÿnûl_¬g
);

510 
	}
}

512 
	#__libc_ş—nup_push
(
fù
, 
¬g
) \

514 
__±h»ad_ş—nup_äame
 
__şäame
 \

515 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__libc_ş—nup_routše
))) \

516 ğ{ .
__ÿnûl_routše
 = (
fù
), .
__ÿnûl_¬g
 = (
¬g
), \

517 .
__do_™
 = 1 };

	)

519 
	#__libc_ş—nup_pİ
(
execu‹
) \

520 
__şäame
.
__do_™
 = (
execu‹
); \

521 } 0)

	)

525 
	#__libc_key_ü—‹
(
KEY
, 
DESTRUCTOR
) \

526 
	`__libc_±f_ÿÎ
 (
__±h»ad_key_ü—‹
, (
KEY
, 
DESTRUCTOR
), 1)

	)

529 
	#__libc_g‘¥ecific
(
KEY
) \

530 
	`__libc_±f_ÿÎ
 (
__±h»ad_g‘¥ecific
, (
KEY
), 
NULL
)

	)

533 
	#__libc_£t¥ecific
(
KEY
, 
VALUE
) \

534 
	`__libc_±f_ÿÎ
 (
__±h»ad_£t¥ecific
, (
KEY
, 
VALUE
), 0)

	)

540 
	#__libc_©fÜk
(
PREPARE
, 
PARENT
, 
CHILD
) \

541 
	`__»gi¡”_©fÜk
 (
PREPARE
, 
PARENT
, 
CHILD
, 
NULL
)

	)

542 
__»gi¡”_©fÜk
 ((*
__´•¬e
) (),

543 (*
__·»Á
) (),

544 (*
__chd
) (),

545 *
__dso_hªdË
);

550 
	`__±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

551 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x_©Œ
);

553 
	`__±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

555 
	`__±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

557 
	`__±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

559 
	`__±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
);

561 
	`__±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

563 
	`__±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
);

565 
	`__±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

566 
__kšd
);

568 #ifdeà
__USE_UNIX98


569 
	`__±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__rwlock
,

570 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__©Œ
);

572 
	`__±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
);

574 
	`__±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

576 
	`__±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
);

578 
	`__±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

580 
	`__±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
);

582 
	`__±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
);

585 
	`__±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

586 (*
__de¡r_funùiÚ
) (*));

588 
	`__±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

589 
__cÚ¡
 *
__poš‹r
);

591 *
	`__±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
);

593 
	`__±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

594 (*
__š™_routše
) ());

596 
	`__±h»ad_©fÜk
 ((*
__´•¬e
) (),

597 (*
__·»Á
) (),

598 (*
__chd
) ());

604 #iâdeà
__NO_WEAK_PTHREAD_ALIASES


605 #ifdeà
w—k_ex‹º


606 #ià
_LIBC


607 
	~<bp-sym.h
>

609 
	#BP_SYM
(
sym
è
	)
sym

611 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_š™
))

612 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_de¡roy
))

613 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_lock
))

614 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_Œylock
))

615 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x_uÆock
))

616 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_š™
))

617 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_de¡roy
))

618 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_mu‹x©Œ_£‰y³
))

619 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_š™
))

620 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_de¡roy
))

621 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_rdlock
))

622 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyrdlock
))

623 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_w¾ock
))

624 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_Œyw¾ock
))

625 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_rwlock_uÆock
))

626 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_key_ü—‹
))

627 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_£t¥ecific
))

628 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_g‘¥ecific
))

629 
	`w—k_ex‹º
 (
	$BP_SYM
 (
__±h»ad_Úû
))

630 
	$w—k_ex‹º
 (
__±h»ad_š™Ÿlize
)

631 
	$w—k_ex‹º
 (
__±h»ad_©fÜk
)

632 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_push_deãr
))

633 
	`w—k_ex‹º
 (
	$BP_SYM
 (
_±h»ad_ş—nup_pİ_»¡Üe
))

634 
	`w—k_ex‹º
 (
	$BP_SYM
 (
±h»ad_£tÿnûl¡©e
))

636 #´agm¨
w—k
 
__±h»ad_mu‹x_š™


637 #´agm¨
w—k
 
__±h»ad_mu‹x_de¡roy


638 #´agm¨
w—k
 
__±h»ad_mu‹x_lock


639 #´agm¨
w—k
 
__±h»ad_mu‹x_Œylock


640 #´agm¨
w—k
 
__±h»ad_mu‹x_uÆock


641 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_š™


642 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_de¡roy


643 #´agm¨
w—k
 
__±h»ad_mu‹x©Œ_£‰y³


644 #´agm¨
w—k
 
__±h»ad_rwlock_de¡roy


645 #´agm¨
w—k
 
__±h»ad_rwlock_rdlock


646 #´agm¨
w—k
 
__±h»ad_rwlock_Œyrdlock


647 #´agm¨
w—k
 
__±h»ad_rwlock_w¾ock


648 #´agm¨
w—k
 
__±h»ad_rwlock_Œyw¾ock


649 #´agm¨
w—k
 
__±h»ad_rwlock_uÆock


650 #´agm¨
w—k
 
__±h»ad_key_ü—‹


651 #´agm¨
w—k
 
__±h»ad_£t¥ecific


652 #´agm¨
w—k
 
__±h»ad_g‘¥ecific


653 #´agm¨
w—k
 
__±h»ad_Úû


654 #´agm¨
w—k
 
__±h»ad_š™Ÿlize


655 #´agm¨
w—k
 
__±h»ad_©fÜk


656 #´agm¨
w—k
 
_±h»ad_ş—nup_push_deãr


657 #´agm¨
w—k
 
_±h»ad_ş—nup_pİ_»¡Üe


658 #´agm¨
w—k
 
±h»ad_£tÿnûl¡©e


	@/usr/include/gconv.h

23 #iâdeà
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<ã©u»s.h
>

27 
	#__Ãed_mb¡©e_t


	)

28 
	#__Ãed_wšt_t


	)

29 
	~<wch¬.h
>

30 
	#__Ãed_size_t


	)

31 
	#__Ãed_wch¬_t


	)

32 
	~<¡ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¬_t
è0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002

64 
	g__gcÚv_¡•
;

65 
	g__gcÚv_¡•_d©a
;

66 
	g__gcÚv_lßded_objeù
;

67 
	g__gcÚv_Œªs_d©a
;

71 (*
	t__gcÚv_fù
è(
	t__gcÚv_¡•
 *, 
	t__gcÚv_¡•_d©a
 *,

72 
	t__cÚ¡
 **, __const *,

73 **, 
	tsize_t
 *, , );

76 
	$wšt_t
 (*
	t__gcÚv_btowc_fù
è(
	t__gcÚv_¡•
 *, );

79 (*
	t__gcÚv_š™_fù
è(
	t__gcÚv_¡•
 *);

80 (*
	t__gcÚv_’d_fù
è(
	t__gcÚv_¡•
 *);

84 (*
	t__gcÚv_Œªs_fù
è(
	t__gcÚv_¡•
 *,

85 
	t__gcÚv_¡•_d©a
 *, *,

86 
	t__cÚ¡
 *,

87 
	t__cÚ¡
 **,

88 
	t__cÚ¡
 *, **,

89 
	tsize_t
 *);

92 (*
	t__gcÚv_Œªs_cÚ‹xt_fù
è(*, 
	t__cÚ¡
 *,

93 
	t__cÚ¡
 *,

97 (*
	t__gcÚv_Œªs_qu”y_fù
è(
	t__cÚ¡
 *, __const ***,

98 
	tsize_t
 *);

101 (*
	t__gcÚv_Œªs_š™_fù
) (**, const *);

102 (*
	t__gcÚv_Œªs_’d_fù
) (*);

104 
	s__gcÚv_Œªs_d©a


107 
__gcÚv_Œªs_fù
 
__Œªs_fù
;

108 
__gcÚv_Œªs_cÚ‹xt_fù
 
__Œªs_cÚ‹xt_fù
;

109 
__gcÚv_Œªs_’d_fù
 
__Œªs_’d_fù
;

110 *
__d©a
;

111 
__gcÚv_Œªs_d©a
 *
__Ãxt
;

116 
	s__gcÚv_¡•


118 
__gcÚv_lßded_objeù
 *
__shlib_hªdË
;

119 
__cÚ¡
 *
__modÇme
;

121 
__couÁ”
;

123 *
__äom_Çme
;

124 *
__to_Çme
;

126 
__gcÚv_fù
 
__fù
;

127 
__gcÚv_btowc_fù
 
__btowc_fù
;

128 
__gcÚv_š™_fù
 
__š™_fù
;

129 
__gcÚv_’d_fù
 
__’d_fù
;

133 
__mš_Ãeded_äom
;

134 
__max_Ãeded_äom
;

135 
__mš_Ãeded_to
;

136 
__max_Ãeded_to
;

139 
__¡©eful
;

141 *
__d©a
;

146 
	s__gcÚv_¡•_d©a


148 *
__outbuf
;

149 *
__outbuãnd
;

153 
__æags
;

157 
__švoÿtiÚ_couÁ”
;

161 
__š‹º®_u£
;

163 
__mb¡©e_t
 *
__¡©•
;

164 
__mb¡©e_t
 
__¡©e
;

168 
__gcÚv_Œªs_d©a
 *
__Œªs
;

173 
	s__gcÚv_šfo


175 
size_t
 
__n¡•s
;

176 
__gcÚv_¡•
 *
__¡•s
;

177 
__ex‹nsiÚ__
 
__gcÚv_¡•_d©a
 
__d©a
 
__æex¬r
;

178 } *
	t__gcÚv_t
;

	@/usr/include/gnu/stubs-32.h

6 #ifdeà
_LIBC


7 #”rÜ 
AµliÿtiÚs
 
may
 
nÙ
 
defše
 
the
 
maüo
 
_LIBC


10 
	#__¡ub___k”Ãl_co¦


	)

11 
	#__¡ub___k”Ãl_sšl


	)

12 
	#__¡ub___k”Ãl_Æ


	)

13 
	#__¡ub_chæags


	)

14 
	#__¡ub_ç‰ach


	)

15 
	#__¡ub_fchæags


	)

16 
	#__¡ub_fd‘ach


	)

17 
	#__¡ub_g‰y


	)

18 
	#__¡ub_lchmod


	)

19 
	#__¡ub_»voke


	)

20 
	#__¡ub_£ogš


	)

21 
	#__¡ub_sig»tuº


	)

22 
	#__¡ub_s¡k


	)

23 
	#__¡ub_¡ty


	)

	@/usr/include/linux/limits.h

1 #iâdeà
_LINUX_LIMITS_H


2 
	#_LINUX_LIMITS_H


	)

4 
	#NR_OPEN
 1024

	)

6 
	#NGROUPS_MAX
 65536

	)

7 
	#ARG_MAX
 131072

	)

8 
	#LINK_MAX
 127

	)

9 
	#MAX_CANON
 255

	)

10 
	#MAX_INPUT
 255

	)

11 
	#NAME_MAX
 255

	)

12 
	#PATH_MAX
 4096

	)

13 
	#PIPE_BUF
 4096

	)

14 
	#XATTR_NAME_MAX
 255

	)

15 
	#XATTR_SIZE_MAX
 65536

	)

16 
	#XATTR_LIST_MAX
 65536

	)

18 
	#RTSIG_MAX
 32

	)

	@/usr/include/wchar.h

24 #iâdeà
_WCHAR_H


26 #ià!
defšed
 
__Ãed_mb¡©e_t
 && !defšed 
__Ãed_wšt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<ã©u»s.h
>

31 #ifdeà
_WCHAR_H


33 
	#__Ãed___FILE


	)

34 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


35 
	#__Ãed_FILE


	)

37 
	~<¡dio.h
>

39 
	#__Ãed___va_li¡


	)

40 
	~<¡d¬g.h
>

42 
	~<b™s/wch¬.h
>

45 
	#__Ãed_size_t


	)

46 
	#__Ãed_wch¬_t


	)

47 
	#__Ãed_NULL


	)

49 #ià
defšed
 
_WCHAR_H
 || defšed 
__Ãed_wšt_t
 || !defšed 
__WINT_TYPE__


50 #undeà
__Ãed_wšt_t


51 
	#__Ãed_wšt_t


	)

52 
	~<¡ddef.h
>

55 #ià
defšed
 
__ılu¥lus
 && 
__GNUC_PREREQ
 (4, 4)

56 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

61 #iâdeà
_WINT_T


66 
	#_WINT_T


	)

67 
	twšt_t
;

71 #ià
defšed
 
__ılu¥lus
 && defšed 
_GLIBCPP_USE_NAMESPACES
 \

72 && 
defšed
 
__WINT_TYPE__


73 
__BEGIN_NAMESPACE_STD


74 
__WINT_TYPE__
 
	twšt_t
;

75 
	g__END_NAMESPACE_STD


80 #ià(
defšed
 
_WCHAR_H
 || defšed 
__Ãed_mb¡©e_t
è&& !defšed 
__mb¡©e_t_defšed


81 
	#__mb¡©e_t_defšed
 1

	)

85 
	m__couÁ
;

88 #ifdeà
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wšt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__v®ue
;

95 } 
	t__mb¡©e_t
;

97 #undeà
__Ãed_mb¡©e_t


102 #ifdeà
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb¡©e_t
 
	tmb¡©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifdeà
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb¡©e_t
)

112 #iâdeà
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #iâdeà
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #ià
defšed
 
__USE_XOPEN
 && !defšed 
__USE_UNIX98


125 
	~<wùy³.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¬_t
 *
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

145 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

147 
wch¬_t
 *
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

148 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¬_t
 *
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

153 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

155 
wch¬_t
 *
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

156 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
)

161 
__THROW
 
__©Œibu‹_pu»__
;

163 
	$wc¢cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©Œibu‹_pu»__
;

165 
__END_NAMESPACE_STD


167 #ifdeà
__USE_XOPEN2K8


169 
	$wcsÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

172 
	$wc¢ÿ£cmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

173 
size_t
 
__n
è
__THROW
;

177 
	~<xloÿË.h
>

179 
	$wcsÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

180 
__loÿË_t
 
__loc
è
__THROW
;

182 
	$wc¢ÿ£cmp_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

183 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscŞl
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
è
__THROW
;

193 
size_t
 
	$wcsxäm
 (
wch¬_t
 *
__»¡riù
 
__s1
,

194 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifdeà
__USE_XOPEN2K8


203 
	$wcscŞl_l
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
,

204 
__loÿË_t
 
__loc
è
__THROW
;

209 
size_t
 
	$wcsxäm_l
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

210 
size_t
 
__n
, 
__loÿË_t
 
__loc
è
__THROW
;

213 
wch¬_t
 *
	$wcsdup
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_m®loc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¬_t
 *
	$wcschr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

221 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"è
__©Œibu‹_pu»__
;

224 
wch¬_t
 *
	$wcschr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

225 
__THROW
 
__©Œibu‹_pu»__
;

228 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¬_t
 *
	$wc¤chr
 (
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

230 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

231 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

232 
__THROW
 
	`__asm
 ("wc¤chr"è
__©Œibu‹_pu»__
;

234 
wch¬_t
 *
	$wc¤chr
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, wch¬_ˆ
__wc
)

235 
__THROW
 
__©Œibu‹_pu»__
;

237 
__END_NAMESPACE_STD


239 #ifdeà
__USE_GNU


242 
wch¬_t
 *
	$wcschºul
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__wc
)

243 
__THROW
 
__©Œibu‹_pu»__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__»jeù
)

250 
__THROW
 
__©Œibu‹_pu»__
;

253 
size_t
 
	$wcs¥n
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

254 
__THROW
 
__©Œibu‹_pu»__
;

256 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¬_t
 *
	$wc¥brk
 (
wch¬_t
 *
__wcs
, 
__cÚ¡
 wch¬_ˆ*
__acû±
)

258 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

259 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
,

260 
__cÚ¡
 
wch¬_t
 *
__acû±
)

261 
__THROW
 
	`__asm
 ("wc¥brk"è
__©Œibu‹_pu»__
;

263 
wch¬_t
 *
	$wc¥brk
 (
__cÚ¡
 
wch¬_t
 *
__wcs
, __cÚ¡ wch¬_ˆ*
__acû±
)

264 
__THROW
 
__©Œibu‹_pu»__
;

267 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¬_t
 *
	$wcs¡r
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

269 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

270 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

271 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

272 
__THROW
 
	`__asm
 ("wcs¡r"è
__©Œibu‹_pu»__
;

274 
wch¬_t
 *
	$wcs¡r
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

275 
__THROW
 
__©Œibu‹_pu»__
;

279 
wch¬_t
 *
	$wc¡ok
 (
wch¬_t
 *
__»¡riù
 
__s
,

280 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__d–im
,

281 
wch¬_t
 **
__»¡riù
 
__±r
è
__THROW
;

284 
size_t
 
	$wc¦’
 (
__cÚ¡
 
wch¬_t
 *
__s
è
__THROW
 
__©Œibu‹_pu»__
;

285 
__END_NAMESPACE_STD


287 #ifdeà
__USE_XOPEN


289 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¬_t
 *
	$wcswcs
 (
wch¬_t
 *
__hay¡ack
, 
__cÚ¡
 wch¬_ˆ*
__ÃedË
)

291 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

292 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
,

293 
__cÚ¡
 
wch¬_t
 *
__ÃedË
)

294 
__THROW
 
	`__asm
 ("wcswcs"è
__©Œibu‹_pu»__
;

296 
wch¬_t
 *
	$wcswcs
 (
__cÚ¡
 
wch¬_t
 *
__hay¡ack
, __cÚ¡ wch¬_ˆ*
__ÃedË
)

297 
__THROW
 
__©Œibu‹_pu»__
;

301 #ifdeà
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Ën
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__maxËn
)

304 
__THROW
 
__©Œibu‹_pu»__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifdeà
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¬_t
 *
	$wmemchr
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

313 "C++" 
__cÚ¡
 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"è
__©Œibu‹_pu»__
;

317 
wch¬_t
 *
	$wmemchr
 (
__cÚ¡
 
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©Œibu‹_pu»__
;

322 
	$wmemcmp
 (
__cÚ¡
 
wch¬_t
 *
__s1
, __cÚ¡ wch¬_ˆ*
__s2
, 
size_t
 
__n
)

323 
__THROW
 
__©Œibu‹_pu»__
;

326 
wch¬_t
 *
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

327 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
è
__THROW
;

331 
wch¬_t
 *
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
)

332 
__THROW
;

335 
wch¬_t
 *
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
è
__THROW
;

336 
__END_NAMESPACE_STD


338 #ifdeà
__USE_GNU


341 
wch¬_t
 *
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
,

342 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
)

343 
__THROW
;

347 
__BEGIN_NAMESPACE_STD


350 
wšt_t
 
	$btowc
 (
__c
è
__THROW
;

354 
	$wùob
 (
wšt_t
 
__c
è
__THROW
;

358 
	$mbsš™
 (
__cÚ¡
 
mb¡©e_t
 *
__ps
è
__THROW
 
__©Œibu‹_pu»__
;

362 
size_t
 
	$mb¹owc
 (
wch¬_t
 *
__»¡riù
 
__pwc
,

363 
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

364 
mb¡©e_t
 *
__p
è
__THROW
;

367 
size_t
 
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wc
,

368 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

371 
size_t
 
	$__mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

372 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

373 
size_t
 
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

374 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

375 
__END_NAMESPACE_STD


377 #ifdeà
__USE_EXTERN_INLINES


383 
wšt_t
 
	$__btowc_®Ÿs
 (
__c
è
	`__asm
 ("btowc");

384 
__ex‹º_šlše
 
wšt_t


385 
	`__NTH
 (
	$btowc
 (
__c
))

386 {  (
	`__butš_cÚ¡ªt_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

387 ? (
wšt_t
è
__c
 : 
	`__btowc_®Ÿs
 (__c)); 
	}
}

389 
	$__wùob_®Ÿs
 (
wšt_t
 
__c
è
	`__asm
 ("wctob");

390 
__ex‹º_šlše
 

391 
	`__NTH
 (
	$wùob
 (
wšt_t
 
__wc
))

392 {  (
	`__butš_cÚ¡ªt_p
 (
__wc
è&& __wø>ğ
L
'\0' && __wc <= L'\x7f'

393 ? (è
__wc
 : 
	`__wùob_®Ÿs
 (__wc)); 
	}
}

395 
__ex‹º_šlše
 
size_t


396 
__NTH
 (
	$mb¾’
 (
__cÚ¡
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

397 
mb¡©e_t
 *
__»¡riù
 
__ps
))

398 {  (
__ps
 !ğ
NULL


399 ? 
	`mb¹owc
 (
NULL
, 
__s
, 
__n
, 
__ps
è: 
	`__mb¾’
 (__s, __n, NULL)); 
	}
}

402 
__BEGIN_NAMESPACE_STD


405 
size_t
 
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

406 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

407 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

411 
size_t
 
	$wc¤tombs
 (*
__»¡riù
 
__d¡
,

412 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
, 
size_t
 
__Ën
,

413 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

414 
__END_NAMESPACE_STD


417 #ifdef 
__USE_XOPEN2K8


420 
size_t
 
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

421 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

422 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

426 
size_t
 
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
,

427 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

428 
size_t
 
__nwc
, size_ˆ
__Ën
,

429 
mb¡©e_t
 *
__»¡riù
 
__ps
è
__THROW
;

434 #ifdeà
__USE_XOPEN


436 
	$wcwidth
 (
wch¬_t
 
__c
è
__THROW
;

440 
	$wcswidth
 (
__cÚ¡
 
wch¬_t
 *
__s
, 
size_t
 
__n
è
__THROW
;

444 
__BEGIN_NAMESPACE_STD


447 
	$wc¡od
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

448 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

449 
__END_NAMESPACE_STD


451 #ifdeà
__USE_ISOC99


452 
__BEGIN_NAMESPACE_C99


454 
	$wc¡of
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

455 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

456 
	$wc¡Şd
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

457 
wch¬_t
 **
__»¡riù
 
__’d±r
è
__THROW
;

458 
__END_NAMESPACE_C99


462 
__BEGIN_NAMESPACE_STD


465 
	$wc¡Ş
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

466 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
è
__THROW
;

470 
	$wc¡oul
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

471 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

472 
__THROW
;

473 
__END_NAMESPACE_STD


475 #ià
defšed
 
__USE_ISOC99
 || (defšed 
__GNUC__
 && defšed 
__USE_GNU
)

476 
__BEGIN_NAMESPACE_C99


479 
__ex‹nsiÚ__


480 
	$wc¡Şl
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

481 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

482 
__THROW
;

486 
__ex‹nsiÚ__


487 
	$wc¡ouÎ
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

488 
wch¬_t
 **
__»¡riù
 
__’d±r
,

489 
__ba£
è
__THROW
;

490 
__END_NAMESPACE_C99


493 #ià
defšed
 
__GNUC__
 && defšed 
__USE_GNU


496 
__ex‹nsiÚ__


497 
	$wc¡oq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

498 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
)

499 
__THROW
;

503 
__ex‹nsiÚ__


504 
	$wc¡ouq
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

505 
wch¬_t
 **
__»¡riù
 
__’d±r
,

506 
__ba£
è
__THROW
;

509 #ifdeà
__USE_GNU


523 
	~<xloÿË.h
>

527 
	$wc¡Ş_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

528 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__ba£
,

529 
__loÿË_t
 
__loc
è
__THROW
;

531 
	$wc¡oul_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

532 
wch¬_t
 **
__»¡riù
 
__’d±r
,

533 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

535 
__ex‹nsiÚ__


536 
	$wc¡Şl_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

537 
wch¬_t
 **
__»¡riù
 
__’d±r
,

538 
__ba£
, 
__loÿË_t
 
__loc
è
__THROW
;

540 
__ex‹nsiÚ__


541 
	$wc¡ouÎ_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

542 
wch¬_t
 **
__»¡riù
 
__’d±r
,

543 
__ba£
, 
__loÿË_t
 
__loc
)

544 
__THROW
;

546 
	$wc¡od_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

547 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

548 
__THROW
;

550 
	$wc¡of_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

551 
wch¬_t
 **
__»¡riù
 
__’d±r
, 
__loÿË_t
 
__loc
)

552 
__THROW
;

554 
	$wc¡Şd_l
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ÅŒ
,

555 
wch¬_t
 **
__»¡riù
 
__’d±r
,

556 
__loÿË_t
 
__loc
è
__THROW
;

560 #ifdef 
__USE_XOPEN2K8


563 
wch¬_t
 *
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

564 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
è
__THROW
;

568 
wch¬_t
 *
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

569 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
)

570 
__THROW
;

576 #ifdef 
__USE_XOPEN2K8


579 
__FILE
 *
	$İ’_wmem¡»am
 (
wch¬_t
 **
__buæoc
, 
size_t
 *
__siz–oc
è
__THROW
;

582 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


583 
__BEGIN_NAMESPACE_STD


586 
	$fwide
 (
__FILE
 *
__å
, 
__mode
è
__THROW
;

593 
	`fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

594 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

600 
	`w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

603 
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

604 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

605 
__THROW
 ;

611 
	`vfw´štf
 (
__FILE
 *
__»¡riù
 
__s
,

612 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

613 
__gnuc_va_li¡
 
__¬g
)

619 
	`vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

620 
__gnuc_va_li¡
 
__¬g
)

624 
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

625 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

626 
__gnuc_va_li¡
 
__¬g
)

627 
__THROW
 ;

634 
	`fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

635 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

641 
	`wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

644 
	$swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

645 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

646 
__THROW
 ;

648 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

649 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

650 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

651 #ifdeà
__REDIRECT


655 
	`__REDIRECT
 (
fwsÿnf
, (
__FILE
 *
__»¡riù
 
__¡»am
,

656 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

657 
__isoc99_fwsÿnf
)

659 
	`__REDIRECT
 (
wsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...),

660 
__isoc99_wsÿnf
)

662 
	`__REDIRECT_NTH
 (
swsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

663 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

664 ...), 
__isoc99_swsÿnf
)

667 
	`__isoc99_fwsÿnf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

668 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

669 
	`__isoc99_wsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

670 
	$__isoc99_swsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

671 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

672 
__THROW
;

673 
	#fwsÿnf
 
__isoc99_fwsÿnf


	)

674 
	#wsÿnf
 
__isoc99_wsÿnf


	)

675 
	#swsÿnf
 
__isoc99_swsÿnf


	)

679 
__END_NAMESPACE_STD


682 #ifdeà
__USE_ISOC99


683 
__BEGIN_NAMESPACE_C99


688 
	`vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

689 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

690 
__gnuc_va_li¡
 
__¬g
)

696 
	`vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

697 
__gnuc_va_li¡
 
__¬g
)

700 
	$vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

701 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

702 
__gnuc_va_li¡
 
__¬g
)

703 
__THROW
 ;

705 #ià!
defšed
 
__USE_GNU
 \

706 && (!
defšed
 
__LDBL_COMPAT
 || !defšed 
__REDIRECT
) \

707 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

708 #ifdeà
__REDIRECT


709 
	`__REDIRECT
 (
vfwsÿnf
, (
__FILE
 *
__»¡riù
 
__s
,

710 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

711 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vfwsÿnf
)

713 
	`__REDIRECT
 (
vwsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

714 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vwsÿnf
)

716 
	`__REDIRECT_NTH
 (
vswsÿnf
, (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

717 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

718 
__gnuc_va_li¡
 
__¬g
), 
__isoc99_vswsÿnf
)

721 
	`__isoc99_vfwsÿnf
 (
__FILE
 *
__»¡riù
 
__s
,

722 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

723 
__gnuc_va_li¡
 
__¬g
);

724 
	`__isoc99_vwsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

725 
__gnuc_va_li¡
 
__¬g
);

726 
	$__isoc99_vswsÿnf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s
,

727 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

728 
__gnuc_va_li¡
 
__¬g
è
__THROW
;

729 
	#vfwsÿnf
 
__isoc99_vfwsÿnf


	)

730 
	#vwsÿnf
 
__isoc99_vwsÿnf


	)

731 
	#vswsÿnf
 
__isoc99_vswsÿnf


	)

735 
__END_NAMESPACE_C99


739 
__BEGIN_NAMESPACE_STD


744 
wšt_t
 
	`fg‘wc
 (
__FILE
 *
__¡»am
);

745 
wšt_t
 
	`g‘wc
 (
__FILE
 *
__¡»am
);

751 
wšt_t
 
	`g‘wch¬
 ();

758 
wšt_t
 
	`åutwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

759 
wšt_t
 
	`putwc
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

765 
wšt_t
 
	`putwch¬
 (
wch¬_t
 
__wc
);

773 
wch¬_t
 *
	`fg‘ws
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

774 
__FILE
 *
__»¡riù
 
__¡»am
);

780 
	`åutws
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

781 
__FILE
 *
__»¡riù
 
__¡»am
);

788 
wšt_t
 
	`ung‘wc
 (wšt_ˆ
__wc
, 
__FILE
 *
__¡»am
);

789 
__END_NAMESPACE_STD


792 #ifdeà
__USE_GNU


800 
wšt_t
 
	`g‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

801 
wšt_t
 
	`g‘wch¬_uÆocked
 ();

809 
wšt_t
 
	`fg‘wc_uÆocked
 (
__FILE
 *
__¡»am
);

817 
wšt_t
 
	`åutwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

826 
wšt_t
 
	`putwc_uÆocked
 (
wch¬_t
 
__wc
, 
__FILE
 *
__¡»am
);

827 
wšt_t
 
	`putwch¬_uÆocked
 (
wch¬_t
 
__wc
);

836 
wch¬_t
 *
	`fg‘ws_uÆocked
 (wch¬_ˆ*
__»¡riù
 
__ws
, 
__n
,

837 
__FILE
 *
__»¡riù
 
__¡»am
);

845 
	`åutws_uÆocked
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__ws
,

846 
__FILE
 *
__»¡riù
 
__¡»am
);

850 
__BEGIN_NAMESPACE_C99


854 
size_t
 
	$wcsáime
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

855 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

856 
__cÚ¡
 
tm
 *
__»¡riù
 
__
è
__THROW
;

857 
__END_NAMESPACE_C99


859 #ifdeà
__USE_GNU


860 
	~<xloÿË.h
>

864 
size_t
 
	$wcsáime_l
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__maxsize
,

865 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

866 
__cÚ¡
 
tm
 *
__»¡riù
 
__
,

867 
__loÿË_t
 
__loc
è
__THROW
;

876 #ià
defšed
 
__USE_UNIX98
 && !defšed 
__USE_GNU


877 
	#__Ãed_iswxxx


	)

878 
	~<wùy³.h
>

882 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


883 
	~<b™s/wch¬2.h
>

886 #ifdeà
__LDBL_COMPAT


887 
	~<b™s/wch¬-ldbl.h
>

890 
__END_DECLS


898 #undeà
__Ãed_mb¡©e_t


899 #undeà
__Ãed_wšt_t


	@/usr/include/asm-generic/errno.h

1 #iâdeà
_ASM_GENERIC_ERRNO_H


2 
	#_ASM_GENERIC_ERRNO_H


	)

4 
	~<asm-g’”ic/”ºo-ba£.h
>

6 
	#EDEADLK
 35

	)

7 
	#ENAMETOOLONG
 36

	)

8 
	#ENOLCK
 37

	)

9 
	#ENOSYS
 38

	)

10 
	#ENOTEMPTY
 39

	)

11 
	#ELOOP
 40

	)

12 
	#EWOULDBLOCK
 
EAGAIN


	)

13 
	#ENOMSG
 42

	)

14 
	#EIDRM
 43

	)

15 
	#ECHRNG
 44

	)

16 
	#EL2NSYNC
 45

	)

17 
	#EL3HLT
 46

	)

18 
	#EL3RST
 47

	)

19 
	#ELNRNG
 48

	)

20 
	#EUNATCH
 49

	)

21 
	#ENOCSI
 50

	)

22 
	#EL2HLT
 51

	)

23 
	#EBADE
 52

	)

24 
	#EBADR
 53

	)

25 
	#EXFULL
 54

	)

26 
	#ENOANO
 55

	)

27 
	#EBADRQC
 56

	)

28 
	#EBADSLT
 57

	)

30 
	#EDEADLOCK
 
EDEADLK


	)

32 
	#EBFONT
 59

	)

33 
	#ENOSTR
 60

	)

34 
	#ENODATA
 61

	)

35 
	#ETIME
 62

	)

36 
	#ENOSR
 63

	)

37 
	#ENONET
 64

	)

38 
	#ENOPKG
 65

	)

39 
	#EREMOTE
 66

	)

40 
	#ENOLINK
 67

	)

41 
	#EADV
 68

	)

42 
	#ESRMNT
 69

	)

43 
	#ECOMM
 70

	)

44 
	#EPROTO
 71

	)

45 
	#EMULTIHOP
 72

	)

46 
	#EDOTDOT
 73

	)

47 
	#EBADMSG
 74

	)

48 
	#EOVERFLOW
 75

	)

49 
	#ENOTUNIQ
 76

	)

50 
	#EBADFD
 77

	)

51 
	#EREMCHG
 78

	)

52 
	#ELIBACC
 79

	)

53 
	#ELIBBAD
 80

	)

54 
	#ELIBSCN
 81

	)

55 
	#ELIBMAX
 82

	)

56 
	#ELIBEXEC
 83

	)

57 
	#EILSEQ
 84

	)

58 
	#ERESTART
 85

	)

59 
	#ESTRPIPE
 86

	)

60 
	#EUSERS
 87

	)

61 
	#ENOTSOCK
 88

	)

62 
	#EDESTADDRREQ
 89

	)

63 
	#EMSGSIZE
 90

	)

64 
	#EPROTOTYPE
 91

	)

65 
	#ENOPROTOOPT
 92

	)

66 
	#EPROTONOSUPPORT
 93

	)

67 
	#ESOCKTNOSUPPORT
 94

	)

68 
	#EOPNOTSUPP
 95

	)

69 
	#EPFNOSUPPORT
 96

	)

70 
	#EAFNOSUPPORT
 97

	)

71 
	#EADDRINUSE
 98

	)

72 
	#EADDRNOTAVAIL
 99

	)

73 
	#ENETDOWN
 100

	)

74 
	#ENETUNREACH
 101

	)

75 
	#ENETRESET
 102

	)

76 
	#ECONNABORTED
 103

	)

77 
	#ECONNRESET
 104

	)

78 
	#ENOBUFS
 105

	)

79 
	#EISCONN
 106

	)

80 
	#ENOTCONN
 107

	)

81 
	#ESHUTDOWN
 108

	)

82 
	#ETOOMANYREFS
 109

	)

83 
	#ETIMEDOUT
 110

	)

84 
	#ECONNREFUSED
 111

	)

85 
	#EHOSTDOWN
 112

	)

86 
	#EHOSTUNREACH
 113

	)

87 
	#EALREADY
 114

	)

88 
	#EINPROGRESS
 115

	)

89 
	#ESTALE
 116

	)

90 
	#EUCLEAN
 117

	)

91 
	#ENOTNAM
 118

	)

92 
	#ENAVAIL
 119

	)

93 
	#EISNAM
 120

	)

94 
	#EREMOTEIO
 121

	)

95 
	#EDQUOT
 122

	)

97 
	#ENOMEDIUM
 123

	)

98 
	#EMEDIUMTYPE
 124

	)

99 
	#ECANCELED
 125

	)

100 
	#ENOKEY
 126

	)

101 
	#EKEYEXPIRED
 127

	)

102 
	#EKEYREVOKED
 128

	)

103 
	#EKEYREJECTED
 129

	)

106 
	#EOWNERDEAD
 130

	)

107 
	#ENOTRECOVERABLE
 131

	)

109 
	#ERFKILL
 132

	)

	@/usr/include/bits/wchar-ldbl.h

20 #iâdeà
_WCHAR_H


24 #ià
defšed
 
__USE_ISOC95
 || defšed 
__USE_UNIX98


25 
__BEGIN_NAMESPACE_C99


26 
__LDBL_REDIR_DECL
 (
fw´štf
);

27 
__LDBL_REDIR_DECL
 (
w´štf
);

28 
__LDBL_REDIR_DECL
 (
sw´štf
);

29 
__LDBL_REDIR_DECL
 (
vfw´štf
);

30 
__LDBL_REDIR_DECL
 (
vw´štf
);

31 
__LDBL_REDIR_DECL
 (
vsw´štf
);

32 #ià
defšed
 
__USE_ISOC99
 && !defšed 
__USE_GNU
 \

33 && !
defšed
 
	g__REDIRECT
 \

34 && (
defšed
 
	g__STRICT_ANSI__
 || defšed 
	g__USE_XOPEN2K
)

35 
	$__LDBL_REDIR1_DECL
 (
fwsÿnf
, 
__Ædbl___isoc99_fwsÿnf
)

36 
	$__LDBL_REDIR1_DECL
 (
wsÿnf
, 
__Ædbl___isoc99_wsÿnf
)

37 
	$__LDBL_REDIR1_DECL
 (
swsÿnf
, 
__Ædbl___isoc99_swsÿnf
)

39 
	`__LDBL_REDIR_DECL
 (
fwsÿnf
);

40 
	`__LDBL_REDIR_DECL
 (
wsÿnf
);

41 
	`__LDBL_REDIR_DECL
 (
swsÿnf
);

43 
__END_NAMESPACE_C99


46 #ifdeà
__USE_ISOC99


47 
__BEGIN_NAMESPACE_C99


48 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd
, 
wc¡od
);

49 #ià!
defšed
 
__USE_GNU
 && !defšed 
__REDIRECT
 \

50 && (
defšed
 
__STRICT_ANSI__
 || defšed 
__USE_XOPEN2K
)

51 
	$__LDBL_REDIR1_DECL
 (
vfwsÿnf
, 
__Ædbl___isoc99_vfwsÿnf
)

52 
	$__LDBL_REDIR1_DECL
 (
vwsÿnf
, 
__Ædbl___isoc99_vwsÿnf
)

53 
	$__LDBL_REDIR1_DECL
 (
vswsÿnf
, 
__Ædbl___isoc99_vswsÿnf
)

55 
	`__LDBL_REDIR_DECL
 (
vfwsÿnf
);

56 
	`__LDBL_REDIR_DECL
 (
vwsÿnf
);

57 
	`__LDBL_REDIR_DECL
 (
vswsÿnf
);

59 
__END_NAMESPACE_C99


62 #ifdeà
__USE_GNU


63 
	`__LDBL_REDIR1_DECL
 (
wc¡Şd_l
, 
wc¡od_l
);

66 #ià
__USE_FORTIFY_LEVEL
 > 0 && 
defšed
 
__ex‹º_®ways_šlše


67 
	$__LDBL_REDIR_DECL
 (
__sw´štf_chk
)

68 
	$__LDBL_REDIR_DECL
 (
__vsw´štf_chk
)

69 #ià
__USE_FORTIFY_LEVEL
 > 1

70 
	$__LDBL_REDIR_DECL
 (
__fw´štf_chk
)

71 
	$__LDBL_REDIR_DECL
 (
__w´štf_chk
)

72 
	$__LDBL_REDIR_DECL
 (
__vfw´štf_chk
)

73 
	$__LDBL_REDIR_DECL
 (
__vw´štf_chk
)

	@/usr/include/bits/wchar2.h

20 #iâdeà
_WCHAR_H


25 
wch¬_t
 *
	$__wmemıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

26 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

27 
size_t
 
__ns1
è
__THROW
;

28 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_®Ÿs
,

29 (
wch¬_t
 *
__»¡riù
 
__s1
,

30 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
),

31 
wmemıy
);

32 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemıy_chk_w¬n
,

33 (
wch¬_t
 *
__»¡riù
 
__s1
,

34 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

35 
size_t
 
__ns1
), 
__wmemıy_chk
)

36 
	`__w¬Ç‰r
 ("wmemcpy called with†ength biggerhan size of destination "

39 
__ex‹º_®ways_šlše
 
wch¬_t
 *

40 
	`__NTH
 (
	$wmemıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

41 
size_t
 
__n
))

43 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

45 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

46  
	`__wmemıy_chk
 (
__s1
, 
__s2
, 
__n
,

47 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

49 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

50  
	`__wmemıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

51 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

53  
	`__wmemıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

54 
	}
}

57 
wch¬_t
 *
	$__wmemmove_chk
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

58 
size_t
 
__n
, size_ˆ
__ns1
è
__THROW
;

59 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_®Ÿs
, (wch¬_ˆ*
__s1
,

60 
__cÚ¡
 
wch¬_t
 *
__s2
,

61 
size_t
 
__n
), 
wmemmove
);

62 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmemmove_chk_w¬n
,

63 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
,

64 
size_t
 
__n
, size_ˆ
__ns1
), 
__wmemmove_chk
)

65 
	`__w¬Ç‰r
 ("wmemmove called with†ength biggerhan size of destination "

68 
__ex‹º_®ways_šlše
 
wch¬_t
 *

69 
	`__NTH
 (
	$wmemmove
 (
wch¬_t
 *
__s1
, 
__cÚ¡
 wch¬_ˆ*
__s2
, 
size_t
 
__n
))

71 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

73 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

74  
	`__wmemmove_chk
 (
__s1
, 
__s2
, 
__n
,

75 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

77 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

78  
	`__wmemmove_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

79 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

81  
	`__wmemmove_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

82 
	}
}

85 #ifdeà
__USE_GNU


86 
wch¬_t
 *
	$__wmempıy_chk
 (
wch¬_t
 *
__»¡riù
 
__s1
,

87 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

88 
size_t
 
__ns1
è
__THROW
;

89 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_®Ÿs
,

90 (
wch¬_t
 *
__»¡riù
 
__s1
,

91 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
,

92 
size_t
 
__n
), 
wmempıy
);

93 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmempıy_chk_w¬n
,

94 (
wch¬_t
 *
__»¡riù
 
__s1
,

95 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__s2
, 
size_t
 
__n
,

96 
size_t
 
__ns1
), 
__wmempıy_chk
)

97 
	`__w¬Ç‰r
 ("wmempcpy called with†ength biggerhan size of destination "

100 
__ex‹º_®ways_šlše
 
wch¬_t
 *

101 
	`__NTH
 (
	$wmempıy
 (
wch¬_t
 *
__»¡riù
 
__s1
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__s2
,

102 
size_t
 
__n
))

104 ià(
	`__bos0
 (
__s1
è!ğ(
size_t
) -1)

106 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

107  
	`__wmempıy_chk
 (
__s1
, 
__s2
, 
__n
,

108 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

110 ià(
__n
 > 
	`__bos0
 (
__s1
è/  (
wch¬_t
))

111  
	`__wmempıy_chk_w¬n
 (
__s1
, 
__s2
, 
__n
,

112 
	`__bos0
 (
__s1
è/  (
wch¬_t
));

114  
	`__wmempıy_®Ÿs
 (
__s1
, 
__s2
, 
__n
);

115 
	}
}

119 
wch¬_t
 *
	$__wmem£t_chk
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

120 
size_t
 
__ns
è
__THROW
;

121 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_®Ÿs
, (wch¬_ˆ*
__s
, wch¬_ˆ
__c
,

122 
size_t
 
__n
), 
wmem£t
);

123 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wmem£t_chk_w¬n
,

124 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
,

125 
size_t
 
__ns
), 
__wmem£t_chk
)

126 
	`__w¬Ç‰r
 ("wmemset called with†ength biggerhan size of destination "

129 
__ex‹º_®ways_šlše
 
wch¬_t
 *

130 
	`__NTH
 (
	$wmem£t
 (
wch¬_t
 *
__s
, wch¬_ˆ
__c
, 
size_t
 
__n
))

132 ià(
	`__bos0
 (
__s
è!ğ(
size_t
) -1)

134 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

135  
	`__wmem£t_chk
 (
__s
, 
__c
, 
__n
, 
	`__bos0
 (__sè/  (
wch¬_t
));

137 ià(
__n
 > 
	`__bos0
 (
__s
è/  (
wch¬_t
))

138  
	`__wmem£t_chk_w¬n
 (
__s
, 
__c
, 
__n
,

139 
	`__bos0
 (
__s
è/  (
wch¬_t
));

141  
	`__wmem£t_®Ÿs
 (
__s
, 
__c
, 
__n
);

142 
	}
}

145 
wch¬_t
 *
	$__wcsıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

146 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

147 
size_t
 
__n
è
__THROW
;

148 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsıy_®Ÿs
,

149 (
wch¬_t
 *
__»¡riù
 
__de¡
,

150 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsıy
);

152 
__ex‹º_®ways_šlše
 
wch¬_t
 *

153 
	`__NTH
 (
	$wcsıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

155 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

156  
	`__wcsıy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

157  
	`__wcsıy_®Ÿs
 (
__de¡
, 
__¤c
);

158 
	}
}

161 
wch¬_t
 *
	$__wııy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

162 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

163 
size_t
 
__de¡Ën
è
__THROW
;

164 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wııy_®Ÿs
,

165 (
wch¬_t
 *
__»¡riù
 
__de¡
,

166 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wııy
);

168 
__ex‹º_®ways_šlše
 
wch¬_t
 *

169 
	`__NTH
 (
	$wııy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

171 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

172  
	`__wııy_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

173  
	`__wııy_®Ÿs
 (
__de¡
, 
__¤c
);

174 
	}
}

177 
wch¬_t
 *
	$__wc¢ıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

178 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

179 
size_t
 
__de¡Ën
è
__THROW
;

180 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_®Ÿs
,

181 (
wch¬_t
 *
__»¡riù
 
__de¡
,

182 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

183 
size_t
 
__n
), 
wc¢ıy
);

184 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ıy_chk_w¬n
,

185 (
wch¬_t
 *
__»¡riù
 
__de¡
,

186 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

187 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wc¢ıy_chk
)

188 
	`__w¬Ç‰r
 ("wcsncpy called with†ength biggerhan size of destination "

191 
__ex‹º_®ways_šlše
 
wch¬_t
 *

192 
	`__NTH
 (
	$wc¢ıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

193 
size_t
 
__n
))

195 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

197 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

198  
	`__wc¢ıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

199 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

200 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

201  
	`__wc¢ıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

202 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

204  
	`__wc¢ıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

205 
	}
}

208 
wch¬_t
 *
	$__wınıy_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

209 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
, 
size_t
 
__n
,

210 
size_t
 
__de¡Ën
è
__THROW
;

211 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_®Ÿs
,

212 (
wch¬_t
 *
__»¡riù
 
__de¡
,

213 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

214 
size_t
 
__n
), 
wınıy
);

215 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wınıy_chk_w¬n
,

216 (
wch¬_t
 *
__»¡riù
 
__de¡
,

217 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

218 
size_t
 
__n
, size_ˆ
__de¡Ën
), 
__wınıy_chk
)

219 
	`__w¬Ç‰r
 ("wcpncpy called with†ength biggerhan size of destination "

222 
__ex‹º_®ways_šlše
 
wch¬_t
 *

223 
	`__NTH
 (
	$wınıy
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

224 
size_t
 
__n
))

226 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

228 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
))

229  
	`__wınıy_chk
 (
__de¡
, 
__¤c
, 
__n
,

230 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

231 ià(
__n
 > 
	`__bos
 (
__de¡
è/  (
wch¬_t
))

232  
	`__wınıy_chk_w¬n
 (
__de¡
, 
__¤c
, 
__n
,

233 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

235  
	`__wınıy_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

236 
	}
}

239 
wch¬_t
 *
	$__wcsÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

240 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

241 
size_t
 
__de¡Ën
è
__THROW
;

242 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wcsÿt_®Ÿs
,

243 (
wch¬_t
 *
__»¡riù
 
__de¡
,

244 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
), 
wcsÿt
);

246 
__ex‹º_®ways_šlše
 
wch¬_t
 *

247 
	`__NTH
 (
	$wcsÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
))

249 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

250  
	`__wcsÿt_chk
 (
__de¡
, 
__¤c
, 
	`__bos
 (__de¡è/  (
wch¬_t
));

251  
	`__wcsÿt_®Ÿs
 (
__de¡
, 
__¤c
);

252 
	}
}

255 
wch¬_t
 *
	$__wc¢ÿt_chk
 (
wch¬_t
 *
__»¡riù
 
__de¡
,

256 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

257 
size_t
 
__n
, size_ˆ
__de¡Ën
è
__THROW
;

258 
wch¬_t
 *
	`__REDIRECT_NTH
 (
__wc¢ÿt_®Ÿs
,

259 (
wch¬_t
 *
__»¡riù
 
__de¡
,

260 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__¤c
,

261 
size_t
 
__n
), 
wc¢ÿt
);

263 
__ex‹º_®ways_šlše
 
wch¬_t
 *

264 
	`__NTH
 (
	$wc¢ÿt
 (
wch¬_t
 *
__»¡riù
 
__de¡
, 
__cÚ¡
 wch¬_ˆ*__»¡riù 
__¤c
,

265 
size_t
 
__n
))

267 ià(
	`__bos
 (
__de¡
è!ğ(
size_t
) -1)

268  
	`__wc¢ÿt_chk
 (
__de¡
, 
__¤c
, 
__n
,

269 
	`__bos
 (
__de¡
è/  (
wch¬_t
));

270  
	`__wc¢ÿt_®Ÿs
 (
__de¡
, 
__¤c
, 
__n
);

271 
	}
}

274 
	$__sw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

275 
__æag
, 
size_t
 
__s_Ën
,

276 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...)

277 
__THROW
 ;

279 
	`__REDIRECT_NTH_LDBL
 (
__sw´štf_®Ÿs
,

280 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

281 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...),

282 
sw´štf
);

284 #ifdeà
__va_¬g_·ck


285 
__ex‹º_®ways_šlše
 

286 
	`__NTH
 (
	$sw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

287 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...))

289 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

290  
	`__sw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

291 
	`__bos
 (
__s
è/  (
wch¬_t
),

292 
__fmt
, 
	`__va_¬g_·ck
 ());

293  
	`__sw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
	`__va_¬g_·ck
 ());

294 
	}
}

295 #–ià!
defšed
 
__ılu¥lus


297 
	#sw´štf
(
s
, 
n
, ...) \

298 (
	`__bos
 (
s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1 \

299 ? 
	`__sw´štf_chk
 (
s
, 
n
, 
__USE_FORTIFY_LEVEL
 - 1, \

300 
	`__bos
 (
s
è/  (
wch¬_t
), 
__VA_ARGS__
) \

301 : 
	`sw´štf
 (
s
, 
n
, 
__VA_ARGS__
))

	)

304 
	$__vsw´štf_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

305 
__æag
, 
size_t
 
__s_Ën
,

306 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

307 
__gnuc_va_li¡
 
__¬g
)

308 
__THROW
 ;

310 
	`__REDIRECT_NTH_LDBL
 (
__vsw´štf_®Ÿs
,

311 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

312 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
,

313 
__gnuc_va_li¡
 
__­
), 
vsw´štf
);

315 
__ex‹º_®ways_šlše
 

316 
	`__NTH
 (
	$vsw´štf
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__n
,

317 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
))

319 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 || 
__USE_FORTIFY_LEVEL
 > 1)

320  
	`__vsw´štf_chk
 (
__s
, 
__n
, 
__USE_FORTIFY_LEVEL
 - 1,

321 
	`__bos
 (
__s
è/  (
wch¬_t
), 
__fmt
, 
__­
);

322  
	`__vsw´štf_®Ÿs
 (
__s
, 
__n
, 
__fmt
, 
__­
);

323 
	}
}

326 #ià
__USE_FORTIFY_LEVEL
 > 1

328 
__fw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

329 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
, ...);

330 
__w´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

332 
__vfw´štf_chk
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__æag
,

333 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

334 
__gnuc_va_li¡
 
__­
);

335 
__vw´štf_chk
 (
__æag
, 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fÜm©
,

336 
__gnuc_va_li¡
 
__­
);

338 #ifdeà
__va_¬g_·ck


339 
__ex‹º_®ways_šlše
 

340 
	$w´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, ...)

342  
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
	`__va_¬g_·ck
 ());

343 
	}
}

345 
__ex‹º_®ways_šlše
 

346 
	$fw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
, 
__cÚ¡
 
wch¬_t
 *__»¡riù 
__fmt
, ...)

348  
	`__fw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
,

349 
	`__va_¬g_·ck
 ());

350 
	}
}

351 #–ià!
defšed
 
__ılu¥lus


352 
	#w´štf
(...) \

353 
	`__w´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

354 
	#fw´štf
(
¡»am
, ...) \

355 
	`__fw´štf_chk
 (
¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__VA_ARGS__
)

	)

358 
__ex‹º_®ways_šlše
 

359 
	$vw´štf
 (
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

361  
	`__vw´štf_chk
 (
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

362 
	}
}

364 
__ex‹º_®ways_šlše
 

365 
	$vfw´štf
 (
__FILE
 *
__»¡riù
 
__¡»am
,

366 
__cÚ¡
 
wch¬_t
 *
__»¡riù
 
__fmt
, 
__gnuc_va_li¡
 
__­
)

368  
	`__vfw´štf_chk
 (
__¡»am
, 
__USE_FORTIFY_LEVEL
 - 1, 
__fmt
, 
__­
);

369 
	}
}

373 
wch¬_t
 *
	$__fg‘ws_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

374 
__FILE
 *
__»¡riù
 
__¡»am
è
__wur
;

375 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_®Ÿs
,

376 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

377 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws
è
__wur
;

378 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_chk_w¬n
,

379 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

380 
__FILE
 *
__»¡riù
 
__¡»am
), 
__fg‘ws_chk
)

381 
__wur
 
	`__w¬Ç‰r
 ("fgetws called with bigger sizehan†ength "

384 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

385 
	$fg‘ws
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

387 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

389 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

390  
	`__fg‘ws_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

391 
__n
, 
__¡»am
);

393 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

394  
	`__fg‘ws_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

395 
__n
, 
__¡»am
);

397  
	`__fg‘ws_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

398 
	}
}

400 #ifdeà
__USE_GNU


401 
wch¬_t
 *
	$__fg‘ws_uÆocked_chk
 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
,

402 
__n
, 
__FILE
 *
__»¡riù
 
__¡»am
)

403 
__wur
;

404 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_®Ÿs
,

405 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
,

406 
__FILE
 *
__»¡riù
 
__¡»am
), 
fg‘ws_uÆocked
)

407 
__wur
;

408 
wch¬_t
 *
	`__REDIRECT
 (
__fg‘ws_uÆocked_chk_w¬n
,

409 (
wch¬_t
 *
__»¡riù
 
__s
, 
size_t
 
__size
, 
__n
,

410 
__FILE
 *
__»¡riù
 
__¡»am
),

411 
__fg‘ws_uÆocked_chk
)

412 
__wur
 
	`__w¬Ç‰r
 ("fgetws_unlocked called with bigger sizehan†ength "

415 
__ex‹º_®ways_šlše
 
__wur
 
wch¬_t
 *

416 
	$fg‘ws_uÆocked
 (
wch¬_t
 *
__»¡riù
 
__s
, 
__n
, 
__FILE
 *__»¡riù 
__¡»am
)

418 ià(
	`__bos
 (
__s
è!ğ(
size_t
) -1)

420 ià(!
	`__butš_cÚ¡ªt_p
 (
__n
) || __n <= 0)

421  
	`__fg‘ws_uÆocked_chk
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

422 
__n
, 
__¡»am
);

424 ià((
size_t
è
__n
 > 
	`__bos
 (
__s
è/  (
wch¬_t
))

425  
	`__fg‘ws_uÆocked_chk_w¬n
 (
__s
, 
	`__bos
 (__sè/  (
wch¬_t
),

426 
__n
, 
__¡»am
);

428  
	`__fg‘ws_uÆocked_®Ÿs
 (
__s
, 
__n
, 
__¡»am
);

429 
	}
}

433 
size_t
 
	$__wütomb_chk
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

434 
mb¡©e_t
 *
__»¡riù
 
__p
,

435 
size_t
 
__buæ’
è
__THROW
 
__wur
;

436 
size_t
 
	`__REDIRECT_NTH
 (
__wütomb_®Ÿs
,

437 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

438 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wütomb
è
__wur
;

440 
__ex‹º_®ways_šlše
 
__wur
 
size_t


441 
	`__NTH
 (
	$wütomb
 (*
__»¡riù
 
__s
, 
wch¬_t
 
__wch¬
,

442 
mb¡©e_t
 *
__»¡riù
 
__ps
))

447 
	#__WCHAR_MB_LEN_MAX
 16

	)

448 #ià
defšed
 
MB_LEN_MAX
 && MB_LEN_MAX !ğ
__WCHAR_MB_LEN_MAX


451 ià(
	`__bos
 (
__s
è!ğ(
size_t
è-1 && 
__WCHAR_MB_LEN_MAX
 > __bos (__s))

452  
	`__wütomb_chk
 (
__s
, 
__wch¬
, 
__ps
, 
	`__bos
 (__s));

453  
	`__wütomb_®Ÿs
 (
__s
, 
__wch¬
, 
__ps
);

454 
	}
}

457 
size_t
 
	$__mb¤towcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

458 
__cÚ¡
 **
__»¡riù
 
__¤c
,

459 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

460 
size_t
 
__d¡Ën
è
__THROW
;

461 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_®Ÿs
,

462 (
wch¬_t
 *
__»¡riù
 
__d¡
,

463 
__cÚ¡
 **
__»¡riù
 
__¤c
,

464 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

465 
mb¤towcs
);

466 
size_t
 
	`__REDIRECT_NTH
 (
__mb¤towcs_chk_w¬n
,

467 (
wch¬_t
 *
__»¡riù
 
__d¡
,

468 
__cÚ¡
 **
__»¡riù
 
__¤c
,

469 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

470 
size_t
 
__d¡Ën
), 
__mb¤towcs_chk
)

471 
	`__w¬Ç‰r
 ("mbsrtowcs called with dst buffer smallerhan†en "

474 
__ex‹º_®ways_šlše
 
size_t


475 
	`__NTH
 (
	$mb¤towcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

476 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

478 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

480 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

481  
	`__mb¤towcs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

482 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

484 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

485  
	`__mb¤towcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
,

486 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

488  
	`__mb¤towcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

489 
	}
}

492 
size_t
 
	$__wc¤tombs_chk
 (*
__»¡riù
 
__d¡
,

493 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

494 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

495 
size_t
 
__d¡Ën
è
__THROW
;

496 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_®Ÿs
,

497 (*
__»¡riù
 
__d¡
,

498 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

499 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

500 
wc¤tombs
);

501 
size_t
 
	`__REDIRECT_NTH
 (
__wc¤tombs_chk_w¬n
,

502 (*
__»¡riù
 
__d¡
,

503 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

504 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

505 
size_t
 
__d¡Ën
), 
__wc¤tombs_chk
)

506 
	`__w¬Ç‰r
 ("wcsrtombs called with dst buffer smallerhan†en");

508 
__ex‹º_®ways_šlše
 
size_t


509 
	`__NTH
 (
	$wc¤tombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

510 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

512 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

514 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

515  
	`__wc¤tombs_chk
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

517 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

518  
	`__wc¤tombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
, 
	`__bos
 (__dst));

520  
	`__wc¤tombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__Ën
, 
__ps
);

521 
	}
}

524 #ifdeà
__USE_GNU


525 
size_t
 
	$__mb¢¹owcs_chk
 (
wch¬_t
 *
__»¡riù
 
__d¡
,

526 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

527 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

528 
size_t
 
__d¡Ën
è
__THROW
;

529 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_®Ÿs
,

530 (
wch¬_t
 *
__»¡riù
 
__d¡
,

531 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

532 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
),

533 
mb¢¹owcs
);

534 
size_t
 
	`__REDIRECT_NTH
 (
__mb¢¹owcs_chk_w¬n
,

535 (
wch¬_t
 *
__»¡riù
 
__d¡
,

536 
__cÚ¡
 **
__»¡riù
 
__¤c
, 
size_t
 
__nmc
,

537 
size_t
 
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
,

538 
size_t
 
__d¡Ën
), 
__mb¢¹owcs_chk
)

539 
	`__w¬Ç‰r
 ("mbsnrtowcs called with dst buffer smallerhan†en "

542 
__ex‹º_®ways_šlše
 
size_t


543 
	`__NTH
 (
	$mb¢¹owcs
 (
wch¬_t
 *
__»¡riù
 
__d¡
, 
__cÚ¡
 **__»¡riù 
__¤c
,

544 
size_t
 
__nmc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

546 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

548 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

549  
	`__mb¢¹owcs_chk
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

550 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

552 ià(
__Ën
 > 
	`__bos
 (
__d¡
è/  (
wch¬_t
))

553  
	`__mb¢¹owcs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
,

554 
	`__bos
 (
__d¡
è/  (
wch¬_t
));

556  
	`__mb¢¹owcs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nmc
, 
__Ën
, 
__ps
);

557 
	}
}

560 
size_t
 
	$__wc¢¹ombs_chk
 (*
__»¡riù
 
__d¡
,

561 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

562 
size_t
 
__nwc
, size_ˆ
__Ën
,

563 
mb¡©e_t
 *
__»¡riù
 
__ps
, 
size_t
 
__d¡Ën
)

564 
__THROW
;

565 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_®Ÿs
,

566 (*
__»¡riù
 
__d¡
,

567 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

568 
size_t
 
__nwc
, size_ˆ
__Ën
,

569 
mb¡©e_t
 *
__»¡riù
 
__ps
), 
wc¢¹ombs
);

570 
size_t
 
	`__REDIRECT_NTH
 (
__wc¢¹ombs_chk_w¬n
,

571 (*
__»¡riù
 
__d¡
,

572 
__cÚ¡
 
wch¬_t
 **
__»¡riù
 
__¤c
,

573 
size_t
 
__nwc
, size_ˆ
__Ën
,

574 
mb¡©e_t
 *
__»¡riù
 
__ps
,

575 
size_t
 
__d¡Ën
), 
__wc¢¹ombs_chk
)

576 
	`__w¬Ç‰r
 ("wcsnrtombs called with dst buffer smallerhan†en");

578 
__ex‹º_®ways_šlše
 
size_t


579 
	`__NTH
 (
	$wc¢¹ombs
 (*
__»¡riù
 
__d¡
, 
__cÚ¡
 
wch¬_t
 **__»¡riù 
__¤c
,

580 
size_t
 
__nwc
, size_ˆ
__Ën
, 
mb¡©e_t
 *
__»¡riù
 
__ps
))

582 ià(
	`__bos
 (
__d¡
è!ğ(
size_t
) -1)

584 ià(!
	`__butš_cÚ¡ªt_p
 (
__Ën
))

585  
	`__wc¢¹ombs_chk
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

586 
	`__bos
 (
__d¡
));

588 ià(
__Ën
 > 
	`__bos
 (
__d¡
))

589  
	`__wc¢¹ombs_chk_w¬n
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
,

590 
	`__bos
 (
__d¡
));

592  
	`__wc¢¹ombs_®Ÿs
 (
__d¡
, 
__¤c
, 
__nwc
, 
__Ën
, 
__ps
);

593 
	}
}

	@/usr/include/gnu/option-groups.h

10 #iâdeà
__GNU_OPTION_GROUPS_H


11 
	#__GNU_OPTION_GROUPS_H


	)

13 
	#__OPTION_EGLIBC_ADVANCED_INET6
 1

	)

14 
	#__OPTION_EGLIBC_BACKTRACE
 1

	)

15 
	#__OPTION_EGLIBC_BIG_MACROS
 1

	)

16 
	#__OPTION_EGLIBC_BSD
 1

	)

17 
	#__OPTION_EGLIBC_CATGETS
 1

	)

18 
	#__OPTION_EGLIBC_CHARSETS
 1

	)

19 
	#__OPTION_EGLIBC_CXX_TESTS
 1

	)

20 
	#__OPTION_EGLIBC_DB_ALIASES
 1

	)

21 
	#__OPTION_EGLIBC_ENVZ
 1

	)

22 
	#__OPTION_EGLIBC_FCVT
 1

	)

23 
	#__OPTION_EGLIBC_FMTMSG
 1

	)

24 
	#__OPTION_EGLIBC_FSTAB
 1

	)

25 
	#__OPTION_EGLIBC_FTRAVERSE
 1

	)

26 
	#__OPTION_EGLIBC_GETLOGIN
 1

	)

27 
	#__OPTION_EGLIBC_INET
 1

	)

28 
	#__OPTION_EGLIBC_LIBM
 1

	)

29 
	#__OPTION_EGLIBC_LOCALES
 1

	)

30 
	#__OPTION_EGLIBC_LOCALE_CODE
 1

	)

31 
	#__OPTION_EGLIBC_MEMUSAGE
 1

	)

32 
	#__OPTION_EGLIBC_NIS
 1

	)

33 
	#__OPTION_EGLIBC_NSSWITCH
 1

	)

34 
	#__OPTION_EGLIBC_RCMD
 1

	)

35 
	#__OPTION_EGLIBC_SPAWN
 1

	)

36 
	#__OPTION_EGLIBC_STREAMS
 1

	)

37 
	#__OPTION_EGLIBC_SUNRPC
 1

	)

38 
	#__OPTION_EGLIBC_UTMP
 1

	)

39 
	#__OPTION_EGLIBC_UTMPX
 1

	)

40 
	#__OPTION_EGLIBC_WORDEXP
 1

	)

41 
	#__OPTION_POSIX_C_LANG_WIDE_CHAR
 1

	)

42 
	#__OPTION_POSIX_REGEXP
 1

	)

43 
	#__OPTION_POSIX_REGEXP_GLIBC
 1

	)

44 
	#__OPTION_POSIX_WIDE_CHAR_DEVICE_IO
 1

	)

	@/usr/include/pthread.h

20 #iâdeà
_PTHREAD_H


21 
	#_PTHREAD_H
 1

	)

23 
	~<ã©u»s.h
>

24 
	~<’dŸn.h
>

25 
	~<sched.h
>

26 
	~<time.h
>

28 
	#__Ãed_sig£t_t


	)

29 
	~<sigÇl.h
>

30 
	~<b™s/±h»adty³s.h
>

31 
	~<b™s/£tjmp.h
>

32 
	~<b™s/wÜdsize.h
>

38 
	mPTHREAD_CREATE_JOINABLE
,

39 
	#PTHREAD_CREATE_JOINABLE
 
PTHREAD_CREATE_JOINABLE


	)

40 
	mPTHREAD_CREATE_DETACHED


41 
	#PTHREAD_CREATE_DETACHED
 
PTHREAD_CREATE_DETACHED


	)

48 
	mPTHREAD_MUTEX_TIMED_NP
,

49 
	mPTHREAD_MUTEX_RECURSIVE_NP
,

50 
	mPTHREAD_MUTEX_ERRORCHECK_NP
,

51 
	mPTHREAD_MUTEX_ADAPTIVE_NP


52 #ifdeà
__USE_UNIX98


54 
	mPTHREAD_MUTEX_NORMAL
 = 
PTHREAD_MUTEX_TIMED_NP
,

55 
	mPTHREAD_MUTEX_RECURSIVE
 = 
PTHREAD_MUTEX_RECURSIVE_NP
,

56 
	mPTHREAD_MUTEX_ERRORCHECK
 = 
PTHREAD_MUTEX_ERRORCHECK_NP
,

57 
	mPTHREAD_MUTEX_DEFAULT
 = 
PTHREAD_MUTEX_NORMAL


59 #ifdeà
__USE_GNU


61 , 
	mPTHREAD_MUTEX_FAST_NP
 = 
PTHREAD_MUTEX_TIMED_NP


66 #ifdeà
__USE_XOPEN2K


70 
	mPTHREAD_MUTEX_STALLED
,

71 
	mPTHREAD_MUTEX_STALLED_NP
 = 
PTHREAD_MUTEX_STALLED
,

72 
	mPTHREAD_MUTEX_ROBUST
,

73 
	mPTHREAD_MUTEX_ROBUST_NP
 = 
PTHREAD_MUTEX_ROBUST


78 #ifdeà
__USE_UNIX98


82 
	mPTHREAD_PRIO_NONE
,

83 
	mPTHREAD_PRIO_INHERIT
,

84 
	mPTHREAD_PRIO_PROTECT


90 #ià
__WORDSIZE
 == 64

91 
	#PTHREAD_MUTEX_INITIALIZER
 \

92 { { 0, 0, 0, 0, 0, 0, { 0, 0 } } }

	)

93 #ifdeà
__USE_GNU


94 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

95 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0, 0 } } }

	)

96 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

97 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0, 0 } } }

	)

98 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

99 { { 0, 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0, 0 } } }

	)

102 
	#PTHREAD_MUTEX_INITIALIZER
 \

103 { { 0, 0, 0, 0, 0, { 0 } } }

	)

104 #ifdeà
__USE_GNU


105 
	#PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP
 \

106 { { 0, 0, 0, 
PTHREAD_MUTEX_RECURSIVE_NP
, 0, { 0 } } }

	)

107 
	#PTHREAD_ERRORCHECK_MUTEX_INITIALIZER_NP
 \

108 { { 0, 0, 0, 
PTHREAD_MUTEX_ERRORCHECK_NP
, 0, { 0 } } }

	)

109 
	#PTHREAD_ADAPTIVE_MUTEX_INITIALIZER_NP
 \

110 { { 0, 0, 0, 
PTHREAD_MUTEX_ADAPTIVE_NP
, 0, { 0 } } }

	)

116 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


119 
	mPTHREAD_RWLOCK_PREFER_READER_NP
,

120 
	mPTHREAD_RWLOCK_PREFER_WRITER_NP
,

121 
	mPTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,

122 
	mPTHREAD_RWLOCK_DEFAULT_NP
 = 
PTHREAD_RWLOCK_PREFER_READER_NP


126 
	#PTHREAD_RWLOCK_INITIALIZER
 \

127 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 } }

	)

128 #ifdeà
__USE_GNU


129 #ià
__WORDSIZE
 == 64

130 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

132 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
 } }

	)

134 #ià
__BYTE_ORDER
 =ğ
__LITTLE_ENDIAN


135 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

136 { { 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
, \

137 0, 0, 0, 0 } }

	)

139 
	#PTHREAD_RWLOCK_WRITER_NONRECURSIVE_INITIALIZER_NP
 \

140 { { 0, 0, 0, 0, 0, 0, 0, 0, 0, 
PTHREAD_RWLOCK_PREFER_WRITER_NONRECURSIVE_NP
,\

141 0 } }

	)

151 
	mPTHREAD_INHERIT_SCHED
,

152 
	#PTHREAD_INHERIT_SCHED
 
PTHREAD_INHERIT_SCHED


	)

153 
	mPTHREAD_EXPLICIT_SCHED


154 
	#PTHREAD_EXPLICIT_SCHED
 
PTHREAD_EXPLICIT_SCHED


	)

161 
	mPTHREAD_SCOPE_SYSTEM
,

162 
	#PTHREAD_SCOPE_SYSTEM
 
PTHREAD_SCOPE_SYSTEM


	)

163 
	mPTHREAD_SCOPE_PROCESS


164 
	#PTHREAD_SCOPE_PROCESS
 
PTHREAD_SCOPE_PROCESS


	)

171 
	mPTHREAD_PROCESS_PRIVATE
,

172 
	#PTHREAD_PROCESS_PRIVATE
 
PTHREAD_PROCESS_PRIVATE


	)

173 
	mPTHREAD_PROCESS_SHARED


174 
	#PTHREAD_PROCESS_SHARED
 
PTHREAD_PROCESS_SHARED


	)

180 
	#PTHREAD_COND_INITIALIZER
 { { 0, 0, 0, 0, 0, (*è0, 0, 0 } }

	)

184 
	s_±h»ad_ş—nup_bufãr


186 (*
	m__routše
) (*);

187 *
	m__¬g
;

188 
	m__ÿnûÉy³
;

189 
_±h»ad_ş—nup_bufãr
 *
	m__´ev
;

195 
	mPTHREAD_CANCEL_ENABLE
,

196 
	#PTHREAD_CANCEL_ENABLE
 
PTHREAD_CANCEL_ENABLE


	)

197 
	mPTHREAD_CANCEL_DISABLE


198 
	#PTHREAD_CANCEL_DISABLE
 
PTHREAD_CANCEL_DISABLE


	)

202 
	mPTHREAD_CANCEL_DEFERRED
,

203 
	#PTHREAD_CANCEL_DEFERRED
 
PTHREAD_CANCEL_DEFERRED


	)

204 
	mPTHREAD_CANCEL_ASYNCHRONOUS


205 
	#PTHREAD_CANCEL_ASYNCHRONOUS
 
PTHREAD_CANCEL_ASYNCHRONOUS


	)

207 
	#PTHREAD_CANCELED
 ((*è-1)

	)

211 
	#PTHREAD_ONCE_INIT
 0

	)

214 #ifdeà
__USE_XOPEN2K


218 
	#PTHREAD_BARRIER_SERIAL_THREAD
 -1

	)

222 
__BEGIN_DECLS


227 
±h»ad_ü—‹
 (
±h»ad_t
 *
__»¡riù
 
__Ãwth»ad
,

228 
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

229 *(*
__¡¬t_routše
) (*),

230 *
__»¡riù
 
__¬g
è
__THROW
 
__nÚnuÎ
 ((1, 3));

236 
	$±h»ad_ex™
 (*
__»tv®
è
	`__©Œibu‹__
 ((
__nÜ‘uº__
));

244 
	`±h»ad_još
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
);

246 #ifdeà
__USE_GNU


249 
	$±h»ad_Œyjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
è
__THROW
;

257 
	`±h»ad_timedjoš_Å
 (
±h»ad_t
 
__th
, **
__th»ad_»tuº
,

258 
__cÚ¡
 
time¥ec
 *
__ab¡ime
);

265 
	$±h»ad_d‘ach
 (
±h»ad_t
 
__th
è
__THROW
;

269 
±h»ad_t
 
	$±h»ad_£lf
 (è
__THROW
 
	`__©Œibu‹__
 ((
__cÚ¡__
));

272 
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
è
__THROW
;

280 
	$±h»ad_©Œ_š™
 (
±h»ad_©Œ_t
 *
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

283 
	$±h»ad_©Œ_de¡roy
 (
±h»ad_©Œ_t
 *
__©Œ
)

284 
__THROW
 
	`__nÚnuÎ
 ((1));

287 
	$±h»ad_©Œ_g‘d‘ach¡©e
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

288 *
__d‘ach¡©e
)

289 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

292 
	$±h»ad_©Œ_£td‘ach¡©e
 (
±h»ad_©Œ_t
 *
__©Œ
,

293 
__d‘ach¡©e
)

294 
__THROW
 
	`__nÚnuÎ
 ((1));

298 
	$±h»ad_©Œ_g‘gu¬dsize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

299 
size_t
 *
__gu¬dsize
)

300 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

303 
	$±h»ad_©Œ_£tgu¬dsize
 (
±h»ad_©Œ_t
 *
__©Œ
,

304 
size_t
 
__gu¬dsize
)

305 
__THROW
 
	`__nÚnuÎ
 ((1));

309 
	$±h»ad_©Œ_g‘sched·¿m
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


310 
__©Œ
,

311 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

312 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

315 
	$±h»ad_©Œ_£tsched·¿m
 (
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

316 
__cÚ¡
 
sched_·¿m
 *
__»¡riù


317 
__·¿m
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

320 
	$±h»ad_©Œ_g‘schedpŞicy
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


321 
__©Œ
, *
__»¡riù
 
__pŞicy
)

322 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

325 
	$±h»ad_©Œ_£tschedpŞicy
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__pŞicy
)

326 
__THROW
 
	`__nÚnuÎ
 ((1));

329 
	$±h»ad_©Œ_g‘šh”™sched
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


330 
__©Œ
, *
__»¡riù
 
__šh”™
)

331 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

334 
	$±h»ad_©Œ_£tšh”™sched
 (
±h»ad_©Œ_t
 *
__©Œ
,

335 
__šh”™
)

336 
__THROW
 
	`__nÚnuÎ
 ((1));

340 
	$±h»ad_©Œ_g‘scİe
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

341 *
__»¡riù
 
__scİe
)

342 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

345 
	$±h»ad_©Œ_£tscİe
 (
±h»ad_©Œ_t
 *
__©Œ
, 
__scİe
)

346 
__THROW
 
	`__nÚnuÎ
 ((1));

349 
	$±h»ad_©Œ_g‘¡ackaddr
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


350 
__©Œ
, **
__»¡riù
 
__¡ackaddr
)

351 
__THROW
 
	`__nÚnuÎ
 ((1, 2)è
__©Œibu‹_d•»ÿ‹d__
;

357 
	$±h»ad_©Œ_£t¡ackaddr
 (
±h»ad_©Œ_t
 *
__©Œ
,

358 *
__¡ackaddr
)

359 
__THROW
 
	`__nÚnuÎ
 ((1)è
__©Œibu‹_d•»ÿ‹d__
;

362 
	$±h»ad_©Œ_g‘¡acksize
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù


363 
__©Œ
, 
size_t
 *
__»¡riù
 
__¡acksize
)

364 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

369 
	$±h»ad_©Œ_£t¡acksize
 (
±h»ad_©Œ_t
 *
__©Œ
,

370 
size_t
 
__¡acksize
)

371 
__THROW
 
	`__nÚnuÎ
 ((1));

373 #ifdeà
__USE_XOPEN2K


375 
	$±h»ad_©Œ_g‘¡ack
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__»¡riù
 
__©Œ
,

376 **
__»¡riù
 
__¡ackaddr
,

377 
size_t
 *
__»¡riù
 
__¡acksize
)

378 
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

383 
	$±h»ad_©Œ_£t¡ack
 (
±h»ad_©Œ_t
 *
__©Œ
, *
__¡ackaddr
,

384 
size_t
 
__¡acksize
è
__THROW
 
	`__nÚnuÎ
 ((1));

387 #ifdeà
__USE_GNU


390 
	$±h»ad_©Œ_£ffš™y_Å
 (
±h»ad_©Œ_t
 *
__©Œ
,

391 
size_t
 
__ıu£tsize
,

392 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

393 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

397 
	$±h»ad_©Œ_g‘affš™y_Å
 (
__cÚ¡
 
±h»ad_©Œ_t
 *
__©Œ
,

398 
size_t
 
__ıu£tsize
,

399 
ıu_£t_t
 *
__ıu£t
)

400 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

406 
	$±h»ad_g‘©Œ_Å
 (
±h»ad_t
 
__th
, 
±h»ad_©Œ_t
 *
__©Œ
)

407 
__THROW
 
	`__nÚnuÎ
 ((2));

415 
	$±h»ad_£tsched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
, 
__pŞicy
,

416 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

417 
__THROW
 
	`__nÚnuÎ
 ((3));

420 
	$±h»ad_g‘sched·¿m
 (
±h»ad_t
 
__rg‘_th»ad
,

421 *
__»¡riù
 
__pŞicy
,

422 
sched_·¿m
 *
__»¡riù
 
__·¿m
)

423 
__THROW
 
	`__nÚnuÎ
 ((2, 3));

426 
	$±h»ad_£tsched´io
 (
±h»ad_t
 
__rg‘_th»ad
, 
__´io
)

427 
__THROW
;

430 #ifdeà
__USE_UNIX98


432 
	$±h»ad_g‘cÚcu¼’cy
 (è
__THROW
;

435 
	$±h»ad_£tcÚcu¼’cy
 (
__Ëv–
è
__THROW
;

438 #ifdeà
__USE_GNU


443 
	$±h»ad_y›ld
 (è
__THROW
;

448 
	$±h»ad_£ffš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

449 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
)

450 
__THROW
 
	`__nÚnuÎ
 ((3));

453 
	$±h»ad_g‘affš™y_Å
 (
±h»ad_t
 
__th
, 
size_t
 
__ıu£tsize
,

454 
ıu_£t_t
 *
__ıu£t
)

455 
__THROW
 
	`__nÚnuÎ
 ((3));

468 
	`±h»ad_Úû
 (
±h»ad_Úû_t
 *
__Úû_cÚŒŞ
,

469 (*
__š™_routše
è()è
	`__nÚnuÎ
 ((1, 2));

480 
	`±h»ad_£tÿnûl¡©e
 (
__¡©e
, *
__Şd¡©e
);

484 
	`±h»ad_£tÿnûÉy³
 (
__ty³
, *
__Şdty³
);

487 
	`±h»ad_ÿnûl
 (
±h»ad_t
 
__th
);

492 
	`±h»ad_‹¡ÿnûl
 ();

501 
__jmp_buf
 
__ÿnûl_jmp_buf
;

502 
__mask_was_§ved
;

503 } 
__ÿnûl_jmp_buf
[1];

504 *
__·d
[4];

505 } 
	t__±h»ad_unwšd_buf_t
 
	t__©Œibu‹__
 ((
	t__®igÃd__
));

508 #iâdeà
__ş—nup_fù_©Œibu‹


509 
	#__ş—nup_fù_©Œibu‹


	)

514 
	s__±h»ad_ş—nup_äame


516 (*
__ÿnûl_routše
) (*);

517 *
__ÿnûl_¬g
;

518 
__do_™
;

519 
__ÿnûl_ty³
;

522 #ià
defšed
 
__GNUC__
 && defšed 
__EXCEPTIONS


523 #ifdeà
__ılu¥lus


525 şas 
	c__±h»ad_ş—nup_şass


527 (*
__ÿnûl_routše
) (*);

528 *
__ÿnûl_¬g
;

529 
__do_™
;

530 
__ÿnûl_ty³
;

532 
public
:

533 
	`__±h»ad_ş—nup_şass
 ((*
__fù
è(*), *
__¬g
)

534 : 
	`__ÿnûl_routše
 (
__fù
), 
	`__ÿnûl_¬g
 (
__¬g
), 
	$__do_™
 (1) { }

535 ~
	$__±h»ad_ş—nup_şass
 (è{ ià(
__do_™
è
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); 
	}
}

536 
	$__£tdo™
 (
__Ãwv®
è{ 
__do_™
 = __Ãwv®; 
	}
}

537 
	$__deãr
 (è{ 
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
,

538 &
__ÿnûl_ty³
); 
	}
}

539 
	$__»¡Üe
 (ècÚ¡ { 
	`±h»ad_£tÿnûÉy³
 (
__ÿnûl_ty³
, 0); 
	}
}

549 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

551 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
)

	)

555 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

556 
__şäame
.
	`__£tdo™
 (
execu‹
); \

557 } 0)

	)

559 #ifdeà
__USE_GNU


563 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

565 
__±h»ad_ş—nup_şass
 
	`__şäame
 (
routše
, 
¬g
); \

566 
__şäame
.
	`__deãr
 ()

	)

571 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

572 
__şäame
.
	`__»¡Üe
 (); \

573 
__şäame
.
	`__£tdo™
 (
execu‹
); \

574 } 0)

	)

581 
__ex‹º_šlše
 

582 
	$__±h»ad_ş—nup_routše
 (
__±h»ad_ş—nup_äame
 *
__äame
)

584 ià(
__äame
->
__do_™
)

585 
__äame
->
	`__ÿnûl_routše
 (__äame->
__ÿnûl_¬g
);

586 
	}
}

595 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

597 
__±h»ad_ş—nup_äame
 
__şäame
 \

598 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

599 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

600 .
__do_™
 = 1 };

	)

604 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

605 
__şäame
.
__do_™
 = (
execu‹
); \

606 } 0)

	)

608 #ifdeà
__USE_GNU


612 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

614 
__±h»ad_ş—nup_äame
 
__şäame
 \

615 
	`__©Œibu‹__
 ((
	`__ş—nup__
 (
__±h»ad_ş—nup_routše
))) \

616 ğ{ .
__ÿnûl_routše
 = (
routše
), .
__ÿnûl_¬g
 = (
¬g
), \

617 .
__do_™
 = 1 }; \

618 (è
	`±h»ad_£tÿnûÉy³
 (
PTHREAD_CANCEL_DEFERRED
, \

619 &
__şäame
.
__ÿnûl_ty³
)

	)

624 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

625 (è
	`±h»ad_£tÿnûÉy³
 (
__şäame
.
__ÿnûl_ty³
, 
NULL
); \

626 
__şäame
.
__do_™
 = (
execu‹
); \

627 } 0)

	)

638 
	#±h»ad_ş—nup_push
(
routše
, 
¬g
) \

640 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

641 (*
__ÿnûl_routše
è(*èğ(
routše
); \

642 *
__ÿnûl_¬g
 = (
¬g
); \

643 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

644 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

645 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

647 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

648 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

652 
	`__±h»ad_»gi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

653 dØ{

	)

654 
__±h»ad_»gi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

655 
__ş—nup_fù_©Œibu‹
;

659 
	#±h»ad_ş—nup_pİ
(
execu‹
) \

662 
	`__±h»ad_uÄegi¡”_ÿnûl
 (&
__ÿnûl_buf
); \

663 ià(
execu‹
) \

664 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

665 } 0)

	)

666 
	$__±h»ad_uÄegi¡”_ÿnûl
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

667 
__ş—nup_fù_©Œibu‹
;

669 #ifdeà
__USE_GNU


673 
	#±h»ad_ş—nup_push_deãr_Å
(
routše
, 
¬g
) \

675 
__±h»ad_unwšd_buf_t
 
__ÿnûl_buf
; \

676 (*
__ÿnûl_routše
è(*èğ(
routše
); \

677 *
__ÿnûl_¬g
 = (
¬g
); \

678 
nÙ_fœ¡_ÿÎ
 = 
	`__sig£tjmp
 ((
__jmp_buf_g
 *) (*) \

679 
__ÿnûl_buf
.
__ÿnûl_jmp_buf
, 0); \

680 ià(
	`__butš_ex³ù
 (
nÙ_fœ¡_ÿÎ
, 0)) \

682 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

683 
	`__±h»ad_unwšd_Ãxt
 (&
__ÿnûl_buf
); \

687 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (&
__ÿnûl_buf
); \

688 dØ{

	)

689 
	`__±h»ad_»gi¡”_ÿnûl_deãr
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

690 
__ş—nup_fù_©Œibu‹
;

695 
	#±h»ad_ş—nup_pİ_»¡Üe_Å
(
execu‹
) \

698 
	`__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (&
__ÿnûl_buf
); \

699 ià(
execu‹
) \

700 
	`__ÿnûl_routše
 (
__ÿnûl_¬g
); \

701 
	}
} 0)

	)

702 
	$__±h»ad_uÄegi¡”_ÿnûl_»¡Üe
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

703 
__ş—nup_fù_©Œibu‹
;

707 
	$__±h»ad_unwšd_Ãxt
 (
__±h»ad_unwšd_buf_t
 *
__buf
)

708 
__ş—nup_fù_©Œibu‹
 
	`__©Œibu‹__
 ((
__nÜ‘uº__
))

709 #iâdeà
SHARED


710 
	`__©Œibu‹__
 ((
__w—k__
))

716 
__jmp_buf_g
;

717 
	$__sig£tjmp
 (
__jmp_buf_g
 *
__’v
, 
__§vemask
è
__THROW
;

723 
	$±h»ad_mu‹x_š™
 (
±h»ad_mu‹x_t
 *
__mu‹x
,

724 
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__mu‹x©Œ
)

725 
__THROW
 
	`__nÚnuÎ
 ((1));

728 
	$±h»ad_mu‹x_de¡roy
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

729 
__THROW
 
	`__nÚnuÎ
 ((1));

732 
	$±h»ad_mu‹x_Œylock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

733 
__THROW
 
	`__nÚnuÎ
 ((1));

736 
	$±h»ad_mu‹x_lock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

737 
__THROW
 
	`__nÚnuÎ
 ((1));

739 #ifdeà
__USE_XOPEN2K


741 
	$±h»ad_mu‹x_timedlock
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

742 
__cÚ¡
 
time¥ec
 *
__»¡riù


743 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

747 
	$±h»ad_mu‹x_uÆock
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

748 
__THROW
 
	`__nÚnuÎ
 ((1));

751 #ifdeà
__USE_UNIX98


753 
	$±h»ad_mu‹x_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x_t
 *

754 
__»¡riù
 
__mu‹x
,

755 *
__»¡riù
 
__´ioûšg
)

756 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

760 
	$±h»ad_mu‹x_£rioûšg
 (
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

761 
__´ioûšg
,

762 *
__»¡riù
 
__Şd_ûšg
)

763 
__THROW
 
	`__nÚnuÎ
 ((1, 3));

767 #ifdeà
__USE_XOPEN2K8


769 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

770 
__THROW
 
	`__nÚnuÎ
 ((1));

771 #ifdeà
__USE_GNU


772 
	$±h»ad_mu‹x_cÚsi¡’t_Å
 (
±h»ad_mu‹x_t
 *
__mu‹x
)

773 
__THROW
 
	`__nÚnuÎ
 ((1));

782 
	$±h»ad_mu‹x©Œ_š™
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

783 
__THROW
 
	`__nÚnuÎ
 ((1));

786 
	$±h»ad_mu‹x©Œ_de¡roy
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
)

787 
__THROW
 
	`__nÚnuÎ
 ((1));

790 
	$±h»ad_mu‹x©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

791 
__»¡riù
 
__©Œ
,

792 *
__»¡riù
 
__psh¬ed
)

793 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

796 
	$±h»ad_mu‹x©Œ_£sh¬ed
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

797 
__psh¬ed
)

798 
__THROW
 
	`__nÚnuÎ
 ((1));

800 #ifdeà
__USE_UNIX98


802 
	$±h»ad_mu‹x©Œ_g‘ty³
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__»¡riù


803 
__©Œ
, *
__»¡riù
 
__kšd
)

804 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

809 
	$±h»ad_mu‹x©Œ_£‰y³
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
, 
__kšd
)

810 
__THROW
 
	`__nÚnuÎ
 ((1));

813 
	$±h»ad_mu‹x©Œ_g‘´ÙocŞ
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

814 
__»¡riù
 
__©Œ
,

815 *
__»¡riù
 
__´ÙocŞ
)

816 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

820 
	$±h»ad_mu‹x©Œ_£rÙocŞ
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

821 
__´ÙocŞ
)

822 
__THROW
 
	`__nÚnuÎ
 ((1));

825 
	$±h»ad_mu‹x©Œ_g‘´ioûšg
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *

826 
__»¡riù
 
__©Œ
,

827 *
__»¡riù
 
__´ioûšg
)

828 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

831 
	$±h»ad_mu‹x©Œ_£rioûšg
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

832 
__´ioûšg
)

833 
__THROW
 
	`__nÚnuÎ
 ((1));

836 #ifdeà
__USE_XOPEN2K


838 
	$±h»ad_mu‹x©Œ_g‘robu¡
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

839 *
__robu¡Ãss
)

840 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

841 #ifdeà
__USE_GNU


842 
	$±h»ad_mu‹x©Œ_g‘robu¡_Å
 (
__cÚ¡
 
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

843 *
__robu¡Ãss
)

844 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

848 
	$±h»ad_mu‹x©Œ_£Œobu¡
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

849 
__robu¡Ãss
)

850 
__THROW
 
	`__nÚnuÎ
 ((1));

851 #ifdeà
__USE_GNU


852 
	$±h»ad_mu‹x©Œ_£Œobu¡_Å
 (
±h»ad_mu‹x©Œ_t
 *
__©Œ
,

853 
__robu¡Ãss
)

854 
__THROW
 
	`__nÚnuÎ
 ((1));

859 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_XOPEN2K


864 
	$±h»ad_rwlock_š™
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

865 
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *
__»¡riù


866 
__©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

869 
	$±h»ad_rwlock_de¡roy
 (
±h»ad_rwlock_t
 *
__rwlock
)

870 
__THROW
 
	`__nÚnuÎ
 ((1));

873 
	$±h»ad_rwlock_rdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

874 
__THROW
 
	`__nÚnuÎ
 ((1));

877 
	$±h»ad_rwlock_Œyrdlock
 (
±h»ad_rwlock_t
 *
__rwlock
)

878 
__THROW
 
	`__nÚnuÎ
 ((1));

880 #ifdeà
__USE_XOPEN2K


882 
	$±h»ad_rwlock_timedrdlock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

883 
__cÚ¡
 
time¥ec
 *
__»¡riù


884 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

888 
	$±h»ad_rwlock_w¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

889 
__THROW
 
	`__nÚnuÎ
 ((1));

892 
	$±h»ad_rwlock_Œyw¾ock
 (
±h»ad_rwlock_t
 *
__rwlock
)

893 
__THROW
 
	`__nÚnuÎ
 ((1));

895 #ifdeà
__USE_XOPEN2K


897 
	$±h»ad_rwlock_timedw¾ock
 (
±h»ad_rwlock_t
 *
__»¡riù
 
__rwlock
,

898 
__cÚ¡
 
time¥ec
 *
__»¡riù


899 
__ab¡ime
è
__THROW
 
	`__nÚnuÎ
 ((1, 2));

903 
	$±h»ad_rwlock_uÆock
 (
±h»ad_rwlock_t
 *
__rwlock
)

904 
__THROW
 
	`__nÚnuÎ
 ((1));

910 
	$±h»ad_rwlock©Œ_š™
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

911 
__THROW
 
	`__nÚnuÎ
 ((1));

914 
	$±h»ad_rwlock©Œ_de¡roy
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
)

915 
__THROW
 
	`__nÚnuÎ
 ((1));

918 
	$±h»ad_rwlock©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

919 
__»¡riù
 
__©Œ
,

920 *
__»¡riù
 
__psh¬ed
)

921 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

924 
	$±h»ad_rwlock©Œ_£sh¬ed
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

925 
__psh¬ed
)

926 
__THROW
 
	`__nÚnuÎ
 ((1));

929 
	$±h»ad_rwlock©Œ_g‘kšd_Å
 (
__cÚ¡
 
±h»ad_rwlock©Œ_t
 *

930 
__»¡riù
 
__©Œ
,

931 *
__»¡riù
 
__´ef
)

932 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

935 
	$±h»ad_rwlock©Œ_£tkšd_Å
 (
±h»ad_rwlock©Œ_t
 *
__©Œ
,

936 
__´ef
è
__THROW
 
	`__nÚnuÎ
 ((1));

944 
	$±h»ad_cÚd_š™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

945 
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *
__»¡riù


946 
__cÚd_©Œ
è
__THROW
 
	`__nÚnuÎ
 ((1));

949 
	$±h»ad_cÚd_de¡roy
 (
±h»ad_cÚd_t
 *
__cÚd
)

950 
__THROW
 
	`__nÚnuÎ
 ((1));

953 
	$±h»ad_cÚd_sigÇl
 (
±h»ad_cÚd_t
 *
__cÚd
)

954 
__THROW
 
	`__nÚnuÎ
 ((1));

957 
	$±h»ad_cÚd_brßdÿ¡
 (
±h»ad_cÚd_t
 *
__cÚd
)

958 
__THROW
 
	`__nÚnuÎ
 ((1));

965 
	$±h»ad_cÚd_wa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

966 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
)

967 
	`__nÚnuÎ
 ((1, 2));

976 
	$±h»ad_cÚd_timedwa™
 (
±h»ad_cÚd_t
 *
__»¡riù
 
__cÚd
,

977 
±h»ad_mu‹x_t
 *
__»¡riù
 
__mu‹x
,

978 
__cÚ¡
 
time¥ec
 *
__»¡riù


979 
__ab¡ime
è
	`__nÚnuÎ
 ((1, 2, 3));

984 
	$±h»ad_cÚd©Œ_š™
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

985 
__THROW
 
	`__nÚnuÎ
 ((1));

988 
	$±h»ad_cÚd©Œ_de¡roy
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
)

989 
__THROW
 
	`__nÚnuÎ
 ((1));

992 
	$±h»ad_cÚd©Œ_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

993 
__»¡riù
 
__©Œ
,

994 *
__»¡riù
 
__psh¬ed
)

995 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

998 
	$±h»ad_cÚd©Œ_£sh¬ed
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

999 
__psh¬ed
è
__THROW
 
	`__nÚnuÎ
 ((1));

1001 #ifdeà
__USE_XOPEN2K


1003 
	$±h»ad_cÚd©Œ_g‘şock
 (
__cÚ¡
 
±h»ad_cÚd©Œ_t
 *

1004 
__»¡riù
 
__©Œ
,

1005 
__şockid_t
 *
__»¡riù
 
__şock_id
)

1006 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1009 
	$±h»ad_cÚd©Œ_£tşock
 (
±h»ad_cÚd©Œ_t
 *
__©Œ
,

1010 
__şockid_t
 
__şock_id
)

1011 
__THROW
 
	`__nÚnuÎ
 ((1));

1015 #ifdeà
__USE_XOPEN2K


1020 
	$±h»ad_¥š_š™
 (
±h»ad_¥šlock_t
 *
__lock
, 
__psh¬ed
)

1021 
__THROW
 
	`__nÚnuÎ
 ((1));

1024 
	$±h»ad_¥š_de¡roy
 (
±h»ad_¥šlock_t
 *
__lock
)

1025 
__THROW
 
	`__nÚnuÎ
 ((1));

1028 
	$±h»ad_¥š_lock
 (
±h»ad_¥šlock_t
 *
__lock
)

1029 
__THROW
 
	`__nÚnuÎ
 ((1));

1032 
	$±h»ad_¥š_Œylock
 (
±h»ad_¥šlock_t
 *
__lock
)

1033 
__THROW
 
	`__nÚnuÎ
 ((1));

1036 
	$±h»ad_¥š_uÆock
 (
±h»ad_¥šlock_t
 *
__lock
)

1037 
__THROW
 
	`__nÚnuÎ
 ((1));

1044 
	$±h»ad_b¬r›r_š™
 (
±h»ad_b¬r›r_t
 *
__»¡riù
 
__b¬r›r
,

1045 
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *
__»¡riù


1046 
__©Œ
, 
__couÁ
)

1047 
__THROW
 
	`__nÚnuÎ
 ((1));

1050 
	$±h»ad_b¬r›r_de¡roy
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1051 
__THROW
 
	`__nÚnuÎ
 ((1));

1054 
	$±h»ad_b¬r›r_wa™
 (
±h»ad_b¬r›r_t
 *
__b¬r›r
)

1055 
__THROW
 
	`__nÚnuÎ
 ((1));

1059 
	$±h»ad_b¬r›¿‰r_š™
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1060 
__THROW
 
	`__nÚnuÎ
 ((1));

1063 
	$±h»ad_b¬r›¿‰r_de¡roy
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
)

1064 
__THROW
 
	`__nÚnuÎ
 ((1));

1067 
	$±h»ad_b¬r›¿‰r_g‘psh¬ed
 (
__cÚ¡
 
±h»ad_b¬r›¿‰r_t
 *

1068 
__»¡riù
 
__©Œ
,

1069 *
__»¡riù
 
__psh¬ed
)

1070 
__THROW
 
	`__nÚnuÎ
 ((1, 2));

1073 
	$±h»ad_b¬r›¿‰r_£sh¬ed
 (
±h»ad_b¬r›¿‰r_t
 *
__©Œ
,

1074 
__psh¬ed
)

1075 
__THROW
 
	`__nÚnuÎ
 ((1));

1087 
	`±h»ad_key_ü—‹
 (
±h»ad_key_t
 *
__key
,

1088 (*
__de¡r_funùiÚ
) (*))

1089 
__THROW
 
	`__nÚnuÎ
 ((1));

1092 
	$±h»ad_key_d–‘e
 (
±h»ad_key_t
 
__key
è
__THROW
;

1095 *
	$±h»ad_g‘¥ecific
 (
±h»ad_key_t
 
__key
è
__THROW
;

1098 
	$±h»ad_£t¥ecific
 (
±h»ad_key_t
 
__key
,

1099 
__cÚ¡
 *
__poš‹r
è
__THROW
 ;

1102 #ifdeà
__USE_XOPEN2K


1104 
	$±h»ad_g‘ıuşockid
 (
±h»ad_t
 
__th»ad_id
,

1105 
__şockid_t
 *
__şock_id
)

1106 
__THROW
 
	`__nÚnuÎ
 ((2));

1121 
	`±h»ad_©fÜk
 ((*
__´•¬e
) (),

1122 (*
__·»Á
) (),

1123 (*
__chd
è()è
__THROW
;

1126 #ifdeà
__USE_EXTERN_INLINES


1128 
__ex‹º_šlše
 

1129 
	`__NTH
 (
	$±h»ad_equ®
 (
±h»ad_t
 
__th»ad1
,…th»ad_ˆ
__th»ad2
))

1131  
__th»ad1
 =ğ
__th»ad2
;

1132 
	}
}

1135 
	g__END_DECLS


	@/usr/include/wctype.h

24 #iâdeà
_WCTYPE_H


26 
	~<ã©u»s.h
>

27 
	~<b™s/ty³s.h
>

29 #iâdeà
__Ãed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__Ãed_wšt_t


	)

34 
	~<¡ddef.h
>

38 #iâdeà
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #undeà
__Ãed_iswxxx


47 #iâdeà
__iswxxx_defšed


48 
	#__iswxxx_defšed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	twùy³_t
;

54 
	g__END_NAMESPACE_C99


56 #iâdeà
_ISwb™


61 
	~<’dŸn.h
>

62 #ià
__BYTE_ORDER
 =ğ
__BIG_ENDIAN


63 
	#_ISwb™
(
b™
è(1 << (b™))

	)

65 
	#_ISwb™
(
b™
) \

66 ((
b™
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
b™
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
b™
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (è((1UL << (
b™
)è>> 24))))

	)

74 
	m__ISwuµ”
 = 0,

75 
	m__ISwlow”
 = 1,

76 
	m__ISw®pha
 = 2,

77 
	m__ISwdig™
 = 3,

78 
	m__ISwxdig™
 = 4,

79 
	m__ISw¥aû
 = 5,

80 
	m__ISw´št
 = 6,

81 
	m__ISwg¿ph
 = 7,

82 
	m__ISwbÏnk
 = 8,

83 
	m__ISwúŒl
 = 9,

84 
	m__ISwpunù
 = 10,

85 
	m__ISw®num
 = 11,

87 
	m_ISwuµ”
 = 
_ISwb™
 (
__ISwuµ”
),

88 
	m_ISwlow”
 = 
_ISwb™
 (
__ISwlow”
),

89 
	m_ISw®pha
 = 
_ISwb™
 (
__ISw®pha
),

90 
	m_ISwdig™
 = 
_ISwb™
 (
__ISwdig™
),

91 
	m_ISwxdig™
 = 
_ISwb™
 (
__ISwxdig™
),

92 
	m_ISw¥aû
 = 
_ISwb™
 (
__ISw¥aû
),

93 
	m_ISw´št
 = 
_ISwb™
 (
__ISw´št
),

94 
	m_ISwg¿ph
 = 
_ISwb™
 (
__ISwg¿ph
),

95 
	m_ISwbÏnk
 = 
_ISwb™
 (
__ISwbÏnk
),

96 
	m_ISwúŒl
 = 
_ISwb™
 (
__ISwúŒl
),

97 
	m_ISwpunù
 = 
_ISwb™
 (
__ISwpunù
),

98 
	m_ISw®num
 = 
_ISwb™
 (
__ISw®num
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$isw®num
 (
wšt_t
 
__wc
è
__THROW
;

118 
	$isw®pha
 (
wšt_t
 
__wc
è
__THROW
;

121 
	$iswúŒl
 (
wšt_t
 
__wc
è
__THROW
;

125 
	$iswdig™
 (
wšt_t
 
__wc
è
__THROW
;

129 
	$iswg¿ph
 (
wšt_t
 
__wc
è
__THROW
;

134 
	$iswlow”
 (
wšt_t
 
__wc
è
__THROW
;

137 
	$isw´št
 (
wšt_t
 
__wc
è
__THROW
;

142 
	$iswpunù
 (
wšt_t
 
__wc
è
__THROW
;

147 
	$isw¥aû
 (
wšt_t
 
__wc
è
__THROW
;

152 
	$iswuµ”
 (
wšt_t
 
__wc
è
__THROW
;

157 
	$iswxdig™
 (
wšt_t
 
__wc
è
__THROW
;

162 #ifdeà
__USE_ISOC99


163 
	$iswbÏnk
 (
wšt_t
 
__wc
è
__THROW
;

172 
wùy³_t
 
	$wùy³
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

176 
	$iswùy³
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
è
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__cÚ¡
 
	t__št32_t
 *
	twù¿ns_t
;

188 
__END_NAMESPACE_C99


189 #ifdeà
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
wù¿ns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wšt_t
 
	$towlow”
 (
wšt_t
 
__wc
è
__THROW
;

198 
wšt_t
 
	$towuµ”
 (
wšt_t
 
__wc
è
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifdeà
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
wù¿ns_t
 
	$wù¿ns
 (
__cÚ¡
 *
__´İ”ty
è
__THROW
;

222 
wšt_t
 
	$towù¿ns
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
è
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifdeà
__USE_XOPEN2K8


227 
	~<xloÿË.h
>

231 
	$isw®num_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

237 
	$isw®pha_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

240 
	$iswúŒl_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

244 
	$iswdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

248 
	$iswg¿ph_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

253 
	$iswlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

256 
	$isw´št_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

261 
	$iswpunù_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

266 
	$isw¥aû_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

271 
	$iswuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

276 
	$iswxdig™_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

281 
	$iswbÏnk_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

285 
wùy³_t
 
	$wùy³_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

286 
__THROW
;

290 
	$iswùy³_l
 (
wšt_t
 
__wc
, 
wùy³_t
 
__desc
, 
__loÿË_t
 
__loÿË
)

291 
__THROW
;

299 
wšt_t
 
	$towlow”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

302 
wšt_t
 
	$towuµ”_l
 (
wšt_t
 
__wc
, 
__loÿË_t
 
__loÿË
è
__THROW
;

306 
wù¿ns_t
 
	$wù¿ns_l
 (
__cÚ¡
 *
__´İ”ty
, 
__loÿË_t
 
__loÿË
)

307 
__THROW
;

310 
wšt_t
 
	$towù¿ns_l
 (
wšt_t
 
__wc
, 
wù¿ns_t
 
__desc
,

311 
__loÿË_t
 
__loÿË
è
__THROW
;

315 
__END_DECLS


	@/usr/include/asm-generic/errno-base.h

1 #iâdeà
_ASM_GENERIC_ERRNO_BASE_H


2 
	#_ASM_GENERIC_ERRNO_BASE_H


	)

4 
	#EPERM
 1

	)

5 
	#ENOENT
 2

	)

6 
	#ESRCH
 3

	)

7 
	#EINTR
 4

	)

8 
	#EIO
 5

	)

9 
	#ENXIO
 6

	)

10 
	#E2BIG
 7

	)

11 
	#ENOEXEC
 8

	)

12 
	#EBADF
 9

	)

13 
	#ECHILD
 10

	)

14 
	#EAGAIN
 11

	)

15 
	#ENOMEM
 12

	)

16 
	#EACCES
 13

	)

17 
	#EFAULT
 14

	)

18 
	#ENOTBLK
 15

	)

19 
	#EBUSY
 16

	)

20 
	#EEXIST
 17

	)

21 
	#EXDEV
 18

	)

22 
	#ENODEV
 19

	)

23 
	#ENOTDIR
 20

	)

24 
	#EISDIR
 21

	)

25 
	#EINVAL
 22

	)

26 
	#ENFILE
 23

	)

27 
	#EMFILE
 24

	)

28 
	#ENOTTY
 25

	)

29 
	#ETXTBSY
 26

	)

30 
	#EFBIG
 27

	)

31 
	#ENOSPC
 28

	)

32 
	#ESPIPE
 29

	)

33 
	#EROFS
 30

	)

34 
	#EMLINK
 31

	)

35 
	#EPIPE
 32

	)

36 
	#EDOM
 33

	)

37 
	#ERANGE
 34

	)

	@/usr/include/bits/setjmp.h

20 #iâdeà
_BITS_SETJMP_H


21 
	#_BITS_SETJMP_H
 1

	)

23 #ià!
defšed
 
_SETJMP_H
 && !defšed 
_PTHREAD_H


27 
	~<b™s/wÜdsize.h
>

29 #iâdeà
_ASM


31 #ià
__WORDSIZE
 == 64

32 
	t__jmp_buf
[8];

34 
	t__jmp_buf
[6];

	@/usr/include/sched.h

20 #iâdef 
_SCHED_H


21 
	#_SCHED_H
 1

	)

23 
	~<ã©u»s.h
>

26 
	~<b™s/ty³s.h
>

28 
	#__Ãed_size_t


	)

29 
	~<¡ddef.h
>

31 
	#__Ãed_time¥ec


	)

32 
	~<time.h
>

35 
	~<b™s/sched.h
>

37 
	#sched_´iÜ™y
 
__sched_´iÜ™y


	)

40 
__BEGIN_DECLS


43 
	$sched_£¬am
 (
__pid_t
 
__pid
, 
__cÚ¡
 
sched_·¿m
 *
__·¿m
)

44 
__THROW
;

47 
	$sched_g‘·¿m
 (
__pid_t
 
__pid
, 
sched_·¿m
 *
__·¿m
è
__THROW
;

50 
	$sched_£tscheduËr
 (
__pid_t
 
__pid
, 
__pŞicy
,

51 
__cÚ¡
 
sched_·¿m
 *
__·¿m
è
__THROW
;

54 
	$sched_g‘scheduËr
 (
__pid_t
 
__pid
è
__THROW
;

57 
	$sched_y›ld
 (è
__THROW
;

60 
	$sched_g‘_´iÜ™y_max
 (
__®gÜ™hm
è
__THROW
;

63 
	$sched_g‘_´iÜ™y_mš
 (
__®gÜ™hm
è
__THROW
;

66 
	$sched_¼_g‘_š‹rv®
 (
__pid_t
 
__pid
, 
time¥ec
 *
__t
è
__THROW
;

69 #ifdeà
__USE_GNU


71 
	#CPU_SETSIZE
 
__CPU_SETSIZE


	)

72 
	#CPU_SET
(
ıu
, 
ıu£
è
	`__CPU_SET_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

73 
	#CPU_CLR
(
ıu
, 
ıu£
è
	`__CPU_CLR_S
 (ıu,  (
ıu_£t_t
), cpu£)

	)

74 
	#CPU_ISSET
(
ıu
, 
ıu£
è
	`__CPU_ISSET_S
 (ıu,  (
ıu_£t_t
), \

75 
ıu£
)

	)

76 
	#CPU_ZERO
(
ıu£
è
	`__CPU_ZERO_S
 ( (
ıu_£t_t
), cpu£)

	)

77 
	#CPU_COUNT
(
ıu£
è
	`__CPU_COUNT_S
 ( (
ıu_£t_t
), cpu£)

	)

79 
	#CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_SET_S
 (ıu, s‘size, cpu£)

	)

80 
	#CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_CLR_S
 (ıu, s‘size, cpu£)

	)

81 
	#CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
è
	`__CPU_ISSET_S
 (cpu, setsize, \

82 
ıu£
)

	)

83 
	#CPU_ZERO_S
(
£tsize
, 
ıu£
è
	`__CPU_ZERO_S
 (£tsize, cpu£)

	)

84 
	#CPU_COUNT_S
(
£tsize
, 
ıu£
è
	`__CPU_COUNT_S
 (£tsize, cpu£)

	)

86 
	#CPU_EQUAL
(
ıu£1
, 
ıu£2
) \

87 
	`__CPU_EQUAL_S
 ( (
ıu_£t_t
), 
ıu£1
, 
ıu£2
)

	)

88 
	#CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

89 
	`__CPU_EQUAL_S
 (
£tsize
, 
ıu£1
, 
ıu£2
)

	)

91 
	#CPU_AND
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

92 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

93 
	#CPU_OR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

94 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

95 
	#CPU_XOR
(
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

96 
	`__CPU_OP_S
 ( (
ıu_£t_t
), 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

97 
	#CPU_AND_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

98 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, &)

	)

99 
	#CPU_OR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

100 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, |)

	)

101 
	#CPU_XOR_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
) \

102 
	`__CPU_OP_S
 (
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, ^)

	)

104 
	#CPU_ALLOC_SIZE
(
couÁ
è
	`__CPU_ALLOC_SIZE
 (couÁ)

	)

105 
	#CPU_ALLOC
(
couÁ
è
	`__CPU_ALLOC
 (couÁ)

	)

106 
	#CPU_FREE
(
ıu£t
è
	`__CPU_FREE
 (ıu£t)

	)

110 
	$sched_£ffš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

111 
__cÚ¡
 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

114 
	$sched_g‘affš™y
 (
__pid_t
 
__pid
, 
size_t
 
__ıu£tsize
,

115 
ıu_£t_t
 *
__ıu£t
è
__THROW
;

118 
__END_DECLS


	@/usr/include/signal.h

23 #iâdef 
_SIGNAL_H


25 #ià!
defšed
 
__Ãed_sig_©omic_t
 && !defšed 
__Ãed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<ã©u»s.h
>

31 
	g__BEGIN_DECLS


33 
	~<b™s/sig£t.h
>

37 #ià
defšed
 
__Ãed_sig_©omic_t
 || defšed 
_SIGNAL_H


38 #iâdeà
__sig_©omic_t_defšed


39 
	#__sig_©omic_t_defšed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #undeà
__Ãed_sig_©omic_t


47 #ià
defšed
 
__Ãed_sig£t_t
 || (defšed 
_SIGNAL_H
 && defšed 
__USE_POSIX
)

48 #iâdeà
__sig£t_t_defšed


49 
	#__sig£t_t_defšed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #undeà
__Ãed_sig£t_t


55 #ifdeà
_SIGNAL_H


57 
	~<b™s/ty³s.h
>

58 
	~<b™s/signum.h
>

60 #ià
defšed
 
__USE_XOPEN
 || defšed 
__USE_XOPEN2K


61 #iâdeà
__pid_t_defšed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_defšed


	)

65 #ifdeà
__USE_XOPEN


67 #iâdeà
__uid_t_defšed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_defšed


	)

73 #ifdeà
__USE_POSIX199309


75 
	#__Ãed_time¥ec


	)

76 
	~<time.h
>

79 
	~<b™s/sigšfo.h
>

84 (*
	t__sighªdËr_t
) ();

89 
__sighªdËr_t
 
	$__sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

90 
__THROW
;

91 #ifdeà
__USE_GNU


92 
__sighªdËr_t
 
	$sysv_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

93 
__THROW
;

99 
__BEGIN_NAMESPACE_STD


100 #ifdeà
__USE_BSD


101 
__sighªdËr_t
 
	$sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

102 
__THROW
;

105 #ifdeà
__REDIRECT_NTH


106 
__sighªdËr_t
 
	`__REDIRECT_NTH
 (
sigÇl
,

107 (
__sig
, 
__sighªdËr_t
 
__hªdËr
),

108 
__sysv_sigÇl
);

110 
	#sigÇl
 
__sysv_sigÇl


	)

113 
__END_NAMESPACE_STD


115 #ifdeà
__USE_XOPEN


118 
__sighªdËr_t
 
	$bsd_sigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

119 
__THROW
;

125 #ifdeà
__USE_POSIX


126 
	$kl
 (
__pid_t
 
__pid
, 
__sig
è
__THROW
;

129 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


133 
	$kÍg
 (
__pid_t
 
__pg½
, 
__sig
è
__THROW
;

136 
__BEGIN_NAMESPACE_STD


138 
	$¿i£
 (
__sig
è
__THROW
;

139 
__END_NAMESPACE_STD


141 #ifdeà
__USE_SVID


143 
__sighªdËr_t
 
	$ssigÇl
 (
__sig
, 
__sighªdËr_t
 
__hªdËr
)

144 
__THROW
;

145 
	$gsigÇl
 (
__sig
è
__THROW
;

148 #ià
defšed
 
__USE_MISC
 || defšed 
__USE_XOPEN2K


150 
	`psigÇl
 (
__sig
, 
__cÚ¡
 *
__s
);

153 #ifdeà
__USE_XOPEN2K


155 
	`psigšfo
 (
__cÚ¡
 
sigšfo_t
 *
__pšfo
, __cÚ¡ *
__s
);

168 
	`__sig·u£
 (
__sig_Ü_mask
, 
__is_sig
);

170 #ifdeà
__FAVOR_BSD


173 
	$sig·u£
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

175 #ifdeà
__USE_XOPEN


176 #ifdeà
__GNUC__


177 
	$sig·u£
 (
__sig
è
	`__asm__
 ("__xpg_sigpause");

180 
	#sig·u£
(
sig
è
	`__sig·u£
 ((sig), 1)

	)

186 #ifdeà
__USE_BSD


193 
	#sigmask
(
sig
è
	`__sigmask
(sig)

	)

196 
	$sigblock
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

199 
	$sig£tmask
 (
__mask
è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

202 
	$sigg‘mask
 (è
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

206 #ifdeà
__USE_MISC


207 
	#NSIG
 
_NSIG


	)

210 #ifdeà
__USE_GNU


211 
__sighªdËr_t
 
	tsighªdËr_t
;

215 #ifdeà
__USE_BSD


216 
__sighªdËr_t
 
	tsig_t
;

219 #ifdeà
__USE_POSIX


222 
	$sigem±y£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

225 
	$sigfl£t
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

228 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

231 
	$sigd–£t
 (
sig£t_t
 *
__£t
, 
__signo
è
__THROW
 
	`__nÚnuÎ
 ((1));

234 
	$sigismemb”
 (
__cÚ¡
 
sig£t_t
 *
__£t
, 
__signo
)

235 
__THROW
 
	`__nÚnuÎ
 ((1));

237 #ifdeà
__USE_GNU


239 
	$sigi£m±y£t
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

242 
	$sigªd£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

243 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

246 
	$sigÜ£t
 (
sig£t_t
 *
__£t
, 
__cÚ¡
 sig£t_ˆ*
__Ëá
,

247 
__cÚ¡
 
sig£t_t
 *
__right
è
__THROW
 
	`__nÚnuÎ
 ((1, 2, 3));

252 
	~<b™s/sigaùiÚ.h
>

255 
	$sig´ocmask
 (
__how
, 
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

256 
sig£t_t
 *
__»¡riù
 
__o£t
è
__THROW
;

263 
	$sigsu¥’d
 (
__cÚ¡
 
sig£t_t
 *
__£t
è
	`__nÚnuÎ
 ((1));

266 
	$sigaùiÚ
 (
__sig
, 
__cÚ¡
 
sigaùiÚ
 *
__»¡riù
 
__aù
,

267 
sigaùiÚ
 *
__»¡riù
 
__ßù
è
__THROW
;

270 
	$sig³ndšg
 (
sig£t_t
 *
__£t
è
__THROW
 
	`__nÚnuÎ
 ((1));

277 
	$sigwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
, *__»¡riù 
__sig
)

278 
	`__nÚnuÎ
 ((1, 2));

280 #ifdeà
__USE_POSIX199309


285 
	$sigwa™šfo
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

286 
sigšfo_t
 *
__»¡riù
 
__šfo
è
	`__nÚnuÎ
 ((1));

293 
	$sigtimedwa™
 (
__cÚ¡
 
sig£t_t
 *
__»¡riù
 
__£t
,

294 
sigšfo_t
 *
__»¡riù
 
__šfo
,

295 
__cÚ¡
 
time¥ec
 *
__»¡riù
 
__timeout
)

296 
	`__nÚnuÎ
 ((1));

300 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__cÚ¡
 
sigv®
 
__v®
)

301 
__THROW
;

306 #ifdeà
__USE_BSD


310 
__cÚ¡
 *__cÚ¡ 
_sys_sigli¡
[
_NSIG
];

311 
__cÚ¡
 *__cÚ¡ 
sys_sigli¡
[
_NSIG
];

314 
	ssigvec


316 
__sighªdËr_t
 
sv_hªdËr
;

317 
sv_mask
;

319 
sv_æags
;

320 
	#sv_Ú¡ack
 
sv_æags


	)

324 
	#SV_ONSTACK
 (1 << 0)

	)

325 
	#SV_INTERRUPT
 (1 << 1)

	)

326 
	#SV_RESETHAND
 (1 << 2)

	)

334 
	$sigvec
 (
__sig
, 
__cÚ¡
 
sigvec
 *
__vec
,

335 
sigvec
 *
__ovec
è
__THROW
;

339 
	~<b™s/sigcÚ‹xt.h
>

342 
	$sig»tuº
 (
sigcÚ‹xt
 *
__sı
è
__THROW
;

347 #ià
defšed
 
__USE_BSD
 || defšed 
__USE_XOPEN_EXTENDED


348 
	#__Ãed_size_t


	)

349 
	~<¡ddef.h
>

354 
	$sigš‹¼u±
 (
__sig
, 
__š‹¼u±
è
__THROW
;

356 
	~<b™s/sig¡ack.h
>

357 #ifdeà
__USE_XOPEN


359 
	~<sys/ucÚ‹xt.h
>

365 
	$sig¡ack
 (
sig¡ack
 *
__ss
, sig¡ack *
__oss
)

366 
__THROW
 
__©Œibu‹_d•»ÿ‹d__
;

370 
	$sig®t¡ack
 (
__cÚ¡
 
sig®t¡ack
 *
__»¡riù
 
__ss
,

371 
sig®t¡ack
 *
__»¡riù
 
__oss
è
__THROW
;

375 #ifdeà
__USE_XOPEN_EXTENDED


379 
	$sighŞd
 (
__sig
è
__THROW
;

382 
	$sig»l£
 (
__sig
è
__THROW
;

385 
	$sigignÜe
 (
__sig
è
__THROW
;

388 
__sighªdËr_t
 
	$sig£t
 (
__sig
, 
__sighªdËr_t
 
__di¥
è
__THROW
;

391 #ià
defšed
 
__USE_POSIX199506
 || defšed 
__USE_UNIX98


394 
	~<b™s/±h»adty³s.h
>

395 
	~<b™s/sigth»ad.h
>

402 
	$__libc_cu¼’t_sig¹mš
 (è
__THROW
;

404 
	$__libc_cu¼’t_sig¹max
 (è
__THROW
;

408 
__END_DECLS


	@/usr/include/bits/sched.h

22 #iâdeà
__Ãed_sched·¿m


24 #iâdeà
_SCHED_H


30 
	#SCHED_OTHER
 0

	)

31 
	#SCHED_FIFO
 1

	)

32 
	#SCHED_RR
 2

	)

33 #ifdeà
__USE_GNU


34 
	#SCHED_BATCH
 3

	)

37 #ifdeà
__USE_MISC


39 
	#CSIGNAL
 0x000000fà

	)

40 
	#CLONE_VM
 0x00000100

	)

41 
	#CLONE_FS
 0x00000200

	)

42 
	#CLONE_FILES
 0x00000400

	)

43 
	#CLONE_SIGHAND
 0x00000800

	)

44 
	#CLONE_PTRACE
 0x00002000

	)

45 
	#CLONE_VFORK
 0x00004000

	)

47 
	#CLONE_PARENT
 0x00008000

	)

49 
	#CLONE_THREAD
 0x00010000

	)

50 
	#CLONE_NEWNS
 0x00020000

	)

51 
	#CLONE_SYSVSEM
 0x00040000

	)

52 
	#CLONE_SETTLS
 0x00080000

	)

53 
	#CLONE_PARENT_SETTID
 0x00100000

	)

55 
	#CLONE_CHILD_CLEARTID
 0x00200000

	)

57 
	#CLONE_DETACHED
 0x00400000

	)

58 
	#CLONE_UNTRACED
 0x00800000

	)

60 
	#CLONE_CHILD_SETTID
 0x01000000

	)

62 
	#CLONE_NEWUTS
 0x04000000

	)

63 
	#CLONE_NEWIPC
 0x08000000

	)

64 
	#CLONE_NEWUSER
 0x10000000

	)

65 
	#CLONE_NEWPID
 0x20000000

	)

66 
	#CLONE_NEWNET
 0x40000000

	)

67 
	#CLONE_IO
 0x80000000

	)

71 
	ssched_·¿m


73 
	m__sched_´iÜ™y
;

76 
	g__BEGIN_DECLS


78 #ifdeà
__USE_MISC


80 
şÚe
 ((*
__â
è(*
__¬g
), *
__chd_¡ack
,

81 
__æags
, *
__¬g
, ...è
__THROW
;

84 
	$unsh¬e
 (
__æags
è
__THROW
;

87 
	$sched_g‘ıu
 (è
__THROW
;

90 
__END_DECLS


94 #ià!
defšed
 
__defšed_sched·¿m
 \

95 && (
defšed
 
__Ãed_sched·¿m
 || defšed 
_SCHED_H
)

96 
	#__defšed_sched·¿m
 1

	)

98 
	s__sched_·¿m


100 
__sched_´iÜ™y
;

102 #undeà
__Ãed_sched·¿m


106 #ià
defšed
 
_SCHED_H
 && !defšed 
__ıu_£t_t_defšed


107 
	#__ıu_£t_t_defšed


	)

109 
	#__CPU_SETSIZE
 1024

	)

110 
	#__NCPUBITS
 (8 *  (
__ıu_mask
))

	)

113 
	t__ıu_mask
;

116 
	#__CPUELT
(
ıu
è((ıuè/ 
__NCPUBITS
)

	)

117 
	#__CPUMASK
(
ıu
è((
__ıu_mask
è1 << ((ıuè% 
__NCPUBITS
))

	)

122 
__ıu_mask
 
__b™s
[
__CPU_SETSIZE
 / 
__NCPUBITS
];

123 } 
	tıu_£t_t
;

126 #ià
	`__GNUC_PREREQ
 (2, 91)

127 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

128 dØ
	`__butš_mem£t
 (
ıu£
, '\0', 
£tsize
); 0)

	)

130 
	#__CPU_ZERO_S
(
£tsize
, 
ıu£
) \

132 
size_t
 
__i
; \

133 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

134 
__ıu_mask
 *
__b™s
 = (
ıu£
)->__bits; \

135 
__i
 = 0; __˜< 
__imax
; ++__i) \

136 
__b™s
[
__i
] = 0; \

137 
	}
} 0)

	)

139 
	#__CPU_SET_S
(
ıu
, 
£tsize
, 
ıu£
) \

140 (
__ex‹nsiÚ__
 \

141 ({ 
size_t
 
__ıu
 = (
ıu
); \

142 
__ıu
 < 8 * (
£tsize
) \

143 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

144 |ğ
	`__CPUMASK
 (
__ıu
)) \

145 : 0; }))

	)

146 
	#__CPU_CLR_S
(
ıu
, 
£tsize
, 
ıu£
) \

147 (
__ex‹nsiÚ__
 \

148 ({ 
size_t
 
__ıu
 = (
ıu
); \

149 
__ıu
 < 8 * (
£tsize
) \

150 ? (((
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

151 &ğ~
	`__CPUMASK
 (
__ıu
)) \

152 : 0; }))

	)

153 
	#__CPU_ISSET_S
(
ıu
, 
£tsize
, 
ıu£
) \

154 (
__ex‹nsiÚ__
 \

155 ({ 
size_t
 
__ıu
 = (
ıu
); \

156 
__ıu
 < 8 * (
£tsize
) \

157 ? ((((
__cÚ¡
 
__ıu_mask
 *è((
ıu£
)->
__b™s
))[
	`__CPUELT
 (
__ıu
)] \

158 & 
	`__CPUMASK
 (
__ıu
))) != 0 \

159 : 0; }))

	)

161 
	#__CPU_COUNT_S
(
£tsize
, 
ıu£
) \

162 
	`__sched_ıucouÁ
 (
£tsize
, 
ıu£
)

	)

164 #ià
__GNUC_PREREQ
 (2, 91)

165 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

166 (
	`__butš_memcmp
 (
ıu£1
, 
ıu£2
, 
£tsize
è=ğ0)

	)

168 
	#__CPU_EQUAL_S
(
£tsize
, 
ıu£1
, 
ıu£2
) \

169 (
__ex‹nsiÚ__
 \

170 ({ 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
ıu£1
)->
__b™s
; \

171 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
ıu£2
)->
__b™s
; \

172 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

173 
size_t
 
__i
; \

174 
__i
 = 0; __˜< 
__imax
; ++__i) \

175 ià(
__b™s
[
__i
] != __bits[__i]) \

177 
__i
 =ğ
__imax
; }))

	)

180 
	#__CPU_OP_S
(
£tsize
, 
de¡£t
, 
¤c£t1
, 
¤c£t2
, 
İ
) \

181 (
__ex‹nsiÚ__
 \

182 ({ 
ıu_£t_t
 *
__de¡
 = (
de¡£t
); \

183 
__cÚ¡
 
__ıu_mask
 *
__¬r1
 = (
¤c£t1
)->
__b™s
; \

184 
__cÚ¡
 
__ıu_mask
 *
__¬r2
 = (
¤c£t2
)->
__b™s
; \

185 
size_t
 
__imax
 = (
£tsize
è/  (
__ıu_mask
); \

186 
size_t
 
__i
; \

187 
__i
 = 0; __˜< 
__imax
; ++__i) \

188 ((
__ıu_mask
 *è
__de¡
->
__b™s
)[
__i
] = 
__¬r1
[__i] 
İ
 
__¬r2
[__i]; \

189 
__de¡
; }))

	)

191 
	#__CPU_ALLOC_SIZE
(
couÁ
) \

192 ((((
couÁ
è+ 
__NCPUBITS
 - 1è/ __NCPUBITSè*  (
__ıu_mask
))

	)

193 
	#__CPU_ALLOC
(
couÁ
è
	`__sched_ıu®loc
 (couÁ)

	)

194 
	#__CPU_FREE
(
ıu£t
è
	`__sched_ıuä“
 (ıu£t)

	)

196 
__BEGIN_DECLS


198 
	$__sched_ıucouÁ
 (
size_t
 
__£tsize
, cÚ¡ 
ıu_£t_t
 *
__£
)

199 
__THROW
;

200 
ıu_£t_t
 *
	$__sched_ıu®loc
 (
size_t
 
__couÁ
è
__THROW
 
__wur
;

201 
	$__sched_ıuä“
 (
ıu_£t_t
 *
__£t
è
__THROW
;

203 
__END_DECLS


	@/usr/include/bits/sigaction.h

20 #iâdeà
_SIGNAL_H


25 
	ssigaùiÚ


28 #ifdeà
__USE_POSIX199309


32 
__sighªdËr_t
 
	m§_hªdËr
;

34 (*
	m§_sigaùiÚ
è(, 
	msigšfo_t
 *, *);

36 
	m__sigaùiÚ_hªdËr
;

37 
	#§_hªdËr
 
__sigaùiÚ_hªdËr
.
§_hªdËr


	)

38 
	#§_sigaùiÚ
 
__sigaùiÚ_hªdËr
.
§_sigaùiÚ


	)

40 
__sighªdËr_t
 
	m§_hªdËr
;

44 
__sig£t_t
 
	m§_mask
;

47 
	m§_æags
;

50 (*
	m§_»¡Ü”
) ();

54 
	#SA_NOCLDSTOP
 1

	)

55 
	#SA_NOCLDWAIT
 2

	)

56 
	#SA_SIGINFO
 4

	)

58 #ià
defšed
 
__USE_UNIX98
 || defšed 
__USE_MISC


59 
	#SA_ONSTACK
 0x08000000

	)

60 
	#SA_RESTART
 0x10000000

	)

61 
	#SA_NODEFER
 0x40000000

	)

63 
	#SA_RESETHAND
 0x80000000

	)

65 #ifdeà
__USE_MISC


66 
	#SA_INTERRUPT
 0x20000000

	)

69 
	#SA_NOMASK
 
SA_NODEFER


	)

70 
	#SA_ONESHOT
 
SA_RESETHAND


	)

71 
	#SA_STACK
 
SA_ONSTACK


	)

75 
	#SIG_BLOCK
 0

	)

76 
	#SIG_UNBLOCK
 1

	)

77 
	#SIG_SETMASK
 2

	)

	@/usr/include/bits/sigcontext.h

19 #iâdeà
_BITS_SIGCONTEXT_H


20 
	#_BITS_SIGCONTEXT_H
 1

	)

22 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_SYS_UCONTEXT_H


26 
	~<b™s/wÜdsize.h
>

28 
	s_å»g


30 
	msignifiÿnd
[4];

31 
	mexpÚ’t
;

34 
	s_åx»g


36 
	msignifiÿnd
[4];

37 
	mexpÚ’t
;

38 
	m·ddšg
[3];

41 
	s_xmm»g


43 
__ušt32_t
 
	m–em’t
[4];

48 #ià
__WORDSIZE
 == 32

50 
	s_å¡©e


53 
__ušt32_t
 
	mcw
;

54 
__ušt32_t
 
	msw
;

55 
__ušt32_t
 
	mg
;

56 
__ušt32_t
 
	moff
;

57 
__ušt32_t
 
	mcs£l
;

58 
__ušt32_t
 
	md©aoff
;

59 
__ušt32_t
 
	md©a£l
;

60 
_å»g
 
	m_¡
[8];

61 
	m¡©us
;

62 
	mmagic
;

65 
__ušt32_t
 
	m_fx¤_’v
[6];

66 
__ušt32_t
 
	mmxc¤
;

67 
__ušt32_t
 
	m»£rved
;

68 
_åx»g
 
	m_fx¤_¡
[8];

69 
_xmm»g
 
	m_xmm
[8];

70 
__ušt32_t
 
	m·ddšg
[56];

73 #iâdeà
sigcÚ‹xt_¡ruù


78 
	#sigcÚ‹xt_¡ruù
 
sigcÚ‹xt


	)

81 
	ssigcÚ‹xt


83 
	mgs
, 
	m__gsh
;

84 
	mfs
, 
	m__fsh
;

85 
	mes
, 
	m__esh
;

86 
	mds
, 
	m__dsh
;

87 
	medi
;

88 
	mesi
;

89 
	mebp
;

90 
	me¥
;

91 
	mebx
;

92 
	medx
;

93 
	mecx
;

94 
	m—x
;

95 
	mŒ­no
;

96 
	m”r
;

97 
	me
;

98 
	mcs
, 
	m__csh
;

99 
	meæags
;

100 
	me¥_©_sigÇl
;

101 
	mss
, 
	m__ssh
;

102 
_å¡©e
 * 
	må¡©e
;

103 
	mŞdmask
;

104 
	mü2
;

109 
	s_å¡©e


112 
__ušt16_t
 
	mcwd
;

113 
__ušt16_t
 
	mswd
;

114 
__ušt16_t
 
	máw
;

115 
__ušt16_t
 
	mfİ
;

116 
__ušt64_t
 
	mr
;

117 
__ušt64_t
 
	mrdp
;

118 
__ušt32_t
 
	mmxc¤
;

119 
__ušt32_t
 
	mmxü_mask
;

120 
_åx»g
 
	m_¡
[8];

121 
_xmm»g
 
	m_xmm
[16];

122 
__ušt32_t
 
	m·ddšg
[24];

125 
	ssigcÚ‹xt


127 
	mr8
;

128 
	mr9
;

129 
	mr10
;

130 
	mr11
;

131 
	mr12
;

132 
	mr13
;

133 
	mr14
;

134 
	mr15
;

135 
	mrdi
;

136 
	mrsi
;

137 
	mrbp
;

138 
	mrbx
;

139 
	mrdx
;

140 
	m¿x
;

141 
	mrcx
;

142 
	mr¥
;

143 
	mr
;

144 
	meæags
;

145 
	mcs
;

146 
	mgs
;

147 
	mfs
;

148 
	m__·d0
;

149 
	m”r
;

150 
	mŒ­no
;

151 
	mŞdmask
;

152 
	mü2
;

153 
_å¡©e
 * 
	må¡©e
;

154 
	m__»£rved1
 [8];

	@/usr/include/bits/siginfo.h

20 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
__Ãed_sigšfo_t
 \

21 && !
defšed
 
	g__Ãed_sigev’t_t


25 
	~<b™s/wÜdsize.h
>

27 #ià(!
defšed
 
__have_sigv®_t
 \

28 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
 \

29 || 
defšed
 
	g__Ãed_sigev’t_t
))

30 
	#__have_sigv®_t
 1

	)

33 
	usigv®


35 
	msiv®_št
;

36 *
	msiv®_±r
;

37 } 
	tsigv®_t
;

40 #ià(!
defšed
 
__have_sigšfo_t
 \

41 && (
defšed
 
	g_SIGNAL_H
 || defšed 
	g__Ãed_sigšfo_t
))

42 
	#__have_sigšfo_t
 1

	)

44 
	#__SI_MAX_SIZE
 128

	)

45 #ià
__WORDSIZE
 == 64

46 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 4)

	)

48 
	#__SI_PAD_SIZE
 ((
__SI_MAX_SIZE
 /  ()è- 3)

	)

51 
	ssigšfo


53 
	msi_signo
;

54 
	msi_”ºo
;

56 
	msi_code
;

60 
	m_·d
[
__SI_PAD_SIZE
];

65 
__pid_t
 
	msi_pid
;

66 
__uid_t
 
	msi_uid
;

67 } 
	m_kl
;

72 
	msi_tid
;

73 
	msi_ov”run
;

74 
sigv®_t
 
	msi_sigv®
;

75 } 
	m_tim”
;

80 
__pid_t
 
	msi_pid
;

81 
__uid_t
 
	msi_uid
;

82 
sigv®_t
 
	msi_sigv®
;

83 } 
	m_¹
;

88 
__pid_t
 
	msi_pid
;

89 
__uid_t
 
	msi_uid
;

90 
	msi_¡©us
;

91 
__şock_t
 
	msi_utime
;

92 
__şock_t
 
	msi_¡ime
;

93 } 
	m_sigchld
;

98 *
	msi_addr
;

99 } 
	m_sigçuÉ
;

104 
	msi_bªd
;

105 
	msi_fd
;

106 } 
	m_sigpŞl
;

107 } 
	m_sif›lds
;

108 } 
	tsigšfo_t
;

112 
	#si_pid
 
_sif›lds
.
_kl
.
si_pid


	)

113 
	#si_uid
 
_sif›lds
.
_kl
.
si_uid


	)

114 
	#si_tim”id
 
_sif›lds
.
_tim”
.
si_tid


	)

115 
	#si_ov”run
 
_sif›lds
.
_tim”
.
si_ov”run


	)

116 
	#si_¡©us
 
_sif›lds
.
_sigchld
.
si_¡©us


	)

117 
	#si_utime
 
_sif›lds
.
_sigchld
.
si_utime


	)

118 
	#si_¡ime
 
_sif›lds
.
_sigchld
.
si_¡ime


	)

119 
	#si_v®ue
 
_sif›lds
.
_¹
.
si_sigv®


	)

120 
	#si_št
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_št


	)

121 
	#si_±r
 
_sif›lds
.
_¹
.
si_sigv®
.
siv®_±r


	)

122 
	#si_addr
 
_sif›lds
.
_sigçuÉ
.
si_addr


	)

123 
	#si_bªd
 
_sif›lds
.
_sigpŞl
.
si_bªd


	)

124 
	#si_fd
 
_sif›lds
.
_sigpŞl
.
si_fd


	)

131 
	mSI_ASYNCNL
 = -60,

132 
	#SI_ASYNCNL
 
SI_ASYNCNL


	)

133 
	mSI_TKILL
 = -6,

134 
	#SI_TKILL
 
SI_TKILL


	)

135 
	mSI_SIGIO
,

136 
	#SI_SIGIO
 
SI_SIGIO


	)

137 
	mSI_ASYNCIO
,

138 
	#SI_ASYNCIO
 
SI_ASYNCIO


	)

139 
	mSI_MESGQ
,

140 
	#SI_MESGQ
 
SI_MESGQ


	)

141 
	mSI_TIMER
,

142 
	#SI_TIMER
 
SI_TIMER


	)

143 
	mSI_QUEUE
,

144 
	#SI_QUEUE
 
SI_QUEUE


	)

145 
	mSI_USER
,

146 
	#SI_USER
 
SI_USER


	)

147 
	mSI_KERNEL
 = 0x80

148 
	#SI_KERNEL
 
SI_KERNEL


	)

155 
	mILL_ILLOPC
 = 1,

156 
	#ILL_ILLOPC
 
ILL_ILLOPC


	)

157 
	mILL_ILLOPN
,

158 
	#ILL_ILLOPN
 
ILL_ILLOPN


	)

159 
	mILL_ILLADR
,

160 
	#ILL_ILLADR
 
ILL_ILLADR


	)

161 
	mILL_ILLTRP
,

162 
	#ILL_ILLTRP
 
ILL_ILLTRP


	)

163 
	mILL_PRVOPC
,

164 
	#ILL_PRVOPC
 
ILL_PRVOPC


	)

165 
	mILL_PRVREG
,

166 
	#ILL_PRVREG
 
ILL_PRVREG


	)

167 
	mILL_COPROC
,

168 
	#ILL_COPROC
 
ILL_COPROC


	)

169 
	mILL_BADSTK


170 
	#ILL_BADSTK
 
ILL_BADSTK


	)

176 
	mFPE_INTDIV
 = 1,

177 
	#FPE_INTDIV
 
FPE_INTDIV


	)

178 
	mFPE_INTOVF
,

179 
	#FPE_INTOVF
 
FPE_INTOVF


	)

180 
	mFPE_FLTDIV
,

181 
	#FPE_FLTDIV
 
FPE_FLTDIV


	)

182 
	mFPE_FLTOVF
,

183 
	#FPE_FLTOVF
 
FPE_FLTOVF


	)

184 
	mFPE_FLTUND
,

185 
	#FPE_FLTUND
 
FPE_FLTUND


	)

186 
	mFPE_FLTRES
,

187 
	#FPE_FLTRES
 
FPE_FLTRES


	)

188 
	mFPE_FLTINV
,

189 
	#FPE_FLTINV
 
FPE_FLTINV


	)

190 
	mFPE_FLTSUB


191 
	#FPE_FLTSUB
 
FPE_FLTSUB


	)

197 
	mSEGV_MAPERR
 = 1,

198 
	#SEGV_MAPERR
 
SEGV_MAPERR


	)

199 
	mSEGV_ACCERR


200 
	#SEGV_ACCERR
 
SEGV_ACCERR


	)

206 
	mBUS_ADRALN
 = 1,

207 
	#BUS_ADRALN
 
BUS_ADRALN


	)

208 
	mBUS_ADRERR
,

209 
	#BUS_ADRERR
 
BUS_ADRERR


	)

210 
	mBUS_OBJERR


211 
	#BUS_OBJERR
 
BUS_OBJERR


	)

217 
	mTRAP_BRKPT
 = 1,

218 
	#TRAP_BRKPT
 
TRAP_BRKPT


	)

219 
	mTRAP_TRACE


220 
	#TRAP_TRACE
 
TRAP_TRACE


	)

226 
	mCLD_EXITED
 = 1,

227 
	#CLD_EXITED
 
CLD_EXITED


	)

228 
	mCLD_KILLED
,

229 
	#CLD_KILLED
 
CLD_KILLED


	)

230 
	mCLD_DUMPED
,

231 
	#CLD_DUMPED
 
CLD_DUMPED


	)

232 
	mCLD_TRAPPED
,

233 
	#CLD_TRAPPED
 
CLD_TRAPPED


	)

234 
	mCLD_STOPPED
,

235 
	#CLD_STOPPED
 
CLD_STOPPED


	)

236 
	mCLD_CONTINUED


237 
	#CLD_CONTINUED
 
CLD_CONTINUED


	)

243 
	mPOLL_IN
 = 1,

244 
	#POLL_IN
 
POLL_IN


	)

245 
	mPOLL_OUT
,

246 
	#POLL_OUT
 
POLL_OUT


	)

247 
	mPOLL_MSG
,

248 
	#POLL_MSG
 
POLL_MSG


	)

249 
	mPOLL_ERR
,

250 
	#POLL_ERR
 
POLL_ERR


	)

251 
	mPOLL_PRI
,

252 
	#POLL_PRI
 
POLL_PRI


	)

253 
	mPOLL_HUP


254 
	#POLL_HUP
 
POLL_HUP


	)

257 #undeà
__Ãed_sigšfo_t


261 #ià(
defšed
 
_SIGNAL_H
 || defšed 
__Ãed_sigev’t_t
) \

262 && !
defšed
 
	g__have_sigev’t_t


263 
	#__have_sigev’t_t
 1

	)

266 
	#__SIGEV_MAX_SIZE
 64

	)

267 #ià
__WORDSIZE
 == 64

268 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 4)

	)

270 
	#__SIGEV_PAD_SIZE
 ((
__SIGEV_MAX_SIZE
 /  ()è- 3)

	)

273 
	ssigev’t


275 
sigv®_t
 
	msigev_v®ue
;

276 
	msigev_signo
;

277 
	msigev_nÙify
;

281 
	m_·d
[
__SIGEV_PAD_SIZE
];

285 
__pid_t
 
	m_tid
;

289 (*
	m_funùiÚ
è(
	msigv®_t
);

290 *
	m_©Œibu‹
;

291 } 
	m_sigev_th»ad
;

292 } 
	m_sigev_un
;

293 } 
	tsigev’t_t
;

296 
	#sigev_nÙify_funùiÚ
 
_sigev_un
.
_sigev_th»ad
.
_funùiÚ


	)

297 
	#sigev_nÙify_©Œibu‹s
 
_sigev_un
.
_sigev_th»ad
.
_©Œibu‹


	)

302 
	mSIGEV_SIGNAL
 = 0,

303 
	#SIGEV_SIGNAL
 
SIGEV_SIGNAL


	)

304 
	mSIGEV_NONE
,

305 
	#SIGEV_NONE
 
SIGEV_NONE


	)

306 
	mSIGEV_THREAD
,

307 
	#SIGEV_THREAD
 
SIGEV_THREAD


	)

309 
	mSIGEV_THREAD_ID
 = 4

310 
	#SIGEV_THREAD_ID
 
SIGEV_THREAD_ID


	)

	@/usr/include/bits/signum.h

20 #ifdef 
_SIGNAL_H


23 
	#SIG_ERR
 ((
__sighªdËr_t
è-1è

	)

24 
	#SIG_DFL
 ((
__sighªdËr_t
è0è

	)

25 
	#SIG_IGN
 ((
__sighªdËr_t
è1è

	)

27 #ifdeà
__USE_UNIX98


28 
	#SIG_HOLD
 ((
__sighªdËr_t
è2è

	)

33 
	#SIGHUP
 1

	)

34 
	#SIGINT
 2

	)

35 
	#SIGQUIT
 3

	)

36 
	#SIGILL
 4

	)

37 
	#SIGTRAP
 5

	)

38 
	#SIGABRT
 6

	)

39 
	#SIGIOT
 6

	)

40 
	#SIGBUS
 7

	)

41 
	#SIGFPE
 8

	)

42 
	#SIGKILL
 9

	)

43 
	#SIGUSR1
 10

	)

44 
	#SIGSEGV
 11

	)

45 
	#SIGUSR2
 12

	)

46 
	#SIGPIPE
 13

	)

47 
	#SIGALRM
 14

	)

48 
	#SIGTERM
 15

	)

49 
	#SIGSTKFLT
 16

	)

50 
	#SIGCLD
 
SIGCHLD


	)

51 
	#SIGCHLD
 17

	)

52 
	#SIGCONT
 18

	)

53 
	#SIGSTOP
 19

	)

54 
	#SIGTSTP
 20

	)

55 
	#SIGTTIN
 21

	)

56 
	#SIGTTOU
 22

	)

57 
	#SIGURG
 23

	)

58 
	#SIGXCPU
 24

	)

59 
	#SIGXFSZ
 25

	)

60 
	#SIGVTALRM
 26

	)

61 
	#SIGPROF
 27

	)

62 
	#SIGWINCH
 28

	)

63 
	#SIGPOLL
 
SIGIO


	)

64 
	#SIGIO
 29

	)

65 
	#SIGPWR
 30

	)

66 
	#SIGSYS
 31

	)

67 
	#SIGUNUSED
 31

	)

69 
	#_NSIG
 65

	)

72 
	#SIGRTMIN
 (
	`__libc_cu¼’t_sig¹mš
 ())

	)

73 
	#SIGRTMAX
 (
	`__libc_cu¼’t_sig¹max
 ())

	)

77 
	#__SIGRTMIN
 32

	)

78 
	#__SIGRTMAX
 (
_NSIG
 - 1)

	)

	@/usr/include/bits/sigstack.h

20 #iâdeà
_SIGNAL_H


26 
	ssig¡ack


28 *
	mss_¥
;

29 
	mss_Ú¡ack
;

36 
	mSS_ONSTACK
 = 1,

37 
	#SS_ONSTACK
 
SS_ONSTACK


	)

38 
	mSS_DISABLE


39 
	#SS_DISABLE
 
SS_DISABLE


	)

43 
	#MINSIGSTKSZ
 2048

	)

46 
	#SIGSTKSZ
 8192

	)

50 
	ssig®t¡ack


52 *
	mss_¥
;

53 
	mss_æags
;

54 
size_t
 
	mss_size
;

55 } 
	t¡ack_t
;

	@/usr/include/bits/sigthread.h

20 #iâdeà
_BITS_SIGTHREAD_H


21 
	#_BITS_SIGTHREAD_H
 1

	)

23 #ià!
defšed
 
_SIGNAL_H
 && !defšed 
_PTHREAD_H


31 
	$±h»ad_sigmask
 (
__how
,

32 
__cÚ¡
 
__sig£t_t
 *
__»¡riù
 
__Ãwmask
,

33 
__sig£t_t
 *
__»¡riù
 
__Şdmask
)
__THROW
;

36 
	$±h»ad_kl
 (
±h»ad_t
 
__th»adid
, 
__signo
è
__THROW
;

38 #ifdeà
__USE_GNU


40 
	$±h»ad_sigqueue
 (
±h»ad_t
 
__th»adid
, 
__signo
,

41 cÚ¡ 
sigv®
 
__v®ue
è
__THROW
;

	@/usr/include/sys/ucontext.h

19 #iâdeà
_SYS_UCONTEXT_H


20 
	#_SYS_UCONTEXT_H
 1

	)

22 
	~<ã©u»s.h
>

23 
	~<sigÇl.h
>

24 
	~<b™s/wÜdsize.h
>

28 
	~<b™s/sigcÚ‹xt.h
>

30 #ià
__WORDSIZE
 == 64

33 
	tg»g_t
;

36 
	#NGREG
 23

	)

39 
g»g_t
 
	tg»g£t_t
[
NGREG
];

41 #ifdeà
__USE_GNU


45 
	mREG_R8
 = 0,

46 
	#REG_R8
 
REG_R8


	)

47 
	mREG_R9
,

48 
	#REG_R9
 
REG_R9


	)

49 
	mREG_R10
,

50 
	#REG_R10
 
REG_R10


	)

51 
	mREG_R11
,

52 
	#REG_R11
 
REG_R11


	)

53 
	mREG_R12
,

54 
	#REG_R12
 
REG_R12


	)

55 
	mREG_R13
,

56 
	#REG_R13
 
REG_R13


	)

57 
	mREG_R14
,

58 
	#REG_R14
 
REG_R14


	)

59 
	mREG_R15
,

60 
	#REG_R15
 
REG_R15


	)

61 
	mREG_RDI
,

62 
	#REG_RDI
 
REG_RDI


	)

63 
	mREG_RSI
,

64 
	#REG_RSI
 
REG_RSI


	)

65 
	mREG_RBP
,

66 
	#REG_RBP
 
REG_RBP


	)

67 
	mREG_RBX
,

68 
	#REG_RBX
 
REG_RBX


	)

69 
	mREG_RDX
,

70 
	#REG_RDX
 
REG_RDX


	)

71 
	mREG_RAX
,

72 
	#REG_RAX
 
REG_RAX


	)

73 
	mREG_RCX
,

74 
	#REG_RCX
 
REG_RCX


	)

75 
	mREG_RSP
,

76 
	#REG_RSP
 
REG_RSP


	)

77 
	mREG_RIP
,

78 
	#REG_RIP
 
REG_RIP


	)

79 
	mREG_EFL
,

80 
	#REG_EFL
 
REG_EFL


	)

81 
	mREG_CSGSFS
,

82 
	#REG_CSGSFS
 
REG_CSGSFS


	)

83 
	mREG_ERR
,

84 
	#REG_ERR
 
REG_ERR


	)

85 
	mREG_TRAPNO
,

86 
	#REG_TRAPNO
 
REG_TRAPNO


	)

87 
	mREG_OLDMASK
,

88 
	#REG_OLDMASK
 
REG_OLDMASK


	)

89 
	mREG_CR2


90 
	#REG_CR2
 
REG_CR2


	)

94 
	s_libc_åx»g


96 
	msignifiÿnd
[4];

97 
	mexpÚ’t
;

98 
	m·ddšg
[3];

101 
	s_libc_xmm»g


103 
__ušt32_t
 
	m–em’t
[4];

106 
	s_libc_å¡©e


109 
__ušt16_t
 
	mcwd
;

110 
__ušt16_t
 
	mswd
;

111 
__ušt16_t
 
	máw
;

112 
__ušt16_t
 
	mfİ
;

113 
__ušt64_t
 
	mr
;

114 
__ušt64_t
 
	mrdp
;

115 
__ušt32_t
 
	mmxc¤
;

116 
__ušt32_t
 
	mmxü_mask
;

117 
_libc_åx»g
 
	m_¡
[8];

118 
_libc_xmm»g
 
	m_xmm
[16];

119 
__ušt32_t
 
	m·ddšg
[24];

123 
_libc_å¡©e
 *
	tå»g£t_t
;

128 
g»g£t_t
 
	mg»gs
;

130 
å»g£t_t
 
	må»gs
;

131 
	m__»£rved1
 [8];

132 } 
	tmcÚ‹xt_t
;

135 
	sucÚ‹xt


137 
	muc_æags
;

138 
ucÚ‹xt
 *
	muc_lšk
;

139 
¡ack_t
 
	muc_¡ack
;

140 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

141 
__sig£t_t
 
	muc_sigmask
;

142 
_libc_å¡©e
 
	m__å»gs_mem
;

143 } 
	tucÚ‹xt_t
;

148 
	tg»g_t
;

151 
	#NGREG
 19

	)

154 
g»g_t
 
	tg»g£t_t
[
NGREG
];

156 #ifdeà
__USE_GNU


160 
	mREG_GS
 = 0,

161 
	#REG_GS
 
REG_GS


	)

162 
	mREG_FS
,

163 
	#REG_FS
 
REG_FS


	)

164 
	mREG_ES
,

165 
	#REG_ES
 
REG_ES


	)

166 
	mREG_DS
,

167 
	#REG_DS
 
REG_DS


	)

168 
	mREG_EDI
,

169 
	#REG_EDI
 
REG_EDI


	)

170 
	mREG_ESI
,

171 
	#REG_ESI
 
REG_ESI


	)

172 
	mREG_EBP
,

173 
	#REG_EBP
 
REG_EBP


	)

174 
	mREG_ESP
,

175 
	#REG_ESP
 
REG_ESP


	)

176 
	mREG_EBX
,

177 
	#REG_EBX
 
REG_EBX


	)

178 
	mREG_EDX
,

179 
	#REG_EDX
 
REG_EDX


	)

180 
	mREG_ECX
,

181 
	#REG_ECX
 
REG_ECX


	)

182 
	mREG_EAX
,

183 
	#REG_EAX
 
REG_EAX


	)

184 
	mREG_TRAPNO
,

185 
	#REG_TRAPNO
 
REG_TRAPNO


	)

186 
	mREG_ERR
,

187 
	#REG_ERR
 
REG_ERR


	)

188 
	mREG_EIP
,

189 
	#REG_EIP
 
REG_EIP


	)

190 
	mREG_CS
,

191 
	#REG_CS
 
REG_CS


	)

192 
	mREG_EFL
,

193 
	#REG_EFL
 
REG_EFL


	)

194 
	mREG_UESP
,

195 
	#REG_UESP
 
REG_UESP


	)

196 
	mREG_SS


197 
	#REG_SS
 
REG_SS


	)

202 
	s_libc_å»g


204 
	msignifiÿnd
[4];

205 
	mexpÚ’t
;

208 
	s_libc_å¡©e


210 
	mcw
;

211 
	msw
;

212 
	mg
;

213 
	moff
;

214 
	mcs£l
;

215 
	md©aoff
;

216 
	md©a£l
;

217 
_libc_å»g
 
	m_¡
[8];

218 
	m¡©us
;

222 
_libc_å¡©e
 *
	tå»g£t_t
;

227 
g»g£t_t
 
	mg»gs
;

230 
å»g£t_t
 
	må»gs
;

231 
	mŞdmask
;

232 
	mü2
;

233 } 
	tmcÚ‹xt_t
;

236 
	sucÚ‹xt


238 
	muc_æags
;

239 
ucÚ‹xt
 *
	muc_lšk
;

240 
¡ack_t
 
	muc_¡ack
;

241 
mcÚ‹xt_t
 
	muc_mcÚ‹xt
;

242 
__sig£t_t
 
	muc_sigmask
;

243 
_libc_å¡©e
 
	m__å»gs_mem
;

244 } 
	tucÚ‹xt_t
;

	@
1
.
1
/usr/include
251
4780
AStarNode.cpp
AStarNode.h
Animation.cpp
Animation.h
AnimationManager.cpp
AnimationManager.h
AnimationSet.cpp
AnimationSet.h
Avatar.cpp
Avatar.h
BehaviorStandard.cpp
BehaviorStandard.h
CampaignManager.cpp
CampaignManager.h
CombatText.cpp
CombatText.h
EffectManager.cpp
EffectManager.h
Enemy.cpp
Enemy.h
EnemyBehavior.cpp
EnemyBehavior.h
EnemyGroupManager.cpp
EnemyGroupManager.h
EnemyManager.cpp
EnemyManager.h
Entity.cpp
Entity.h
FileParser.cpp
FileParser.h
FontEngine.cpp
FontEngine.h
GameState.cpp
GameState.h
GameStateConfig.cpp
GameStateConfig.h
GameStateLoad.cpp
GameStateLoad.h
GameStateNew.cpp
GameStateNew.h
GameStatePlay.cpp
GameStatePlay.h
GameStateTitle.cpp
GameStateTitle.h
GameSwitcher.cpp
GameSwitcher.h
GetText.cpp
GetText.h
Hazard.cpp
Hazard.h
HazardManager.cpp
HazardManager.h
ImageManager.cpp
ImageManager.h
InputState.cpp
InputState.h
ItemManager.cpp
ItemManager.h
ItemStorage.cpp
ItemStorage.h
Loot.cpp
Loot.h
LootManager.cpp
LootManager.h
MapCollision.cpp
MapCollision.h
MapRenderer.cpp
MapRenderer.h
Menu.cpp
Menu.h
MenuActionBar.cpp
MenuActionBar.h
MenuActiveEffects.cpp
MenuActiveEffects.h
MenuCharacter.cpp
MenuCharacter.h
MenuConfirm.cpp
MenuConfirm.h
MenuEnemy.cpp
MenuEnemy.h
MenuExit.cpp
MenuExit.h
MenuHUDLog.cpp
MenuHUDLog.h
MenuInventory.cpp
MenuInventory.h
MenuItemStorage.cpp
MenuItemStorage.h
MenuLog.cpp
MenuLog.h
MenuManager.cpp
MenuManager.h
MenuMiniMap.cpp
MenuMiniMap.h
MenuNPCActions.cpp
MenuNPCActions.h
MenuPowers.cpp
MenuPowers.h
MenuStash.cpp
MenuStash.h
MenuStatBar.cpp
MenuStatBar.h
MenuTalker.cpp
MenuTalker.h
MenuVendor.cpp
MenuVendor.h
MessageEngine.cpp
MessageEngine.h
ModManager.cpp
ModManager.h
NPC.cpp
NPC.h
NPCManager.cpp
NPCManager.h
PowerManager.cpp
PowerManager.h
QuestLog.cpp
QuestLog.h
SDL_gfxBlitFunc.c
SDL_gfxBlitFunc.h
SaveLoad.cpp
Settings.cpp
Settings.h
SharedResources.cpp
SharedResources.h
SoundManager.cpp
SoundManager.h
StatBlock.cpp
StatBlock.h
TileSet.cpp
TileSet.h
Utils.cpp
Utils.h
UtilsDebug.cpp
UtilsDebug.h
UtilsFileSystem.cpp
UtilsFileSystem.h
UtilsMath.h
UtilsParsing.cpp
UtilsParsing.h
Widget.cpp
Widget.h
WidgetButton.cpp
WidgetButton.h
WidgetCheckBox.cpp
WidgetCheckBox.h
WidgetInput.cpp
WidgetInput.h
WidgetLabel.cpp
WidgetLabel.h
WidgetListBox.cpp
WidgetListBox.h
WidgetScrollBar.cpp
WidgetScrollBar.h
WidgetScrollBox.cpp
WidgetScrollBox.h
WidgetSlider.cpp
WidgetSlider.h
WidgetTabControl.cpp
WidgetTabControl.h
WidgetTooltip.cpp
WidgetTooltip.h
main.cpp
resource.h
/usr/include/assert.h
/usr/include/dirent.h
/usr/include/errno.h
/usr/include/math.h
/usr/include/stdint.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/sys/stat.h
/usr/include/sys/types.h
/usr/include/unistd.h
/usr/include/alloca.h
/usr/include/bits/confname.h
/usr/include/bits/dirent.h
/usr/include/bits/environments.h
/usr/include/bits/errno.h
/usr/include/bits/huge_val.h
/usr/include/bits/huge_valf.h
/usr/include/bits/huge_vall.h
/usr/include/bits/inf.h
/usr/include/bits/mathcalls.h
/usr/include/bits/mathdef.h
/usr/include/bits/mathinline.h
/usr/include/bits/nan.h
/usr/include/bits/posix1_lim.h
/usr/include/bits/posix_opt.h
/usr/include/bits/pthreadtypes.h
/usr/include/bits/stat.h
/usr/include/bits/stdio-ldbl.h
/usr/include/bits/stdio.h
/usr/include/bits/stdio2.h
/usr/include/bits/stdio_lim.h
/usr/include/bits/stdlib-ldbl.h
/usr/include/bits/stdlib.h
/usr/include/bits/sys_errlist.h
/usr/include/bits/types.h
/usr/include/bits/unistd.h
/usr/include/bits/waitflags.h
/usr/include/bits/waitstatus.h
/usr/include/bits/wchar.h
/usr/include/bits/wordsize.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/getopt.h
/usr/include/libio.h
/usr/include/sys/select.h
/usr/include/sys/sysmacros.h
/usr/include/time.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/bits/byteswap.h
/usr/include/bits/endian.h
/usr/include/bits/libio-ldbl.h
/usr/include/bits/local_lim.h
/usr/include/bits/predefs.h
/usr/include/bits/select.h
/usr/include/bits/sigset.h
/usr/include/bits/stdio-lock.h
/usr/include/bits/time.h
/usr/include/bits/typesizes.h
/usr/include/ctype.h
/usr/include/gnu/stubs.h
/usr/include/linux/errno.h
/usr/include/sys/cdefs.h
/usr/include/asm/errno.h
/usr/include/bits/libc-lock.h
/usr/include/gconv.h
/usr/include/gnu/stubs-32.h
/usr/include/linux/limits.h
/usr/include/wchar.h
/usr/include/asm-generic/errno.h
/usr/include/bits/wchar-ldbl.h
/usr/include/bits/wchar2.h
/usr/include/gnu/option-groups.h
/usr/include/pthread.h
/usr/include/wctype.h
/usr/include/asm-generic/errno-base.h
/usr/include/bits/setjmp.h
/usr/include/sched.h
/usr/include/signal.h
/usr/include/bits/sched.h
/usr/include/bits/sigaction.h
/usr/include/bits/sigcontext.h
/usr/include/bits/siginfo.h
/usr/include/bits/signum.h
/usr/include/bits/sigstack.h
/usr/include/bits/sigthread.h
/usr/include/sys/ucontext.h
